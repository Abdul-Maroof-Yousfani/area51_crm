(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function st(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var X2={exports:{}},ny={},Q2={exports:{}},Ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zf=Symbol.for("react.element"),P3=Symbol.for("react.portal"),k3=Symbol.for("react.fragment"),I3=Symbol.for("react.strict_mode"),O3=Symbol.for("react.profiler"),R3=Symbol.for("react.provider"),$3=Symbol.for("react.context"),D3=Symbol.for("react.forward_ref"),M3=Symbol.for("react.suspense"),L3=Symbol.for("react.memo"),F3=Symbol.for("react.lazy"),iE=Symbol.iterator;function V3(t){return t===null||typeof t!="object"?null:(t=iE&&t[iE]||t["@@iterator"],typeof t=="function"?t:null)}var J2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z2=Object.assign,eI={};function Ic(t,e,n){this.props=t,this.context=e,this.refs=eI,this.updater=n||J2}Ic.prototype.isReactComponent={};Ic.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ic.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function tI(){}tI.prototype=Ic.prototype;function U1(t,e,n){this.props=t,this.context=e,this.refs=eI,this.updater=n||J2}var z1=U1.prototype=new tI;z1.constructor=U1;Z2(z1,Ic.prototype);z1.isPureReactComponent=!0;var sE=Array.isArray,nI=Object.prototype.hasOwnProperty,q1={current:null},rI={key:!0,ref:!0,__self:!0,__source:!0};function iI(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)nI.call(e,r)&&!rI.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:zf,type:t,key:s,ref:a,props:i,_owner:q1.current}}function B3(t,e){return{$$typeof:zf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function W1(t){return typeof t=="object"&&t!==null&&t.$$typeof===zf}function U3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var aE=/\/+/g;function e0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?U3(""+t.key):e.toString(36)}function Ep(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case zf:case P3:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+e0(a,0):r,sE(i)?(n="",t!=null&&(n=t.replace(aE,"$&/")+"/"),Ep(i,e,n,"",function(u){return u})):i!=null&&(W1(i)&&(i=B3(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(aE,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",sE(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+e0(s,l);a+=Ep(s,e,n,c,i)}else if(c=V3(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+e0(s,l++),a+=Ep(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function $h(t,e,n){if(t==null)return t;var r=[],i=0;return Ep(t,r,"","",function(s){return e.call(n,s,i++)}),r}function z3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ln={current:null},Cp={transition:null},q3={ReactCurrentDispatcher:Ln,ReactCurrentBatchConfig:Cp,ReactCurrentOwner:q1};function sI(){throw Error("act(...) is not supported in production builds of React.")}Ue.Children={map:$h,forEach:function(t,e,n){$h(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $h(t,function(){e++}),e},toArray:function(t){return $h(t,function(e){return e})||[]},only:function(t){if(!W1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ue.Component=Ic;Ue.Fragment=k3;Ue.Profiler=O3;Ue.PureComponent=U1;Ue.StrictMode=I3;Ue.Suspense=M3;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q3;Ue.act=sI;Ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Z2({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=q1.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)nI.call(e,c)&&!rI.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:zf,type:t.type,key:i,ref:s,props:r,_owner:a}};Ue.createContext=function(t){return t={$$typeof:$3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:R3,_context:t},t.Consumer=t};Ue.createElement=iI;Ue.createFactory=function(t){var e=iI.bind(null,t);return e.type=t,e};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(t){return{$$typeof:D3,render:t}};Ue.isValidElement=W1;Ue.lazy=function(t){return{$$typeof:F3,_payload:{_status:-1,_result:t},_init:z3}};Ue.memo=function(t,e){return{$$typeof:L3,type:t,compare:e===void 0?null:e}};Ue.startTransition=function(t){var e=Cp.transition;Cp.transition={};try{t()}finally{Cp.transition=e}};Ue.unstable_act=sI;Ue.useCallback=function(t,e){return Ln.current.useCallback(t,e)};Ue.useContext=function(t){return Ln.current.useContext(t)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(t){return Ln.current.useDeferredValue(t)};Ue.useEffect=function(t,e){return Ln.current.useEffect(t,e)};Ue.useId=function(){return Ln.current.useId()};Ue.useImperativeHandle=function(t,e,n){return Ln.current.useImperativeHandle(t,e,n)};Ue.useInsertionEffect=function(t,e){return Ln.current.useInsertionEffect(t,e)};Ue.useLayoutEffect=function(t,e){return Ln.current.useLayoutEffect(t,e)};Ue.useMemo=function(t,e){return Ln.current.useMemo(t,e)};Ue.useReducer=function(t,e,n){return Ln.current.useReducer(t,e,n)};Ue.useRef=function(t){return Ln.current.useRef(t)};Ue.useState=function(t){return Ln.current.useState(t)};Ue.useSyncExternalStore=function(t,e,n){return Ln.current.useSyncExternalStore(t,e,n)};Ue.useTransition=function(){return Ln.current.useTransition()};Ue.version="18.3.1";Q2.exports=Ue;var k=Q2.exports;const L=st(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W3=k,G3=Symbol.for("react.element"),H3=Symbol.for("react.fragment"),K3=Object.prototype.hasOwnProperty,Y3=W3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,X3={key:!0,ref:!0,__self:!0,__source:!0};function aI(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)K3.call(e,r)&&!X3.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:G3,type:t,key:s,ref:a,props:i,_owner:Y3.current}}ny.Fragment=H3;ny.jsx=aI;ny.jsxs=aI;X2.exports=ny;var o=X2.exports,Tx={},oI={exports:{}},pr={},lI={exports:{}},cI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,q){var H=F.length;F.push(q);e:for(;0<H;){var Z=H-1>>>1,Y=F[Z];if(0<i(Y,q))F[Z]=q,F[H]=Y,H=Z;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var q=F[0],H=F.pop();if(H!==q){F[0]=H;e:for(var Z=0,Y=F.length,re=Y>>>1;Z<re;){var z=2*(Z+1)-1,se=F[z],me=z+1,ze=F[me];if(0>i(se,H))me<Y&&0>i(ze,se)?(F[Z]=ze,F[me]=H,Z=me):(F[Z]=se,F[z]=H,Z=z);else if(me<Y&&0>i(ze,H))F[Z]=ze,F[me]=H,Z=me;else break e}}return q}function i(F,q){var H=F.sortIndex-q.sortIndex;return H!==0?H:F.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,y=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(F){for(var q=n(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=F)r(u),q.sortIndex=q.expirationTime,e(c,q);else break;q=n(u)}}function N(F){if(g=!1,b(F),!y)if(n(c)!==null)y=!0,B(A);else{var q=n(u);q!==null&&V(N,q.startTime-F)}}function A(F,q){y=!1,g&&(g=!1,x(S),S=-1),m=!0;var H=h;try{for(b(q),f=n(c);f!==null&&(!(f.expirationTime>q)||F&&!T());){var Z=f.callback;if(typeof Z=="function"){f.callback=null,h=f.priorityLevel;var Y=Z(f.expirationTime<=q);q=t.unstable_now(),typeof Y=="function"?f.callback=Y:f===n(c)&&r(c),b(q)}else r(c);f=n(c)}if(f!==null)var re=!0;else{var z=n(u);z!==null&&V(N,z.startTime-q),re=!1}return re}finally{f=null,h=H,m=!1}}var E=!1,C=null,S=-1,_=5,P=-1;function T(){return!(t.unstable_now()-P<_)}function O(){if(C!==null){var F=t.unstable_now();P=F;var q=!0;try{q=C(!0,F)}finally{q?R():(E=!1,C=null)}}else E=!1}var R;if(typeof w=="function")R=function(){w(O)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,D=M.port2;M.port1.onmessage=O,R=function(){D.postMessage(null)}}else R=function(){v(O,0)};function B(F){C=F,E||(E=!0,R())}function V(F,q){S=v(function(){F(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,B(A))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(F){switch(h){case 1:case 2:case 3:var q=3;break;default:q=h}var H=h;h=q;try{return F()}finally{h=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,q){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var H=h;h=F;try{return q()}finally{h=H}},t.unstable_scheduleCallback=function(F,q,H){var Z=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Z+H:Z):H=Z,F){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=H+Y,F={id:d++,callback:q,priorityLevel:F,startTime:H,expirationTime:Y,sortIndex:-1},H>Z?(F.sortIndex=H,e(u,F),n(c)===null&&F===n(u)&&(g?(x(S),S=-1):g=!0,V(N,H-Z))):(F.sortIndex=Y,e(c,F),y||m||(y=!0,B(A))),F},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(F){var q=h;return function(){var H=h;h=q;try{return F.apply(this,arguments)}finally{h=H}}}})(cI);lI.exports=cI;var Q3=lI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J3=k,fr=Q3;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uI=new Set,Ad={};function Oo(t,e){Bl(t,e),Bl(t+"Capture",e)}function Bl(t,e){for(Ad[t]=e,t=0;t<e.length;t++)uI.add(e[t])}var es=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Px=Object.prototype.hasOwnProperty,Z3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oE={},lE={};function eF(t){return Px.call(lE,t)?!0:Px.call(oE,t)?!1:Z3.test(t)?lE[t]=!0:(oE[t]=!0,!1)}function tF(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nF(t,e,n,r){if(e===null||typeof e>"u"||tF(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Fn(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var yn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yn[t]=new Fn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yn[e]=new Fn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yn[t]=new Fn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yn[t]=new Fn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yn[t]=new Fn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yn[t]=new Fn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yn[t]=new Fn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yn[t]=new Fn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yn[t]=new Fn(t,5,!1,t.toLowerCase(),null,!1,!1)});var G1=/[\-:]([a-z])/g;function H1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(G1,H1);yn[e]=new Fn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(G1,H1);yn[e]=new Fn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(G1,H1);yn[e]=new Fn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yn[t]=new Fn(t,1,!1,t.toLowerCase(),null,!1,!1)});yn.xlinkHref=new Fn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yn[t]=new Fn(t,1,!1,t.toLowerCase(),null,!0,!0)});function K1(t,e,n,r){var i=yn.hasOwnProperty(e)?yn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nF(e,n,i,r)&&(n=null),r||i===null?eF(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ys=J3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dh=Symbol.for("react.element"),ll=Symbol.for("react.portal"),cl=Symbol.for("react.fragment"),Y1=Symbol.for("react.strict_mode"),kx=Symbol.for("react.profiler"),dI=Symbol.for("react.provider"),fI=Symbol.for("react.context"),X1=Symbol.for("react.forward_ref"),Ix=Symbol.for("react.suspense"),Ox=Symbol.for("react.suspense_list"),Q1=Symbol.for("react.memo"),Is=Symbol.for("react.lazy"),hI=Symbol.for("react.offscreen"),cE=Symbol.iterator;function bu(t){return t===null||typeof t!="object"?null:(t=cE&&t[cE]||t["@@iterator"],typeof t=="function"?t:null)}var Pt=Object.assign,t0;function zu(t){if(t0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);t0=e&&e[1]||""}return`
`+t0+t}var n0=!1;function r0(t,e){if(!t||n0)return"";n0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{n0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zu(t):""}function rF(t){switch(t.tag){case 5:return zu(t.type);case 16:return zu("Lazy");case 13:return zu("Suspense");case 19:return zu("SuspenseList");case 0:case 2:case 15:return t=r0(t.type,!1),t;case 11:return t=r0(t.type.render,!1),t;case 1:return t=r0(t.type,!0),t;default:return""}}function Rx(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case cl:return"Fragment";case ll:return"Portal";case kx:return"Profiler";case Y1:return"StrictMode";case Ix:return"Suspense";case Ox:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case fI:return(t.displayName||"Context")+".Consumer";case dI:return(t._context.displayName||"Context")+".Provider";case X1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Q1:return e=t.displayName||null,e!==null?e:Rx(t.type)||"Memo";case Is:e=t._payload,t=t._init;try{return Rx(t(e))}catch{}}return null}function iF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rx(e);case 8:return e===Y1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function da(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function pI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sF(t){var e=pI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Mh(t){t._valueTracker||(t._valueTracker=sF(t))}function mI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=pI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function nm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $x(t,e){var n=e.checked;return Pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function uE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=da(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gI(t,e){e=e.checked,e!=null&&K1(t,"checked",e,!1)}function Dx(t,e){gI(t,e);var n=da(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mx(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mx(t,e.type,da(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function dE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Mx(t,e,n){(e!=="number"||nm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var qu=Array.isArray;function El(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+da(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Lx(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return Pt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ne(92));if(qu(n)){if(1<n.length)throw Error(ne(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:da(n)}}function yI(t,e){var n=da(e.value),r=da(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fx(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Lh,xI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Lh=Lh||document.createElement("div"),Lh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Lh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ed(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aF=["Webkit","ms","Moz","O"];Object.keys(nd).forEach(function(t){aF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nd[e]=nd[t]})});function bI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||nd.hasOwnProperty(t)&&nd[t]?(""+e).trim():e+"px"}function wI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=bI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var oF=Pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vx(t,e){if(e){if(oF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function Bx(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ux=null;function J1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zx=null,Cl=null,jl=null;function pE(t){if(t=Gf(t)){if(typeof zx!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=oy(e),zx(t.stateNode,t.type,e))}}function _I(t){Cl?jl?jl.push(t):jl=[t]:Cl=t}function SI(){if(Cl){var t=Cl,e=jl;if(jl=Cl=null,pE(t),e)for(t=0;t<e.length;t++)pE(e[t])}}function NI(t,e){return t(e)}function AI(){}var i0=!1;function EI(t,e,n){if(i0)return t(e,n);i0=!0;try{return NI(t,e,n)}finally{i0=!1,(Cl!==null||jl!==null)&&(AI(),SI())}}function Cd(t,e){var n=t.stateNode;if(n===null)return null;var r=oy(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ne(231,e,typeof n));return n}var qx=!1;if(es)try{var wu={};Object.defineProperty(wu,"passive",{get:function(){qx=!0}}),window.addEventListener("test",wu,wu),window.removeEventListener("test",wu,wu)}catch{qx=!1}function lF(t,e,n,r,i,s,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var rd=!1,rm=null,im=!1,Wx=null,cF={onError:function(t){rd=!0,rm=t}};function uF(t,e,n,r,i,s,a,l,c){rd=!1,rm=null,lF.apply(cF,arguments)}function dF(t,e,n,r,i,s,a,l,c){if(uF.apply(this,arguments),rd){if(rd){var u=rm;rd=!1,rm=null}else throw Error(ne(198));im||(im=!0,Wx=u)}}function Ro(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function CI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mE(t){if(Ro(t)!==t)throw Error(ne(188))}function fF(t){var e=t.alternate;if(!e){if(e=Ro(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return mE(i),t;if(s===r)return mE(i),e;s=s.sibling}throw Error(ne(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?t:e}function jI(t){return t=fF(t),t!==null?TI(t):null}function TI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=TI(t);if(e!==null)return e;t=t.sibling}return null}var PI=fr.unstable_scheduleCallback,gE=fr.unstable_cancelCallback,hF=fr.unstable_shouldYield,pF=fr.unstable_requestPaint,Mt=fr.unstable_now,mF=fr.unstable_getCurrentPriorityLevel,Z1=fr.unstable_ImmediatePriority,kI=fr.unstable_UserBlockingPriority,sm=fr.unstable_NormalPriority,gF=fr.unstable_LowPriority,II=fr.unstable_IdlePriority,ry=null,ci=null;function yF(t){if(ci&&typeof ci.onCommitFiberRoot=="function")try{ci.onCommitFiberRoot(ry,t,void 0,(t.current.flags&128)===128)}catch{}}var Gr=Math.clz32?Math.clz32:bF,vF=Math.log,xF=Math.LN2;function bF(t){return t>>>=0,t===0?32:31-(vF(t)/xF|0)|0}var Fh=64,Vh=4194304;function Wu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function am(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=Wu(l):(s&=a,s!==0&&(r=Wu(s)))}else a=n&~i,a!==0?r=Wu(a):s!==0&&(r=Wu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gr(e),i=1<<n,r|=t[n],e&=~i;return r}function wF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _F(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Gr(s),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=wF(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function Gx(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function OI(){var t=Fh;return Fh<<=1,!(Fh&4194240)&&(Fh=64),t}function s0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gr(e),t[e]=n}function SF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Gr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function e_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var rt=0;function RI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $I,t_,DI,MI,LI,Hx=!1,Bh=[],Xs=null,Qs=null,Js=null,jd=new Map,Td=new Map,$s=[],NF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yE(t,e){switch(t){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Js=null;break;case"pointerover":case"pointerout":jd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Td.delete(e.pointerId)}}function _u(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Gf(e),e!==null&&t_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function AF(t,e,n,r,i){switch(e){case"focusin":return Xs=_u(Xs,t,e,n,r,i),!0;case"dragenter":return Qs=_u(Qs,t,e,n,r,i),!0;case"mouseover":return Js=_u(Js,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return jd.set(s,_u(jd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Td.set(s,_u(Td.get(s)||null,t,e,n,r,i)),!0}return!1}function FI(t){var e=Wa(t.target);if(e!==null){var n=Ro(e);if(n!==null){if(e=n.tag,e===13){if(e=CI(n),e!==null){t.blockedOn=e,LI(t.priority,function(){DI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Kx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ux=r,n.target.dispatchEvent(r),Ux=null}else return e=Gf(n),e!==null&&t_(e),t.blockedOn=n,!1;e.shift()}return!0}function vE(t,e,n){jp(t)&&n.delete(e)}function EF(){Hx=!1,Xs!==null&&jp(Xs)&&(Xs=null),Qs!==null&&jp(Qs)&&(Qs=null),Js!==null&&jp(Js)&&(Js=null),jd.forEach(vE),Td.forEach(vE)}function Su(t,e){t.blockedOn===e&&(t.blockedOn=null,Hx||(Hx=!0,fr.unstable_scheduleCallback(fr.unstable_NormalPriority,EF)))}function Pd(t){function e(i){return Su(i,t)}if(0<Bh.length){Su(Bh[0],t);for(var n=1;n<Bh.length;n++){var r=Bh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xs!==null&&Su(Xs,t),Qs!==null&&Su(Qs,t),Js!==null&&Su(Js,t),jd.forEach(e),Td.forEach(e),n=0;n<$s.length;n++)r=$s[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<$s.length&&(n=$s[0],n.blockedOn===null);)FI(n),n.blockedOn===null&&$s.shift()}var Tl=ys.ReactCurrentBatchConfig,om=!0;function CF(t,e,n,r){var i=rt,s=Tl.transition;Tl.transition=null;try{rt=1,n_(t,e,n,r)}finally{rt=i,Tl.transition=s}}function jF(t,e,n,r){var i=rt,s=Tl.transition;Tl.transition=null;try{rt=4,n_(t,e,n,r)}finally{rt=i,Tl.transition=s}}function n_(t,e,n,r){if(om){var i=Kx(t,e,n,r);if(i===null)m0(t,e,r,lm,n),yE(t,r);else if(AF(i,t,e,n,r))r.stopPropagation();else if(yE(t,r),e&4&&-1<NF.indexOf(t)){for(;i!==null;){var s=Gf(i);if(s!==null&&$I(s),s=Kx(t,e,n,r),s===null&&m0(t,e,r,lm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else m0(t,e,r,null,n)}}var lm=null;function Kx(t,e,n,r){if(lm=null,t=J1(r),t=Wa(t),t!==null)if(e=Ro(t),e===null)t=null;else if(n=e.tag,n===13){if(t=CI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return lm=t,null}function VI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mF()){case Z1:return 1;case kI:return 4;case sm:case gF:return 16;case II:return 536870912;default:return 16}default:return 16}}var zs=null,r_=null,Tp=null;function BI(){if(Tp)return Tp;var t,e=r_,n=e.length,r,i="value"in zs?zs.value:zs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Tp=i.slice(t,1<r?1-r:void 0)}function Pp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Uh(){return!0}function xE(){return!1}function mr(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Uh:xE,this.isPropagationStopped=xE,this}return Pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Uh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Uh)},persist:function(){},isPersistent:Uh}),e}var Oc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},i_=mr(Oc),Wf=Pt({},Oc,{view:0,detail:0}),TF=mr(Wf),a0,o0,Nu,iy=Pt({},Wf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:s_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Nu&&(Nu&&t.type==="mousemove"?(a0=t.screenX-Nu.screenX,o0=t.screenY-Nu.screenY):o0=a0=0,Nu=t),a0)},movementY:function(t){return"movementY"in t?t.movementY:o0}}),bE=mr(iy),PF=Pt({},iy,{dataTransfer:0}),kF=mr(PF),IF=Pt({},Wf,{relatedTarget:0}),l0=mr(IF),OF=Pt({},Oc,{animationName:0,elapsedTime:0,pseudoElement:0}),RF=mr(OF),$F=Pt({},Oc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),DF=mr($F),MF=Pt({},Oc,{data:0}),wE=mr(MF),LF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},VF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=VF[t])?!!e[t]:!1}function s_(){return BF}var UF=Pt({},Wf,{key:function(t){if(t.key){var e=LF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:s_,charCode:function(t){return t.type==="keypress"?Pp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zF=mr(UF),qF=Pt({},iy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_E=mr(qF),WF=Pt({},Wf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:s_}),GF=mr(WF),HF=Pt({},Oc,{propertyName:0,elapsedTime:0,pseudoElement:0}),KF=mr(HF),YF=Pt({},iy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),XF=mr(YF),QF=[9,13,27,32],a_=es&&"CompositionEvent"in window,id=null;es&&"documentMode"in document&&(id=document.documentMode);var JF=es&&"TextEvent"in window&&!id,UI=es&&(!a_||id&&8<id&&11>=id),SE=" ",NE=!1;function zI(t,e){switch(t){case"keyup":return QF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ul=!1;function ZF(t,e){switch(t){case"compositionend":return qI(e);case"keypress":return e.which!==32?null:(NE=!0,SE);case"textInput":return t=e.data,t===SE&&NE?null:t;default:return null}}function eV(t,e){if(ul)return t==="compositionend"||!a_&&zI(t,e)?(t=BI(),Tp=r_=zs=null,ul=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return UI&&e.locale!=="ko"?null:e.data;default:return null}}var tV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function AE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!tV[t.type]:e==="textarea"}function WI(t,e,n,r){_I(r),e=cm(e,"onChange"),0<e.length&&(n=new i_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var sd=null,kd=null;function nV(t){nO(t,0)}function sy(t){var e=hl(t);if(mI(e))return t}function rV(t,e){if(t==="change")return e}var GI=!1;if(es){var c0;if(es){var u0="oninput"in document;if(!u0){var EE=document.createElement("div");EE.setAttribute("oninput","return;"),u0=typeof EE.oninput=="function"}c0=u0}else c0=!1;GI=c0&&(!document.documentMode||9<document.documentMode)}function CE(){sd&&(sd.detachEvent("onpropertychange",HI),kd=sd=null)}function HI(t){if(t.propertyName==="value"&&sy(kd)){var e=[];WI(e,kd,t,J1(t)),EI(nV,e)}}function iV(t,e,n){t==="focusin"?(CE(),sd=e,kd=n,sd.attachEvent("onpropertychange",HI)):t==="focusout"&&CE()}function sV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sy(kd)}function aV(t,e){if(t==="click")return sy(e)}function oV(t,e){if(t==="input"||t==="change")return sy(e)}function lV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xr=typeof Object.is=="function"?Object.is:lV;function Id(t,e){if(Xr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Px.call(e,i)||!Xr(t[i],e[i]))return!1}return!0}function jE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function TE(t,e){var n=jE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jE(n)}}function KI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?KI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function YI(){for(var t=window,e=nm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=nm(t.document)}return e}function o_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function cV(t){var e=YI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&KI(n.ownerDocument.documentElement,n)){if(r!==null&&o_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=TE(n,s);var a=TE(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uV=es&&"documentMode"in document&&11>=document.documentMode,dl=null,Yx=null,ad=null,Xx=!1;function PE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xx||dl==null||dl!==nm(r)||(r=dl,"selectionStart"in r&&o_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ad&&Id(ad,r)||(ad=r,r=cm(Yx,"onSelect"),0<r.length&&(e=new i_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=dl)))}function zh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fl={animationend:zh("Animation","AnimationEnd"),animationiteration:zh("Animation","AnimationIteration"),animationstart:zh("Animation","AnimationStart"),transitionend:zh("Transition","TransitionEnd")},d0={},XI={};es&&(XI=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function ay(t){if(d0[t])return d0[t];if(!fl[t])return t;var e=fl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in XI)return d0[t]=e[n];return t}var QI=ay("animationend"),JI=ay("animationiteration"),ZI=ay("animationstart"),eO=ay("transitionend"),tO=new Map,kE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xa(t,e){tO.set(t,e),Oo(e,[t])}for(var f0=0;f0<kE.length;f0++){var h0=kE[f0],dV=h0.toLowerCase(),fV=h0[0].toUpperCase()+h0.slice(1);xa(dV,"on"+fV)}xa(QI,"onAnimationEnd");xa(JI,"onAnimationIteration");xa(ZI,"onAnimationStart");xa("dblclick","onDoubleClick");xa("focusin","onFocus");xa("focusout","onBlur");xa(eO,"onTransitionEnd");Bl("onMouseEnter",["mouseout","mouseover"]);Bl("onMouseLeave",["mouseout","mouseover"]);Bl("onPointerEnter",["pointerout","pointerover"]);Bl("onPointerLeave",["pointerout","pointerover"]);Oo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gu));function IE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dF(r,e,void 0,t),t.currentTarget=null}function nO(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;IE(i,l,u),s=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;IE(i,l,u),s=c}}}if(im)throw t=Wx,im=!1,Wx=null,t}function vt(t,e){var n=e[tb];n===void 0&&(n=e[tb]=new Set);var r=t+"__bubble";n.has(r)||(rO(e,t,2,!1),n.add(r))}function p0(t,e,n){var r=0;e&&(r|=4),rO(n,t,r,e)}var qh="_reactListening"+Math.random().toString(36).slice(2);function Od(t){if(!t[qh]){t[qh]=!0,uI.forEach(function(n){n!=="selectionchange"&&(hV.has(n)||p0(n,!1,t),p0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[qh]||(e[qh]=!0,p0("selectionchange",!1,e))}}function rO(t,e,n,r){switch(VI(e)){case 1:var i=CF;break;case 4:i=jF;break;default:i=n_}n=i.bind(null,e,n,t),i=void 0,!qx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function m0(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=Wa(l),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}l=l.parentNode}}r=r.return}EI(function(){var u=s,d=J1(n),f=[];e:{var h=tO.get(t);if(h!==void 0){var m=i_,y=t;switch(t){case"keypress":if(Pp(n)===0)break e;case"keydown":case"keyup":m=zF;break;case"focusin":y="focus",m=l0;break;case"focusout":y="blur",m=l0;break;case"beforeblur":case"afterblur":m=l0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=bE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=kF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=GF;break;case QI:case JI:case ZI:m=RF;break;case eO:m=KF;break;case"scroll":m=TF;break;case"wheel":m=XF;break;case"copy":case"cut":case"paste":m=DF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=_E}var g=(e&4)!==0,v=!g&&t==="scroll",x=g?h!==null?h+"Capture":null:h;g=[];for(var w=u,b;w!==null;){b=w;var N=b.stateNode;if(b.tag===5&&N!==null&&(b=N,x!==null&&(N=Cd(w,x),N!=null&&g.push(Rd(w,N,b)))),v)break;w=w.return}0<g.length&&(h=new m(h,y,null,n,d),f.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==Ux&&(y=n.relatedTarget||n.fromElement)&&(Wa(y)||y[ts]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=u,y=y?Wa(y):null,y!==null&&(v=Ro(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(g=bE,N="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(g=_E,N="onPointerLeave",x="onPointerEnter",w="pointer"),v=m==null?h:hl(m),b=y==null?h:hl(y),h=new g(N,w+"leave",m,n,d),h.target=v,h.relatedTarget=b,N=null,Wa(d)===u&&(g=new g(x,w+"enter",y,n,d),g.target=b,g.relatedTarget=v,N=g),v=N,m&&y)t:{for(g=m,x=y,w=0,b=g;b;b=el(b))w++;for(b=0,N=x;N;N=el(N))b++;for(;0<w-b;)g=el(g),w--;for(;0<b-w;)x=el(x),b--;for(;w--;){if(g===x||x!==null&&g===x.alternate)break t;g=el(g),x=el(x)}g=null}else g=null;m!==null&&OE(f,h,m,g,!1),y!==null&&v!==null&&OE(f,v,y,g,!0)}}e:{if(h=u?hl(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var A=rV;else if(AE(h))if(GI)A=oV;else{A=sV;var E=iV}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(A=aV);if(A&&(A=A(t,u))){WI(f,A,n,d);break e}E&&E(t,h,u),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Mx(h,"number",h.value)}switch(E=u?hl(u):window,t){case"focusin":(AE(E)||E.contentEditable==="true")&&(dl=E,Yx=u,ad=null);break;case"focusout":ad=Yx=dl=null;break;case"mousedown":Xx=!0;break;case"contextmenu":case"mouseup":case"dragend":Xx=!1,PE(f,n,d);break;case"selectionchange":if(uV)break;case"keydown":case"keyup":PE(f,n,d)}var C;if(a_)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else ul?zI(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(UI&&n.locale!=="ko"&&(ul||S!=="onCompositionStart"?S==="onCompositionEnd"&&ul&&(C=BI()):(zs=d,r_="value"in zs?zs.value:zs.textContent,ul=!0)),E=cm(u,S),0<E.length&&(S=new wE(S,t,null,n,d),f.push({event:S,listeners:E}),C?S.data=C:(C=qI(n),C!==null&&(S.data=C)))),(C=JF?ZF(t,n):eV(t,n))&&(u=cm(u,"onBeforeInput"),0<u.length&&(d=new wE("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=C))}nO(f,e)})}function Rd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function cm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Cd(t,n),s!=null&&r.unshift(Rd(t,s,i)),s=Cd(t,e),s!=null&&r.push(Rd(t,s,i))),t=t.return}return r}function el(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function OE(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,i?(c=Cd(n,s),c!=null&&a.unshift(Rd(n,c,l))):i||(c=Cd(n,s),c!=null&&a.push(Rd(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var pV=/\r\n?/g,mV=/\u0000|\uFFFD/g;function RE(t){return(typeof t=="string"?t:""+t).replace(pV,`
`).replace(mV,"")}function Wh(t,e,n){if(e=RE(e),RE(t)!==e&&n)throw Error(ne(425))}function um(){}var Qx=null,Jx=null;function Zx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var eb=typeof setTimeout=="function"?setTimeout:void 0,gV=typeof clearTimeout=="function"?clearTimeout:void 0,$E=typeof Promise=="function"?Promise:void 0,yV=typeof queueMicrotask=="function"?queueMicrotask:typeof $E<"u"?function(t){return $E.resolve(null).then(t).catch(vV)}:eb;function vV(t){setTimeout(function(){throw t})}function g0(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Pd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Pd(e)}function Zs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function DE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Rc=Math.random().toString(36).slice(2),si="__reactFiber$"+Rc,$d="__reactProps$"+Rc,ts="__reactContainer$"+Rc,tb="__reactEvents$"+Rc,xV="__reactListeners$"+Rc,bV="__reactHandles$"+Rc;function Wa(t){var e=t[si];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ts]||n[si]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=DE(t);t!==null;){if(n=t[si])return n;t=DE(t)}return e}t=n,n=t.parentNode}return null}function Gf(t){return t=t[si]||t[ts],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function hl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function oy(t){return t[$d]||null}var nb=[],pl=-1;function ba(t){return{current:t}}function _t(t){0>pl||(t.current=nb[pl],nb[pl]=null,pl--)}function pt(t,e){pl++,nb[pl]=t.current,t.current=e}var fa={},kn=ba(fa),Gn=ba(!1),co=fa;function Ul(t,e){var n=t.type.contextTypes;if(!n)return fa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Hn(t){return t=t.childContextTypes,t!=null}function dm(){_t(Gn),_t(kn)}function ME(t,e,n){if(kn.current!==fa)throw Error(ne(168));pt(kn,e),pt(Gn,n)}function iO(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ne(108,iF(t)||"Unknown",i));return Pt({},n,r)}function fm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fa,co=kn.current,pt(kn,t),pt(Gn,Gn.current),!0}function LE(t,e,n){var r=t.stateNode;if(!r)throw Error(ne(169));n?(t=iO(t,e,co),r.__reactInternalMemoizedMergedChildContext=t,_t(Gn),_t(kn),pt(kn,t)):_t(Gn),pt(Gn,n)}var Fi=null,ly=!1,y0=!1;function sO(t){Fi===null?Fi=[t]:Fi.push(t)}function wV(t){ly=!0,sO(t)}function wa(){if(!y0&&Fi!==null){y0=!0;var t=0,e=rt;try{var n=Fi;for(rt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fi=null,ly=!1}catch(i){throw Fi!==null&&(Fi=Fi.slice(t+1)),PI(Z1,wa),i}finally{rt=e,y0=!1}}return null}var ml=[],gl=0,hm=null,pm=0,wr=[],_r=0,uo=null,Vi=1,Bi="";function Ma(t,e){ml[gl++]=pm,ml[gl++]=hm,hm=t,pm=e}function aO(t,e,n){wr[_r++]=Vi,wr[_r++]=Bi,wr[_r++]=uo,uo=t;var r=Vi;t=Bi;var i=32-Gr(r)-1;r&=~(1<<i),n+=1;var s=32-Gr(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Vi=1<<32-Gr(e)+i|n<<i|r,Bi=s+t}else Vi=1<<s|n<<i|r,Bi=t}function l_(t){t.return!==null&&(Ma(t,1),aO(t,1,0))}function c_(t){for(;t===hm;)hm=ml[--gl],ml[gl]=null,pm=ml[--gl],ml[gl]=null;for(;t===uo;)uo=wr[--_r],wr[_r]=null,Bi=wr[--_r],wr[_r]=null,Vi=wr[--_r],wr[_r]=null}var cr=null,or=null,Nt=!1,zr=null;function oO(t,e){var n=Ar(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function FE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cr=t,or=Zs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cr=t,or=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=uo!==null?{id:Vi,overflow:Bi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ar(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cr=t,or=null,!0):!1;default:return!1}}function rb(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ib(t){if(Nt){var e=or;if(e){var n=e;if(!FE(t,e)){if(rb(t))throw Error(ne(418));e=Zs(n.nextSibling);var r=cr;e&&FE(t,e)?oO(r,n):(t.flags=t.flags&-4097|2,Nt=!1,cr=t)}}else{if(rb(t))throw Error(ne(418));t.flags=t.flags&-4097|2,Nt=!1,cr=t}}}function VE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cr=t}function Gh(t){if(t!==cr)return!1;if(!Nt)return VE(t),Nt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zx(t.type,t.memoizedProps)),e&&(e=or)){if(rb(t))throw lO(),Error(ne(418));for(;e;)oO(t,e),e=Zs(e.nextSibling)}if(VE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){or=Zs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}or=null}}else or=cr?Zs(t.stateNode.nextSibling):null;return!0}function lO(){for(var t=or;t;)t=Zs(t.nextSibling)}function zl(){or=cr=null,Nt=!1}function u_(t){zr===null?zr=[t]:zr.push(t)}var _V=ys.ReactCurrentBatchConfig;function Au(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,t))}return t}function Hh(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function BE(t){var e=t._init;return e(t._payload)}function cO(t){function e(x,w){if(t){var b=x.deletions;b===null?(x.deletions=[w],x.flags|=16):b.push(w)}}function n(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function i(x,w){return x=ra(x,w),x.index=0,x.sibling=null,x}function s(x,w,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<w?(x.flags|=2,w):b):(x.flags|=2,w)):(x.flags|=1048576,w)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,w,b,N){return w===null||w.tag!==6?(w=N0(b,x.mode,N),w.return=x,w):(w=i(w,b),w.return=x,w)}function c(x,w,b,N){var A=b.type;return A===cl?d(x,w,b.props.children,N,b.key):w!==null&&(w.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Is&&BE(A)===w.type)?(N=i(w,b.props),N.ref=Au(x,w,b),N.return=x,N):(N=Mp(b.type,b.key,b.props,null,x.mode,N),N.ref=Au(x,w,b),N.return=x,N)}function u(x,w,b,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=A0(b,x.mode,N),w.return=x,w):(w=i(w,b.children||[]),w.return=x,w)}function d(x,w,b,N,A){return w===null||w.tag!==7?(w=to(b,x.mode,N,A),w.return=x,w):(w=i(w,b),w.return=x,w)}function f(x,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=N0(""+w,x.mode,b),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Dh:return b=Mp(w.type,w.key,w.props,null,x.mode,b),b.ref=Au(x,null,w),b.return=x,b;case ll:return w=A0(w,x.mode,b),w.return=x,w;case Is:var N=w._init;return f(x,N(w._payload),b)}if(qu(w)||bu(w))return w=to(w,x.mode,b,null),w.return=x,w;Hh(x,w)}return null}function h(x,w,b,N){var A=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return A!==null?null:l(x,w,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Dh:return b.key===A?c(x,w,b,N):null;case ll:return b.key===A?u(x,w,b,N):null;case Is:return A=b._init,h(x,w,A(b._payload),N)}if(qu(b)||bu(b))return A!==null?null:d(x,w,b,N,null);Hh(x,b)}return null}function m(x,w,b,N,A){if(typeof N=="string"&&N!==""||typeof N=="number")return x=x.get(b)||null,l(w,x,""+N,A);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Dh:return x=x.get(N.key===null?b:N.key)||null,c(w,x,N,A);case ll:return x=x.get(N.key===null?b:N.key)||null,u(w,x,N,A);case Is:var E=N._init;return m(x,w,b,E(N._payload),A)}if(qu(N)||bu(N))return x=x.get(b)||null,d(w,x,N,A,null);Hh(w,N)}return null}function y(x,w,b,N){for(var A=null,E=null,C=w,S=w=0,_=null;C!==null&&S<b.length;S++){C.index>S?(_=C,C=null):_=C.sibling;var P=h(x,C,b[S],N);if(P===null){C===null&&(C=_);break}t&&C&&P.alternate===null&&e(x,C),w=s(P,w,S),E===null?A=P:E.sibling=P,E=P,C=_}if(S===b.length)return n(x,C),Nt&&Ma(x,S),A;if(C===null){for(;S<b.length;S++)C=f(x,b[S],N),C!==null&&(w=s(C,w,S),E===null?A=C:E.sibling=C,E=C);return Nt&&Ma(x,S),A}for(C=r(x,C);S<b.length;S++)_=m(C,x,S,b[S],N),_!==null&&(t&&_.alternate!==null&&C.delete(_.key===null?S:_.key),w=s(_,w,S),E===null?A=_:E.sibling=_,E=_);return t&&C.forEach(function(T){return e(x,T)}),Nt&&Ma(x,S),A}function g(x,w,b,N){var A=bu(b);if(typeof A!="function")throw Error(ne(150));if(b=A.call(b),b==null)throw Error(ne(151));for(var E=A=null,C=w,S=w=0,_=null,P=b.next();C!==null&&!P.done;S++,P=b.next()){C.index>S?(_=C,C=null):_=C.sibling;var T=h(x,C,P.value,N);if(T===null){C===null&&(C=_);break}t&&C&&T.alternate===null&&e(x,C),w=s(T,w,S),E===null?A=T:E.sibling=T,E=T,C=_}if(P.done)return n(x,C),Nt&&Ma(x,S),A;if(C===null){for(;!P.done;S++,P=b.next())P=f(x,P.value,N),P!==null&&(w=s(P,w,S),E===null?A=P:E.sibling=P,E=P);return Nt&&Ma(x,S),A}for(C=r(x,C);!P.done;S++,P=b.next())P=m(C,x,S,P.value,N),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?S:P.key),w=s(P,w,S),E===null?A=P:E.sibling=P,E=P);return t&&C.forEach(function(O){return e(x,O)}),Nt&&Ma(x,S),A}function v(x,w,b,N){if(typeof b=="object"&&b!==null&&b.type===cl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Dh:e:{for(var A=b.key,E=w;E!==null;){if(E.key===A){if(A=b.type,A===cl){if(E.tag===7){n(x,E.sibling),w=i(E,b.props.children),w.return=x,x=w;break e}}else if(E.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Is&&BE(A)===E.type){n(x,E.sibling),w=i(E,b.props),w.ref=Au(x,E,b),w.return=x,x=w;break e}n(x,E);break}else e(x,E);E=E.sibling}b.type===cl?(w=to(b.props.children,x.mode,N,b.key),w.return=x,x=w):(N=Mp(b.type,b.key,b.props,null,x.mode,N),N.ref=Au(x,w,b),N.return=x,x=N)}return a(x);case ll:e:{for(E=b.key;w!==null;){if(w.key===E)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(x,w.sibling),w=i(w,b.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else e(x,w);w=w.sibling}w=A0(b,x.mode,N),w.return=x,x=w}return a(x);case Is:return E=b._init,v(x,w,E(b._payload),N)}if(qu(b))return y(x,w,b,N);if(bu(b))return g(x,w,b,N);Hh(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(x,w.sibling),w=i(w,b),w.return=x,x=w):(n(x,w),w=N0(b,x.mode,N),w.return=x,x=w),a(x)):n(x,w)}return v}var ql=cO(!0),uO=cO(!1),mm=ba(null),gm=null,yl=null,d_=null;function f_(){d_=yl=gm=null}function h_(t){var e=mm.current;_t(mm),t._currentValue=e}function sb(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Pl(t,e){gm=t,d_=yl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qn=!0),t.firstContext=null)}function Pr(t){var e=t._currentValue;if(d_!==t)if(t={context:t,memoizedValue:e,next:null},yl===null){if(gm===null)throw Error(ne(308));yl=t,gm.dependencies={lanes:0,firstContext:t}}else yl=yl.next=t;return e}var Ga=null;function p_(t){Ga===null?Ga=[t]:Ga.push(t)}function dO(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,p_(e)):(n.next=i.next,i.next=n),e.interleaved=n,ns(t,r)}function ns(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Os=!1;function m_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function fO(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ki(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ea(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Je&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ns(t,n)}return i=r.interleaved,i===null?(e.next=e,p_(r)):(e.next=i.next,i.next=e),r.interleaved=e,ns(t,n)}function kp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,e_(t,n)}}function UE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ym(t,e,n,r){var i=t.updateQueue;Os=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=i.baseState;a=0,d=u=c=null,l=s;do{var h=l.lane,m=l.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,g=l;switch(h=e,m=n,g.tag){case 1:if(y=g.payload,typeof y=="function"){f=y.call(m,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,h=typeof y=="function"?y.call(m,f,h):y,h==null)break e;f=Pt({},f,h);break e;case 2:Os=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,a|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ho|=a,t.lanes=a,t.memoizedState=f}}function zE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ne(191,i));i.call(r)}}}var Hf={},ui=ba(Hf),Dd=ba(Hf),Md=ba(Hf);function Ha(t){if(t===Hf)throw Error(ne(174));return t}function g_(t,e){switch(pt(Md,e),pt(Dd,t),pt(ui,Hf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fx(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fx(e,t)}_t(ui),pt(ui,e)}function Wl(){_t(ui),_t(Dd),_t(Md)}function hO(t){Ha(Md.current);var e=Ha(ui.current),n=Fx(e,t.type);e!==n&&(pt(Dd,t),pt(ui,n))}function y_(t){Dd.current===t&&(_t(ui),_t(Dd))}var jt=ba(0);function vm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var v0=[];function v_(){for(var t=0;t<v0.length;t++)v0[t]._workInProgressVersionPrimary=null;v0.length=0}var Ip=ys.ReactCurrentDispatcher,x0=ys.ReactCurrentBatchConfig,fo=0,Tt=null,Qt=null,sn=null,xm=!1,od=!1,Ld=0,SV=0;function wn(){throw Error(ne(321))}function x_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xr(t[n],e[n]))return!1;return!0}function b_(t,e,n,r,i,s){if(fo=s,Tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ip.current=t===null||t.memoizedState===null?CV:jV,t=n(r,i),od){s=0;do{if(od=!1,Ld=0,25<=s)throw Error(ne(301));s+=1,sn=Qt=null,e.updateQueue=null,Ip.current=TV,t=n(r,i)}while(od)}if(Ip.current=bm,e=Qt!==null&&Qt.next!==null,fo=0,sn=Qt=Tt=null,xm=!1,e)throw Error(ne(300));return t}function w_(){var t=Ld!==0;return Ld=0,t}function ii(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sn===null?Tt.memoizedState=sn=t:sn=sn.next=t,sn}function kr(){if(Qt===null){var t=Tt.alternate;t=t!==null?t.memoizedState:null}else t=Qt.next;var e=sn===null?Tt.memoizedState:sn.next;if(e!==null)sn=e,Qt=t;else{if(t===null)throw Error(ne(310));Qt=t,t={memoizedState:Qt.memoizedState,baseState:Qt.baseState,baseQueue:Qt.baseQueue,queue:Qt.queue,next:null},sn===null?Tt.memoizedState=sn=t:sn=sn.next=t}return sn}function Fd(t,e){return typeof e=="function"?e(t):e}function b0(t){var e=kr(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=Qt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((fo&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,Tt.lanes|=d,ho|=d}u=u.next}while(u!==null&&u!==s);c===null?a=r:c.next=l,Xr(r,e.memoizedState)||(qn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Tt.lanes|=s,ho|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function w0(t){var e=kr(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Xr(s,e.memoizedState)||(qn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function pO(){}function mO(t,e){var n=Tt,r=kr(),i=e(),s=!Xr(r.memoizedState,i);if(s&&(r.memoizedState=i,qn=!0),r=r.queue,__(vO.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||sn!==null&&sn.memoizedState.tag&1){if(n.flags|=2048,Vd(9,yO.bind(null,n,r,i,e),void 0,null),on===null)throw Error(ne(349));fo&30||gO(n,e,i)}return i}function gO(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Tt.updateQueue,e===null?(e={lastEffect:null,stores:null},Tt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function yO(t,e,n,r){e.value=n,e.getSnapshot=r,xO(e)&&bO(t)}function vO(t,e,n){return n(function(){xO(e)&&bO(t)})}function xO(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xr(t,n)}catch{return!0}}function bO(t){var e=ns(t,1);e!==null&&Hr(e,t,1,-1)}function qE(t){var e=ii();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fd,lastRenderedState:t},e.queue=t,t=t.dispatch=EV.bind(null,Tt,t),[e.memoizedState,t]}function Vd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Tt.updateQueue,e===null?(e={lastEffect:null,stores:null},Tt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function wO(){return kr().memoizedState}function Op(t,e,n,r){var i=ii();Tt.flags|=t,i.memoizedState=Vd(1|e,n,void 0,r===void 0?null:r)}function cy(t,e,n,r){var i=kr();r=r===void 0?null:r;var s=void 0;if(Qt!==null){var a=Qt.memoizedState;if(s=a.destroy,r!==null&&x_(r,a.deps)){i.memoizedState=Vd(e,n,s,r);return}}Tt.flags|=t,i.memoizedState=Vd(1|e,n,s,r)}function WE(t,e){return Op(8390656,8,t,e)}function __(t,e){return cy(2048,8,t,e)}function _O(t,e){return cy(4,2,t,e)}function SO(t,e){return cy(4,4,t,e)}function NO(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function AO(t,e,n){return n=n!=null?n.concat([t]):null,cy(4,4,NO.bind(null,e,t),n)}function S_(){}function EO(t,e){var n=kr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&x_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function CO(t,e){var n=kr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&x_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jO(t,e,n){return fo&21?(Xr(n,e)||(n=OI(),Tt.lanes|=n,ho|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qn=!0),t.memoizedState=n)}function NV(t,e){var n=rt;rt=n!==0&&4>n?n:4,t(!0);var r=x0.transition;x0.transition={};try{t(!1),e()}finally{rt=n,x0.transition=r}}function TO(){return kr().memoizedState}function AV(t,e,n){var r=na(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},PO(t))kO(e,n);else if(n=dO(t,e,n,r),n!==null){var i=Mn();Hr(n,t,r,i),IO(n,e,r)}}function EV(t,e,n){var r=na(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(PO(t))kO(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,Xr(l,a)){var c=e.interleaved;c===null?(i.next=i,p_(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=dO(t,e,i,r),n!==null&&(i=Mn(),Hr(n,t,r,i),IO(n,e,r))}}function PO(t){var e=t.alternate;return t===Tt||e!==null&&e===Tt}function kO(t,e){od=xm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function IO(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,e_(t,n)}}var bm={readContext:Pr,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useInsertionEffect:wn,useLayoutEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useMutableSource:wn,useSyncExternalStore:wn,useId:wn,unstable_isNewReconciler:!1},CV={readContext:Pr,useCallback:function(t,e){return ii().memoizedState=[t,e===void 0?null:e],t},useContext:Pr,useEffect:WE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Op(4194308,4,NO.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Op(4194308,4,t,e)},useInsertionEffect:function(t,e){return Op(4,2,t,e)},useMemo:function(t,e){var n=ii();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ii();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=AV.bind(null,Tt,t),[r.memoizedState,t]},useRef:function(t){var e=ii();return t={current:t},e.memoizedState=t},useState:qE,useDebugValue:S_,useDeferredValue:function(t){return ii().memoizedState=t},useTransition:function(){var t=qE(!1),e=t[0];return t=NV.bind(null,t[1]),ii().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Tt,i=ii();if(Nt){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=e(),on===null)throw Error(ne(349));fo&30||gO(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,WE(vO.bind(null,r,s,t),[t]),r.flags|=2048,Vd(9,yO.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ii(),e=on.identifierPrefix;if(Nt){var n=Bi,r=Vi;n=(r&~(1<<32-Gr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ld++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jV={readContext:Pr,useCallback:EO,useContext:Pr,useEffect:__,useImperativeHandle:AO,useInsertionEffect:_O,useLayoutEffect:SO,useMemo:CO,useReducer:b0,useRef:wO,useState:function(){return b0(Fd)},useDebugValue:S_,useDeferredValue:function(t){var e=kr();return jO(e,Qt.memoizedState,t)},useTransition:function(){var t=b0(Fd)[0],e=kr().memoizedState;return[t,e]},useMutableSource:pO,useSyncExternalStore:mO,useId:TO,unstable_isNewReconciler:!1},TV={readContext:Pr,useCallback:EO,useContext:Pr,useEffect:__,useImperativeHandle:AO,useInsertionEffect:_O,useLayoutEffect:SO,useMemo:CO,useReducer:w0,useRef:wO,useState:function(){return w0(Fd)},useDebugValue:S_,useDeferredValue:function(t){var e=kr();return Qt===null?e.memoizedState=t:jO(e,Qt.memoizedState,t)},useTransition:function(){var t=w0(Fd)[0],e=kr().memoizedState;return[t,e]},useMutableSource:pO,useSyncExternalStore:mO,useId:TO,unstable_isNewReconciler:!1};function Fr(t,e){if(t&&t.defaultProps){e=Pt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ab(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var uy={isMounted:function(t){return(t=t._reactInternals)?Ro(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Mn(),i=na(t),s=Ki(r,i);s.payload=e,n!=null&&(s.callback=n),e=ea(t,s,i),e!==null&&(Hr(e,t,i,r),kp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Mn(),i=na(t),s=Ki(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ea(t,s,i),e!==null&&(Hr(e,t,i,r),kp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mn(),r=na(t),i=Ki(n,r);i.tag=2,e!=null&&(i.callback=e),e=ea(t,i,r),e!==null&&(Hr(e,t,r,n),kp(e,t,r))}};function GE(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Id(n,r)||!Id(i,s):!0}function OO(t,e,n){var r=!1,i=fa,s=e.contextType;return typeof s=="object"&&s!==null?s=Pr(s):(i=Hn(e)?co:kn.current,r=e.contextTypes,s=(r=r!=null)?Ul(t,i):fa),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function HE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&uy.enqueueReplaceState(e,e.state,null)}function ob(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},m_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Pr(s):(s=Hn(e)?co:kn.current,i.context=Ul(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ab(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&uy.enqueueReplaceState(i,i.state,null),ym(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Gl(t,e){try{var n="",r=e;do n+=rF(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function _0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lb(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var PV=typeof WeakMap=="function"?WeakMap:Map;function RO(t,e,n){n=Ki(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){_m||(_m=!0,vb=r),lb(t,e)},n}function $O(t,e,n){n=Ki(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){lb(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){lb(t,e),typeof r!="function"&&(ta===null?ta=new Set([this]):ta.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function KE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new PV;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=qV.bind(null,t,e,n),e.then(t,t))}function YE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function XE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ki(-1,1),e.tag=2,ea(n,e,1))),n.lanes|=1),t)}var kV=ys.ReactCurrentOwner,qn=!1;function On(t,e,n,r){e.child=t===null?uO(e,null,n,r):ql(e,t.child,n,r)}function QE(t,e,n,r,i){n=n.render;var s=e.ref;return Pl(e,i),r=b_(t,e,n,r,s,i),n=w_(),t!==null&&!qn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,rs(t,e,i)):(Nt&&n&&l_(e),e.flags|=1,On(t,e,r,i),e.child)}function JE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!k_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,DO(t,e,s,r,i)):(t=Mp(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Id,n(a,r)&&t.ref===e.ref)return rs(t,e,i)}return e.flags|=1,t=ra(s,r),t.ref=e.ref,t.return=e,e.child=t}function DO(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Id(s,r)&&t.ref===e.ref)if(qn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(qn=!0);else return e.lanes=t.lanes,rs(t,e,i)}return cb(t,e,n,r,i)}function MO(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(xl,tr),tr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pt(xl,tr),tr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,pt(xl,tr),tr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,pt(xl,tr),tr|=r;return On(t,e,i,n),e.child}function LO(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cb(t,e,n,r,i){var s=Hn(n)?co:kn.current;return s=Ul(e,s),Pl(e,i),n=b_(t,e,n,r,s,i),r=w_(),t!==null&&!qn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,rs(t,e,i)):(Nt&&r&&l_(e),e.flags|=1,On(t,e,n,i),e.child)}function ZE(t,e,n,r,i){if(Hn(n)){var s=!0;fm(e)}else s=!1;if(Pl(e,i),e.stateNode===null)Rp(t,e),OO(e,n,r),ob(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=Pr(u):(u=Hn(n)?co:kn.current,u=Ul(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&HE(e,a,r,u),Os=!1;var h=e.memoizedState;a.state=h,ym(e,r,a,i),c=e.memoizedState,l!==r||h!==c||Gn.current||Os?(typeof d=="function"&&(ab(e,n,d,r),c=e.memoizedState),(l=Os||GE(e,n,l,r,h,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,fO(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Fr(e.type,l),a.props=u,f=e.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Pr(c):(c=Hn(n)?co:kn.current,c=Ul(e,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||h!==c)&&HE(e,a,r,c),Os=!1,h=e.memoizedState,a.state=h,ym(e,r,a,i);var y=e.memoizedState;l!==f||h!==y||Gn.current||Os?(typeof m=="function"&&(ab(e,n,m,r),y=e.memoizedState),(u=Os||GE(e,n,u,r,h,y,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),a.props=r,a.state=y,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return ub(t,e,n,r,s,i)}function ub(t,e,n,r,i,s){LO(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&LE(e,n,!1),rs(t,e,s);r=e.stateNode,kV.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=ql(e,t.child,null,s),e.child=ql(e,null,l,s)):On(t,e,l,s),e.memoizedState=r.state,i&&LE(e,n,!0),e.child}function FO(t){var e=t.stateNode;e.pendingContext?ME(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ME(t,e.context,!1),g_(t,e.containerInfo)}function eC(t,e,n,r,i){return zl(),u_(i),e.flags|=256,On(t,e,n,r),e.child}var db={dehydrated:null,treeContext:null,retryLane:0};function fb(t){return{baseLanes:t,cachePool:null,transitions:null}}function VO(t,e,n){var r=e.pendingProps,i=jt.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),pt(jt,i&1),t===null)return ib(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=hy(a,r,0,null),t=to(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=fb(n),e.memoizedState=db,t):N_(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return IV(t,e,a,r,l,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ra(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=ra(l,s):(s=to(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?fb(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=db,r}return s=t.child,t=s.sibling,r=ra(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function N_(t,e){return e=hy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Kh(t,e,n,r){return r!==null&&u_(r),ql(e,t.child,null,n),t=N_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function IV(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=_0(Error(ne(422))),Kh(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=hy({mode:"visible",children:r.children},i,0,null),s=to(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ql(e,t.child,null,a),e.child.memoizedState=fb(a),e.memoizedState=db,s);if(!(e.mode&1))return Kh(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(ne(419)),r=_0(s,r,void 0),Kh(t,e,a,r)}if(l=(a&t.childLanes)!==0,qn||l){if(r=on,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ns(t,i),Hr(r,t,i,-1))}return P_(),r=_0(Error(ne(421))),Kh(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=WV.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,or=Zs(i.nextSibling),cr=e,Nt=!0,zr=null,t!==null&&(wr[_r++]=Vi,wr[_r++]=Bi,wr[_r++]=uo,Vi=t.id,Bi=t.overflow,uo=e),e=N_(e,r.children),e.flags|=4096,e)}function tC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),sb(t.return,e,n)}function S0(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function BO(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(On(t,e,r.children,n),r=jt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&tC(t,n,e);else if(t.tag===19)tC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pt(jt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&vm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),S0(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&vm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}S0(e,!0,n,null,s);break;case"together":S0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rs(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ho|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,n=ra(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ra(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OV(t,e,n){switch(e.tag){case 3:FO(e),zl();break;case 5:hO(e);break;case 1:Hn(e.type)&&fm(e);break;case 4:g_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;pt(mm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pt(jt,jt.current&1),e.flags|=128,null):n&e.child.childLanes?VO(t,e,n):(pt(jt,jt.current&1),t=rs(t,e,n),t!==null?t.sibling:null);pt(jt,jt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return BO(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),pt(jt,jt.current),r)break;return null;case 22:case 23:return e.lanes=0,MO(t,e,n)}return rs(t,e,n)}var UO,hb,zO,qO;UO=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hb=function(){};zO=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ha(ui.current);var s=null;switch(n){case"input":i=$x(t,i),r=$x(t,r),s=[];break;case"select":i=Pt({},i,{value:void 0}),r=Pt({},r,{value:void 0}),s=[];break;case"textarea":i=Lx(t,i),r=Lx(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=um)}Vx(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ad.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ad.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&vt("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};qO=function(t,e,n,r){n!==r&&(e.flags|=4)};function Eu(t,e){if(!Nt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _n(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function RV(t,e,n){var r=e.pendingProps;switch(c_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _n(e),null;case 1:return Hn(e.type)&&dm(),_n(e),null;case 3:return r=e.stateNode,Wl(),_t(Gn),_t(kn),v_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zr!==null&&(wb(zr),zr=null))),hb(t,e),_n(e),null;case 5:y_(e);var i=Ha(Md.current);if(n=e.type,t!==null&&e.stateNode!=null)zO(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ne(166));return _n(e),null}if(t=Ha(ui.current),Gh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[si]=e,r[$d]=s,t=(e.mode&1)!==0,n){case"dialog":vt("cancel",r),vt("close",r);break;case"iframe":case"object":case"embed":vt("load",r);break;case"video":case"audio":for(i=0;i<Gu.length;i++)vt(Gu[i],r);break;case"source":vt("error",r);break;case"img":case"image":case"link":vt("error",r),vt("load",r);break;case"details":vt("toggle",r);break;case"input":uE(r,s),vt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},vt("invalid",r);break;case"textarea":fE(r,s),vt("invalid",r)}Vx(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Wh(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Wh(r.textContent,l,t),i=["children",""+l]):Ad.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&vt("scroll",r)}switch(n){case"input":Mh(r),dE(r,s,!0);break;case"textarea":Mh(r),hE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=um)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[si]=e,t[$d]=r,UO(t,e,!1,!1),e.stateNode=t;e:{switch(a=Bx(n,r),n){case"dialog":vt("cancel",t),vt("close",t),i=r;break;case"iframe":case"object":case"embed":vt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Gu.length;i++)vt(Gu[i],t);i=r;break;case"source":vt("error",t),i=r;break;case"img":case"image":case"link":vt("error",t),vt("load",t),i=r;break;case"details":vt("toggle",t),i=r;break;case"input":uE(t,r),i=$x(t,r),vt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pt({},r,{value:void 0}),vt("invalid",t);break;case"textarea":fE(t,r),i=Lx(t,r),vt("invalid",t);break;default:i=r}Vx(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?wI(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&xI(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ed(t,c):typeof c=="number"&&Ed(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ad.hasOwnProperty(s)?c!=null&&s==="onScroll"&&vt("scroll",t):c!=null&&K1(t,s,c,a))}switch(n){case"input":Mh(t),dE(t,r,!1);break;case"textarea":Mh(t),hE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+da(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?El(t,!!r.multiple,s,!1):r.defaultValue!=null&&El(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=um)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _n(e),null;case 6:if(t&&e.stateNode!=null)qO(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ne(166));if(n=Ha(Md.current),Ha(ui.current),Gh(e)){if(r=e.stateNode,n=e.memoizedProps,r[si]=e,(s=r.nodeValue!==n)&&(t=cr,t!==null))switch(t.tag){case 3:Wh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[si]=e,e.stateNode=r}return _n(e),null;case 13:if(_t(jt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Nt&&or!==null&&e.mode&1&&!(e.flags&128))lO(),zl(),e.flags|=98560,s=!1;else if(s=Gh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(ne(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ne(317));s[si]=e}else zl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_n(e),s=!1}else zr!==null&&(wb(zr),zr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||jt.current&1?Zt===0&&(Zt=3):P_())),e.updateQueue!==null&&(e.flags|=4),_n(e),null);case 4:return Wl(),hb(t,e),t===null&&Od(e.stateNode.containerInfo),_n(e),null;case 10:return h_(e.type._context),_n(e),null;case 17:return Hn(e.type)&&dm(),_n(e),null;case 19:if(_t(jt),s=e.memoizedState,s===null)return _n(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Eu(s,!1);else{if(Zt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=vm(t),a!==null){for(e.flags|=128,Eu(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pt(jt,jt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Mt()>Hl&&(e.flags|=128,r=!0,Eu(s,!1),e.lanes=4194304)}else{if(!r)if(t=vm(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Eu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Nt)return _n(e),null}else 2*Mt()-s.renderingStartTime>Hl&&n!==1073741824&&(e.flags|=128,r=!0,Eu(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Mt(),e.sibling=null,n=jt.current,pt(jt,r?n&1|2:n&1),e):(_n(e),null);case 22:case 23:return T_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?tr&1073741824&&(_n(e),e.subtreeFlags&6&&(e.flags|=8192)):_n(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function $V(t,e){switch(c_(e),e.tag){case 1:return Hn(e.type)&&dm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wl(),_t(Gn),_t(kn),v_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return y_(e),null;case 13:if(_t(jt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));zl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _t(jt),null;case 4:return Wl(),null;case 10:return h_(e.type._context),null;case 22:case 23:return T_(),null;case 24:return null;default:return null}}var Yh=!1,Cn=!1,DV=typeof WeakSet=="function"?WeakSet:Set,he=null;function vl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ot(t,e,r)}else n.current=null}function pb(t,e,n){try{n()}catch(r){Ot(t,e,r)}}var nC=!1;function MV(t,e){if(Qx=om,t=YI(),o_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(l=a+i),f!==s||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===t)break t;if(h===n&&++u===i&&(l=a),h===s&&++d===r&&(c=a),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jx={focusedElem:t,selectionRange:n},om=!1,he=e;he!==null;)if(e=he,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,he=t;else for(;he!==null;){e=he;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,v=y.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?g:Fr(e.type,g),v);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(N){Ot(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,he=t;break}he=e.return}return y=nC,nC=!1,y}function ld(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&pb(e,n,s)}i=i.next}while(i!==r)}}function dy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mb(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function WO(t){var e=t.alternate;e!==null&&(t.alternate=null,WO(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[si],delete e[$d],delete e[tb],delete e[xV],delete e[bV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function GO(t){return t.tag===5||t.tag===3||t.tag===4}function rC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||GO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=um));else if(r!==4&&(t=t.child,t!==null))for(gb(t,e,n),t=t.sibling;t!==null;)gb(t,e,n),t=t.sibling}function yb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yb(t,e,n),t=t.sibling;t!==null;)yb(t,e,n),t=t.sibling}var fn=null,Vr=!1;function js(t,e,n){for(n=n.child;n!==null;)HO(t,e,n),n=n.sibling}function HO(t,e,n){if(ci&&typeof ci.onCommitFiberUnmount=="function")try{ci.onCommitFiberUnmount(ry,n)}catch{}switch(n.tag){case 5:Cn||vl(n,e);case 6:var r=fn,i=Vr;fn=null,js(t,e,n),fn=r,Vr=i,fn!==null&&(Vr?(t=fn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):fn.removeChild(n.stateNode));break;case 18:fn!==null&&(Vr?(t=fn,n=n.stateNode,t.nodeType===8?g0(t.parentNode,n):t.nodeType===1&&g0(t,n),Pd(t)):g0(fn,n.stateNode));break;case 4:r=fn,i=Vr,fn=n.stateNode.containerInfo,Vr=!0,js(t,e,n),fn=r,Vr=i;break;case 0:case 11:case 14:case 15:if(!Cn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&pb(n,e,a),i=i.next}while(i!==r)}js(t,e,n);break;case 1:if(!Cn&&(vl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ot(n,e,l)}js(t,e,n);break;case 21:js(t,e,n);break;case 22:n.mode&1?(Cn=(r=Cn)||n.memoizedState!==null,js(t,e,n),Cn=r):js(t,e,n);break;default:js(t,e,n)}}function iC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new DV),e.forEach(function(r){var i=GV.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Mr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:fn=l.stateNode,Vr=!1;break e;case 3:fn=l.stateNode.containerInfo,Vr=!0;break e;case 4:fn=l.stateNode.containerInfo,Vr=!0;break e}l=l.return}if(fn===null)throw Error(ne(160));HO(s,a,i),fn=null,Vr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Ot(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)KO(e,t),e=e.sibling}function KO(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Mr(e,t),ti(t),r&4){try{ld(3,t,t.return),dy(3,t)}catch(g){Ot(t,t.return,g)}try{ld(5,t,t.return)}catch(g){Ot(t,t.return,g)}}break;case 1:Mr(e,t),ti(t),r&512&&n!==null&&vl(n,n.return);break;case 5:if(Mr(e,t),ti(t),r&512&&n!==null&&vl(n,n.return),t.flags&32){var i=t.stateNode;try{Ed(i,"")}catch(g){Ot(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&gI(i,s),Bx(l,a);var u=Bx(l,s);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?wI(i,f):d==="dangerouslySetInnerHTML"?xI(i,f):d==="children"?Ed(i,f):K1(i,d,f,u)}switch(l){case"input":Dx(i,s);break;case"textarea":yI(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?El(i,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?El(i,!!s.multiple,s.defaultValue,!0):El(i,!!s.multiple,s.multiple?[]:"",!1))}i[$d]=s}catch(g){Ot(t,t.return,g)}}break;case 6:if(Mr(e,t),ti(t),r&4){if(t.stateNode===null)throw Error(ne(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){Ot(t,t.return,g)}}break;case 3:if(Mr(e,t),ti(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pd(e.containerInfo)}catch(g){Ot(t,t.return,g)}break;case 4:Mr(e,t),ti(t);break;case 13:Mr(e,t),ti(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(C_=Mt())),r&4&&iC(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Cn=(u=Cn)||d,Mr(e,t),Cn=u):Mr(e,t),ti(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(he=t,d=t.child;d!==null;){for(f=he=d;he!==null;){switch(h=he,m=h.child,h.tag){case 0:case 11:case 14:case 15:ld(4,h,h.return);break;case 1:vl(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){Ot(r,n,g)}}break;case 5:vl(h,h.return);break;case 22:if(h.memoizedState!==null){aC(f);continue}}m!==null?(m.return=h,he=m):aC(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=bI("display",a))}catch(g){Ot(t,t.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Ot(t,t.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Mr(e,t),ti(t),r&4&&iC(t);break;case 21:break;default:Mr(e,t),ti(t)}}function ti(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(GO(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ed(i,""),r.flags&=-33);var s=rC(t);yb(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=rC(t);gb(t,l,a);break;default:throw Error(ne(161))}}catch(c){Ot(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function LV(t,e,n){he=t,YO(t)}function YO(t,e,n){for(var r=(t.mode&1)!==0;he!==null;){var i=he,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Yh;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Cn;l=Yh;var u=Cn;if(Yh=a,(Cn=c)&&!u)for(he=i;he!==null;)a=he,c=a.child,a.tag===22&&a.memoizedState!==null?oC(i):c!==null?(c.return=a,he=c):oC(i);for(;s!==null;)he=s,YO(s),s=s.sibling;he=i,Yh=l,Cn=u}sC(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,he=s):sC(t)}}function sC(t){for(;he!==null;){var e=he;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Cn||dy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Cn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Fr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&zE(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}zE(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Pd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Cn||e.flags&512&&mb(e)}catch(h){Ot(e,e.return,h)}}if(e===t){he=null;break}if(n=e.sibling,n!==null){n.return=e.return,he=n;break}he=e.return}}function aC(t){for(;he!==null;){var e=he;if(e===t){he=null;break}var n=e.sibling;if(n!==null){n.return=e.return,he=n;break}he=e.return}}function oC(t){for(;he!==null;){var e=he;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{dy(4,e)}catch(c){Ot(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Ot(e,i,c)}}var s=e.return;try{mb(e)}catch(c){Ot(e,s,c)}break;case 5:var a=e.return;try{mb(e)}catch(c){Ot(e,a,c)}}}catch(c){Ot(e,e.return,c)}if(e===t){he=null;break}var l=e.sibling;if(l!==null){l.return=e.return,he=l;break}he=e.return}}var FV=Math.ceil,wm=ys.ReactCurrentDispatcher,A_=ys.ReactCurrentOwner,Cr=ys.ReactCurrentBatchConfig,Je=0,on=null,zt=null,mn=0,tr=0,xl=ba(0),Zt=0,Bd=null,ho=0,fy=0,E_=0,cd=null,Vn=null,C_=0,Hl=1/0,Di=null,_m=!1,vb=null,ta=null,Xh=!1,qs=null,Sm=0,ud=0,xb=null,$p=-1,Dp=0;function Mn(){return Je&6?Mt():$p!==-1?$p:$p=Mt()}function na(t){return t.mode&1?Je&2&&mn!==0?mn&-mn:_V.transition!==null?(Dp===0&&(Dp=OI()),Dp):(t=rt,t!==0||(t=window.event,t=t===void 0?16:VI(t.type)),t):1}function Hr(t,e,n,r){if(50<ud)throw ud=0,xb=null,Error(ne(185));qf(t,n,r),(!(Je&2)||t!==on)&&(t===on&&(!(Je&2)&&(fy|=n),Zt===4&&Ds(t,mn)),Kn(t,r),n===1&&Je===0&&!(e.mode&1)&&(Hl=Mt()+500,ly&&wa()))}function Kn(t,e){var n=t.callbackNode;_F(t,e);var r=am(t,t===on?mn:0);if(r===0)n!==null&&gE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&gE(n),e===1)t.tag===0?wV(lC.bind(null,t)):sO(lC.bind(null,t)),yV(function(){!(Je&6)&&wa()}),n=null;else{switch(RI(r)){case 1:n=Z1;break;case 4:n=kI;break;case 16:n=sm;break;case 536870912:n=II;break;default:n=sm}n=rR(n,XO.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function XO(t,e){if($p=-1,Dp=0,Je&6)throw Error(ne(327));var n=t.callbackNode;if(kl()&&t.callbackNode!==n)return null;var r=am(t,t===on?mn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Nm(t,r);else{e=r;var i=Je;Je|=2;var s=JO();(on!==t||mn!==e)&&(Di=null,Hl=Mt()+500,eo(t,e));do try{UV();break}catch(l){QO(t,l)}while(!0);f_(),wm.current=s,Je=i,zt!==null?e=0:(on=null,mn=0,e=Zt)}if(e!==0){if(e===2&&(i=Gx(t),i!==0&&(r=i,e=bb(t,i))),e===1)throw n=Bd,eo(t,0),Ds(t,r),Kn(t,Mt()),n;if(e===6)Ds(t,r);else{if(i=t.current.alternate,!(r&30)&&!VV(i)&&(e=Nm(t,r),e===2&&(s=Gx(t),s!==0&&(r=s,e=bb(t,s))),e===1))throw n=Bd,eo(t,0),Ds(t,r),Kn(t,Mt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ne(345));case 2:La(t,Vn,Di);break;case 3:if(Ds(t,r),(r&130023424)===r&&(e=C_+500-Mt(),10<e)){if(am(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Mn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=eb(La.bind(null,t,Vn,Di),e);break}La(t,Vn,Di);break;case 4:if(Ds(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Gr(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=Mt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*FV(r/1960))-r,10<r){t.timeoutHandle=eb(La.bind(null,t,Vn,Di),r);break}La(t,Vn,Di);break;case 5:La(t,Vn,Di);break;default:throw Error(ne(329))}}}return Kn(t,Mt()),t.callbackNode===n?XO.bind(null,t):null}function bb(t,e){var n=cd;return t.current.memoizedState.isDehydrated&&(eo(t,e).flags|=256),t=Nm(t,e),t!==2&&(e=Vn,Vn=n,e!==null&&wb(e)),t}function wb(t){Vn===null?Vn=t:Vn.push.apply(Vn,t)}function VV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Xr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ds(t,e){for(e&=~E_,e&=~fy,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gr(e),r=1<<n;t[n]=-1,e&=~r}}function lC(t){if(Je&6)throw Error(ne(327));kl();var e=am(t,0);if(!(e&1))return Kn(t,Mt()),null;var n=Nm(t,e);if(t.tag!==0&&n===2){var r=Gx(t);r!==0&&(e=r,n=bb(t,r))}if(n===1)throw n=Bd,eo(t,0),Ds(t,e),Kn(t,Mt()),n;if(n===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,La(t,Vn,Di),Kn(t,Mt()),null}function j_(t,e){var n=Je;Je|=1;try{return t(e)}finally{Je=n,Je===0&&(Hl=Mt()+500,ly&&wa())}}function po(t){qs!==null&&qs.tag===0&&!(Je&6)&&kl();var e=Je;Je|=1;var n=Cr.transition,r=rt;try{if(Cr.transition=null,rt=1,t)return t()}finally{rt=r,Cr.transition=n,Je=e,!(Je&6)&&wa()}}function T_(){tr=xl.current,_t(xl)}function eo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gV(n)),zt!==null)for(n=zt.return;n!==null;){var r=n;switch(c_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&dm();break;case 3:Wl(),_t(Gn),_t(kn),v_();break;case 5:y_(r);break;case 4:Wl();break;case 13:_t(jt);break;case 19:_t(jt);break;case 10:h_(r.type._context);break;case 22:case 23:T_()}n=n.return}if(on=t,zt=t=ra(t.current,null),mn=tr=e,Zt=0,Bd=null,E_=fy=ho=0,Vn=cd=null,Ga!==null){for(e=0;e<Ga.length;e++)if(n=Ga[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Ga=null}return t}function QO(t,e){do{var n=zt;try{if(f_(),Ip.current=bm,xm){for(var r=Tt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xm=!1}if(fo=0,sn=Qt=Tt=null,od=!1,Ld=0,A_.current=null,n===null||n.return===null){Zt=1,Bd=e,zt=null;break}e:{var s=t,a=n.return,l=n,c=e;if(e=mn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=YE(a);if(m!==null){m.flags&=-257,XE(m,a,l,s,e),m.mode&1&&KE(s,u,e),e=m,c=u;var y=e.updateQueue;if(y===null){var g=new Set;g.add(c),e.updateQueue=g}else y.add(c);break e}else{if(!(e&1)){KE(s,u,e),P_();break e}c=Error(ne(426))}}else if(Nt&&l.mode&1){var v=YE(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),XE(v,a,l,s,e),u_(Gl(c,l));break e}}s=c=Gl(c,l),Zt!==4&&(Zt=2),cd===null?cd=[s]:cd.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=RO(s,c,e);UE(s,x);break e;case 1:l=c;var w=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ta===null||!ta.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=$O(s,l,e);UE(s,N);break e}}s=s.return}while(s!==null)}eR(n)}catch(A){e=A,zt===n&&n!==null&&(zt=n=n.return);continue}break}while(!0)}function JO(){var t=wm.current;return wm.current=bm,t===null?bm:t}function P_(){(Zt===0||Zt===3||Zt===2)&&(Zt=4),on===null||!(ho&268435455)&&!(fy&268435455)||Ds(on,mn)}function Nm(t,e){var n=Je;Je|=2;var r=JO();(on!==t||mn!==e)&&(Di=null,eo(t,e));do try{BV();break}catch(i){QO(t,i)}while(!0);if(f_(),Je=n,wm.current=r,zt!==null)throw Error(ne(261));return on=null,mn=0,Zt}function BV(){for(;zt!==null;)ZO(zt)}function UV(){for(;zt!==null&&!hF();)ZO(zt)}function ZO(t){var e=nR(t.alternate,t,tr);t.memoizedProps=t.pendingProps,e===null?eR(t):zt=e,A_.current=null}function eR(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$V(n,e),n!==null){n.flags&=32767,zt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Zt=6,zt=null;return}}else if(n=RV(n,e,tr),n!==null){zt=n;return}if(e=e.sibling,e!==null){zt=e;return}zt=e=t}while(e!==null);Zt===0&&(Zt=5)}function La(t,e,n){var r=rt,i=Cr.transition;try{Cr.transition=null,rt=1,zV(t,e,n,r)}finally{Cr.transition=i,rt=r}return null}function zV(t,e,n,r){do kl();while(qs!==null);if(Je&6)throw Error(ne(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(SF(t,s),t===on&&(zt=on=null,mn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xh||(Xh=!0,rR(sm,function(){return kl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Cr.transition,Cr.transition=null;var a=rt;rt=1;var l=Je;Je|=4,A_.current=null,MV(t,n),KO(n,t),cV(Jx),om=!!Qx,Jx=Qx=null,t.current=n,LV(n),pF(),Je=l,rt=a,Cr.transition=s}else t.current=n;if(Xh&&(Xh=!1,qs=t,Sm=i),s=t.pendingLanes,s===0&&(ta=null),yF(n.stateNode),Kn(t,Mt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(_m)throw _m=!1,t=vb,vb=null,t;return Sm&1&&t.tag!==0&&kl(),s=t.pendingLanes,s&1?t===xb?ud++:(ud=0,xb=t):ud=0,wa(),null}function kl(){if(qs!==null){var t=RI(Sm),e=Cr.transition,n=rt;try{if(Cr.transition=null,rt=16>t?16:t,qs===null)var r=!1;else{if(t=qs,qs=null,Sm=0,Je&6)throw Error(ne(331));var i=Je;for(Je|=4,he=t.current;he!==null;){var s=he,a=s.child;if(he.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(he=u;he!==null;){var d=he;switch(d.tag){case 0:case 11:case 15:ld(8,d,s)}var f=d.child;if(f!==null)f.return=d,he=f;else for(;he!==null;){d=he;var h=d.sibling,m=d.return;if(WO(d),d===u){he=null;break}if(h!==null){h.return=m,he=h;break}he=m}}}var y=s.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}he=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,he=a;else e:for(;he!==null;){if(s=he,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ld(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,he=x;break e}he=s.return}}var w=t.current;for(he=w;he!==null;){a=he;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,he=b;else e:for(a=w;he!==null;){if(l=he,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:dy(9,l)}}catch(A){Ot(l,l.return,A)}if(l===a){he=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,he=N;break e}he=l.return}}if(Je=i,wa(),ci&&typeof ci.onPostCommitFiberRoot=="function")try{ci.onPostCommitFiberRoot(ry,t)}catch{}r=!0}return r}finally{rt=n,Cr.transition=e}}return!1}function cC(t,e,n){e=Gl(n,e),e=RO(t,e,1),t=ea(t,e,1),e=Mn(),t!==null&&(qf(t,1,e),Kn(t,e))}function Ot(t,e,n){if(t.tag===3)cC(t,t,n);else for(;e!==null;){if(e.tag===3){cC(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ta===null||!ta.has(r))){t=Gl(n,t),t=$O(e,t,1),e=ea(e,t,1),t=Mn(),e!==null&&(qf(e,1,t),Kn(e,t));break}}e=e.return}}function qV(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Mn(),t.pingedLanes|=t.suspendedLanes&n,on===t&&(mn&n)===n&&(Zt===4||Zt===3&&(mn&130023424)===mn&&500>Mt()-C_?eo(t,0):E_|=n),Kn(t,e)}function tR(t,e){e===0&&(t.mode&1?(e=Vh,Vh<<=1,!(Vh&130023424)&&(Vh=4194304)):e=1);var n=Mn();t=ns(t,e),t!==null&&(qf(t,e,n),Kn(t,n))}function WV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),tR(t,n)}function GV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(e),tR(t,n)}var nR;nR=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gn.current)qn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qn=!1,OV(t,e,n);qn=!!(t.flags&131072)}else qn=!1,Nt&&e.flags&1048576&&aO(e,pm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Rp(t,e),t=e.pendingProps;var i=Ul(e,kn.current);Pl(e,n),i=b_(null,e,r,t,i,n);var s=w_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Hn(r)?(s=!0,fm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,m_(e),i.updater=uy,e.stateNode=i,i._reactInternals=e,ob(e,r,t,n),e=ub(null,e,r,!0,s,n)):(e.tag=0,Nt&&s&&l_(e),On(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Rp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=KV(r),t=Fr(r,t),i){case 0:e=cb(null,e,r,t,n);break e;case 1:e=ZE(null,e,r,t,n);break e;case 11:e=QE(null,e,r,t,n);break e;case 14:e=JE(null,e,r,Fr(r.type,t),n);break e}throw Error(ne(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fr(r,i),cb(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fr(r,i),ZE(t,e,r,i,n);case 3:e:{if(FO(e),t===null)throw Error(ne(387));r=e.pendingProps,s=e.memoizedState,i=s.element,fO(t,e),ym(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Gl(Error(ne(423)),e),e=eC(t,e,r,n,i);break e}else if(r!==i){i=Gl(Error(ne(424)),e),e=eC(t,e,r,n,i);break e}else for(or=Zs(e.stateNode.containerInfo.firstChild),cr=e,Nt=!0,zr=null,n=uO(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zl(),r===i){e=rs(t,e,n);break e}On(t,e,r,n)}e=e.child}return e;case 5:return hO(e),t===null&&ib(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,Zx(r,i)?a=null:s!==null&&Zx(r,s)&&(e.flags|=32),LO(t,e),On(t,e,a,n),e.child;case 6:return t===null&&ib(e),null;case 13:return VO(t,e,n);case 4:return g_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ql(e,null,r,n):On(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fr(r,i),QE(t,e,r,i,n);case 7:return On(t,e,e.pendingProps,n),e.child;case 8:return On(t,e,e.pendingProps.children,n),e.child;case 12:return On(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,pt(mm,r._currentValue),r._currentValue=a,s!==null)if(Xr(s.value,a)){if(s.children===i.children&&!Gn.current){e=rs(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Ki(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),sb(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(ne(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),sb(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}On(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Pl(e,n),i=Pr(i),r=r(i),e.flags|=1,On(t,e,r,n),e.child;case 14:return r=e.type,i=Fr(r,e.pendingProps),i=Fr(r.type,i),JE(t,e,r,i,n);case 15:return DO(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fr(r,i),Rp(t,e),e.tag=1,Hn(r)?(t=!0,fm(e)):t=!1,Pl(e,n),OO(e,r,i),ob(e,r,i,n),ub(null,e,r,!0,t,n);case 19:return BO(t,e,n);case 22:return MO(t,e,n)}throw Error(ne(156,e.tag))};function rR(t,e){return PI(t,e)}function HV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ar(t,e,n,r){return new HV(t,e,n,r)}function k_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KV(t){if(typeof t=="function")return k_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===X1)return 11;if(t===Q1)return 14}return 2}function ra(t,e){var n=t.alternate;return n===null?(n=Ar(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Mp(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")k_(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case cl:return to(n.children,i,s,e);case Y1:a=8,i|=8;break;case kx:return t=Ar(12,n,e,i|2),t.elementType=kx,t.lanes=s,t;case Ix:return t=Ar(13,n,e,i),t.elementType=Ix,t.lanes=s,t;case Ox:return t=Ar(19,n,e,i),t.elementType=Ox,t.lanes=s,t;case hI:return hy(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case dI:a=10;break e;case fI:a=9;break e;case X1:a=11;break e;case Q1:a=14;break e;case Is:a=16,r=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=Ar(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function to(t,e,n,r){return t=Ar(7,t,r,e),t.lanes=n,t}function hy(t,e,n,r){return t=Ar(22,t,r,e),t.elementType=hI,t.lanes=n,t.stateNode={isHidden:!1},t}function N0(t,e,n){return t=Ar(6,t,null,e),t.lanes=n,t}function A0(t,e,n){return e=Ar(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function YV(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=s0(0),this.expirationTimes=s0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=s0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function I_(t,e,n,r,i,s,a,l,c){return t=new YV(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ar(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},m_(s),t}function XV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ll,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function iR(t){if(!t)return fa;t=t._reactInternals;e:{if(Ro(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var n=t.type;if(Hn(n))return iO(t,n,e)}return e}function sR(t,e,n,r,i,s,a,l,c){return t=I_(n,r,!0,t,i,s,a,l,c),t.context=iR(null),n=t.current,r=Mn(),i=na(n),s=Ki(r,i),s.callback=e??null,ea(n,s,i),t.current.lanes=i,qf(t,i,r),Kn(t,r),t}function py(t,e,n,r){var i=e.current,s=Mn(),a=na(i);return n=iR(n),e.context===null?e.context=n:e.pendingContext=n,e=Ki(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ea(i,e,a),t!==null&&(Hr(t,i,a,s),kp(t,i,a)),a}function Am(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function O_(t,e){uC(t,e),(t=t.alternate)&&uC(t,e)}function QV(){return null}var aR=typeof reportError=="function"?reportError:function(t){console.error(t)};function R_(t){this._internalRoot=t}my.prototype.render=R_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));py(t,e,null,null)};my.prototype.unmount=R_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;po(function(){py(null,t,null,null)}),e[ts]=null}};function my(t){this._internalRoot=t}my.prototype.unstable_scheduleHydration=function(t){if(t){var e=MI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$s.length&&e!==0&&e<$s[n].priority;n++);$s.splice(n,0,t),n===0&&FI(t)}};function $_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dC(){}function JV(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Am(a);s.call(u)}}var a=sR(e,r,t,0,null,!1,!1,"",dC);return t._reactRootContainer=a,t[ts]=a.current,Od(t.nodeType===8?t.parentNode:t),po(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Am(c);l.call(u)}}var c=I_(t,0,!1,null,null,!1,!1,"",dC);return t._reactRootContainer=c,t[ts]=c.current,Od(t.nodeType===8?t.parentNode:t),po(function(){py(e,c,n,r)}),c}function yy(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var c=Am(a);l.call(c)}}py(e,a,t,i)}else a=JV(n,e,t,i,r);return Am(a)}$I=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Wu(e.pendingLanes);n!==0&&(e_(e,n|1),Kn(e,Mt()),!(Je&6)&&(Hl=Mt()+500,wa()))}break;case 13:po(function(){var r=ns(t,1);if(r!==null){var i=Mn();Hr(r,t,1,i)}}),O_(t,1)}};t_=function(t){if(t.tag===13){var e=ns(t,134217728);if(e!==null){var n=Mn();Hr(e,t,134217728,n)}O_(t,134217728)}};DI=function(t){if(t.tag===13){var e=na(t),n=ns(t,e);if(n!==null){var r=Mn();Hr(n,t,e,r)}O_(t,e)}};MI=function(){return rt};LI=function(t,e){var n=rt;try{return rt=t,e()}finally{rt=n}};zx=function(t,e,n){switch(e){case"input":if(Dx(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=oy(r);if(!i)throw Error(ne(90));mI(r),Dx(r,i)}}}break;case"textarea":yI(t,n);break;case"select":e=n.value,e!=null&&El(t,!!n.multiple,e,!1)}};NI=j_;AI=po;var ZV={usingClientEntryPoint:!1,Events:[Gf,hl,oy,_I,SI,j_]},Cu={findFiberByHostInstance:Wa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},e6={bundleType:Cu.bundleType,version:Cu.version,rendererPackageName:Cu.rendererPackageName,rendererConfig:Cu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jI(t),t===null?null:t.stateNode},findFiberByHostInstance:Cu.findFiberByHostInstance||QV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qh.isDisabled&&Qh.supportsFiber)try{ry=Qh.inject(e6),ci=Qh}catch{}}pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZV;pr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$_(e))throw Error(ne(200));return XV(t,e,null,n)};pr.createRoot=function(t,e){if(!$_(t))throw Error(ne(299));var n=!1,r="",i=aR;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=I_(t,1,!1,null,null,n,!1,r,i),t[ts]=e.current,Od(t.nodeType===8?t.parentNode:t),new R_(e)};pr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=jI(e),t=t===null?null:t.stateNode,t};pr.flushSync=function(t){return po(t)};pr.hydrate=function(t,e,n){if(!gy(e))throw Error(ne(200));return yy(null,t,e,!0,n)};pr.hydrateRoot=function(t,e,n){if(!$_(t))throw Error(ne(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=aR;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=sR(e,null,t,1,n??null,i,!1,s,a),t[ts]=e.current,Od(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new my(e)};pr.render=function(t,e,n){if(!gy(e))throw Error(ne(200));return yy(null,t,e,!1,n)};pr.unmountComponentAtNode=function(t){if(!gy(t))throw Error(ne(40));return t._reactRootContainer?(po(function(){yy(null,null,t,!1,function(){t._reactRootContainer=null,t[ts]=null})}),!0):!1};pr.unstable_batchedUpdates=j_;pr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gy(n))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return yy(t,e,n,!1,r)};pr.version="18.3.1-next-f1338f8080-20240426";function oR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oR)}catch(t){console.error(t)}}oR(),oI.exports=pr;var t6=oI.exports,fC=t6;Tx.createRoot=fC.createRoot,Tx.hydrateRoot=fC.hydrateRoot;/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var hC="popstate";function n6(t={}){function e(r,i){let{pathname:s,search:a,hash:l}=r.location;return _b("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ud(i)}return i6(e,n,null,t)}function Ct(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ir(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function r6(){return Math.random().toString(36).substring(2,10)}function pC(t,e){return{usr:t.state,key:t.key,idx:e}}function _b(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?$c(e):e,state:n,key:e&&e.key||r||r6()}}function Ud({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function $c(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function i6(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l="POP",c=null,u=d();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function d(){return(a.state||{idx:null}).idx}function f(){l="POP";let v=d(),x=v==null?null:v-u;u=v,c&&c({action:l,location:g.location,delta:x})}function h(v,x){l="PUSH";let w=_b(g.location,v,x);u=d()+1;let b=pC(w,u),N=g.createHref(w);try{a.pushState(b,"",N)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(N)}s&&c&&c({action:l,location:g.location,delta:1})}function m(v,x){l="REPLACE";let w=_b(g.location,v,x);u=d();let b=pC(w,u),N=g.createHref(w);a.replaceState(b,"",N),s&&c&&c({action:l,location:g.location,delta:0})}function y(v){return s6(v)}let g={get action(){return l},get location(){return t(i,a)},listen(v){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(hC,f),c=v,()=>{i.removeEventListener(hC,f),c=null}},createHref(v){return e(i,v)},createURL:y,encodeLocation(v){let x=y(v);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:m,go(v){return a.go(v)}};return g}function s6(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ct(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Ud(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function lR(t,e,n="/"){return a6(t,e,n,!1)}function a6(t,e,n,r){let i=typeof e=="string"?$c(e):e,s=is(i.pathname||"/",n);if(s==null)return null;let a=cR(t);o6(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=v6(s);l=g6(a[c],u,r)}return l}function cR(t,e=[],n=[],r="",i=!1){let s=(a,l,c=i,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&c)return;Ct(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let f=Yi([r,d.relativePath]),h=n.concat(d);a.children&&a.children.length>0&&(Ct(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),cR(a.children,e,h,f,c)),!(a.path==null&&!a.index)&&e.push({path:f,score:p6(f,a.index),routesMeta:h})};return t.forEach((a,l)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))s(a,l);else for(let u of uR(a.path))s(a,l,!0,u)}),e}function uR(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=uR(r.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function o6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:m6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var l6=/^:[\w-]+$/,c6=3,u6=2,d6=1,f6=10,h6=-2,mC=t=>t==="*";function p6(t,e){let n=t.split("/"),r=n.length;return n.some(mC)&&(r+=h6),e&&(r+=u6),n.filter(i=>!mC(i)).reduce((i,s)=>i+(l6.test(s)?c6:s===""?d6:f6),r)}function m6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function g6(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=Em({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=Em({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:Yi([s,f.pathname]),pathnameBase:_6(Yi([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=Yi([s,f.pathnameBase]))}return a}function Em(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=y6(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let y=l[h]||"";a=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const m=l[h];return f&&!m?u[d]=void 0:u[d]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:t}}function y6(t,e=!1,n=!0){Ir(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function v6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ir(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function is(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var x6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function b6(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?$c(t):t,s;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?s=gC(n.substring(1),"/"):s=gC(n,e)):s=e,{pathname:s,search:S6(r),hash:N6(i)}}function gC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function E0(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function w6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function D_(t){let e=w6(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function M_(t,e,n,r=!1){let i;typeof t=="string"?i=$c(t):(i={...t},Ct(!i.pathname||!i.pathname.includes("?"),E0("?","pathname","search",i)),Ct(!i.pathname||!i.pathname.includes("#"),E0("#","pathname","hash",i)),Ct(!i.search||!i.search.includes("#"),E0("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}l=f>=0?e[f]:"/"}let c=b6(i,l),u=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Yi=t=>t.join("/").replace(/\/\/+/g,"/"),_6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),S6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,N6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,A6=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function E6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function C6(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var dR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function fR(t,e){let n=t;if(typeof n!="string"||!x6.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(dR)try{let s=new URL(window.location.href),a=n.startsWith("//")?new URL(s.protocol+n):new URL(n),l=is(a.pathname,e);a.origin===s.origin&&l!=null?n=l+a.search+a.hash:i=!0}catch{Ir(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var hR=["POST","PUT","PATCH","DELETE"];new Set(hR);var j6=["GET",...hR];new Set(j6);var Dc=k.createContext(null);Dc.displayName="DataRouter";var vy=k.createContext(null);vy.displayName="DataRouterState";var T6=k.createContext(!1),pR=k.createContext({isTransitioning:!1});pR.displayName="ViewTransition";var P6=k.createContext(new Map);P6.displayName="Fetchers";var k6=k.createContext(null);k6.displayName="Await";var gr=k.createContext(null);gr.displayName="Navigation";var Kf=k.createContext(null);Kf.displayName="Location";var Ni=k.createContext({outlet:null,matches:[],isDataRoute:!1});Ni.displayName="Route";var L_=k.createContext(null);L_.displayName="RouteError";var mR="REACT_ROUTER_ERROR",I6="REDIRECT",O6="ROUTE_ERROR_RESPONSE";function R6(t){if(t.startsWith(`${mR}:${I6}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function $6(t){if(t.startsWith(`${mR}:${O6}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new A6(e.status,e.statusText,e.data)}catch{}}function D6(t,{relative:e}={}){Ct(Mc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=k.useContext(gr),{hash:i,pathname:s,search:a}=Yf(t,{relative:e}),l=s;return n!=="/"&&(l=s==="/"?n:Yi([n,s])),r.createHref({pathname:l,search:a,hash:i})}function Mc(){return k.useContext(Kf)!=null}function Ai(){return Ct(Mc(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Kf).location}var gR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function yR(t){k.useContext(gr).static||k.useLayoutEffect(t)}function xy(){let{isDataRoute:t}=k.useContext(Ni);return t?Y6():M6()}function M6(){Ct(Mc(),"useNavigate() may be used only in the context of a <Router> component.");let t=k.useContext(Dc),{basename:e,navigator:n}=k.useContext(gr),{matches:r}=k.useContext(Ni),{pathname:i}=Ai(),s=JSON.stringify(D_(r)),a=k.useRef(!1);return yR(()=>{a.current=!0}),k.useCallback((c,u={})=>{if(Ir(a.current,gR),!a.current)return;if(typeof c=="number"){n.go(c);return}let d=M_(c,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Yi([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,s,i,t])}k.createContext(null);function Yf(t,{relative:e}={}){let{matches:n}=k.useContext(Ni),{pathname:r}=Ai(),i=JSON.stringify(D_(n));return k.useMemo(()=>M_(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function L6(t,e){return vR(t,e)}function vR(t,e,n,r,i){var w;Ct(Mc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=k.useContext(gr),{matches:a}=k.useContext(Ni),l=a[a.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",f=l&&l.route;{let b=f&&f.path||"";bR(u,!f||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let h=Ai(),m;if(e){let b=typeof e=="string"?$c(e):e;Ct(d==="/"||((w=b.pathname)==null?void 0:w.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${b.pathname}" was given in the \`location\` prop.`),m=b}else m=h;let y=m.pathname||"/",g=y;if(d!=="/"){let b=d.replace(/^\//,"").split("/");g="/"+y.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=lR(t,{pathname:g});Ir(f||v!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Ir(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=z6(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:Yi([d,s.encodeLocation?s.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?d:Yi([d,s.encodeLocation?s.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),a,n,r,i);return e&&x?k.createElement(Kf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},x):x}function F6(){let t=K6(),e=E6(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:s},"ErrorBoundary")," or"," ",k.createElement("code",{style:s},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:i},n):null,a)}var V6=k.createElement(F6,null),xR=class extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=$6(t.digest);n&&(t=n)}let e=t!==void 0?k.createElement(Ni.Provider,{value:this.props.routeContext},k.createElement(L_.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?k.createElement(B6,{error:t},e):e}};xR.contextType=T6;var C0=new WeakMap;function B6({children:t,error:e}){let{basename:n}=k.useContext(gr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=R6(e.digest);if(r){let i=C0.get(e);if(i)throw i;let s=fR(r.location,n);if(dR&&!C0.get(e))if(s.isExternal||r.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:r.replace}));throw C0.set(e,a),a}return k.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return t}function U6({routeContext:t,match:e,children:n}){let r=k.useContext(Dc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(Ni.Provider,{value:t},n)}function z6(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n==null?void 0:n.errors;if(a!=null){let d=s.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);Ct(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let l=!1,c=-1;if(n)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:h,errors:m}=n,y=f.route.loader&&!h.hasOwnProperty(f.route.id)&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}let u=n&&r?(d,f)=>{var h,m;r(d,{location:n.location,params:((m=(h=n.matches)==null?void 0:h[0])==null?void 0:m.params)??{},unstable_pattern:C6(n.matches),errorInfo:f})}:void 0;return s.reduceRight((d,f,h)=>{let m,y=!1,g=null,v=null;n&&(m=a&&f.route.id?a[f.route.id]:void 0,g=f.route.errorElement||V6,l&&(c<0&&h===0?(bR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,v=null):c===h&&(y=!0,v=f.route.hydrateFallbackElement||null)));let x=e.concat(s.slice(0,h+1)),w=()=>{let b;return m?b=g:y?b=v:f.route.Component?b=k.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,k.createElement(U6,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?k.createElement(xR,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0},onError:u}):w()},null)}function F_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function q6(t){let e=k.useContext(Dc);return Ct(e,F_(t)),e}function W6(t){let e=k.useContext(vy);return Ct(e,F_(t)),e}function G6(t){let e=k.useContext(Ni);return Ct(e,F_(t)),e}function V_(t){let e=G6(t),n=e.matches[e.matches.length-1];return Ct(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function H6(){return V_("useRouteId")}function K6(){var r;let t=k.useContext(L_),e=W6("useRouteError"),n=V_("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function Y6(){let{router:t}=q6("useNavigate"),e=V_("useNavigate"),n=k.useRef(!1);return yR(()=>{n.current=!0}),k.useCallback(async(i,s={})=>{Ir(n.current,gR),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var yC={};function bR(t,e,n){!e&&!yC[t]&&(yC[t]=!0,Ir(!1,n))}k.memo(X6);function X6({routes:t,future:e,state:n,onError:r}){return vR(t,void 0,n,r,e)}function Q6({to:t,replace:e,state:n,relative:r}){Ct(Mc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=k.useContext(gr);Ir(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=k.useContext(Ni),{pathname:a}=Ai(),l=xy(),c=M_(t,D_(s),a,r==="path"),u=JSON.stringify(c);return k.useEffect(()=>{l(JSON.parse(u),{replace:e,state:n,relative:r})},[l,u,r,e,n]),null}function br(t){Ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function J6({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1,unstable_useTransitions:a}){Ct(!Mc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:l,navigator:i,static:s,unstable_useTransitions:a,future:{}}),[l,i,s,a]);typeof n=="string"&&(n=$c(n));let{pathname:u="/",search:d="",hash:f="",state:h=null,key:m="default"}=n,y=k.useMemo(()=>{let g=is(u,l);return g==null?null:{location:{pathname:g,search:d,hash:f,state:h,key:m},navigationType:r}},[l,u,d,f,h,m,r]);return Ir(y!=null,`<Router basename="${l}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:k.createElement(gr.Provider,{value:c},k.createElement(Kf.Provider,{children:e,value:y}))}function Z6({children:t,location:e}){return L6(Sb(t),e)}function Sb(t,e=[]){let n=[];return k.Children.forEach(t,(r,i)=>{if(!k.isValidElement(r))return;let s=[...e,i];if(r.type===k.Fragment){n.push.apply(n,Sb(r.props.children,s));return}Ct(r.type===br,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ct(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Sb(r.props.children,s)),n.push(a)}),n}var Lp="get",Fp="application/x-www-form-urlencoded";function by(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function eB(t){return by(t)&&t.tagName.toLowerCase()==="button"}function tB(t){return by(t)&&t.tagName.toLowerCase()==="form"}function nB(t){return by(t)&&t.tagName.toLowerCase()==="input"}function rB(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function iB(t,e){return t.button===0&&(!e||e==="_self")&&!rB(t)}function Nb(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function sB(t,e){let n=Nb(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}var Jh=null;function aB(){if(Jh===null)try{new FormData(document.createElement("form"),0),Jh=!1}catch{Jh=!0}return Jh}var oB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function j0(t){return t!=null&&!oB.has(t)?(Ir(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fp}"`),null):t}function lB(t,e){let n,r,i,s,a;if(tB(t)){let l=t.getAttribute("action");r=l?is(l,e):null,n=t.getAttribute("method")||Lp,i=j0(t.getAttribute("enctype"))||Fp,s=new FormData(t)}else if(eB(t)||nB(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(r=c?is(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||Lp,i=j0(t.getAttribute("formenctype"))||j0(l.getAttribute("enctype"))||Fp,s=new FormData(l,t),!aB()){let{name:u,type:d,value:f}=t;if(d==="image"){let h=u?`${u}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else u&&s.append(u,f)}}else{if(by(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Lp,r=null,i=Fp,a=t}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function B_(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cB(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&is(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function uB(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dB(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function fB(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await uB(s,n);return a.links?a.links():[]}return[]}));return gB(r.flat(1).filter(dB).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function vC(t,e,n,r,i,s){let a=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>{var d;return n[u].pathname!==c.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,u)=>a(c,u)||l(c,u)):s==="data"?e.filter((c,u)=>{var f;let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(a(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function hB(t,e,{includeHydrateFallback:n}={}){return pB(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function pB(t){return[...new Set(t)]}function mB(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function gB(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(mB(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function wR(){let t=k.useContext(Dc);return B_(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function yB(){let t=k.useContext(vy);return B_(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var U_=k.createContext(void 0);U_.displayName="FrameworkContext";function _R(){let t=k.useContext(U_);return B_(t,"You must render this element inside a <HydratedRouter> element"),t}function vB(t,e){let n=k.useContext(U_),[r,i]=k.useState(!1),[s,a]=k.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=e,h=k.useRef(null);k.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let g=x=>{x.forEach(w=>{a(w.isIntersecting)})},v=new IntersectionObserver(g,{threshold:.5});return h.current&&v.observe(h.current),()=>{v.disconnect()}}},[t]),k.useEffect(()=>{if(r){let g=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(g)}}},[r]);let m=()=>{i(!0)},y=()=>{i(!1),a(!1)};return n?t!=="intent"?[s,h,{}]:[s,h,{onFocus:ju(l,m),onBlur:ju(c,y),onMouseEnter:ju(u,m),onMouseLeave:ju(d,y),onTouchStart:ju(f,m)}]:[!1,h,{}]}function ju(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function xB({page:t,...e}){let{router:n}=wR(),r=k.useMemo(()=>lR(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?k.createElement(wB,{page:t,matches:r,...e}):null}function bB(t){let{manifest:e,routeModules:n}=_R(),[r,i]=k.useState([]);return k.useEffect(()=>{let s=!1;return fB(t,e,n).then(a=>{s||i(a)}),()=>{s=!0}},[t,e,n]),r}function wB({page:t,matches:e,...n}){let r=Ai(),{future:i,manifest:s,routeModules:a}=_R(),{basename:l}=wR(),{loaderData:c,matches:u}=yB(),d=k.useMemo(()=>vC(t,e,u,s,r,"data"),[t,e,u,s,r]),f=k.useMemo(()=>vC(t,e,u,s,r,"assets"),[t,e,u,s,r]),h=k.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let g=new Set,v=!1;if(e.forEach(w=>{var N;let b=s.routes[w.route.id];!b||!b.hasLoader||(!d.some(A=>A.route.id===w.route.id)&&w.route.id in c&&((N=a[w.route.id])!=null&&N.shouldRevalidate)||b.hasClientLoader?v=!0:g.add(w.route.id))}),g.size===0)return[];let x=cB(t,l,i.unstable_trailingSlashAwareDataRequests,"data");return v&&g.size>0&&x.searchParams.set("_routes",e.filter(w=>g.has(w.route.id)).map(w=>w.route.id).join(",")),[x.pathname+x.search]},[l,i.unstable_trailingSlashAwareDataRequests,c,r,s,d,e,t,a]),m=k.useMemo(()=>hB(f,s),[f,s]),y=bB(f);return k.createElement(k.Fragment,null,h.map(g=>k.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),m.map(g=>k.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),y.map(({key:g,link:v})=>k.createElement("link",{key:g,nonce:n.nonce,...v,crossOrigin:v.crossOrigin??n.crossOrigin})))}function _B(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var SB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{SB&&(window.__reactRouterVersion="7.13.0")}catch{}function NB({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=k.useRef();i.current==null&&(i.current=n6({window:r,v5Compat:!0}));let s=i.current,[a,l]=k.useState({action:s.action,location:s.location}),c=k.useCallback(u=>{n===!1?l(u):k.startTransition(()=>l(u))},[n]);return k.useLayoutEffect(()=>s.listen(c),[s,c]),k.createElement(J6,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:s,unstable_useTransitions:n})}var SR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NR=k.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:h,...m},y){let{basename:g,unstable_useTransitions:v}=k.useContext(gr),x=typeof u=="string"&&SR.test(u),w=fR(u,g);u=w.to;let b=D6(u,{relative:i}),[N,A,E]=vB(r,m),C=CB(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:i,viewTransition:f,unstable_defaultShouldRevalidate:h,unstable_useTransitions:v});function S(P){e&&e(P),P.defaultPrevented||C(P)}let _=k.createElement("a",{...m,...E,href:w.absoluteURL||b,onClick:w.isExternal||s?e:S,ref:_B(y,A),target:c,"data-discover":!x&&n==="render"?"true":void 0});return N&&!x?k.createElement(k.Fragment,null,_,k.createElement(xB,{page:b})):_});NR.displayName="Link";var Ab=k.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:l,children:c,...u},d){let f=Yf(a,{relative:u.relative}),h=Ai(),m=k.useContext(vy),{navigator:y,basename:g}=k.useContext(gr),v=m!=null&&IB(f)&&l===!0,x=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,w=h.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(w=w.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&g&&(b=is(b,g)||b);const N=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let A=w===x||!i&&w.startsWith(x)&&w.charAt(N)==="/",E=b!=null&&(b===x||!i&&b.startsWith(x)&&b.charAt(x.length)==="/"),C={isActive:A,isPending:E,isTransitioning:v},S=A?e:void 0,_;typeof r=="function"?_=r(C):_=[r,A?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let P=typeof s=="function"?s(C):s;return k.createElement(NR,{...u,"aria-current":S,className:_,ref:d,style:P,to:a,viewTransition:l},typeof c=="function"?c(C):c)});Ab.displayName="NavLink";var AB=k.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:a=Lp,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:h,...m},y)=>{let{unstable_useTransitions:g}=k.useContext(gr),v=PB(),x=kB(l,{relative:u}),w=a.toLowerCase()==="get"?"get":"post",b=typeof l=="string"&&SR.test(l),N=A=>{if(c&&c(A),A.defaultPrevented)return;A.preventDefault();let E=A.nativeEvent.submitter,C=(E==null?void 0:E.getAttribute("formmethod"))||a,S=()=>v(E||A.currentTarget,{fetcherKey:e,method:C,navigate:n,replace:i,state:s,relative:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:h});g&&n!==!1?k.startTransition(()=>S()):S()};return k.createElement("form",{ref:y,method:w,action:x,onSubmit:r?c:N,...m,"data-discover":!b&&t==="render"?"true":void 0})});AB.displayName="Form";function EB(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AR(t){let e=k.useContext(Dc);return Ct(e,EB(t)),e}function CB(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let u=xy(),d=Ai(),f=Yf(t,{relative:s});return k.useCallback(h=>{if(iB(h,e)){h.preventDefault();let m=n!==void 0?n:Ud(d)===Ud(f),y=()=>u(t,{replace:m,state:r,preventScrollReset:i,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:l});c?k.startTransition(()=>y()):y()}},[d,u,f,n,r,e,t,i,s,a,l,c])}function z_(t){Ir(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=k.useRef(Nb(t)),n=k.useRef(!1),r=Ai(),i=k.useMemo(()=>sB(r.search,n.current?null:e.current),[r.search]),s=xy(),a=k.useCallback((l,c)=>{const u=Nb(typeof l=="function"?l(new URLSearchParams(i)):l);n.current=!0,s("?"+u,c)},[s,i]);return[i,a]}var jB=0,TB=()=>`__${String(++jB)}__`;function PB(){let{router:t}=AR("useSubmit"),{basename:e}=k.useContext(gr),n=H6(),r=t.fetch,i=t.navigate;return k.useCallback(async(s,a={})=>{let{action:l,method:c,encType:u,formData:d,body:f}=lB(s,e);if(a.navigate===!1){let h=a.fetcherKey||TB();await r(h,n,a.action||l,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||c,formEncType:a.encType||u,flushSync:a.flushSync})}else await i(a.action||l,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||c,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,i,e,n])}function kB(t,{relative:e}={}){let{basename:n}=k.useContext(gr),r=k.useContext(Ni);Ct(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Yf(t||".",{relative:e})},a=Ai();if(t==null){s.search=a.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Yi([n,s.pathname])),Ud(s)}function IB(t,{relative:e}={}){let n=k.useContext(pR);Ct(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=AR("useViewTransitionState"),i=Yf(t,{relative:e});if(!n.isTransitioning)return!1;let s=is(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=is(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Em(i.pathname,a)!=null||Em(i.pathname,s)!=null}/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),le=(t,e)=>{const n=k.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:l="",children:c,...u},d)=>k.createElement("svg",{ref:d,...OB,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${RB(t)}`,l].join(" "),...u},[...e.map(([f,h])=>k.createElement(f,h)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=le("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=le("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $B=le("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q_=le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=le("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=le("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=le("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=le("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=le("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=le("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=le("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=le("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=le("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.25V14",key:"re2vv1"}],["path",{d:"M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z",key:"ame013"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=le("CalendarPlus",[["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["line",{x1:"19",x2:"19",y1:"16",y2:"22",key:"1ttwzi"}],["line",{x1:"16",x2:"22",y1:"19",y2:"19",key:"1g9955"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=le("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=le("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=le("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=le("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W_=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=le("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=le("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=le("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=le("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=le("Contact",[["path",{d:"M17 18a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2",key:"1mghuy"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["circle",{cx:"12",cy:"10",r:"2",key:"1yojzk"}],["line",{x1:"8",x2:"8",y1:"2",y2:"4",key:"1ff9gb"}],["line",{x1:"16",x2:"16",y1:"2",y2:"4",key:"1ufoma"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=le("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=le("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=le("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=le("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=le("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=le("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=le("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=le("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=le("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=le("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=le("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=le("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=le("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=le("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=le("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=le("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=le("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=le("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=le("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=le("PhoneMissed",[["line",{x1:"22",x2:"16",y1:"2",y2:"8",key:"1xzwqn"}],["line",{x1:"16",x2:"22",y1:"2",y2:"8",key:"13zxdn"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=le("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=le("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=le("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=le("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=le("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=le("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=le("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=le("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=le("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=le("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=le("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=le("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=le("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=le("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=le("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=le("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var _C={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},oU=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},kR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let h=(l&15)<<2|u>>6,m=u&63;c||(m=64,a||(h=64)),r.push(n[d],n[f],n[h],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(PR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||f==null)throw new lU;const h=s<<2|l>>4;if(r.push(h),u!==64){const m=l<<4&240|u>>2;if(r.push(m),f!==64){const y=u<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cU=function(t){const e=PR(t);return kR.encodeByteArray(e,!0)},Om=function(t){return cU(t).replace(/\./g,"")},IR=function(t){try{return kR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dU=()=>uU().__FIREBASE_DEFAULTS__,fU=()=>{if(typeof process>"u"||typeof _C>"u")return;const t=_C.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},hU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&IR(t[1]);return e&&JSON.parse(e)},_y=()=>{try{return dU()||fU()||hU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},OR=t=>{var e,n;return(n=(e=_y())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},RR=t=>{const e=OR(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$R=()=>{var t;return(t=_y())===null||t===void 0?void 0:t.config},DR=t=>{var e;return(e=_y())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mU(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Om(JSON.stringify(n)),Om(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gU(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(In())}function yU(){var t;const e=(t=_y())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vU(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xU(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function bU(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wU(){const t=In();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _U(){return!yU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SU(){try{return typeof indexedDB=="object"}catch{return!1}}function NU(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU="FirebaseError";class vs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=AU,Object.setPrototypeOf(this,vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xf.prototype.create)}}class Xf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?EU(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new vs(i,l,r)}}function EU(t,e){return t.replace(CU,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const CU=/\{\$([^}]+)}/g;function jU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Rm(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(SC(s)&&SC(a)){if(!Rm(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function SC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function TU(t,e){const n=new PU(t,e);return n.subscribe.bind(n)}class PU{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");kU(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=T0),i.error===void 0&&(i.error=T0),i.complete===void 0&&(i.complete=T0);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kU(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function T0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(t){return t&&t._delegate?t._delegate:t}class pa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new pU;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RU(e))try{this.getOrInitializeService({instanceIdentifier:Fa})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Fa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fa){return this.instances.has(e)}getOptions(e=Fa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:OU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fa){return this.component?this.component.multipleInstances?e:Fa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function OU(t){return t===Fa?void 0:t}function RU(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new IU(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(He||(He={}));const DU={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},MU=He.INFO,LU={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},FU=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=LU[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Y_{constructor(e){this.name=e,this._logLevel=MU,this._logHandler=FU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const VU=(t,e)=>e.some(n=>t instanceof n);let NC,AC;function BU(){return NC||(NC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UU(){return AC||(AC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MR=new WeakMap,Pb=new WeakMap,LR=new WeakMap,P0=new WeakMap,X_=new WeakMap;function zU(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(sa(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&MR.set(n,t)}).catch(()=>{}),X_.set(e,t),e}function qU(t){if(Pb.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Pb.set(t,e)}let kb={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||LR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function WU(t){kb=t(kb)}function GU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(k0(this),e,...n);return LR.set(r,e.sort?e.sort():[e]),sa(r)}:UU().includes(t)?function(...e){return t.apply(k0(this),e),sa(MR.get(this))}:function(...e){return sa(t.apply(k0(this),e))}}function HU(t){return typeof t=="function"?GU(t):(t instanceof IDBTransaction&&qU(t),VU(t,BU())?new Proxy(t,kb):t)}function sa(t){if(t instanceof IDBRequest)return zU(t);if(P0.has(t))return P0.get(t);const e=HU(t);return e!==t&&(P0.set(t,e),X_.set(e,t)),e}const k0=t=>X_.get(t);function KU(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=sa(a);return r&&a.addEventListener("upgradeneeded",c=>{r(sa(a.result),c.oldVersion,c.newVersion,sa(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const YU=["get","getKey","getAll","getAllKeys","count"],XU=["put","add","delete","clear"],I0=new Map;function EC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(I0.get(e))return I0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=XU.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||YU.includes(n)))return;const s=async function(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&c.done]))[0]};return I0.set(e,s),s}WU(t=>({...t,get:(e,n,r)=>EC(e,n)||t.get(e,n,r),has:(e,n)=>!!EC(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(JU(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function JU(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ib="@firebase/app",CC="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os=new Y_("@firebase/app"),ZU="@firebase/app-compat",e9="@firebase/analytics-compat",t9="@firebase/analytics",n9="@firebase/app-check-compat",r9="@firebase/app-check",i9="@firebase/auth",s9="@firebase/auth-compat",a9="@firebase/database",o9="@firebase/data-connect",l9="@firebase/database-compat",c9="@firebase/functions",u9="@firebase/functions-compat",d9="@firebase/installations",f9="@firebase/installations-compat",h9="@firebase/messaging",p9="@firebase/messaging-compat",m9="@firebase/performance",g9="@firebase/performance-compat",y9="@firebase/remote-config",v9="@firebase/remote-config-compat",x9="@firebase/storage",b9="@firebase/storage-compat",w9="@firebase/firestore",_9="@firebase/vertexai-preview",S9="@firebase/firestore-compat",N9="firebase",A9="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="[DEFAULT]",E9={[Ib]:"fire-core",[ZU]:"fire-core-compat",[t9]:"fire-analytics",[e9]:"fire-analytics-compat",[r9]:"fire-app-check",[n9]:"fire-app-check-compat",[i9]:"fire-auth",[s9]:"fire-auth-compat",[a9]:"fire-rtdb",[o9]:"fire-data-connect",[l9]:"fire-rtdb-compat",[c9]:"fire-fn",[u9]:"fire-fn-compat",[d9]:"fire-iid",[f9]:"fire-iid-compat",[h9]:"fire-fcm",[p9]:"fire-fcm-compat",[m9]:"fire-perf",[g9]:"fire-perf-compat",[y9]:"fire-rc",[v9]:"fire-rc-compat",[x9]:"fire-gcs",[b9]:"fire-gcs-compat",[w9]:"fire-fst",[S9]:"fire-fst-compat",[_9]:"fire-vertex","fire-js":"fire-js",[N9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m=new Map,C9=new Map,Rb=new Map;function jC(t,e){try{t.container.addComponent(e)}catch(n){os.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xo(t){const e=t.name;if(Rb.has(e))return os.debug(`There were multiple attempts to register component ${e}.`),!1;Rb.set(e,t);for(const n of $m.values())jC(n,t);for(const n of C9.values())jC(n,t);return!0}function Sy(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ws(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},aa=new Xf("app","Firebase",j9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new pa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw aa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=A9;function FR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ob,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw aa.create("bad-app-name",{appName:String(i)});if(n||(n=$R()),!n)throw aa.create("no-options");const s=$m.get(i);if(s){if(Rm(n,s.options)&&Rm(r,s.config))return s;throw aa.create("duplicate-app",{appName:i})}const a=new $U(i);for(const c of Rb.values())a.addComponent(c);const l=new T9(n,r,a);return $m.set(i,l),l}function Q_(t=Ob){const e=$m.get(t);if(!e&&t===Ob&&$R())return FR();if(!e)throw aa.create("no-app",{appName:t});return e}function fi(t,e,n){var r;let i=(r=E9[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),os.warn(l.join(" "));return}xo(new pa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9="firebase-heartbeat-database",k9=1,Hd="firebase-heartbeat-store";let O0=null;function VR(){return O0||(O0=KU(P9,k9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hd)}catch(n){console.warn(n)}}}}).catch(t=>{throw aa.create("idb-open",{originalErrorMessage:t.message})})),O0}async function I9(t){try{const n=(await VR()).transaction(Hd),r=await n.objectStore(Hd).get(BR(t));return await n.done,r}catch(e){if(e instanceof vs)os.warn(e.message);else{const n=aa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});os.warn(n.message)}}}async function TC(t,e){try{const r=(await VR()).transaction(Hd,"readwrite");await r.objectStore(Hd).put(e,BR(t)),await r.done}catch(n){if(n instanceof vs)os.warn(n.message);else{const r=aa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});os.warn(r.message)}}}function BR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9=1024,R9=30*24*60*60*1e3;class $9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new M9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=PC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=R9}),this._storage.overwrite(this._heartbeatsCache))}catch(r){os.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=PC(),{heartbeatsToSend:r,unsentEntries:i}=D9(this._heartbeatsCache.heartbeats),s=Om(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return os.warn(n),""}}}function PC(){return new Date().toISOString().substring(0,10)}function D9(t,e=O9){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),kC(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),kC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class M9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SU()?NU().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await I9(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return TC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return TC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function kC(t){return Om(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L9(t){xo(new pa("platform-logger",e=>new QU(e),"PRIVATE")),xo(new pa("heartbeat",e=>new $9(e),"PRIVATE")),fi(Ib,CC,t),fi(Ib,CC,"esm2017"),fi("fire-js","")}L9("");var IC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var io,UR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,S){function _(){}_.prototype=S.prototype,C.D=S.prototype,C.prototype=new _,C.prototype.constructor=C,C.C=function(P,T,O){for(var R=Array(arguments.length-2),M=2;M<arguments.length;M++)R[M-2]=arguments[M];return S.prototype[T].apply(P,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,S,_){_||(_=0);var P=Array(16);if(typeof S=="string")for(var T=0;16>T;++T)P[T]=S.charCodeAt(_++)|S.charCodeAt(_++)<<8|S.charCodeAt(_++)<<16|S.charCodeAt(_++)<<24;else for(T=0;16>T;++T)P[T]=S[_++]|S[_++]<<8|S[_++]<<16|S[_++]<<24;S=C.g[0],_=C.g[1],T=C.g[2];var O=C.g[3],R=S+(O^_&(T^O))+P[0]+3614090360&4294967295;S=_+(R<<7&4294967295|R>>>25),R=O+(T^S&(_^T))+P[1]+3905402710&4294967295,O=S+(R<<12&4294967295|R>>>20),R=T+(_^O&(S^_))+P[2]+606105819&4294967295,T=O+(R<<17&4294967295|R>>>15),R=_+(S^T&(O^S))+P[3]+3250441966&4294967295,_=T+(R<<22&4294967295|R>>>10),R=S+(O^_&(T^O))+P[4]+4118548399&4294967295,S=_+(R<<7&4294967295|R>>>25),R=O+(T^S&(_^T))+P[5]+1200080426&4294967295,O=S+(R<<12&4294967295|R>>>20),R=T+(_^O&(S^_))+P[6]+2821735955&4294967295,T=O+(R<<17&4294967295|R>>>15),R=_+(S^T&(O^S))+P[7]+4249261313&4294967295,_=T+(R<<22&4294967295|R>>>10),R=S+(O^_&(T^O))+P[8]+1770035416&4294967295,S=_+(R<<7&4294967295|R>>>25),R=O+(T^S&(_^T))+P[9]+2336552879&4294967295,O=S+(R<<12&4294967295|R>>>20),R=T+(_^O&(S^_))+P[10]+4294925233&4294967295,T=O+(R<<17&4294967295|R>>>15),R=_+(S^T&(O^S))+P[11]+2304563134&4294967295,_=T+(R<<22&4294967295|R>>>10),R=S+(O^_&(T^O))+P[12]+1804603682&4294967295,S=_+(R<<7&4294967295|R>>>25),R=O+(T^S&(_^T))+P[13]+4254626195&4294967295,O=S+(R<<12&4294967295|R>>>20),R=T+(_^O&(S^_))+P[14]+2792965006&4294967295,T=O+(R<<17&4294967295|R>>>15),R=_+(S^T&(O^S))+P[15]+1236535329&4294967295,_=T+(R<<22&4294967295|R>>>10),R=S+(T^O&(_^T))+P[1]+4129170786&4294967295,S=_+(R<<5&4294967295|R>>>27),R=O+(_^T&(S^_))+P[6]+3225465664&4294967295,O=S+(R<<9&4294967295|R>>>23),R=T+(S^_&(O^S))+P[11]+643717713&4294967295,T=O+(R<<14&4294967295|R>>>18),R=_+(O^S&(T^O))+P[0]+3921069994&4294967295,_=T+(R<<20&4294967295|R>>>12),R=S+(T^O&(_^T))+P[5]+3593408605&4294967295,S=_+(R<<5&4294967295|R>>>27),R=O+(_^T&(S^_))+P[10]+38016083&4294967295,O=S+(R<<9&4294967295|R>>>23),R=T+(S^_&(O^S))+P[15]+3634488961&4294967295,T=O+(R<<14&4294967295|R>>>18),R=_+(O^S&(T^O))+P[4]+3889429448&4294967295,_=T+(R<<20&4294967295|R>>>12),R=S+(T^O&(_^T))+P[9]+568446438&4294967295,S=_+(R<<5&4294967295|R>>>27),R=O+(_^T&(S^_))+P[14]+3275163606&4294967295,O=S+(R<<9&4294967295|R>>>23),R=T+(S^_&(O^S))+P[3]+4107603335&4294967295,T=O+(R<<14&4294967295|R>>>18),R=_+(O^S&(T^O))+P[8]+1163531501&4294967295,_=T+(R<<20&4294967295|R>>>12),R=S+(T^O&(_^T))+P[13]+2850285829&4294967295,S=_+(R<<5&4294967295|R>>>27),R=O+(_^T&(S^_))+P[2]+4243563512&4294967295,O=S+(R<<9&4294967295|R>>>23),R=T+(S^_&(O^S))+P[7]+1735328473&4294967295,T=O+(R<<14&4294967295|R>>>18),R=_+(O^S&(T^O))+P[12]+2368359562&4294967295,_=T+(R<<20&4294967295|R>>>12),R=S+(_^T^O)+P[5]+4294588738&4294967295,S=_+(R<<4&4294967295|R>>>28),R=O+(S^_^T)+P[8]+2272392833&4294967295,O=S+(R<<11&4294967295|R>>>21),R=T+(O^S^_)+P[11]+1839030562&4294967295,T=O+(R<<16&4294967295|R>>>16),R=_+(T^O^S)+P[14]+4259657740&4294967295,_=T+(R<<23&4294967295|R>>>9),R=S+(_^T^O)+P[1]+2763975236&4294967295,S=_+(R<<4&4294967295|R>>>28),R=O+(S^_^T)+P[4]+1272893353&4294967295,O=S+(R<<11&4294967295|R>>>21),R=T+(O^S^_)+P[7]+4139469664&4294967295,T=O+(R<<16&4294967295|R>>>16),R=_+(T^O^S)+P[10]+3200236656&4294967295,_=T+(R<<23&4294967295|R>>>9),R=S+(_^T^O)+P[13]+681279174&4294967295,S=_+(R<<4&4294967295|R>>>28),R=O+(S^_^T)+P[0]+3936430074&4294967295,O=S+(R<<11&4294967295|R>>>21),R=T+(O^S^_)+P[3]+3572445317&4294967295,T=O+(R<<16&4294967295|R>>>16),R=_+(T^O^S)+P[6]+76029189&4294967295,_=T+(R<<23&4294967295|R>>>9),R=S+(_^T^O)+P[9]+3654602809&4294967295,S=_+(R<<4&4294967295|R>>>28),R=O+(S^_^T)+P[12]+3873151461&4294967295,O=S+(R<<11&4294967295|R>>>21),R=T+(O^S^_)+P[15]+530742520&4294967295,T=O+(R<<16&4294967295|R>>>16),R=_+(T^O^S)+P[2]+3299628645&4294967295,_=T+(R<<23&4294967295|R>>>9),R=S+(T^(_|~O))+P[0]+4096336452&4294967295,S=_+(R<<6&4294967295|R>>>26),R=O+(_^(S|~T))+P[7]+1126891415&4294967295,O=S+(R<<10&4294967295|R>>>22),R=T+(S^(O|~_))+P[14]+2878612391&4294967295,T=O+(R<<15&4294967295|R>>>17),R=_+(O^(T|~S))+P[5]+4237533241&4294967295,_=T+(R<<21&4294967295|R>>>11),R=S+(T^(_|~O))+P[12]+1700485571&4294967295,S=_+(R<<6&4294967295|R>>>26),R=O+(_^(S|~T))+P[3]+2399980690&4294967295,O=S+(R<<10&4294967295|R>>>22),R=T+(S^(O|~_))+P[10]+4293915773&4294967295,T=O+(R<<15&4294967295|R>>>17),R=_+(O^(T|~S))+P[1]+2240044497&4294967295,_=T+(R<<21&4294967295|R>>>11),R=S+(T^(_|~O))+P[8]+1873313359&4294967295,S=_+(R<<6&4294967295|R>>>26),R=O+(_^(S|~T))+P[15]+4264355552&4294967295,O=S+(R<<10&4294967295|R>>>22),R=T+(S^(O|~_))+P[6]+2734768916&4294967295,T=O+(R<<15&4294967295|R>>>17),R=_+(O^(T|~S))+P[13]+1309151649&4294967295,_=T+(R<<21&4294967295|R>>>11),R=S+(T^(_|~O))+P[4]+4149444226&4294967295,S=_+(R<<6&4294967295|R>>>26),R=O+(_^(S|~T))+P[11]+3174756917&4294967295,O=S+(R<<10&4294967295|R>>>22),R=T+(S^(O|~_))+P[2]+718787259&4294967295,T=O+(R<<15&4294967295|R>>>17),R=_+(O^(T|~S))+P[9]+3951481745&4294967295,C.g[0]=C.g[0]+S&4294967295,C.g[1]=C.g[1]+(T+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+T&4294967295,C.g[3]=C.g[3]+O&4294967295}r.prototype.u=function(C,S){S===void 0&&(S=C.length);for(var _=S-this.blockSize,P=this.B,T=this.h,O=0;O<S;){if(T==0)for(;O<=_;)i(this,C,O),O+=this.blockSize;if(typeof C=="string"){for(;O<S;)if(P[T++]=C.charCodeAt(O++),T==this.blockSize){i(this,P),T=0;break}}else for(;O<S;)if(P[T++]=C[O++],T==this.blockSize){i(this,P),T=0;break}}this.h=T,this.o+=S},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var S=1;S<C.length-8;++S)C[S]=0;var _=8*this.o;for(S=C.length-8;S<C.length;++S)C[S]=_&255,_/=256;for(this.u(C),C=Array(16),S=_=0;4>S;++S)for(var P=0;32>P;P+=8)C[_++]=this.g[S]>>>P&255;return C};function s(C,S){var _=l;return Object.prototype.hasOwnProperty.call(_,C)?_[C]:_[C]=S(C)}function a(C,S){this.h=S;for(var _=[],P=!0,T=C.length-1;0<=T;T--){var O=C[T]|0;P&&O==S||(_[T]=O,P=!1)}this.g=_}var l={};function c(C){return-128<=C&&128>C?s(C,function(S){return new a([S|0],0>S?-1:0)}):new a([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return v(u(-C));for(var S=[],_=1,P=0;C>=_;P++)S[P]=C/_|0,_*=4294967296;return new a(S,0)}function d(C,S){if(C.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(C.charAt(0)=="-")return v(d(C.substring(1),S));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=u(Math.pow(S,8)),P=f,T=0;T<C.length;T+=8){var O=Math.min(8,C.length-T),R=parseInt(C.substring(T,T+O),S);8>O?(O=u(Math.pow(S,O)),P=P.j(O).add(u(R))):(P=P.j(_),P=P.add(u(R)))}return P}var f=c(0),h=c(1),m=c(16777216);t=a.prototype,t.m=function(){if(g(this))return-v(this).m();for(var C=0,S=1,_=0;_<this.g.length;_++){var P=this.i(_);C+=(0<=P?P:4294967296+P)*S,S*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(y(this))return"0";if(g(this))return"-"+v(this).toString(C);for(var S=u(Math.pow(C,6)),_=this,P="";;){var T=N(_,S).g;_=x(_,T.j(S));var O=((0<_.g.length?_.g[0]:_.h)>>>0).toString(C);if(_=T,y(_))return O+P;for(;6>O.length;)O="0"+O;P=O+P}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function y(C){if(C.h!=0)return!1;for(var S=0;S<C.g.length;S++)if(C.g[S]!=0)return!1;return!0}function g(C){return C.h==-1}t.l=function(C){return C=x(this,C),g(C)?-1:y(C)?0:1};function v(C){for(var S=C.g.length,_=[],P=0;P<S;P++)_[P]=~C.g[P];return new a(_,~C.h).add(h)}t.abs=function(){return g(this)?v(this):this},t.add=function(C){for(var S=Math.max(this.g.length,C.g.length),_=[],P=0,T=0;T<=S;T++){var O=P+(this.i(T)&65535)+(C.i(T)&65535),R=(O>>>16)+(this.i(T)>>>16)+(C.i(T)>>>16);P=R>>>16,O&=65535,R&=65535,_[T]=R<<16|O}return new a(_,_[_.length-1]&-2147483648?-1:0)};function x(C,S){return C.add(v(S))}t.j=function(C){if(y(this)||y(C))return f;if(g(this))return g(C)?v(this).j(v(C)):v(v(this).j(C));if(g(C))return v(this.j(v(C)));if(0>this.l(m)&&0>C.l(m))return u(this.m()*C.m());for(var S=this.g.length+C.g.length,_=[],P=0;P<2*S;P++)_[P]=0;for(P=0;P<this.g.length;P++)for(var T=0;T<C.g.length;T++){var O=this.i(P)>>>16,R=this.i(P)&65535,M=C.i(T)>>>16,D=C.i(T)&65535;_[2*P+2*T]+=R*D,w(_,2*P+2*T),_[2*P+2*T+1]+=O*D,w(_,2*P+2*T+1),_[2*P+2*T+1]+=R*M,w(_,2*P+2*T+1),_[2*P+2*T+2]+=O*M,w(_,2*P+2*T+2)}for(P=0;P<S;P++)_[P]=_[2*P+1]<<16|_[2*P];for(P=S;P<2*S;P++)_[P]=0;return new a(_,0)};function w(C,S){for(;(C[S]&65535)!=C[S];)C[S+1]+=C[S]>>>16,C[S]&=65535,S++}function b(C,S){this.g=C,this.h=S}function N(C,S){if(y(S))throw Error("division by zero");if(y(C))return new b(f,f);if(g(C))return S=N(v(C),S),new b(v(S.g),v(S.h));if(g(S))return S=N(C,v(S)),new b(v(S.g),S.h);if(30<C.g.length){if(g(C)||g(S))throw Error("slowDivide_ only works with positive integers.");for(var _=h,P=S;0>=P.l(C);)_=A(_),P=A(P);var T=E(_,1),O=E(P,1);for(P=E(P,2),_=E(_,2);!y(P);){var R=O.add(P);0>=R.l(C)&&(T=T.add(_),O=R),P=E(P,1),_=E(_,1)}return S=x(C,T.j(S)),new b(T,S)}for(T=f;0<=C.l(S);){for(_=Math.max(1,Math.floor(C.m()/S.m())),P=Math.ceil(Math.log(_)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),O=u(_),R=O.j(S);g(R)||0<R.l(C);)_-=P,O=u(_),R=O.j(S);y(O)&&(O=h),T=T.add(O),C=x(C,R)}return new b(T,C)}t.A=function(C){return N(this,C).h},t.and=function(C){for(var S=Math.max(this.g.length,C.g.length),_=[],P=0;P<S;P++)_[P]=this.i(P)&C.i(P);return new a(_,this.h&C.h)},t.or=function(C){for(var S=Math.max(this.g.length,C.g.length),_=[],P=0;P<S;P++)_[P]=this.i(P)|C.i(P);return new a(_,this.h|C.h)},t.xor=function(C){for(var S=Math.max(this.g.length,C.g.length),_=[],P=0;P<S;P++)_[P]=this.i(P)^C.i(P);return new a(_,this.h^C.h)};function A(C){for(var S=C.g.length+1,_=[],P=0;P<S;P++)_[P]=C.i(P)<<1|C.i(P-1)>>>31;return new a(_,C.h)}function E(C,S){var _=S>>5;S%=32;for(var P=C.g.length-_,T=[],O=0;O<P;O++)T[O]=0<S?C.i(O+_)>>>S|C.i(O+_+1)<<32-S:C.i(O+_);return new a(T,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,UR=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=d,io=a}).apply(typeof IC<"u"?IC:typeof self<"u"?self:typeof window<"u"?window:{});var Zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zR,Hu,qR,Vp,$b,WR,GR,HR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,j,I){return p==Array.prototype||p==Object.prototype||(p[j]=I.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zh=="object"&&Zh];for(var j=0;j<p.length;++j){var I=p[j];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function i(p,j){if(j)e:{var I=r;p=p.split(".");for(var $=0;$<p.length-1;$++){var U=p[$];if(!(U in I))break e;I=I[U]}p=p[p.length-1],$=I[p],j=j($),j!=$&&j!=null&&e(I,p,{configurable:!0,writable:!0,value:j})}}function s(p,j){p instanceof String&&(p+="");var I=0,$=!1,U={next:function(){if(!$&&I<p.length){var G=I++;return{value:j(G,p[G]),done:!1}}return $=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}i("Array.prototype.values",function(p){return p||function(){return s(this,function(j,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(p){var j=typeof p;return j=j!="object"?j:p?Array.isArray(p)?"array":j:"null",j=="array"||j=="object"&&typeof p.length=="number"}function u(p){var j=typeof p;return j=="object"&&p!=null||j=="function"}function d(p,j,I){return p.call.apply(p.bind,arguments)}function f(p,j,I){if(!p)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,$),p.apply(j,U)}}return function(){return p.apply(j,arguments)}}function h(p,j,I){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function m(p,j){var I=Array.prototype.slice.call(arguments,1);return function(){var $=I.slice();return $.push.apply($,arguments),p.apply(this,$)}}function y(p,j){function I(){}I.prototype=j.prototype,p.aa=j.prototype,p.prototype=new I,p.prototype.constructor=p,p.Qb=function($,U,G){for(var oe=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)oe[ut-2]=arguments[ut];return j.prototype[U].apply($,oe)}}function g(p){const j=p.length;if(0<j){const I=Array(j);for(let $=0;$<j;$++)I[$]=p[$];return I}return[]}function v(p,j){for(let I=1;I<arguments.length;I++){const $=arguments[I];if(c($)){const U=p.length||0,G=$.length||0;p.length=U+G;for(let oe=0;oe<G;oe++)p[U+oe]=$[oe]}else p.push($)}}class x{constructor(j,I){this.i=j,this.j=I,this.h=0,this.g=null}get(){let j;return 0<this.h?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function w(p){return/^[\s\xa0]*$/.test(p)}function b(){var p=l.navigator;return p&&(p=p.userAgent)?p:""}function N(p){return N[" "](p),p}N[" "]=function(){};var A=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function E(p,j,I){for(const $ in p)j.call(I,p[$],$,p)}function C(p,j){for(const I in p)j.call(void 0,p[I],I,p)}function S(p){const j={};for(const I in p)j[I]=p[I];return j}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(p,j){let I,$;for(let U=1;U<arguments.length;U++){$=arguments[U];for(I in $)p[I]=$[I];for(let G=0;G<_.length;G++)I=_[G],Object.prototype.hasOwnProperty.call($,I)&&(p[I]=$[I])}}function T(p){var j=1;p=p.split(":");const I=[];for(;0<j&&p.length;)I.push(p.shift()),j--;return p.length&&I.push(p.join(":")),I}function O(p){l.setTimeout(()=>{throw p},0)}function R(){var p=q;let j=null;return p.g&&(j=p.g,p.g=p.g.next,p.g||(p.h=null),j.next=null),j}class M{constructor(){this.h=this.g=null}add(j,I){const $=D.get();$.set(j,I),this.h?this.h.next=$:this.g=$,this.h=$}}var D=new x(()=>new B,p=>p.reset());class B{constructor(){this.next=this.g=this.h=null}set(j,I){this.h=j,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let V,F=!1,q=new M,H=()=>{const p=l.Promise.resolve(void 0);V=()=>{p.then(Z)}};var Z=()=>{for(var p;p=R();){try{p.h.call(p.g)}catch(I){O(I)}var j=D;j.j(p),100>j.h&&(j.h++,p.next=j.g,j.g=p)}F=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function re(p,j){this.type=p,this.g=this.target=j,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var z=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var p=!1,j=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const I=()=>{};l.addEventListener("test",I,j),l.removeEventListener("test",I,j)}catch{}return p}();function se(p,j){if(re.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var I=this.type=p.type,$=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=j,j=p.relatedTarget){if(A){e:{try{N(j.nodeName);var U=!0;break e}catch{}U=!1}U||(j=null)}}else I=="mouseover"?j=p.fromElement:I=="mouseout"&&(j=p.toElement);this.relatedTarget=j,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:me[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&se.aa.h.call(this)}}y(se,re);var me={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),ct=0;function ae(p,j,I,$,U){this.listener=p,this.proxy=null,this.src=j,this.type=I,this.capture=!!$,this.ha=U,this.key=++ct,this.da=this.fa=!1}function ye(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function _e(p){this.src=p,this.g={},this.h=0}_e.prototype.add=function(p,j,I,$,U){var G=p.toString();p=this.g[G],p||(p=this.g[G]=[],this.h++);var oe=Ne(p,j,$,U);return-1<oe?(j=p[oe],I||(j.fa=!1)):(j=new ae(j,this.src,G,!!$,U),j.fa=I,p.push(j)),j};function X(p,j){var I=j.type;if(I in p.g){var $=p.g[I],U=Array.prototype.indexOf.call($,j,void 0),G;(G=0<=U)&&Array.prototype.splice.call($,U,1),G&&(ye(j),p.g[I].length==0&&(delete p.g[I],p.h--))}}function Ne(p,j,I,$){for(var U=0;U<p.length;++U){var G=p[U];if(!G.da&&G.listener==j&&G.capture==!!I&&G.ha==$)return U}return-1}var Se="closure_lm_"+(1e6*Math.random()|0),qe={};function Qe(p,j,I,$,U){if(Array.isArray(j)){for(var G=0;G<j.length;G++)Qe(p,j[G],I,$,U);return null}return I=xe(I),p&&p[ze]?p.K(j,I,u($)?!!$.capture:!1,U):St(p,j,I,!1,$,U)}function St(p,j,I,$,U,G){if(!j)throw Error("Invalid event type");var oe=u(U)?!!U.capture:!!U,ut=W(p);if(ut||(p[Se]=ut=new _e(p)),I=ut.add(j,I,$,oe,G),I.proxy)return I;if($=ie(),I.proxy=$,$.src=p,$.listener=I,p.addEventListener)z||(U=oe),U===void 0&&(U=!1),p.addEventListener(j.toString(),$,U);else if(p.attachEvent)p.attachEvent(ve(j.toString()),$);else if(p.addListener&&p.removeListener)p.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return I}function ie(){function p(I){return j.call(p.src,p.listener,I)}const j=ot;return p}function ce(p,j,I,$,U){if(Array.isArray(j))for(var G=0;G<j.length;G++)ce(p,j[G],I,$,U);else $=u($)?!!$.capture:!!$,I=xe(I),p&&p[ze]?(p=p.i,j=String(j).toString(),j in p.g&&(G=p.g[j],I=Ne(G,I,$,U),-1<I&&(ye(G[I]),Array.prototype.splice.call(G,I,1),G.length==0&&(delete p.g[j],p.h--)))):p&&(p=W(p))&&(j=p.g[j.toString()],p=-1,j&&(p=Ne(j,I,$,U)),(I=-1<p?j[p]:null)&&$e(I))}function $e(p){if(typeof p!="number"&&p&&!p.da){var j=p.src;if(j&&j[ze])X(j.i,p);else{var I=p.type,$=p.proxy;j.removeEventListener?j.removeEventListener(I,$,p.capture):j.detachEvent?j.detachEvent(ve(I),$):j.addListener&&j.removeListener&&j.removeListener($),(I=W(j))?(X(I,p),I.h==0&&(I.src=null,j[Se]=null)):ye(p)}}}function ve(p){return p in qe?qe[p]:qe[p]="on"+p}function ot(p,j){if(p.da)p=!0;else{j=new se(j,this);var I=p.listener,$=p.ha||p.src;p.fa&&$e(p),p=I.call($,j)}return p}function W(p){return p=p[Se],p instanceof _e?p:null}var de="__closure_events_fn_"+(1e9*Math.random()>>>0);function xe(p){return typeof p=="function"?p:(p[de]||(p[de]=function(j){return p.handleEvent(j)}),p[de])}function Fe(){Y.call(this),this.i=new _e(this),this.M=this,this.F=null}y(Fe,Y),Fe.prototype[ze]=!0,Fe.prototype.removeEventListener=function(p,j,I,$){ce(this,p,j,I,$)};function gt(p,j){var I,$=p.F;if($)for(I=[];$;$=$.F)I.push($);if(p=p.M,$=j.type||j,typeof j=="string")j=new re(j,p);else if(j instanceof re)j.target=j.target||p;else{var U=j;j=new re($,p),P(j,U)}if(U=!0,I)for(var G=I.length-1;0<=G;G--){var oe=j.g=I[G];U=ja(oe,$,!0,j)&&U}if(oe=j.g=p,U=ja(oe,$,!0,j)&&U,U=ja(oe,$,!1,j)&&U,I)for(G=0;G<I.length;G++)oe=j.g=I[G],U=ja(oe,$,!1,j)&&U}Fe.prototype.N=function(){if(Fe.aa.N.call(this),this.i){var p=this.i,j;for(j in p.g){for(var I=p.g[j],$=0;$<I.length;$++)ye(I[$]);delete p.g[j],p.h--}}this.F=null},Fe.prototype.K=function(p,j,I,$){return this.i.add(String(p),j,!1,I,$)},Fe.prototype.L=function(p,j,I,$){return this.i.add(String(p),j,!0,I,$)};function ja(p,j,I,$){if(j=p.i.g[String(j)],!j)return!0;j=j.concat();for(var U=!0,G=0;G<j.length;++G){var oe=j[G];if(oe&&!oe.da&&oe.capture==I){var ut=oe.listener,un=oe.ha||oe.src;oe.fa&&X(p.i,oe),U=ut.call(un,$)!==!1&&U}}return U&&!$.defaultPrevented}function ji(p,j,I){if(typeof p=="function")I&&(p=h(p,I));else if(p&&typeof p.handleEvent=="function")p=h(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(j)?-1:l.setTimeout(p,j||0)}function qo(p){p.g=ji(()=>{p.g=null,p.i&&(p.i=!1,qo(p))},p.l);const j=p.h;p.h=null,p.m.apply(null,j)}class au extends Y{constructor(j,I){super(),this.m=j,this.l=I,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:qo(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ti(p){Y.call(this),this.h=p,this.g={}}y(Ti,Y);var Wo=[];function Go(p){E(p.g,function(j,I){this.g.hasOwnProperty(I)&&$e(j)},p),p.g={}}Ti.prototype.N=function(){Ti.aa.N.call(this),Go(this)},Ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ta=l.JSON.stringify,Pi=l.JSON.parse,ou=class{stringify(p){return l.JSON.stringify(p,void 0)}parse(p){return l.JSON.parse(p,void 0)}};function Ho(){}Ho.prototype.h=null;function lu(p){return p.h||(p.h=p.i())}function Vv(){}var Ko={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cu(){re.call(this,"d")}y(cu,re);function uu(){re.call(this,"c")}y(uu,re);var ki={},xh=null;function Yo(){return xh=xh||new Fe}ki.La="serverreachability";function ee(p){re.call(this,ki.La,p)}y(ee,re);function Te(p){const j=Yo();gt(j,new ee(j))}ki.STAT_EVENT="statevent";function fe(p,j){re.call(this,ki.STAT_EVENT,p),this.stat=j}y(fe,re);function De(p){const j=Yo();gt(j,new fe(j,p))}ki.Ma="timingevent";function Ns(p,j){re.call(this,ki.Ma,p),this.size=j}y(Ns,re);function Ii(p,j){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){p()},j)}function Pa(){this.g=!0}Pa.prototype.xa=function(){this.g=!1};function Bv(p,j,I,$,U,G){p.info(function(){if(p.g)if(G)for(var oe="",ut=G.split("&"),un=0;un<ut.length;un++){var Ze=ut[un].split("=");if(1<Ze.length){var xn=Ze[0];Ze=Ze[1];var bn=xn.split("_");oe=2<=bn.length&&bn[1]=="type"?oe+(xn+"="+Ze+"&"):oe+(xn+"=redacted&")}}else oe=null;else oe=G;return"XMLHTTP REQ ("+$+") [attempt "+U+"]: "+j+`
`+I+`
`+oe})}function du(p,j,I,$,U,G,oe){p.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+U+"]: "+j+`
`+I+`
`+G+" "+oe})}function Xo(p,j,I,$){p.info(function(){return"XMLHTTP TEXT ("+j+"): "+u3(p,I)+($?" "+$:"")})}function c3(p,j){p.info(function(){return"TIMEOUT: "+j})}Pa.prototype.info=function(){};function u3(p,j){if(!p.g)return j;if(!j)return null;try{var I=JSON.parse(j);if(I){for(p=0;p<I.length;p++)if(Array.isArray(I[p])){var $=I[p];if(!(2>$.length)){var U=$[1];if(Array.isArray(U)&&!(1>U.length)){var G=U[0];if(G!="noop"&&G!="stop"&&G!="close")for(var oe=1;oe<U.length;oe++)U[oe]=""}}}}return Ta(I)}catch{return j}}var bh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xA={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Uv;function wh(){}y(wh,Ho),wh.prototype.g=function(){return new XMLHttpRequest},wh.prototype.i=function(){return{}},Uv=new wh;function As(p,j,I,$){this.j=p,this.i=j,this.l=I,this.R=$||1,this.U=new Ti(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bA}function bA(){this.i=null,this.g="",this.h=!1}var wA={},zv={};function qv(p,j,I){p.L=1,p.v=Ah(Oi(j)),p.m=I,p.P=!0,_A(p,null)}function _A(p,j){p.F=Date.now(),_h(p),p.A=Oi(p.v);var I=p.A,$=p.R;Array.isArray($)||($=[String($)]),DA(I.i,"t",$),p.C=0,I=p.j.J,p.h=new bA,p.g=eE(p.j,I?j:null,!p.m),0<p.O&&(p.M=new au(h(p.Y,p,p.g),p.O)),j=p.U,I=p.g,$=p.ca;var U="readystatechange";Array.isArray(U)||(U&&(Wo[0]=U.toString()),U=Wo);for(var G=0;G<U.length;G++){var oe=Qe(I,U[G],$||j.handleEvent,!1,j.h||j);if(!oe)break;j.g[oe.key]=oe}j=p.H?S(p.H):{},p.m?(p.u||(p.u="POST"),j["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,j)):(p.u="GET",p.g.ea(p.A,p.u,null,j)),Te(),Bv(p.i,p.u,p.A,p.l,p.R,p.m)}As.prototype.ca=function(p){p=p.target;const j=this.M;j&&Ri(p)==3?j.j():this.Y(p)},As.prototype.Y=function(p){try{if(p==this.g)e:{const bn=Ri(this.g);var j=this.g.Ba();const Zo=this.g.Z();if(!(3>bn)&&(bn!=3||this.g&&(this.h.h||this.g.oa()||zA(this.g)))){this.J||bn!=4||j==7||(j==8||0>=Zo?Te(3):Te(2)),Wv(this);var I=this.g.Z();this.X=I;t:if(SA(this)){var $=zA(this.g);p="";var U=$.length,G=Ri(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ka(this),fu(this);var oe="";break t}this.h.i=new l.TextDecoder}for(j=0;j<U;j++)this.h.h=!0,p+=this.h.i.decode($[j],{stream:!(G&&j==U-1)});$.length=0,this.h.g+=p,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=I==200,du(this.i,this.u,this.A,this.l,this.R,bn,I),this.o){if(this.T&&!this.K){t:{if(this.g){var ut,un=this.g;if((ut=un.g?un.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ut)){var Ze=ut;break t}}Ze=null}if(I=Ze)Xo(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gv(this,I);else{this.o=!1,this.s=3,De(12),ka(this),fu(this);break e}}if(this.P){I=!0;let Dr;for(;!this.J&&this.C<oe.length;)if(Dr=d3(this,oe),Dr==zv){bn==4&&(this.s=4,De(14),I=!1),Xo(this.i,this.l,null,"[Incomplete Response]");break}else if(Dr==wA){this.s=4,De(15),Xo(this.i,this.l,oe,"[Invalid Chunk]"),I=!1;break}else Xo(this.i,this.l,Dr,null),Gv(this,Dr);if(SA(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),bn!=4||oe.length!=0||this.h.h||(this.s=1,De(16),I=!1),this.o=this.o&&I,!I)Xo(this.i,this.l,oe,"[Invalid Chunked Response]"),ka(this),fu(this);else if(0<oe.length&&!this.W){this.W=!0;var xn=this.j;xn.g==this&&xn.ba&&!xn.M&&(xn.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Jv(xn),xn.M=!0,De(11))}}else Xo(this.i,this.l,oe,null),Gv(this,oe);bn==4&&ka(this),this.o&&!this.J&&(bn==4?XA(this.j,this):(this.o=!1,_h(this)))}else j3(this.g),I==400&&0<oe.indexOf("Unknown SID")?(this.s=3,De(12)):(this.s=0,De(13)),ka(this),fu(this)}}}catch{}finally{}};function SA(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function d3(p,j){var I=p.C,$=j.indexOf(`
`,I);return $==-1?zv:(I=Number(j.substring(I,$)),isNaN(I)?wA:($+=1,$+I>j.length?zv:(j=j.slice($,$+I),p.C=$+I,j)))}As.prototype.cancel=function(){this.J=!0,ka(this)};function _h(p){p.S=Date.now()+p.I,NA(p,p.I)}function NA(p,j){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Ii(h(p.ba,p),j)}function Wv(p){p.B&&(l.clearTimeout(p.B),p.B=null)}As.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(c3(this.i,this.A),this.L!=2&&(Te(),De(17)),ka(this),this.s=2,fu(this)):NA(this,this.S-p)};function fu(p){p.j.G==0||p.J||XA(p.j,p)}function ka(p){Wv(p);var j=p.M;j&&typeof j.ma=="function"&&j.ma(),p.M=null,Go(p.U),p.g&&(j=p.g,p.g=null,j.abort(),j.ma())}function Gv(p,j){try{var I=p.j;if(I.G!=0&&(I.g==p||Hv(I.h,p))){if(!p.K&&Hv(I.h,p)&&I.G==3){try{var $=I.Da.g.parse(j)}catch{$=null}if(Array.isArray($)&&$.length==3){var U=$;if(U[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<p.F)kh(I),Th(I);else break e;Qv(I),De(18)}}else I.za=U[1],0<I.za-I.T&&37500>U[2]&&I.F&&I.v==0&&!I.C&&(I.C=Ii(h(I.Za,I),6e3));if(1>=CA(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Oa(I,11)}else if((p.K||I.g==p)&&kh(I),!w(j))for(U=I.Da.g.parse(j),j=0;j<U.length;j++){let Ze=U[j];if(I.T=Ze[0],Ze=Ze[1],I.G==2)if(Ze[0]=="c"){I.K=Ze[1],I.ia=Ze[2];const xn=Ze[3];xn!=null&&(I.la=xn,I.j.info("VER="+I.la));const bn=Ze[4];bn!=null&&(I.Aa=bn,I.j.info("SVER="+I.Aa));const Zo=Ze[5];Zo!=null&&typeof Zo=="number"&&0<Zo&&($=1.5*Zo,I.L=$,I.j.info("backChannelRequestTimeoutMs_="+$)),$=I;const Dr=p.g;if(Dr){const Oh=Dr.g?Dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oh){var G=$.h;G.g||Oh.indexOf("spdy")==-1&&Oh.indexOf("quic")==-1&&Oh.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Kv(G,G.h),G.h=null))}if($.D){const Zv=Dr.g?Dr.g.getResponseHeader("X-HTTP-Session-Id"):null;Zv&&($.ya=Zv,yt($.I,$.D,Zv))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-p.F,I.j.info("Handshake RTT: "+I.R+"ms")),$=I;var oe=p;if($.qa=ZA($,$.J?$.ia:null,$.W),oe.K){jA($.h,oe);var ut=oe,un=$.L;un&&(ut.I=un),ut.B&&(Wv(ut),_h(ut)),$.g=oe}else KA($);0<I.i.length&&Ph(I)}else Ze[0]!="stop"&&Ze[0]!="close"||Oa(I,7);else I.G==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?Oa(I,7):Xv(I):Ze[0]!="noop"&&I.l&&I.l.ta(Ze),I.v=0)}}Te(4)}catch{}}var f3=class{constructor(p,j){this.g=p,this.map=j}};function AA(p){this.l=p||10,l.PerformanceNavigationTiming?(p=l.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function EA(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function CA(p){return p.h?1:p.g?p.g.size:0}function Hv(p,j){return p.h?p.h==j:p.g?p.g.has(j):!1}function Kv(p,j){p.g?p.g.add(j):p.h=j}function jA(p,j){p.h&&p.h==j?p.h=null:p.g&&p.g.has(j)&&p.g.delete(j)}AA.prototype.cancel=function(){if(this.i=TA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function TA(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let j=p.i;for(const I of p.g.values())j=j.concat(I.D);return j}return g(p.i)}function h3(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(c(p)){for(var j=[],I=p.length,$=0;$<I;$++)j.push(p[$]);return j}j=[],I=0;for($ in p)j[I++]=p[$];return j}function p3(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(c(p)||typeof p=="string"){var j=[];p=p.length;for(var I=0;I<p;I++)j.push(I);return j}j=[],I=0;for(const $ in p)j[I++]=$;return j}}}function PA(p,j){if(p.forEach&&typeof p.forEach=="function")p.forEach(j,void 0);else if(c(p)||typeof p=="string")Array.prototype.forEach.call(p,j,void 0);else for(var I=p3(p),$=h3(p),U=$.length,G=0;G<U;G++)j.call(void 0,$[G],I&&I[G],p)}var kA=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function m3(p,j){if(p){p=p.split("&");for(var I=0;I<p.length;I++){var $=p[I].indexOf("="),U=null;if(0<=$){var G=p[I].substring(0,$);U=p[I].substring($+1)}else G=p[I];j(G,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Ia(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Ia){this.h=p.h,Sh(this,p.j),this.o=p.o,this.g=p.g,Nh(this,p.s),this.l=p.l;var j=p.i,I=new mu;I.i=j.i,j.g&&(I.g=new Map(j.g),I.h=j.h),IA(this,I),this.m=p.m}else p&&(j=String(p).match(kA))?(this.h=!1,Sh(this,j[1]||"",!0),this.o=hu(j[2]||""),this.g=hu(j[3]||"",!0),Nh(this,j[4]),this.l=hu(j[5]||"",!0),IA(this,j[6]||"",!0),this.m=hu(j[7]||"")):(this.h=!1,this.i=new mu(null,this.h))}Ia.prototype.toString=function(){var p=[],j=this.j;j&&p.push(pu(j,OA,!0),":");var I=this.g;return(I||j=="file")&&(p.push("//"),(j=this.o)&&p.push(pu(j,OA,!0),"@"),p.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&p.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&p.push("/"),p.push(pu(I,I.charAt(0)=="/"?v3:y3,!0))),(I=this.i.toString())&&p.push("?",I),(I=this.m)&&p.push("#",pu(I,b3)),p.join("")};function Oi(p){return new Ia(p)}function Sh(p,j,I){p.j=I?hu(j,!0):j,p.j&&(p.j=p.j.replace(/:$/,""))}function Nh(p,j){if(j){if(j=Number(j),isNaN(j)||0>j)throw Error("Bad port number "+j);p.s=j}else p.s=null}function IA(p,j,I){j instanceof mu?(p.i=j,w3(p.i,p.h)):(I||(j=pu(j,x3)),p.i=new mu(j,p.h))}function yt(p,j,I){p.i.set(j,I)}function Ah(p){return yt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function hu(p,j){return p?j?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function pu(p,j,I){return typeof p=="string"?(p=encodeURI(p).replace(j,g3),I&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function g3(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var OA=/[#\/\?@]/g,y3=/[#\?:]/g,v3=/[#\?]/g,x3=/[#\?@]/g,b3=/#/g;function mu(p,j){this.h=this.g=null,this.i=p||null,this.j=!!j}function Es(p){p.g||(p.g=new Map,p.h=0,p.i&&m3(p.i,function(j,I){p.add(decodeURIComponent(j.replace(/\+/g," ")),I)}))}t=mu.prototype,t.add=function(p,j){Es(this),this.i=null,p=Qo(this,p);var I=this.g.get(p);return I||this.g.set(p,I=[]),I.push(j),this.h+=1,this};function RA(p,j){Es(p),j=Qo(p,j),p.g.has(j)&&(p.i=null,p.h-=p.g.get(j).length,p.g.delete(j))}function $A(p,j){return Es(p),j=Qo(p,j),p.g.has(j)}t.forEach=function(p,j){Es(this),this.g.forEach(function(I,$){I.forEach(function(U){p.call(j,U,$,this)},this)},this)},t.na=function(){Es(this);const p=Array.from(this.g.values()),j=Array.from(this.g.keys()),I=[];for(let $=0;$<j.length;$++){const U=p[$];for(let G=0;G<U.length;G++)I.push(j[$])}return I},t.V=function(p){Es(this);let j=[];if(typeof p=="string")$A(this,p)&&(j=j.concat(this.g.get(Qo(this,p))));else{p=Array.from(this.g.values());for(let I=0;I<p.length;I++)j=j.concat(p[I])}return j},t.set=function(p,j){return Es(this),this.i=null,p=Qo(this,p),$A(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[j]),this.h+=1,this},t.get=function(p,j){return p?(p=this.V(p),0<p.length?String(p[0]):j):j};function DA(p,j,I){RA(p,j),0<I.length&&(p.i=null,p.g.set(Qo(p,j),g(I)),p.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],j=Array.from(this.g.keys());for(var I=0;I<j.length;I++){var $=j[I];const G=encodeURIComponent(String($)),oe=this.V($);for($=0;$<oe.length;$++){var U=G;oe[$]!==""&&(U+="="+encodeURIComponent(String(oe[$]))),p.push(U)}}return this.i=p.join("&")};function Qo(p,j){return j=String(j),p.j&&(j=j.toLowerCase()),j}function w3(p,j){j&&!p.j&&(Es(p),p.i=null,p.g.forEach(function(I,$){var U=$.toLowerCase();$!=U&&(RA(this,$),DA(this,U,I))},p)),p.j=j}function _3(p,j){const I=new Pa;if(l.Image){const $=new Image;$.onload=m(Cs,I,"TestLoadImage: loaded",!0,j,$),$.onerror=m(Cs,I,"TestLoadImage: error",!1,j,$),$.onabort=m(Cs,I,"TestLoadImage: abort",!1,j,$),$.ontimeout=m(Cs,I,"TestLoadImage: timeout",!1,j,$),l.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=p}else j(!1)}function S3(p,j){const I=new Pa,$=new AbortController,U=setTimeout(()=>{$.abort(),Cs(I,"TestPingServer: timeout",!1,j)},1e4);fetch(p,{signal:$.signal}).then(G=>{clearTimeout(U),G.ok?Cs(I,"TestPingServer: ok",!0,j):Cs(I,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(U),Cs(I,"TestPingServer: error",!1,j)})}function Cs(p,j,I,$,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),$(I)}catch{}}function N3(){this.g=new ou}function A3(p,j,I){const $=I||"";try{PA(p,function(U,G){let oe=U;u(U)&&(oe=Ta(U)),j.push($+G+"="+encodeURIComponent(oe))})}catch(U){throw j.push($+"type="+encodeURIComponent("_badmap")),U}}function Eh(p){this.l=p.Ub||null,this.j=p.eb||!1}y(Eh,Ho),Eh.prototype.g=function(){return new Ch(this.l,this.j)},Eh.prototype.i=function(p){return function(){return p}}({});function Ch(p,j){Fe.call(this),this.D=p,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Ch,Fe),t=Ch.prototype,t.open=function(p,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=j,this.readyState=1,yu(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const j={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(j.body=p),(this.D||l).fetch(new Request(this.A,j)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gu(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,yu(this)),this.g&&(this.readyState=3,yu(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;MA(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function MA(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var j=p.value?p.value:new Uint8Array(0);(j=this.v.decode(j,{stream:!p.done}))&&(this.response=this.responseText+=j)}p.done?gu(this):yu(this),this.readyState==3&&MA(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,gu(this))},t.Qa=function(p){this.g&&(this.response=p,gu(this))},t.ga=function(){this.g&&gu(this)};function gu(p){p.readyState=4,p.l=null,p.j=null,p.v=null,yu(p)}t.setRequestHeader=function(p,j){this.u.append(p,j)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],j=this.h.entries();for(var I=j.next();!I.done;)I=I.value,p.push(I[0]+": "+I[1]),I=j.next();return p.join(`\r
`)};function yu(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Ch.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function LA(p){let j="";return E(p,function(I,$){j+=$,j+=":",j+=I,j+=`\r
`}),j}function Yv(p,j,I){e:{for($ in I){var $=!1;break e}$=!0}$||(I=LA(I),typeof p=="string"?I!=null&&encodeURIComponent(String(I)):yt(p,j,I))}function It(p){Fe.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(It,Fe);var E3=/^https?$/i,C3=["POST","PUT"];t=It.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,j,I,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);j=j?j.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Uv.g(),this.v=this.o?lu(this.o):lu(Uv),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(j,String(p),!0),this.B=!1}catch(G){FA(this,G);return}if(p=I||"",I=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var U in $)I.set(U,$[U]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const G of $.keys())I.set(G,$.get(G));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(I.keys()).find(G=>G.toLowerCase()=="content-type"),U=l.FormData&&p instanceof l.FormData,!(0<=Array.prototype.indexOf.call(C3,j,void 0))||$||U||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,oe]of I)this.g.setRequestHeader(G,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{UA(this),this.u=!0,this.g.send(p),this.u=!1}catch(G){FA(this,G)}};function FA(p,j){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=j,p.m=5,VA(p),jh(p)}function VA(p){p.A||(p.A=!0,gt(p,"complete"),gt(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,gt(this,"complete"),gt(this,"abort"),jh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jh(this,!0)),It.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?BA(this):this.bb())},t.bb=function(){BA(this)};function BA(p){if(p.h&&typeof a<"u"&&(!p.v[1]||Ri(p)!=4||p.Z()!=2)){if(p.u&&Ri(p)==4)ji(p.Ea,0,p);else if(gt(p,"readystatechange"),Ri(p)==4){p.h=!1;try{const oe=p.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var I;if(!(I=j)){var $;if($=oe===0){var U=String(p.D).match(kA)[1]||null;!U&&l.self&&l.self.location&&(U=l.self.location.protocol.slice(0,-1)),$=!E3.test(U?U.toLowerCase():"")}I=$}if(I)gt(p,"complete"),gt(p,"success");else{p.m=6;try{var G=2<Ri(p)?p.g.statusText:""}catch{G=""}p.l=G+" ["+p.Z()+"]",VA(p)}}finally{jh(p)}}}}function jh(p,j){if(p.g){UA(p);const I=p.g,$=p.v[0]?()=>{}:null;p.g=null,p.v=null,j||gt(p,"ready");try{I.onreadystatechange=$}catch{}}}function UA(p){p.I&&(l.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function Ri(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<Ri(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var j=this.g.responseText;return p&&j.indexOf(p)==0&&(j=j.substring(p.length)),Pi(j)}};function zA(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function j3(p){const j={};p=(p.g&&2<=Ri(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<p.length;$++){if(w(p[$]))continue;var I=T(p[$]);const U=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const G=j[U]||[];j[U]=G,G.push(I)}C(j,function($){return $.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vu(p,j,I){return I&&I.internalChannelParams&&I.internalChannelParams[p]||j}function qA(p){this.Aa=0,this.i=[],this.j=new Pa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vu("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vu("baseRetryDelayMs",5e3,p),this.cb=vu("retryDelaySeedMs",1e4,p),this.Wa=vu("forwardChannelMaxRetries",2,p),this.wa=vu("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new AA(p&&p.concurrentRequestLimit),this.Da=new N3,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=qA.prototype,t.la=8,t.G=1,t.connect=function(p,j,I,$){De(0),this.W=p,this.H=j||{},I&&$!==void 0&&(this.H.OSID=I,this.H.OAID=$),this.F=this.X,this.I=ZA(this,null,this.W),Ph(this)};function Xv(p){if(WA(p),p.G==3){var j=p.U++,I=Oi(p.I);if(yt(I,"SID",p.K),yt(I,"RID",j),yt(I,"TYPE","terminate"),xu(p,I),j=new As(p,p.j,j),j.L=2,j.v=Ah(Oi(I)),I=!1,l.navigator&&l.navigator.sendBeacon)try{I=l.navigator.sendBeacon(j.v.toString(),"")}catch{}!I&&l.Image&&(new Image().src=j.v,I=!0),I||(j.g=eE(j.j,null),j.g.ea(j.v)),j.F=Date.now(),_h(j)}JA(p)}function Th(p){p.g&&(Jv(p),p.g.cancel(),p.g=null)}function WA(p){Th(p),p.u&&(l.clearTimeout(p.u),p.u=null),kh(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&l.clearTimeout(p.s),p.s=null)}function Ph(p){if(!EA(p.h)&&!p.s){p.s=!0;var j=p.Ga;V||H(),F||(V(),F=!0),q.add(j,p),p.B=0}}function T3(p,j){return CA(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=j.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Ii(h(p.Ga,p,j),QA(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const U=new As(this,this.j,p);let G=this.o;if(this.S&&(G?(G=S(G),P(G,this.S)):G=this.S),this.m!==null||this.O||(U.H=G,G=null),this.P)e:{for(var j=0,I=0;I<this.i.length;I++){t:{var $=this.i[I];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(j+=$,4096<j){j=I;break e}if(j===4096||I===this.i.length-1){j=I+1;break e}}j=1e3}else j=1e3;j=HA(this,U,j),I=Oi(this.I),yt(I,"RID",p),yt(I,"CVER",22),this.D&&yt(I,"X-HTTP-Session-Id",this.D),xu(this,I),G&&(this.O?j="headers="+encodeURIComponent(String(LA(G)))+"&"+j:this.m&&Yv(I,this.m,G)),Kv(this.h,U),this.Ua&&yt(I,"TYPE","init"),this.P?(yt(I,"$req",j),yt(I,"SID","null"),U.T=!0,qv(U,I,null)):qv(U,I,j),this.G=2}}else this.G==3&&(p?GA(this,p):this.i.length==0||EA(this.h)||GA(this))};function GA(p,j){var I;j?I=j.l:I=p.U++;const $=Oi(p.I);yt($,"SID",p.K),yt($,"RID",I),yt($,"AID",p.T),xu(p,$),p.m&&p.o&&Yv($,p.m,p.o),I=new As(p,p.j,I,p.B+1),p.m===null&&(I.H=p.o),j&&(p.i=j.D.concat(p.i)),j=HA(p,I,1e3),I.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Kv(p.h,I),qv(I,$,j)}function xu(p,j){p.H&&E(p.H,function(I,$){yt(j,$,I)}),p.l&&PA({},function(I,$){yt(j,$,I)})}function HA(p,j,I){I=Math.min(p.i.length,I);var $=p.l?h(p.l.Na,p.l,p):null;e:{var U=p.i;let G=-1;for(;;){const oe=["count="+I];G==-1?0<I?(G=U[0].g,oe.push("ofs="+G)):G=0:oe.push("ofs="+G);let ut=!0;for(let un=0;un<I;un++){let Ze=U[un].g;const xn=U[un].map;if(Ze-=G,0>Ze)G=Math.max(0,U[un].g-100),ut=!1;else try{A3(xn,oe,"req"+Ze+"_")}catch{$&&$(xn)}}if(ut){$=oe.join("&");break e}}}return p=p.i.splice(0,I),j.D=p,$}function KA(p){if(!p.g&&!p.u){p.Y=1;var j=p.Fa;V||H(),F||(V(),F=!0),q.add(j,p),p.v=0}}function Qv(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Ii(h(p.Fa,p),QA(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,YA(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Ii(h(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,De(10),Th(this),YA(this))};function Jv(p){p.A!=null&&(l.clearTimeout(p.A),p.A=null)}function YA(p){p.g=new As(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var j=Oi(p.qa);yt(j,"RID","rpc"),yt(j,"SID",p.K),yt(j,"AID",p.T),yt(j,"CI",p.F?"0":"1"),!p.F&&p.ja&&yt(j,"TO",p.ja),yt(j,"TYPE","xmlhttp"),xu(p,j),p.m&&p.o&&Yv(j,p.m,p.o),p.L&&(p.g.I=p.L);var I=p.g;p=p.ia,I.L=1,I.v=Ah(Oi(j)),I.m=null,I.P=!0,_A(I,p)}t.Za=function(){this.C!=null&&(this.C=null,Th(this),Qv(this),De(19))};function kh(p){p.C!=null&&(l.clearTimeout(p.C),p.C=null)}function XA(p,j){var I=null;if(p.g==j){kh(p),Jv(p),p.g=null;var $=2}else if(Hv(p.h,j))I=j.D,jA(p.h,j),$=1;else return;if(p.G!=0){if(j.o)if($==1){I=j.m?j.m.length:0,j=Date.now()-j.F;var U=p.B;$=Yo(),gt($,new Ns($,I)),Ph(p)}else KA(p);else if(U=j.s,U==3||U==0&&0<j.X||!($==1&&T3(p,j)||$==2&&Qv(p)))switch(I&&0<I.length&&(j=p.h,j.i=j.i.concat(I)),U){case 1:Oa(p,5);break;case 4:Oa(p,10);break;case 3:Oa(p,6);break;default:Oa(p,2)}}}function QA(p,j){let I=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(I*=2),I*j}function Oa(p,j){if(p.j.info("Error code "+j),j==2){var I=h(p.fb,p),$=p.Xa;const U=!$;$=new Ia($||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Sh($,"https"),Ah($),U?_3($.toString(),I):S3($.toString(),I)}else De(2);p.G=0,p.l&&p.l.sa(j),JA(p),WA(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))};function JA(p){if(p.G=0,p.ka=[],p.l){const j=TA(p.h);(j.length!=0||p.i.length!=0)&&(v(p.ka,j),v(p.ka,p.i),p.h.i.length=0,g(p.i),p.i.length=0),p.l.ra()}}function ZA(p,j,I){var $=I instanceof Ia?Oi(I):new Ia(I);if($.g!="")j&&($.g=j+"."+$.g),Nh($,$.s);else{var U=l.location;$=U.protocol,j=j?j+"."+U.hostname:U.hostname,U=+U.port;var G=new Ia(null);$&&Sh(G,$),j&&(G.g=j),U&&Nh(G,U),I&&(G.l=I),$=G}return I=p.D,j=p.ya,I&&j&&yt($,I,j),yt($,"VER",p.la),xu(p,$),$}function eE(p,j,I){if(j&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return j=p.Ca&&!p.pa?new It(new Eh({eb:I})):new It(p.pa),j.Ha(p.J),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function tE(){}t=tE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ih(){}Ih.prototype.g=function(p,j){return new Zn(p,j)};function Zn(p,j){Fe.call(this),this.g=new qA(j),this.l=p,this.h=j&&j.messageUrlParams||null,p=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(p?p["X-WebChannel-Content-Type"]=j.messageContentType:p={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.va&&(p?p["X-WebChannel-Client-Profile"]=j.va:p={"X-WebChannel-Client-Profile":j.va}),this.g.S=p,(p=j&&j.Sb)&&!w(p)&&(this.g.m=p),this.v=j&&j.supportsCrossDomainXhr||!1,this.u=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!w(j)&&(this.g.D=j,p=this.h,p!==null&&j in p&&(p=this.h,j in p&&delete p[j])),this.j=new Jo(this)}y(Zn,Fe),Zn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zn.prototype.close=function(){Xv(this.g)},Zn.prototype.o=function(p){var j=this.g;if(typeof p=="string"){var I={};I.__data__=p,p=I}else this.u&&(I={},I.__data__=Ta(p),p=I);j.i.push(new f3(j.Ya++,p)),j.G==3&&Ph(j)},Zn.prototype.N=function(){this.g.l=null,delete this.j,Xv(this.g),delete this.g,Zn.aa.N.call(this)};function nE(p){cu.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var j=p.__sm__;if(j){e:{for(const I in j){p=I;break e}p=void 0}(this.i=p)&&(p=this.i,j=j!==null&&p in j?j[p]:void 0),this.data=j}else this.data=p}y(nE,cu);function rE(){uu.call(this),this.status=1}y(rE,uu);function Jo(p){this.g=p}y(Jo,tE),Jo.prototype.ua=function(){gt(this.g,"a")},Jo.prototype.ta=function(p){gt(this.g,new nE(p))},Jo.prototype.sa=function(p){gt(this.g,new rE)},Jo.prototype.ra=function(){gt(this.g,"b")},Ih.prototype.createWebChannel=Ih.prototype.g,Zn.prototype.send=Zn.prototype.o,Zn.prototype.open=Zn.prototype.m,Zn.prototype.close=Zn.prototype.close,HR=function(){return new Ih},GR=function(){return Yo()},WR=ki,$b={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},bh.NO_ERROR=0,bh.TIMEOUT=8,bh.HTTP_ERROR=6,Vp=bh,xA.COMPLETE="complete",qR=xA,Vv.EventType=Ko,Ko.OPEN="a",Ko.CLOSE="b",Ko.ERROR="c",Ko.MESSAGE="d",Fe.prototype.listen=Fe.prototype.K,Hu=Vv,It.prototype.listenOnce=It.prototype.L,It.prototype.getLastError=It.prototype.Ka,It.prototype.getLastErrorCode=It.prototype.Ba,It.prototype.getStatus=It.prototype.Z,It.prototype.getResponseJson=It.prototype.Oa,It.prototype.getResponseText=It.prototype.oa,It.prototype.send=It.prototype.ea,It.prototype.setWithCredentials=It.prototype.Ha,zR=It}).apply(typeof Zh<"u"?Zh:typeof self<"u"?self:typeof window<"u"?window:{});const OC="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=new Y_("@firebase/firestore");function Tu(){return bo.logLevel}function ge(t,...e){if(bo.logLevel<=He.DEBUG){const n=e.map(J_);bo.debug(`Firestore (${Fc}): ${t}`,...n)}}function ls(t,...e){if(bo.logLevel<=He.ERROR){const n=e.map(J_);bo.error(`Firestore (${Fc}): ${t}`,...n)}}function Xl(t,...e){if(bo.logLevel<=He.WARN){const n=e.map(J_);bo.warn(`Firestore (${Fc}): ${t}`,...n)}}function J_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t="Unexpected state"){const e=`FIRESTORE (${Fc}) INTERNAL ASSERTION FAILED: `+t;throw ls(e),new Error(e)}function it(t,e){t||ke()}function Oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends vs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class F9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(En.UNAUTHENTICATED))}shutdown(){}}class V9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class B9{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){it(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new Xi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xi,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xi)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string"),new KR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string"),new En(e)}}class U9{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class z9{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new U9(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q9{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W9{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){it(this.o===void 0);const r=s=>{s.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,ge("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(it(typeof n.token=="string"),this.R=n.token,new q9(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=G9(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function et(t,e){return t<e?-1:t>e?1:0}function Ql(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ue(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Gt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?et(this.nanoseconds,e.nanoseconds):et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new Gt(0,0))}static max(){return new Ie(new Gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,n,r){n===void 0?n=0:n>e.length&&ke(),r===void 0?r=e.length-n:r>e.length-n&&ke(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Kd.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Kd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class wt extends Kd{construct(e,n,r){return new wt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new wt(n)}static emptyPath(){return new wt([])}}const H9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends Kd{construct(e,n,r){return new pn(e,n,r)}static isValidIdentifier(e){return H9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new pn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ue(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ue(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ue(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new ue(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(n)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(wt.fromString(e))}static fromName(e){return new we(wt.fromString(e).popFirst(5))}static empty(){return new we(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return wt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new wt(e.slice()))}}function K9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ie.fromTimestamp(r===1e9?new Gt(n+1,0):new Gt(n,r));return new ma(i,we.empty(),e)}function Y9(t){return new ma(t.readTime,t.key,-1)}class ma{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ma(Ie.min(),we.empty(),-1)}static max(){return new ma(Ie.max(),we.empty(),-1)}}function X9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=we.comparator(t.documentKey,e.documentKey),n!==0?n:et(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class J9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jf(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==Q9)throw t;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ke(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):J.reject(n)}static resolve(e){return new J((n,r)=>{n(e)})}static reject(e){return new J((n,r)=>{r(e)})}static waitFor(e){return new J((n,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&n()},c=>r(c))}),a=!0,s===i&&n()})}static or(e){let n=J.resolve(!1);for(const r of e)n=n.next(i=>i?J.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new J((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;n(e[u]).next(d=>{a[u]=d,++l,l===s&&r(a)},d=>i(d))}})}static doWhile(e,n){return new J((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Z9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Z_.oe=-1;function Ny(t){return t==null}function Dm(t){return t===0&&1/t==-1/0}function ez(t){return typeof t=="number"&&Number.isInteger(t)&&!Dm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Do(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function XR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,n){this.comparator=e,this.root=n||hn.EMPTY}insert(e,n){return new kt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ep(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ep(this.root,e,this.comparator,!1)}getReverseIterator(){return new ep(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ep(this.root,e,this.comparator,!0)}}class ep{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??hn.RED,this.left=i??hn.EMPTY,this.right=s??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new hn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return hn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ke();const e=this.left.check();if(e!==this.right.check())throw ke();return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw ke()}get value(){throw ke()}get color(){throw ke()}get left(){throw ke()}get right(){throw ke()}copy(e,n,r,i,s){return this}insert(e,n,r){return new hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $C(this.data.getIterator())}getIteratorFrom(e){return new $C(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new gn(this.comparator);return n.data=e,n}}class $C{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new lr([])}unionWith(e){let n=new gn(pn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new lr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ql(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new QR("Invalid base64 string: "+s):s}}(e);return new vn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new vn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vn.EMPTY_BYTE_STRING=new vn("");const tz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ga(t){if(it(!!t),typeof t=="string"){let e=0;const n=tz.exec(t);if(it(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dt(t.seconds),nanos:Dt(t.nanos)}}function Dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wo(t){return typeof t=="string"?vn.fromBase64String(t):vn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function tS(t){const e=t.mapValue.fields.__previous_value__;return eS(e)?tS(e):e}function Yd(t){const e=ga(t.mapValue.fields.__local_write_time__.timestampValue);return new Gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e,n,r,i,s,a,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class Xd{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Xd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp={mapValue:{}};function _o(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?eS(t)?4:iz(t)?9007199254740991:rz(t)?10:11:ke()}function xi(t,e){if(t===e)return!0;const n=_o(t);if(n!==_o(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yd(t).isEqual(Yd(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=ga(i.timestampValue),l=ga(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return wo(i.bytesValue).isEqual(wo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Dt(i.geoPointValue.latitude)===Dt(s.geoPointValue.latitude)&&Dt(i.geoPointValue.longitude)===Dt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Dt(i.integerValue)===Dt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Dt(i.doubleValue),l=Dt(s.doubleValue);return a===l?Dm(a)===Dm(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Ql(t.arrayValue.values||[],e.arrayValue.values||[],xi);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(RC(a)!==RC(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!xi(a[c],l[c])))return!1;return!0}(t,e);default:return ke()}}function Qd(t,e){return(t.values||[]).find(n=>xi(n,e))!==void 0}function Jl(t,e){if(t===e)return 0;const n=_o(t),r=_o(e);if(n!==r)return et(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return et(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Dt(s.integerValue||s.doubleValue),c=Dt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return DC(t.timestampValue,e.timestampValue);case 4:return DC(Yd(t),Yd(e));case 5:return et(t.stringValue,e.stringValue);case 6:return function(s,a){const l=wo(s),c=wo(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),c=a.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=et(l[u],c[u]);if(d!==0)return d}return et(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=et(Dt(s.latitude),Dt(a.latitude));return l!==0?l:et(Dt(s.longitude),Dt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return MC(t.arrayValue,e.arrayValue);case 10:return function(s,a){var l,c,u,d;const f=s.fields||{},h=a.fields||{},m=(l=f.value)===null||l===void 0?void 0:l.arrayValue,y=(c=h.value)===null||c===void 0?void 0:c.arrayValue,g=et(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0);return g!==0?g:MC(m,y)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===tp.mapValue&&a===tp.mapValue)return 0;if(s===tp.mapValue)return 1;if(a===tp.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=a.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=et(c[f],d[f]);if(h!==0)return h;const m=Jl(l[c[f]],u[d[f]]);if(m!==0)return m}return et(c.length,d.length)}(t.mapValue,e.mapValue);default:throw ke()}}function DC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return et(t,e);const n=ga(t),r=ga(e),i=et(n.seconds,r.seconds);return i!==0?i:et(n.nanos,r.nanos)}function MC(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Jl(n[i],r[i]);if(s)return s}return et(n.length,r.length)}function Zl(t){return Db(t)}function Db(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ga(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return wo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return we.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Db(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Db(n.fields[a])}`;return i+"}"}(t.mapValue):ke()}function LC(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Mb(t){return!!t&&"integerValue"in t}function nS(t){return!!t&&"arrayValue"in t}function FC(t){return!!t&&"nullValue"in t}function VC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Bp(t){return!!t&&"mapValue"in t}function rz(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function fd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Do(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function iz(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Bp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fd(n)}setAll(e){let n=pn.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=fd(a):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Bp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Bp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Do(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new zn(fd(this.value))}}function JR(t){const e=[];return Do(t.fields,(n,r)=>{const i=new pn([n]);if(Bp(r)){const s=JR(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new lr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new jn(e,0,Ie.min(),Ie.min(),Ie.min(),zn.empty(),0)}static newFoundDocument(e,n,r,i){return new jn(e,1,n,Ie.min(),r,i,0)}static newNoDocument(e,n){return new jn(e,2,n,Ie.min(),Ie.min(),zn.empty(),0)}static newUnknownDocument(e,n){return new jn(e,3,n,Ie.min(),Ie.min(),zn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n){this.position=e,this.inclusive=n}}function BC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=we.comparator(we.fromName(a.referenceValue),n.key):r=Jl(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function UC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n="asc"){this.field=e,this.dir=n}}function sz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{}class qt extends ZR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new oz(e,n,r):n==="array-contains"?new uz(e,r):n==="in"?new dz(e,r):n==="not-in"?new fz(e,r):n==="array-contains-any"?new hz(e,r):new qt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new lz(e,r):new cz(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Jl(n,this.value)):n!==null&&_o(this.value)===_o(n)&&this.matchesComparison(Jl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ke()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jr extends ZR{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Jr(e,n)}matches(e){return e$(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function e$(t){return t.op==="and"}function t$(t){return az(t)&&e$(t)}function az(t){for(const e of t.filters)if(e instanceof Jr)return!1;return!0}function Lb(t){if(t instanceof qt)return t.field.canonicalString()+t.op.toString()+Zl(t.value);if(t$(t))return t.filters.map(e=>Lb(e)).join(",");{const e=t.filters.map(n=>Lb(n)).join(",");return`${t.op}(${e})`}}function n$(t,e){return t instanceof qt?function(r,i){return i instanceof qt&&r.op===i.op&&r.field.isEqual(i.field)&&xi(r.value,i.value)}(t,e):t instanceof Jr?function(r,i){return i instanceof Jr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&n$(a,i.filters[l]),!0):!1}(t,e):void ke()}function r$(t){return t instanceof qt?function(n){return`${n.field.canonicalString()} ${n.op} ${Zl(n.value)}`}(t):t instanceof Jr?function(n){return n.op.toString()+" {"+n.getFilters().map(r$).join(" ,")+"}"}(t):"Filter"}class oz extends qt{constructor(e,n,r){super(e,n,r),this.key=we.fromName(r.referenceValue)}matches(e){const n=we.comparator(e.key,this.key);return this.matchesComparison(n)}}class lz extends qt{constructor(e,n){super(e,"in",n),this.keys=i$("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cz extends qt{constructor(e,n){super(e,"not-in",n),this.keys=i$("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function i$(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>we.fromName(r.referenceValue))}class uz extends qt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nS(n)&&Qd(n.arrayValue,this.value)}}class dz extends qt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qd(this.value.arrayValue,n)}}class fz extends qt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Qd(this.value.arrayValue,n)}}class hz extends qt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nS(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.ue=null}}function zC(t,e=null,n=[],r=[],i=null,s=null,a=null){return new pz(t,e,n,r,i,s,a)}function rS(t){const e=Oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Lb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ny(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Zl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Zl(r)).join(",")),e.ue=n}return e.ue}function iS(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!sz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!n$(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!UC(t.startAt,e.startAt)&&UC(t.endAt,e.endAt)}function Fb(t){return we.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function mz(t,e,n,r,i,s,a,l){return new Vc(t,e,n,r,i,s,a,l)}function Ay(t){return new Vc(t)}function qC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function s$(t){return t.collectionGroup!==null}function hd(t){const e=Oe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new gn(pn.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Jd(s,r))}),n.has(pn.keyField().canonicalString())||e.ce.push(new Jd(pn.keyField(),r))}return e.ce}function hi(t){const e=Oe(t);return e.le||(e.le=gz(e,hd(t))),e.le}function gz(t,e){if(t.limitType==="F")return zC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Jd(i.field,s)});const n=t.endAt?new Mm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Mm(t.startAt.position,t.startAt.inclusive):null;return zC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vb(t,e){const n=t.filters.concat([e]);return new Vc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Lm(t,e,n){return new Vc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ey(t,e){return iS(hi(t),hi(e))&&t.limitType===e.limitType}function a$(t){return`${rS(hi(t))}|lt:${t.limitType}`}function sl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>r$(i)).join(", ")}]`),Ny(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Zl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Zl(i)).join(",")),`Target(${r})`}(hi(t))}; limitType=${t.limitType})`}function Cy(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):we.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of hd(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,c){const u=BC(a,l,c);return a.inclusive?u<=0:u<0}(r.startAt,hd(r),i)||r.endAt&&!function(a,l,c){const u=BC(a,l,c);return a.inclusive?u>=0:u>0}(r.endAt,hd(r),i))}(t,e)}function yz(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function o$(t){return(e,n)=>{let r=!1;for(const i of hd(t)){const s=vz(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function vz(t,e,n){const r=t.field.isKeyField()?we.comparator(e.key,n.key):function(s,a,l){const c=a.data.field(s),u=l.data.field(s);return c!==null&&u!==null?Jl(c,u):ke()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ke()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Do(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return XR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz=new kt(we.comparator);function cs(){return xz}const l$=new kt(we.comparator);function Ku(...t){let e=l$;for(const n of t)e=e.insert(n.key,n);return e}function c$(t){let e=l$;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ka(){return pd()}function u$(){return pd()}function pd(){return new Bc(t=>t.toString(),(t,e)=>t.isEqual(e))}const bz=new kt(we.comparator),wz=new gn(we.comparator);function We(...t){let e=wz;for(const n of t)e=e.add(n);return e}const _z=new gn(et);function Sz(){return _z}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dm(e)?"-0":e}}function d$(t){return{integerValue:""+t}}function Nz(t,e){return ez(e)?d$(e):sS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(){this._=void 0}}function Az(t,e,n){return t instanceof Zd?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&eS(s)&&(s=tS(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof ef?h$(t,e):t instanceof tf?p$(t,e):function(i,s){const a=f$(i,s),l=WC(a)+WC(i.Pe);return Mb(a)&&Mb(i.Pe)?d$(l):sS(i.serializer,l)}(t,e)}function Ez(t,e,n){return t instanceof ef?h$(t,e):t instanceof tf?p$(t,e):n}function f$(t,e){return t instanceof Fm?function(r){return Mb(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Zd extends jy{}class ef extends jy{constructor(e){super(),this.elements=e}}function h$(t,e){const n=m$(e);for(const r of t.elements)n.some(i=>xi(i,r))||n.push(r);return{arrayValue:{values:n}}}class tf extends jy{constructor(e){super(),this.elements=e}}function p$(t,e){let n=m$(e);for(const r of t.elements)n=n.filter(i=>!xi(i,r));return{arrayValue:{values:n}}}class Fm extends jy{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function WC(t){return Dt(t.integerValue||t.doubleValue)}function m$(t){return nS(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(e,n){this.field=e,this.transform=n}}function jz(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ef&&i instanceof ef||r instanceof tf&&i instanceof tf?Ql(r.elements,i.elements,xi):r instanceof Fm&&i instanceof Fm?xi(r.Pe,i.Pe):r instanceof Zd&&i instanceof Zd}(t.transform,e.transform)}class Tz{constructor(e,n){this.version=e,this.transformResults=n}}class Yn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yn}static exists(e){return new Yn(void 0,e)}static updateTime(e){return new Yn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Up(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ty{}function g$(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new aS(t.key,Yn.none()):new eh(t.key,t.data,Yn.none());{const n=t.data,r=zn.empty();let i=new gn(pn.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Sa(t.key,r,new lr(i.toArray()),Yn.none())}}function Pz(t,e,n){t instanceof eh?function(i,s,a){const l=i.value.clone(),c=HC(i.fieldTransforms,s,a.transformResults);l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Sa?function(i,s,a){if(!Up(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=HC(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(y$(i)),c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function md(t,e,n,r){return t instanceof eh?function(s,a,l,c){if(!Up(s.precondition,a))return l;const u=s.value.clone(),d=KC(s.fieldTransforms,c,a);return u.setAll(d),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Sa?function(s,a,l,c){if(!Up(s.precondition,a))return l;const u=KC(s.fieldTransforms,c,a),d=a.data;return d.setAll(y$(s)),d.setAll(u),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,a,l){return Up(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function kz(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=f$(r.transform,i||null);s!=null&&(n===null&&(n=zn.empty()),n.set(r.field,s))}return n||null}function GC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ql(r,i,(s,a)=>jz(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class eh extends Ty{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Sa extends Ty{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function y$(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function HC(t,e,n){const r=new Map;it(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,Ez(a,l,n[i]))}return r}function KC(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,Az(s,a,e))}return r}class aS extends Ty{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Iz extends Ty{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Pz(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=md(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=md(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=u$();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const c=g$(a,l);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(Ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),We())}isEqual(e){return this.batchId===e.batchId&&Ql(this.mutations,e.mutations,(n,r)=>GC(n,r))&&Ql(this.baseMutations,e.baseMutations,(n,r)=>GC(n,r))}}class oS{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){it(e.mutations.length===r.length);let i=function(){return bz}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new oS(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,Ke;function Dz(t){switch(t){default:return ke();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function v$(t){if(t===void 0)return ls("GRPC error has no .code"),Q.UNKNOWN;switch(t){case Vt.OK:return Q.OK;case Vt.CANCELLED:return Q.CANCELLED;case Vt.UNKNOWN:return Q.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return Q.INTERNAL;case Vt.UNAVAILABLE:return Q.UNAVAILABLE;case Vt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Vt.NOT_FOUND:return Q.NOT_FOUND;case Vt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Vt.ABORTED:return Q.ABORTED;case Vt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Vt.DATA_LOSS:return Q.DATA_LOSS;default:return ke()}}(Ke=Vt||(Vt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mz(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lz=new io([4294967295,4294967295],0);function YC(t){const e=Mz().encode(t),n=new UR;return n.update(e),new Uint8Array(n.digest())}function XC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new io([n,r],0),new io([i,s],0)]}class lS{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Yu(`Invalid padding: ${n}`);if(r<0)throw new Yu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Yu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=io.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(io.fromNumber(r)));return i.compare(Lz)===1&&(i=new io([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=YC(e),[r,i]=XC(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new lS(s,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=YC(e),[r,i]=XC(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Yu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,th.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Py(Ie.min(),i,new kt(et),cs(),We())}}class th{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new th(r,n,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class x${constructor(e,n){this.targetId=e,this.me=n}}class b${constructor(e,n,r=vn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class QC{constructor(){this.fe=0,this.ge=ZC(),this.pe=vn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=We(),n=We(),r=We();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ke()}}),new th(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ZC()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,it(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Fz{constructor(e){this.Le=e,this.Be=new Map,this.ke=cs(),this.qe=JC(),this.Qe=new kt(et)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ke()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Fb(s))if(r===0){const a=new we(s.path);this.Ue(n,a,jn.newNoDocument(a,Ie.min()))}else it(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),c=l?this.Xe(l,e,a):1;if(c!==0){this.je(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=wo(r).toUint8Array()}catch(c){if(c instanceof QR)return Xl("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new lS(a,i,s)}catch(c){return Xl(c instanceof Yu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const l=this.Je(a);if(l){if(s.current&&Fb(l.target)){const c=new we(l.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,jn.newNoDocument(c,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=We();this.qe.forEach((s,a)=>{let l=!0;a.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new Py(e,n,this.Qe,this.ke,r);return this.ke=cs(),this.qe=JC(),this.Qe=new kt(et),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new QC,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new gn(et),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new QC),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function JC(){return new kt(we.comparator)}function ZC(){return new kt(we.comparator)}const Vz={asc:"ASCENDING",desc:"DESCENDING"},Bz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uz={and:"AND",or:"OR"};class zz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bb(t,e){return t.useProto3Json||Ny(e)?e:{value:e}}function Vm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w$(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qz(t,e){return Vm(t,e.toTimestamp())}function pi(t){return it(!!t),Ie.fromTimestamp(function(n){const r=ga(n);return new Gt(r.seconds,r.nanos)}(t))}function cS(t,e){return Ub(t,e).canonicalString()}function Ub(t,e){const n=function(i){return new wt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function _$(t){const e=wt.fromString(t);return it(C$(e)),e}function zb(t,e){return cS(t.databaseId,e.path)}function R0(t,e){const n=_$(e);if(n.get(1)!==t.databaseId.projectId)throw new ue(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ue(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new we(N$(n))}function S$(t,e){return cS(t.databaseId,e)}function Wz(t){const e=_$(t);return e.length===4?wt.emptyPath():N$(e)}function qb(t){return new wt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function N$(t){return it(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ej(t,e,n){return{name:zb(t,e),fields:n.value.mapValue.fields}}function Gz(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ke()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(it(d===void 0||typeof d=="string"),vn.fromBase64String(d||"")):(it(d===void 0||d instanceof Buffer||d instanceof Uint8Array),vn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(u){const d=u.code===void 0?Q.UNKNOWN:v$(u.code);return new ue(d,u.message||"")}(a);n=new b$(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=R0(t,r.document.name),s=pi(r.document.updateTime),a=r.document.createTime?pi(r.document.createTime):Ie.min(),l=new zn({mapValue:{fields:r.document.fields}}),c=jn.newFoundDocument(i,s,a,l),u=r.targetIds||[],d=r.removedTargetIds||[];n=new zp(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=R0(t,r.document),s=r.readTime?pi(r.readTime):Ie.min(),a=jn.newNoDocument(i,s),l=r.removedTargetIds||[];n=new zp([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=R0(t,r.document),s=r.removedTargetIds||[];n=new zp([],s,i,null)}else{if(!("filter"in e))return ke();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new $z(i,s),l=r.targetId;n=new x$(l,a)}}return n}function Hz(t,e){let n;if(e instanceof eh)n={update:ej(t,e.key,e.value)};else if(e instanceof aS)n={delete:zb(t,e.key)};else if(e instanceof Sa)n={update:ej(t,e.key,e.data),updateMask:n8(e.fieldMask)};else{if(!(e instanceof Iz))return ke();n={verify:zb(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof Zd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ef)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof tf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Fm)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw ke()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:qz(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ke()}(t,e.precondition)),n}function Kz(t,e){return t&&t.length>0?(it(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?pi(i.updateTime):pi(s);return a.isEqual(Ie.min())&&(a=pi(s)),new Tz(a,i.transformResults||[])}(n,e))):[]}function Yz(t,e){return{documents:[S$(t,e.path)]}}function Xz(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=S$(t,i);const s=function(u){if(u.length!==0)return E$(Jr.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:al(h.field),direction:Zz(h.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Bb(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function Qz(t){let e=Wz(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){it(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){const h=A$(f);return h instanceof Jr&&t$(h)?h.getFilters():[h]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(h=>function(y){return new Jd(ol(y.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(h))}(n.orderBy));let l=null;n.limit&&(l=function(f){let h;return h=typeof f=="object"?f.value:f,Ny(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(f){const h=!!f.before,m=f.values||[];return new Mm(m,h)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const h=!f.before,m=f.values||[];return new Mm(m,h)}(n.endAt)),mz(e,i,a,s,l,"F",c,u)}function Jz(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ke()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function A$(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ol(n.unaryFilter.field);return qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ol(n.unaryFilter.field);return qt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ol(n.unaryFilter.field);return qt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ol(n.unaryFilter.field);return qt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ke()}}(t):t.fieldFilter!==void 0?function(n){return qt.create(ol(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ke()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Jr.create(n.compositeFilter.filters.map(r=>A$(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ke()}}(n.compositeFilter.op))}(t):ke()}function Zz(t){return Vz[t]}function e8(t){return Bz[t]}function t8(t){return Uz[t]}function al(t){return{fieldPath:t.canonicalString()}}function ol(t){return pn.fromServerFormat(t.fieldPath)}function E$(t){return t instanceof qt?function(n){if(n.op==="=="){if(VC(n.value))return{unaryFilter:{field:al(n.field),op:"IS_NAN"}};if(FC(n.value))return{unaryFilter:{field:al(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(VC(n.value))return{unaryFilter:{field:al(n.field),op:"IS_NOT_NAN"}};if(FC(n.value))return{unaryFilter:{field:al(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:al(n.field),op:e8(n.op),value:n.value}}}(t):t instanceof Jr?function(n){const r=n.getFilters().map(i=>E$(i));return r.length===1?r[0]:{compositeFilter:{op:t8(n.op),filters:r}}}(t):ke()}function n8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function C$(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n,r,i,s=Ie.min(),a=Ie.min(),l=vn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e){this.ct=e}}function i8(t){const e=Qz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(){this.un=new a8}addToCollectionParentIndex(e,n){return this.un.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(ma.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(ma.min())}updateCollectionGroup(e,n,r){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class a8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new gn(wt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new gn(wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ec(0)}static kn(){return new ec(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8{constructor(){this.changes=new Bc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?J.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c8{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&md(r.mutation,i,lr.empty(),Gt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,We()).next(()=>r))}getLocalViewOfDocuments(e,n,r=We()){const i=Ka();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Ku();return s.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Ka();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,We()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let s=cs();const a=pd(),l=function(){return pd()}();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Sa)?s=s.insert(u.key,u):d!==void 0?(a.set(u.key,d.mutation.getFieldMask()),md(d.mutation,u,d.mutation.getFieldMask(),Gt.now())):a.set(u.key,lr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>a.set(u,d)),n.forEach((u,d)=>{var f;return l.set(u,new l8(d,(f=a.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,n){const r=pd();let i=new kt((a,l)=>a-l),s=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||lr.empty();d=l.applyToLocalView(u,d),r.set(c,d);const f=(i.get(l.batchId)||We()).add(c);i=i.insert(l.batchId,f)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=u$();d.forEach(h=>{if(!s.has(h)){const m=g$(n.get(h),r.get(h));m!==null&&f.set(h,m),s=s.add(h)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,f))}return J.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return we.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):s$(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):J.resolve(Ka());let l=-1,c=s;return a.next(u=>J.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?J.resolve():this.remoteDocumentCache.getEntry(e,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,We())).next(d=>({batchId:l,changes:c$(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new we(n)).next(r=>{let i=Ku();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Ku();return this.indexManager.getCollectionParents(e,s).next(l=>J.forEach(l,c=>{const u=function(f,h){return new Vc(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,h)=>{a=a.insert(f,h)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((c,u)=>{const d=u.getKey();a.get(d)===null&&(a=a.insert(d,jn.newInvalidDocument(d)))});let l=Ku();return a.forEach((c,u)=>{const d=s.get(c);d!==void 0&&md(d.mutation,u,lr.empty(),Gt.now()),Cy(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return J.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:pi(i.createTime)}}(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:i8(i.bundledQuery),readTime:pi(i.readTime)}}(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(){this.overlays=new kt(we.comparator),this.Ir=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ka();return J.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),J.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),J.resolve()}getOverlaysForCollection(e,n,r){const i=Ka(),s=n.length+1,a=new we(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return J.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new kt((u,d)=>u-d);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Ka(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Ka(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=i)););return J.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Rz(n,r));let s=this.Ir.get(n);s===void 0&&(s=We(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(){this.sessionToken=vn.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(){this.Tr=new gn(nn.Er),this.dr=new gn(nn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new nn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new nn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new we(new wt([])),r=new nn(n,e),i=new nn(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new we(new wt([])),r=new nn(n,e),i=new nn(n,e+1);let s=We();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new nn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class nn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return we.comparator(e.key,n.key)||et(e.wr,n.wr)}static Ar(e,n){return et(e.wr,n.wr)||we.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new gn(nn.Er)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Oz(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.br=this.br.add(new nn(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return J.resolve(a)}lookupMutationBatch(e,n){return J.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return J.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new nn(n,0),i=new nn(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const l=this.Dr(a.wr);s.push(l)}),J.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new gn(et);return n.forEach(i=>{const s=new nn(i,0),a=new nn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],l=>{r=r.add(l.wr)})}),J.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;we.isDocumentKey(s)||(s=s.child(""));const a=new nn(new we(s),0);let l=new gn(et);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(l=l.add(c.wr)),!0)},a),J.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){it(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return J.forEach(n.mutations,i=>{const s=new nn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new nn(n,0),i=this.br.firstAfterOrEqual(r);return J.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e){this.Mr=e,this.docs=function(){return new kt(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return J.resolve(r?r.document.mutableCopy():jn.newInvalidDocument(n))}getEntries(e,n){let r=cs();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():jn.newInvalidDocument(i))}),J.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=cs();const a=n.path,l=new we(a.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||X9(Y9(d),r)<=0||(i.has(d.key)||Cy(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return J.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ke()}Or(e,n){return J.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new m8(this)}getSize(e){return J.resolve(this.size)}}class m8 extends o8{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),J.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(e){this.persistence=e,this.Nr=new Bc(n=>rS(n),iS),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new uS,this.targetCount=0,this.kr=ec.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),J.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ec(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.Kn(n),J.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),J.waitFor(s).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return J.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),J.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),J.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return J.resolve(r)}containsKey(e,n){return J.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Z_(0),this.Kr=!1,this.Kr=!0,this.$r=new f8,this.referenceDelegate=e(this),this.Ur=new g8(this),this.indexManager=new s8,this.remoteDocumentCache=function(i){return new p8(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new r8(n),this.Gr=new u8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new d8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new h8(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ge("MemoryPersistence","Starting transaction:",e);const i=new v8(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return J.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class v8 extends J9{constructor(e){super(),this.currentSequenceNumber=e}}class dS{constructor(e){this.persistence=e,this.Jr=new uS,this.Yr=null}static Zr(e){return new dS(e)}get Xr(){if(this.Yr)return this.Yr;throw ke()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),J.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),J.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Xr,r=>{const i=we.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Ie.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return J.or([()=>J.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=We(),i=We();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new fS(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return _U()?8:Z9(In())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new x8;return this.Xi(e,n,a).next(l=>{if(s.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Tu()<=He.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",sl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),J.resolve()):(Tu()<=He.DEBUG&&ge("QueryEngine","Query:",sl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Tu()<=He.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",sl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,hi(n))):J.resolve())}Yi(e,n){if(qC(n))return J.resolve(null);let r=hi(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Lm(n,null,"F"),r=hi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=We(...s);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(n,l);return this.ns(n,u,a,c.readTime)?this.Yi(e,Lm(n,null,"F")):this.rs(e,u,n,c)}))})))}Zi(e,n,r,i){return qC(n)||i.isEqual(Ie.min())?J.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?J.resolve(null):(Tu()<=He.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),sl(n)),this.rs(e,a,n,K9(i,-1)).next(l=>l))})}ts(e,n){let r=new gn(o$(e));return n.forEach((i,s)=>{Cy(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Tu()<=He.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",sl(n)),this.Ji.getDocumentsMatchingQuery(e,n,ma.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new kt(et),this._s=new Bc(s=>rS(s),iS),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new c8(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function _8(t,e,n,r){return new w8(t,e,n,r)}async function j$(t,e){const n=Oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let c=We();for(const u of i){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:a,addedBatchIds:l}))})})}function S8(t,e){const n=Oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,h=f.keys();let m=J.resolve();return h.forEach(y=>{m=m.next(()=>d.getEntry(c,y)).next(g=>{const v=u.docVersions.get(y);it(v!==null),g.version.compareTo(v)<0&&(f.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),d.addEntry(g)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=We();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function T$(t){const e=Oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function N8(t,e){const n=Oe(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((d,f)=>{const h=i.get(f);if(!h)return;l.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,f)));let m=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(vn.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(f,m),function(g,v,x){return g.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(h,m,d)&&l.push(n.Ur.updateTargetData(s,m))});let c=cs(),u=We();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(A8(s,a,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(Ie.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(d)}return J.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.os=i,s))}function A8(t,e,n){let r=We(),i=We();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=cs();return n.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Ie.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):ge("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:a,Is:i}})}function E8(t,e){const n=Oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function C8(t,e){const n=Oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,J.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new Gs(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Wb(t,e,n){const r=Oe(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Zf(a))throw a;ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function tj(t,e,n){const r=Oe(t);let i=Ie.min(),s=We();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,d){const f=Oe(c),h=f._s.get(d);return h!==void 0?J.resolve(f.os.get(h)):f.Ur.getTargetData(u,d)}(r,a,hi(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:Ie.min(),n?s:We())).next(l=>(j8(r,yz(e),l),{documents:l,Ts:s})))}function j8(t,e,n){let r=t.us.get(e)||Ie.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class nj{constructor(){this.activeTargetIds=Sz()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class T8{constructor(){this.so=new nj,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new nj,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P8{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let np=null;function $0(){return np===null?np=function(){return 268435456+Math.round(2147483648*Math.random())}():np++,"0x"+np.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="WebChannelConnection";class O8 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const l=$0(),c=this.xo(n,r.toUriEncodedString());ge("RestConnection",`Sending RPC '${n}' ${l}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,a),this.No(n,c,u,i).then(d=>(ge("RestConnection",`Received RPC '${n}' ${l}: `,d),d),d=>{throw Xl("RestConnection",`RPC '${n}' ${l} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(n,r,i,s,a,l){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=k8[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=$0();return new Promise((a,l)=>{const c=new zR;c.setWithCredentials(!0),c.listenOnce(qR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Vp.NO_ERROR:const d=c.getResponseJson();ge(Sn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),a(d);break;case Vp.TIMEOUT:ge(Sn,`RPC '${e}' ${s} timed out`),l(new ue(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Vp.HTTP_ERROR:const f=c.getStatus();if(ge(Sn,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);const m=h==null?void 0:h.error;if(m&&m.status&&m.message){const y=function(v){const x=v.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(x)>=0?x:Q.UNKNOWN}(m.status);l(new ue(y,m.message))}else l(new ue(Q.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ue(Q.UNAVAILABLE,"Connection failed."));break;default:ke()}}finally{ge(Sn,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);ge(Sn,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=$0(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=HR(),l=GR(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=s.join("");ge(Sn,`Creating RPC '${e}' stream ${i}: ${d}`,c);const f=a.createWebChannel(d,c);let h=!1,m=!1;const y=new I8({Io:v=>{m?ge(Sn,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(h||(ge(Sn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),ge(Sn,`RPC '${e}' stream ${i} sending:`,v),f.send(v))},To:()=>f.close()}),g=(v,x,w)=>{v.listen(x,b=>{try{w(b)}catch(N){setTimeout(()=>{throw N},0)}})};return g(f,Hu.EventType.OPEN,()=>{m||(ge(Sn,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),g(f,Hu.EventType.CLOSE,()=>{m||(m=!0,ge(Sn,`RPC '${e}' stream ${i} transport closed`),y.So())}),g(f,Hu.EventType.ERROR,v=>{m||(m=!0,Xl(Sn,`RPC '${e}' stream ${i} transport errored:`,v),y.So(new ue(Q.UNAVAILABLE,"The operation could not be completed")))}),g(f,Hu.EventType.MESSAGE,v=>{var x;if(!m){const w=v.data[0];it(!!w);const b=w,N=b.error||((x=b[0])===null||x===void 0?void 0:x.error);if(N){ge(Sn,`RPC '${e}' stream ${i} received error:`,N);const A=N.status;let E=function(_){const P=Vt[_];if(P!==void 0)return v$(P)}(A),C=N.message;E===void 0&&(E=Q.INTERNAL,C="Unknown error status: "+A+" with message "+N.message),m=!0,y.So(new ue(E,C)),f.close()}else ge(Sn,`RPC '${e}' stream ${i} received:`,w),y.bo(w)}}),g(l,WR.STAT_EVENT,v=>{v.stat===$b.PROXY?ge(Sn,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===$b.NOPROXY&&ge(Sn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function D0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(t){return new zz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${constructor(e,n,r,i,s,a,l,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new P$(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(ls(n.toString()),ls("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ue(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class R8 extends k${constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Gz(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ie.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Ie.min():a.readTime?pi(a.readTime):Ie.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=qb(this.serializer),n.addTarget=function(s,a){let l;const c=a.target;if(l=Fb(c)?{documents:Yz(s,c)}:{query:Xz(s,c)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=w$(s,a.resumeToken);const u=Bb(s,a.expectedCount);u!==null&&(l.expectedCount=u)}else if(a.snapshotVersion.compareTo(Ie.min())>0){l.readTime=Vm(s,a.snapshotVersion.toTimestamp());const u=Bb(s,a.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=Jz(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=qb(this.serializer),n.removeTarget=e,this.a_(n)}}class $8 extends k${constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return it(!!e.streamToken),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){it(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Kz(e.writeResults,e.commitTime),r=pi(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=qb(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Hz(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ue(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,Ub(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ue(Q.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,Ub(n,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ue(Q.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class M8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ls(n),this.D_=!1):ge("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{Mo(this)&&(ge("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=Oe(c);u.L_.add(4),await nh(u),u.q_.set("Unknown"),u.L_.delete(4),await Iy(u)}(this))})}),this.q_=new M8(r,i)}}async function Iy(t){if(Mo(t))for(const e of t.B_)await e(!0)}async function nh(t){for(const e of t.B_)await e(!1)}function I$(t,e){const n=Oe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),gS(n)?mS(n):Uc(n).r_()&&pS(n,e))}function hS(t,e){const n=Oe(t),r=Uc(n);n.N_.delete(e),r.r_()&&O$(n,e),n.N_.size===0&&(r.r_()?r.o_():Mo(n)&&n.q_.set("Unknown"))}function pS(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Uc(t).A_(e)}function O$(t,e){t.Q_.xe(e),Uc(t).R_(e)}function mS(t){t.Q_=new Fz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Uc(t).start(),t.q_.v_()}function gS(t){return Mo(t)&&!Uc(t).n_()&&t.N_.size>0}function Mo(t){return Oe(t).L_.size===0}function R$(t){t.Q_=void 0}async function F8(t){t.q_.set("Online")}async function V8(t){t.N_.forEach((e,n)=>{pS(t,e)})}async function B8(t,e){R$(t),gS(t)?(t.q_.M_(e),mS(t)):t.q_.set("Unknown")}async function U8(t,e,n){if(t.q_.set("Online"),e instanceof b$&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Bm(t,r)}else if(e instanceof zp?t.Q_.Ke(e):e instanceof x$?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ie.min()))try{const r=await T$(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.Q_.rt(a);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,u)=>{const d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(vn.EMPTY_BYTE_STRING,d.snapshotVersion)),O$(s,c);const f=new Gs(d.target,c,u,d.sequenceNumber);pS(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ge("RemoteStore","Failed to raise snapshot:",r),await Bm(t,r)}}async function Bm(t,e,n){if(!Zf(e))throw e;t.L_.add(1),await nh(t),t.q_.set("Offline"),n||(n=()=>T$(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ge("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Iy(t)})}function $$(t,e){return e().catch(n=>Bm(t,n,e))}async function Oy(t){const e=Oe(t),n=ya(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;z8(e);)try{const i=await E8(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,q8(e,i)}catch(i){await Bm(e,i)}D$(e)&&M$(e)}function z8(t){return Mo(t)&&t.O_.length<10}function q8(t,e){t.O_.push(e);const n=ya(t);n.r_()&&n.V_&&n.m_(e.mutations)}function D$(t){return Mo(t)&&!ya(t).n_()&&t.O_.length>0}function M$(t){ya(t).start()}async function W8(t){ya(t).p_()}async function G8(t){const e=ya(t);for(const n of t.O_)e.m_(n.mutations)}async function H8(t,e,n){const r=t.O_.shift(),i=oS.from(r,e,n);await $$(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Oy(t)}async function K8(t,e){e&&ya(t).V_&&await async function(r,i){if(function(a){return Dz(a)&&a!==Q.ABORTED}(i.code)){const s=r.O_.shift();ya(r).s_(),await $$(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Oy(r)}}(t,e),D$(t)&&M$(t)}async function ij(t,e){const n=Oe(t);n.asyncQueue.verifyOperationInProgress(),ge("RemoteStore","RemoteStore received new credentials");const r=Mo(n);n.L_.add(3),await nh(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Iy(n)}async function Y8(t,e){const n=Oe(t);e?(n.L_.delete(2),await Iy(n)):e||(n.L_.add(2),await nh(n),n.q_.set("Unknown"))}function Uc(t){return t.K_||(t.K_=function(n,r,i){const s=Oe(n);return s.w_(),new R8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:F8.bind(null,t),Ro:V8.bind(null,t),mo:B8.bind(null,t),d_:U8.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),gS(t)?mS(t):t.q_.set("Unknown")):(await t.K_.stop(),R$(t))})),t.K_}function ya(t){return t.U_||(t.U_=function(n,r,i){const s=Oe(n);return s.w_(),new $8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:W8.bind(null,t),mo:K8.bind(null,t),f_:G8.bind(null,t),g_:H8.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Oy(t)):(await t.U_.stop(),t.O_.length>0&&(ge("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new yS(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vS(t,e){if(ls("AsyncQueue",`${e}: ${t}`),Zf(t))return new ue(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.comparator=e?(n,r)=>e(n,r)||we.comparator(n.key,r.key):(n,r)=>we.comparator(n.key,r.key),this.keyedMap=Ku(),this.sortedSet=new kt(this.comparator)}static emptySet(e){return new Il(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Il)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Il;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(){this.W_=new kt(we.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ke():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class tc{constructor(e,n,r,i,s,a,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new tc(e,n,Il.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ey(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X8{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Q8{constructor(){this.queries=aj(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Oe(n),s=i.queries;i.queries=aj(),s.forEach((a,l)=>{for(const c of l.j_)c.onError(r)})})(this,new ue(Q.ABORTED,"Firestore shutting down"))}}function aj(){return new Bc(t=>a$(t),Ey)}async function xS(t,e){const n=Oe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new X8,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=vS(a,`Initialization of query '${sl(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&wS(n)}async function bS(t,e){const n=Oe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function J8(t,e){const n=Oe(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.j_)l.X_(i)&&(r=!0);a.z_=i}}r&&wS(n)}function Z8(t,e,n){const r=Oe(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function wS(t){t.Y_.forEach(e=>{e.next()})}var Gb,oj;(oj=Gb||(Gb={})).ea="default",oj.Cache="cache";class _S{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new tc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=tc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Gb.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(e){this.key=e}}class F${constructor(e){this.key=e}}class e7{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=We(),this.mutatedKeys=We(),this.Aa=o$(e),this.Ra=new Il(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new sj,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const h=i.get(d),m=Cy(this.query,f)?f:null,y=!!h&&this.mutatedKeys.has(h.key),g=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;h&&m?h.data.isEqual(m.data)?y!==g&&(r.track({type:3,doc:m}),v=!0):this.ga(h,m)||(r.track({type:2,doc:m}),v=!0,(c&&this.Aa(m,c)>0||u&&this.Aa(m,u)<0)&&(l=!0)):!h&&m?(r.track({type:0,doc:m}),v=!0):h&&!m&&(r.track({type:1,doc:h}),v=!0,(c||u)&&(l=!0)),v&&(m?(a=a.add(m),s=g?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:a,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((d,f)=>function(m,y){const g=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ke()}};return g(m)-g(y)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,a.length!==0||u?{snapshot:new tc(this.query,e.Ra,s,a,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new sj,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=We(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new F$(r))}),this.da.forEach(r=>{e.has(r)||n.push(new L$(r))}),n}ba(e){this.Ta=e.Ts,this.da=We();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return tc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class t7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class n7{constructor(e){this.key=e,this.va=!1}}class r7{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Bc(l=>a$(l),Ey),this.Ma=new Map,this.xa=new Set,this.Oa=new kt(we.comparator),this.Na=new Map,this.La=new uS,this.Ba={},this.ka=new Map,this.qa=ec.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function i7(t,e,n=!0){const r=W$(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await V$(r,e,n,!0),i}async function s7(t,e){const n=W$(t);await V$(n,e,!0,!1)}async function V$(t,e,n,r){const i=await C8(t.localStore,hi(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await a7(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&I$(t.remoteStore,i),l}async function a7(t,e,n,r,i){t.Ka=(f,h,m)=>async function(g,v,x,w){let b=v.view.ma(x);b.ns&&(b=await tj(g.localStore,v.query,!1).then(({documents:C})=>v.view.ma(C,b)));const N=w&&w.targetChanges.get(v.targetId),A=w&&w.targetMismatches.get(v.targetId)!=null,E=v.view.applyChanges(b,g.isPrimaryClient,N,A);return cj(g,v.targetId,E.wa),E.snapshot}(t,f,h,m);const s=await tj(t.localStore,e,!0),a=new e7(e,s.Ts),l=a.ma(s.documents),c=th.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=a.applyChanges(l,t.isPrimaryClient,c);cj(t,n,u.wa);const d=new t7(e,n,a);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function o7(t,e,n){const r=Oe(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!Ey(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Wb(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&hS(r.remoteStore,i.targetId),Hb(r,i.targetId)}).catch(Jf)):(Hb(r,i.targetId),await Wb(r.localStore,i.targetId,!0))}async function l7(t,e){const n=Oe(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hS(n.remoteStore,r.targetId))}async function c7(t,e,n){const r=g7(t);try{const i=await function(a,l){const c=Oe(a),u=Gt.now(),d=l.reduce((m,y)=>m.add(y.key),We());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=cs(),g=We();return c.cs.getEntries(m,d).next(v=>{y=v,y.forEach((x,w)=>{w.isValidDocument()||(g=g.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,y)).next(v=>{f=v;const x=[];for(const w of l){const b=kz(w,f.get(w.key).overlayedDocument);b!=null&&x.push(new Sa(w.key,b,JR(b.value.mapValue),Yn.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,x,l)}).next(v=>{h=v;const x=v.applyToLocalDocumentSet(f,g);return c.documentOverlayCache.saveOverlays(m,v.batchId,x)})}).then(()=>({batchId:h.batchId,changes:c$(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,c){let u=a.Ba[a.currentUser.toKey()];u||(u=new kt(et)),u=u.insert(l,c),a.Ba[a.currentUser.toKey()]=u}(r,i.batchId,n),await rh(r,i.changes),await Oy(r.remoteStore)}catch(i){const s=vS(i,"Failed to persist write");n.reject(s)}}async function B$(t,e){const n=Oe(t);try{const r=await N8(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(it(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?it(a.va):i.removedDocuments.size>0&&(it(a.va),a.va=!1))}),await rh(n,r,e)}catch(r){await Jf(r)}}function lj(t,e,n){const r=Oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const l=a.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const c=Oe(a);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.j_)h.Z_(l)&&(u=!0)}),u&&wS(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function u7(t,e,n){const r=Oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new kt(we.comparator);a=a.insert(s,jn.newNoDocument(s,Ie.min()));const l=We().add(s),c=new Py(Ie.min(),new Map,new kt(et),a,l);await B$(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),SS(r)}else await Wb(r.localStore,e,!1).then(()=>Hb(r,e,n)).catch(Jf)}async function d7(t,e){const n=Oe(t),r=e.batch.batchId;try{const i=await S8(n.localStore,e);z$(n,r,null),U$(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await rh(n,i)}catch(i){await Jf(i)}}async function f7(t,e,n){const r=Oe(t);try{const i=await function(a,l){const c=Oe(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(it(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);z$(r,e,n),U$(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await rh(r,i)}catch(i){await Jf(i)}}function U$(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function z$(t,e,n){const r=Oe(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Hb(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||q$(t,r)})}function q$(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(hS(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),SS(t))}function cj(t,e,n){for(const r of n)r instanceof L$?(t.La.addReference(r.key,e),h7(t,r)):r instanceof F$?(ge("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||q$(t,r.key)):ke()}function h7(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ge("SyncEngine","New document in limbo: "+n),t.xa.add(r),SS(t))}function SS(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new we(wt.fromString(e)),r=t.qa.next();t.Na.set(r,new n7(n)),t.Oa=t.Oa.insert(n,r),I$(t.remoteStore,new Gs(hi(Ay(n.path)),r,"TargetPurposeLimboResolution",Z_.oe))}}async function rh(t,e,n){const r=Oe(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{a.push(r.Ka(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=fS.Wi(c.targetId,u);s.push(f)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(c,u){const d=Oe(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>J.forEach(u,h=>J.forEach(h.$i,m=>d.persistence.referenceDelegate.addReference(f,h.targetId,m)).next(()=>J.forEach(h.Ui,m=>d.persistence.referenceDelegate.removeReference(f,h.targetId,m)))))}catch(f){if(!Zf(f))throw f;ge("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const m=d.os.get(h),y=m.snapshotVersion,g=m.withLastLimboFreeSnapshotVersion(y);d.os=d.os.insert(h,g)}}}(r.localStore,s))}async function p7(t,e){const n=Oe(t);if(!n.currentUser.isEqual(e)){ge("SyncEngine","User change. New user:",e.toKey());const r=await j$(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new ue(Q.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rh(n,r.hs)}}function m7(t,e){const n=Oe(t),r=n.Na.get(e);if(r&&r.va)return We().add(r.key);{let i=We();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const l=n.Fa.get(a);i=i.unionWith(l.view.Va)}return i}}function W$(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=B$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=m7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=u7.bind(null,e),e.Ca.d_=J8.bind(null,e.eventManager),e.Ca.$a=Z8.bind(null,e.eventManager),e}function g7(t){const e=Oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=d7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f7.bind(null,e),e}class Um{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ky(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return _8(this.persistence,new b8,e.initialUser,this.serializer)}Ga(e){return new y8(dS.Zr,this.serializer)}Wa(e){return new T8}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Um.provider={build:()=>new Um};class Kb{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lj(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=p7.bind(null,this.syncEngine),await Y8(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Q8}()}createDatastore(e){const n=ky(e.databaseInfo.databaseId),r=function(s){return new O8(s)}(e.databaseInfo);return function(s,a,l,c){return new D8(s,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,l){return new L8(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>lj(this.syncEngine,n,0),function(){return rj.D()?new rj:new P8}())}createSyncEngine(e,n){return function(i,s,a,l,c,u,d){const f=new r7(i,s,a,l,c,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Oe(i);ge("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await nh(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Kb.provider={build:()=>new Kb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ls("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y7{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=En.UNAUTHENTICATED,this.clientId=YR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{ge("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(ge("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=vS(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function M0(t,e){t.asyncQueue.verifyOperationInProgress(),ge("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await j$(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function uj(t,e){t.asyncQueue.verifyOperationInProgress();const n=await v7(t);ge("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>ij(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>ij(e.remoteStore,i)),t._onlineComponents=e}async function v7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ge("FirestoreClient","Using user provided OfflineComponentProvider");try{await M0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Q.FAILED_PRECONDITION||i.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Xl("Error using user provided cache. Falling back to memory cache: "+n),await M0(t,new Um)}}else ge("FirestoreClient","Using default OfflineComponentProvider"),await M0(t,new Um);return t._offlineComponents}async function G$(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ge("FirestoreClient","Using user provided OnlineComponentProvider"),await uj(t,t._uninitializedComponentsProvider._online)):(ge("FirestoreClient","Using default OnlineComponentProvider"),await uj(t,new Kb))),t._onlineComponents}function x7(t){return G$(t).then(e=>e.syncEngine)}async function zm(t){const e=await G$(t),n=e.eventManager;return n.onListen=i7.bind(null,e.syncEngine),n.onUnlisten=o7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=s7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=l7.bind(null,e.syncEngine),n}function b7(t,e,n={}){const r=new Xi;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,u){const d=new NS({next:h=>{d.Za(),a.enqueueAndForget(()=>bS(s,f));const m=h.docs.has(l);!m&&h.fromCache?u.reject(new ue(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&c&&c.source==="server"?u.reject(new ue(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new _S(Ay(l.path),d,{includeMetadataChanges:!0,_a:!0});return xS(s,f)}(await zm(t),t.asyncQueue,e,n,r)),r.promise}function w7(t,e,n={}){const r=new Xi;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,u){const d=new NS({next:h=>{d.Za(),a.enqueueAndForget(()=>bS(s,f)),h.fromCache&&c.source==="server"?u.reject(new ue(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new _S(l,d,{includeMetadataChanges:!0,_a:!0});return xS(s,f)}(await zm(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H$(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K$(t,e,n){if(!n)throw new ue(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _7(t,e,n,r){if(e===!0&&r===!0)throw new ue(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function fj(t){if(!we.isDocumentKey(t))throw new ue(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hj(t){if(we.isDocumentKey(t))throw new ue(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ry(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ke()}function Xn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ue(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ry(t);throw new ue(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function S7(t,e){if(e<=0)throw new ue(Q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ue(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=H$((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ue(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ue(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ue(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $y{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pj({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pj(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new F9;switch(r.type){case"firstParty":return new z9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=dj.get(n);r&&(ge("ComponentProvider","Removing Datastore"),dj.delete(n),r.terminate())}(this),Promise.resolve()}}function N7(t,e,n,r={}){var i;const s=(t=Xn(t,$y))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Xl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=En.MOCK_USER;else{l=mU(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new ue(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new En(u)}t._authCredentials=new V9(new KR(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xs(this.firestore,e,this._query)}}class Pn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pn(this.firestore,e,this._key)}}class oa extends xs{constructor(e,n,r){super(e,n,Ay(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pn(this.firestore,null,new we(e))}withConverter(e){return new oa(this.firestore,e,this._path)}}function us(t,e,...n){if(t=Kt(t),K$("collection","path",e),t instanceof $y){const r=wt.fromString(e,...n);return hj(r),new oa(t,null,r)}{if(!(t instanceof Pn||t instanceof oa))throw new ue(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(wt.fromString(e,...n));return hj(r),new oa(t.firestore,null,r)}}function Qn(t,e,...n){if(t=Kt(t),arguments.length===1&&(e=YR.newId()),K$("doc","path",e),t instanceof $y){const r=wt.fromString(e,...n);return fj(r),new Pn(t,null,new we(r))}{if(!(t instanceof Pn||t instanceof oa))throw new ue(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(wt.fromString(e,...n));return fj(r),new Pn(t.firestore,t instanceof oa?t.converter:null,new we(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new P$(this,"async_queue_retry"),this.Vu=()=>{const r=D0();r&&ge("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=D0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=D0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Xi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Zf(e))throw e;ge("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw ls("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=yS.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ke()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function gj(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class ds extends $y{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new mj,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mj(e),this._firestoreClient=void 0,await e}}}function A7(t,e){const n=typeof t=="object"?t:Q_(),r=typeof t=="string"?t:"(default)",i=Sy(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=RR("firestore");s&&N7(i,...s)}return i}function ih(t){if(t._terminated)throw new ue(Q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||E7(t),t._firestoreClient}function E7(t){var e,n,r;const i=t._freezeSettings(),s=function(l,c,u,d){return new nz(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,H$(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new y7(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nc(vn.fromBase64String(e))}catch(n){throw new ue(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new nc(vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return et(this._lat,e._lat)||et(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7=/^__.*__$/;class j7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Sa(e,this.data,this.fieldMask,n,this.fieldTransforms):new eh(e,this.data,n,this.fieldTransforms)}}class Y${constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Sa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function X$(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ke()}}class CS{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new CS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return qm(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(X$(this.Cu)&&C7.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class T7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ky(e)}Qu(e,n,r,i=!1){return new CS({Cu:e,methodName:n,qu:r,path:pn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ah(t){const e=t._freezeSettings(),n=ky(t._databaseId);return new T7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jS(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);PS("Data must be an object, but it was:",a,r);const l=Z$(r,a);let c,u;if(s.merge)c=new lr(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=Yb(e,f,n);if(!a.contains(h))throw new ue(Q.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);tD(d,h)||d.push(h)}c=new lr(d),u=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=a.fieldTransforms;return new j7(new zn(l),c,u)}class My extends Dy{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof My}}class TS extends Dy{_toFieldTransform(e){return new Cz(e.path,new Zd)}isEqual(e){return e instanceof TS}}function Q$(t,e,n,r){const i=t.Qu(1,e,n);PS("Data must be an object, but it was:",i,r);const s=[],a=zn.empty();Do(r,(c,u)=>{const d=kS(e,c,n);u=Kt(u);const f=i.Nu(d);if(u instanceof My)s.push(d);else{const h=oh(u,f);h!=null&&(s.push(d),a.set(d,h))}});const l=new lr(s);return new Y$(a,l,i.fieldTransforms)}function J$(t,e,n,r,i,s){const a=t.Qu(1,e,n),l=[Yb(e,r,n)],c=[i];if(s.length%2!=0)throw new ue(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)l.push(Yb(e,s[h])),c.push(s[h+1]);const u=[],d=zn.empty();for(let h=l.length-1;h>=0;--h)if(!tD(u,l[h])){const m=l[h];let y=c[h];y=Kt(y);const g=a.Nu(m);if(y instanceof My)u.push(m);else{const v=oh(y,g);v!=null&&(u.push(m),d.set(m,v))}}const f=new lr(u);return new Y$(d,f,a.fieldTransforms)}function P7(t,e,n,r=!1){return oh(n,t.Qu(r?4:3,e))}function oh(t,e){if(eD(t=Kt(t)))return PS("Unsupported field value:",e,t),Z$(t,e);if(t instanceof Dy)return function(r,i){if(!X$(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let c=oh(l,i.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Nz(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Gt.fromDate(r);return{timestampValue:Vm(i.serializer,s)}}if(r instanceof Gt){const s=new Gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Vm(i.serializer,s)}}if(r instanceof AS)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof nc)return{bytesValue:w$(i.serializer,r._byteString)};if(r instanceof Pn){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:cS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ES)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return sS(l.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Ry(r)}`)}(t,e)}function Z$(t,e){const n={};return XR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Do(t,(r,i)=>{const s=oh(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function eD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Gt||t instanceof AS||t instanceof nc||t instanceof Pn||t instanceof Dy||t instanceof ES)}function PS(t,e,n){if(!eD(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Ry(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Yb(t,e,n){if((e=Kt(e))instanceof sh)return e._internalPath;if(typeof e=="string")return kS(t,e);throw qm("Field path arguments must be of type string or ",t,!1,void 0,n)}const k7=new RegExp("[~\\*/\\[\\]]");function kS(t,e,n){if(e.search(k7)>=0)throw qm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sh(...e.split("."))._internalPath}catch{throw qm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qm(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new ue(Q.INVALID_ARGUMENT,l+t+c)}function tD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new I7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ly("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class I7 extends nD{data(){return super.data()}}function Ly(t,e){return typeof e=="string"?kS(t,e):e instanceof sh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ue(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class IS{}class OS extends IS{}function nf(t,e,...n){let r=[];e instanceof IS&&r.push(e),r=r.concat(n),function(s){const a=s.filter(c=>c instanceof RS).length,l=s.filter(c=>c instanceof Fy).length;if(a>1||a>0&&l>0)throw new ue(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Fy extends OS{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Fy(e,n,r)}_apply(e){const n=this._parse(e);return iD(e._query,n),new xs(e.firestore,e.converter,Vb(e._query,n))}_parse(e){const n=ah(e.firestore);return function(s,a,l,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ue(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){vj(f,d);const m=[];for(const y of f)m.push(yj(c,s,y));h={arrayValue:{values:m}}}else h=yj(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||vj(f,d),h=P7(l,a,f,d==="in"||d==="not-in");return qt.create(u,d,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Wm(t,e,n){const r=e,i=Ly("where",t);return Fy._create(i,r,n)}class RS extends IS{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new RS(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Jr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const l=s.getFlattenedFilters();for(const c of l)iD(a,c),a=Vb(a,c)}(e._query,n),new xs(e.firestore,e.converter,Vb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $S extends OS{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new $S(e,n)}_apply(e){const n=function(i,s,a){if(i.startAt!==null)throw new ue(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ue(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Jd(s,a)}(e._query,this._field,this._direction);return new xs(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new Vc(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function DS(t,e="asc"){const n=e,r=Ly("orderBy",t);return $S._create(r,n)}class MS extends OS{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new MS(e,n,r)}_apply(e){return new xs(e.firestore,e.converter,Lm(e._query,this._limit,this._limitType))}}function Vy(t){return S7("limit",t),MS._create("limit",t,"F")}function yj(t,e,n){if(typeof(n=Kt(n))=="string"){if(n==="")throw new ue(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!s$(e)&&n.indexOf("/")!==-1)throw new ue(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(wt.fromString(n));if(!we.isDocumentKey(r))throw new ue(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return LC(t,new we(r))}if(n instanceof Pn)return LC(t,n._key);throw new ue(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ry(n)}.`)}function vj(t,e){if(!Array.isArray(t)||t.length===0)throw new ue(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iD(t,e){const n=function(i,s){for(const a of i)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ue(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class O7{convertValue(e,n="none"){switch(_o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ke()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Do(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Dt(a.doubleValue));return new ES(s)}convertGeoPoint(e){return new AS(Dt(e.latitude),Dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=tS(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yd(e));default:return null}}convertTimestamp(e){const n=ga(e);return new Gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=wt.fromString(e);it(C$(r));const i=new Xd(r.get(1),r.get(3)),s=new we(r.popFirst(5));return i.isEqual(n)||ls(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sD extends nD{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new qp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ly("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class qp extends sD{data(e={}){return super.data(e)}}class aD{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new qp(this._firestore,this._userDataWriter,r.key,r,new Xu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const c=new qp(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Xu(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new qp(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Xu(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return l.type!==0&&(u=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:R7(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function R7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ke()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(t){t=Xn(t,Pn);const e=Xn(t.firestore,ds);return b7(ih(e),t._key).then(n=>oD(e,t,n))}class FS extends O7{constructor(e){super(),this.firestore=e}convertBytes(e){return new nc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pn(this.firestore,null,n)}}function So(t){t=Xn(t,xs);const e=Xn(t.firestore,ds),n=ih(e),r=new FS(e);return rD(t._query),w7(n,t._query).then(i=>new aD(e,r,t,i))}function $7(t,e,n){t=Xn(t,Pn);const r=Xn(t.firestore,ds),i=LS(t.converter,e,n);return By(r,[jS(ah(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Yn.none())])}function Xb(t,e,n,...r){t=Xn(t,Pn);const i=Xn(t.firestore,ds),s=ah(i);let a;return a=typeof(e=Kt(e))=="string"||e instanceof sh?J$(s,"updateDoc",t._key,e,n,r):Q$(s,"updateDoc",t._key,e),By(i,[a.toMutation(t._key,Yn.exists(!0))])}function D7(t,e){const n=Xn(t.firestore,ds),r=Qn(t),i=LS(t.converter,e);return By(n,[jS(ah(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Yn.exists(!1))]).then(()=>r)}function Gm(t,...e){var n,r,i;t=Kt(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||gj(e[a])||(s=e[a],a++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(gj(e[a])){const f=e[a];e[a]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[a+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[a+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(t instanceof Pn)u=Xn(t.firestore,ds),d=Ay(t._key.path),c={next:f=>{e[a]&&e[a](oD(u,t,f))},error:e[a+1],complete:e[a+2]};else{const f=Xn(t,xs);u=Xn(f.firestore,ds),d=f._query;const h=new FS(u);c={next:m=>{e[a]&&e[a](new aD(u,h,f,m))},error:e[a+1],complete:e[a+2]},rD(t._query)}return function(h,m,y,g){const v=new NS(g),x=new _S(m,v,y);return h.asyncQueue.enqueueAndForget(async()=>xS(await zm(h),x)),()=>{v.Za(),h.asyncQueue.enqueueAndForget(async()=>bS(await zm(h),x))}}(ih(u),d,l,c)}function By(t,e){return function(r,i){const s=new Xi;return r.asyncQueue.enqueueAndForget(async()=>c7(await x7(r),i,s)),s.promise}(ih(t),e)}function oD(t,e,n){const r=n.docs.get(e._key),i=new FS(t);return new sD(t,i,e._key,r,new Xu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ah(e)}set(e,n,r){this._verifyNotCommitted();const i=L0(e,this._firestore),s=LS(i.converter,n,r),a=jS(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,Yn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=L0(e,this._firestore);let a;return a=typeof(n=Kt(n))=="string"||n instanceof sh?J$(this._dataReader,"WriteBatch.update",s._key,n,r,i):Q$(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,Yn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=L0(e,this._firestore);return this._mutations=this._mutations.concat(new aS(n._key,Yn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ue(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function L0(t,e){if((t=Kt(t)).firestore!==e)throw new ue(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function VS(){return new TS("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L7(t){return ih(t=Xn(t,ds)),new M7(t,e=>By(t,e))}(function(e,n=!0){(function(i){Fc=i})(Lc),xo(new pa("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new ds(new B9(r.getProvider("auth-internal")),new W9(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ue(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xd(u.options.projectId,d)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),fi(OC,"4.7.3",e),fi(OC,"4.7.3","esm2017")})();var F7="firebase",V7="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fi(F7,V7,"app");function BS(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function lD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const B7=lD,cD=new Xf("auth","Firebase",lD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm=new Y_("@firebase/auth");function U7(t,...e){Hm.logLevel<=He.WARN&&Hm.warn(`Auth (${Lc}): ${t}`,...e)}function Wp(t,...e){Hm.logLevel<=He.ERROR&&Hm.error(`Auth (${Lc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(t,...e){throw US(t,...e)}function mi(t,...e){return US(t,...e)}function uD(t,e,n){const r=Object.assign(Object.assign({},B7()),{[e]:n});return new Xf("auth","Firebase",r).create(e,{appName:t.name})}function so(t){return uD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function US(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return cD.create(t,...e)}function Pe(t,e,...n){if(!t)throw US(e,...n)}function Ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wp(e),new Error(e)}function hs(t,e){t||Ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function z7(){return xj()==="http:"||xj()==="https:"}function xj(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(z7()||xU()||"connection"in navigator)?navigator.onLine:!0}function W7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n){this.shortDelay=e,this.longDelay=n,hs(n>e,"Short delay should be less than long delay!"),this.isMobile=gU()||bU()}get(){return q7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(t,e){hs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7=new lh(3e4,6e4);function qS(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function zc(t,e,n,r,i={}){return fD(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const l=Qf(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},s);return vU()||(u.referrerPolicy="no-referrer"),dD.fetch()(hD(t,t.config.apiHost,n,l),u)})}async function fD(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},G7),e);try{const i=new Y7(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw rp(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw rp(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw rp(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw rp(t,"user-disabled",a);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw uD(t,d,u);fs(t,d)}}catch(i){if(i instanceof vs)throw i;fs(t,"network-request-failed",{message:String(i)})}}async function K7(t,e,n,r,i={}){const s=await zc(t,e,n,r,i);return"mfaPendingCredential"in s&&fs(t,"multi-factor-auth-required",{_serverResponse:s}),s}function hD(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?zS(t.config,i):`${t.config.apiScheme}://${i}`}class Y7{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(mi(this.auth,"network-request-failed")),H7.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function rp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=mi(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X7(t,e){return zc(t,"POST","/v1/accounts:delete",e)}async function pD(t,e){return zc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Q7(t,e=!1){const n=Kt(t),r=await n.getIdToken(e),i=WS(r);Pe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:gd(F0(i.auth_time)),issuedAtTime:gd(F0(i.iat)),expirationTime:gd(F0(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function F0(t){return Number(t)*1e3}function WS(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wp("JWT malformed, contained fewer than 3 sections"),null;try{const i=IR(n);return i?JSON.parse(i):(Wp("Failed to decode base64 JWT payload"),null)}catch(i){return Wp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function bj(t){const e=WS(t);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sf(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof vs&&J7(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function J7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gd(this.lastLoginAt),this.creationTime=gd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Km(t){var e;const n=t.auth,r=await t.getIdToken(),i=await sf(t,pD(n,{idToken:r}));Pe(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?mD(s.providerUserInfo):[],l=tq(t.providerData,a),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new Jb(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function eq(t){const e=Kt(t);await Km(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function tq(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function mD(t){return t.map(e=>{var{providerId:n}=e,r=BS(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nq(t,e){const n=await fD(t,{},async()=>{const r=Qf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=hD(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",dD.fetch()(a,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rq(t,e){return zc(t,"POST","/v2/accounts:revokeToken",qS(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bj(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const n=bj(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await nq(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new Ol;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Pe(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Pe(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ol,this.toJSON())}_performRefresh(){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(t,e){Pe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class zi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=BS(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Z7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Jb(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await sf(this,this.stsTokenManager.getToken(this.auth,e));return Pe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Q7(this,e)}reload(){return eq(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new zi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Km(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ws(this.auth.app))return Promise.reject(so(this.auth));const e=await this.getIdToken();return await sf(this,X7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,l,c,u,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(a=n.photoURL)!==null&&a!==void 0?a:void 0,g=(l=n.tenantId)!==null&&l!==void 0?l:void 0,v=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(u=n.createdAt)!==null&&u!==void 0?u:void 0,w=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:N,isAnonymous:A,providerData:E,stsTokenManager:C}=n;Pe(b&&C,e,"internal-error");const S=Ol.fromJSON(this.name,C);Pe(typeof b=="string",e,"internal-error"),Ts(f,e.name),Ts(h,e.name),Pe(typeof N=="boolean",e,"internal-error"),Pe(typeof A=="boolean",e,"internal-error"),Ts(m,e.name),Ts(y,e.name),Ts(g,e.name),Ts(v,e.name),Ts(x,e.name),Ts(w,e.name);const _=new zi({uid:b,auth:e,email:h,emailVerified:N,displayName:f,isAnonymous:A,photoURL:y,phoneNumber:m,tenantId:g,stsTokenManager:S,createdAt:x,lastLoginAt:w});return E&&Array.isArray(E)&&(_.providerData=E.map(P=>Object.assign({},P))),v&&(_._redirectEventId=v),_}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ol;i.updateFromServerResponse(n);const s=new zi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Km(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Pe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?mD(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Ol;l.updateFromIdToken(r);const c=new zi({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Jb(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=new Map;function qi(t){hs(t instanceof Function,"Expected a class definition");let e=wj.get(t);return e?(hs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,wj.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}gD.type="NONE";const _j=gD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(t,e,n){return`firebase:${t}:${e}:${n}`}class Rl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Gp(this.userKey,i.apiKey,s),this.fullPersistenceKey=Gp("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?zi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Rl(qi(_j),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||qi(_j);const a=Gp(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(a);if(d){const f=zi._fromJSON(e,d);u!==s&&(l=f),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Rl(s,e,r):(s=c[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Rl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sj(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(bD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_D(e))return"Blackberry";if(SD(e))return"Webos";if(vD(e))return"Safari";if((e.includes("chrome/")||xD(e))&&!e.includes("edge/"))return"Chrome";if(wD(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function yD(t=In()){return/firefox\//i.test(t)}function vD(t=In()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xD(t=In()){return/crios\//i.test(t)}function bD(t=In()){return/iemobile/i.test(t)}function wD(t=In()){return/android/i.test(t)}function _D(t=In()){return/blackberry/i.test(t)}function SD(t=In()){return/webos/i.test(t)}function GS(t=In()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function iq(t=In()){var e;return GS(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function sq(){return wU()&&document.documentMode===10}function ND(t=In()){return GS(t)||wD(t)||SD(t)||_D(t)||/windows phone/i.test(t)||bD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(t,e=[]){let n;switch(t){case"Browser":n=Sj(In());break;case"Worker":n=`${Sj(In())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Lc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aq{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,l)=>{try{const c=e(s);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oq(t,e={}){return zc(t,"GET","/v2/passwordPolicy",qS(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lq=6;class cq{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:lq,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uq{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nj(this),this.idTokenSubscription=new Nj(this),this.beforeStateQueue=new aq(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Rl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await pD(this,{idToken:e}),r=await zi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ws(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Km(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=W7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ws(this.app))return Promise.reject(so(this));const n=e?Kt(e):null;return n&&Pe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ws(this.app)?Promise.reject(so(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ws(this.app)?Promise.reject(so(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(qi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oq(this),n=new cq(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xf("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await rq(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&qi(e)||this._popupRedirectResolver;Pe(n,this,"argument-error"),this.redirectPersistenceManager=await Rl.create(this,[qi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&U7(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function HS(t){return Kt(t)}class Nj{constructor(e){this.auth=e,this.observer=null,this.addObserver=TU(n=>this.observer=n)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let KS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dq(t){KS=t}function fq(t){return KS.loadJS(t)}function hq(){return KS.gapiScript}function pq(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mq(t,e){const n=Sy(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Rm(s,e??{}))return i;fs(i,"already-initialized")}return n.initialize({options:e})}function gq(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(qi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function yq(t,e,n){const r=HS(t);Pe(r._canInitEmulator,r,"emulator-config-failed"),Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=ED(e),{host:a,port:l}=vq(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${a}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),xq()}function ED(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vq(t){const e=ED(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Aj(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:Aj(a)}}}function Aj(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function xq(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ui("not implemented")}_getIdTokenResponse(e){return Ui("not implemented")}_linkToIdToken(e,n){return Ui("not implemented")}_getReauthenticationResolver(e){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $l(t,e){return K7(t,"POST","/v1/accounts:signInWithIdp",qS(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq="http://localhost";class No extends CD{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new No(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=BS(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new No(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return $l(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,$l(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$l(e,n)}buildRequest(){const e={requestUri:bq,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch extends jD{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends ch{constructor(){super("facebook.com")}static credential(e){return No._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ms.credential(e.oauthAccessToken)}catch{return null}}}Ms.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ms.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends ch{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return No._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ls.credential(n,r)}catch{return null}}}Ls.GOOGLE_SIGN_IN_METHOD="google.com";Ls.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends ch{constructor(){super("github.com")}static credential(e){return No._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.GITHUB_SIGN_IN_METHOD="github.com";Fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends ch{constructor(){super("twitter.com")}static credential(e,n){return No._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Vs.credential(n,r)}catch{return null}}}Vs.TWITTER_SIGN_IN_METHOD="twitter.com";Vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await zi._fromIdTokenResponse(e,r,i),a=Ej(r);return new rc({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Ej(r);return new rc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Ej(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym extends vs{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ym.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ym(e,n,r,i)}}function TD(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ym._fromErrorAndOperation(t,s,e,r):s})}async function wq(t,e,n=!1){const r=await sf(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return rc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _q(t,e,n=!1){const{auth:r}=t;if(Ws(r.app))return Promise.reject(so(r));const i="reauthenticate";try{const s=await sf(t,TD(r,i,e,t),n);Pe(s.idToken,r,"internal-error");const a=WS(s.idToken);Pe(a,r,"internal-error");const{sub:l}=a;return Pe(t.uid===l,r,"user-mismatch"),rc._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&fs(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sq(t,e,n=!1){if(Ws(t.app))return Promise.reject(so(t));const r="signIn",i=await TD(t,r,e),s=await rc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function Nq(t,e,n,r){return Kt(t).onIdTokenChanged(e,n,r)}function Aq(t,e,n){return Kt(t).beforeAuthStateChanged(e,n)}const Xm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xm,"1"),this.storage.removeItem(Xm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eq=1e3,Cq=10;class kD extends PD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ND(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);sq()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Cq):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Eq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}kD.type="LOCAL";const jq=kD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID extends PD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ID.type="SESSION";const OD=ID;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tq(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Uy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(a).map(async u=>u(n.origin,s)),c=await Tq(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pq{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((l,c)=>{const u=YS("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(){return window}function kq(t){gi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(){return typeof gi().WorkerGlobalScope<"u"&&typeof gi().importScripts=="function"}async function Iq(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Oq(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Rq(){return RD()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D="firebaseLocalStorageDb",$q=1,Qm="firebaseLocalStorage",DD="fbase_key";class uh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zy(t,e){return t.transaction([Qm],e?"readwrite":"readonly").objectStore(Qm)}function Dq(){const t=indexedDB.deleteDatabase($D);return new uh(t).toPromise()}function Zb(){const t=indexedDB.open($D,$q);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Qm,{keyPath:DD})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Qm)?e(r):(r.close(),await Dq(),e(await Zb()))})})}async function Cj(t,e,n){const r=zy(t,!0).put({[DD]:e,value:n});return new uh(r).toPromise()}async function Mq(t,e){const n=zy(t,!1).get(e),r=await new uh(n).toPromise();return r===void 0?null:r.value}function jj(t,e){const n=zy(t,!0).delete(e);return new uh(n).toPromise()}const Lq=800,Fq=3;class MD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zb(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Fq)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uy._getInstance(Rq()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Iq(),!this.activeServiceWorker)return;this.sender=new Pq(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Oq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Zb();return await Cj(e,Xm,"1"),await jj(e,Xm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Cj(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Mq(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jj(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=zy(i,!1).getAll();return new uh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Lq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MD.type="LOCAL";const Vq=MD;new lh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bq(t,e){return e?qi(e):(Pe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS extends CD{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $l(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $l(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $l(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Uq(t){return Sq(t.auth,new XS(t),t.bypassAuthState)}function zq(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),_q(n,new XS(t),t.bypassAuthState)}async function qq(t){const{auth:e,user:n}=t;return Pe(n,e,"internal-error"),wq(n,new XS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Uq;case"linkViaPopup":case"linkViaRedirect":return qq;case"reauthViaPopup":case"reauthViaRedirect":return zq;default:fs(this.auth,"internal-error")}}resolve(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wq=new lh(2e3,1e4);class bl extends LD{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,bl.currentPopupAction&&bl.currentPopupAction.cancel(),bl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){hs(this.filter.length===1,"Popup operations only handle one event");const e=YS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Wq.get())};e()}}bl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gq="pendingRedirect",Hp=new Map;class Hq extends LD{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hp.get(this.auth._key());if(!e){try{const r=await Kq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hp.set(this.auth._key(),e)}return this.bypassAuthState||Hp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Kq(t,e){const n=Qq(e),r=Xq(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Yq(t,e){Hp.set(t._key(),e)}function Xq(t){return qi(t._redirectPersistence)}function Qq(t){return Gp(Gq,t.config.apiKey,t.name)}async function Jq(t,e,n=!1){if(Ws(t.app))return Promise.reject(so(t));const r=HS(t),i=Bq(r,e),a=await new Hq(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zq=10*60*1e3;class eW{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tW(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!FD(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(mi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Zq&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tj(e))}saveEventToCache(e){this.cachedEventUids.add(Tj(e)),this.lastProcessedEventTime=Date.now()}}function Tj(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FD({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tW(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FD(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nW(t,e={}){return zc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iW=/^https?/;async function sW(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nW(t);for(const n of e)try{if(aW(n))return}catch{}fs(t,"unauthorized-domain")}function aW(t){const e=Qb(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!iW.test(n))return!1;if(rW.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oW=new lh(3e4,6e4);function Pj(){const t=gi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function lW(t){return new Promise((e,n)=>{var r,i,s;function a(){Pj(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Pj(),n(mi(t,"network-request-failed"))},timeout:oW.get()})}if(!((i=(r=gi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=gi().gapi)===null||s===void 0)&&s.load)a();else{const l=pq("iframefcb");return gi()[l]=()=>{gapi.load?a():n(mi(t,"network-request-failed"))},fq(`${hq()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Kp=null,e})}let Kp=null;function cW(t){return Kp=Kp||lW(t),Kp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uW=new lh(5e3,15e3),dW="__/auth/iframe",fW="emulator/auth/iframe",hW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mW(t){const e=t.config;Pe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?zS(e,fW):`https://${t.config.authDomain}/${dW}`,r={apiKey:e.apiKey,appName:t.name,v:Lc},i=pW.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Qf(r).slice(1)}`}async function gW(t){const e=await cW(t),n=gi().gapi;return Pe(n,t,"internal-error"),e.open({where:document.body,url:mW(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hW,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=mi(t,"network-request-failed"),l=gi().setTimeout(()=>{s(a)},uW.get());function c(){gi().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vW=500,xW=600,bW="_blank",wW="http://localhost";class kj{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _W(t,e,n,r=vW,i=xW){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},yW),{width:r.toString(),height:i.toString(),top:s,left:a}),u=In().toLowerCase();n&&(l=xD(u)?bW:n),yD(u)&&(e=e||wW,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[m,y])=>`${h}${m}=${y},`,"");if(iq(u)&&l!=="_self")return SW(e||"",l),new kj(null);const f=window.open(e||"",l,d);Pe(f,t,"popup-blocked");try{f.focus()}catch{}return new kj(f)}function SW(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NW="__/auth/handler",AW="emulator/auth/handler",EW=encodeURIComponent("fac");async function Ij(t,e,n,r,i,s){Pe(t.config.authDomain,t,"auth-domain-config-required"),Pe(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Lc,eventId:i};if(e instanceof jD){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",jU(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))a[d]=f}if(e instanceof ch){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${EW}=${encodeURIComponent(c)}`:"";return`${CW(t)}?${Qf(l).slice(1)}${u}`}function CW({config:t}){return t.emulator?zS(t,AW):`https://${t.authDomain}/${NW}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0="webStorageSupport";class jW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OD,this._completeRedirectFn=Jq,this._overrideRedirectResult=Yq}async _openPopup(e,n,r,i){var s;hs((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await Ij(e,n,r,Qb(),i);return _W(e,a,YS())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Ij(e,n,r,Qb(),i);return kq(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(hs(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await gW(e),r=new eW(e);return n.register("authEvent",i=>(Pe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(V0,{type:V0},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[V0];a!==void 0&&n(!!a),fs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sW(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ND()||vD()||GS()}}const TW=jW;var Oj="@firebase/auth",Rj="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kW(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IW(t){xo(new pa("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;Pe(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AD(t)},u=new uq(r,i,s,c);return gq(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xo(new pa("auth-internal",e=>{const n=HS(e.getProvider("auth").getImmediate());return(r=>new PW(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fi(Oj,Rj,kW(t)),fi(Oj,Rj,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OW=5*60,RW=DR("authIdTokenMaxAge")||OW;let $j=null;const $W=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>RW)return;const i=n==null?void 0:n.token;$j!==i&&($j=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function DW(t=Q_()){const e=Sy(t,"auth");if(e.isInitialized())return e.getImmediate();const n=mq(t,{popupRedirectResolver:TW,persistence:[Vq,jq,OD]}),r=DR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=$W(s.toString());Aq(n,a,()=>a(n.currentUser)),Nq(n,l=>a(l))}}const i=OR("auth");return i&&yq(n,`http://${i}`),n}function MW(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}dq({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=mi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",MW().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IW("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="us-central1";class FW{constructor(e,n,r,i,s=ew,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new LW(n,r,i),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=ew}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function VW(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}const Dj="@firebase/functions",Mj="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BW="auth-internal",UW="app-check-internal",zW="messaging-internal";function qW(t,e){const n=(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),a=r.getProvider(BW),l=r.getProvider(zW),c=r.getProvider(UW);return new FW(s,a,l,c,i,t)};xo(new pa(VD,n,"PUBLIC").setMultipleInstances(!0)),fi(Dj,Mj,e),fi(Dj,Mj,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WW(t=Q_(),e=ew){const r=Sy(Kt(t),VD).getImmediate({identifier:e}),i=RR("functions");return i&&GW(r,...i),r}function GW(t,e,n){VW(Kt(t),e,n)}qW(fetch.bind(self));const HW={apiKey:"AIzaSyBwQsjNBEMOYavhGC660Q4pmng1oCofh8o",authDomain:"area-51-crm.firebaseapp.com",projectId:"area-51-crm",storageBucket:"area-51-crm.firebasestorage.app",messagingSenderId:"438467751802",appId:"1:438467751802:web:7c2256f6bf0e88487f30c3",measurementId:"G-6HZKZC5TKX"},QS=FR(HW);DW(QS);const $t=A7(QS);WW(QS);const Lt="crm_v1_production",ri=t=>{if(!t)return!1;const e=t.toLowerCase();return e==="booked"||e==="won"||e.includes("confirm")||e.includes("book")},At=t=>{if(t==null||t==="")return 0;if(typeof t=="number")return t;const e=String(t).replace(/[^0-9.-]+/g,""),n=parseFloat(e);return isNaN(n)?0:n},JS=t=>{if(!t)return null;let e=String(t).replace(/\D/g,"");return e.startsWith("92")&&e.length===12&&(e="0"+e.substring(2)),e.startsWith("0092")&&e.length===14&&(e="0"+e.substring(4)),e.length===10&&e.startsWith("3")&&(e="0"+e),e.length===11&&e.startsWith("03")?e:null},Le=t=>new Intl.NumberFormat("en-PK",{style:"currency",currency:"PKR",maximumSignificantDigits:3}).format(At(t)),Ao=(t,e="")=>{if(!t)return null;let n=String(t).replace(/\D/g,"");n.startsWith("0")?n="92"+n.substring(1):n.length===10&&n.startsWith("3")&&(n="92"+n);const r=`https://wa.me/${n}`;return e?`${r}?text=${encodeURIComponent(e)}`:r},Ye={STAGE_CHANGE:"stage_change",NOTE_ADDED:"note_added",WHATSAPP_OPENED:"whatsapp_opened",CALL_MADE:"call_made",CALL_LOGGED:"call_logged",LEAD_ASSIGNED:"lead_assigned",LEAD_REASSIGNED:"lead_reassigned",FOLLOW_UP_SET:"follow_up_set",SITE_VISIT_SCHEDULED:"site_visit_scheduled",PAYMENT_RECEIVED:"payment_received",LEAD_CREATED:"lead_created",DETAILS_UPDATED:"details_updated",AUTO_GREETING_SENT:"auto_greeting_sent",QUOTE_REMINDER_SENT:"quote_reminder_sent"},KW=(t,e,n)=>({type:t,timestamp:new Date().toISOString(),user:n,...e}),YW=t=>({[Ye.STAGE_CHANGE]:{icon:"",color:"blue",label:"Stage Changed"},[Ye.NOTE_ADDED]:{icon:"",color:"gray",label:"Note Added"},[Ye.WHATSAPP_OPENED]:{icon:"",color:"green",label:"WhatsApp"},[Ye.CALL_MADE]:{icon:"",color:"purple",label:"Call Made"},[Ye.CALL_LOGGED]:{icon:"",color:"cyan",label:"Call Logged"},[Ye.LEAD_ASSIGNED]:{icon:"",color:"indigo",label:"Assigned"},[Ye.LEAD_REASSIGNED]:{icon:"",color:"orange",label:"Reassigned"},[Ye.FOLLOW_UP_SET]:{icon:"",color:"amber",label:"Follow-up Set"},[Ye.SITE_VISIT_SCHEDULED]:{icon:"",color:"teal",label:"Site Visit"},[Ye.PAYMENT_RECEIVED]:{icon:"",color:"emerald",label:"Payment"},[Ye.LEAD_CREATED]:{icon:"",color:"blue",label:"Lead Created"},[Ye.DETAILS_UPDATED]:{icon:"",color:"slate",label:"Updated"},[Ye.AUTO_GREETING_SENT]:{icon:"",color:"green",label:"Auto Greeting"},[Ye.QUOTE_REMINDER_SENT]:{icon:"",color:"amber",label:"Quote Reminder"}})[t]||{icon:"",color:"gray",label:"Activity"},XW=t=>{switch(t.type){case Ye.STAGE_CHANGE:return`Stage changed: ${t.from}  ${t.to}`;case Ye.NOTE_ADDED:return t.note||"Note added";case Ye.WHATSAPP_OPENED:return"WhatsApp conversation opened";case Ye.CALL_MADE:return"Phone call made";case Ye.CALL_LOGGED:return t.outcome?`Call logged: ${t.outcome}`:"Call logged";case Ye.LEAD_ASSIGNED:return`Lead assigned to ${t.assignee}`;case Ye.LEAD_REASSIGNED:return`Reassigned from ${t.from} to ${t.to}`;case Ye.FOLLOW_UP_SET:return`Follow-up scheduled for ${t.date}`;case Ye.SITE_VISIT_SCHEDULED:return`Site visit scheduled for ${t.date}`;case Ye.PAYMENT_RECEIVED:return`Payment received: ${Le(t.amount)}`;case Ye.LEAD_CREATED:return"Lead created";case Ye.DETAILS_UPDATED:return`${t.field} updated`;case Ye.AUTO_GREETING_SENT:return"Auto greeting sent via WhatsApp";case Ye.QUOTE_REMINDER_SENT:return"Quote follow-up reminder sent";default:return"Activity logged"}},Ve=window.location.hostname==="localhost"?"http://localhost:3006/api":"https://area51crm.inplsoftwares.com/api",Be=async(t,e={})=>{const n=localStorage.getItem("token"),r={...e.headers};n&&(r.Authorization=`Bearer ${n}`);const i={...e,headers:r,credentials:"include"},s=await fetch(t,i);return s.status===401&&!t.includes("/logout")&&window.dispatchEvent(new Event("auth:unauthorized")),s},Qu={async signup(t,e,n,r){var a;const i=await Be(`${Ve}/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,email:e,password:n,role:r})}),s=await i.json();if(!i.ok)throw new Error(s.message||"Signup failed");return(a=s.data)!=null&&a.token&&localStorage.setItem("token",s.data.token),s},async login(t,e){var i;const n=await Be(`${Ve}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})}),r=await n.json();if(!n.ok)throw new Error(r.message||"Login failed");return(i=r.data)!=null&&i.token&&localStorage.setItem("token",r.data.token),r},async logout(){localStorage.getItem("token");const t=await Be(`${Ve}/logout`,{method:"POST",headers:{"Content-Type":"application/json"}});return localStorage.removeItem("token"),t.json()},async changePassword(t,e){const n=await Be(`${Ve}/change-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:t,newPassword:e})}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to change password");return r},getToken(){return localStorage.getItem("token")},isAuthenticated(){return!!localStorage.getItem("token")}},Bs={async getAll(t=null,e=100,n=""){const r=new URLSearchParams;t&&r.append("cursor",t),r.append("limit",e.toString()),n&&r.append("search",n);const i=`${Ve}/contacts${r.toString()?"?"+r.toString():""}`,s=await Be(i,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}}),a=await s.json();if(!s.ok)throw new Error(a.message||"Failed to fetch contacts");return{data:a.data||[],pagination:a.pagination||{nextCursor:null,hasMore:!1,total:0}}},async getById(t){const e=await Be(`${Ve}/contacts/${t}`),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to fetch contact");return n.data},async create(t){const e=await Be(`${Ve}/contacts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to create contact");return n.data},async update(t,e){const n=await Be(`${Ve}/contacts/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to update contact");return r.data},async delete(t){const e=await Be(`${Ve}/contacts/${t}`,{method:"DELETE"}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to delete contact");return n},async deleteAll(){const t=await Be(`${Ve}/contacts`,{method:"DELETE"}),e=await t.json();if(!t.ok)throw new Error(e.message||"Failed to delete all contacts");return e}},Ju={async getAll(){const t=await Be(`${Ve}/sources`),e=await t.json();if(!t.ok)throw new Error(e.message||"Failed to fetch sources");return e.data||[]},async getById(t){const e=await Be(`${Ve}/sources/${t}`),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to fetch source");return n.data},async create(t){const e=await Be(`${Ve}/sources`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to create source");return n.data},async update(t,e){const n=await Be(`${Ve}/sources/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to update source");return r.data},async delete(t){const e=await Be(`${Ve}/sources/${t}`,{method:"DELETE"}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to delete source");return n}},sr={async getAll(t={}){const e=new URLSearchParams(t).toString(),n=await Be(`${Ve}/leads?${e}`),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to fetch leads");return r},async getById(t){const e=await Be(`${Ve}/leads/${t}`),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to fetch lead");return n.data},async create(t){const e=await Be(`${Ve}/leads`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to create lead");return n.data},async update(t,e){const n=await Be(`${Ve}/leads/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to update lead");return r.data},async delete(t){const e=await Be(`${Ve}/leads/${t}`,{method:"DELETE"}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to delete lead");return n},async deleteAll(){const t=await Be(`${Ve}/leads/all`,{method:"DELETE"}),e=await t.json();if(!t.ok)throw new Error(e.message||"Failed to delete all leads");return e},async import(t){const e=await Be(`${Ve}/leads/import`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leads:t})}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to import leads");return n},async addNote(t,e){const n=await Be(`${Ve}/leads/${t}/timeline`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to add note");return r.data},async getTimeline(t){const e=await Be(`${Ve}/leads/${t}/timeline`),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to fetch timeline");return n.data},async addPayment(t,e){const n=await Be(`${Ve}/leads/${t}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to add payment");return r},async deletePayment(t,e){const n=await Be(`${Ve}/leads/${t}/payments/${e}`,{method:"DELETE"}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to delete payment");return r}},Yp={async getAll(){const t=await Be(`${Ve}/users`),e=await t.json();if(!t.ok)throw new Error(e.message||"Failed to fetch users");return e.data},async invite(t){const e=await Be(`${Ve}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to invite user");return n},async delete(t){const e=await Be(`${Ve}/users/${t}`,{method:"DELETE"}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to delete user");return n}},tl={async get(t){const e=await Be(`${Ve}/settings/${t}`),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to fetch settings");return n.data},async update(t,e){const n=await Be(`${Ve}/settings/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:e})}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to update settings");return r.data}},B0={async resetDatabase(){const t=await Be(`${Ve}/maintenance/reset`,{method:"POST"}),e=await t.json();if(!t.ok)throw new Error(e.message||"Failed to reset database");return e},async migrateContacts(){const t=await Be(`${Ve}/maintenance/migrate-contacts`,{method:"POST"}),e=await t.json();if(!t.ok)throw new Error(e.message||"Failed to migrate contacts");return e},async consolidateSources(){const t=await Be(`${Ve}/maintenance/consolidate-sources`,{method:"POST"}),e=await t.json();if(!t.ok)throw new Error(e.message||"Failed to consolidate sources");return e}},ip={async getAll(t={}){const e=new URLSearchParams(t).toString(),n=await Be(`${Ve}/notifications?${e}`),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to fetch notifications");return r},async markAsRead(t){const e=await Be(`${Ve}/notifications/${t}/read`,{method:"PATCH"}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to mark notification as read");return n},async markAllAsRead(t){const e=await Be(`${Ve}/notifications/read-all`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to mark all as read");return n},async delete(t){const e=await Be(`${Ve}/notifications/${t}`,{method:"DELETE"}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to delete notification");return n}};function QW(){const[t,e]=k.useState(null),[n,r]=k.useState(null),[i,s]=k.useState(!0),[a,l]=k.useState(null);k.useEffect(()=>{const f=Qu.getToken();if(f)try{const h=JSON.parse(atob(f.split(".")[1])),m=Date.now()/1e3;if(h.exp&&h.exp<m)console.warn("Token expired, clearing session"),localStorage.removeItem("token"),localStorage.removeItem("user");else{const y=localStorage.getItem("user");if(y){const g=JSON.parse(y);e({id:h.id,role:h.role}),r(g)}}}catch(h){console.error("Invalid token:",h),localStorage.removeItem("token"),localStorage.removeItem("user")}s(!1)},[]);const c=k.useCallback(async(f,h)=>{s(!0),l(null);try{const m=await Qu.login(f,h),{user:y,token:g}=m.data;return e({id:y.id,role:y.role}),r({uid:y.id,email:y.email,name:y.username,role:y.role}),localStorage.setItem("user",JSON.stringify({uid:y.id,email:y.email,name:y.username,role:y.role})),m}catch(m){throw l(m.message),m}finally{s(!1)}},[]),u=k.useCallback(async(f,h,m,y)=>{s(!0),l(null);try{const g=await Qu.signup(f,h,m,y),{user:v,token:x}=g.data;return e({id:v.id,role:v.role}),r({uid:v.id,email:v.email,name:v.username,role:v.role}),localStorage.setItem("user",JSON.stringify({uid:v.id,email:v.email,name:v.username,role:v.role})),g}catch(g){throw l(g.message),g}finally{s(!1)}},[]),d=k.useCallback(async()=>{try{await Qu.logout()}catch(f){console.error("Logout error:",f)}finally{e(null),r(null),l(null),localStorage.removeItem("user"),localStorage.removeItem("token")}},[]);return k.useEffect(()=>{const f=()=>{localStorage.getItem("token")&&d()};return window.addEventListener("auth:unauthorized",f),()=>{window.removeEventListener("auth:unauthorized",f)}},[d]),{user:t,activeUser:n,setActiveUser:r,authLoading:i,authError:a,login:c,signup:u,logout:d,isAuthenticated:!!t}}const JW="Welcome",ZW="Your leads and messages",eG="Total Leads",tG="Site Visit",nG="Booked",rG="Inbox",iG="No leads",sG="guests",aG="Event",oG="Budget",lG="Source",cG="Notes & Activity",uG="View Details",dG="Schedule Next Call",fG="Call Outcome",hG="Call Notes",pG="Save Call Log",mG="Saving...",gG="Add to Google Calendar",yG="Contacts Directory",vG="total contacts",xG="Search contacts...",bG="Add Contact",wG="Phone",_G="Email",SG="Created",NG="Actions",AG="No contacts found",EG="Add your first contact to get started",CG="Manage Sources",jG="lead sources",TG="New Source Name",PG="Add",kG="leads",IG="INTEGRATION",OG="Integration sources cannot be modified",RG="No sources yet. Add your first lead source above.",$G="New Source Name",DG="Save",MG="Cancel",LG="WhatsApp",FG="Notes",VG="Call details...",BG="Save & Next",UG="Schedule",zG="Lost",qG="Select a lead",WG="AI Assistant",GG="Ask in Urdu",HG="Example:",KG="Show today's follow-ups",YG="What is this lead's status?",XG="Is March 15 available?",QG="Type your question...",JG="Finance Dashboard",ZG="Booking payments & invoicing",eH="Sync",tH="Total Bookings",nH="Total Value",rH="Collected",iH="Collection Rate",sH="Overdue",aH="All",oH="Pending",lH="Partial",cH="Paid",uH="Client",dH="Event Date",fH="Event Type",hH="Total",pH="Due",mH="Status",gH="No bookings found",yH="Payment History",vH="Remaining",xH="Add Payment",bH="Amount",wH="Quotation Amount",_H="Client Budget",SH="Date",NH="Type",AH="Notes (Optional)",EH="Adding...",CH="Advance (Initial)",jH="Mid-payment",TH="Final Payment",PH="Custom",kH="History",IH="No payments recorded",OH="Owner Dashboard",RH="Welcome back",$H="Quick Stats",DH="Recent Activity",MH="View All",LH="Revenue",FH="Active Leads",VH="Conversion Rate",BH="Remaining after this payment",UH="Revenue YTD",zH="Avg Response Time",qH="Excellent",WH="Good",GH="Needs Improvement",HH="Revenue & Leads Trend",KH="Traffic Sources",YH="Lead Conversion Funnel",XH="Top Performing Employees",QH="Unknown Source",JH="AI Business Assistant",ZH="Ask questions about your business performance",eK="Stale Leads",tK="Overdue Payments",nK="Name",rK="Leads",iK="Conv %",sK="Resp Time",aK="Ask",oK="Leads This Month",lK="Booked Leads",cK="Stage",uK="Total Revenue",dK="Pipeline Value",fK="All Leads",hK="Search leads...",pK="Import CSV",mK="Importing...",gK="Delete All",yK="Add Lead",vK="All Stages",xK="All Managers",bK="Clear",wK="Show",_K="per page",SK="Page",NK="of",AK="results",EK="Pipeline",CK="Call List",jK="{today} calls today, {overdue} overdue",TK="Upcoming",PK="Upcoming Calls",kK="Overdue Calls",IK="Today's Calls",OK="All Calls",RK="No calls scheduled",$K="Call",DK="Add to Calendar",MK="New Lead - Make First Call",LK="Last",FK="New Lead - Never Called",VK="Today at",BK="at",UK="AI Audit Logs",zK="View history of all AI interactions across the system",qK="Search queries, responses, users...",WK="All Types",GK="AI Query",HK="AI Suggestion",KK="Auto Greeting",YK="Quote Reminder",XK="Lead Summary",QK="All Users",JK="Last 24 hours",ZK="Last 7 days",eY="Last 30 days",tY="Last 90 days",nY="No audit logs found",rY="AI interactions will appear here",iY="Query / Input",sY="AI Response",aY="Context / Metadata",oY="Model",lY="Latency",cY="Success",uY="Failed",dY="audit log entries",fY="Admin Control Panel",hY="Manage Team Access",pY="Invite Team Member",mY="Invite sent!",gY="{name} will receive an email at {email} to set their password.",yY="User {name} has been added!",vY="Could not send email automatically. Copy the password reset link to share manually?",xY="Click OK to copy the link",bY="Revoke Access",wY="Reset Database",_Y="DANGER: This will permanently delete ALL leads. Are you sure?",SY="Database cleared successfully.",NY="Migrate Contacts",AY="This will create contacts from existing leads. Continue?",EY=`Migration Complete.
Created Contacts: {created}
Updated Leads: {updated}`,CY="Consolidate Sources",jY="Consolidate Sources from Leads",TY="All sources are already consolidated.",PY="Successfully consolidated {count} new sources from leads.",kY="Data Maintenance",IY="Migrate existing leads to the new contacts system.",OY="Lead Assignment Rules",RY="Assignment Mode",$Y="Round Robin",DY="Evenly distribute leads",MY="By Source",LY="Assign based on lead source",FY="Single Person",VY="All leads to one person",BY="Manual Only",UY="No auto-assignment",zY="Assign All Leads To",qY="Source  Employee Rules",WY="Select Source...",GY="Add Rule",HY="Leads from sources not listed will use round-robin.",KY="Fallback (if no rule matches)",YY="Use Round Robin",XY="Leave Unassigned",QY="Always assign to {name}",JY="Save Assignment Rules",ZY="Lead Automation Rules",eX="Per Source",tX="Search sources...",nX="Notify",rX="Text",iX="AI Bot",sX="Call List - Auto-add to today's call list",aX="Notify - Send in-app/SMS notification",oX="Email - Auto-send welcome email",lX="Text - Auto-send SMS response",cX="AI Bot - AI handles initial response",uX="Save Automation Rules",dX="Settings",fX="Managers & Event Types",hX="Managers / Sales Team",pX="Edit",mX="Danger Zone",gX="This will permanently delete ALL leads. Cannot be undone.",yX="Role",vX="Manager already exists",xX="Event type already exists",bX='Cannot delete "Unassigned"',wX='Delete manager "{name}"?',_X='Delete event type "{name}"?',SX="Password reset link copied to clipboard!",NX="Copy this password reset link:",AX="Failed to invite user",EX="Migrate Leads to Contacts",CX="Integrations Hub",jX="Connect External Platforms",TX="Meta Leads",PX="AI (Gemini)",kX="Invoicing",IX="Alerts",OX="Calendar",RX="Meta Lead Ads Integration",$X="Auto-pull leads from Facebook/Instagram",DX="Facebook Page ID",MX="Page Access Token",LX="Get from Facebook Business Settings  System Users",FX="WhatsApp Business API",VX="Send/receive messages through CRM",BX="Provider",UX="API Key / Account SID",zX="Auth Token (Twilio)",qX="API Endpoint",WX="Business WhatsApp Number",GX="Default Greeting Message (Manual)",HX="Auto Greeting for New Leads",KX="Automatically send WhatsApp greeting to new leads",YX="Auto Greeting Message",XX="How it works",QX="When a new lead is created (from Meta, WhatsApp, or manual entry), this greeting will be automatically sent via WhatsApp within 1 minute.",JX="Google Gemini AI",ZX="AI-powered responses & assistant",eQ="Gemini API Key",tQ="Get from Google AI Studio  API Keys",nQ="AI Features Enabled:",rQ="Invoicing Software",iQ="Push bookings & pull payment status",sQ="Invoicing API Endpoint",aQ="Integration Behavior:",oQ="Browser Notifications",lQ="Get instant alerts in your browser",cQ="Note: You'll need to allow notifications when prompted by your browser. Works best on desktop browsers.",uQ="SMS Notifications (Twilio)",dQ="Send SMS alerts to employees",fQ="Twilio Account SID",hQ="Twilio Auth Token",pQ="Twilio Phone Number (From)",mQ="Send SMS For:",gQ="New lead assignments",yQ="Lead escalations (48h+ no contact)",vQ="Site visit reminders",xQ="Quote follow-up (3+ days in Quoted stage)",bQ="How SMS Notifications Work:",wQ="Cost: ~PKR 3-5 per SMS via Twilio",_Q="Google Calendar Integration",SQ="Sync lead dates to Google Calendar",NQ="Quick Add",AQ='"Add to Calendar" buttons will appear on lead details, call list, and booking views - no API setup needed!',EQ="Auto-Sync (Optional - Requires Google Cloud Setup)",CQ="Google Cloud Client ID",jQ="Google Calendar API Key",TQ="Please enter your Google Calendar Client ID and API Key first, then save.",PQ="Successfully connected to Google Calendar!",kQ="Failed to connect to Google Calendar. Please check your credentials.",IQ="Disconnected from Google Calendar",OQ="Integration Settings Saved!",RQ=`Automatically added lead sources:
 {sources}`,$Q="Account Settings",DQ="Profile",MQ="Password",LQ="Display Name",FQ="Email Address",VQ="Email cannot be changed",BQ="Phone Number",UQ="Used for SMS notifications",zQ="Save Profile",qQ="Current Password",WQ="New Password",GQ="Confirm New Password",HQ="Change Password",KQ="Password requirements:",YQ="Minimum 6 characters",XQ="Mix of letters and numbers recommended",QQ="Sign Out",JQ="Profile updated successfully!",ZQ="Failed to save profile. Please try again.",eJ="Please fill in all password fields.",tJ="New passwords do not match.",nJ="Password must be at least 6 characters.",rJ="Password changed successfully!",iJ="Current password is incorrect.",sJ="Please log out and log back in before changing your password.",aJ="Failed to change password. Please try again.",oJ="Enter current password",lJ="Enter new password",cJ="Confirm new password",uJ="Your name",dJ="03XX-XXXXXXX",fJ="Employees receive SMS when leads are assigned",hJ="Escalation alerts sent for stale leads (48h+)",pJ="Site visit reminders sent day before",mJ="Quote follow-up reminders after 3 days",gJ="Uses employee phone from Admin Panel",yJ="Quick Add buttons - Add any date to calendar with one click",vJ="Site Visits - Schedule venue visits with client details",xJ="Scheduled Calls - Never miss a follow-up call",bJ="Event Dates - Track client event dates",wJ="Final Bookings - Confirmed booking dates",_J="Round-robin lead assignment to employees",SJ="Employee Urdu assistant (query leads, availability)",NJ="Owner dashboard AI queries",AJ="Closing strategy & email generation",EJ="Role-based data access control",CJ='Auto-push booking when lead reaches "Booked" stage',jJ="Sync payment milestones (Advance, Mid, Final)",TJ="Show payment status in Finance dashboard",PJ="Alert on overdue payments",kJ="How it works: When a new lead is created (from Meta, WhatsApp, or manual entry), this greeting will be automatically sent via WhatsApp within 1 minute.",IJ="Use {{name}} to insert the lead's first name",OJ="Enter the automatic greeting message...",RJ="Auto Greeting Message",$J="Quick Templates",DJ="Dashboard",MJ="Sales View",LJ="Conversations",FJ="Finance",VJ="Contacts",BJ="Sources",UJ="AI Audit",zJ="My Leads",qJ={welcome:JW,yourLeadsAndMessages:ZW,totalLeads:eG,new:"New",siteVisit:tG,booked:nG,inbox:rG,noLeads:iG,guests:sG,event:aG,budget:oG,source:lG,notesAndActivity:cG,viewDetails:uG,scheduleNextCall:dG,callOutcome:fG,callNotes:hG,saveCallLog:pG,saving:mG,addToGoogleCalendar:gG,contactsDirectory:yG,totalContacts:vG,searchContacts:xG,addContact:bG,phone:wG,email:_G,created:SG,actions:NG,noContacts:AG,addFirstContact:EG,manageSources:CG,leadSources:jG,newSourceName:TG,add:PG,sourceStats:kG,integration:IG,integrationsLocked:OG,noSourcesYet:RG,newSourcePlaceholder:$G,save:DG,cancel:MG,delete:"Delete",whatsapp:LG,notes:FG,callDetailsPlaceholder:VG,saveAndNext:BG,schedule:UG,lost:zG,selectLead:qG,aiAssistant:WG,askInUrdu:GG,example:HG,showTodayFollowups:KG,whatIsLeadStatus:YG,isDateAvailable:XG,typeQuestion:QG,financeDashboard:JG,bookingPaymentsInvoicing:ZG,sync:eH,export:"Export",totalBookings:tH,totalValue:nH,collected:rH,collectionRate:iH,overdue:sH,all:aH,pending:oH,partial:lH,paid:cH,client:uH,eventDate:dH,eventType:fH,total:hH,due:pH,status:mH,noBookingsFound:gH,paymentHistory:yH,remaining:vH,addPayment:xH,amount:bH,quotationAmount:wH,clientBudget:_H,date:SH,type:NH,notesOptional:AH,adding:EH,advanceInitial:CH,midPayment:jH,finalPayment:TH,custom:PH,history:kH,noPaymentsRecorded:IH,ownerDashboard:OH,welcomeBack:RH,quickStats:$H,recentActivity:DH,viewAll:MH,revenue:LH,activeLeads:FH,conversionRate:VH,remainingAfterPayment:BH,revenueYtd:UH,avgResponseTime:zH,excellent:qH,good:WH,needsImprovement:GH,revenueLeadsTrend:HH,trafficSources:KH,leadConversionFunnel:YH,topPerformingEmployees:XH,unknownSource:QH,aiBusinessAssistant:JH,askAboutBusiness:ZH,staleLeads:eK,overduePayments:tK,name:nK,leads:rK,convRateAbbr:iK,respTimeAbbr:sK,askButton:aK,leadsThisMonth:oK,bookedLeads:lK,stage:cK,totalRevenue:uK,pipelineValue:dK,allLeads:fK,searchLeads:hK,importCsv:pK,importing:mK,deleteAll:gK,addLead:yK,allStages:vK,allManagers:xK,clear:bK,show:wK,perPage:_K,page:SK,of:NK,results:AK,pipeline:EK,callList:CK,callsStatsSummary:jK,upcoming:TK,upcomingCalls:PK,overdueCalls:kK,todayCalls:IK,allCalls:OK,noCallsScheduled:RK,call:$K,addToCalendar:DK,newLeadMakeFirstCall:MK,last:LK,newLeadNeverCalled:FK,todayAt:VK,at:BK,aiAuditLogs:UK,viewAiHistory:zK,searchLogs:qK,allTypes:WK,aiQuery:GK,aiSuggestion:HK,autoGreeting:KK,quoteReminder:YK,leadSummary:XK,allUsers:QK,last24Hours:JK,last7Days:ZK,last30Days:eY,last90Days:tY,noAuditLogs:nY,auditLogsPlaceholder:rY,queryInput:iY,aiResponse:sY,contextMetadata:aY,model:oY,latency:lY,success:cY,failed:uY,auditLogEntries:dY,adminControlPanel:fY,manageTeamAccess:hY,inviteTeamMember:pY,inviteSent:mY,inviteSentBody:gY,userAdded:yY,copyLink:vY,copyLinkButton:xY,revokeAccess:bY,resetDatabase:wY,resetDatabaseConfirm:_Y,databaseCleared:SY,migrateContacts:NY,migrateContactsConfirm:AY,migrationComplete:EY,consolidateSources:CY,consolidateSourcesConfirm:jY,allSourcesConsolidated:TY,consolidatedSuccess:PY,dataMaintenance:kY,dataMaintenanceDesc:IY,assignmentRules:OY,assignmentMode:RY,roundRobin:$Y,roundRobinDesc:DY,bySource:MY,bySourceDesc:LY,singlePerson:FY,singlePersonDesc:VY,manualOnly:BY,manualOnlyDesc:UY,assignAllLeadsTo:zY,sourceEmployeeRules:qY,selectSource:WY,addRule:GY,leadsFromOtherSources:HY,fallbackAssignee:KY,useRoundRobin:YY,leaveUnassigned:XY,alwaysAssignTo:QY,saveAssignmentRules:JY,automationRules:ZY,perSource:eX,searchSources:tX,notify:nX,text:rX,aiBot:iX,default:"DEFAULT",callListAutoAdd:sX,notifyDesc:aX,emailDesc:oX,textDesc:lX,aiBotDesc:cX,saveAutomationRules:uX,settings:dX,managersEventTypes:fX,managersSalesTeam:hX,edit:pX,dangerZone:mX,dangerZoneDesc:gX,role:yX,managerAlreadyExists:vX,eventTypeAlreadyExists:xX,cannotDeleteUnassigned:bX,deleteManagerConfirm:wX,deleteEventTypeConfirm:_X,passwordResetLinkCopied:SX,copyPasswordResetLink:NX,failedToInviteUser:AX,migrateLeadsToContacts:EX,integrationsHub:CX,connectExternalPlatforms:jX,metaLeads:TX,aiGemini:PX,invoicing:kX,alerts:IX,calendar:OX,metaIntegration:RX,metaIntegrationDesc:$X,facebookPageId:DX,pageAccessToken:MX,getFromFacebook:LX,whatsappApi:FX,whatsappApiDesc:VX,provider:BX,apiKeySid:UX,authToken:zX,apiEndpoint:qX,businessNumber:WX,defaultGreeting:GX,autoGreetingTitle:HX,autoGreetingDesc:KX,autoGreetingMessage:YX,howItWorks:XX,howItWorksDesc:QX,googleGeminiAi:JX,geminiAiDesc:ZX,geminiApiKey:eQ,getFromGoogleAi:tQ,aiFeaturesEnabled:nQ,invoicingSoftware:rQ,invoicingDesc:iQ,invoicingApiEndpoint:sQ,integrationBehavior:aQ,browserNotifications:oQ,browserNotificationsDesc:lQ,browserNotificationsNote:cQ,smsNotifications:uQ,smsNotificationsDesc:dQ,twilioAccountSid:fQ,twilioAuthToken:hQ,twilioPhoneNumber:pQ,sendSmsFor:mQ,newLeadAssignments:gQ,leadEscalations:yQ,siteVisitReminders:vQ,quoteFollowUp:xQ,howSmsWorks:bQ,smsCost:wQ,googleCalendarIntegration:_Q,googleCalendarDesc:SQ,quickAdd:NQ,quickAddDesc:AQ,autoSync:EQ,googleCloudClientId:CQ,googleCalendarApiKey:jQ,pleaseEnterGoogleCreds:TQ,googleConnectSuccess:PQ,googleConnectFail:kQ,disconnectedGoogle:IQ,integrationSettingsSaved:OQ,integrationSettingsSavedBody:RQ,accountSettings:$Q,profile:DQ,password:MQ,displayName:LQ,emailAddress:FQ,emailCannotBeChanged:VQ,phoneNumber:BQ,usedForSms:UQ,saveProfile:zQ,currentPassword:qQ,newPassword:WQ,confirmNewPassword:GQ,changePassword:HQ,passwordRequirements:KQ,minChar:YQ,mixRecommended:XQ,signOut:QQ,profileUpdated:JQ,profileUpdateFailed:ZQ,fillAllPasswordFields:eJ,passwordsDoNotMatch:tJ,passwordMinLength:nJ,passwordChanged:rJ,currentPasswordIncorrect:iJ,requiresRecentLogin:sJ,passwordChangeFailed:aJ,enterCurrentPassword:oJ,enterNewPassword:lJ,confirmNewPasswordPlaceholder:cJ,yourName:uJ,phonePlaceholder:dJ,smsWork1:fJ,smsWork2:hJ,smsWork3:pJ,smsWork4:mJ,smsWork5:gJ,calendarWork1:yJ,calendarWork2:vJ,calendarWork3:xJ,calendarWork4:bJ,calendarWork5:wJ,aiFeature1:_J,aiFeature2:SJ,aiFeature3:NJ,aiFeature4:AJ,aiFeature5:EJ,behavior1:CJ,behavior2:jJ,behavior3:TJ,behavior4:PJ,autoGreetingHow:kJ,autoGreetingNote:IJ,autoGreetingPlaceholder:OJ,autoGreetingMessageLabel:RJ,quickTemplates:$J,dashboard:DJ,salesView:MJ,conversations:LJ,finance:FJ,contacts:VJ,sources:BJ,aiAudit:UJ,myLeads:zJ},WJ=" ",GJ="    ",HJ=" ",KJ=" ",YJ=" ",XJ=" ",QJ="  ",JJ="",ZJ="",eZ="",tZ="",nZ="  ",rZ=" ",iZ="   ",sZ="  ",aZ=" ",oZ="   ",lZ="   ...",cZ="    ",uZ="  ",dZ=" ",fZ="  ...",hZ="  ",pZ="",mZ=" ",gZ="",yZ="",vZ="   ",xZ="        ",bZ="   ",wZ="  ",_Z="   ",SZ=" ",NZ="",AZ="",EZ="        ",CZ="            ",jZ="   ",TZ=" ",PZ="",kZ=" ",IZ="",OZ="  ...",RZ="   ",$Z="",DZ="",MZ="  ",LZ="AI ",FZ="   ",VZ=":",BZ="    ",UZ="     ",zZ="15  available ",qZ=" ...",WZ="  ",GZ="   ",HZ="",KZ=" ",YZ=" ",XZ=" ",QZ="  ",JZ="",ZZ="",eee=" ",tee="",nee=" ",ree="",iee="  ",see="  ",aee="",oee=" ",lee="",cee="   ",uee="  ",dee="",fee="  ",hee="",pee="",mee="",gee=" ()",yee="   ...",vee=" ()",xee=" ",bee=" ",wee="",_ee="",See="    ",Nee="  ",Aee=" ",Eee=" ",Cee=" ",jee=" ",Tee="",Pee=" ",kee="  ",Iee="    ",Oee=" ( )",Ree="  ",$ee="",Dee="",Mee="   ",Lee="    ",Fee="  ",Vee="    ",Bee="    ",Uee=" ",zee="AI  ",qee="        ",Wee=" ",Gee="  ",Hee="",Kee="",Yee=" ",Xee=" ",Qee="",Jee="   ",Zee="  ",ete="",tte=" ",nte="  ",rte=" ",ite="  ...",ste="CSV  ",ate="   ...",ote="  ",lte="  ",cte=" ",ute=" ",dte=" ",fte="",hte=" ",pte="",mte="",gte="",yte=" ",vte=" ",xte=" {today}  {overdue} ",bte=" ",wte="  ",_te=" ",Ste="  ",Nte=" ",Ate="  ",Ete="",Cte="   ",jte="  -   ",Tte="",Pte="  -     ",kte="",Ite="",Ote="AI  ",Rte="    AI    ",$te="  (  )...",Dte=" ",Mte="AI ",Lte="AI ",Fte=" ",Vte="  ",Bte="  ",Ute=" ",zte=" 24 ",qte=" 7 ",Wte=" 30 ",Gte=" 90 ",Hte="    ",Kte="AI     ",Yte=" /  ",Xte="AI ",Qte="   /  ",Jte="",Zte=" (Latency)",ene="",tne="",nne="  ",rne="  ",ine="     ",sne="    ",ane="    !",one="{name}  {email}           ",lne=" {name}      !",cne="                     ",une="     OK   ",dne="  ",fne="    ",hne=":                ",pne="      ",mne="  ",gne="        ",yne=` 
  : {created}
   : {updated}`,vne="   ",xne="     ",bne="     ",wne="    {count}    ",_ne="   ",Sne="         ",Nne="   ",Ane="  ",Ene=" ",Cne="    ",jne=" ",Tne="       ",Pne=" ",kne="    ",Ine=" ",One="   ",Rne="     ",$ne="    ",Dne="  ...",Mne="  ",Lne="             ",Fne="  (     )",Vne="   ",Bne="    ",Une=" {name}   ",zne="    ",qne="   ",Wne=" ",Gne="  ...",Hne=" ",Kne="",Yne="AI ",Xne="  -         ",Qne="  - /    ",Jne="  -        ",Zne=" -        ",ere="AI  - AI    ",tre="    ",nre="",rre="    ",ire=" /  ",sre="",are=" ",ore="               ",lre="",cre="    ",ure="      ",dre='"  "      ',fre='  "{name}"   ',hre='    "{name}"   ',pre="          !",mre="       :",gre="     ",yre="     ",vre=" ",xre="    ",bre=" ",wre="AI ()",_re="",Sre="",Nre="",Are="   ",Ere=" /      ",Cre="    ",jre="  ",Tre="         ",Pre="   API",kre="CRM    / ",Ire="",Ore="API  /  SID",Rre="  ()",$re="API  ",Dre="   ",Mre="   ()",Lre="     ",Fre="        ",Vre="  ",Bre="    ",Ure="      (      )     1             ",zre="  AI",qre="AI      ",Wre=" API ",Gre=" AI   API    ",Hre="AI  :",Kre="  ",Yre="        ",Xre=" API  ",Qre="  :",Jre=" ",Zre="      ",eie=":                        ",tie="SMS  ()",nie="  SMS  ",rie="  SID",iie="  ",sie="   ()",aie="   SMS :",oie="  ",lie="  (48 +   )",cie="    ",uie="   (   3+ )",die="SMS     :",fie=": ~PKR 3-5  SMS  ",hie="  ",pie="         ",mie="  ",gie='"   "                -  API     !',yie="   ( -      )",vie="    ",xie="  API ",bie="          API      ",wie="        !",_ie="            ",Sie="    ",Nie="    !",Aie=`     :
 {sources}`,Eie=" ",Cie="",jie=" ",Tie=" ",Pie="  ",kie="      ",Iie=" ",Oie="SMS       ",Rie="  ",$ie="  ",Die="  ",Mie="     ",Lie="   ",Fie="   :",Vie="   6 ",Bie="        ",Uie=" ",zie="      !",qie="         ",Wie="       ",Gie="     ",Hie="     6    ",Kie="      !",Yie="    ",Xie="                ",Qie="          ",Jie="    ",Zie="    ",ese="     ",tse="  ",nse="03XX-XXXXXXX",rse="      SMS  ",ise="  (48 +)      ",sse="          ",ase="3         ",ose="        ",lse="   -           ",cse="  -         ",use="  -      ",dse="   -        ",fse="  -     ",hse="     ",pse="   (   )",mse="   AI ",gse="     ",yse="       ",vse='  ""        ',xse="    (  )   ",bse="       ",wse="    ",_se="    :       (       )    1              ",Sse="{{name}}         ",Nse="    ...",Ase="  ",Ese=" ",Cse=" ",jse=" ",Tse="",Pse="",kse="",Ise="",Ose="AI ",Rse=" ",$se={welcome:WJ,yourLeadsAndMessages:GJ,totalLeads:HJ,new:"",siteVisit:KJ,booked:YJ,inbox:XJ,noLeads:QJ,guests:JJ,event:ZJ,budget:eZ,source:tZ,notesAndActivity:nZ,viewDetails:rZ,scheduleNextCall:iZ,callOutcome:sZ,callNotes:aZ,saveCallLog:oZ,saving:lZ,addToGoogleCalendar:cZ,contactsDirectory:uZ,totalContacts:dZ,searchContacts:fZ,addContact:hZ,phone:pZ,email:mZ,created:gZ,actions:yZ,noContacts:vZ,addFirstContact:xZ,manageSources:bZ,leadSources:wZ,newSourceName:_Z,add:SZ,sourceStats:NZ,integration:AZ,integrationsLocked:EZ,noSourcesYet:CZ,newSourcePlaceholder:jZ,save:TZ,cancel:PZ,delete:" ",whatsapp:kZ,notes:IZ,callDetailsPlaceholder:OZ,saveAndNext:RZ,schedule:$Z,lost:DZ,selectLead:MZ,aiAssistant:LZ,askInUrdu:FZ,example:VZ,showTodayFollowups:BZ,whatIsLeadStatus:UZ,isDateAvailable:zZ,typeQuestion:qZ,financeDashboard:WZ,bookingPaymentsInvoicing:GZ,sync:HZ,export:"",totalBookings:KZ,totalValue:YZ,collected:XZ,collectionRate:QZ,overdue:JZ,all:ZZ,pending:eee,partial:tee,paid:nee,client:ree,eventDate:iee,eventType:see,total:aee,due:oee,status:lee,noBookingsFound:cee,paymentHistory:uee,remaining:dee,addPayment:fee,amount:hee,date:pee,type:mee,notesOptional:gee,adding:yee,advanceInitial:vee,midPayment:xee,finalPayment:bee,custom:wee,history:_ee,noPaymentsRecorded:See,ownerDashboard:Nee,welcomeBack:Aee,quickStats:Eee,recentActivity:Cee,viewAll:jee,revenue:Tee,activeLeads:Pee,conversionRate:kee,remainingAfterPayment:Iee,revenueYtd:Oee,avgResponseTime:Ree,excellent:$ee,good:Dee,needsImprovement:Mee,revenueLeadsTrend:Lee,trafficSources:Fee,leadConversionFunnel:Vee,topPerformingEmployees:Bee,unknownSource:Uee,aiBusinessAssistant:zee,askAboutBusiness:qee,staleLeads:Wee,overduePayments:Gee,name:Hee,leads:Kee,convRateAbbr:Yee,respTimeAbbr:Xee,askButton:Qee,leadsThisMonth:Jee,bookedLeads:Zee,stage:ete,totalRevenue:tte,pipelineValue:nte,allLeads:rte,searchLeads:ite,importCsv:ste,importing:ate,deleteAll:ote,addLead:lte,allStages:cte,allManagers:ute,clear:dte,show:fte,perPage:hte,page:pte,of:mte,results:gte,pipeline:yte,callList:vte,callsStatsSummary:xte,upcoming:bte,upcomingCalls:wte,overdueCalls:_te,todayCalls:Ste,allCalls:Nte,noCallsScheduled:Ate,call:Ete,addToCalendar:Cte,newLeadMakeFirstCall:jte,last:Tte,newLeadNeverCalled:Pte,todayAt:kte,at:Ite,aiAuditLogs:Ote,viewAiHistory:Rte,searchLogs:$te,allTypes:Dte,aiQuery:Mte,aiSuggestion:Lte,autoGreeting:Fte,quoteReminder:Vte,leadSummary:Bte,allUsers:Ute,last24Hours:zte,last7Days:qte,last30Days:Wte,last90Days:Gte,noAuditLogs:Hte,auditLogsPlaceholder:Kte,queryInput:Yte,aiResponse:Xte,contextMetadata:Qte,model:Jte,latency:Zte,success:ene,failed:tne,auditLogEntries:nne,adminControlPanel:rne,manageTeamAccess:ine,inviteTeamMember:sne,inviteSent:ane,inviteSentBody:one,userAdded:lne,copyLink:cne,copyLinkButton:une,revokeAccess:dne,resetDatabase:fne,resetDatabaseConfirm:hne,databaseCleared:pne,migrateContacts:mne,migrateContactsConfirm:gne,migrationComplete:yne,consolidateSources:vne,consolidateSourcesConfirm:xne,allSourcesConsolidated:bne,consolidatedSuccess:wne,dataMaintenance:_ne,dataMaintenanceDesc:Sne,assignmentRules:Nne,assignmentMode:Ane,roundRobin:Ene,roundRobinDesc:Cne,bySource:jne,bySourceDesc:Tne,singlePerson:Pne,singlePersonDesc:kne,manualOnly:Ine,manualOnlyDesc:One,assignAllLeadsTo:Rne,sourceEmployeeRules:$ne,selectSource:Dne,addRule:Mne,leadsFromOtherSources:Lne,fallbackAssignee:Fne,useRoundRobin:Vne,leaveUnassigned:Bne,alwaysAssignTo:Une,saveAssignmentRules:zne,automationRules:qne,perSource:Wne,searchSources:Gne,notify:Hne,text:Kne,aiBot:Yne,default:"",callListAutoAdd:Xne,notifyDesc:Qne,emailDesc:Jne,textDesc:Zne,aiBotDesc:ere,saveAutomationRules:tre,settings:nre,managersEventTypes:rre,managersSalesTeam:ire,edit:sre,dangerZone:are,dangerZoneDesc:ore,role:lre,managerAlreadyExists:cre,eventTypeAlreadyExists:ure,cannotDeleteUnassigned:dre,deleteManagerConfirm:fre,deleteEventTypeConfirm:hre,passwordResetLinkCopied:pre,copyPasswordResetLink:mre,failedToInviteUser:gre,migrateLeadsToContacts:yre,integrationsHub:vre,connectExternalPlatforms:xre,metaLeads:bre,aiGemini:wre,invoicing:_re,alerts:Sre,calendar:Nre,metaIntegration:Are,metaIntegrationDesc:Ere,facebookPageId:Cre,pageAccessToken:jre,getFromFacebook:Tre,whatsappApi:Pre,whatsappApiDesc:kre,provider:Ire,apiKeySid:Ore,authToken:Rre,apiEndpoint:$re,businessNumber:Dre,defaultGreeting:Mre,autoGreetingTitle:Lre,autoGreetingDesc:Fre,autoGreetingMessage:Vre,howItWorks:Bre,howItWorksDesc:Ure,googleGeminiAi:zre,geminiAiDesc:qre,geminiApiKey:Wre,getFromGoogleAi:Gre,aiFeaturesEnabled:Hre,invoicingSoftware:Kre,invoicingDesc:Yre,invoicingApiEndpoint:Xre,integrationBehavior:Qre,browserNotifications:Jre,browserNotificationsDesc:Zre,browserNotificationsNote:eie,smsNotifications:tie,smsNotificationsDesc:nie,twilioAccountSid:rie,twilioAuthToken:iie,twilioPhoneNumber:sie,sendSmsFor:aie,newLeadAssignments:oie,leadEscalations:lie,siteVisitReminders:cie,quoteFollowUp:uie,howSmsWorks:die,smsCost:fie,googleCalendarIntegration:hie,googleCalendarDesc:pie,quickAdd:mie,quickAddDesc:gie,autoSync:yie,googleCloudClientId:vie,googleCalendarApiKey:xie,pleaseEnterGoogleCreds:bie,googleConnectSuccess:wie,googleConnectFail:_ie,disconnectedGoogle:Sie,integrationSettingsSaved:Nie,integrationSettingsSavedBody:Aie,accountSettings:Eie,profile:Cie,password:jie,displayName:Tie,emailAddress:Pie,emailCannotBeChanged:kie,phoneNumber:Iie,usedForSms:Oie,saveProfile:Rie,currentPassword:$ie,newPassword:Die,confirmNewPassword:Mie,changePassword:Lie,passwordRequirements:Fie,minChar:Vie,mixRecommended:Bie,signOut:Uie,profileUpdated:zie,profileUpdateFailed:qie,fillAllPasswordFields:Wie,passwordsDoNotMatch:Gie,passwordMinLength:Hie,passwordChanged:Kie,currentPasswordIncorrect:Yie,requiresRecentLogin:Xie,passwordChangeFailed:Qie,enterCurrentPassword:Jie,enterNewPassword:Zie,confirmNewPasswordPlaceholder:ese,yourName:tse,phonePlaceholder:nse,smsWork1:rse,smsWork2:ise,smsWork3:sse,smsWork4:ase,smsWork5:ose,calendarWork1:lse,calendarWork2:cse,calendarWork3:use,calendarWork4:dse,calendarWork5:fse,aiFeature1:hse,aiFeature2:pse,aiFeature3:mse,aiFeature4:gse,aiFeature5:yse,behavior1:vse,behavior2:xse,behavior3:bse,behavior4:wse,autoGreetingHow:_se,autoGreetingNote:Sse,autoGreetingPlaceholder:Nse,autoGreetingMessageLabel:Ase,quickTemplates:Ese,dashboard:Cse,salesView:jse,conversations:Tse,finance:Pse,contacts:kse,sources:Ise,aiAudit:Ose,myLeads:Rse},Dse={en:qJ,ur:$se},BD=k.createContext();function Mse({children:t}){const[e,n]=k.useState("en"),r=k.useCallback(()=>{n(a=>a==="ur"?"en":"ur")},[]),i=k.useCallback(a=>Dse[e][a]||a,[e]),s=e==="ur";return o.jsx(BD.Provider,{value:{language:e,toggleLanguage:r,t:i,isRTL:s},children:t})}function Zr(){const t=k.useContext(BD);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t}function Lse(t,e,n,r){k.useEffect(()=>{if(!t||e.length===0)return;const s=setTimeout(async()=>{const a=e.filter(l=>!l.contactId&&l.phone);if(a.length!==0)try{const l=L7($t),c=us($t,"artifacts",Lt,"public","data","contacts");let u=0,d=0;const f=new Map;n.forEach(h=>f.set(h.phone,h.id));for(const h of a){const m=JS(h.phone);if(!m)continue;let y=f.get(m);if(!y){const v=Qn(c);y=v.id;const x=(h.clientName||"Unknown").split(" ");l.set(v,{firstName:x[0],lastName:x.slice(1).join(" "),phone:m,email:"",createdAt:VS()}),f.set(m,y),d++,u++}const g=Qn($t,"artifacts",Lt,"public","data","leads",h.id);if(l.set(g,{contactId:y,phone:m},{merge:!0}),u++,u>=450)break}u>0&&(await l.commit(),r({message:`System Auto-Fix: ${d} contacts created & linked.`,type:"success"}))}catch(l){console.error("Auto-fix failed",l)}},2e3);return()=>clearTimeout(s)},[t,e.length,n.length,r])}function Fse(t){const e=[];let n=[],r="",i=!1;const s=t.length;for(let a=0;a<s;a++){const l=t[a],c=t[a+1];l==='"'?i&&c==='"'?(r+='"',a++):i=!i:l===","&&!i?(n.push(r.trim()),r=""):(l===`
`||l==="\r")&&!i?(n.push(r.trim()),n.length>0&&e.push(n),n=[],r="",l==="\r"&&c===`
`&&a++):r+=l}return(r||n.length>0)&&(n.push(r.trim()),n.length>0&&e.push(n)),e}const Lj={open:!1,total:0,current:0,successCount:0,failedRows:[],done:!1,unmatchedSources:[]};function Vse(t=[],e=null){const[n,r]=k.useState(Lj);return{importProgress:n,closeImportModal:()=>{r(Lj)},handleFileUpload:a=>{const l=a.target.files[0];if(!l)return;const c=new FileReader;c.onload=async u=>{var d,f,h,m;try{const y=Fse(u.target.result),g=y.findIndex(_=>_.join(" ").toLowerCase().includes("client name"));if(g===-1){alert('Invalid CSV: Could not find "Client Name" header');return}const v=y[g].map(_=>_.replace(/"/g,"").trim().toLowerCase()),x=(_,...P)=>{for(const T of P){const O=v.findIndex(R=>R.includes(T));if(O>-1&&_[O])return _[O].replace(/"/g,"").trim()}return""},w=[],b=_=>{const P=v.findIndex(M=>M==="amount"||M==="quotation amount"||M.startsWith("amount"));if(P<0||P>=_.length)return _;const T=(_[P]||"").trim();let O=P+1;for(;O<_.length&&/^\d{3}$/.test((_[O]||"").trim());)O++;if(O===P+1)return _;const R=_.slice(P,O).join("");return[..._.slice(0,P),R,..._.slice(O)]},N=_=>_?String(_).replace(/[^\d.]/g,""):"";if(y.slice(g+1).forEach(_=>{if(_.length<2)return;const P=b(_),T=x(P,"client name","name");T&&w.push({clientName:T,amount:N(x(P,"amount","quotation")),quotationAmount:N(x(P,"amount","quotation")),clientBudget:N(x(P,"budget","client budget")),status:x(P,"status")||"New",notes:x(P,"notes"),phone:x(P,"phone","contact","mobile","cell"),email:x(P,"email","mail"),source:x(P,"source"),manager:x(P,"manager"),inquiryDate:x(P,"date","inquiry date"),eventDate:x(P,"event date","eventdate","function date"),eventType:x(P,"event type","eventtype","function type","occasion"),guests:x(P,"guests","pax","headcount","attendees"),venue:x(P,"venue","location")})}),w.length===0){alert("No valid leads found in CSV");return}r({open:!0,total:w.length,current:0,successCount:0,failedRows:[],done:!1,unmatchedSources:[]});const A=10;let E=0;const C=[];let S=0;for(let _=0;_<w.length;_+=A){const P=w.slice(_,_+A),T=_;try{const O=await sr.import(P);E+=((d=O.data)==null?void 0:d.successCount)??P.length,((h=(f=O.data)==null?void 0:f.errors)==null?void 0:h.length)>0&&(O.data.errors.forEach((R,M)=>{var B;const D=g+1+T+M+2;C.push({rowNumber:D,clientName:R.row||((B=P[M])==null?void 0:B.clientName)||"",error:R.error})}),E=E-(((m=O.data)==null?void 0:m.failedCount)??0))}catch(O){P.forEach((R,M)=>{const D=g+1+T+M+2;C.push({rowNumber:D,clientName:R.clientName,error:O.message})})}S+=P.length,r(O=>({...O,current:S,successCount:E,failedRows:[...C]}))}r(_=>({..._,current:w.length,successCount:E,failedRows:[...C],done:!0})),typeof e=="function"&&e()}catch(y){console.error("Import failed:",y),r(g=>({...g,done:!0,failedRows:[...g.failedRows,{rowNumber:"?",clientName:"Unknown",error:y.message}]}))}finally{a.target.value=""}},c.readAsText(l)}}}const Ps=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6366F1"],la=["New","Contacted","Qualified","Site Visit Scheduled","Quoted","Negotiating","Booked","Lost"],Wr={New:{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300"},Contacted:{bg:"bg-cyan-100",text:"text-cyan-700",border:"border-cyan-300"},Qualified:{bg:"bg-indigo-100",text:"text-indigo-700",border:"border-indigo-300"},"Site Visit Scheduled":{bg:"bg-purple-100",text:"text-purple-700",border:"border-purple-300"},Quoted:{bg:"bg-amber-100",text:"text-amber-700",border:"border-amber-300"},Negotiating:{bg:"bg-orange-100",text:"text-orange-700",border:"border-orange-300"},Booked:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300"},Lost:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300"}},ZS=["Rafaqat Ali","Zia un Nabi","Hassan Rizvi","Khizar","Unassigned"],Bse=["Admin","Owner","Sales","Finance"],af={name:"Area 51 Banquet Hall"},U0=[{id:"marquee",name:"Marquee",label:"Area 51 Marquee"},{id:"banquet",name:"Banquet",label:"Area 51 Banquet Hall"}],Use=["Advance","Mid-payment","Final payment"],of=["Wedding","Mehndi","Engagement","Birthday","Corporate Event","Other"];function zse(t){if(!t)return{type:"none",filter:null};const e=(t.role||"employee").toLowerCase();return e==="owner"||e==="admin"?{type:"all",filter:null}:e==="manager"?{type:"team",filter:{teamId:t.teamId||null},managerId:t.id||t.uid}:{type:"self",filter:{manager:t.name}}}const qse="";async function eN(t,e=""){var i,s,a,l,c,u;let n=qse;if(n||(n=(i=(await rf(Qn($t,"artifacts",Lt,"public","data","app_settings","integrations"))).data())==null?void 0:i.geminiApiKey),!n)return{success:!1,error:"Gemini API key not configured"};const r=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${n}`;try{const d=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:t}]}],systemInstruction:e?{parts:[{text:e}]}:void 0})});return d.ok?{success:!0,text:((u=(c=(l=(a=(s=(await d.json()).candidates)==null?void 0:s[0])==null?void 0:a.content)==null?void 0:l.parts)==null?void 0:c[0])==null?void 0:u.text)||""}:{success:!1,error:"API request failed"}}catch(d){return console.error("Gemini API error:",d),{success:!1,error:d.message}}}async function Wse(t,e,n="en"){if(!e)return n==="ur"?"User session nahi mila. Dobara login karein.":"User session not found. Please log in again.";zse(e);const r=(e.role||"employee").toLowerCase();return r==="owner"||r==="admin"?UD(t,e):r==="manager"?Gse(t,e,n):Kse(t,e.name,n,e)}async function Gse(t,e,n="en"){const r=n==="ur",i=r?`
    You are an AI assistant for "${af.name}" CRM, helping a manager in Urdu.
    Manager name: ${e.name}

    You can help with:
    - Team performance ("Team ki performance kaisi hai?")
    - Team's leads and follow-ups
    - Individual team member stats
    - Team conversion rates

    IMPORTANT: You can ONLY see data for this manager's team.
    You cannot compare with other teams or see company-wide data.

    Respond in Urdu (Roman script). Be concise.
  `:`
    You are an AI assistant for "${af.name}" CRM, helping a manager.
    Manager name: ${e.name}

    You can help with:
    - Team performance queries
    - Team's leads and follow-ups
    - Individual team member statistics
    - Team conversion rates and metrics

    IMPORTANT: You can ONLY see data for this manager's team.
    You cannot compare with other teams or access company-wide data.

    Respond in English. Be data-driven and concise.
  `,s=await Hse(),a=`
    Manager Query: "${t}"

    Team Metrics:
    - Total team leads: ${s.totalLeads}
    - Team conversion rate: ${s.conversionRate}%
    - Team revenue this month: PKR ${s.revenueThisMonth.toLocaleString()}

    Team Members:
    ${s.members.map(u=>`- ${u.name}: ${u.leads} leads, ${u.converted} converted`).join(`
`)}

    Respond to the manager's query in ${r?"Urdu (Roman script)":"English"}.
    ${r?"Agar manager company-wide data maangta hai, politely bataein ke aap sirf team data access kar sakte hain.":"If the manager asks for company-wide data, politely explain you can only access team data."}
  `,l=await eN(a,i),c=r?"Maaf kijiye, abhi jawab nahi de sakta. Dobara koshish karein.":"Sorry, unable to respond right now. Please try again.";return l.success?l.text:c}async function Hse(t){const e={totalLeads:0,conversionRate:0,revenueThisMonth:0,members:[]};try{const r=(await So(nf(us($t,"artifacts",Lt,"public","data","allowed_users"),Wm("role","in",["Sales","Employee"])))).docs.map(d=>({id:d.id,...d.data()})).filter(d=>d.name),i={};let s=0,a=0,l=0;const c=new Date,u=new Date(c.getFullYear(),c.getMonth(),1);for(const d of r){const f=await So(nf(us($t,"artifacts",Lt,"public","data","leads"),Wm("manager","==",d.name),Vy(100)));i[d.name]={leads:0,converted:0},f.docs.forEach(h=>{var y,g;const m=h.data();s++,i[d.name].leads++,m.stage==="Booked"&&(a++,i[d.name].converted++,((g=(y=m.createdAt)==null?void 0:y.toDate)==null?void 0:g.call(y))>=u&&(l+=Number(m.amount)||0))})}e.totalLeads=s,e.conversionRate=s>0?(a/s*100).toFixed(1):0,e.revenueThisMonth=l,e.members=Object.entries(i).map(([d,f])=>({name:d,...f}))}catch(n){console.error("Error fetching team context:",n)}return e}async function Kse(t,e,n="en",r=null){var d;const i=n==="ur",s=i?`
    You are an AI assistant for "${af.name}" CRM, helping sales employees in Urdu.
    The employee's name is ${e}.

    You can help with:
    - Lead status queries ("Is lead ka status kya hai?")
    - Follow-up reminders ("Aaj ke follow-ups dikhao")
    - Date availability ("15 March available hai?")
    - Lead details and history
    - Personal performance metrics ("Meri conversion rate kya hai?")

    IMPORTANT SCOPE RULES:
    - You can ONLY see leads assigned to ${e}
    - You CANNOT see other team members' leads or performance
    - If asked about team/company data, politely explain you can only show their personal data
    - Never reveal other employees' metrics or compare performance

    Always respond in Urdu (Roman script). Be concise and helpful.
  `:`
    You are an AI assistant for "${af.name}" CRM, helping sales employees.
    The employee's name is ${e}.

    You can help with:
    - Lead status queries ("What's the status of this lead?")
    - Follow-up reminders ("Show me today's follow-ups")
    - Date availability ("Is March 15 available?")
    - Lead details and history
    - Personal performance metrics ("What's my conversion rate?")

    IMPORTANT SCOPE RULES:
    - You can ONLY see leads assigned to ${e}
    - You CANNOT see other team members' leads or performance
    - If asked about team/company data, politely explain you can only show their personal data
    - Never reveal other employees' metrics or compare performance

    Always respond in English. Be concise and helpful.
  `,a=await Yse(e),l=`
    Employee Query: "${t}"

    YOUR Leads Data (${e}'s data only):
    - Total assigned leads: ${a.totalLeads}
    - New leads: ${a.newLeads}
    - Booked/Won: ${a.bookedLeads}
    - Your conversion rate: ${a.conversionRate}%
    - Today's follow-ups: ${a.todayFollowups}
    - Pending site visits: ${a.pendingSiteVisits}
    - Your revenue: PKR ${((d=a.revenue)==null?void 0:d.toLocaleString())||0}

    Your recent leads:
    ${a.recentLeads.map(f=>`- ${f.clientName}: ${f.stage} (${f.eventDate||"No date"})`).join(`
`)}

    Respond to the employee's query in ${i?"Urdu (Roman script)":"English"}.
    ${i?"Agar employee team ya company data poochhe, politely bataein ke aap sirf unke personal data access kar sakte hain.":"If the employee asks about team or company data, politely explain you can only access their personal data."}
  `,c=await eN(l,s),u=i?"Maaf kijiye, abhi jawab nahi de sakta. Dobara koshish karein.":"Sorry, unable to respond right now. Please try again.";return c.success?c.text:u}async function Yse(t){const e={totalLeads:0,newLeads:0,bookedLeads:0,conversionRate:0,revenue:0,todayFollowups:0,pendingSiteVisits:0,recentLeads:[]};try{const n=await So(nf(us($t,"artifacts",Lt,"public","data","leads"),Wm("manager","==",t),DS("createdAt","desc"),Vy(100))),r=new Date().toISOString().split("T")[0];n.docs.forEach(i=>{const s=i.data();e.totalLeads++,s.stage==="New"&&e.newLeads++,s.stage==="Site Visit Scheduled"&&e.pendingSiteVisits++,(s.followUpDate===r||s.nextCallDate===r)&&e.todayFollowups++,(s.stage==="Booked"||s.stage==="Won")&&(e.bookedLeads++,e.revenue+=Number(s.amount)||0),e.recentLeads.length<10&&e.recentLeads.push({clientName:s.clientName,stage:s.stage,eventDate:s.eventDate})}),e.conversionRate=e.totalLeads>0?(e.bookedLeads/e.totalLeads*100).toFixed(1):0}catch(n){console.error("Error fetching employee context:",n)}return e}async function UD(t,e=null){const n=`
    You are an AI analytics assistant for "${af.name}" CRM, helping the owner understand business performance.
    ${e?`Current user: ${e.name} (${e.role})`:""}

    RESPONSE FORMAT RULES (CRITICAL):
    - Keep responses SHORT and SCANNABLE (max 150 words)
    - Use bullet points () for lists, NOT asterisks
    - Use line breaks between sections
    - Bold key numbers by wrapping in **number**
    - Structure: Brief insight  Key metrics  1-2 action items

    Example good response:
    "Lead volume is strong but conversion needs work.

     Total Leads: **5,600+** (mostly from Meta)
     Conversion Rate: **1.9%** (below 5% target)
     Revenue: PKR **0** this month

    Action Items:
     Review Meta ad targeting quality
     Train team on follow-up timing"

    You have FULL ACCESS to all company data, employees, revenue, and analytics.
    Be direct, data-driven, and actionable.
  `,r=await Xse(),i=`
    Owner Query: "${t}"

    Business Metrics:
    - Total leads this month: ${r.leadsThisMonth}
    - Leads by source: ${JSON.stringify(r.leadsBySource)}
    - Conversion rate: ${r.conversionRate}%
    - Average response time: ${r.avgResponseTime} hours
    - Revenue this month: PKR ${r.revenueThisMonth.toLocaleString()}
    - Revenue YTD: PKR ${r.revenueYTD.toLocaleString()}

    Leads by stage:
    ${Object.entries(r.leadsByStage).map(([a,l])=>`- ${a}: ${l}`).join(`
`)}

    Employee Performance:
    ${r.employeePerformance.map(a=>`- ${a.name}: ${a.leads} leads, ${a.converted} converted, PKR ${a.revenue.toLocaleString()}`).join(`
`)}

    Answer the owner's question based on this data.
  `,s=await eN(i,n);return s.success?s.text:"Unable to process query. Please try again."}async function Xse(){const t={leadsThisMonth:0,leadsBySource:{},leadsByStage:{},conversionRate:0,avgResponseTime:0,revenueThisMonth:0,revenueYTD:0,employeePerformance:[]};try{const e=new Date,n=new Date(e.getFullYear(),e.getMonth(),1).toISOString(),r=new Date(e.getFullYear(),0,1).toISOString(),i=await So(us($t,"artifacts",Lt,"public","data","leads")),s={};let a=0,l=0;i.docs.forEach(c=>{var h,m,y,g,v,x;const u=c.data();a++,t.leadsByStage[u.stage]=(t.leadsByStage[u.stage]||0)+1;const d=u.source||"Unknown";if(t.leadsBySource[d]=(t.leadsBySource[d]||0)+1,((m=(h=u.createdAt)==null?void 0:h.toDate)==null?void 0:m.call(h))>=new Date(n)&&t.leadsThisMonth++,u.stage==="Booked"||u.stage==="Won"){l++;const w=Number(u.amount)||0;((g=(y=u.createdAt)==null?void 0:y.toDate)==null?void 0:g.call(y))>=new Date(n)&&(t.revenueThisMonth+=w),((x=(v=u.createdAt)==null?void 0:v.toDate)==null?void 0:x.call(v))>=new Date(r)&&(t.revenueYTD+=w)}const f=u.manager||"Unassigned";s[f]||(s[f]={leads:0,converted:0,revenue:0}),s[f].leads++,u.stage==="Booked"&&(s[f].converted++,s[f].revenue+=Number(u.amount)||0)}),t.conversionRate=a>0?(l/a*100).toFixed(1):0,t.employeePerformance=Object.entries(s).map(([c,u])=>({name:c,...u}))}catch(e){console.error("Error fetching business metrics:",e)}return t}async function Qse(){const t=Qn($t,"artifacts",Lt,"public","data","app_settings","integrations"),e=await rf(t);return e.exists()?e.data():null}async function Jse(t){const e=await Qse();if(!(e!=null&&e.invoicingApiKey)||!(e!=null&&e.invoicingApiEndpoint))return{success:!1,error:"Invoicing not configured"};try{const n=await fetch(`${e.invoicingApiEndpoint}/api/bookings/${t}/payments`,{headers:{Authorization:`Bearer ${e.invoicingApiKey}`}}),r=await n.json();if(n.ok)return{success:!0,payments:r.payments||[],totalPaid:r.totalPaid||0,totalDue:r.totalDue||0,status:r.status};throw new Error(r.message||"Failed to fetch payments")}catch(n){return console.error("Payment status error:",n),{success:!1,error:n.message}}}async function Zse(t){const e=t.filter(r=>r.stage==="Booked"&&r.invoicingId),n=[];for(const r of e){const i=await Jse(r.invoicingId);i.success&&(await Xb(Qn($t,"artifacts",Lt,"public","data","leads",r.id),{paymentStatus:i.status,totalPaid:i.totalPaid,totalDue:i.totalDue,lastPaymentSync:VS()}),n.push({leadId:r.id,...i}))}return n}const bi=Object.create(null);bi.open="0";bi.close="1";bi.ping="2";bi.pong="3";bi.message="4";bi.upgrade="5";bi.noop="6";const Xp=Object.create(null);Object.keys(bi).forEach(t=>{Xp[bi[t]]=t});const tw={type:"error",data:"parser error"},zD=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",qD=typeof ArrayBuffer=="function",WD=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,tN=({type:t,data:e},n,r)=>zD&&e instanceof Blob?n?r(e):Fj(e,r):qD&&(e instanceof ArrayBuffer||WD(e))?n?r(e):Fj(new Blob([e]),r):r(bi[t]+(e||"")),Fj=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function Vj(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let z0;function eae(t,e){if(zD&&t.data instanceof Blob)return t.data.arrayBuffer().then(Vj).then(e);if(qD&&(t.data instanceof ArrayBuffer||WD(t.data)))return e(Vj(t.data));tN(t,!1,n=>{z0||(z0=new TextEncoder),e(z0.encode(n))})}const Bj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<Bj.length;t++)Zu[Bj.charCodeAt(t)]=t;const tae=t=>{let e=t.length*.75,n=t.length,r,i=0,s,a,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const u=new ArrayBuffer(e),d=new Uint8Array(u);for(r=0;r<n;r+=4)s=Zu[t.charCodeAt(r)],a=Zu[t.charCodeAt(r+1)],l=Zu[t.charCodeAt(r+2)],c=Zu[t.charCodeAt(r+3)],d[i++]=s<<2|a>>4,d[i++]=(a&15)<<4|l>>2,d[i++]=(l&3)<<6|c&63;return u},nae=typeof ArrayBuffer=="function",nN=(t,e)=>{if(typeof t!="string")return{type:"message",data:GD(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:rae(t.substring(1),e)}:Xp[n]?t.length>1?{type:Xp[n],data:t.substring(1)}:{type:Xp[n]}:tw},rae=(t,e)=>{if(nae){const n=tae(t);return GD(n,e)}else return{base64:!0,data:t}},GD=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},HD="",iae=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,a)=>{tN(s,!1,l=>{r[a]=l,++i===n&&e(r.join(HD))})})},sae=(t,e)=>{const n=t.split(HD),r=[];for(let i=0;i<n.length;i++){const s=nN(n[i],e);if(r.push(s),s.type==="error")break}return r};function aae(){return new TransformStream({transform(t,e){eae(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let q0;function sp(t){return t.reduce((e,n)=>e+n.length,0)}function ap(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function oae(t,e){q0||(q0=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(a,l){for(n.push(a);;){if(r===0){if(sp(n)<1)break;const c=ap(n,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(sp(n)<2)break;const c=ap(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(sp(n)<8)break;const c=ap(n,8),u=new DataView(c.buffer,c.byteOffset,c.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(tw);break}i=d*Math.pow(2,32)+u.getUint32(4),r=3}else{if(sp(n)<i)break;const c=ap(n,i);l.enqueue(nN(s?c:q0.decode(c),e)),r=0}if(i===0||i>t){l.enqueue(tw);break}}}})}const KD=4;function Wt(t){if(t)return lae(t)}function lae(t){for(var e in Wt.prototype)t[e]=Wt.prototype[e];return t}Wt.prototype.on=Wt.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Wt.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Wt.prototype.off=Wt.prototype.removeListener=Wt.prototype.removeAllListeners=Wt.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Wt.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};Wt.prototype.emitReserved=Wt.prototype.emit;Wt.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Wt.prototype.hasListeners=function(t){return!!this.listeners(t).length};const qy=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Sr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),cae="arraybuffer";function YD(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const uae=Sr.setTimeout,dae=Sr.clearTimeout;function Wy(t,e){e.useNativeTimers?(t.setTimeoutFn=uae.bind(Sr),t.clearTimeoutFn=dae.bind(Sr)):(t.setTimeoutFn=Sr.setTimeout.bind(Sr),t.clearTimeoutFn=Sr.clearTimeout.bind(Sr))}const fae=1.33;function hae(t){return typeof t=="string"?pae(t):Math.ceil((t.byteLength||t.size)*fae)}function pae(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function XD(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function mae(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function gae(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class yae extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class rN extends Wt{constructor(e){super(),this.writable=!1,Wy(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new yae(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=nN(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=mae(e);return n.length?"?"+n:""}}class vae extends rN{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};sae(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,iae(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=XD()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let QD=!1;try{QD=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const xae=QD;function bae(){}class wae extends vae{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let Dl=class Qp extends Wt{constructor(e,n,r){super(),this.createRequest=e,Wy(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=YD(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=Qp.requestsCount++,Qp.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=bae,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Qp.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Dl.requestsCount=0;Dl.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Uj);else if(typeof addEventListener=="function"){const t="onpagehide"in Sr?"pagehide":"unload";addEventListener(t,Uj,!1)}}function Uj(){for(let t in Dl.requests)Dl.requests.hasOwnProperty(t)&&Dl.requests[t].abort()}const _ae=function(){const t=JD({xdomain:!1});return t&&t.responseType!==null}();class Sae extends wae{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=_ae&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Dl(JD,this.uri(),e)}}function JD(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||xae))return new XMLHttpRequest}catch{}if(!e)try{return new Sr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const ZD=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Nae extends rN{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=ZD?{}:YD(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;tN(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&qy(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=XD()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const W0=Sr.WebSocket||Sr.MozWebSocket;class Aae extends Nae{createSocket(e,n,r){return ZD?new W0(e,n,r):n?new W0(e,n):new W0(e)}doWrite(e,n){this.ws.send(n)}}class Eae extends rN{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=oae(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=aae();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:c})=>{l||(this.onPacket(c),s())}).catch(l=>{})};s();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&qy(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const Cae={websocket:Aae,webtransport:Eae,polling:Sae},jae=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Tae=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function nw(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=jae.exec(t||""),s={},a=14;for(;a--;)s[Tae[a]]=i[a]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=Pae(s,s.path),s.queryKey=kae(s,s.query),s}function Pae(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function kae(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const rw=typeof addEventListener=="function"&&typeof removeEventListener=="function",Jp=[];rw&&addEventListener("offline",()=>{Jp.forEach(t=>t())},!1);class ca extends Wt{constructor(e,n){if(super(),this.binaryType=cae,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=nw(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=nw(n.host).host);Wy(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=gae(this.opts.query)),rw&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Jp.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=KD,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&ca.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",ca.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=hae(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,qy(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(ca.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),rw&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=Jp.indexOf(this._offlineEventListener);r!==-1&&Jp.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}ca.protocol=KD;class Iae extends ca{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;ca.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;ca.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function s(){r||(r=!0,d(),n.close(),n=null)}const a=f=>{const h=new Error("probe error: "+f);h.transport=n.name,s(),this.emitReserved("upgradeError",h)};function l(){a("transport closed")}function c(){a("socket closed")}function u(f){n&&f.name!==n.name&&s()}const d=()=>{n.removeListener("open",i),n.removeListener("error",a),n.removeListener("close",l),this.off("close",c),this.off("upgrading",u)};n.once("open",i),n.once("error",a),n.once("close",l),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let Oae=class extends Iae{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>Cae[i]).filter(i=>!!i)),super(e,r)}};function Rae(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=nw(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const $ae=typeof ArrayBuffer=="function",Dae=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,eM=Object.prototype.toString,Mae=typeof Blob=="function"||typeof Blob<"u"&&eM.call(Blob)==="[object BlobConstructor]",Lae=typeof File=="function"||typeof File<"u"&&eM.call(File)==="[object FileConstructor]";function iN(t){return $ae&&(t instanceof ArrayBuffer||Dae(t))||Mae&&t instanceof Blob||Lae&&t instanceof File}function Zp(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Zp(t[n]))return!0;return!1}if(iN(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Zp(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Zp(t[n]))return!0;return!1}function Fae(t){const e=[],n=t.data,r=t;return r.data=iw(n,e),r.attachments=e.length,{packet:r,buffers:e}}function iw(t,e){if(!t)return t;if(iN(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=iw(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=iw(t[r],e));return n}return t}function Vae(t,e){return t.data=sw(t.data,e),delete t.attachments,t}function sw(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=sw(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=sw(t[n],e));return t}const Bae=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var Ge;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Ge||(Ge={}));class Uae{constructor(e){this.replacer=e}encode(e){return(e.type===Ge.EVENT||e.type===Ge.ACK)&&Zp(e)?this.encodeAsBinary({type:e.type===Ge.EVENT?Ge.BINARY_EVENT:Ge.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Ge.BINARY_EVENT||e.type===Ge.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=Fae(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}class sN extends Wt{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===Ge.BINARY_EVENT;r||n.type===Ge.BINARY_ACK?(n.type=r?Ge.EVENT:Ge.ACK,this.reconstructor=new zae(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(iN(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(Ge[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Ge.BINARY_EVENT||r.type===Ge.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const a=e.substring(s,n);if(a!=Number(a)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const a=e.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(sN.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Ge.CONNECT:return zj(n);case Ge.DISCONNECT:return n===void 0;case Ge.CONNECT_ERROR:return typeof n=="string"||zj(n);case Ge.EVENT:case Ge.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Bae.indexOf(n[0])===-1);case Ge.ACK:case Ge.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class zae{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=Vae(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function zj(t){return Object.prototype.toString.call(t)==="[object Object]"}const qae=Object.freeze(Object.defineProperty({__proto__:null,Decoder:sN,Encoder:Uae,get PacketType(){return Ge}},Symbol.toStringTag,{value:"Module"}));function Br(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const Wae=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class tM extends Wt{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Br(e,"open",this.onopen.bind(this)),Br(e,"packet",this.onpacket.bind(this)),Br(e,"error",this.onerror.bind(this)),Br(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(Wae.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const a={type:Ge.EVENT,data:n};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,f=n.pop();this._registerAckCallback(d,f),a.id=d}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),a=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(a,l)=>a?i(a):r(l);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>(this._queue[0],i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ge.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ge.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ge.EVENT:case Ge.BINARY_EVENT:this.onevent(e);break;case Ge.ACK:case Ge.BINARY_ACK:this.onack(e);break;case Ge.DISCONNECT:this.ondisconnect();break;case Ge.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:Ge.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ge.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function qc(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}qc.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};qc.prototype.reset=function(){this.attempts=0};qc.prototype.setMin=function(t){this.ms=t};qc.prototype.setMax=function(t){this.max=t};qc.prototype.setJitter=function(t){this.jitter=t};class aw extends Wt{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Wy(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new qc({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||qae;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Oae(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=Br(n,"open",function(){r.onopen(),e&&e()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},a=Br(n,"error",s);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Br(e,"ping",this.onping.bind(this)),Br(e,"data",this.ondata.bind(this)),Br(e,"error",this.onerror.bind(this)),Br(e,"close",this.onclose.bind(this)),Br(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){qy(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new tM(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Pu={};function em(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=Rae(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,a=Pu[i]&&s in Pu[i].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let c;return l?c=new aw(r,e):(Pu[i]||(Pu[i]=new aw(r,e)),c=Pu[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(em,{Manager:aw,Socket:tM,io:em,connect:em});let ni;const Gae=(t="https://area51crm.inplsoftwares.com")=>{const[e,n]=k.useState(!1);return k.useEffect(()=>{ni||(ni=em(t,{withCredentials:!0,transports:["websocket","polling"],autoConnect:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3}));const r=()=>{console.log(" Connected to Socket.IO server at",t),n(!0)},i=a=>{console.log(" Disconnected from Socket.IO server:",a),n(!1)},s=a=>{console.error(" Socket connection error:",a.message)};return ni.connected&&n(!0),ni.on("connect",r),ni.on("disconnect",i),ni.on("connect_error",s),()=>{ni.off("connect",r),ni.off("disconnect",i),ni.off("connect_error",s)}},[t]),{socket:ni,isConnected:e}};function Hae(t,e={}){const{maxNotifications:n=50,enableBrowserNotifications:r=!1}=e,[i,s]=k.useState([]),[a,l]=k.useState(!0),[c,u]=k.useState(null),[d,f]=k.useState(typeof Notification<"u"?Notification.permission:"denied"),[h,m]=k.useState(new Set),y=k.useCallback(async()=>{if(typeof Notification>"u")return console.warn("Browser notifications not supported"),!1;if(Notification.permission==="granted")return f("granted"),!0;if(Notification.permission!=="denied"){const C=await Notification.requestPermission();return f(C),C==="granted"}return!1},[]),g=k.useCallback(C=>{if(!(d!=="granted"||!r)&&!h.has(C.id))try{const S=v(C.type),_=new Notification(S,{body:C.message,icon:"/favicon.ico",tag:C.id,requireInteraction:C.priority==="high"});C.priority!=="high"&&setTimeout(()=>_.close(),5e3),m(P=>new Set([...P,C.id])),_.onclick=()=>{window.focus(),_.close()}}catch(S){console.error("Error showing browser notification:",S)}},[d,r,h]),v=C=>{switch(C){case"lead_assigned":return"New Lead Assigned!";case"stale_lead_reminder":return"Follow-up Reminder";case"stale_lead_escalation":return"URGENT: Lead Escalation";case"site_visit_reminder":return"Site Visit Tomorrow";default:return"Area 51 CRM"}},x=k.useCallback(async()=>{const C=(t==null?void 0:t.id)||(t==null?void 0:t.uid);if(console.log("[useNotifications] Fetching for user:",C,"Current User Object:",t),!C){console.log("[useNotifications] No userId, skipping fetch");return}l(!0);try{console.log("[useNotifications] Calling API...");const S=await ip.getAll({userId:C,role:t.role,limit:n});console.log("[useNotifications] Fetched data:",S),s(S),u(null)}catch(S){console.error("Error fetching notifications:",S),u(S.message)}finally{l(!1)}},[t,n]);k.useEffect(()=>{x()},[x]);const w=k.useCallback(async C=>{s(S=>S.map(_=>_.id===C?{..._,read:!0}:_));try{await ip.markAsRead(C)}catch(S){console.error("Error marking notification as read:",S)}},[]),b=k.useCallback(async()=>{s(C=>C.map(S=>({...S,read:!0})));try{const C=(t==null?void 0:t.id)||(t==null?void 0:t.uid);await ip.markAllAsRead({userId:C,role:t.role})}catch(C){console.error("Error marking all notifications as read:",C)}},[t]),N=k.useCallback(async C=>{s(S=>S.filter(_=>_.id!==C));try{await ip.delete(C)}catch(S){console.error("Error deleting notification:",S)}},[]),A=k.useCallback(C=>{s(S=>S.some(_=>_.id===C.id)?S:[C,...S]),r&&g(C)},[r,g]),E=i.filter(C=>!C.read).length;return{notifications:i,unreadCount:E,loading:a,error:c,markAsRead:w,markAllAsRead:b,deleteNotification:N,browserPermission:d,requestBrowserPermission:y,handleNewNotification:A,refreshNotifications:x}}const Kae=()=>{try{new Audio("/notification.mp3.mp3").play().catch(e=>console.error("Audio play error",e))}catch(t){console.error("Audio setup error",t)}};function Yae(t){const{socket:e}=Gae();k.useEffect(()=>{if(!e)return;const n=r=>{console.log(" Received new-lead event:",r),Kae(),t&&t(r)};return console.log(" Listening for new-lead events"),e.on("new-lead",n),()=>{e.off("new-lead",n)}},[e,t])}function Xae(){const[t,e]=k.useState(ZS),[n,r]=k.useState(of),[i,s]=k.useState(!0);return k.useEffect(()=>{const a=Gm(Qn($t,"artifacts",Lt,"public","data","app_settings","managers"),c=>{var u;c.exists()&&((u=c.data().list)==null?void 0:u.length)>0&&e(c.data().list)}),l=Gm(Qn($t,"artifacts",Lt,"public","data","app_settings","event_types"),c=>{var u;c.exists()&&((u=c.data().list)==null?void 0:u.length)>0&&r(c.data().list),s(!1)});return()=>{a(),l()}},[]),{managers:t,eventTypes:n,loading:i}}function Qae({enabled:t=!0}={}){const[e,n]=k.useState([]),[r,i]=k.useState(t),[s,a]=k.useState(null),[l,c]=k.useState(!1),[u,d]=k.useState(null),[f,h]=k.useState(0),m=k.useCallback(async(N=null,A=!1,E="")=>{i(!0),a(null);try{const C=await Bs.getAll(N,1e4,E);return n(A?S=>[...S,...C.data]:C.data),c(C.pagination.hasMore),d(C.pagination.nextCursor),h(C.pagination.total),C.data}catch(C){return a(C.message),console.error("Failed to fetch contacts:",C),[]}finally{i(!1)}},[]),y=k.useCallback(async()=>{l&&u&&!r&&await m(u,!0)},[l,u,r,m]),g=k.useCallback(async N=>await m(null,!1,N),[m]);k.useEffect(()=>{t?m():i(!1)},[m,t]);const v=k.useCallback(async N=>{try{const A=await Bs.create(N);return n(E=>[A,...E]),h(E=>E+1),A}catch(A){throw a(A.message),A}},[]),x=k.useCallback(async(N,A)=>{try{const E=await Bs.update(N,A);return n(C=>C.map(S=>S.id===N?E:S)),E}catch(E){throw a(E.message),E}},[]),w=k.useCallback(async N=>{try{await Bs.delete(N),n(A=>A.filter(E=>E.id!==N)),h(A=>A-1)}catch(A){throw a(A.message),A}},[]),b=k.useCallback(async()=>{try{await Bs.deleteAll(),n([]),h(0)}catch(N){throw a(N.message),N}},[]);return{contacts:e,loading:r,error:s,hasMore:l,totalCount:f,fetchContacts:(N,A)=>m(N,A,""),searchContacts:g,loadMore:y,addContact:v,updateContact:x,deleteContact:w,deleteAllContacts:b}}function Jae({enabled:t=!0}={}){const[e,n]=k.useState([]),[r,i]=k.useState(t),[s,a]=k.useState(null),l=k.useCallback(async()=>{i(!0),a(null);try{const f=await Ju.getAll();n(f)}catch(f){a(f.message),console.error("Failed to fetch sources:",f)}finally{i(!1)}},[]);k.useEffect(()=>{t?l():i(!1)},[l,t]);const c=k.useCallback(async f=>{try{const h=await Ju.create(f);return n(m=>[h,...m]),h}catch(h){throw a(h.message),h}},[]),u=k.useCallback(async(f,h)=>{try{const m=await Ju.update(f,h);return n(y=>y.map(g=>g.id===f?m:g)),m}catch(m){throw a(m.message),m}},[]),d=k.useCallback(async f=>{try{await Ju.delete(f),n(h=>h.filter(m=>m.id!==f))}catch(h){throw a(h.message),h}},[]);return{sources:e,loading:r,error:s,fetchSources:l,addSource:c,updateSource:u,deleteSource:d}}function Zae(){const[t,e]=k.useState(!1),[n,r]=k.useState({current:0,total:0,success:0,skipped:0,skippedDuplicate:0,skippedInvalid:0,failed:0}),[i,s]=k.useState(null);return{migrateContacts:k.useCallback(async()=>{e(!0),s(null),r({current:0,total:0,success:0,skipped:0,skippedDuplicate:0,skippedInvalid:0,failed:0});try{console.log("Fetching contacts from Firebase...");const l=us($t,"artifacts",Lt,"public","data","contacts"),u=(await So(l)).docs.map(x=>({id:x.id,...x.data()}));if(console.log(`Found ${u.length} contacts in Firebase`),u.length===0)return{success:0,skipped:0,failed:0,total:0};r(x=>({...x,total:u.length}));let d=[];try{let x=null,w=!0;for(console.log("Fetching existing contacts from PostgreSQL...");w;){const b=await Bs.getAll(x,100);d=[...d,...b.data],w=b.pagination.hasMore,x=b.pagination.nextCursor}console.log(`Fetched ${d.length} existing contacts from PostgreSQL`)}catch(x){console.error("Failed to fetch existing contacts:",x)}const f=new Set(d.map(x=>x.phone)),h=new Set(d.map(x=>x.email).filter(Boolean));let m=0,y=0,g=0,v=0;for(let x=0;x<u.length;x++){const w=u[x];try{let b=JS(w.phone);if(!b&&w.phone){const E=String(w.phone).replace(/[^0-9+]/g,"");E.length>=7&&(b=E)}if(!b){console.warn(`Skipping invalid phone: ${w.firstName} (${w.phone})`),g++,r(E=>({...E,current:x+1,skipped:y+g,skippedInvalid:g}));continue}if(f.has(b)){console.log(`Skipping duplicate phone: ${b} (${w.firstName})`),y++,r(E=>({...E,current:x+1,skipped:y+g,skippedDuplicate:y}));continue}const N=w.email||null;if(N&&h.has(N)){console.log(`Skipping duplicate email: ${N} (${w.firstName})`),y++,r(E=>({...E,current:x+1,skipped:y+g,skippedDuplicate:y}));continue}const A={firstName:w.firstName||"Unknown",lastName:w.lastName||"",email:N,phone:b};await Bs.create(A),f.add(b),N&&h.add(N),m++,r(E=>({...E,current:x+1,success:m}))}catch(b){if(b.message&&b.message.includes("already exists")){console.log(`Skipping duplicate (API 409): ${w.phone}`),y++,r(N=>({...N,current:x+1,skipped:y+g,skippedDuplicate:y}));continue}console.error(`Failed to migrate contact: ${w.firstName}`,b),v++,r(N=>({...N,current:x+1,failed:v}))}}return console.log("Migration complete:",{success:m,skippedDuplicate:y,skippedInvalid:g,failed:v,total:u.length}),{success:m,skippedDuplicate:y,skippedInvalid:g,failed:v,total:u.length}}catch(l){throw console.error("Migration error:",l),s(l.message),l}finally{e(!1)}},[]),migrating:t,progress:n,error:i}}function eoe({enabled:t=!0}={}){const[e,n]=k.useState([]),[r,i]=k.useState(t),[s,a]=k.useState(null),[l,c]=k.useState({page:1,limit:100,total:0}),u=k.useCallback(async(v={})=>{i(!0);try{const x={limit:1e4,...v},w=await sr.getAll(x),b=w.data.map(N=>{var A,E;return{...N,clientName:N.contact?`${N.contact.firstName} ${N.contact.lastName}`.trim():N.title||"Unknown",stage:N.status,inquiryDate:new Date(N.createdAt).toISOString().split("T")[0],manager:N.assignee?N.assignee.username:"Unassigned",phone:((A=N.contact)==null?void 0:A.phone)||"",source:((E=N.source)==null?void 0:E.name)||""}});n(b),c(w.pagination),a(null)}catch(x){console.error("Error fetching leads:",x),a(x.message)}finally{i(!1)}},[]);k.useEffect(()=>{t?u():i(!1)},[u,t]);const d=async v=>{try{const x=await sr.create(v);return await u(),x}catch(x){throw x}},f=async(v,x)=>{try{const w=await sr.update(v,x);return await u(),w}catch(w){throw w}},h=async v=>{try{await sr.delete(v),await u()}catch(x){throw x}},m=async()=>{try{await sr.deleteAll(),await u()}catch(v){throw v}},y=async(v,x,w="NOTE")=>{try{await sr.addNote(v,{content:x,type:w})}catch(b){throw b}},g=k.useMemo(()=>{const v=e.filter(N=>ri(N.stage)),x=v.reduce((N,A)=>N+At(A.amount),0),w=e.filter(N=>["proposal","negotiation"].some(A=>(N.stage||"").toLowerCase().includes(A))).reduce((N,A)=>N+At(A.amount),0),b=e.length>0?(v.length/e.length*100).toFixed(1):0;return{revenue:x,pipe:w,total:e.length,conversion:b,wonCount:v.length}},[e]);return{leads:e,loading:r,error:s,pagination:l,fetchLeads:u,addLead:d,updateLead:f,deleteLead:h,deleteAllLeads:m,addLeadNote:y,stats:g}}function toe({enabled:t=!0}={}){const[e,n]=k.useState([]),[r,i]=k.useState(t),[s,a]=k.useState(null);return k.useEffect(()=>{t?(async()=>{try{const c=await Yp.getAll();n(c),a(null)}catch(c){console.error("Error fetching users:",c),a(c.message)}finally{i(!1)}})():i(!1)},[t]),{users:e,loading:r,error:s}}function noe({message:t,type:e="success",onClose:n}){return k.useEffect(()=>{const r=setTimeout(n,5e3);return()=>clearTimeout(r)},[n]),o.jsxs("div",{className:`fixed bottom-4 right-4 z-[100] px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3 animate-bounce-in ${e==="success"?"bg-slate-900 text-green-400 border border-green-500":"bg-red-900 text-white border border-red-500"}`,children:[e==="success"?o.jsx(Qr,{className:"w-6 h-6"}):o.jsx(mo,{className:"w-6 h-6"}),o.jsx("div",{children:o.jsx("p",{className:"font-bold",children:t})}),o.jsx("button",{onClick:n,className:"ml-4 hover:opacity-70",children:o.jsx(Ft,{className:"w-4 h-4"})})]})}function op({title:t,value:e,icon:n,color:r,subtext:i,onClick:s}){return o.jsxs("div",{onClick:s,className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm hover:shadow-md transition-all cursor-pointer group relative overflow-hidden",children:[o.jsx("div",{className:`absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity ${r.replace("bg-","text-")}`,children:o.jsx(n,{className:"w-16 h-16"})}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:`p-3 rounded-xl ${r} bg-opacity-10 w-fit mb-4`,children:o.jsx(n,{className:`w-6 h-6 ${r.replace("bg-","text-")}`})}),o.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),o.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-1 tracking-tight",children:e}),i&&o.jsx("p",{className:"text-xs text-gray-400 mt-2 font-medium",children:i})]})]})}const roe=(t,e)=>{const n=[{id:"owner-dashboard",path:"/",label:e("dashboard"),icon:ER,description:"Analytics & KPIs"},{id:"leads",path:"/leads",label:e("allLeads"),icon:jr,description:"Manage leads"},{id:"employee",path:"/employee",label:e("salesView"),icon:Kl,description:"Employee interface"},{id:"call-list",path:"/call-list",label:e("callList"),icon:yo,description:"Scheduled calls"},{id:"conversation-logs",path:"/conversation-logs",label:e("conversations"),icon:ur,description:"WhatsApp history"},{id:"finance",path:"/finance",label:e("finance"),icon:zd,description:"Payments & invoicing"},{id:"contacts",path:"/contacts",label:e("contacts"),icon:bC,description:"Contact directory"},{id:"sources",path:"/sources",label:e("sources"),icon:jm,description:"Lead sources"},{id:"audit-logs",path:"/audit-logs",label:e("aiAudit"),icon:dd,description:"AI interaction logs"}],r=[{id:"employee",path:"/employee",label:e("myLeads"),icon:Kl,description:"My inbox"},{id:"call-list",path:"/call-list",label:e("callList"),icon:yo,description:"Scheduled calls"},{id:"contacts",path:"/contacts",label:e("contacts"),icon:bC,description:"Contacts"}],i=[{id:"finance",path:"/finance",label:e("finance"),icon:zd,description:"Payments & invoicing"}];switch(t){case"Owner":case"Admin":return n;case"Sales":return r;case"Finance":return i;default:return n}};function qj({activeTab:t,setActiveTab:e,userRole:n,onShowAdmin:r,onShowIntegrations:i,onShowUserSettings:s,onShowMigration:a,isMobile:l=!1}){const{t:c}=Zr(),u=roe(n,c),d=["Owner","Admin"].includes(n),f=()=>{l&&e&&e()};return l?o.jsxs("div",{className:"p-2",children:[o.jsx("div",{className:"px-3 py-2 mb-2",children:o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${n==="Owner"||n==="Admin"?"bg-purple-100 text-purple-700":n==="Sales"?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:n})}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:u.map(h=>o.jsx(Ab,{to:h.path,onClick:f,className:({isActive:m})=>`flex items-center gap-2 px-3 py-3 rounded-xl text-left transition-all ${m?"bg-blue-100 text-blue-700 font-semibold":"bg-gray-50 text-gray-600 active:bg-gray-100"}`,children:({isActive:m})=>o.jsxs(o.Fragment,{children:[o.jsx(h.icon,{className:`w-5 h-5 flex-shrink-0 ${m?"text-blue-600":"text-gray-400"}`}),o.jsx("span",{className:"text-sm font-medium truncate",children:h.label})]})},h.id))}),d&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"my-3 border-t border-gray-200"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-3 py-3 rounded-xl text-left bg-purple-50 text-purple-700 active:bg-purple-100",children:[o.jsx(Tb,{className:"w-5 h-5 text-purple-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Admin"})]}),o.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-3 py-3 rounded-xl text-left bg-cyan-50 text-cyan-700 active:bg-cyan-100",children:[o.jsx(Pm,{className:"w-5 h-5 text-cyan-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Settings"})]})]})]}),o.jsx("div",{className:"my-3 border-t border-gray-200"}),o.jsxs("button",{onClick:s,className:"w-full flex items-center gap-2 px-3 py-3 rounded-xl text-left bg-gray-100 text-gray-700 active:bg-gray-200",children:[o.jsx(Cb,{className:"w-5 h-5 text-gray-500"}),o.jsx("span",{className:"text-sm font-medium",children:"My Account"})]})]}):o.jsxs("aside",{className:"w-64 bg-white border-r flex flex-col shadow-sm h-full",children:[o.jsx("div",{className:"p-5 border-b",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center",children:o.jsx(LB,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"font-bold text-gray-900",children:"Area 51"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Banquet Hall CRM"})]})]})}),o.jsx("div",{className:"px-5 py-3 bg-gray-50 border-b",children:o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${n==="Owner"||n==="Admin"?"bg-purple-100 text-purple-700":n==="Sales"?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:n})}),o.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[u.map(h=>o.jsx(Ab,{to:h.path,className:({isActive:m})=>`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all ${m?"bg-blue-50 text-blue-700 font-semibold":"text-gray-600 hover:bg-gray-50"}`,children:({isActive:m})=>o.jsxs(o.Fragment,{children:[o.jsx(h.icon,{className:`w-5 h-5 ${m?"text-blue-600":"text-gray-400"}`}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:h.label}),!m&&o.jsx("p",{className:"text-[10px] text-gray-400",children:h.description})]})]})},h.id)),d&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"my-4 border-t border-gray-100"}),o.jsx("p",{className:"px-4 text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Settings"}),o.jsxs("button",{onClick:r,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left text-gray-600 hover:bg-purple-50 hover:text-purple-700 transition-all",children:[o.jsx(Tb,{className:"w-5 h-5 text-purple-500"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:"Admin Panel"}),o.jsx("p",{className:"text-[10px] text-gray-400",children:"Users & permissions"})]})]}),o.jsxs("button",{onClick:i,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left text-gray-600 hover:bg-cyan-50 hover:text-cyan-700 transition-all",children:[o.jsx(Pm,{className:"w-5 h-5 text-cyan-500"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:"Integrations"}),o.jsx("p",{className:"text-[10px] text-gray-400",children:"WhatsApp, Meta, AI"})]})]}),o.jsxs("button",{onClick:a,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left text-gray-600 hover:bg-orange-50 hover:text-orange-700 transition-all font-medium",children:[o.jsx(Cm,{className:"w-5 h-5 text-orange-500"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:"Data Migration"}),o.jsx("p",{className:"text-[10px] text-gray-400",children:"Firebase to SQL"})]})]})]})]}),o.jsx("div",{className:"p-4 border-t",children:o.jsxs("button",{onClick:s,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left text-gray-600 hover:bg-gray-100 transition-all",children:[o.jsx(Cb,{className:"w-5 h-5 text-gray-500"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:"My Account"}),o.jsx("p",{className:"text-[10px] text-gray-400",children:"Profile & password"})]})]})}),o.jsx("div",{className:"p-4 border-t bg-gray-50",children:o.jsx("p",{className:"text-[10px] text-gray-400 text-center",children:"Area 51 CRM v1.0"})})]})}function ioe({onLogin:t,isLoading:e,authError:n,login:r,signup:i,logout:s}){const[a,l]=k.useState(""),[c,u]=k.useState(""),[d,f]=k.useState(""),[h,m]=k.useState("Sales"),[y,g]=k.useState(""),[v,x]=k.useState("login"),[w,b]=k.useState(!1),N=async C=>{C.preventDefault(),g(""),b(!0);try{await r(a,c)}catch(S){g(S.message||"Login failed. Please try again.")}finally{b(!1)}},A=async C=>{C.preventDefault(),g(""),b(!0);try{await i(d,a,c,h)}catch(S){S.message.includes("already exists")?g("An account with this email already exists. Please sign in."):g(S.message||"Registration failed. Please try again.")}finally{b(!1)}},E=async()=>{await s()};return e?o.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Ut,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto"}),o.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Loading..."})]})}):n?o.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center p-4 font-sans",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden border border-slate-200",children:[o.jsxs("div",{className:"p-8 text-center bg-gradient-to-br from-red-500 to-orange-600",children:[o.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(mo,{className:"w-10 h-10 text-white"})}),o.jsx("h1",{className:"text-2xl font-bold text-white",children:"Access Denied"})]}),o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("p",{className:"text-gray-600 mb-6",children:n}),o.jsxs("button",{onClick:E,className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold py-3 rounded-xl flex items-center justify-center gap-2",children:[o.jsx(jR,{className:"w-4 h-4"})," Sign Out & Try Different Account"]})]})]})}):o.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center p-4 font-sans",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden border border-slate-200 animate-scale-in",children:[o.jsxs("div",{className:`p-8 text-center relative overflow-hidden ${v==="register"?"bg-gradient-to-br from-green-600 to-teal-700":"bg-gradient-to-br from-blue-600 to-indigo-700"}`,children:[o.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:v==="register"?o.jsx(km,{className:"w-10 h-10 text-white"}):o.jsx(za,{className:"w-10 h-10 text-white"})}),o.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:v==="register"?"Create Account":"Area 51 CRM"}),o.jsx("p",{className:"text-white/70 text-sm mt-1",children:v==="register"?"Join our platform":"Sign in to your account"})]}),o.jsxs("div",{className:"p-8",children:[o.jsxs("form",{onSubmit:v==="register"?A:N,className:"space-y-5",children:[v==="register"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Username"}),o.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl border border-gray-300 outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",value:d,onChange:C=>f(C.target.value),placeholder:"Your username",required:!0,minLength:3})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Role"}),o.jsxs("select",{className:"w-full px-4 py-3 rounded-xl border border-gray-300 outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",value:h,onChange:C=>m(C.target.value),required:!0,children:[o.jsx("option",{value:"Admin",children:"Admin"}),o.jsx("option",{value:"Owner",children:"Owner"}),o.jsx("option",{value:"Sales",children:"Sales"}),o.jsx("option",{value:"Finance",children:"Finance"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Email"}),o.jsx("input",{type:"email",className:"w-full px-4 py-3 rounded-xl border border-gray-300 outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",value:a,onChange:C=>l(C.target.value),placeholder:"your@email.com",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Password"}),o.jsx("input",{type:"password",className:"w-full px-4 py-3 rounded-xl border border-gray-300 outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",value:c,onChange:C=>u(C.target.value),placeholder:"",required:!0,minLength:6})]}),y&&o.jsxs("div",{className:"p-3 bg-red-50 text-red-600 text-sm rounded-lg flex items-start gap-2",children:[o.jsx(mo,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),y]}),o.jsx("button",{type:"submit",disabled:w,className:`w-full text-white font-bold py-3.5 rounded-xl shadow-lg transition-all hover:shadow-xl ${v==="register"?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"} disabled:opacity-70`,children:w?o.jsx(Ut,{className:"w-5 h-5 animate-spin mx-auto"}):v==="register"?"Create Account":"Sign In"})]}),o.jsxs("div",{className:"mt-6 space-y-2",children:[v==="login"&&o.jsx("button",{type:"button",onClick:()=>{x("register"),g("")},className:"block w-full text-sm text-blue-600 hover:text-blue-700 font-medium",children:"New user? Create an account"}),v==="register"&&o.jsxs("button",{type:"button",onClick:()=>{x("login"),g("")},className:"block w-full text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center justify-center gap-1",children:[o.jsx(q_,{className:"w-4 h-4"})," Already have an account? Sign in"]})]})]})]})})}const soe=t=>{switch(t){case"lead_assigned":return{icon:di,color:"blue",label:"New Lead"};case"stale_lead_reminder":return{icon:as,color:"amber",label:"Follow-up"};case"stale_lead_escalation":return{icon:ss,color:"red",label:"Escalation"};case"site_visit_reminder":return{icon:ln,color:"green",label:"Site Visit"};default:return{icon:go,color:"gray",label:"Notification"}}},aoe=t=>{if(!t)return"";const e=t.toDate?t.toDate():new Date(t),r=new Date-e,i=Math.floor(r/6e4),s=Math.floor(r/36e5),a=Math.floor(r/864e5);return i<1?"Just now":i<60?`${i}m ago`:s<24?`${s}h ago`:a<7?`${a}d ago`:e.toLocaleDateString()};function Wj({notifications:t=[],onMarkRead:e,onMarkAllRead:n,onDelete:r,onNotificationClick:i,currentUser:s}){const[a,l]=k.useState(!1),c=k.useRef(null),u=t,d=u.filter(m=>!m.read).length;k.useEffect(()=>{const m=y=>{c.current&&!c.current.contains(y.target)&&l(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const f=m=>{m.read||e==null||e(m.id),i==null||i(m),l(!1)},h=m=>{m.stopPropagation(),n==null||n()};return o.jsxs("div",{className:"relative",ref:c,children:[o.jsxs("button",{onClick:()=>l(!a),className:`relative p-2 rounded-full transition-all ${a?"bg-blue-100 text-blue-600":"hover:bg-gray-100 text-gray-600"}`,children:[o.jsx(go,{className:"w-5 h-5"}),d>0&&o.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white animate-pulse"})]}),a&&o.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-xl shadow-xl border border-gray-200 z-50 overflow-hidden animate-scale-in origin-top-right",children:[o.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 flex items-center justify-between bg-gray-50/50 backdrop-blur-sm",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900",children:"Notifications"}),o.jsx("p",{className:"text-xs text-gray-500",children:d>0?`${d} unread`:"All caught up"})]}),d>0&&o.jsxs("button",{onClick:h,className:"text-sm text-blue-500 hover:text-blue-700 hover:underline font-medium flex items-center gap-1 transition-colors",children:[o.jsx(BB,{className:"w-3.5 h-3.5"}),"Mark all read"]})]}),o.jsx("div",{className:"max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-200 scrollbar-track-transparent",children:u.length===0?o.jsxs("div",{className:"p-8 text-center text-gray-400 flex flex-col items-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mb-3",children:o.jsx(go,{className:"w-8 h-8 opacity-20"})}),o.jsx("p",{className:"font-medium text-gray-900",children:"No notifications"}),o.jsx("p",{className:"text-xs mt-1",children:"You're all caught up!"})]}):o.jsx("div",{className:"divide-y divide-gray-50",children:u.map(m=>{const y=soe(m.type),g=y.icon;return o.jsxs("div",{onClick:()=>f(m),className:`relative px-4 py-3 cursor-pointer transition-all duration-300 hover:bg-gray-50 group ${m.read?"opacity-60 hover:opacity-100":"bg-yellow-50"}`,children:[!m.read&&o.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-yellow-400"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full bg-${y.color}-100 flex items-center justify-center flex-shrink-0 mt-0.5`,children:o.jsx(g,{className:`w-5 h-5 text-${y.color}-600`})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex justify-between items-start gap-2",children:[o.jsx("p",{className:`text-sm leading-snug ${m.read?"text-gray-700":"font-semibold text-gray-900"}`,children:m.message}),o.jsx("span",{className:"text-[10px] text-gray-400 whitespace-nowrap flex-shrink-0",children:aoe(m.createdAt)})]}),o.jsx("div",{className:"flex items-center gap-2 mt-1.5",children:o.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full bg-${y.color}-50 text-${y.color}-700 font-medium border border-${y.color}-100`,children:y.label})})]})]})]},m.id)})})})]})]})}function Gj({compact:t=!1}){const{language:e,toggleLanguage:n}=Zr(),r=e==="ur";return t?o.jsxs("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors flex items-center gap-1",title:r?"Switch to English":"  ",children:[o.jsx(HB,{className:"w-5 h-5 text-gray-600"}),o.jsx("span",{className:"text-xs font-bold text-gray-600",children:r?"EN":"UR"})]}):o.jsx("button",{onClick:n,className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-full transition-all",title:r?"Switch to English":"  ",children:o.jsxs("div",{className:"relative flex items-center bg-white rounded-full p-0.5 shadow-inner",children:[o.jsx("div",{className:`absolute h-6 w-8 bg-blue-500 rounded-full transition-transform duration-200 ${r?"translate-x-8":"translate-x-0"}`}),o.jsx("span",{className:`relative z-10 px-2 py-0.5 text-xs font-bold rounded-full transition-colors ${r?"text-gray-500":"text-white"}`,children:"EN"}),o.jsx("span",{className:`relative z-10 px-2 py-0.5 text-xs font-bold rounded-full transition-colors ${r?"text-white":"text-gray-500"}`,style:{fontFamily:"Noto Nastaliq Urdu, serif"},children:""})]})})}const ooe="modulepreload",loe=function(t){return"/"+t},Hj={},coe=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=loe(c),c in Hj)return;Hj[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":ooe,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function uoe(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:a}=t;let l,c;const u=async(f=!0)=>{await c};async function d(){if("serviceWorker"in navigator){if(l=await coe(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/sw.js",{scope:"/",type:"classic"})).catch(f=>{a==null||a(f)}),!l)return;l.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),l.addEventListener("installed",f=>{f.isUpdate||r==null||r()}),l.register({immediate:e}).then(f=>{s?s("/sw.js",f):i==null||i(f)}).catch(f=>{a==null||a(f)})}}return c=d(),u}function doe(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:a}=t,[l,c]=k.useState(!1),[u,d]=k.useState(!1),[f]=k.useState(()=>uoe({immediate:e,onOfflineReady(){d(!0),r==null||r()},onNeedRefresh(){c(!0),n==null||n()},onRegistered:i,onRegisteredSW:s,onRegisterError:a}));return{needRefresh:[l,c],offlineReady:[u,d],updateServiceWorker:f}}function foe(){const[t,e]=k.useState(!1),{needRefresh:[n,r],updateServiceWorker:i}=doe({onRegisteredSW(l,c){console.log("SW Registered:",l),c&&setInterval(()=>{c.update()},60*60*1e3)},onRegisterError(l){console.error("SW registration error",l)}});k.useEffect(()=>{n&&e(!0)},[n]);const s=()=>{i(!0)},a=()=>{e(!1),r(!1)};return t?o.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50",children:o.jsxs("div",{className:"bg-emerald-600 text-white rounded-lg shadow-lg p-4 flex items-center gap-3",children:[o.jsx(vo,{className:"w-6 h-6 flex-shrink-0 animate-spin-slow"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium",children:"Update Available"}),o.jsx("p",{className:"text-sm text-emerald-100",children:"A new version is ready. Refresh to update."})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:s,className:"px-3 py-1.5 bg-white text-emerald-600 rounded font-medium hover:bg-emerald-50 transition-colors",children:"Update"}),o.jsx("button",{onClick:a,className:"p-1.5 hover:bg-emerald-500 rounded transition-colors",children:o.jsx(Ft,{className:"w-5 h-5"})})]})]})}):null}function hoe({monthName:t,events:e,onClose:n}){const r=k.useMemo(()=>[...e].sort((i,s)=>new Date(i.inquiryDate||i.eventDate)-new Date(s.inquiryDate||s.eventDate)),[e]);return o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[80] flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white w-full max-w-4xl h-[80vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-scale-in border border-gray-200",children:[o.jsxs("div",{className:"bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Booked Events: ",t]}),o.jsxs("p",{className:"text-sm text-gray-500",children:[r.length," confirmed bookings"]})]}),o.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-full",children:o.jsx(Ft,{className:"w-6 h-6 text-gray-500"})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map((i,s)=>o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm hover:border-green-400 hover:shadow-md transition-all group relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-green-500"}),o.jsxs("div",{className:"flex justify-between items-start mb-3 pl-2",children:[o.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-[10px] font-bold rounded uppercase tracking-wide",children:i.eventType||"Event"}),o.jsx("span",{className:"text-xs font-medium text-gray-400",children:i.inquiryDate})]}),o.jsx("h4",{className:"font-bold text-gray-900 text-lg pl-2 mb-1",children:i.clientName}),o.jsxs("p",{className:"text-xs text-gray-500 pl-2 mb-4 flex items-center gap-1",children:[o.jsx(Cb,{className:"w-3 h-3"})," ",i.manager]}),o.jsxs("div",{className:"flex justify-between items-center border-t border-gray-50 pt-3 pl-2",children:[o.jsx("span",{className:"font-bold text-green-700 text-sm",children:Le(i.amount)}),o.jsxs("span",{className:"text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded-full",children:[i.guests||0," Pax"]})]})]},s))}),r.length===0&&o.jsx("p",{className:"text-center text-gray-400 mt-10",children:"No confirmed bookings found."})]})]})})}const poe="",moe=async t=>{var n,r,i,s,a;const e=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${poe}`;try{const l=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:t}]}]})});return l.ok?((a=(s=(i=(r=(n=(await l.json()).candidates)==null?void 0:n[0])==null?void 0:r.content)==null?void 0:i.parts)==null?void 0:s[0])==null?void 0:a.text)||"No response generated.":"I'm having trouble thinking right now. Please try again later."}catch(l){return console.error("Gemini API error:",l),"AI Service unavailable."}};function goe({stats:t,onClose:e}){const[n,r]=k.useState(""),[i,s]=k.useState(!0);return k.useEffect(()=>{(async()=>{const l=`
        Act as a Chief Revenue Officer. Analyze this data for "Area 51" Event Venue:
        - Total Revenue (Confirmed): ${Le(t.totalRevenue)}
        - Potential Revenue (Pipeline): ${Le(t.potentialRevenue)}
        - Conversion Rate: ${t.wonCount}/${t.total} leads
        - Monthly Trend Data: ${JSON.stringify(t.trendData.slice(-6))}

        Write a 3-paragraph executive summary:
        1. Financial Health Assessment
        2. Pipeline Opportunity Analysis
        3. One critical recommendation to increase revenue next month.

        Do not use markdown, just plain text paragraphs separated by newlines.
      `,c=await moe(l);r(c),s(!1)})()},[t]),o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[90] flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-2xl animate-scale-in overflow-hidden",children:[o.jsxs("div",{className:"p-6 bg-gradient-to-r from-purple-600 to-indigo-600 text-white flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(dd,{className:"w-8 h-8 text-purple-200"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold",children:"AI Executive Report"}),o.jsx("p",{className:"text-purple-200 text-xs",children:"Generated by Gemini"})]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-full",children:o.jsx(Ft,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"p-8 min-h-[300px]",children:i?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4 opacity-60",children:[o.jsx(Ut,{className:"w-10 h-10 text-purple-600 animate-spin"}),o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Analyzing financial patterns..."})]}):o.jsx("div",{className:"prose prose-indigo text-gray-700 leading-relaxed whitespace-pre-wrap font-medium text-sm",children:n})})]})})}function nM(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=nM(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Me(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=nM(t))&&(r&&(r+=" "),r+=e);return r}var yoe=Array.isArray,Jn=yoe,voe=typeof Rh=="object"&&Rh&&Rh.Object===Object&&Rh,rM=voe,xoe=rM,boe=typeof self=="object"&&self&&self.Object===Object&&self,woe=xoe||boe||Function("return this")(),Ei=woe,_oe=Ei,Soe=_oe.Symbol,dh=Soe,Kj=dh,iM=Object.prototype,Noe=iM.hasOwnProperty,Aoe=iM.toString,ku=Kj?Kj.toStringTag:void 0;function Eoe(t){var e=Noe.call(t,ku),n=t[ku];try{t[ku]=void 0;var r=!0}catch{}var i=Aoe.call(t);return r&&(e?t[ku]=n:delete t[ku]),i}var Coe=Eoe,joe=Object.prototype,Toe=joe.toString;function Poe(t){return Toe.call(t)}var koe=Poe,Yj=dh,Ioe=Coe,Ooe=koe,Roe="[object Null]",$oe="[object Undefined]",Xj=Yj?Yj.toStringTag:void 0;function Doe(t){return t==null?t===void 0?$oe:Roe:Xj&&Xj in Object(t)?Ioe(t):Ooe(t)}var bs=Doe;function Moe(t){return t!=null&&typeof t=="object"}var ws=Moe,Loe=bs,Foe=ws,Voe="[object Symbol]";function Boe(t){return typeof t=="symbol"||Foe(t)&&Loe(t)==Voe}var Wc=Boe,Uoe=Jn,zoe=Wc,qoe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Woe=/^\w*$/;function Goe(t,e){if(Uoe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||zoe(t)?!0:Woe.test(t)||!qoe.test(t)||e!=null&&t in Object(e)}var aN=Goe;function Hoe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Na=Hoe;const Gc=st(Na);var Koe=bs,Yoe=Na,Xoe="[object AsyncFunction]",Qoe="[object Function]",Joe="[object GeneratorFunction]",Zoe="[object Proxy]";function ele(t){if(!Yoe(t))return!1;var e=Koe(t);return e==Qoe||e==Joe||e==Xoe||e==Zoe}var oN=ele;const je=st(oN);var tle=Ei,nle=tle["__core-js_shared__"],rle=nle,G0=rle,Qj=function(){var t=/[^.]+$/.exec(G0&&G0.keys&&G0.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function ile(t){return!!Qj&&Qj in t}var sle=ile,ale=Function.prototype,ole=ale.toString;function lle(t){if(t!=null){try{return ole.call(t)}catch{}try{return t+""}catch{}}return""}var sM=lle,cle=oN,ule=sle,dle=Na,fle=sM,hle=/[\\^$.*+?()[\]{}|]/g,ple=/^\[object .+?Constructor\]$/,mle=Function.prototype,gle=Object.prototype,yle=mle.toString,vle=gle.hasOwnProperty,xle=RegExp("^"+yle.call(vle).replace(hle,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ble(t){if(!dle(t)||ule(t))return!1;var e=cle(t)?xle:ple;return e.test(fle(t))}var wle=ble;function _le(t,e){return t==null?void 0:t[e]}var Sle=_le,Nle=wle,Ale=Sle;function Ele(t,e){var n=Ale(t,e);return Nle(n)?n:void 0}var Lo=Ele,Cle=Lo,jle=Cle(Object,"create"),Gy=jle,Jj=Gy;function Tle(){this.__data__=Jj?Jj(null):{},this.size=0}var Ple=Tle;function kle(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Ile=kle,Ole=Gy,Rle="__lodash_hash_undefined__",$le=Object.prototype,Dle=$le.hasOwnProperty;function Mle(t){var e=this.__data__;if(Ole){var n=e[t];return n===Rle?void 0:n}return Dle.call(e,t)?e[t]:void 0}var Lle=Mle,Fle=Gy,Vle=Object.prototype,Ble=Vle.hasOwnProperty;function Ule(t){var e=this.__data__;return Fle?e[t]!==void 0:Ble.call(e,t)}var zle=Ule,qle=Gy,Wle="__lodash_hash_undefined__";function Gle(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=qle&&e===void 0?Wle:e,this}var Hle=Gle,Kle=Ple,Yle=Ile,Xle=Lle,Qle=zle,Jle=Hle;function Hc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Hc.prototype.clear=Kle;Hc.prototype.delete=Yle;Hc.prototype.get=Xle;Hc.prototype.has=Qle;Hc.prototype.set=Jle;var Zle=Hc;function ece(){this.__data__=[],this.size=0}var tce=ece;function nce(t,e){return t===e||t!==t&&e!==e}var lN=nce,rce=lN;function ice(t,e){for(var n=t.length;n--;)if(rce(t[n][0],e))return n;return-1}var Hy=ice,sce=Hy,ace=Array.prototype,oce=ace.splice;function lce(t){var e=this.__data__,n=sce(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():oce.call(e,n,1),--this.size,!0}var cce=lce,uce=Hy;function dce(t){var e=this.__data__,n=uce(e,t);return n<0?void 0:e[n][1]}var fce=dce,hce=Hy;function pce(t){return hce(this.__data__,t)>-1}var mce=pce,gce=Hy;function yce(t,e){var n=this.__data__,r=gce(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var vce=yce,xce=tce,bce=cce,wce=fce,_ce=mce,Sce=vce;function Kc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Kc.prototype.clear=xce;Kc.prototype.delete=bce;Kc.prototype.get=wce;Kc.prototype.has=_ce;Kc.prototype.set=Sce;var Ky=Kc,Nce=Lo,Ace=Ei,Ece=Nce(Ace,"Map"),cN=Ece,Zj=Zle,Cce=Ky,jce=cN;function Tce(){this.size=0,this.__data__={hash:new Zj,map:new(jce||Cce),string:new Zj}}var Pce=Tce;function kce(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Ice=kce,Oce=Ice;function Rce(t,e){var n=t.__data__;return Oce(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Yy=Rce,$ce=Yy;function Dce(t){var e=$ce(this,t).delete(t);return this.size-=e?1:0,e}var Mce=Dce,Lce=Yy;function Fce(t){return Lce(this,t).get(t)}var Vce=Fce,Bce=Yy;function Uce(t){return Bce(this,t).has(t)}var zce=Uce,qce=Yy;function Wce(t,e){var n=qce(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Gce=Wce,Hce=Pce,Kce=Mce,Yce=Vce,Xce=zce,Qce=Gce;function Yc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Yc.prototype.clear=Hce;Yc.prototype.delete=Kce;Yc.prototype.get=Yce;Yc.prototype.has=Xce;Yc.prototype.set=Qce;var uN=Yc,aM=uN,Jce="Expected a function";function dN(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Jce);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=t.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(dN.Cache||aM),n}dN.Cache=aM;var oM=dN;const Zce=st(oM);var eue=oM,tue=500;function nue(t){var e=eue(t,function(r){return n.size===tue&&n.clear(),r}),n=e.cache;return e}var rue=nue,iue=rue,sue=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,aue=/\\(\\)?/g,oue=iue(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(sue,function(n,r,i,s){e.push(i?s.replace(aue,"$1"):r||n)}),e}),lue=oue;function cue(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var fN=cue,eT=dh,uue=fN,due=Jn,fue=Wc,tT=eT?eT.prototype:void 0,nT=tT?tT.toString:void 0;function lM(t){if(typeof t=="string")return t;if(due(t))return uue(t,lM)+"";if(fue(t))return nT?nT.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var hue=lM,pue=hue;function mue(t){return t==null?"":pue(t)}var cM=mue,gue=Jn,yue=aN,vue=lue,xue=cM;function bue(t,e){return gue(t)?t:yue(t,e)?[t]:vue(xue(t))}var uM=bue,wue=Wc;function _ue(t){if(typeof t=="string"||wue(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Xy=_ue,Sue=uM,Nue=Xy;function Aue(t,e){e=Sue(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[Nue(e[n++])];return n&&n==r?t:void 0}var hN=Aue,Eue=hN;function Cue(t,e,n){var r=t==null?void 0:Eue(t,e);return r===void 0?n:r}var dM=Cue;const dr=st(dM);function jue(t){return t==null}var Tue=jue;const Re=st(Tue);var Pue=bs,kue=Jn,Iue=ws,Oue="[object String]";function Rue(t){return typeof t=="string"||!kue(t)&&Iue(t)&&Pue(t)==Oue}var $ue=Rue;const Eo=st($ue);var fM={exports:{}},at={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pN=Symbol.for("react.element"),mN=Symbol.for("react.portal"),Qy=Symbol.for("react.fragment"),Jy=Symbol.for("react.strict_mode"),Zy=Symbol.for("react.profiler"),ev=Symbol.for("react.provider"),tv=Symbol.for("react.context"),Due=Symbol.for("react.server_context"),nv=Symbol.for("react.forward_ref"),rv=Symbol.for("react.suspense"),iv=Symbol.for("react.suspense_list"),sv=Symbol.for("react.memo"),av=Symbol.for("react.lazy"),Mue=Symbol.for("react.offscreen"),hM;hM=Symbol.for("react.module.reference");function Rr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case pN:switch(t=t.type,t){case Qy:case Zy:case Jy:case rv:case iv:return t;default:switch(t=t&&t.$$typeof,t){case Due:case tv:case nv:case av:case sv:case ev:return t;default:return e}}case mN:return e}}}at.ContextConsumer=tv;at.ContextProvider=ev;at.Element=pN;at.ForwardRef=nv;at.Fragment=Qy;at.Lazy=av;at.Memo=sv;at.Portal=mN;at.Profiler=Zy;at.StrictMode=Jy;at.Suspense=rv;at.SuspenseList=iv;at.isAsyncMode=function(){return!1};at.isConcurrentMode=function(){return!1};at.isContextConsumer=function(t){return Rr(t)===tv};at.isContextProvider=function(t){return Rr(t)===ev};at.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===pN};at.isForwardRef=function(t){return Rr(t)===nv};at.isFragment=function(t){return Rr(t)===Qy};at.isLazy=function(t){return Rr(t)===av};at.isMemo=function(t){return Rr(t)===sv};at.isPortal=function(t){return Rr(t)===mN};at.isProfiler=function(t){return Rr(t)===Zy};at.isStrictMode=function(t){return Rr(t)===Jy};at.isSuspense=function(t){return Rr(t)===rv};at.isSuspenseList=function(t){return Rr(t)===iv};at.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Qy||t===Zy||t===Jy||t===rv||t===iv||t===Mue||typeof t=="object"&&t!==null&&(t.$$typeof===av||t.$$typeof===sv||t.$$typeof===ev||t.$$typeof===tv||t.$$typeof===nv||t.$$typeof===hM||t.getModuleId!==void 0)};at.typeOf=Rr;fM.exports=at;var Lue=fM.exports,Fue=bs,Vue=ws,Bue="[object Number]";function Uue(t){return typeof t=="number"||Vue(t)&&Fue(t)==Bue}var pM=Uue;const zue=st(pM);var que=pM;function Wue(t){return que(t)&&t!=+t}var Gue=Wue;const Xc=st(Gue);var Rn=function(e){return e===0?0:e>0?1:-1},Ya=function(e){return Eo(e)&&e.indexOf("%")===e.length-1},te=function(e){return zue(e)&&!Xc(e)},Hue=function(e){return Re(e)},en=function(e){return te(e)||Eo(e)},Kue=0,Qc=function(e){var n=++Kue;return"".concat(e||"").concat(n)},$n=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!te(e)&&!Eo(e))return r;var s;if(Ya(e)){var a=e.indexOf("%");s=n*parseFloat(e.slice(0,a))/100}else s=+e;return Xc(s)&&(s=r),i&&s>n&&(s=n),s},Us=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Yue=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Bn=function(e,n){return te(e)&&te(n)?function(r){return e+r*(n-e)}:function(){return n}};function Jm(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):dr(r,e))===n})}var Xue=function(e,n){return te(e)&&te(n)?e-n:Eo(e)&&Eo(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Ml(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function ow(t){"@babel/helpers - typeof";return ow=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ow(t)}var Que=["viewBox","children"],Jue=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],rT=["points","pathLength"],H0={svg:Que,polygon:rT,polyline:rT},gN=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Zm=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(k.isValidElement(e)&&(r=e.props),!Gc(r))return null;var i={};return Object.keys(r).forEach(function(s){gN.includes(s)&&(i[s]=n||function(a){return r[s](r,a)})}),i},Zue=function(e,n,r){return function(i){return e(n,r,i),null}},Co=function(e,n,r){if(!Gc(e)||ow(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var a=e[s];gN.includes(s)&&typeof a=="function"&&(i||(i={}),i[s]=Zue(a,n,r))}),i},ede=["children"],tde=["children"];function iT(t,e){if(t==null)return{};var n=nde(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function lw(t){"@babel/helpers - typeof";return lw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lw(t)}var sT={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Qi=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},aT=null,K0=null,yN=function t(e){if(e===aT&&Array.isArray(K0))return K0;var n=[];return k.Children.forEach(e,function(r){Re(r)||(Lue.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),K0=n,aT=e,n};function Tr(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Qi(i)}):r=[Qi(e)],yN(t).forEach(function(i){var s=dr(i,"type.displayName")||dr(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}function nr(t,e){var n=Tr(t,e);return n&&n[0]}var oT=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!te(r)||r<=0||!te(i)||i<=0)},rde=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],ide=function(e){return e&&e.type&&Eo(e.type)&&rde.indexOf(e.type)>=0},sde=function(e){return e&&lw(e)==="object"&&"clipDot"in e},ade=function(e,n,r,i){var s,a=(s=H0==null?void 0:H0[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!je(e)&&(i&&a.includes(n)||Jue.includes(n))||r&&gN.includes(n)},be=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(k.isValidElement(e)&&(i=e.props),!Gc(i))return null;var s={};return Object.keys(i).forEach(function(a){var l;ade((l=i)===null||l===void 0?void 0:l[a],a,n,r)&&(s[a]=i[a])}),s},cw=function t(e,n){if(e===n)return!0;var r=k.Children.count(e);if(r!==k.Children.count(n))return!1;if(r===0)return!0;if(r===1)return lT(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var s=e[i],a=n[i];if(Array.isArray(s)||Array.isArray(a)){if(!t(s,a))return!1}else if(!lT(s,a))return!1}return!0},lT=function(e,n){if(Re(e)&&Re(n))return!0;if(!Re(e)&&!Re(n)){var r=e.props||{},i=r.children,s=iT(r,ede),a=n.props||{},l=a.children,c=iT(a,tde);return i&&l?Ml(s,c)&&cw(i,l):!i&&!l?Ml(s,c):!1}return!1},cT=function(e,n){var r=[],i={};return yN(e).forEach(function(s,a){if(ide(s))r.push(s);else if(s){var l=Qi(s.type),c=n[l]||{},u=c.handler,d=c.once;if(u&&(!d||!i[l])){var f=u(s,l,a);r.push(f),i[l]=!0}}}),r},ode=function(e){var n=e&&e.type;return n&&sT[n]?sT[n]:null},lde=function(e,n){return yN(n).indexOf(e)},cde=["children","width","height","viewBox","className","style","title","desc"];function uw(){return uw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uw.apply(this,arguments)}function ude(t,e){if(t==null)return{};var n=dde(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function dde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function dw(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,s=t.className,a=t.style,l=t.title,c=t.desc,u=ude(t,cde),d=i||{width:n,height:r,x:0,y:0},f=Me("recharts-surface",s);return L.createElement("svg",uw({},be(u,!0,"svg"),{className:f,width:n,height:r,style:a,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),L.createElement("title",null,l),L.createElement("desc",null,c),e)}var fde=["children","className"];function fw(){return fw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fw.apply(this,arguments)}function hde(t,e){if(t==null)return{};var n=pde(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Xe=L.forwardRef(function(t,e){var n=t.children,r=t.className,i=hde(t,fde),s=Me("recharts-layer",r);return L.createElement("g",fw({className:s},be(i,!0),{ref:e}),n)}),Kr=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function mde(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}var gde=mde,yde=gde;function vde(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:yde(t,e,n)}var xde=vde,bde="\\ud800-\\udfff",wde="\\u0300-\\u036f",_de="\\ufe20-\\ufe2f",Sde="\\u20d0-\\u20ff",Nde=wde+_de+Sde,Ade="\\ufe0e\\ufe0f",Ede="\\u200d",Cde=RegExp("["+Ede+bde+Nde+Ade+"]");function jde(t){return Cde.test(t)}var mM=jde;function Tde(t){return t.split("")}var Pde=Tde,gM="\\ud800-\\udfff",kde="\\u0300-\\u036f",Ide="\\ufe20-\\ufe2f",Ode="\\u20d0-\\u20ff",Rde=kde+Ide+Ode,$de="\\ufe0e\\ufe0f",Dde="["+gM+"]",hw="["+Rde+"]",pw="\\ud83c[\\udffb-\\udfff]",Mde="(?:"+hw+"|"+pw+")",yM="[^"+gM+"]",vM="(?:\\ud83c[\\udde6-\\uddff]){2}",xM="[\\ud800-\\udbff][\\udc00-\\udfff]",Lde="\\u200d",bM=Mde+"?",wM="["+$de+"]?",Fde="(?:"+Lde+"(?:"+[yM,vM,xM].join("|")+")"+wM+bM+")*",Vde=wM+bM+Fde,Bde="(?:"+[yM+hw+"?",hw,vM,xM,Dde].join("|")+")",Ude=RegExp(pw+"(?="+pw+")|"+Bde+Vde,"g");function zde(t){return t.match(Ude)||[]}var qde=zde,Wde=Pde,Gde=mM,Hde=qde;function Kde(t){return Gde(t)?Hde(t):Wde(t)}var Yde=Kde,Xde=xde,Qde=mM,Jde=Yde,Zde=cM;function efe(t){return function(e){e=Zde(e);var n=Qde(e)?Jde(e):void 0,r=n?n[0]:e.charAt(0),i=n?Xde(n,1).join(""):e.slice(1);return r[t]()+i}}var tfe=efe,nfe=tfe,rfe=nfe("toUpperCase"),ife=rfe;const ov=st(ife);function ht(t){return function(){return t}}const _M=Math.cos,eg=Math.sin,ei=Math.sqrt,tg=Math.PI,lv=2*tg,mw=Math.PI,gw=2*mw,Va=1e-6,sfe=gw-Va;function SM(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function afe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return SM;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class ofe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?SM:afe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,l=this._y1,c=r-e,u=i-n,d=a-e,f=l-n,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>Va)if(!(Math.abs(f*c-u*d)>Va)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-a,y=i-l,g=c*c+u*u,v=m*m+y*y,x=Math.sqrt(g),w=Math.sqrt(h),b=s*Math.tan((mw-Math.acos((g+h-v)/(2*x*w)))/2),N=b/w,A=b/x;Math.abs(N-1)>Va&&this._append`L${e+N*d},${n+N*f}`,this._append`A${s},${s},0,0,${+(f*m>d*y)},${this._x1=e+A*c},${this._y1=n+A*u}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),u=e+l,d=n+c,f=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Va||Math.abs(this._y1-d)>Va)&&this._append`L${u},${d}`,r&&(h<0&&(h=h%gw+gw),h>sfe?this._append`A${r},${r},0,1,${f},${e-l},${n-c}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:h>Va&&this._append`A${r},${r},0,${+(h>=mw)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function vN(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new ofe(e)}function xN(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function NM(t){this._context=t}NM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function cv(t){return new NM(t)}function AM(t){return t[0]}function EM(t){return t[1]}function CM(t,e){var n=ht(!0),r=null,i=cv,s=null,a=vN(l);t=typeof t=="function"?t:t===void 0?AM:ht(t),e=typeof e=="function"?e:e===void 0?EM:ht(e);function l(c){var u,d=(c=xN(c)).length,f,h=!1,m;for(r==null&&(s=i(m=a())),u=0;u<=d;++u)!(u<d&&n(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(f,u,c),+e(f,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:ht(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:ht(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:ht(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(s=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=s=null:s=i(r=c),l):r},l}function lp(t,e,n){var r=null,i=ht(!0),s=null,a=cv,l=null,c=vN(u);t=typeof t=="function"?t:t===void 0?AM:ht(+t),e=typeof e=="function"?e:ht(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?EM:ht(+n);function u(f){var h,m,y,g=(f=xN(f)).length,v,x=!1,w,b=new Array(g),N=new Array(g);for(s==null&&(l=a(w=c())),h=0;h<=g;++h){if(!(h<g&&i(v=f[h],h,f))===x)if(x=!x)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=h-1;y>=m;--y)l.point(b[y],N[y]);l.lineEnd(),l.areaEnd()}x&&(b[h]=+t(v,h,f),N[h]=+e(v,h,f),l.point(r?+r(v,h,f):b[h],n?+n(v,h,f):N[h]))}if(w)return l=null,w+""||null}function d(){return CM().defined(i).curve(a).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:ht(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:ht(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ht(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:ht(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:ht(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:ht(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:ht(!!f),u):i},u.curve=function(f){return arguments.length?(a=f,s!=null&&(l=a(s)),u):a},u.context=function(f){return arguments.length?(f==null?s=l=null:l=a(s=f),u):s},u}class jM{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function lfe(t){return new jM(t,!0)}function cfe(t){return new jM(t,!1)}const bN={draw(t,e){const n=ei(e/tg);t.moveTo(n,0),t.arc(0,0,n,0,lv)}},ufe={draw(t,e){const n=ei(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},TM=ei(1/3),dfe=TM*2,ffe={draw(t,e){const n=ei(e/dfe),r=n*TM;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},hfe={draw(t,e){const n=ei(e),r=-n/2;t.rect(r,r,n,n)}},pfe=.8908130915292852,PM=eg(tg/10)/eg(7*tg/10),mfe=eg(lv/10)*PM,gfe=-_M(lv/10)*PM,yfe={draw(t,e){const n=ei(e*pfe),r=mfe*n,i=gfe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const a=lv*s/5,l=_M(a),c=eg(a);t.lineTo(c*n,-l*n),t.lineTo(l*r-c*i,c*r+l*i)}t.closePath()}},Y0=ei(3),vfe={draw(t,e){const n=-ei(e/(Y0*3));t.moveTo(0,n*2),t.lineTo(-Y0*n,-n),t.lineTo(Y0*n,-n),t.closePath()}},yr=-.5,vr=ei(3)/2,yw=1/ei(12),xfe=(yw/2+1)*3,bfe={draw(t,e){const n=ei(e/xfe),r=n/2,i=n*yw,s=r,a=n*yw+n,l=-s,c=a;t.moveTo(r,i),t.lineTo(s,a),t.lineTo(l,c),t.lineTo(yr*r-vr*i,vr*r+yr*i),t.lineTo(yr*s-vr*a,vr*s+yr*a),t.lineTo(yr*l-vr*c,vr*l+yr*c),t.lineTo(yr*r+vr*i,yr*i-vr*r),t.lineTo(yr*s+vr*a,yr*a-vr*s),t.lineTo(yr*l+vr*c,yr*c-vr*l),t.closePath()}};function wfe(t,e){let n=null,r=vN(i);t=typeof t=="function"?t:ht(t||bN),e=typeof e=="function"?e:ht(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:ht(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:ht(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function ng(){}function rg(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function kM(t){this._context=t}kM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:rg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:rg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function _fe(t){return new kM(t)}function IM(t){this._context=t}IM.prototype={areaStart:ng,areaEnd:ng,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:rg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Sfe(t){return new IM(t)}function OM(t){this._context=t}OM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:rg(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Nfe(t){return new OM(t)}function RM(t){this._context=t}RM.prototype={areaStart:ng,areaEnd:ng,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Afe(t){return new RM(t)}function uT(t){return t<0?-1:1}function dT(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),l=(s*i+a*r)/(r+i);return(uT(s)+uT(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function fT(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function X0(t,e,n){var r=t._x0,i=t._y0,s=t._x1,a=t._y1,l=(s-r)/3;t._context.bezierCurveTo(r+l,i+l*e,s-l,a-l*n,s,a)}function ig(t){this._context=t}ig.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:X0(this,this._t0,fT(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,X0(this,fT(this,n=dT(this,t,e)),n);break;default:X0(this,this._t0,n=dT(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function $M(t){this._context=new DM(t)}($M.prototype=Object.create(ig.prototype)).point=function(t,e){ig.prototype.point.call(this,e,t)};function DM(t){this._context=t}DM.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function Efe(t){return new ig(t)}function Cfe(t){return new $M(t)}function MM(t){this._context=t}MM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=hT(t),i=hT(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function hT(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function jfe(t){return new MM(t)}function uv(t,e){this._context=t,this._t=e}uv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Tfe(t){return new uv(t,.5)}function Pfe(t){return new uv(t,0)}function kfe(t){return new uv(t,1)}function ic(t,e){if((a=t.length)>1)for(var n=1,r,i,s=t[e[0]],a,l=s.length;n<a;++n)for(i=s,s=t[e[n]],r=0;r<l;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function vw(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Ife(t,e){return t[e]}function Ofe(t){const e=[];return e.key=t,e}function Rfe(){var t=ht([]),e=vw,n=ic,r=Ife;function i(s){var a=Array.from(t.apply(this,arguments),Ofe),l,c=a.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(a[l][u]=[0,+r(f,a[l].key,u,s)]).data=f;for(l=0,d=xN(e(a));l<c;++l)a[d[l]].index=l;return n(a,d),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:ht(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:ht(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?vw:typeof s=="function"?s:ht(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??ic,i):n},i}function $fe(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,a;i<s;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}ic(t,e)}}function Dfe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var a=0,l=0;a<i;++a)l+=t[a][n][1]||0;r[n][1]+=r[n][0]=-l/2}ic(t,e)}}function Mfe(t,e){if(!(!((a=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,a;r<s;++r){for(var l=0,c=0,u=0;l<a;++l){for(var d=t[e[l]],f=d[r][1]||0,h=d[r-1][1]||0,m=(f-h)/2,y=0;y<l;++y){var g=t[e[y]],v=g[r][1]||0,x=g[r-1][1]||0;m+=v-x}c+=f,u+=m*f}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,ic(t,e)}}function lf(t){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(t)}var Lfe=["type","size","sizeType"];function xw(){return xw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xw.apply(this,arguments)}function pT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function mT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pT(Object(n),!0).forEach(function(r){Ffe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ffe(t,e,n){return e=Vfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vfe(t){var e=Bfe(t,"string");return lf(e)=="symbol"?e:e+""}function Bfe(t,e){if(lf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ufe(t,e){if(t==null)return{};var n=zfe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function zfe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var LM={symbolCircle:bN,symbolCross:ufe,symbolDiamond:ffe,symbolSquare:hfe,symbolStar:yfe,symbolTriangle:vfe,symbolWye:bfe},qfe=Math.PI/180,Wfe=function(e){var n="symbol".concat(ov(e));return LM[n]||bN},Gfe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*qfe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Hfe=function(e,n){LM["symbol".concat(ov(e))]=n},wN=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,a=e.sizeType,l=a===void 0?"area":a,c=Ufe(e,Lfe),u=mT(mT({},c),{},{type:r,size:s,sizeType:l}),d=function(){var v=Wfe(r),x=wfe().type(v).size(Gfe(s,l,r));return x()},f=u.className,h=u.cx,m=u.cy,y=be(u,!0);return h===+h&&m===+m&&s===+s?L.createElement("path",xw({},y,{className:Me("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:d()})):null};wN.registerSymbol=Hfe;function sc(t){"@babel/helpers - typeof";return sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sc(t)}function bw(){return bw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bw.apply(this,arguments)}function gT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kfe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gT(Object(n),!0).forEach(function(r){cf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xfe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,VM(r.key),r)}}function Qfe(t,e,n){return e&&Xfe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Jfe(t,e,n){return e=sg(e),Zfe(t,FM()?Reflect.construct(e,n||[],sg(t).constructor):e.apply(t,n))}function Zfe(t,e){if(e&&(sc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ehe(t)}function ehe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function FM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FM=function(){return!!t})()}function sg(t){return sg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},sg(t)}function the(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ww(t,e)}function ww(t,e){return ww=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ww(t,e)}function cf(t,e,n){return e=VM(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VM(t){var e=nhe(t,"string");return sc(e)=="symbol"?e:e+""}function nhe(t,e){if(sc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var xr=32,_N=function(t){function e(){return Yfe(this,e),Jfe(this,e,arguments)}return the(e,t),Qfe(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,s=xr/2,a=xr/6,l=xr/3,c=r.inactive?i:r.color;if(r.type==="plainline")return L.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:xr,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return L.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(xr,"M").concat(2*l,",").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return L.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(xr/8,"h").concat(xr,"v").concat(xr*3/4,"h").concat(-xr,"z"),className:"recharts-legend-icon"});if(L.isValidElement(r.legendIcon)){var u=Kfe({},r);return delete u.legendIcon,L.cloneElement(r.legendIcon,u)}return L.createElement(wN,{fill:c,cx:s,cy:s,size:xr,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,s=i.payload,a=i.iconSize,l=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:xr,height:xr},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,y){var g=m.formatter||c,v=Me(cf(cf({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",m.inactive));if(m.type==="none")return null;var x=je(m.value)?null:m.value;Kr(!je(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var w=m.inactive?u:m.color;return L.createElement("li",bw({className:v,style:f,key:"legend-item-".concat(y)},Co(r.props,m,y)),L.createElement(dw,{width:a,height:a,viewBox:d,style:h},r.renderIcon(m)),L.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},g?g(x,m,y):x))})}},{key:"render",value:function(){var r=this.props,i=r.payload,s=r.layout,a=r.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?a:"left"};return L.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(k.PureComponent);cf(_N,"displayName","Legend");cf(_N,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var rhe=Ky;function ihe(){this.__data__=new rhe,this.size=0}var she=ihe;function ahe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var ohe=ahe;function lhe(t){return this.__data__.get(t)}var che=lhe;function uhe(t){return this.__data__.has(t)}var dhe=uhe,fhe=Ky,hhe=cN,phe=uN,mhe=200;function ghe(t,e){var n=this.__data__;if(n instanceof fhe){var r=n.__data__;if(!hhe||r.length<mhe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new phe(r)}return n.set(t,e),this.size=n.size,this}var yhe=ghe,vhe=Ky,xhe=she,bhe=ohe,whe=che,_he=dhe,She=yhe;function Jc(t){var e=this.__data__=new vhe(t);this.size=e.size}Jc.prototype.clear=xhe;Jc.prototype.delete=bhe;Jc.prototype.get=whe;Jc.prototype.has=_he;Jc.prototype.set=She;var BM=Jc,Nhe="__lodash_hash_undefined__";function Ahe(t){return this.__data__.set(t,Nhe),this}var Ehe=Ahe;function Che(t){return this.__data__.has(t)}var jhe=Che,The=uN,Phe=Ehe,khe=jhe;function ag(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new The;++e<n;)this.add(t[e])}ag.prototype.add=ag.prototype.push=Phe;ag.prototype.has=khe;var UM=ag;function Ihe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var zM=Ihe;function Ohe(t,e){return t.has(e)}var qM=Ohe,Rhe=UM,$he=zM,Dhe=qM,Mhe=1,Lhe=2;function Fhe(t,e,n,r,i,s){var a=n&Mhe,l=t.length,c=e.length;if(l!=c&&!(a&&c>l))return!1;var u=s.get(t),d=s.get(e);if(u&&d)return u==e&&d==t;var f=-1,h=!0,m=n&Lhe?new Rhe:void 0;for(s.set(t,e),s.set(e,t);++f<l;){var y=t[f],g=e[f];if(r)var v=a?r(g,y,f,e,t,s):r(y,g,f,t,e,s);if(v!==void 0){if(v)continue;h=!1;break}if(m){if(!$he(e,function(x,w){if(!Dhe(m,w)&&(y===x||i(y,x,n,r,s)))return m.push(w)})){h=!1;break}}else if(!(y===g||i(y,g,n,r,s))){h=!1;break}}return s.delete(t),s.delete(e),h}var WM=Fhe,Vhe=Ei,Bhe=Vhe.Uint8Array,Uhe=Bhe;function zhe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var qhe=zhe;function Whe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var SN=Whe,yT=dh,vT=Uhe,Ghe=lN,Hhe=WM,Khe=qhe,Yhe=SN,Xhe=1,Qhe=2,Jhe="[object Boolean]",Zhe="[object Date]",epe="[object Error]",tpe="[object Map]",npe="[object Number]",rpe="[object RegExp]",ipe="[object Set]",spe="[object String]",ape="[object Symbol]",ope="[object ArrayBuffer]",lpe="[object DataView]",xT=yT?yT.prototype:void 0,Q0=xT?xT.valueOf:void 0;function cpe(t,e,n,r,i,s,a){switch(n){case lpe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ope:return!(t.byteLength!=e.byteLength||!s(new vT(t),new vT(e)));case Jhe:case Zhe:case npe:return Ghe(+t,+e);case epe:return t.name==e.name&&t.message==e.message;case rpe:case spe:return t==e+"";case tpe:var l=Khe;case ipe:var c=r&Xhe;if(l||(l=Yhe),t.size!=e.size&&!c)return!1;var u=a.get(t);if(u)return u==e;r|=Qhe,a.set(t,e);var d=Hhe(l(t),l(e),r,i,s,a);return a.delete(t),d;case ape:if(Q0)return Q0.call(t)==Q0.call(e)}return!1}var upe=cpe;function dpe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var GM=dpe,fpe=GM,hpe=Jn;function ppe(t,e,n){var r=e(t);return hpe(t)?r:fpe(r,n(t))}var mpe=ppe;function gpe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var a=t[n];e(a,n,t)&&(s[i++]=a)}return s}var ype=gpe;function vpe(){return[]}var xpe=vpe,bpe=ype,wpe=xpe,_pe=Object.prototype,Spe=_pe.propertyIsEnumerable,bT=Object.getOwnPropertySymbols,Npe=bT?function(t){return t==null?[]:(t=Object(t),bpe(bT(t),function(e){return Spe.call(t,e)}))}:wpe,Ape=Npe;function Epe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Cpe=Epe,jpe=bs,Tpe=ws,Ppe="[object Arguments]";function kpe(t){return Tpe(t)&&jpe(t)==Ppe}var Ipe=kpe,wT=Ipe,Ope=ws,HM=Object.prototype,Rpe=HM.hasOwnProperty,$pe=HM.propertyIsEnumerable,Dpe=wT(function(){return arguments}())?wT:function(t){return Ope(t)&&Rpe.call(t,"callee")&&!$pe.call(t,"callee")},NN=Dpe,og={exports:{}};function Mpe(){return!1}var Lpe=Mpe;og.exports;(function(t,e){var n=Ei,r=Lpe,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,l=a?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;t.exports=u})(og,og.exports);var KM=og.exports,Fpe=9007199254740991,Vpe=/^(?:0|[1-9]\d*)$/;function Bpe(t,e){var n=typeof t;return e=e??Fpe,!!e&&(n=="number"||n!="symbol"&&Vpe.test(t))&&t>-1&&t%1==0&&t<e}var AN=Bpe,Upe=9007199254740991;function zpe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Upe}var EN=zpe,qpe=bs,Wpe=EN,Gpe=ws,Hpe="[object Arguments]",Kpe="[object Array]",Ype="[object Boolean]",Xpe="[object Date]",Qpe="[object Error]",Jpe="[object Function]",Zpe="[object Map]",eme="[object Number]",tme="[object Object]",nme="[object RegExp]",rme="[object Set]",ime="[object String]",sme="[object WeakMap]",ame="[object ArrayBuffer]",ome="[object DataView]",lme="[object Float32Array]",cme="[object Float64Array]",ume="[object Int8Array]",dme="[object Int16Array]",fme="[object Int32Array]",hme="[object Uint8Array]",pme="[object Uint8ClampedArray]",mme="[object Uint16Array]",gme="[object Uint32Array]",xt={};xt[lme]=xt[cme]=xt[ume]=xt[dme]=xt[fme]=xt[hme]=xt[pme]=xt[mme]=xt[gme]=!0;xt[Hpe]=xt[Kpe]=xt[ame]=xt[Ype]=xt[ome]=xt[Xpe]=xt[Qpe]=xt[Jpe]=xt[Zpe]=xt[eme]=xt[tme]=xt[nme]=xt[rme]=xt[ime]=xt[sme]=!1;function yme(t){return Gpe(t)&&Wpe(t.length)&&!!xt[qpe(t)]}var vme=yme;function xme(t){return function(e){return t(e)}}var YM=xme,lg={exports:{}};lg.exports;(function(t,e){var n=rM,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s&&n.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();t.exports=l})(lg,lg.exports);var bme=lg.exports,wme=vme,_me=YM,_T=bme,ST=_T&&_T.isTypedArray,Sme=ST?_me(ST):wme,XM=Sme,Nme=Cpe,Ame=NN,Eme=Jn,Cme=KM,jme=AN,Tme=XM,Pme=Object.prototype,kme=Pme.hasOwnProperty;function Ime(t,e){var n=Eme(t),r=!n&&Ame(t),i=!n&&!r&&Cme(t),s=!n&&!r&&!i&&Tme(t),a=n||r||i||s,l=a?Nme(t.length,String):[],c=l.length;for(var u in t)(e||kme.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||jme(u,c)))&&l.push(u);return l}var Ome=Ime,Rme=Object.prototype;function $me(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Rme;return t===n}var Dme=$me;function Mme(t,e){return function(n){return t(e(n))}}var QM=Mme,Lme=QM,Fme=Lme(Object.keys,Object),Vme=Fme,Bme=Dme,Ume=Vme,zme=Object.prototype,qme=zme.hasOwnProperty;function Wme(t){if(!Bme(t))return Ume(t);var e=[];for(var n in Object(t))qme.call(t,n)&&n!="constructor"&&e.push(n);return e}var Gme=Wme,Hme=oN,Kme=EN;function Yme(t){return t!=null&&Kme(t.length)&&!Hme(t)}var fh=Yme,Xme=Ome,Qme=Gme,Jme=fh;function Zme(t){return Jme(t)?Xme(t):Qme(t)}var dv=Zme,ege=mpe,tge=Ape,nge=dv;function rge(t){return ege(t,nge,tge)}var ige=rge,NT=ige,sge=1,age=Object.prototype,oge=age.hasOwnProperty;function lge(t,e,n,r,i,s){var a=n&sge,l=NT(t),c=l.length,u=NT(e),d=u.length;if(c!=d&&!a)return!1;for(var f=c;f--;){var h=l[f];if(!(a?h in e:oge.call(e,h)))return!1}var m=s.get(t),y=s.get(e);if(m&&y)return m==e&&y==t;var g=!0;s.set(t,e),s.set(e,t);for(var v=a;++f<c;){h=l[f];var x=t[h],w=e[h];if(r)var b=a?r(w,x,h,e,t,s):r(x,w,h,t,e,s);if(!(b===void 0?x===w||i(x,w,n,r,s):b)){g=!1;break}v||(v=h=="constructor")}if(g&&!v){var N=t.constructor,A=e.constructor;N!=A&&"constructor"in t&&"constructor"in e&&!(typeof N=="function"&&N instanceof N&&typeof A=="function"&&A instanceof A)&&(g=!1)}return s.delete(t),s.delete(e),g}var cge=lge,uge=Lo,dge=Ei,fge=uge(dge,"DataView"),hge=fge,pge=Lo,mge=Ei,gge=pge(mge,"Promise"),yge=gge,vge=Lo,xge=Ei,bge=vge(xge,"Set"),JM=bge,wge=Lo,_ge=Ei,Sge=wge(_ge,"WeakMap"),Nge=Sge,_w=hge,Sw=cN,Nw=yge,Aw=JM,Ew=Nge,ZM=bs,Zc=sM,AT="[object Map]",Age="[object Object]",ET="[object Promise]",CT="[object Set]",jT="[object WeakMap]",TT="[object DataView]",Ege=Zc(_w),Cge=Zc(Sw),jge=Zc(Nw),Tge=Zc(Aw),Pge=Zc(Ew),Ba=ZM;(_w&&Ba(new _w(new ArrayBuffer(1)))!=TT||Sw&&Ba(new Sw)!=AT||Nw&&Ba(Nw.resolve())!=ET||Aw&&Ba(new Aw)!=CT||Ew&&Ba(new Ew)!=jT)&&(Ba=function(t){var e=ZM(t),n=e==Age?t.constructor:void 0,r=n?Zc(n):"";if(r)switch(r){case Ege:return TT;case Cge:return AT;case jge:return ET;case Tge:return CT;case Pge:return jT}return e});var kge=Ba,J0=BM,Ige=WM,Oge=upe,Rge=cge,PT=kge,kT=Jn,IT=KM,$ge=XM,Dge=1,OT="[object Arguments]",RT="[object Array]",cp="[object Object]",Mge=Object.prototype,$T=Mge.hasOwnProperty;function Lge(t,e,n,r,i,s){var a=kT(t),l=kT(e),c=a?RT:PT(t),u=l?RT:PT(e);c=c==OT?cp:c,u=u==OT?cp:u;var d=c==cp,f=u==cp,h=c==u;if(h&&IT(t)){if(!IT(e))return!1;a=!0,d=!1}if(h&&!d)return s||(s=new J0),a||$ge(t)?Ige(t,e,n,r,i,s):Oge(t,e,c,n,r,i,s);if(!(n&Dge)){var m=d&&$T.call(t,"__wrapped__"),y=f&&$T.call(e,"__wrapped__");if(m||y){var g=m?t.value():t,v=y?e.value():e;return s||(s=new J0),i(g,v,n,r,s)}}return h?(s||(s=new J0),Rge(t,e,n,r,i,s)):!1}var Fge=Lge,Vge=Fge,DT=ws;function eL(t,e,n,r,i){return t===e?!0:t==null||e==null||!DT(t)&&!DT(e)?t!==t&&e!==e:Vge(t,e,n,r,eL,i)}var CN=eL,Bge=BM,Uge=CN,zge=1,qge=2;function Wge(t,e,n,r){var i=n.length,s=i,a=!r;if(t==null)return!s;for(t=Object(t);i--;){var l=n[i];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<s;){l=n[i];var c=l[0],u=t[c],d=l[1];if(a&&l[2]){if(u===void 0&&!(c in t))return!1}else{var f=new Bge;if(r)var h=r(u,d,c,t,e,f);if(!(h===void 0?Uge(d,u,zge|qge,r,f):h))return!1}}return!0}var Gge=Wge,Hge=Na;function Kge(t){return t===t&&!Hge(t)}var tL=Kge,Yge=tL,Xge=dv;function Qge(t){for(var e=Xge(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Yge(i)]}return e}var Jge=Qge;function Zge(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var nL=Zge,eye=Gge,tye=Jge,nye=nL;function rye(t){var e=tye(t);return e.length==1&&e[0][2]?nye(e[0][0],e[0][1]):function(n){return n===t||eye(n,t,e)}}var iye=rye;function sye(t,e){return t!=null&&e in Object(t)}var aye=sye,oye=uM,lye=NN,cye=Jn,uye=AN,dye=EN,fye=Xy;function hye(t,e,n){e=oye(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var a=fye(e[r]);if(!(s=t!=null&&n(t,a)))break;t=t[a]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&dye(i)&&uye(a,i)&&(cye(t)||lye(t)))}var pye=hye,mye=aye,gye=pye;function yye(t,e){return t!=null&&gye(t,e,mye)}var vye=yye,xye=CN,bye=dM,wye=vye,_ye=aN,Sye=tL,Nye=nL,Aye=Xy,Eye=1,Cye=2;function jye(t,e){return _ye(t)&&Sye(e)?Nye(Aye(t),e):function(n){var r=bye(n,t);return r===void 0&&r===e?wye(n,t):xye(e,r,Eye|Cye)}}var Tye=jye;function Pye(t){return t}var eu=Pye;function kye(t){return function(e){return e==null?void 0:e[t]}}var Iye=kye,Oye=hN;function Rye(t){return function(e){return Oye(e,t)}}var $ye=Rye,Dye=Iye,Mye=$ye,Lye=aN,Fye=Xy;function Vye(t){return Lye(t)?Dye(Fye(t)):Mye(t)}var Bye=Vye,Uye=iye,zye=Tye,qye=eu,Wye=Jn,Gye=Bye;function Hye(t){return typeof t=="function"?t:t==null?qye:typeof t=="object"?Wye(t)?zye(t[0],t[1]):Uye(t):Gye(t)}var Ci=Hye;function Kye(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var rL=Kye;function Yye(t){return t!==t}var Xye=Yye;function Qye(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var Jye=Qye,Zye=rL,eve=Xye,tve=Jye;function nve(t,e,n){return e===e?tve(t,e,n):Zye(t,eve,n)}var rve=nve,ive=rve;function sve(t,e){var n=t==null?0:t.length;return!!n&&ive(t,e,0)>-1}var ave=sve;function ove(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var lve=ove;function cve(){}var uve=cve,Z0=JM,dve=uve,fve=SN,hve=1/0,pve=Z0&&1/fve(new Z0([,-0]))[1]==hve?function(t){return new Z0(t)}:dve,mve=pve,gve=UM,yve=ave,vve=lve,xve=qM,bve=mve,wve=SN,_ve=200;function Sve(t,e,n){var r=-1,i=yve,s=t.length,a=!0,l=[],c=l;if(n)a=!1,i=vve;else if(s>=_ve){var u=e?null:bve(t);if(u)return wve(u);a=!1,i=xve,c=new gve}else c=e?[]:l;e:for(;++r<s;){var d=t[r],f=e?e(d):d;if(d=n||d!==0?d:0,a&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;e&&c.push(f),l.push(d)}else i(c,f,n)||(c!==l&&c.push(f),l.push(d))}return l}var Nve=Sve,Ave=Ci,Eve=Nve;function Cve(t,e){return t&&t.length?Eve(t,Ave(e)):[]}var jve=Cve;const MT=st(jve);function iL(t,e,n){return e===!0?MT(t,n):je(e)?MT(t,e):t}function ac(t){"@babel/helpers - typeof";return ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ac(t)}var Tve=["ref"];function LT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $i(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LT(Object(n),!0).forEach(function(r){fv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function FT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,aL(r.key),r)}}function kve(t,e,n){return e&&FT(t.prototype,e),n&&FT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ive(t,e,n){return e=cg(e),Ove(t,sL()?Reflect.construct(e,n||[],cg(t).constructor):e.apply(t,n))}function Ove(t,e){if(e&&(ac(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rve(t)}function Rve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sL=function(){return!!t})()}function cg(t){return cg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},cg(t)}function $ve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cw(t,e)}function Cw(t,e){return Cw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Cw(t,e)}function fv(t,e,n){return e=aL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function aL(t){var e=Dve(t,"string");return ac(e)=="symbol"?e:e+""}function Dve(t,e){if(ac(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ac(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Mve(t,e){if(t==null)return{};var n=Lve(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Lve(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Fve(t){return t.value}function Vve(t,e){if(L.isValidElement(t))return L.cloneElement(t,e);if(typeof t=="function")return L.createElement(t,e);e.ref;var n=Mve(e,Tve);return L.createElement(_N,n)}var VT=1,ao=function(t){function e(){var n;Pve(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Ive(this,e,[].concat(i)),fv(n,"lastBoundingBox",{width:-1,height:-1}),n}return $ve(e,t),kve(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>VT||Math.abs(i.height-this.lastBoundingBox.height)>VT)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?$i({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,s=i.layout,a=i.align,l=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,f,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();f={left:((u||0)-m.width)/2}}else f=a==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();h={top:((d||0)-y.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return $i($i({},f),h)}},{key:"render",value:function(){var r=this,i=this.props,s=i.content,a=i.width,l=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,f=$i($i({position:"absolute",width:a||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return L.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){r.wrapperNode=m}},Vve(s,$i($i({},this.props),{},{payload:iL(d,u,Fve)})))}}],[{key:"getWithHeight",value:function(r,i){var s=$i($i({},this.defaultProps),r.props),a=s.layout;return a==="vertical"&&te(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])}(k.PureComponent);fv(ao,"displayName","Legend");fv(ao,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var BT=dh,Bve=NN,Uve=Jn,UT=BT?BT.isConcatSpreadable:void 0;function zve(t){return Uve(t)||Bve(t)||!!(UT&&t&&t[UT])}var qve=zve,Wve=GM,Gve=qve;function oL(t,e,n,r,i){var s=-1,a=t.length;for(n||(n=Gve),i||(i=[]);++s<a;){var l=t[s];e>0&&n(l)?e>1?oL(l,e-1,n,r,i):Wve(i,l):r||(i[i.length]=l)}return i}var lL=oL;function Hve(t){return function(e,n,r){for(var i=-1,s=Object(e),a=r(e),l=a.length;l--;){var c=a[t?l:++i];if(n(s[c],c,s)===!1)break}return e}}var Kve=Hve,Yve=Kve,Xve=Yve(),Qve=Xve,Jve=Qve,Zve=dv;function e0e(t,e){return t&&Jve(t,e,Zve)}var cL=e0e,t0e=fh;function n0e(t,e){return function(n,r){if(n==null)return n;if(!t0e(n))return t(n,r);for(var i=n.length,s=e?i:-1,a=Object(n);(e?s--:++s<i)&&r(a[s],s,a)!==!1;);return n}}var r0e=n0e,i0e=cL,s0e=r0e,a0e=s0e(i0e),jN=a0e,o0e=jN,l0e=fh;function c0e(t,e){var n=-1,r=l0e(t)?Array(t.length):[];return o0e(t,function(i,s,a){r[++n]=e(i,s,a)}),r}var uL=c0e;function u0e(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var d0e=u0e,zT=Wc;function f0e(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,s=zT(t),a=e!==void 0,l=e===null,c=e===e,u=zT(e);if(!l&&!u&&!s&&t>e||s&&a&&c&&!l&&!u||r&&a&&c||!n&&c||!i)return 1;if(!r&&!s&&!u&&t<e||u&&n&&i&&!r&&!s||l&&n&&i||!a&&i||!c)return-1}return 0}var h0e=f0e,p0e=h0e;function m0e(t,e,n){for(var r=-1,i=t.criteria,s=e.criteria,a=i.length,l=n.length;++r<a;){var c=p0e(i[r],s[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return t.index-e.index}var g0e=m0e,ex=fN,y0e=hN,v0e=Ci,x0e=uL,b0e=d0e,w0e=YM,_0e=g0e,S0e=eu,N0e=Jn;function A0e(t,e,n){e.length?e=ex(e,function(s){return N0e(s)?function(a){return y0e(a,s.length===1?s[0]:s)}:s}):e=[S0e];var r=-1;e=ex(e,w0e(v0e));var i=x0e(t,function(s,a,l){var c=ex(e,function(u){return u(s)});return{criteria:c,index:++r,value:s}});return b0e(i,function(s,a){return _0e(s,a,n)})}var E0e=A0e;function C0e(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var j0e=C0e,T0e=j0e,qT=Math.max;function P0e(t,e,n){return e=qT(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=qT(r.length-e,0),a=Array(s);++i<s;)a[i]=r[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=r[i];return l[e]=n(a),T0e(t,this,l)}}var k0e=P0e;function I0e(t){return function(){return t}}var O0e=I0e,R0e=Lo,$0e=function(){try{var t=R0e(Object,"defineProperty");return t({},"",{}),t}catch{}}(),dL=$0e,D0e=O0e,WT=dL,M0e=eu,L0e=WT?function(t,e){return WT(t,"toString",{configurable:!0,enumerable:!1,value:D0e(e),writable:!0})}:M0e,F0e=L0e,V0e=800,B0e=16,U0e=Date.now;function z0e(t){var e=0,n=0;return function(){var r=U0e(),i=B0e-(r-n);if(n=r,i>0){if(++e>=V0e)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var q0e=z0e,W0e=F0e,G0e=q0e,H0e=G0e(W0e),K0e=H0e,Y0e=eu,X0e=k0e,Q0e=K0e;function J0e(t,e){return Q0e(X0e(t,e,Y0e),t+"")}var Z0e=J0e,exe=lN,txe=fh,nxe=AN,rxe=Na;function ixe(t,e,n){if(!rxe(n))return!1;var r=typeof e;return(r=="number"?txe(n)&&nxe(e,n.length):r=="string"&&e in n)?exe(n[e],t):!1}var hv=ixe,sxe=lL,axe=E0e,oxe=Z0e,GT=hv,lxe=oxe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&GT(t,e[0],e[1])?e=[]:n>2&&GT(e[0],e[1],e[2])&&(e=[e[0]]),axe(t,sxe(e,1),[])}),cxe=lxe;const TN=st(cxe);function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}function jw(){return jw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jw.apply(this,arguments)}function uxe(t,e){return pxe(t)||hxe(t,e)||fxe(t,e)||dxe()}function dxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fxe(t,e){if(t){if(typeof t=="string")return HT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return HT(t,e)}}function HT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hxe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function pxe(t){if(Array.isArray(t))return t}function KT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KT(Object(n),!0).forEach(function(r){mxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mxe(t,e,n){return e=gxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gxe(t){var e=yxe(t,"string");return uf(e)=="symbol"?e:e+""}function yxe(t,e){if(uf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vxe(t){return Array.isArray(t)&&en(t[0])&&en(t[1])?t.join(" ~ "):t}var xxe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,a=e.itemStyle,l=a===void 0?{}:a,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,f=e.formatter,h=e.itemSorter,m=e.wrapperClassName,y=e.labelClassName,g=e.label,v=e.labelFormatter,x=e.accessibilityLayer,w=x===void 0?!1:x,b=function(){if(d&&d.length){var O={padding:0,margin:0},R=(h?TN(d,h):d).map(function(M,D){if(M.type==="none")return null;var B=tx({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},l),V=M.formatter||f||vxe,F=M.value,q=M.name,H=F,Z=q;if(V&&H!=null&&Z!=null){var Y=V(F,q,M,D,d);if(Array.isArray(Y)){var re=uxe(Y,2);H=re[0],Z=re[1]}else H=Y}return L.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:B},en(Z)?L.createElement("span",{className:"recharts-tooltip-item-name"},Z):null,en(Z)?L.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,L.createElement("span",{className:"recharts-tooltip-item-value"},H),L.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return L.createElement("ul",{className:"recharts-tooltip-item-list",style:O},R)}return null},N=tx({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),A=tx({margin:0},u),E=!Re(g),C=E?g:"",S=Me("recharts-default-tooltip",m),_=Me("recharts-tooltip-label",y);E&&v&&d!==void 0&&d!==null&&(C=v(g,d));var P=w?{role:"status","aria-live":"assertive"}:{};return L.createElement("div",jw({className:S,style:N},P),L.createElement("p",{className:_,style:A},L.isValidElement(C)?C:"".concat(C)),b())};function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function up(t,e,n){return e=bxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bxe(t){var e=wxe(t,"string");return df(e)=="symbol"?e:e+""}function wxe(t,e){if(df(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Iu="recharts-tooltip-wrapper",_xe={visibility:"hidden"};function Sxe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Me(Iu,up(up(up(up({},"".concat(Iu,"-right"),te(n)&&e&&te(e.x)&&n>=e.x),"".concat(Iu,"-left"),te(n)&&e&&te(e.x)&&n<e.x),"".concat(Iu,"-bottom"),te(r)&&e&&te(e.y)&&r>=e.y),"".concat(Iu,"-top"),te(r)&&e&&te(e.y)&&r<e.y))}function YT(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,s=t.position,a=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(s&&te(s[r]))return s[r];var d=n[r]-l-i,f=n[r]+i;if(e[r])return a[r]?d:f;if(a[r]){var h=d,m=c[r];return h<m?Math.max(f,c[r]):Math.max(d,c[r])}var y=f+l,g=c[r]+u;return y>g?Math.max(d,c[r]):Math.max(f,c[r])}function Nxe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Axe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,s=t.reverseDirection,a=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,u,d,f;return a.height>0&&a.width>0&&n?(d=YT({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:c,viewBoxDimension:c.width}),f=YT({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:c,viewBoxDimension:c.height}),u=Nxe({translateX:d,translateY:f,useTranslate3d:l})):u=_xe,{cssProperties:u,cssClasses:Sxe({translateX:d,translateY:f,coordinate:n})}}function oc(t){"@babel/helpers - typeof";return oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oc(t)}function XT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XT(Object(n),!0).forEach(function(r){Pw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Exe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cxe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hL(r.key),r)}}function jxe(t,e,n){return e&&Cxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Txe(t,e,n){return e=ug(e),Pxe(t,fL()?Reflect.construct(e,n||[],ug(t).constructor):e.apply(t,n))}function Pxe(t,e){if(e&&(oc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kxe(t)}function kxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fL=function(){return!!t})()}function ug(t){return ug=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ug(t)}function Ixe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tw(t,e)}function Tw(t,e){return Tw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Tw(t,e)}function Pw(t,e,n){return e=hL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hL(t){var e=Oxe(t,"string");return oc(e)=="symbol"?e:e+""}function Oxe(t,e){if(oc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(oc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var JT=1,Rxe=function(t){function e(){var n;Exe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Txe(this,e,[].concat(i)),Pw(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Pw(n,"handleKeyDown",function(a){if(a.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return Ixe(e,t),jxe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>JT||Math.abs(r.height-this.state.lastBoundingBox.height)>JT)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,m=i.offset,y=i.position,g=i.reverseDirection,v=i.useTranslate3d,x=i.viewBox,w=i.wrapperStyle,b=Axe({allowEscapeViewBox:a,coordinate:d,offsetTopLeft:m,position:y,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:x}),N=b.cssClasses,A=b.cssProperties,E=QT(QT({transition:h&&s?"transform ".concat(l,"ms ").concat(c):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&f?"visible":"hidden",position:"absolute",top:0,left:0},w);return L.createElement("div",{tabIndex:-1,className:N,style:E,ref:function(S){r.wrapperNode=S}},u)}}])}(k.PureComponent),$xe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Fo={isSsr:$xe()};function lc(t){"@babel/helpers - typeof";return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lc(t)}function ZT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZT(Object(n),!0).forEach(function(r){PN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Mxe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,mL(r.key),r)}}function Lxe(t,e,n){return e&&Mxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fxe(t,e,n){return e=dg(e),Vxe(t,pL()?Reflect.construct(e,n||[],dg(t).constructor):e.apply(t,n))}function Vxe(t,e){if(e&&(lc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bxe(t)}function Bxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pL=function(){return!!t})()}function dg(t){return dg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dg(t)}function Uxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kw(t,e)}function kw(t,e){return kw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},kw(t,e)}function PN(t,e,n){return e=mL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mL(t){var e=zxe(t,"string");return lc(e)=="symbol"?e:e+""}function zxe(t,e){if(lc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function qxe(t){return t.dataKey}function Wxe(t,e){return L.isValidElement(t)?L.cloneElement(t,e):typeof t=="function"?L.createElement(t,e):L.createElement(xxe,e)}var rr=function(t){function e(){return Dxe(this,e),Fxe(this,e,arguments)}return Uxe(e,t),Lxe(e,[{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,f=i.filterNull,h=i.isAnimationActive,m=i.offset,y=i.payload,g=i.payloadUniqBy,v=i.position,x=i.reverseDirection,w=i.useTranslate3d,b=i.viewBox,N=i.wrapperStyle,A=y??[];f&&A.length&&(A=iL(y.filter(function(C){return C.value!=null&&(C.hide!==!0||r.props.includeHidden)}),g,qxe));var E=A.length>0;return L.createElement(Rxe,{allowEscapeViewBox:a,animationDuration:l,animationEasing:c,isAnimationActive:h,active:s,coordinate:d,hasPayload:E,offset:m,position:v,reverseDirection:x,useTranslate3d:w,viewBox:b,wrapperStyle:N},Wxe(u,eP(eP({},this.props),{},{payload:A})))}}])}(k.PureComponent);PN(rr,"displayName","Tooltip");PN(rr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Fo.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Gxe=Ei,Hxe=function(){return Gxe.Date.now()},Kxe=Hxe,Yxe=/\s/;function Xxe(t){for(var e=t.length;e--&&Yxe.test(t.charAt(e)););return e}var Qxe=Xxe,Jxe=Qxe,Zxe=/^\s+/;function ebe(t){return t&&t.slice(0,Jxe(t)+1).replace(Zxe,"")}var tbe=ebe,nbe=tbe,tP=Na,rbe=Wc,nP=NaN,ibe=/^[-+]0x[0-9a-f]+$/i,sbe=/^0b[01]+$/i,abe=/^0o[0-7]+$/i,obe=parseInt;function lbe(t){if(typeof t=="number")return t;if(rbe(t))return nP;if(tP(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=tP(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=nbe(t);var n=sbe.test(t);return n||abe.test(t)?obe(t.slice(2),n?2:8):ibe.test(t)?nP:+t}var gL=lbe,cbe=Na,nx=Kxe,rP=gL,ube="Expected a function",dbe=Math.max,fbe=Math.min;function hbe(t,e,n){var r,i,s,a,l,c,u=0,d=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(ube);e=rP(e)||0,cbe(n)&&(d=!!n.leading,f="maxWait"in n,s=f?dbe(rP(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h);function m(E){var C=r,S=i;return r=i=void 0,u=E,a=t.apply(S,C),a}function y(E){return u=E,l=setTimeout(x,e),d?m(E):a}function g(E){var C=E-c,S=E-u,_=e-C;return f?fbe(_,s-S):_}function v(E){var C=E-c,S=E-u;return c===void 0||C>=e||C<0||f&&S>=s}function x(){var E=nx();if(v(E))return w(E);l=setTimeout(x,g(E))}function w(E){return l=void 0,h&&r?m(E):(r=i=void 0,a)}function b(){l!==void 0&&clearTimeout(l),u=0,r=c=i=l=void 0}function N(){return l===void 0?a:w(nx())}function A(){var E=nx(),C=v(E);if(r=arguments,i=this,c=E,C){if(l===void 0)return y(c);if(f)return clearTimeout(l),l=setTimeout(x,e),m(c)}return l===void 0&&(l=setTimeout(x,e)),a}return A.cancel=b,A.flush=N,A}var pbe=hbe,mbe=pbe,gbe=Na,ybe="Expected a function";function vbe(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(ybe);return gbe(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),mbe(t,e,{leading:r,maxWait:e,trailing:i})}var xbe=vbe;const yL=st(xbe);function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function iP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iP(Object(n),!0).forEach(function(r){bbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bbe(t,e,n){return e=wbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wbe(t){var e=_be(t,"string");return ff(e)=="symbol"?e:e+""}function _be(t,e){if(ff(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sbe(t,e){return Cbe(t)||Ebe(t,e)||Abe(t,e)||Nbe()}function Nbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Abe(t,e){if(t){if(typeof t=="string")return sP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sP(t,e)}}function sP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ebe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function Cbe(t){if(Array.isArray(t))return t}var fg=k.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,s=t.width,a=s===void 0?"100%":s,l=t.height,c=l===void 0?"100%":l,u=t.minWidth,d=u===void 0?0:u,f=t.minHeight,h=t.maxHeight,m=t.children,y=t.debounce,g=y===void 0?0:y,v=t.id,x=t.className,w=t.onResize,b=t.style,N=b===void 0?{}:b,A=k.useRef(null),E=k.useRef();E.current=w,k.useImperativeHandle(e,function(){return Object.defineProperty(A.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),A.current},configurable:!0})});var C=k.useState({containerWidth:i.width,containerHeight:i.height}),S=Sbe(C,2),_=S[0],P=S[1],T=k.useCallback(function(R,M){P(function(D){var B=Math.round(R),V=Math.round(M);return D.containerWidth===B&&D.containerHeight===V?D:{containerWidth:B,containerHeight:V}})},[]);k.useEffect(function(){var R=function(q){var H,Z=q[0].contentRect,Y=Z.width,re=Z.height;T(Y,re),(H=E.current)===null||H===void 0||H.call(E,Y,re)};g>0&&(R=yL(R,g,{trailing:!0,leading:!1}));var M=new ResizeObserver(R),D=A.current.getBoundingClientRect(),B=D.width,V=D.height;return T(B,V),M.observe(A.current),function(){M.disconnect()}},[T,g]);var O=k.useMemo(function(){var R=_.containerWidth,M=_.containerHeight;if(R<0||M<0)return null;Kr(Ya(a)||Ya(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,c),Kr(!n||n>0,"The aspect(%s) must be greater than zero.",n);var D=Ya(a)?R:a,B=Ya(c)?M:c;n&&n>0&&(D?B=D/n:B&&(D=B*n),h&&B>h&&(B=h)),Kr(D>0||B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,B,a,c,d,f,n);var V=!Array.isArray(m)&&Qi(m.type).endsWith("Chart");return L.Children.map(m,function(F){return L.isValidElement(F)?k.cloneElement(F,dp({width:D,height:B},V?{style:dp({height:"100%",width:"100%",maxHeight:B,maxWidth:D},F.props.style)}:{})):F})},[n,m,c,h,f,d,_,a]);return L.createElement("div",{id:v?"".concat(v):void 0,className:Me("recharts-responsive-container",x),style:dp(dp({},N),{},{width:a,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:A},O)}),pv=function(e){return null};pv.displayName="Cell";function hf(t){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hf(t)}function aP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Iw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aP(Object(n),!0).forEach(function(r){jbe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jbe(t,e,n){return e=Tbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tbe(t){var e=Pbe(t,"string");return hf(e)=="symbol"?e:e+""}function Pbe(t,e){if(hf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nl={widthCache:{},cacheCount:0},kbe=2e3,Ibe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},oP="recharts_measurement_span";function Obe(t){var e=Iw({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var yd=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Fo.isSsr)return{width:0,height:0};var r=Obe(n),i=JSON.stringify({text:e,copyStyle:r});if(nl.widthCache[i])return nl.widthCache[i];try{var s=document.getElementById(oP);s||(s=document.createElement("span"),s.setAttribute("id",oP),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var a=Iw(Iw({},Ibe),r);Object.assign(s.style,a),s.textContent="".concat(e);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return nl.widthCache[i]=c,++nl.cacheCount>kbe&&(nl.cacheCount=0,nl.widthCache={}),c}catch{return{width:0,height:0}}},Rbe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(t)}function hg(t,e){return Lbe(t)||Mbe(t,e)||Dbe(t,e)||$be()}function $be(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dbe(t,e){if(t){if(typeof t=="string")return lP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lP(t,e)}}function lP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function Lbe(t){if(Array.isArray(t))return t}function Fbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bbe(r.key),r)}}function Vbe(t,e,n){return e&&cP(t.prototype,e),n&&cP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Bbe(t){var e=Ube(t,"string");return pf(e)=="symbol"?e:e+""}function Ube(t,e){if(pf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var uP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,dP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zbe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,qbe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,vL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Wbe=Object.keys(vL),wl="NaN";function Gbe(t,e){return t*vL[e]}var fp=function(){function t(e,n){Fbe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!zbe.test(n)&&(this.num=NaN,this.unit=""),Wbe.includes(n)&&(this.num=Gbe(e,n),this.unit="px")}return Vbe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=qbe.exec(n))!==null&&r!==void 0?r:[],s=hg(i,3),a=s[1],l=s[2];return new t(parseFloat(a),l??"")}}])}();function xL(t){if(t.includes(wl))return wl;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=uP.exec(e))!==null&&n!==void 0?n:[],i=hg(r,4),s=i[1],a=i[2],l=i[3],c=fp.parse(s??""),u=fp.parse(l??""),d=a==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return wl;e=e.replace(uP,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=dP.exec(e))!==null&&f!==void 0?f:[],m=hg(h,4),y=m[1],g=m[2],v=m[3],x=fp.parse(y??""),w=fp.parse(v??""),b=g==="+"?x.add(w):x.subtract(w);if(b.isNaN())return wl;e=e.replace(dP,b.toString())}return e}var fP=/\(([^()]*)\)/;function Hbe(t){for(var e=t;e.includes("(");){var n=fP.exec(e),r=hg(n,2),i=r[1];e=e.replace(fP,xL(i))}return e}function Kbe(t){var e=t.replace(/\s+/g,"");return e=Hbe(e),e=xL(e),e}function Ybe(t){try{return Kbe(t)}catch{return wl}}function rx(t){var e=Ybe(t.slice(5,-1));return e===wl?"":e}var Xbe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Qbe=["dx","dy","angle","className","breakAll"];function Ow(){return Ow=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ow.apply(this,arguments)}function hP(t,e){if(t==null)return{};var n=Jbe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Jbe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function pP(t,e){return nwe(t)||twe(t,e)||ewe(t,e)||Zbe()}function Zbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ewe(t,e){if(t){if(typeof t=="string")return mP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mP(t,e)}}function mP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function twe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function nwe(t){if(Array.isArray(t))return t}var bL=/[ \f\n\r\t\v\u2028\u2029]+/,wL=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var s=[];Re(n)||(r?s=n.toString().split(""):s=n.toString().split(bL));var a=s.map(function(c){return{word:c,width:yd(c,i).width}}),l=r?0:yd("",i).width;return{wordsWithComputedWidth:a,spaceWidth:l}}catch{return null}},rwe=function(e,n,r,i,s){var a=e.maxLines,l=e.children,c=e.style,u=e.breakAll,d=te(a),f=l,h=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce(function(B,V){var F=V.word,q=V.width,H=B[B.length-1];if(H&&(i==null||s||H.width+q+r<Number(i)))H.words.push(F),H.width+=q+r;else{var Z={words:[F],width:q};B.push(Z)}return B},[])},m=h(n),y=function(D){return D.reduce(function(B,V){return B.width>V.width?B:V})};if(!d)return m;for(var g="",v=function(D){var B=f.slice(0,D),V=wL({breakAll:u,style:c,children:B+g}).wordsWithComputedWidth,F=h(V),q=F.length>a||y(F).width>Number(i);return[q,F]},x=0,w=f.length-1,b=0,N;x<=w&&b<=f.length-1;){var A=Math.floor((x+w)/2),E=A-1,C=v(E),S=pP(C,2),_=S[0],P=S[1],T=v(A),O=pP(T,1),R=O[0];if(!_&&!R&&(x=A+1),_&&R&&(w=A-1),!_&&R){N=P;break}b++}return N||m},gP=function(e){var n=Re(e)?[]:e.toString().split(bL);return[{words:n}]},iwe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,s=e.style,a=e.breakAll,l=e.maxLines;if((n||r)&&!Fo.isSsr){var c,u,d=wL({breakAll:a,children:i,style:s});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return gP(i);return rwe({breakAll:a,children:i,maxLines:l,style:s},c,u,n,r)}return gP(i)},yP="#808080",jo=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,a=e.lineHeight,l=a===void 0?"1em":a,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,f=d===void 0?!1:d,h=e.textAnchor,m=h===void 0?"start":h,y=e.verticalAnchor,g=y===void 0?"end":y,v=e.fill,x=v===void 0?yP:v,w=hP(e,Xbe),b=k.useMemo(function(){return iwe({breakAll:w.breakAll,children:w.children,maxLines:w.maxLines,scaleToFit:f,style:w.style,width:w.width})},[w.breakAll,w.children,w.maxLines,f,w.style,w.width]),N=w.dx,A=w.dy,E=w.angle,C=w.className,S=w.breakAll,_=hP(w,Qbe);if(!en(r)||!en(s))return null;var P=r+(te(N)?N:0),T=s+(te(A)?A:0),O;switch(g){case"start":O=rx("calc(".concat(u,")"));break;case"middle":O=rx("calc(".concat((b.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:O=rx("calc(".concat(b.length-1," * -").concat(l,")"));break}var R=[];if(f){var M=b[0].width,D=w.width;R.push("scale(".concat((te(D)?D/M:1)/M,")"))}return E&&R.push("rotate(".concat(E,", ").concat(P,", ").concat(T,")")),R.length&&(_.transform=R.join(" ")),L.createElement("text",Ow({},be(_,!0),{x:P,y:T,className:Me("recharts-text",C),textAnchor:m,fill:x.includes("url")?yP:x}),b.map(function(B,V){var F=B.words.join(S?"":" ");return L.createElement("tspan",{x:P,dy:V===0?O:l,key:"".concat(F,"-").concat(V)},F)}))};function ua(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function swe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kN(t){let e,n,r;t.length!==2?(e=ua,n=(l,c)=>ua(t(l),c),r=(l,c)=>t(l)-c):(e=t===ua||t===swe?t:awe,n=t,r=t);function i(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function a(l,c,u=0,d=l.length){const f=i(l,c,u,d-1);return f>u&&r(l[f-1],c)>-r(l[f],c)?f-1:f}return{left:i,center:a,right:s}}function awe(){return 0}function _L(t){return t===null?NaN:+t}function*owe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const lwe=kN(ua),hh=lwe.right;kN(_L).center;class vP extends Map{constructor(e,n=dwe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(xP(this,e))}has(e){return super.has(xP(this,e))}set(e,n){return super.set(cwe(this,e),n)}delete(e){return super.delete(uwe(this,e))}}function xP({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function cwe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function uwe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function dwe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function fwe(t=ua){if(t===ua)return SL;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function SL(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const hwe=Math.sqrt(50),pwe=Math.sqrt(10),mwe=Math.sqrt(2);function pg(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=hwe?10:s>=pwe?5:s>=mwe?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/a,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*a,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=n&&n<2?pg(t,e,n*2):[l,c,u]}function Rw(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?pg(e,t,n):pg(t,e,n);if(!(s>=i))return[];const l=s-i+1,c=new Array(l);if(r)if(a<0)for(let u=0;u<l;++u)c[u]=(s-u)/-a;else for(let u=0;u<l;++u)c[u]=(s-u)*a;else if(a<0)for(let u=0;u<l;++u)c[u]=(i+u)/-a;else for(let u=0;u<l;++u)c[u]=(i+u)*a;return c}function $w(t,e,n){return e=+e,t=+t,n=+n,pg(t,e,n)[2]}function Dw(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?$w(e,t,n):$w(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function bP(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function wP(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function NL(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?SL:fwe(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(e-u*f/c+h)),y=Math.min(r,Math.floor(e+(c-u)*f/c+h));NL(t,e,m,y,i)}const s=t[e];let a=n,l=r;for(Ou(t,n,e),i(t[r],s)>0&&Ou(t,n,r);a<l;){for(Ou(t,a,l),++a,--l;i(t[a],s)<0;)++a;for(;i(t[l],s)>0;)--l}i(t[n],s)===0?Ou(t,n,l):(++l,Ou(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function Ou(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function gwe(t,e,n){if(t=Float64Array.from(owe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return wP(t);if(e>=1)return bP(t);var r,i=(r-1)*e,s=Math.floor(i),a=bP(NL(t,s).subarray(0,s+1)),l=wP(t.subarray(s+1));return a+(l-a)*(i-s)}}function ywe(t,e,n=_L){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),a=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return a+(l-a)*(i-s)}}function vwe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function $r(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function _s(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Mw=Symbol("implicit");function IN(){var t=new vP,e=[],n=[],r=Mw;function i(s){let a=t.get(s);if(a===void 0){if(r!==Mw)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new vP;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return IN(e,n).unknown(r)},$r.apply(i,arguments),i}function mf(){var t=IN().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var h=e().length,m=i<r,y=m?i:r,g=m?r:i;s=(g-y)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),y+=(g-y-s*(h-c))*d,a=s*(1-c),l&&(y=Math.round(y),a=Math.round(a));var v=vwe(h).map(function(x){return y+s*x});return n(m?v.reverse():v)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,l=!0,f()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(h){return arguments.length?(l=!!h,f()):l},t.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},t.copy=function(){return mf(e(),[r,i]).round(l).paddingInner(c).paddingOuter(u).align(d)},$r.apply(f(),arguments)}function AL(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return AL(e())},t}function vd(){return AL(mf.apply(null,arguments).paddingInner(1))}function ON(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function EL(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ph(){}var gf=.7,mg=1/gf,Ll="\\s*([+-]?\\d+)\\s*",yf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xwe=/^#([0-9a-f]{3,8})$/,bwe=new RegExp(`^rgb\\(${Ll},${Ll},${Ll}\\)$`),wwe=new RegExp(`^rgb\\(${yi},${yi},${yi}\\)$`),_we=new RegExp(`^rgba\\(${Ll},${Ll},${Ll},${yf}\\)$`),Swe=new RegExp(`^rgba\\(${yi},${yi},${yi},${yf}\\)$`),Nwe=new RegExp(`^hsl\\(${yf},${yi},${yi}\\)$`),Awe=new RegExp(`^hsla\\(${yf},${yi},${yi},${yf}\\)$`),_P={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ON(ph,vf,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:SP,formatHex:SP,formatHex8:Ewe,formatHsl:Cwe,formatRgb:NP,toString:NP});function SP(){return this.rgb().formatHex()}function Ewe(){return this.rgb().formatHex8()}function Cwe(){return CL(this).formatHsl()}function NP(){return this.rgb().formatRgb()}function vf(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=xwe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?AP(e):n===3?new Wn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?hp(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?hp(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bwe.exec(t))?new Wn(e[1],e[2],e[3],1):(e=wwe.exec(t))?new Wn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=_we.exec(t))?hp(e[1],e[2],e[3],e[4]):(e=Swe.exec(t))?hp(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Nwe.exec(t))?jP(e[1],e[2]/100,e[3]/100,1):(e=Awe.exec(t))?jP(e[1],e[2]/100,e[3]/100,e[4]):_P.hasOwnProperty(t)?AP(_P[t]):t==="transparent"?new Wn(NaN,NaN,NaN,0):null}function AP(t){return new Wn(t>>16&255,t>>8&255,t&255,1)}function hp(t,e,n,r){return r<=0&&(t=e=n=NaN),new Wn(t,e,n,r)}function jwe(t){return t instanceof ph||(t=vf(t)),t?(t=t.rgb(),new Wn(t.r,t.g,t.b,t.opacity)):new Wn}function Lw(t,e,n,r){return arguments.length===1?jwe(t):new Wn(t,e,n,r??1)}function Wn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}ON(Wn,Lw,EL(ph,{brighter(t){return t=t==null?mg:Math.pow(mg,t),new Wn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?gf:Math.pow(gf,t),new Wn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Wn(oo(this.r),oo(this.g),oo(this.b),gg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:EP,formatHex:EP,formatHex8:Twe,formatRgb:CP,toString:CP}));function EP(){return`#${Xa(this.r)}${Xa(this.g)}${Xa(this.b)}`}function Twe(){return`#${Xa(this.r)}${Xa(this.g)}${Xa(this.b)}${Xa((isNaN(this.opacity)?1:this.opacity)*255)}`}function CP(){const t=gg(this.opacity);return`${t===1?"rgb(":"rgba("}${oo(this.r)}, ${oo(this.g)}, ${oo(this.b)}${t===1?")":`, ${t})`}`}function gg(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function oo(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Xa(t){return t=oo(t),(t<16?"0":"")+t.toString(16)}function jP(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new qr(t,e,n,r)}function CL(t){if(t instanceof qr)return new qr(t.h,t.s,t.l,t.opacity);if(t instanceof ph||(t=vf(t)),!t)return new qr;if(t instanceof qr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,l=s-i,c=(s+i)/2;return l?(e===s?a=(n-r)/l+(n<r)*6:n===s?a=(r-e)/l+2:a=(e-n)/l+4,l/=c<.5?s+i:2-s-i,a*=60):l=c>0&&c<1?0:a,new qr(a,l,c,t.opacity)}function Pwe(t,e,n,r){return arguments.length===1?CL(t):new qr(t,e,n,r??1)}function qr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}ON(qr,Pwe,EL(ph,{brighter(t){return t=t==null?mg:Math.pow(mg,t),new qr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?gf:Math.pow(gf,t),new qr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Wn(ix(t>=240?t-240:t+120,i,r),ix(t,i,r),ix(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new qr(TP(this.h),pp(this.s),pp(this.l),gg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=gg(this.opacity);return`${t===1?"hsl(":"hsla("}${TP(this.h)}, ${pp(this.s)*100}%, ${pp(this.l)*100}%${t===1?")":`, ${t})`}`}}));function TP(t){return t=(t||0)%360,t<0?t+360:t}function pp(t){return Math.max(0,Math.min(1,t||0))}function ix(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const RN=t=>()=>t;function kwe(t,e){return function(n){return t+n*e}}function Iwe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Owe(t){return(t=+t)==1?jL:function(e,n){return n-e?Iwe(e,n,t):RN(isNaN(e)?n:e)}}function jL(t,e){var n=e-t;return n?kwe(t,n):RN(isNaN(t)?e:t)}const PP=function t(e){var n=Owe(e);function r(i,s){var a=n((i=Lw(i)).r,(s=Lw(s)).r),l=n(i.g,s.g),c=n(i.b,s.b),u=jL(i.opacity,s.opacity);return function(d){return i.r=a(d),i.g=l(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=t,r}(1);function Rwe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function $we(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Dwe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=tu(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(l){for(a=0;a<r;++a)s[a]=i[a](l);return s}}function Mwe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function yg(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Lwe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=tu(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Fw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sx=new RegExp(Fw.source,"g");function Fwe(t){return function(){return t}}function Vwe(t){return function(e){return t(e)+""}}function Bwe(t,e){var n=Fw.lastIndex=sx.lastIndex=0,r,i,s,a=-1,l=[],c=[];for(t=t+"",e=e+"";(r=Fw.exec(t))&&(i=sx.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(r=r[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,c.push({i:a,x:yg(r,i)})),n=sx.lastIndex;return n<e.length&&(s=e.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?c[0]?Vwe(c[0].x):Fwe(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function tu(t,e){var n=typeof e,r;return e==null||n==="boolean"?RN(e):(n==="number"?yg:n==="string"?(r=vf(e))?(e=r,PP):Bwe:e instanceof vf?PP:e instanceof Date?Mwe:$we(e)?Rwe:Array.isArray(e)?Dwe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Lwe:yg)(t,e)}function $N(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Uwe(t,e){e===void 0&&(e=t,t=tu);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(a){var l=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[l](a-l)}}function zwe(t){return function(){return t}}function vg(t){return+t}var kP=[0,1];function Dn(t){return t}function Vw(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:zwe(isNaN(e)?NaN:.5)}function qwe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Wwe(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=Vw(i,r),s=n(a,s)):(r=Vw(r,i),s=n(s,a)),function(l){return s(r(l))}}function Gwe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Vw(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(l){var c=hh(t,l,1,r)-1;return s[c](i[c](l))}}function mh(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function mv(){var t=kP,e=kP,n=tu,r,i,s,a=Dn,l,c,u;function d(){var h=Math.min(t.length,e.length);return a!==Dn&&(a=qwe(t[0],t[h-1])),l=h>2?Gwe:Wwe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=l(t.map(r),e,n)))(r(a(h)))}return f.invert=function(h){return a(i((u||(u=l(e,t.map(r),yg)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,vg),d()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=$N,d()},f.clamp=function(h){return arguments.length?(a=h?!0:Dn,d()):a!==Dn},f.interpolate=function(h){return arguments.length?(n=h,d()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,m){return r=h,i=m,d()}}function DN(){return mv()(Dn,Dn)}function Hwe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function xg(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function cc(t){return t=xg(Math.abs(t)),t?t[1]:NaN}function Kwe(t,e){return function(n,r){for(var i=n.length,s=[],a=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),s.push(n.substring(i-=l,i+l)),!((c+=l+1)>r));)l=t[a=(a+1)%t.length];return s.reverse().join(e)}}function Ywe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Xwe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xf(t){if(!(e=Xwe.exec(t)))throw new Error("invalid format: "+t);var e;return new MN({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}xf.prototype=MN.prototype;function MN(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}MN.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Qwe(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var bg;function Jwe(t,e){var n=xg(t,e);if(!n)return bg=void 0,t.toPrecision(e);var r=n[0],i=n[1],s=i-(bg=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+xg(t,Math.max(0,e+s-1))[0]}function IP(t,e){var n=xg(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const OP={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Hwe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>IP(t*100,e),r:IP,s:Jwe,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function RP(t){return t}var $P=Array.prototype.map,DP=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Zwe(t){var e=t.grouping===void 0||t.thousands===void 0?RP:Kwe($P.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?RP:Ywe($P.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f,h){f=xf(f);var m=f.fill,y=f.align,g=f.sign,v=f.symbol,x=f.zero,w=f.width,b=f.comma,N=f.precision,A=f.trim,E=f.type;E==="n"?(b=!0,E="g"):OP[E]||(N===void 0&&(N=12),A=!0,E="g"),(x||m==="0"&&y==="=")&&(x=!0,m="0",y="=");var C=(h&&h.prefix!==void 0?h.prefix:"")+(v==="$"?n:v==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():""),S=(v==="$"?r:/[%p]/.test(E)?a:"")+(h&&h.suffix!==void 0?h.suffix:""),_=OP[E],P=/[defgprs%]/.test(E);N=N===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function T(O){var R=C,M=S,D,B,V;if(E==="c")M=_(O)+M,O="";else{O=+O;var F=O<0||1/O<0;if(O=isNaN(O)?c:_(Math.abs(O),N),A&&(O=Qwe(O)),F&&+O==0&&g!=="+"&&(F=!1),R=(F?g==="("?g:l:g==="-"||g==="("?"":g)+R,M=(E==="s"&&!isNaN(O)&&bg!==void 0?DP[8+bg/3]:"")+M+(F&&g==="("?")":""),P){for(D=-1,B=O.length;++D<B;)if(V=O.charCodeAt(D),48>V||V>57){M=(V===46?i+O.slice(D+1):O.slice(D))+M,O=O.slice(0,D);break}}}b&&!x&&(O=e(O,1/0));var q=R.length+O.length+M.length,H=q<w?new Array(w-q+1).join(m):"";switch(b&&x&&(O=e(H+O,H.length?w-M.length:1/0),H=""),y){case"<":O=R+O+M+H;break;case"=":O=R+H+O+M;break;case"^":O=H.slice(0,q=H.length>>1)+R+O+M+H.slice(q);break;default:O=H+R+O+M;break}return s(O)}return T.toString=function(){return f+""},T}function d(f,h){var m=Math.max(-8,Math.min(8,Math.floor(cc(h)/3)))*3,y=Math.pow(10,-m),g=u((f=xf(f),f.type="f",f),{suffix:DP[8+m/3]});return function(v){return g(y*v)}}return{format:u,formatPrefix:d}}var mp,LN,TL;e1e({thousands:",",grouping:[3],currency:["$",""]});function e1e(t){return mp=Zwe(t),LN=mp.format,TL=mp.formatPrefix,mp}function t1e(t){return Math.max(0,-cc(Math.abs(t)))}function n1e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cc(e)/3)))*3-cc(Math.abs(t)))}function r1e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,cc(e)-cc(t))+1}function PL(t,e,n,r){var i=Dw(t,e,n),s;switch(r=xf(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=n1e(i,a))&&(r.precision=s),TL(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=r1e(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=t1e(i))&&(r.precision=s-(r.type==="%")*2);break}}return LN(r)}function Aa(t){var e=t.domain;return t.ticks=function(n){var r=e();return Rw(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return PL(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],l=r[s],c,u,d=10;for(l<a&&(u=a,a=l,l=u,u=i,i=s,s=u);d-- >0;){if(u=$w(a,l,n),u===c)return r[i]=a,r[s]=l,e(r);if(u>0)a=Math.floor(a/u)*u,l=Math.ceil(l/u)*u;else if(u<0)a=Math.ceil(a*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function wg(){var t=DN();return t.copy=function(){return mh(t,wg())},$r.apply(t,arguments),Aa(t)}function kL(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,vg),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return kL(t).unknown(e)},t=arguments.length?Array.from(t,vg):[0,1],Aa(n)}function IL(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}function MP(t){return Math.log(t)}function LP(t){return Math.exp(t)}function i1e(t){return-Math.log(-t)}function s1e(t){return-Math.exp(-t)}function a1e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function o1e(t){return t===10?a1e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function l1e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function FP(t){return(e,n)=>-t(-e,n)}function FN(t){const e=t(MP,LP),n=e.domain;let r=10,i,s;function a(){return i=l1e(r),s=o1e(r),n()[0]<0?(i=FP(i),s=FP(s),t(i1e,s1e)):t(MP,LP),e}return e.base=function(l){return arguments.length?(r=+l,a()):r},e.domain=function(l){return arguments.length?(n(l),a()):n()},e.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=i(u),m=i(d),y,g;const v=l==null?10:+l;let x=[];if(!(r%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(y=1;y<r;++y)if(g=h<0?y/s(-h):y*s(h),!(g<u)){if(g>d)break;x.push(g)}}else for(;h<=m;++h)for(y=r-1;y>=1;--y)if(g=h>0?y/s(-h):y*s(h),!(g<u)){if(g>d)break;x.push(g)}x.length*2<v&&(x=Rw(u,d,v))}else x=Rw(h,m,Math.min(m-h,v)).map(s);return f?x.reverse():x},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=xf(c)).precision==null&&(c.trim=!0),c=LN(c)),l===1/0)return c;const u=Math.max(1,r*l/e.ticks().length);return d=>{let f=d/s(Math.round(i(d)));return f*r<r-.5&&(f*=r),f<=u?c(d):""}},e.nice=()=>n(IL(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),e}function OL(){const t=FN(mv()).domain([1,10]);return t.copy=()=>mh(t,OL()).base(t.base()),$r.apply(t,arguments),t}function VP(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function BP(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function VN(t){var e=1,n=t(VP(e),BP(e));return n.constant=function(r){return arguments.length?t(VP(e=+r),BP(e)):e},Aa(n)}function RL(){var t=VN(mv());return t.copy=function(){return mh(t,RL()).constant(t.constant())},$r.apply(t,arguments)}function UP(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function c1e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function u1e(t){return t<0?-t*t:t*t}function BN(t){var e=t(Dn,Dn),n=1;function r(){return n===1?t(Dn,Dn):n===.5?t(c1e,u1e):t(UP(n),UP(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Aa(e)}function UN(){var t=BN(mv());return t.copy=function(){return mh(t,UN()).exponent(t.exponent())},$r.apply(t,arguments),t}function d1e(){return UN.apply(null,arguments).exponent(.5)}function zP(t){return Math.sign(t)*t*t}function f1e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function $L(){var t=DN(),e=[0,1],n=!1,r;function i(s){var a=f1e(t(s));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(s){return t.invert(zP(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,vg)).map(zP)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return $L(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},$r.apply(i,arguments),Aa(i)}function DL(){var t=[],e=[],n=[],r;function i(){var a=0,l=Math.max(1,e.length);for(n=new Array(l-1);++a<l;)n[a-1]=ywe(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?r:e[hh(n,a)]}return s.invertExtent=function(a){var l=e.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(ua),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return DL().domain(t).range(e).unknown(r)},$r.apply(s,arguments)}function ML(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function a(c){return c!=null&&c<=c?i[hh(r,c,0,n)]:s}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return a}return a.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},a.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},a.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},a.unknown=function(c){return arguments.length&&(s=c),a},a.thresholds=function(){return r.slice()},a.copy=function(){return ML().domain([t,e]).range(i).unknown(s)},$r.apply(Aa(a),arguments)}function LL(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[hh(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return LL().domain(t).range(e).unknown(n)},$r.apply(i,arguments)}const ax=new Date,ox=new Date;function tn(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,l)=>{const c=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<a);return c},i.filter=s=>tn(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;e(a,-1),!s(a););else for(;--l>=0;)for(;e(a,1),!s(a););}),n&&(i.count=(s,a)=>(ax.setTime(+s),ox.setTime(+a),t(ax),t(ox),Math.floor(n(ax,ox))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const _g=tn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);_g.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?tn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):_g);_g.range;const Wi=1e3,Er=Wi*60,Gi=Er*60,ps=Gi*24,zN=ps*7,qP=ps*30,lx=ps*365,Qa=tn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Wi)},(t,e)=>(e-t)/Wi,t=>t.getUTCSeconds());Qa.range;const qN=tn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Wi)},(t,e)=>{t.setTime(+t+e*Er)},(t,e)=>(e-t)/Er,t=>t.getMinutes());qN.range;const WN=tn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Er)},(t,e)=>(e-t)/Er,t=>t.getUTCMinutes());WN.range;const GN=tn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Wi-t.getMinutes()*Er)},(t,e)=>{t.setTime(+t+e*Gi)},(t,e)=>(e-t)/Gi,t=>t.getHours());GN.range;const HN=tn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Gi)},(t,e)=>(e-t)/Gi,t=>t.getUTCHours());HN.range;const gh=tn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Er)/ps,t=>t.getDate()-1);gh.range;const gv=tn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ps,t=>t.getUTCDate()-1);gv.range;const FL=tn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ps,t=>Math.floor(t/ps));FL.range;function Vo(t){return tn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Er)/zN)}const yv=Vo(0),Sg=Vo(1),h1e=Vo(2),p1e=Vo(3),uc=Vo(4),m1e=Vo(5),g1e=Vo(6);yv.range;Sg.range;h1e.range;p1e.range;uc.range;m1e.range;g1e.range;function Bo(t){return tn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/zN)}const vv=Bo(0),Ng=Bo(1),y1e=Bo(2),v1e=Bo(3),dc=Bo(4),x1e=Bo(5),b1e=Bo(6);vv.range;Ng.range;y1e.range;v1e.range;dc.range;x1e.range;b1e.range;const KN=tn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());KN.range;const YN=tn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());YN.range;const ms=tn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ms.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:tn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ms.range;const gs=tn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());gs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:tn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});gs.range;function VL(t,e,n,r,i,s){const a=[[Qa,1,Wi],[Qa,5,5*Wi],[Qa,15,15*Wi],[Qa,30,30*Wi],[s,1,Er],[s,5,5*Er],[s,15,15*Er],[s,30,30*Er],[i,1,Gi],[i,3,3*Gi],[i,6,6*Gi],[i,12,12*Gi],[r,1,ps],[r,2,2*ps],[n,1,zN],[e,1,qP],[e,3,3*qP],[t,1,lx]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),y=m?m.range(u,+d+1):[];return h?y.reverse():y}function c(u,d,f){const h=Math.abs(d-u)/f,m=kN(([,,v])=>v).right(a,h);if(m===a.length)return t.every(Dw(u/lx,d/lx,f));if(m===0)return _g.every(Math.max(Dw(u,d,f),1));const[y,g]=a[h/a[m-1][2]<a[m][2]/h?m-1:m];return y.every(g)}return[l,c]}const[w1e,_1e]=VL(gs,YN,vv,FL,HN,WN),[S1e,N1e]=VL(ms,KN,yv,gh,GN,qN);function cx(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function ux(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ru(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function A1e(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,l=t.months,c=t.shortMonths,u=$u(i),d=Du(i),f=$u(s),h=Du(s),m=$u(a),y=Du(a),g=$u(l),v=Du(l),x=$u(c),w=Du(c),b={a:V,A:F,b:q,B:H,c:null,d:XP,e:XP,f:K1e,g:i_e,G:a_e,H:W1e,I:G1e,j:H1e,L:BL,m:Y1e,M:X1e,p:Z,q:Y,Q:ZP,s:ek,S:Q1e,u:J1e,U:Z1e,V:e_e,w:t_e,W:n_e,x:null,X:null,y:r_e,Y:s_e,Z:o_e,"%":JP},N={a:re,A:z,b:se,B:me,c:null,d:QP,e:QP,f:d_e,g:w_e,G:S_e,H:l_e,I:c_e,j:u_e,L:zL,m:f_e,M:h_e,p:ze,q:ct,Q:ZP,s:ek,S:p_e,u:m_e,U:g_e,V:y_e,w:v_e,W:x_e,x:null,X:null,y:b_e,Y:__e,Z:N_e,"%":JP},A={a:P,A:T,b:O,B:R,c:M,d:KP,e:KP,f:B1e,g:HP,G:GP,H:YP,I:YP,j:M1e,L:V1e,m:D1e,M:L1e,p:_,q:$1e,Q:z1e,s:q1e,S:F1e,u:P1e,U:k1e,V:I1e,w:T1e,W:O1e,x:D,X:B,y:HP,Y:GP,Z:R1e,"%":U1e};b.x=E(n,b),b.X=E(r,b),b.c=E(e,b),N.x=E(n,N),N.X=E(r,N),N.c=E(e,N);function E(ae,ye){return function(_e){var X=[],Ne=-1,Se=0,qe=ae.length,Qe,St,ie;for(_e instanceof Date||(_e=new Date(+_e));++Ne<qe;)ae.charCodeAt(Ne)===37&&(X.push(ae.slice(Se,Ne)),(St=WP[Qe=ae.charAt(++Ne)])!=null?Qe=ae.charAt(++Ne):St=Qe==="e"?" ":"0",(ie=ye[Qe])&&(Qe=ie(_e,St)),X.push(Qe),Se=Ne+1);return X.push(ae.slice(Se,Ne)),X.join("")}}function C(ae,ye){return function(_e){var X=Ru(1900,void 0,1),Ne=S(X,ae,_e+="",0),Se,qe;if(Ne!=_e.length)return null;if("Q"in X)return new Date(X.Q);if("s"in X)return new Date(X.s*1e3+("L"in X?X.L:0));if(ye&&!("Z"in X)&&(X.Z=0),"p"in X&&(X.H=X.H%12+X.p*12),X.m===void 0&&(X.m="q"in X?X.q:0),"V"in X){if(X.V<1||X.V>53)return null;"w"in X||(X.w=1),"Z"in X?(Se=ux(Ru(X.y,0,1)),qe=Se.getUTCDay(),Se=qe>4||qe===0?Ng.ceil(Se):Ng(Se),Se=gv.offset(Se,(X.V-1)*7),X.y=Se.getUTCFullYear(),X.m=Se.getUTCMonth(),X.d=Se.getUTCDate()+(X.w+6)%7):(Se=cx(Ru(X.y,0,1)),qe=Se.getDay(),Se=qe>4||qe===0?Sg.ceil(Se):Sg(Se),Se=gh.offset(Se,(X.V-1)*7),X.y=Se.getFullYear(),X.m=Se.getMonth(),X.d=Se.getDate()+(X.w+6)%7)}else("W"in X||"U"in X)&&("w"in X||(X.w="u"in X?X.u%7:"W"in X?1:0),qe="Z"in X?ux(Ru(X.y,0,1)).getUTCDay():cx(Ru(X.y,0,1)).getDay(),X.m=0,X.d="W"in X?(X.w+6)%7+X.W*7-(qe+5)%7:X.w+X.U*7-(qe+6)%7);return"Z"in X?(X.H+=X.Z/100|0,X.M+=X.Z%100,ux(X)):cx(X)}}function S(ae,ye,_e,X){for(var Ne=0,Se=ye.length,qe=_e.length,Qe,St;Ne<Se;){if(X>=qe)return-1;if(Qe=ye.charCodeAt(Ne++),Qe===37){if(Qe=ye.charAt(Ne++),St=A[Qe in WP?ye.charAt(Ne++):Qe],!St||(X=St(ae,_e,X))<0)return-1}else if(Qe!=_e.charCodeAt(X++))return-1}return X}function _(ae,ye,_e){var X=u.exec(ye.slice(_e));return X?(ae.p=d.get(X[0].toLowerCase()),_e+X[0].length):-1}function P(ae,ye,_e){var X=m.exec(ye.slice(_e));return X?(ae.w=y.get(X[0].toLowerCase()),_e+X[0].length):-1}function T(ae,ye,_e){var X=f.exec(ye.slice(_e));return X?(ae.w=h.get(X[0].toLowerCase()),_e+X[0].length):-1}function O(ae,ye,_e){var X=x.exec(ye.slice(_e));return X?(ae.m=w.get(X[0].toLowerCase()),_e+X[0].length):-1}function R(ae,ye,_e){var X=g.exec(ye.slice(_e));return X?(ae.m=v.get(X[0].toLowerCase()),_e+X[0].length):-1}function M(ae,ye,_e){return S(ae,e,ye,_e)}function D(ae,ye,_e){return S(ae,n,ye,_e)}function B(ae,ye,_e){return S(ae,r,ye,_e)}function V(ae){return a[ae.getDay()]}function F(ae){return s[ae.getDay()]}function q(ae){return c[ae.getMonth()]}function H(ae){return l[ae.getMonth()]}function Z(ae){return i[+(ae.getHours()>=12)]}function Y(ae){return 1+~~(ae.getMonth()/3)}function re(ae){return a[ae.getUTCDay()]}function z(ae){return s[ae.getUTCDay()]}function se(ae){return c[ae.getUTCMonth()]}function me(ae){return l[ae.getUTCMonth()]}function ze(ae){return i[+(ae.getUTCHours()>=12)]}function ct(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var ye=E(ae+="",b);return ye.toString=function(){return ae},ye},parse:function(ae){var ye=C(ae+="",!1);return ye.toString=function(){return ae},ye},utcFormat:function(ae){var ye=E(ae+="",N);return ye.toString=function(){return ae},ye},utcParse:function(ae){var ye=C(ae+="",!0);return ye.toString=function(){return ae},ye}}}var WP={"-":"",_:" ",0:"0"},cn=/^\s*\d+/,E1e=/^%/,C1e=/[\\^$*+?|[\]().{}]/g;function tt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function j1e(t){return t.replace(C1e,"\\$&")}function $u(t){return new RegExp("^(?:"+t.map(j1e).join("|")+")","i")}function Du(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function T1e(t,e,n){var r=cn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function P1e(t,e,n){var r=cn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function k1e(t,e,n){var r=cn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function I1e(t,e,n){var r=cn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function O1e(t,e,n){var r=cn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function GP(t,e,n){var r=cn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function HP(t,e,n){var r=cn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function R1e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function $1e(t,e,n){var r=cn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function D1e(t,e,n){var r=cn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function KP(t,e,n){var r=cn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function M1e(t,e,n){var r=cn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function YP(t,e,n){var r=cn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function L1e(t,e,n){var r=cn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function F1e(t,e,n){var r=cn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function V1e(t,e,n){var r=cn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function B1e(t,e,n){var r=cn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function U1e(t,e,n){var r=E1e.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function z1e(t,e,n){var r=cn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function q1e(t,e,n){var r=cn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function XP(t,e){return tt(t.getDate(),e,2)}function W1e(t,e){return tt(t.getHours(),e,2)}function G1e(t,e){return tt(t.getHours()%12||12,e,2)}function H1e(t,e){return tt(1+gh.count(ms(t),t),e,3)}function BL(t,e){return tt(t.getMilliseconds(),e,3)}function K1e(t,e){return BL(t,e)+"000"}function Y1e(t,e){return tt(t.getMonth()+1,e,2)}function X1e(t,e){return tt(t.getMinutes(),e,2)}function Q1e(t,e){return tt(t.getSeconds(),e,2)}function J1e(t){var e=t.getDay();return e===0?7:e}function Z1e(t,e){return tt(yv.count(ms(t)-1,t),e,2)}function UL(t){var e=t.getDay();return e>=4||e===0?uc(t):uc.ceil(t)}function e_e(t,e){return t=UL(t),tt(uc.count(ms(t),t)+(ms(t).getDay()===4),e,2)}function t_e(t){return t.getDay()}function n_e(t,e){return tt(Sg.count(ms(t)-1,t),e,2)}function r_e(t,e){return tt(t.getFullYear()%100,e,2)}function i_e(t,e){return t=UL(t),tt(t.getFullYear()%100,e,2)}function s_e(t,e){return tt(t.getFullYear()%1e4,e,4)}function a_e(t,e){var n=t.getDay();return t=n>=4||n===0?uc(t):uc.ceil(t),tt(t.getFullYear()%1e4,e,4)}function o_e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+tt(e/60|0,"0",2)+tt(e%60,"0",2)}function QP(t,e){return tt(t.getUTCDate(),e,2)}function l_e(t,e){return tt(t.getUTCHours(),e,2)}function c_e(t,e){return tt(t.getUTCHours()%12||12,e,2)}function u_e(t,e){return tt(1+gv.count(gs(t),t),e,3)}function zL(t,e){return tt(t.getUTCMilliseconds(),e,3)}function d_e(t,e){return zL(t,e)+"000"}function f_e(t,e){return tt(t.getUTCMonth()+1,e,2)}function h_e(t,e){return tt(t.getUTCMinutes(),e,2)}function p_e(t,e){return tt(t.getUTCSeconds(),e,2)}function m_e(t){var e=t.getUTCDay();return e===0?7:e}function g_e(t,e){return tt(vv.count(gs(t)-1,t),e,2)}function qL(t){var e=t.getUTCDay();return e>=4||e===0?dc(t):dc.ceil(t)}function y_e(t,e){return t=qL(t),tt(dc.count(gs(t),t)+(gs(t).getUTCDay()===4),e,2)}function v_e(t){return t.getUTCDay()}function x_e(t,e){return tt(Ng.count(gs(t)-1,t),e,2)}function b_e(t,e){return tt(t.getUTCFullYear()%100,e,2)}function w_e(t,e){return t=qL(t),tt(t.getUTCFullYear()%100,e,2)}function __e(t,e){return tt(t.getUTCFullYear()%1e4,e,4)}function S_e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?dc(t):dc.ceil(t),tt(t.getUTCFullYear()%1e4,e,4)}function N_e(){return"+0000"}function JP(){return"%"}function ZP(t){return+t}function ek(t){return Math.floor(+t/1e3)}var rl,WL,GL;A_e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function A_e(t){return rl=A1e(t),WL=rl.format,rl.parse,GL=rl.utcFormat,rl.utcParse,rl}function E_e(t){return new Date(t)}function C_e(t){return t instanceof Date?+t:+new Date(+t)}function XN(t,e,n,r,i,s,a,l,c,u){var d=DN(),f=d.invert,h=d.domain,m=u(".%L"),y=u(":%S"),g=u("%I:%M"),v=u("%I %p"),x=u("%a %d"),w=u("%b %d"),b=u("%B"),N=u("%Y");function A(E){return(c(E)<E?m:l(E)<E?y:a(E)<E?g:s(E)<E?v:r(E)<E?i(E)<E?x:w:n(E)<E?b:N)(E)}return d.invert=function(E){return new Date(f(E))},d.domain=function(E){return arguments.length?h(Array.from(E,C_e)):h().map(E_e)},d.ticks=function(E){var C=h();return t(C[0],C[C.length-1],E??10)},d.tickFormat=function(E,C){return C==null?A:u(C)},d.nice=function(E){var C=h();return(!E||typeof E.range!="function")&&(E=e(C[0],C[C.length-1],E??10)),E?h(IL(C,E)):d},d.copy=function(){return mh(d,XN(t,e,n,r,i,s,a,l,c,u))},d}function j_e(){return $r.apply(XN(S1e,N1e,ms,KN,yv,gh,GN,qN,Qa,WL).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function T_e(){return $r.apply(XN(w1e,_1e,gs,YN,vv,gv,HN,WN,Qa,GL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xv(){var t=0,e=1,n,r,i,s,a=Dn,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:a(i===0?.5:(f=(s(f)-n)*i,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(a=f,u):a};function d(f){return function(h){var m,y;return arguments.length?([m,y]=h,a=f(m,y),u):[a(0),a(1)]}}return u.range=d(tu),u.rangeRound=d($N),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function Ea(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function HL(){var t=Aa(xv()(Dn));return t.copy=function(){return Ea(t,HL())},_s.apply(t,arguments)}function KL(){var t=FN(xv()).domain([1,10]);return t.copy=function(){return Ea(t,KL()).base(t.base())},_s.apply(t,arguments)}function YL(){var t=VN(xv());return t.copy=function(){return Ea(t,YL()).constant(t.constant())},_s.apply(t,arguments)}function QN(){var t=BN(xv());return t.copy=function(){return Ea(t,QN()).exponent(t.exponent())},_s.apply(t,arguments)}function P_e(){return QN.apply(null,arguments).exponent(.5)}function XL(){var t=[],e=Dn;function n(r){if(r!=null&&!isNaN(r=+r))return e((hh(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ua),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>gwe(t,s/r))},n.copy=function(){return XL(e).domain(t)},_s.apply(n,arguments)}function bv(){var t=0,e=.5,n=1,r=1,i,s,a,l,c,u=Dn,d,f=!1,h;function m(g){return isNaN(g=+g)?h:(g=.5+((g=+d(g))-s)*(r*g<r*s?l:c),u(f?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([t,e,n]=g,i=d(t=+t),s=d(e=+e),a=d(n=+n),l=i===s?0:.5/(s-i),c=s===a?0:.5/(a-s),r=s<i?-1:1,m):[t,e,n]},m.clamp=function(g){return arguments.length?(f=!!g,m):f},m.interpolator=function(g){return arguments.length?(u=g,m):u};function y(g){return function(v){var x,w,b;return arguments.length?([x,w,b]=v,u=Uwe(g,[x,w,b]),m):[u(0),u(.5),u(1)]}}return m.range=y(tu),m.rangeRound=y($N),m.unknown=function(g){return arguments.length?(h=g,m):h},function(g){return d=g,i=g(t),s=g(e),a=g(n),l=i===s?0:.5/(s-i),c=s===a?0:.5/(a-s),r=s<i?-1:1,m}}function QL(){var t=Aa(bv()(Dn));return t.copy=function(){return Ea(t,QL())},_s.apply(t,arguments)}function JL(){var t=FN(bv()).domain([.1,1,10]);return t.copy=function(){return Ea(t,JL()).base(t.base())},_s.apply(t,arguments)}function ZL(){var t=VN(bv());return t.copy=function(){return Ea(t,ZL()).constant(t.constant())},_s.apply(t,arguments)}function JN(){var t=BN(bv());return t.copy=function(){return Ea(t,JN()).exponent(t.exponent())},_s.apply(t,arguments)}function k_e(){return JN.apply(null,arguments).exponent(.5)}const tk=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:mf,scaleDiverging:QL,scaleDivergingLog:JL,scaleDivergingPow:JN,scaleDivergingSqrt:k_e,scaleDivergingSymlog:ZL,scaleIdentity:kL,scaleImplicit:Mw,scaleLinear:wg,scaleLog:OL,scaleOrdinal:IN,scalePoint:vd,scalePow:UN,scaleQuantile:DL,scaleQuantize:ML,scaleRadial:$L,scaleSequential:HL,scaleSequentialLog:KL,scaleSequentialPow:QN,scaleSequentialQuantile:XL,scaleSequentialSqrt:P_e,scaleSequentialSymlog:YL,scaleSqrt:d1e,scaleSymlog:RL,scaleThreshold:LL,scaleTime:j_e,scaleUtc:T_e,tickFormat:PL},Symbol.toStringTag,{value:"Module"}));var I_e=Wc;function O_e(t,e,n){for(var r=-1,i=t.length;++r<i;){var s=t[r],a=e(s);if(a!=null&&(l===void 0?a===a&&!I_e(a):n(a,l)))var l=a,c=s}return c}var wv=O_e;function R_e(t,e){return t>e}var e4=R_e,$_e=wv,D_e=e4,M_e=eu;function L_e(t){return t&&t.length?$_e(t,M_e,D_e):void 0}var F_e=L_e;const Hs=st(F_e);function V_e(t,e){return t<e}var t4=V_e,B_e=wv,U_e=t4,z_e=eu;function q_e(t){return t&&t.length?B_e(t,z_e,U_e):void 0}var W_e=q_e;const _v=st(W_e);var G_e=fN,H_e=Ci,K_e=uL,Y_e=Jn;function X_e(t,e){var n=Y_e(t)?G_e:K_e;return n(t,H_e(e))}var Q_e=X_e,J_e=lL,Z_e=Q_e;function eSe(t,e){return J_e(Z_e(t,e),1)}var tSe=eSe;const nSe=st(tSe);var rSe=CN;function iSe(t,e){return rSe(t,e)}var sSe=iSe;const fc=st(sSe);var nu=1e9,aSe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},eA,Et=!0,Or="[DecimalError] ",lo=Or+"Invalid argument: ",ZN=Or+"Exponent out of range: ",ru=Math.floor,Ua=Math.pow,oSe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ar,rn=1e7,bt=7,n4=9007199254740991,Ag=ru(n4/bt),pe={};pe.absoluteValue=pe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};pe.comparedTo=pe.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};pe.decimalPlaces=pe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*bt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};pe.dividedBy=pe.div=function(t){return Ji(this,new this.constructor(t))};pe.dividedToIntegerBy=pe.idiv=function(t){var e=this,n=e.constructor;return dt(Ji(e,new n(t),0,1),n.precision)};pe.equals=pe.eq=function(t){return!this.cmp(t)};pe.exponent=function(){return Ht(this)};pe.greaterThan=pe.gt=function(t){return this.cmp(t)>0};pe.greaterThanOrEqualTo=pe.gte=function(t){return this.cmp(t)>=0};pe.isInteger=pe.isint=function(){return this.e>this.d.length-2};pe.isNegative=pe.isneg=function(){return this.s<0};pe.isPositive=pe.ispos=function(){return this.s>0};pe.isZero=function(){return this.s===0};pe.lessThan=pe.lt=function(t){return this.cmp(t)<0};pe.lessThanOrEqualTo=pe.lte=function(t){return this.cmp(t)<1};pe.logarithm=pe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(ar))throw Error(Or+"NaN");if(n.s<1)throw Error(Or+(n.s?"NaN":"-Infinity"));return n.eq(ar)?new r(0):(Et=!1,e=Ji(bf(n,s),bf(t,s),s),Et=!0,dt(e,i))};pe.minus=pe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?s4(e,t):r4(e,(t.s=-t.s,t))};pe.modulo=pe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Or+"NaN");return n.s?(Et=!1,e=Ji(n,t,0,1).times(t),Et=!0,n.minus(e)):dt(new r(n),i)};pe.naturalExponential=pe.exp=function(){return i4(this)};pe.naturalLogarithm=pe.ln=function(){return bf(this)};pe.negated=pe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};pe.plus=pe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?r4(e,t):s4(e,(t.s=-t.s,t))};pe.precision=pe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(lo+t);if(e=Ht(i)+1,r=i.d.length-1,n=r*bt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};pe.squareRoot=pe.sqrt=function(){var t,e,n,r,i,s,a,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Or+"NaN")}for(t=Ht(l),Et=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=oi(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=ru((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=a=n+3;;)if(s=r,r=s.plus(Ji(l,s,a+2)).times(.5),oi(s.d).slice(0,a)===(e=oi(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(dt(s,n+1,0),s.times(s).eq(l)){r=s;break}}else if(e!="9999")break;a+=4}return Et=!0,dt(r,n)};pe.times=pe.mul=function(t){var e,n,r,i,s,a,l,c,u,d=this,f=d.constructor,h=d.d,m=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,n=d.e+t.e,c=h.length,u=m.length,c<u&&(s=h,h=m,m=s,a=c,c=u,u=a),s=[],a=c+u,r=a;r--;)s.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)l=s[i]+m[r]*h[i-r-1]+e,s[i--]=l%rn|0,e=l/rn|0;s[i]=(s[i]+e)%rn|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Et?dt(t,f.precision):t};pe.toDecimalPlaces=pe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(wi(t,0,nu),e===void 0?e=r.rounding:wi(e,0,8),dt(n,t+Ht(n)+1,e))};pe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=To(r,!0):(wi(t,0,nu),e===void 0?e=i.rounding:wi(e,0,8),r=dt(new i(r),t+1,e),n=To(r,!0,t+1)),n};pe.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?To(i):(wi(t,0,nu),e===void 0?e=s.rounding:wi(e,0,8),r=dt(new s(i),t+Ht(i)+1,e),n=To(r.abs(),!1,t+Ht(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};pe.toInteger=pe.toint=function(){var t=this,e=t.constructor;return dt(new e(t),Ht(t)+1,e.rounding)};pe.toNumber=function(){return+this};pe.toPower=pe.pow=function(t){var e,n,r,i,s,a,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(ar);if(l=new c(l),!l.s){if(t.s<1)throw Error(Or+"Infinity");return l}if(l.eq(ar))return l;if(r=c.precision,t.eq(ar))return dt(l,r);if(e=t.e,n=t.d.length-1,a=e>=n,s=l.s,a){if((n=d<0?-d:d)<=n4){for(i=new c(ar),e=Math.ceil(r/bt+4),Et=!1;n%2&&(i=i.times(l),rk(i.d,e)),n=ru(n/2),n!==0;)l=l.times(l),rk(l.d,e);return Et=!0,t.s<0?new c(ar).div(i):dt(i,r)}}else if(s<0)throw Error(Or+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,Et=!1,i=t.times(bf(l,r+u)),Et=!0,i=i4(i),i.s=s,i};pe.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=Ht(i),r=To(i,n<=s.toExpNeg||n>=s.toExpPos)):(wi(t,1,nu),e===void 0?e=s.rounding:wi(e,0,8),i=dt(new s(i),t,e),n=Ht(i),r=To(i,t<=n||n<=s.toExpNeg,t)),r};pe.toSignificantDigits=pe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(wi(t,1,nu),e===void 0?e=r.rounding:wi(e,0,8)),dt(new r(n),t,e)};pe.toString=pe.valueOf=pe.val=pe.toJSON=pe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=Ht(t),n=t.constructor;return To(t,e<=n.toExpNeg||e>=n.toExpPos)};function r4(t,e){var n,r,i,s,a,l,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),Et?dt(e,f):e;if(c=t.d,u=e.d,a=t.e,i=e.e,c=c.slice(),s=a-i,s){for(s<0?(r=c,s=-s,l=u.length):(r=u,i=a,l=c.length),a=Math.ceil(f/bt),l=a>l?a+1:l+1,s>l&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,r=u,u=c,c=r),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/rn|0,c[s]%=rn;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,Et?dt(e,f):e}function wi(t,e,n){if(t!==~~t||t<e||t>n)throw Error(lo+t)}function oi(t){var e,n,r,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)r=t[e]+"",n=bt-r.length,n&&(s+=Rs(n)),s+=r;a=t[e],r=a+"",n=bt-r.length,n&&(s+=Rs(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var Ji=function(){function t(r,i){var s,a=0,l=r.length;for(r=r.slice();l--;)s=r[l]*i+a,r[l]=s%rn|0,a=s/rn|0;return a&&r.unshift(a),r}function e(r,i,s,a){var l,c;if(s!=a)c=s>a?1:-1;else for(l=c=0;l<s;l++)if(r[l]!=i[l]){c=r[l]>i[l]?1:-1;break}return c}function n(r,i,s){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*rn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a){var l,c,u,d,f,h,m,y,g,v,x,w,b,N,A,E,C,S,_=r.constructor,P=r.s==i.s?1:-1,T=r.d,O=i.d;if(!r.s)return new _(r);if(!i.s)throw Error(Or+"Division by zero");for(c=r.e-i.e,C=O.length,A=T.length,m=new _(P),y=m.d=[],u=0;O[u]==(T[u]||0);)++u;if(O[u]>(T[u]||0)&&--c,s==null?w=s=_.precision:a?w=s+(Ht(r)-Ht(i))+1:w=s,w<0)return new _(0);if(w=w/bt+2|0,u=0,C==1)for(d=0,O=O[0],w++;(u<A||d)&&w--;u++)b=d*rn+(T[u]||0),y[u]=b/O|0,d=b%O|0;else{for(d=rn/(O[0]+1)|0,d>1&&(O=t(O,d),T=t(T,d),C=O.length,A=T.length),N=C,g=T.slice(0,C),v=g.length;v<C;)g[v++]=0;S=O.slice(),S.unshift(0),E=O[0],O[1]>=rn/2&&++E;do d=0,l=e(O,g,C,v),l<0?(x=g[0],C!=v&&(x=x*rn+(g[1]||0)),d=x/E|0,d>1?(d>=rn&&(d=rn-1),f=t(O,d),h=f.length,v=g.length,l=e(f,g,h,v),l==1&&(d--,n(f,C<h?S:O,h))):(d==0&&(l=d=1),f=O.slice()),h=f.length,h<v&&f.unshift(0),n(g,f,v),l==-1&&(v=g.length,l=e(O,g,C,v),l<1&&(d++,n(g,C<v?S:O,v))),v=g.length):l===0&&(d++,g=[0]),y[u++]=d,l&&g[0]?g[v++]=T[N]||0:(g=[T[N]],v=1);while((N++<A||g[0]!==void 0)&&w--)}return y[0]||y.shift(),m.e=c,dt(m,a?s+Ht(m)+1:s)}}();function i4(t,e){var n,r,i,s,a,l,c=0,u=0,d=t.constructor,f=d.precision;if(Ht(t)>16)throw Error(ZN+Ht(t));if(!t.s)return new d(ar);for(Et=!1,l=f,a=new d(.03125);t.abs().gte(.1);)t=t.times(a),u+=5;for(r=Math.log(Ua(2,u))/Math.LN10*2+5|0,l+=r,n=i=s=new d(ar),d.precision=l;;){if(i=dt(i.times(t),l),n=n.times(++c),a=s.plus(Ji(i,n,l)),oi(a.d).slice(0,l)===oi(s.d).slice(0,l)){for(;u--;)s=dt(s.times(s),l);return d.precision=f,e==null?(Et=!0,dt(s,f)):s}s=a}}function Ht(t){for(var e=t.e*bt,n=t.d[0];n>=10;n/=10)e++;return e}function dx(t,e,n){if(e>t.LN10.sd())throw Et=!0,n&&(t.precision=n),Error(Or+"LN10 precision limit exceeded");return dt(new t(t.LN10),e)}function Rs(t){for(var e="";t--;)e+="0";return e}function bf(t,e){var n,r,i,s,a,l,c,u,d,f=1,h=10,m=t,y=m.d,g=m.constructor,v=g.precision;if(m.s<1)throw Error(Or+(m.s?"NaN":"-Infinity"));if(m.eq(ar))return new g(0);if(e==null?(Et=!1,u=v):u=e,m.eq(10))return e==null&&(Et=!0),dx(g,u);if(u+=h,g.precision=u,n=oi(y),r=n.charAt(0),s=Ht(m),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=oi(m.d),r=n.charAt(0),f++;s=Ht(m),r>1?(m=new g("0."+n),s++):m=new g(r+"."+n.slice(1))}else return c=dx(g,u+2,v).times(s+""),m=bf(new g(r+"."+n.slice(1)),u-h).plus(c),g.precision=v,e==null?(Et=!0,dt(m,v)):m;for(l=a=m=Ji(m.minus(ar),m.plus(ar),u),d=dt(m.times(m),u),i=3;;){if(a=dt(a.times(d),u),c=l.plus(Ji(a,new g(i),u)),oi(c.d).slice(0,u)===oi(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(dx(g,u+2,v).times(s+""))),l=Ji(l,new g(f),u),g.precision=v,e==null?(Et=!0,dt(l,v)):l;l=c,i+=2}}function nk(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=ru(n/bt),t.d=[],r=(n+1)%bt,n<0&&(r+=bt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=bt;r<i;)t.d.push(+e.slice(r,r+=bt));e=e.slice(r),r=bt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),Et&&(t.e>Ag||t.e<-Ag))throw Error(ZN+n)}else t.s=0,t.e=0,t.d=[0];return t}function dt(t,e,n){var r,i,s,a,l,c,u,d,f=t.d;for(a=1,s=f[0];s>=10;s/=10)a++;if(r=e-a,r<0)r+=bt,i=e,u=f[d=0];else{if(d=Math.ceil((r+1)/bt),s=f.length,d>=s)return t;for(u=s=f[d],a=1;s>=10;s/=10)a++;r%=bt,i=r-bt+a}if(n!==void 0&&(s=Ua(10,a-i-1),l=u/s%10|0,c=e<0||f[d+1]!==void 0||u%s,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?i>0?u/Ua(10,a-i):0:f[d-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return c?(s=Ht(t),f.length=1,e=e-s-1,f[0]=Ua(10,(bt-e%bt)%bt),t.e=ru(-e/bt)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=d,s=1,d--):(f.length=d+1,s=Ua(10,bt-r),f[d]=i>0?(u/Ua(10,a-i)%Ua(10,i)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==rn&&(f[0]=1,++t.e);break}else{if(f[d]+=s,f[d]!=rn)break;f[d--]=0,s=1}for(r=f.length;f[--r]===0;)f.pop();if(Et&&(t.e>Ag||t.e<-Ag))throw Error(ZN+Ht(t));return t}function s4(t,e){var n,r,i,s,a,l,c,u,d,f,h=t.constructor,m=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),Et?dt(e,m):e;if(c=t.d,f=e.d,r=e.e,u=t.e,c=c.slice(),a=u-r,a){for(d=a<0,d?(n=c,a=-a,l=f.length):(n=f,r=u,l=c.length),i=Math.max(Math.ceil(m/bt),l)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=f.length,d=i<l,d&&(l=i),i=0;i<l;i++)if(c[i]!=f[i]){d=c[i]<f[i];break}a=0}for(d&&(n=c,c=f,f=n,e.s=-e.s),l=c.length,i=f.length-l;i>0;--i)c[l++]=0;for(i=f.length;i>a;){if(c[--i]<f[i]){for(s=i;s&&c[--s]===0;)c[s]=rn-1;--c[s],c[i]+=rn}c[i]-=f[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,Et?dt(e,m):e):new h(0)}function To(t,e,n){var r,i=Ht(t),s=oi(t.d),a=s.length;return e?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+Rs(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Rs(-i-1)+s,n&&(r=n-a)>0&&(s+=Rs(r))):i>=a?(s+=Rs(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+Rs(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=Rs(r))),t.s<0?"-"+s:s}function rk(t,e){if(t.length>e)return t.length=e,!0}function a4(t){var e,n,r;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(lo+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return nk(a,s.toString())}else if(typeof s!="string")throw Error(lo+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,oSe.test(s))nk(a,s);else throw Error(lo+s)}if(i.prototype=pe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=a4,i.config=i.set=lSe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function lSe(t){if(!t||typeof t!="object")throw Error(Or+"Object expected");var e,n,r,i=["precision",1,nu,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(ru(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(lo+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(lo+n+": "+r);return this}var eA=a4(aSe);ar=new eA(1);const lt=eA;function cSe(t){return hSe(t)||fSe(t)||dSe(t)||uSe()}function uSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dSe(t,e){if(t){if(typeof t=="string")return Bw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bw(t,e)}}function fSe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function hSe(t){if(Array.isArray(t))return Bw(t)}function Bw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var pSe=function(e){return e},o4={},l4=function(e){return e===o4},ik=function(e){return function n(){return arguments.length===0||arguments.length===1&&l4(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},mSe=function t(e,n){return e===1?n:ik(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var a=i.filter(function(l){return l!==o4}).length;return a>=e?n.apply(void 0,i):t(e-a,ik(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=i.map(function(f){return l4(f)?c.shift():f});return n.apply(void 0,cSe(d).concat(c))}))})},Sv=function(e){return mSe(e.length,e)},Uw=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},gSe=Sv(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),ySe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return pSe;var i=n.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},zw=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},c4=function(e){var n=null,r=null;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n&&s.every(function(l,c){return l===n[c]})||(n=s,r=e.apply(void 0,s)),r}};function vSe(t){var e;return t===0?e=1:e=Math.floor(new lt(t).abs().log(10).toNumber())+1,e}function xSe(t,e,n){for(var r=new lt(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var bSe=Sv(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),wSe=Sv(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),_Se=Sv(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const Nv={rangeStep:xSe,getDigitCount:vSe,interpolateNumber:bSe,uninterpolateNumber:wSe,uninterpolateTruncation:_Se};function qw(t){return ASe(t)||NSe(t)||u4(t)||SSe()}function SSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NSe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function ASe(t){if(Array.isArray(t))return Ww(t)}function wf(t,e){return jSe(t)||CSe(t,e)||u4(t,e)||ESe()}function ESe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u4(t,e){if(t){if(typeof t=="string")return Ww(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ww(t,e)}}function Ww(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function CSe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,s=void 0;try{for(var a=t[Symbol.iterator](),l;!(r=(l=a.next()).done)&&(n.push(l.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,s=c}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw s}}return n}}function jSe(t){if(Array.isArray(t))return t}function d4(t){var e=wf(t,2),n=e[0],r=e[1],i=n,s=r;return n>r&&(i=r,s=n),[i,s]}function f4(t,e,n){if(t.lte(0))return new lt(0);var r=Nv.getDigitCount(t.toNumber()),i=new lt(10).pow(r),s=t.div(i),a=r!==1?.05:.1,l=new lt(Math.ceil(s.div(a).toNumber())).add(n).mul(a),c=l.mul(i);return e?c:new lt(Math.ceil(c))}function TSe(t,e,n){var r=1,i=new lt(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new lt(10).pow(Nv.getDigitCount(t)-1),i=new lt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new lt(Math.floor(t)))}else t===0?i=new lt(Math.floor((e-1)/2)):n||(i=new lt(Math.floor(t)));var a=Math.floor((e-1)/2),l=ySe(gSe(function(c){return i.add(new lt(c-a).mul(r)).toNumber()}),Uw);return l(0,e)}function h4(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new lt(0),tickMin:new lt(0),tickMax:new lt(0)};var s=f4(new lt(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new lt(0):(a=new lt(t).add(e).div(2),a=a.sub(new lt(a).mod(s)));var l=Math.ceil(a.sub(t).div(s).toNumber()),c=Math.ceil(new lt(e).sub(a).div(s).toNumber()),u=l+c+1;return u>n?h4(t,e,n,r,i+1):(u<n&&(c=e>0?c+(n-u):c,l=e>0?l:l+(n-u)),{step:s,tickMin:a.sub(new lt(l).mul(s)),tickMax:a.add(new lt(c).mul(s))})}function PSe(t){var e=wf(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),l=d4([n,r]),c=wf(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(qw(Uw(0,i-1).map(function(){return 1/0}))):[].concat(qw(Uw(0,i-1).map(function(){return-1/0})),[d]);return n>r?zw(f):f}if(u===d)return TSe(u,i,s);var h=h4(u,d,a,s),m=h.step,y=h.tickMin,g=h.tickMax,v=Nv.rangeStep(y,g.add(new lt(.1).mul(m)),m);return n>r?zw(v):v}function kSe(t,e){var n=wf(t,2),r=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=d4([r,i]),l=wf(a,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var d=Math.max(e,2),f=f4(new lt(u).sub(c).div(d-1),s,0),h=[].concat(qw(Nv.rangeStep(new lt(c),new lt(u).sub(new lt(.99).mul(f)),f)),[u]);return r>i?zw(h):h}var ISe=c4(PSe),OSe=c4(kSe),RSe="Invariant failed";function Po(t,e){throw new Error(RSe)}var $Se=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function hc(t){"@babel/helpers - typeof";return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hc(t)}function Eg(){return Eg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Eg.apply(this,arguments)}function DSe(t,e){return VSe(t)||FSe(t,e)||LSe(t,e)||MSe()}function MSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LSe(t,e){if(t){if(typeof t=="string")return sk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sk(t,e)}}function sk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function FSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function VSe(t){if(Array.isArray(t))return t}function BSe(t,e){if(t==null)return{};var n=USe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function USe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function zSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g4(r.key),r)}}function WSe(t,e,n){return e&&qSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function GSe(t,e,n){return e=Cg(e),HSe(t,p4()?Reflect.construct(e,n||[],Cg(t).constructor):e.apply(t,n))}function HSe(t,e){if(e&&(hc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KSe(t)}function KSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p4=function(){return!!t})()}function Cg(t){return Cg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cg(t)}function YSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gw(t,e)}function Gw(t,e){return Gw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Gw(t,e)}function m4(t,e,n){return e=g4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g4(t){var e=XSe(t,"string");return hc(e)=="symbol"?e:e+""}function XSe(t,e){if(hc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Av=function(t){function e(){return zSe(this,e),GSe(this,e,arguments)}return YSe(e,t),WSe(e,[{key:"render",value:function(){var r=this.props,i=r.offset,s=r.layout,a=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,f=r.yAxis,h=BSe(r,$Se),m=be(h,!1);this.props.direction==="x"&&d.type!=="number"&&Po();var y=c.map(function(g){var v=u(g,l),x=v.x,w=v.y,b=v.value,N=v.errorVal;if(!N)return null;var A=[],E,C;if(Array.isArray(N)){var S=DSe(N,2);E=S[0],C=S[1]}else E=C=N;if(s==="vertical"){var _=d.scale,P=w+i,T=P+a,O=P-a,R=_(b-E),M=_(b+C);A.push({x1:M,y1:T,x2:M,y2:O}),A.push({x1:R,y1:P,x2:M,y2:P}),A.push({x1:R,y1:T,x2:R,y2:O})}else if(s==="horizontal"){var D=f.scale,B=x+i,V=B-a,F=B+a,q=D(b-E),H=D(b+C);A.push({x1:V,y1:H,x2:F,y2:H}),A.push({x1:B,y1:q,x2:B,y2:H}),A.push({x1:V,y1:q,x2:F,y2:q})}return L.createElement(Xe,Eg({className:"recharts-errorBar",key:"bar-".concat(A.map(function(Z){return"".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))},m),A.map(function(Z){return L.createElement("line",Eg({},Z,{key:"line-".concat(Z.x1,"-").concat(Z.x2,"-").concat(Z.y1,"-").concat(Z.y2)}))}))});return L.createElement(Xe,{className:"recharts-errorBars"},y)}}])}(L.Component);m4(Av,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});m4(Av,"displayName","ErrorBar");function _f(t){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_f(t)}function ak(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ra(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ak(Object(n),!0).forEach(function(r){QSe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ak(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function QSe(t,e,n){return e=JSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function JSe(t){var e=ZSe(t,"string");return _f(e)=="symbol"?e:e+""}function ZSe(t,e){if(_f(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var y4=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,a=nr(n,ao);if(!a)return null;var l=ao.defaultProps,c=l!==void 0?Ra(Ra({},l),a.props):{},u;return a.props&&a.props.payload?u=a.props&&a.props.payload:s==="children"?u=(r||[]).reduce(function(d,f){var h=f.item,m=f.props,y=m.sectors||m.data||[];return d.concat(y.map(function(g){return{type:a.props.iconType||h.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(r||[]).map(function(d){var f=d.item,h=f.type.defaultProps,m=h!==void 0?Ra(Ra({},h),f.props):{},y=m.dataKey,g=m.name,v=m.legendType,x=m.hide;return{inactive:x,dataKey:y,type:c.iconType||v||"square",color:tA(f),value:g||y,payload:m}}),Ra(Ra(Ra({},c),ao.getWithHeight(a,i)),{},{payload:u,item:a})};function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}function ok(t){return rNe(t)||nNe(t)||tNe(t)||eNe()}function eNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tNe(t,e){if(t){if(typeof t=="string")return Hw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hw(t,e)}}function nNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function rNe(t){if(Array.isArray(t))return Hw(t)}function Hw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function lk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lk(Object(n),!0).forEach(function(r){Fl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fl(t,e,n){return e=iNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iNe(t){var e=sNe(t,"string");return Sf(e)=="symbol"?e:e+""}function sNe(t,e){if(Sf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jt(t,e,n){return Re(t)||Re(e)?n:en(e)?dr(t,e,n):je(e)?e(t):n}function xd(t,e,n,r){var i=nSe(t,function(l){return Jt(l,e)});if(n==="number"){var s=i.filter(function(l){return te(l)||parseFloat(l)});return s.length?[_v(s),Hs(s)]:[1/0,-1/0]}var a=r?i.filter(function(l){return!Re(l)}):i;return a.map(function(l){return en(l)||l instanceof Date?l:""})}var aNe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var d=u>0?i[u-1].coordinate:i[l-1].coordinate,f=i[u].coordinate,h=u>=l-1?i[0].coordinate:i[u+1].coordinate,m=void 0;if(Rn(f-d)!==Rn(h-f)){var y=[];if(Rn(h-f)===Rn(c[1]-c[0])){m=h;var g=f+c[1]-c[0];y[0]=Math.min(g,(g+d)/2),y[1]=Math.max(g,(g+d)/2)}else{m=d;var v=h+c[1]-c[0];y[0]=Math.min(f,(v+f)/2),y[1]=Math.max(f,(v+f)/2)}var x=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(e>x[0]&&e<=x[1]||e>=y[0]&&e<=y[1]){a=i[u].index;break}}else{var w=Math.min(d,h),b=Math.max(d,h);if(e>(w+f)/2&&e<=(b+f)/2){a=i[u].index;break}}}else for(var N=0;N<l;N++)if(N===0&&e<=(r[N].coordinate+r[N+1].coordinate)/2||N>0&&N<l-1&&e>(r[N].coordinate+r[N-1].coordinate)/2&&e<=(r[N].coordinate+r[N+1].coordinate)/2||N===l-1&&e>(r[N].coordinate+r[N-1].coordinate)/2){a=r[N].index;break}return a},tA=function(e){var n,r=e,i=r.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Rt(Rt({},e.type.defaultProps),e.props):e.props,a=s.stroke,l=s.fill,c;switch(i){case"Line":c=a;break;case"Area":case"Radar":c=a&&a!=="none"?a:l;break;default:c=l;break}return c},oNe=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var a={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var d=s[l[c]].stackGroups,f=Object.keys(d),h=0,m=f.length;h<m;h++){var y=d[f[h]],g=y.items,v=y.cateAxisId,x=g.filter(function(C){return Qi(C.type).indexOf("Bar")>=0});if(x&&x.length){var w=x[0].type.defaultProps,b=w!==void 0?Rt(Rt({},w),x[0].props):x[0].props,N=b.barSize,A=b[v];a[A]||(a[A]=[]);var E=Re(N)?n:N;a[A].push({item:x[0],stackList:x.slice(1),barSize:Re(E)?void 0:$n(E,r,0)})}}return a},lNe=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,s=e.sizeList,a=s===void 0?[]:s,l=e.maxBarSize,c=a.length;if(c<1)return null;var u=$n(n,i,0,!0),d,f=[];if(a[0].barSize===+a[0].barSize){var h=!1,m=i/c,y=a.reduce(function(N,A){return N+A.barSize||0},0);y+=(c-1)*u,y>=i&&(y-=(c-1)*u,u=0),y>=i&&m>0&&(h=!0,m*=.9,y=c*m);var g=(i-y)/2>>0,v={offset:g-u,size:0};d=a.reduce(function(N,A){var E={item:A.item,position:{offset:v.offset+v.size+u,size:h?m:A.barSize}},C=[].concat(ok(N),[E]);return v=C[C.length-1].position,A.stackList&&A.stackList.length&&A.stackList.forEach(function(S){C.push({item:S,position:v})}),C},f)}else{var x=$n(r,i,0,!0);i-2*x-(c-1)*u<=0&&(u=0);var w=(i-2*x-(c-1)*u)/c;w>1&&(w>>=0);var b=l===+l?Math.min(w,l):w;d=a.reduce(function(N,A,E){var C=[].concat(ok(N),[{item:A.item,position:{offset:x+(w+u)*E+(w-b)/2,size:b}}]);return A.stackList&&A.stackList.length&&A.stackList.forEach(function(S){C.push({item:S,position:C[C.length-1].position})}),C},f)}return d},cNe=function(e,n,r,i){var s=r.children,a=r.width,l=r.margin,c=a-(l.left||0)-(l.right||0),u=y4({children:s,legendWidth:c});if(u){var d=i||{},f=d.width,h=d.height,m=u.align,y=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&y==="middle")&&m!=="center"&&te(e[m]))return Rt(Rt({},e),{},Fl({},m,e[m]+(f||0)));if((g==="horizontal"||g==="vertical"&&m==="center")&&y!=="middle"&&te(e[y]))return Rt(Rt({},e),{},Fl({},y,e[y]+(h||0)))}return e},uNe=function(e,n,r){return Re(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},v4=function(e,n,r,i,s){var a=n.props.children,l=Tr(a,Av).filter(function(u){return uNe(i,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var f=Jt(d,r);if(Re(f))return u;var h=Array.isArray(f)?[_v(f),Hs(f)]:[f,f],m=c.reduce(function(y,g){var v=Jt(d,g,0),x=h[0]-Math.abs(Array.isArray(v)?v[0]:v),w=h[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(x,y[0]),Math.max(w,y[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},dNe=function(e,n,r,i,s){var a=n.map(function(l){return v4(e,l,r,s,i)}).filter(function(l){return!Re(l)});return a&&a.length?a.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},x4=function(e,n,r,i,s){var a=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&v4(e,c,u,i)||xd(e,u,r,s)});if(r==="number")return a.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return a.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},b4=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},w4=function(e,n,r,i){if(i)return e.map(function(c){return c.coordinate});var s,a,l=e.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===r&&(a=!0),c.coordinate});return s||l.push(n),a||l.push(r),l},Hi=function(e,n,r){if(!e)return null;var i=e.scale,s=e.duplicateDomain,a=e.type,l=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Rn(l[0]-l[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(f){var h=s?s.indexOf(f):f;return{coordinate:i(h)+u,value:f,offset:u}});return d.filter(function(f){return!Xc(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:i(f)+u,value:f,index:h,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,h){return{coordinate:i(f)+u,value:s?s[f]:f,index:h,offset:u}})},fx=new WeakMap,gp=function(e,n){if(typeof n!="function")return e;fx.has(e)||fx.set(e,new WeakMap);var r=fx.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},_4=function(e,n,r){var i=e.scale,s=e.type,a=e.layout,l=e.axisType;if(i==="auto")return a==="radial"&&l==="radiusAxis"?{scale:mf(),realScaleType:"band"}:a==="radial"&&l==="angleAxis"?{scale:wg(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:vd(),realScaleType:"point"}:s==="category"?{scale:mf(),realScaleType:"band"}:{scale:wg(),realScaleType:"linear"};if(Eo(i)){var c="scale".concat(ov(i));return{scale:(tk[c]||vd)(),realScaleType:tk[c]?c:"point"}}return je(i)?{scale:i}:{scale:vd(),realScaleType:"point"}},ck=1e-4,S4=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),s=Math.min(i[0],i[1])-ck,a=Math.max(i[0],i[1])+ck,l=e(n[0]),c=e(n[r-1]);(l<s||l>a||c<s||c>a)&&e.domain([n[0],n[r-1]])}},fNe=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},hNe=function(e,n){if(!n||n.length!==2||!te(n[0])||!te(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!te(e[0])||e[0]<r)&&(s[0]=r),(!te(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<r&&(s[1]=r),s},pNe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,a=0,l=0;l<n;++l){var c=Xc(e[l][r][1])?e[l][r][0]:e[l][r][1];c>=0?(e[l][r][0]=s,e[l][r][1]=s+c,s=e[l][r][1]):(e[l][r][0]=a,e[l][r][1]=a+c,a=e[l][r][1])}},mNe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,a=0;a<n;++a){var l=Xc(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},gNe={sign:pNe,expand:$fe,none:ic,silhouette:Dfe,wiggle:Mfe,positive:mNe},yNe=function(e,n,r){var i=n.map(function(l){return l.props.dataKey}),s=gNe[r],a=Rfe().keys(i).value(function(l,c){return+Jt(l,c,0)}).order(vw).offset(s);return a(e)},vNe=function(e,n,r,i,s,a){if(!e)return null;var l=a?n.reverse():n,c={},u=l.reduce(function(f,h){var m,y=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Rt(Rt({},h.type.defaultProps),h.props):h.props,g=y.stackId,v=y.hide;if(v)return f;var x=y[r],w=f[x]||{hasStack:!1,stackGroups:{}};if(en(g)){var b=w.stackGroups[g]||{numericAxisId:r,cateAxisId:i,items:[]};b.items.push(h),w.hasStack=!0,w.stackGroups[g]=b}else w.stackGroups[Qc("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return Rt(Rt({},f),{},Fl({},x,w))},c),d={};return Object.keys(u).reduce(function(f,h){var m=u[h];if(m.hasStack){var y={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(g,v){var x=m.stackGroups[v];return Rt(Rt({},g),{},Fl({},v,{numericAxisId:r,cateAxisId:i,items:x.items,stackedData:yNe(e,x.items,s)}))},y)}return Rt(Rt({},f),{},Fl({},h,m))},d)},N4=function(e,n){var r=n.realScaleType,i=n.type,s=n.tickCount,a=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=ISe(u,s,l);return e.domain([_v(d),Hs(d)]),{niceTicks:d}}if(s&&i==="number"){var f=e.domain(),h=OSe(f,s,l);return{niceTicks:h}}return null};function uk(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,s=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Re(i[e.dataKey])){var l=Jm(n,"value",i[e.dataKey]);if(l)return l.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var c=Jt(i,Re(a)?e.dataKey:a);return Re(c)?null:e.scale(c)}var dk=function(e){var n=e.axis,r=e.ticks,i=e.offset,s=e.bandSize,a=e.entry,l=e.index;if(n.type==="category")return r[l]?r[l].coordinate+i:null;var c=Jt(a,n.dataKey,n.domain[l]);return Re(c)?null:n.scale(c)-s/2+i},xNe=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return i<=0&&s>=0?0:s<0?s:i}return r[0]},bNe=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Rt(Rt({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(en(s)){var a=n[s];if(a){var l=a.items.indexOf(e);return l>=0?a.stackedData[l]:null}}return null},wNe=function(e){return e.reduce(function(n,r){return[_v(r.concat([n[0]]).filter(te)),Hs(r.concat([n[1]]).filter(te))]},[1/0,-1/0])},A4=function(e,n,r){return Object.keys(e).reduce(function(i,s){var a=e[s],l=a.stackedData,c=l.reduce(function(u,d){var f=wNe(d.slice(n,r+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},fk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,hk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Kw=function(e,n,r){if(je(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(te(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(fk.test(e[0])){var s=+fk.exec(e[0])[1];i[0]=n[0]-s}else je(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(te(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(hk.test(e[1])){var a=+hk.exec(e[1])[1];i[1]=n[1]+a}else je(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},jg=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var s=TN(n,function(f){return f.coordinate}),a=1/0,l=1,c=s.length;l<c;l++){var u=s[l],d=s[l-1];a=Math.min((u.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},pk=function(e,n,r){return!e||!e.length||fc(e,dr(r,"type.defaultProps.domain"))?n:e},E4=function(e,n){var r=e.type.defaultProps?Rt(Rt({},e.type.defaultProps),e.props):e.props,i=r.dataKey,s=r.name,a=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return Rt(Rt({},be(e,!1)),{},{dataKey:i,unit:a,formatter:l,name:s||i,color:tA(e),value:Jt(n,i),type:c,payload:n,chartType:u,hide:d})};function Nf(t){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nf(t)}function mk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mk(Object(n),!0).forEach(function(r){C4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function C4(t,e,n){return e=_Ne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Ne(t){var e=SNe(t,"string");return Nf(e)=="symbol"?e:e+""}function SNe(t,e){if(Nf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function NNe(t,e){return jNe(t)||CNe(t,e)||ENe(t,e)||ANe()}function ANe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ENe(t,e){if(t){if(typeof t=="string")return gk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gk(t,e)}}function gk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function CNe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function jNe(t){if(Array.isArray(t))return t}var Tg=Math.PI/180,TNe=function(e){return e*180/Math.PI},mt=function(e,n,r,i){return{x:e+Math.cos(-Tg*i)*r,y:n+Math.sin(-Tg*i)*r}},j4=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},PNe=function(e,n,r,i,s){var a=e.width,l=e.height,c=e.startAngle,u=e.endAngle,d=$n(e.cx,a,a/2),f=$n(e.cy,l,l/2),h=j4(a,l,r),m=$n(e.innerRadius,h,0),y=$n(e.outerRadius,h,h*.8),g=Object.keys(n);return g.reduce(function(v,x){var w=n[x],b=w.domain,N=w.reversed,A;if(Re(w.range))i==="angleAxis"?A=[c,u]:i==="radiusAxis"&&(A=[m,y]),N&&(A=[A[1],A[0]]);else{A=w.range;var E=A,C=NNe(E,2);c=C[0],u=C[1]}var S=_4(w,s),_=S.realScaleType,P=S.scale;P.domain(b).range(A),S4(P);var T=N4(P,Mi(Mi({},w),{},{realScaleType:_})),O=Mi(Mi(Mi({},w),T),{},{range:A,radius:y,realScaleType:_,scale:P,cx:d,cy:f,innerRadius:m,outerRadius:y,startAngle:c,endAngle:u});return Mi(Mi({},v),{},C4({},x,O))},{})},kNe=function(e,n){var r=e.x,i=e.y,s=n.x,a=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(i-a,2))},INe=function(e,n){var r=e.x,i=e.y,s=n.cx,a=n.cy,l=kNe({x:r,y:i},{x:s,y:a});if(l<=0)return{radius:l};var c=(r-s)/l,u=Math.acos(c);return i>a&&(u=2*Math.PI-u),{radius:l,angle:TNe(u),angleInRadian:u}},ONe=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),s=Math.floor(r/360),a=Math.min(i,s);return{startAngle:n-a*360,endAngle:r-a*360}},RNe=function(e,n){var r=n.startAngle,i=n.endAngle,s=Math.floor(r/360),a=Math.floor(i/360),l=Math.min(s,a);return e+l*360},yk=function(e,n){var r=e.x,i=e.y,s=INe({x:r,y:i},n),a=s.radius,l=s.angle,c=n.innerRadius,u=n.outerRadius;if(a<c||a>u)return!1;if(a===0)return!0;var d=ONe(n),f=d.startAngle,h=d.endAngle,m=l,y;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;y=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;y=m>=h&&m<=f}return y?Mi(Mi({},n),{},{radius:a,angle:RNe(m,n)}):null},T4=function(e){return!k.isValidElement(e)&&!je(e)&&typeof e!="boolean"?e.className:""};function Af(t){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Af(t)}var $Ne=["offset"];function DNe(t){return VNe(t)||FNe(t)||LNe(t)||MNe()}function MNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LNe(t,e){if(t){if(typeof t=="string")return Yw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yw(t,e)}}function FNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function VNe(t){if(Array.isArray(t))return Yw(t)}function Yw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function BNe(t,e){if(t==null)return{};var n=UNe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function UNe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vk(Object(n),!0).forEach(function(r){zNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zNe(t,e,n){return e=qNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qNe(t){var e=WNe(t,"string");return Af(e)=="symbol"?e:e+""}function WNe(t,e){if(Af(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ef(){return Ef=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ef.apply(this,arguments)}var GNe=function(e){var n=e.value,r=e.formatter,i=Re(e.children)?n:e.children;return je(r)?r(i):i},HNe=function(e,n){var r=Rn(n-e),i=Math.min(Math.abs(n-e),360);return r*i},KNe=function(e,n,r){var i=e.position,s=e.viewBox,a=e.offset,l=e.className,c=s,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,m=c.startAngle,y=c.endAngle,g=c.clockWise,v=(f+h)/2,x=HNe(m,y),w=x>=0?1:-1,b,N;i==="insideStart"?(b=m+w*a,N=g):i==="insideEnd"?(b=y-w*a,N=!g):i==="end"&&(b=y+w*a,N=g),N=x<=0?N:!N;var A=mt(u,d,v,b),E=mt(u,d,v,b+(N?1:-1)*359),C="M".concat(A.x,",").concat(A.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(N?0:1,`,
    `).concat(E.x,",").concat(E.y),S=Re(e.id)?Qc("recharts-radial-line-"):e.id;return L.createElement("text",Ef({},r,{dominantBaseline:"central",className:Me("recharts-radial-bar-label",l)}),L.createElement("defs",null,L.createElement("path",{id:S,d:C})),L.createElement("textPath",{xlinkHref:"#".concat(S)},n))},YNe=function(e){var n=e.viewBox,r=e.offset,i=e.position,s=n,a=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,d=s.startAngle,f=s.endAngle,h=(d+f)/2;if(i==="outside"){var m=mt(a,l,u+r,h),y=m.x,g=m.y;return{x:y,y:g,textAnchor:y>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(c+u)/2,x=mt(a,l,v,h),w=x.x,b=x.y;return{x:w,y:b,textAnchor:"middle",verticalAnchor:"middle"}},XNe=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,s=e.position,a=n,l=a.x,c=a.y,u=a.width,d=a.height,f=d>=0?1:-1,h=f*i,m=f>0?"end":"start",y=f>0?"start":"end",g=u>=0?1:-1,v=g*i,x=g>0?"end":"start",w=g>0?"start":"end";if(s==="top"){var b={x:l+u/2,y:c-f*i,textAnchor:"middle",verticalAnchor:m};return Xt(Xt({},b),r?{height:Math.max(c-r.y,0),width:u}:{})}if(s==="bottom"){var N={x:l+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:y};return Xt(Xt({},N),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(s==="left"){var A={x:l-v,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return Xt(Xt({},A),r?{width:Math.max(A.x-r.x,0),height:d}:{})}if(s==="right"){var E={x:l+u+v,y:c+d/2,textAnchor:w,verticalAnchor:"middle"};return Xt(Xt({},E),r?{width:Math.max(r.x+r.width-E.x,0),height:d}:{})}var C=r?{width:u,height:d}:{};return s==="insideLeft"?Xt({x:l+v,y:c+d/2,textAnchor:w,verticalAnchor:"middle"},C):s==="insideRight"?Xt({x:l+u-v,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},C):s==="insideTop"?Xt({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:y},C):s==="insideBottom"?Xt({x:l+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:m},C):s==="insideTopLeft"?Xt({x:l+v,y:c+h,textAnchor:w,verticalAnchor:y},C):s==="insideTopRight"?Xt({x:l+u-v,y:c+h,textAnchor:x,verticalAnchor:y},C):s==="insideBottomLeft"?Xt({x:l+v,y:c+d-h,textAnchor:w,verticalAnchor:m},C):s==="insideBottomRight"?Xt({x:l+u-v,y:c+d-h,textAnchor:x,verticalAnchor:m},C):Gc(s)&&(te(s.x)||Ya(s.x))&&(te(s.y)||Ya(s.y))?Xt({x:l+$n(s.x,u),y:c+$n(s.y,d),textAnchor:"end",verticalAnchor:"end"},C):Xt({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},C)},QNe=function(e){return"cx"in e&&te(e.cx)};function an(t){var e=t.offset,n=e===void 0?5:e,r=BNe(t,$Ne),i=Xt({offset:n},r),s=i.viewBox,a=i.position,l=i.value,c=i.children,u=i.content,d=i.className,f=d===void 0?"":d,h=i.textBreakAll;if(!s||Re(l)&&Re(c)&&!k.isValidElement(u)&&!je(u))return null;if(k.isValidElement(u))return k.cloneElement(u,i);var m;if(je(u)){if(m=k.createElement(u,i),k.isValidElement(m))return m}else m=GNe(i);var y=QNe(s),g=be(i,!0);if(y&&(a==="insideStart"||a==="insideEnd"||a==="end"))return KNe(i,m,g);var v=y?YNe(i):XNe(i);return L.createElement(jo,Ef({className:Me("recharts-label",f)},g,v,{breakAll:h}),m)}an.displayName="Label";var P4=function(e){var n=e.cx,r=e.cy,i=e.angle,s=e.startAngle,a=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,f=e.x,h=e.y,m=e.top,y=e.left,g=e.width,v=e.height,x=e.clockWise,w=e.labelViewBox;if(w)return w;if(te(g)&&te(v)){if(te(f)&&te(h))return{x:f,y:h,width:g,height:v};if(te(m)&&te(y))return{x:m,y,width:g,height:v}}return te(f)&&te(h)?{x:f,y:h,width:0,height:0}:te(n)&&te(r)?{cx:n,cy:r,startAngle:s||i||0,endAngle:a||i||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:x}:e.viewBox?e.viewBox:{}},JNe=function(e,n){return e?e===!0?L.createElement(an,{key:"label-implicit",viewBox:n}):en(e)?L.createElement(an,{key:"label-implicit",viewBox:n,value:e}):k.isValidElement(e)?e.type===an?k.cloneElement(e,{key:"label-implicit",viewBox:n}):L.createElement(an,{key:"label-implicit",content:e,viewBox:n}):je(e)?L.createElement(an,{key:"label-implicit",content:e,viewBox:n}):Gc(e)?L.createElement(an,Ef({viewBox:n},e,{key:"label-implicit"})):null:null},ZNe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,s=P4(e),a=Tr(i,an).map(function(c,u){return k.cloneElement(c,{viewBox:n||s,key:"label-".concat(u)})});if(!r)return a;var l=JNe(e.label,n||s);return[l].concat(DNe(a))};an.parseViewBox=P4;an.renderCallByParent=ZNe;function eAe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var tAe=eAe;const nAe=st(tAe);function Cf(t){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cf(t)}var rAe=["valueAccessor"],iAe=["data","dataKey","clockWise","id","textBreakAll"];function sAe(t){return cAe(t)||lAe(t)||oAe(t)||aAe()}function aAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oAe(t,e){if(t){if(typeof t=="string")return Xw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xw(t,e)}}function lAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function cAe(t){if(Array.isArray(t))return Xw(t)}function Xw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Pg(){return Pg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pg.apply(this,arguments)}function xk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xk(Object(n),!0).forEach(function(r){uAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uAe(t,e,n){return e=dAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dAe(t){var e=fAe(t,"string");return Cf(e)=="symbol"?e:e+""}function fAe(t,e){if(Cf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wk(t,e){if(t==null)return{};var n=hAe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function hAe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var pAe=function(e){return Array.isArray(e.value)?nAe(e.value):e.value};function Zi(t){var e=t.valueAccessor,n=e===void 0?pAe:e,r=wk(t,rAe),i=r.data,s=r.dataKey,a=r.clockWise,l=r.id,c=r.textBreakAll,u=wk(r,iAe);return!i||!i.length?null:L.createElement(Xe,{className:"recharts-label-list"},i.map(function(d,f){var h=Re(s)?n(d,f):Jt(d&&d.payload,s),m=Re(l)?{}:{id:"".concat(l,"-").concat(f)};return L.createElement(an,Pg({},be(d,!0),u,m,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:an.parseViewBox(Re(a)?d:bk(bk({},d),{},{clockWise:a})),key:"label-".concat(f),index:f}))}))}Zi.displayName="LabelList";function mAe(t,e){return t?t===!0?L.createElement(Zi,{key:"labelList-implicit",data:e}):L.isValidElement(t)||je(t)?L.createElement(Zi,{key:"labelList-implicit",data:e,content:t}):Gc(t)?L.createElement(Zi,Pg({data:e},t,{key:"labelList-implicit"})):null:null}function gAe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Tr(r,Zi).map(function(a,l){return k.cloneElement(a,{data:e,key:"labelList-".concat(l)})});if(!n)return i;var s=mAe(t.label,e);return[s].concat(sAe(i))}Zi.renderCallByParent=gAe;function jf(t){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jf(t)}function Qw(){return Qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qw.apply(this,arguments)}function _k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_k(Object(n),!0).forEach(function(r){yAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_k(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yAe(t,e,n){return e=vAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vAe(t){var e=xAe(t,"string");return jf(e)=="symbol"?e:e+""}function xAe(t,e){if(jf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bAe=function(e,n){var r=Rn(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},yp=function(e){var n=e.cx,r=e.cy,i=e.radius,s=e.angle,a=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(l?1:-1)+i,f=Math.asin(c/d)/Tg,h=u?s:s+a*f,m=mt(n,r,d,h),y=mt(n,r,i,h),g=u?s-a*f:s,v=mt(n,r,d*Math.cos(f*Tg),g);return{center:m,circleTangency:y,lineTangency:v,theta:f}},k4=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.startAngle,l=e.endAngle,c=bAe(a,l),u=a+c,d=mt(n,r,s,a),f=mt(n,r,s,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(a>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var m=mt(n,r,i,a),y=mt(n,r,i,u);h+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(a<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},wAe=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,f=Rn(d-u),h=yp({cx:n,cy:r,radius:s,angle:u,sign:f,cornerRadius:a,cornerIsExternal:c}),m=h.circleTangency,y=h.lineTangency,g=h.theta,v=yp({cx:n,cy:r,radius:s,angle:d,sign:-f,cornerRadius:a,cornerIsExternal:c}),x=v.circleTangency,w=v.lineTangency,b=v.theta,N=c?Math.abs(u-d):Math.abs(u-d)-g-b;if(N<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):k4({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:u,endAngle:d});var A="M ".concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(N>180),",").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
  `);if(i>0){var E=yp({cx:n,cy:r,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),C=E.circleTangency,S=E.lineTangency,_=E.theta,P=yp({cx:n,cy:r,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),T=P.circleTangency,O=P.lineTangency,R=P.theta,M=c?Math.abs(u-d):Math.abs(u-d)-_-R;if(M<0&&a===0)return"".concat(A,"L").concat(n,",").concat(r,"Z");A+="L".concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(M>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(S.x,",").concat(S.y,"Z")}else A+="L".concat(n,",").concat(r,"Z");return A},_Ae={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},I4=function(e){var n=Sk(Sk({},_Ae),e),r=n.cx,i=n.cy,s=n.innerRadius,a=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,f=n.endAngle,h=n.className;if(a<s||d===f)return null;var m=Me("recharts-sector",h),y=a-s,g=$n(l,y,0,!0),v;return g>0&&Math.abs(d-f)<360?v=wAe({cx:r,cy:i,innerRadius:s,outerRadius:a,cornerRadius:Math.min(g,y/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):v=k4({cx:r,cy:i,innerRadius:s,outerRadius:a,startAngle:d,endAngle:f}),L.createElement("path",Qw({},be(n,!0),{className:m,d:v,role:"img"}))};function Tf(t){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tf(t)}function Jw(){return Jw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jw.apply(this,arguments)}function Nk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ak(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nk(Object(n),!0).forEach(function(r){SAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function SAe(t,e,n){return e=NAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NAe(t){var e=AAe(t,"string");return Tf(e)=="symbol"?e:e+""}function AAe(t,e){if(Tf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ek={curveBasisClosed:Sfe,curveBasisOpen:Nfe,curveBasis:_fe,curveBumpX:lfe,curveBumpY:cfe,curveLinearClosed:Afe,curveLinear:cv,curveMonotoneX:Efe,curveMonotoneY:Cfe,curveNatural:jfe,curveStep:Tfe,curveStepAfter:kfe,curveStepBefore:Pfe},vp=function(e){return e.x===+e.x&&e.y===+e.y},Mu=function(e){return e.x},Lu=function(e){return e.y},EAe=function(e,n){if(je(e))return e;var r="curve".concat(ov(e));return(r==="curveMonotone"||r==="curveBump")&&n?Ek["".concat(r).concat(n==="vertical"?"Y":"X")]:Ek[r]||cv},CAe=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,a=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=EAe(r,l),f=u?s.filter(function(g){return vp(g)}):s,h;if(Array.isArray(a)){var m=u?a.filter(function(g){return vp(g)}):a,y=f.map(function(g,v){return Ak(Ak({},g),{},{base:m[v]})});return l==="vertical"?h=lp().y(Lu).x1(Mu).x0(function(g){return g.base.x}):h=lp().x(Mu).y1(Lu).y0(function(g){return g.base.y}),h.defined(vp).curve(d),h(y)}return l==="vertical"&&te(a)?h=lp().y(Lu).x1(Mu).x0(a):te(a)?h=lp().x(Mu).y1(Lu).y0(a):h=CM().x(Mu).y(Lu),h.defined(vp).curve(d),h(f)},Vl=function(e){var n=e.className,r=e.points,i=e.path,s=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?CAe(e):i;return k.createElement("path",Jw({},be(e,!1),Zm(e),{className:Me("recharts-curve",n),d:a,ref:s}))},O4={exports:{}},jAe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",TAe=jAe,PAe=TAe;function R4(){}function $4(){}$4.resetWarningCache=R4;var kAe=function(){function t(r,i,s,a,l,c){if(c!==PAe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:$4,resetWarningCache:R4};return n.PropTypes=n,n};O4.exports=kAe();var IAe=O4.exports;const nt=st(IAe),{getOwnPropertyNames:OAe,getOwnPropertySymbols:RAe}=Object,{hasOwnProperty:$Ae}=Object.prototype;function hx(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function xp(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:s}=i,a=s.get(n),l=s.get(r);if(a&&l)return a===r&&l===n;s.set(n,r),s.set(r,n);const c=t(n,r,i);return s.delete(n),s.delete(r),c}}function DAe(t){return t!=null?t[Symbol.toStringTag]:void 0}function Ck(t){return OAe(t).concat(RAe(t))}const MAe=Object.hasOwn||((t,e)=>$Ae.call(t,e));function Uo(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const LAe="__v",FAe="__o",VAe="_owner",{getOwnPropertyDescriptor:jk,keys:Tk}=Object;function BAe(t,e){return t.byteLength===e.byteLength&&kg(new Uint8Array(t),new Uint8Array(e))}function UAe(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function zAe(t,e){return t.byteLength===e.byteLength&&kg(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function qAe(t,e){return Uo(t.getTime(),e.getTime())}function WAe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function GAe(t,e){return t===e}function Pk(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.entries();let a,l,c=0;for(;(a=s.next())&&!a.done;){const u=e.entries();let d=!1,f=0;for(;(l=u.next())&&!l.done;){if(i[f]){f++;continue}const h=a.value,m=l.value;if(n.equals(h[0],m[0],c,f,t,e,n)&&n.equals(h[1],m[1],h[0],m[0],t,e,n)){d=i[f]=!0;break}f++}if(!d)return!1;c++}return!0}const HAe=Uo;function KAe(t,e,n){const r=Tk(t);let i=r.length;if(Tk(e).length!==i)return!1;for(;i-- >0;)if(!D4(t,e,n,r[i]))return!1;return!0}function Fu(t,e,n){const r=Ck(t);let i=r.length;if(Ck(e).length!==i)return!1;let s,a,l;for(;i-- >0;)if(s=r[i],!D4(t,e,n,s)||(a=jk(t,s),l=jk(e,s),(a||l)&&(!a||!l||a.configurable!==l.configurable||a.enumerable!==l.enumerable||a.writable!==l.writable)))return!1;return!0}function YAe(t,e){return Uo(t.valueOf(),e.valueOf())}function XAe(t,e){return t.source===e.source&&t.flags===e.flags}function kk(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.values();let a,l;for(;(a=s.next())&&!a.done;){const c=e.values();let u=!1,d=0;for(;(l=c.next())&&!l.done;){if(!i[d]&&n.equals(a.value,l.value,a.value,l.value,t,e,n)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function kg(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function QAe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function D4(t,e,n,r){return(r===VAe||r===FAe||r===LAe)&&(t.$$typeof||e.$$typeof)?!0:MAe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const JAe="[object ArrayBuffer]",ZAe="[object Arguments]",eEe="[object Boolean]",tEe="[object DataView]",nEe="[object Date]",rEe="[object Error]",iEe="[object Map]",sEe="[object Number]",aEe="[object Object]",oEe="[object RegExp]",lEe="[object Set]",cEe="[object String]",uEe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},dEe="[object URL]",fEe=Object.prototype.toString;function hEe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:a,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:f,areTypedArraysEqual:h,areUrlsEqual:m,unknownTagComparators:y}){return function(v,x,w){if(v===x)return!0;if(v==null||x==null)return!1;const b=typeof v;if(b!==typeof x)return!1;if(b!=="object")return b==="number"?l(v,x,w):b==="function"?s(v,x,w):!1;const N=v.constructor;if(N!==x.constructor)return!1;if(N===Object)return c(v,x,w);if(Array.isArray(v))return e(v,x,w);if(N===Date)return r(v,x,w);if(N===RegExp)return d(v,x,w);if(N===Map)return a(v,x,w);if(N===Set)return f(v,x,w);const A=fEe.call(v);if(A===nEe)return r(v,x,w);if(A===oEe)return d(v,x,w);if(A===iEe)return a(v,x,w);if(A===lEe)return f(v,x,w);if(A===aEe)return typeof v.then!="function"&&typeof x.then!="function"&&c(v,x,w);if(A===dEe)return m(v,x,w);if(A===rEe)return i(v,x,w);if(A===ZAe)return c(v,x,w);if(uEe[A])return h(v,x,w);if(A===JAe)return t(v,x,w);if(A===tEe)return n(v,x,w);if(A===eEe||A===sEe||A===cEe)return u(v,x,w);if(y){let E=y[A];if(!E){const C=DAe(v);C&&(E=y[C])}if(E)return E(v,x,w)}return!1}}function pEe({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:BAe,areArraysEqual:n?Fu:UAe,areDataViewsEqual:zAe,areDatesEqual:qAe,areErrorsEqual:WAe,areFunctionsEqual:GAe,areMapsEqual:n?hx(Pk,Fu):Pk,areNumbersEqual:HAe,areObjectsEqual:n?Fu:KAe,arePrimitiveWrappersEqual:YAe,areRegExpsEqual:XAe,areSetsEqual:n?hx(kk,Fu):kk,areTypedArraysEqual:n?hx(kg,Fu):kg,areUrlsEqual:QAe,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=xp(r.areArraysEqual),s=xp(r.areMapsEqual),a=xp(r.areObjectsEqual),l=xp(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:l})}return r}function mEe(t){return function(e,n,r,i,s,a,l){return t(e,n,l)}}function gEe({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(l,c){const{cache:u=t?new WeakMap:void 0,meta:d}=n();return e(l,c,{cache:u,equals:r,meta:d,strict:i})};if(t)return function(l,c){return e(l,c,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(l,c){return e(l,c,s)}}const yEe=Ca();Ca({strict:!0});Ca({circular:!0});Ca({circular:!0,strict:!0});Ca({createInternalComparator:()=>Uo});Ca({strict:!0,createInternalComparator:()=>Uo});Ca({circular:!0,createInternalComparator:()=>Uo});Ca({circular:!0,createInternalComparator:()=>Uo,strict:!0});function Ca(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,s=pEe(t),a=hEe(s),l=n?n(a):mEe(a);return gEe({circular:e,comparator:a,createState:r,equals:l,strict:i})}function vEe(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function Ik(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):vEe(i)};requestAnimationFrame(r)}function Zw(t){"@babel/helpers - typeof";return Zw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zw(t)}function xEe(t){return SEe(t)||_Ee(t)||wEe(t)||bEe()}function bEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wEe(t,e){if(t){if(typeof t=="string")return Ok(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ok(t,e)}}function Ok(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _Ee(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function SEe(t){if(Array.isArray(t))return t}function NEe(){var t={},e=function(){return null},n=!1,r=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var a=s,l=xEe(a),c=l[0],u=l.slice(1);if(typeof c=="number"){Ik(i.bind(null,u),c);return}i(c),Ik(i.bind(null,u));return}Zw(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function Pf(t){"@babel/helpers - typeof";return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pf(t)}function Rk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $k(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rk(Object(n),!0).forEach(function(r){M4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function M4(t,e,n){return e=AEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function AEe(t){var e=EEe(t,"string");return Pf(e)==="symbol"?e:String(e)}function EEe(t,e){if(Pf(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var CEe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(s){return i.includes(s)})})},jEe=function(e){return e},TEe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},bd=function(e,n){return Object.keys(n).reduce(function(r,i){return $k($k({},r),{},M4({},i,e(i,n[i])))},{})},Dk=function(e,n,r){return e.map(function(i){return"".concat(TEe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function PEe(t,e){return OEe(t)||IEe(t,e)||L4(t,e)||kEe()}function kEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IEe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function OEe(t){if(Array.isArray(t))return t}function REe(t){return MEe(t)||DEe(t)||L4(t)||$Ee()}function $Ee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L4(t,e){if(t){if(typeof t=="string")return e1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e1(t,e)}}function DEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function MEe(t){if(Array.isArray(t))return e1(t)}function e1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ig=1e-4,F4=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},V4=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},Mk=function(e,n){return function(r){var i=F4(e,n);return V4(i,r)}},LEe=function(e,n){return function(r){var i=F4(e,n),s=[].concat(REe(i.map(function(a,l){return a*l}).slice(1)),[0]);return V4(s,r)}},Lk=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],s=n[1],a=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,a=1,l=1;break;case"ease":i=.25,s=.1,a=.25,l=1;break;case"ease-in":i=.42,s=0,a=1,l=1;break;case"ease-out":i=.42,s=0,a=.58,l=1;break;case"ease-in-out":i=0,s=0,a=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),d=PEe(u,4);i=d[0],s=d[1],a=d[2],l=d[3]}}}var f=Mk(i,a),h=Mk(s,l),m=LEe(i,a),y=function(x){return x>1?1:x<0?0:x},g=function(x){for(var w=x>1?1:x,b=w,N=0;N<8;++N){var A=f(b)-w,E=m(b);if(Math.abs(A-w)<Ig||E<Ig)return h(b);b=y(b-A/E)}return h(b)};return g.isStepper=!1,g},FEe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,a=e.dt,l=a===void 0?17:a,c=function(d,f,h){var m=-(d-f)*r,y=h*s,g=h+(m-y)*l/1e3,v=h*l/1e3+d;return Math.abs(v-f)<Ig&&Math.abs(g)<Ig?[f,0]:[v,g]};return c.isStepper=!0,c.dt=l,c},VEe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Lk(i);case"spring":return FEe();default:if(i.split("(")[0]==="cubic-bezier")return Lk(i)}return typeof i=="function"?i:null};function kf(t){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kf(t)}function Fk(t){return zEe(t)||UEe(t)||B4(t)||BEe()}function BEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zEe(t){if(Array.isArray(t))return n1(t)}function Vk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vk(Object(n),!0).forEach(function(r){t1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function t1(t,e,n){return e=qEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qEe(t){var e=WEe(t,"string");return kf(e)==="symbol"?e:String(e)}function WEe(t,e){if(kf(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GEe(t,e){return YEe(t)||KEe(t,e)||B4(t,e)||HEe()}function HEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B4(t,e){if(t){if(typeof t=="string")return n1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n1(t,e)}}function n1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function KEe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function YEe(t){if(Array.isArray(t))return t}var Og=function(e,n,r){return e+(n-e)*r},r1=function(e){var n=e.from,r=e.to;return n!==r},XEe=function t(e,n,r){var i=bd(function(s,a){if(r1(a)){var l=e(a.from,a.to,a.velocity),c=GEe(l,2),u=c[0],d=c[1];return dn(dn({},a),{},{from:u,velocity:d})}return a},n);return r<1?bd(function(s,a){return r1(a)?dn(dn({},a),{},{velocity:Og(a.velocity,i[s].velocity,r),from:Og(a.from,i[s].from,r)}):a},n):t(e,i,r-1)};const QEe=function(t,e,n,r,i){var s=CEe(t,e),a=s.reduce(function(v,x){return dn(dn({},v),{},t1({},x,[t[x],e[x]]))},{}),l=s.reduce(function(v,x){return dn(dn({},v),{},t1({},x,{from:t[x],velocity:0,to:e[x]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return bd(function(x,w){return w.from},l)},m=function(){return!Object.values(l).filter(r1).length},y=function(x){u||(u=x);var w=x-u,b=w/n.dt;l=XEe(n,l,b),i(dn(dn(dn({},t),e),h())),u=x,m()||(c=requestAnimationFrame(f))},g=function(x){d||(d=x);var w=(x-d)/r,b=bd(function(A,E){return Og.apply(void 0,Fk(E).concat([n(w)]))},a);if(i(dn(dn(dn({},t),e),b)),w<1)c=requestAnimationFrame(f);else{var N=bd(function(A,E){return Og.apply(void 0,Fk(E).concat([n(1)]))},a);i(dn(dn(dn({},t),e),N))}};return f=n.isStepper?y:g,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function pc(t){"@babel/helpers - typeof";return pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pc(t)}var JEe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function ZEe(t,e){if(t==null)return{};var n=eCe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function eCe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function px(t){return iCe(t)||rCe(t)||nCe(t)||tCe()}function tCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nCe(t,e){if(t){if(typeof t=="string")return i1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i1(t,e)}}function rCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function iCe(t){if(Array.isArray(t))return i1(t)}function i1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Bk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bk(Object(n),!0).forEach(function(r){ed(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ed(t,e,n){return e=U4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aCe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,U4(r.key),r)}}function oCe(t,e,n){return e&&aCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function U4(t){var e=lCe(t,"string");return pc(e)==="symbol"?e:String(e)}function lCe(t,e){if(pc(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pc(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s1(t,e)}function s1(t,e){return s1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},s1(t,e)}function uCe(t){var e=dCe();return function(){var r=Rg(t),i;if(e){var s=Rg(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return a1(this,i)}}function a1(t,e){if(e&&(pc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o1(t)}function o1(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function dCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Rg(t){return Rg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Rg(t)}var _i=function(t){cCe(n,t);var e=uCe(n);function n(r,i){var s;sCe(this,n),s=e.call(this,r,i);var a=s.props,l=a.isActive,c=a.attributeName,u=a.from,d=a.to,f=a.steps,h=a.children,m=a.duration;if(s.handleStyleChange=s.handleStyleChange.bind(o1(s)),s.changeStyle=s.changeStyle.bind(o1(s)),!l||m<=0)return s.state={style:{}},typeof h=="function"&&(s.state={style:d}),a1(s);if(f&&f.length)s.state={style:f[0].style};else if(u){if(typeof h=="function")return s.state={style:u},a1(s);s.state={style:c?ed({},c,u):u}}else s.state={style:{}};return s}return oCe(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,a=i.canBegin;this.mounted=!0,!(!s||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,a=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,d=s.to,f=s.from,h=this.state.style;if(l){if(!a){var m={style:c?ed({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(m);return}if(!(yEe(i.to,d)&&i.canBegin&&i.isActive)){var y=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=y||u?f:i.to;if(this.state&&h){var v={style:c?ed({},c,g):g};(c&&h[c]!==g||!c&&h!==g)&&this.setState(v)}this.runAnimation(Lr(Lr({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,a=i.from,l=i.to,c=i.duration,u=i.easing,d=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,m=QEe(a,l,VEe(u),c,this.changeStyle),y=function(){s.stopJSAnimation=m()};this.manager.start([h,d,y,c,f])}},{key:"runStepAnimation",value:function(i){var s=this,a=i.steps,l=i.begin,c=i.onAnimationStart,u=a[0],d=u.style,f=u.duration,h=f===void 0?0:f,m=function(g,v,x){if(x===0)return g;var w=v.duration,b=v.easing,N=b===void 0?"ease":b,A=v.style,E=v.properties,C=v.onAnimationEnd,S=x>0?a[x-1]:v,_=E||Object.keys(A);if(typeof N=="function"||N==="spring")return[].concat(px(g),[s.runJSAnimation.bind(s,{from:S.style,to:A,duration:w,easing:N}),w]);var P=Dk(_,w,N),T=Lr(Lr(Lr({},S.style),A),{},{transition:P});return[].concat(px(g),[T,w,C]).filter(jEe)};return this.manager.start([c].concat(px(a.reduce(m,[d,Math.max(h,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=NEe());var s=i.begin,a=i.duration,l=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,m=i.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var g=l?ed({},l,c):c,v=Dk(Object.keys(g),a,u);y.start([d,s,Lr(Lr({},g),{},{transition:v}),a,f])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=ZEe(i,JEe),u=k.Children.count(s),d=this.state.style;if(typeof s=="function")return s(d);if(!l||u===0||a<=0)return s;var f=function(m){var y=m.props,g=y.style,v=g===void 0?{}:g,x=y.className,w=k.cloneElement(m,Lr(Lr({},c),{},{style:Lr(Lr({},v),d),className:x}));return w};return u===1?f(k.Children.only(s)):L.createElement("div",null,k.Children.map(s,function(h){return f(h)}))}}]),n}(k.PureComponent);_i.displayName="Animate";_i.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};_i.propTypes={from:nt.oneOfType([nt.object,nt.string]),to:nt.oneOfType([nt.object,nt.string]),attributeName:nt.string,duration:nt.number,begin:nt.number,easing:nt.oneOfType([nt.string,nt.func]),steps:nt.arrayOf(nt.shape({duration:nt.number.isRequired,style:nt.object.isRequired,easing:nt.oneOfType([nt.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),nt.func]),properties:nt.arrayOf("string"),onAnimationEnd:nt.func})),children:nt.oneOfType([nt.node,nt.func]),isActive:nt.bool,canBegin:nt.bool,onAnimationEnd:nt.func,shouldReAnimate:nt.bool,onAnimationStart:nt.func,onAnimationReStart:nt.func};function If(t){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},If(t)}function $g(){return $g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$g.apply(this,arguments)}function fCe(t,e){return gCe(t)||mCe(t,e)||pCe(t,e)||hCe()}function hCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pCe(t,e){if(t){if(typeof t=="string")return Uk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uk(t,e)}}function Uk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function gCe(t){if(Array.isArray(t))return t}function zk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zk(Object(n),!0).forEach(function(r){yCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yCe(t,e,n){return e=vCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vCe(t){var e=xCe(t,"string");return If(e)=="symbol"?e:e+""}function xCe(t,e){if(If(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(If(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wk=function(e,n,r,i,s){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),l=i>=0?1:-1,c=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(a>0&&s instanceof Array){for(var f=[0,0,0,0],h=0,m=4;h<m;h++)f[h]=s[h]>a?a:s[h];d="M".concat(e,",").concat(n+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+c*f[0],",").concat(n)),d+="L ".concat(e+r-c*f[1],",").concat(n),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+l*f[1])),d+="L ".concat(e+r,",").concat(n+i-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+r-c*f[2],",").concat(n+i)),d+="L ".concat(e+c*f[3],",").concat(n+i),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-l*f[3])),d+="Z"}else if(a>0&&s===+s&&s>0){var y=Math.min(a,s);d="M ".concat(e,",").concat(n+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+c*y,",").concat(n,`
            L `).concat(e+r-c*y,",").concat(n,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+r,",").concat(n+l*y,`
            L `).concat(e+r,",").concat(n+i-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+r-c*y,",").concat(n+i,`
            L `).concat(e+c*y,",").concat(n+i,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e,",").concat(n+i-l*y," Z")}else d="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},bCe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,s=n.x,a=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),d=Math.max(s,s+l),f=Math.min(a,a+c),h=Math.max(a,a+c);return r>=u&&r<=d&&i>=f&&i<=h}return!1},wCe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},nA=function(e){var n=qk(qk({},wCe),e),r=k.useRef(),i=k.useState(-1),s=fCe(i,2),a=s[0],l=s[1];k.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var N=r.current.getTotalLength();N&&l(N)}catch{}},[]);var c=n.x,u=n.y,d=n.width,f=n.height,h=n.radius,m=n.className,y=n.animationEasing,g=n.animationDuration,v=n.animationBegin,x=n.isAnimationActive,w=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var b=Me("recharts-rectangle",m);return w?L.createElement(_i,{canBegin:a>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:g,animationEasing:y,isActive:w},function(N){var A=N.width,E=N.height,C=N.x,S=N.y;return L.createElement(_i,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,isActive:x,easing:y},L.createElement("path",$g({},be(n,!0),{className:b,d:Wk(C,S,A,E,h),ref:r})))}):L.createElement("path",$g({},be(n,!0),{className:b,d:Wk(c,u,d,f,h)}))},_Ce=["points","className","baseLinePoints","connectNulls"];function _l(){return _l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_l.apply(this,arguments)}function SCe(t,e){if(t==null)return{};var n=NCe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function NCe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Gk(t){return jCe(t)||CCe(t)||ECe(t)||ACe()}function ACe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ECe(t,e){if(t){if(typeof t=="string")return l1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l1(t,e)}}function CCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function jCe(t){if(Array.isArray(t))return l1(t)}function l1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Hk=function(e){return e&&e.x===+e.x&&e.y===+e.y},TCe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){Hk(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),Hk(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},wd=function(e,n){var r=TCe(e);n&&(r=[r.reduce(function(s,a){return[].concat(Gk(s),Gk(a))},[])]);var i=r.map(function(s){return s.reduce(function(a,l,c){return"".concat(a).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},PCe=function(e,n,r){var i=wd(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(wd(n.reverse(),r).slice(1))},kCe=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,s=e.connectNulls,a=SCe(e,_Ce);if(!n||!n.length)return null;var l=Me("recharts-polygon",r);if(i&&i.length){var c=a.stroke&&a.stroke!=="none",u=PCe(n,i,s);return L.createElement("g",{className:l},L.createElement("path",_l({},be(a,!0),{fill:u.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:u})),c?L.createElement("path",_l({},be(a,!0),{fill:"none",d:wd(n,s)})):null,c?L.createElement("path",_l({},be(a,!0),{fill:"none",d:wd(i,s)})):null)}var d=wd(n,s);return L.createElement("path",_l({},be(a,!0),{fill:d.slice(-1)==="Z"?a.fill:"none",className:l,d}))};function c1(){return c1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c1.apply(this,arguments)}var Ev=function(e){var n=e.cx,r=e.cy,i=e.r,s=e.className,a=Me("recharts-dot",s);return n===+n&&r===+r&&i===+i?k.createElement("circle",c1({},be(e,!1),Zm(e),{className:a,cx:n,cy:r,r:i})):null};function Of(t){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(t)}var ICe=["x","y","top","left","width","height","className"];function u1(){return u1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u1.apply(this,arguments)}function Kk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function OCe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kk(Object(n),!0).forEach(function(r){RCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RCe(t,e,n){return e=$Ce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Ce(t){var e=DCe(t,"string");return Of(e)=="symbol"?e:e+""}function DCe(t,e){if(Of(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function MCe(t,e){if(t==null)return{};var n=LCe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function LCe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var FCe=function(e,n,r,i,s,a){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},VCe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,a=e.top,l=a===void 0?0:a,c=e.left,u=c===void 0?0:c,d=e.width,f=d===void 0?0:d,h=e.height,m=h===void 0?0:h,y=e.className,g=MCe(e,ICe),v=OCe({x:r,y:s,top:l,left:u,width:f,height:m},g);return!te(r)||!te(s)||!te(f)||!te(m)||!te(l)||!te(u)?null:L.createElement("path",u1({},be(v,!0),{className:Me("recharts-cross",y),d:FCe(r,s,f,m,l,u)}))},BCe=wv,UCe=e4,zCe=Ci;function qCe(t,e){return t&&t.length?BCe(t,zCe(e),UCe):void 0}var WCe=qCe;const GCe=st(WCe);var HCe=wv,KCe=Ci,YCe=t4;function XCe(t,e){return t&&t.length?HCe(t,KCe(e),YCe):void 0}var QCe=XCe;const JCe=st(QCe);var ZCe=["cx","cy","angle","ticks","axisLine"],eje=["ticks","tick","angle","tickFormatter","stroke"];function mc(t){"@babel/helpers - typeof";return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mc(t)}function _d(){return _d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_d.apply(this,arguments)}function Yk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $a(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yk(Object(n),!0).forEach(function(r){Cv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xk(t,e){if(t==null)return{};var n=tje(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function tje(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function nje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q4(r.key),r)}}function rje(t,e,n){return e&&Qk(t.prototype,e),n&&Qk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ije(t,e,n){return e=Dg(e),sje(t,z4()?Reflect.construct(e,n||[],Dg(t).constructor):e.apply(t,n))}function sje(t,e){if(e&&(mc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aje(t)}function aje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z4=function(){return!!t})()}function Dg(t){return Dg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dg(t)}function oje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d1(t,e)}function d1(t,e){return d1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},d1(t,e)}function Cv(t,e,n){return e=q4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q4(t){var e=lje(t,"string");return mc(e)=="symbol"?e:e+""}function lje(t,e){if(mc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var jv=function(t){function e(){return nje(this,e),ije(this,e,arguments)}return oje(e,t),rje(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,s=this.props,a=s.angle,l=s.cx,c=s.cy;return mt(l,c,i,a)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,s=r.cy,a=r.angle,l=r.ticks,c=GCe(l,function(d){return d.coordinate||0}),u=JCe(l,function(d){return d.coordinate||0});return{cx:i,cy:s,startAngle:a,endAngle:a,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,s=r.cy,a=r.angle,l=r.ticks,c=r.axisLine,u=Xk(r,ZCe),d=l.reduce(function(y,g){return[Math.min(y[0],g.coordinate),Math.max(y[1],g.coordinate)]},[1/0,-1/0]),f=mt(i,s,d[0],a),h=mt(i,s,d[1],a),m=$a($a($a({},be(u,!1)),{},{fill:"none"},be(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return L.createElement("line",_d({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var r=this,i=this.props,s=i.ticks,a=i.tick,l=i.angle,c=i.tickFormatter,u=i.stroke,d=Xk(i,eje),f=this.getTickTextAnchor(),h=be(d,!1),m=be(a,!1),y=s.map(function(g,v){var x=r.getTickValueCoord(g),w=$a($a($a($a({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(x.x,", ").concat(x.y,")")},h),{},{stroke:"none",fill:u},m),{},{index:v},x),{},{payload:g});return L.createElement(Xe,_d({className:Me("recharts-polar-radius-axis-tick",T4(a)),key:"tick-".concat(g.coordinate)},Co(r.props,g,v)),e.renderTickItem(a,w,c?c(g.value,v):g.value))});return L.createElement(Xe,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var r=this.props,i=r.ticks,s=r.axisLine,a=r.tick;return!i||!i.length?null:L.createElement(Xe,{className:Me("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),a&&this.renderTicks(),an.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,s){var a;return L.isValidElement(r)?a=L.cloneElement(r,i):je(r)?a=r(i):a=L.createElement(jo,_d({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),a}}])}(k.PureComponent);Cv(jv,"displayName","PolarRadiusAxis");Cv(jv,"axisType","radiusAxis");Cv(jv,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function gc(t){"@babel/helpers - typeof";return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gc(t)}function qa(){return qa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qa.apply(this,arguments)}function Jk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Da(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jk(Object(n),!0).forEach(function(r){Tv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zk(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G4(r.key),r)}}function uje(t,e,n){return e&&Zk(t.prototype,e),n&&Zk(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function dje(t,e,n){return e=Mg(e),fje(t,W4()?Reflect.construct(e,n||[],Mg(t).constructor):e.apply(t,n))}function fje(t,e){if(e&&(gc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hje(t)}function hje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function W4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W4=function(){return!!t})()}function Mg(t){return Mg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mg(t)}function pje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f1(t,e)}function f1(t,e){return f1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},f1(t,e)}function Tv(t,e,n){return e=G4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G4(t){var e=mje(t,"string");return gc(e)=="symbol"?e:e+""}function mje(t,e){if(gc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gje=Math.PI/180,e2=1e-5,Pv=function(t){function e(){return cje(this,e),dje(this,e,arguments)}return pje(e,t),uje(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.cx,a=i.cy,l=i.radius,c=i.orientation,u=i.tickSize,d=u||8,f=mt(s,a,l,r.coordinate),h=mt(s,a,l+(c==="inner"?-1:1)*d,r.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,s=Math.cos(-r.coordinate*gje),a;return s>e2?a=i==="outer"?"start":"end":s<-e2?a=i==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,s=r.cy,a=r.radius,l=r.axisLine,c=r.axisLineType,u=Da(Da({},be(this.props,!1)),{},{fill:"none"},be(l,!1));if(c==="circle")return L.createElement(Ev,qa({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:s,r:a}));var d=this.props.ticks,f=d.map(function(h){return mt(i,s,a,h.coordinate)});return L.createElement(kCe,qa({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,s=i.ticks,a=i.tick,l=i.tickLine,c=i.tickFormatter,u=i.stroke,d=be(this.props,!1),f=be(a,!1),h=Da(Da({},d),{},{fill:"none"},be(l,!1)),m=s.map(function(y,g){var v=r.getTickLineCoord(y),x=r.getTickTextAnchor(y),w=Da(Da(Da({textAnchor:x},d),{},{stroke:"none",fill:u},f),{},{index:g,payload:y,x:v.x2,y:v.y2});return L.createElement(Xe,qa({className:Me("recharts-polar-angle-axis-tick",T4(a)),key:"tick-".concat(y.coordinate)},Co(r.props,y,g)),l&&L.createElement("line",qa({className:"recharts-polar-angle-axis-tick-line"},h,v)),a&&e.renderTickItem(a,w,c?c(y.value,g):y.value))});return L.createElement(Xe,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,i=r.ticks,s=r.radius,a=r.axisLine;return s<=0||!i||!i.length?null:L.createElement(Xe,{className:Me("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,s){var a;return L.isValidElement(r)?a=L.cloneElement(r,i):je(r)?a=r(i):a=L.createElement(jo,qa({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),a}}])}(k.PureComponent);Tv(Pv,"displayName","PolarAngleAxis");Tv(Pv,"axisType","angleAxis");Tv(Pv,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var yje=QM,vje=yje(Object.getPrototypeOf,Object),xje=vje,bje=bs,wje=xje,_je=ws,Sje="[object Object]",Nje=Function.prototype,Aje=Object.prototype,H4=Nje.toString,Eje=Aje.hasOwnProperty,Cje=H4.call(Object);function jje(t){if(!_je(t)||bje(t)!=Sje)return!1;var e=wje(t);if(e===null)return!0;var n=Eje.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&H4.call(n)==Cje}var Tje=jje;const Pje=st(Tje);var kje=bs,Ije=ws,Oje="[object Boolean]";function Rje(t){return t===!0||t===!1||Ije(t)&&kje(t)==Oje}var $je=Rje;const Dje=st($je);function Rf(t){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rf(t)}function Lg(){return Lg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lg.apply(this,arguments)}function Mje(t,e){return Bje(t)||Vje(t,e)||Fje(t,e)||Lje()}function Lje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fje(t,e){if(t){if(typeof t=="string")return t2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t2(t,e)}}function t2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Vje(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function Bje(t){if(Array.isArray(t))return t}function n2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function r2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n2(Object(n),!0).forEach(function(r){Uje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Uje(t,e,n){return e=zje(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zje(t){var e=qje(t,"string");return Rf(e)=="symbol"?e:e+""}function qje(t,e){if(Rf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var i2=function(e,n,r,i,s){var a=r-i,l;return l="M ".concat(e,",").concat(n),l+="L ".concat(e+r,",").concat(n),l+="L ".concat(e+r-a/2,",").concat(n+s),l+="L ".concat(e+r-a/2-i,",").concat(n+s),l+="L ".concat(e,",").concat(n," Z"),l},Wje={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Gje=function(e){var n=r2(r2({},Wje),e),r=k.useRef(),i=k.useState(-1),s=Mje(i,2),a=s[0],l=s[1];k.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&l(b)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,f=n.lowerWidth,h=n.height,m=n.className,y=n.animationEasing,g=n.animationDuration,v=n.animationBegin,x=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var w=Me("recharts-trapezoid",m);return x?L.createElement(_i,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:g,animationEasing:y,isActive:x},function(b){var N=b.upperWidth,A=b.lowerWidth,E=b.height,C=b.x,S=b.y;return L.createElement(_i,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,easing:y},L.createElement("path",Lg({},be(n,!0),{className:w,d:i2(C,S,N,A,E),ref:r})))}):L.createElement("g",null,L.createElement("path",Lg({},be(n,!0),{className:w,d:i2(c,u,d,f,h)})))},Hje=["option","shapeType","propTransformer","activeClassName","isActive"];function $f(t){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$f(t)}function Kje(t,e){if(t==null)return{};var n=Yje(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Yje(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function s2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s2(Object(n),!0).forEach(function(r){Xje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xje(t,e,n){return e=Qje(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qje(t){var e=Jje(t,"string");return $f(e)=="symbol"?e:e+""}function Jje(t,e){if($f(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zje(t,e){return Fg(Fg({},e),t)}function eTe(t,e){return t==="symbols"}function a2(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return L.createElement(nA,n);case"trapezoid":return L.createElement(Gje,n);case"sector":return L.createElement(I4,n);case"symbols":if(eTe(e))return L.createElement(wN,n);break;default:return null}}function tTe(t){return k.isValidElement(t)?t.props:t}function K4(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?Zje:r,s=t.activeClassName,a=s===void 0?"recharts-active-shape":s,l=t.isActive,c=Kje(t,Hje),u;if(k.isValidElement(e))u=k.cloneElement(e,Fg(Fg({},c),tTe(e)));else if(je(e))u=e(c);else if(Pje(e)&&!Dje(e)){var d=i(e,c);u=L.createElement(a2,{shapeType:n,elementProps:d})}else{var f=c;u=L.createElement(a2,{shapeType:n,elementProps:f})}return l?L.createElement(Xe,{className:a},u):u}function kv(t,e){return e!=null&&"trapezoids"in t.props}function Iv(t,e){return e!=null&&"sectors"in t.props}function Df(t,e){return e!=null&&"points"in t.props}function nTe(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&s}function rTe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function iTe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function sTe(t,e){var n;return kv(t,e)?n=nTe:Iv(t,e)?n=rTe:Df(t,e)&&(n=iTe),n}function aTe(t,e){var n;return kv(t,e)?n="trapezoids":Iv(t,e)?n="sectors":Df(t,e)&&(n="points"),n}function oTe(t,e){if(kv(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Iv(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Df(t,e)?e.payload:{}}function lTe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=aTe(n,e),s=oTe(n,e),a=r.filter(function(c,u){var d=fc(s,c),f=n.props[i].filter(function(y){var g=sTe(n,e);return g(y,e)}),h=n.props[i].indexOf(f[f.length-1]),m=u===h;return d&&m}),l=r.indexOf(a[a.length-1]);return l}var tm;function yc(t){"@babel/helpers - typeof";return yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yc(t)}function Sl(){return Sl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sl.apply(this,arguments)}function o2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ft(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o2(Object(n),!0).forEach(function(r){Nr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,X4(r.key),r)}}function uTe(t,e,n){return e&&l2(t.prototype,e),n&&l2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function dTe(t,e,n){return e=Vg(e),fTe(t,Y4()?Reflect.construct(e,n||[],Vg(t).constructor):e.apply(t,n))}function fTe(t,e){if(e&&(yc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hTe(t)}function hTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y4=function(){return!!t})()}function Vg(t){return Vg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vg(t)}function pTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h1(t,e)}function h1(t,e){return h1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},h1(t,e)}function Nr(t,e,n){return e=X4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X4(t){var e=mTe(t,"string");return yc(e)=="symbol"?e:e+""}function mTe(t,e){if(yc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ss=function(t){function e(n){var r;return cTe(this,e),r=dTe(this,e,[n]),Nr(r,"pieRef",null),Nr(r,"sectorRefs",[]),Nr(r,"id",Qc("recharts-pie-")),Nr(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),je(i)&&i()}),Nr(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),je(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return pTe(e,t),uTe(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.label,l=s.labelLine,c=s.dataKey,u=s.valueKey,d=be(this.props,!1),f=be(a,!1),h=be(l,!1),m=a&&a.offsetRadius||20,y=r.map(function(g,v){var x=(g.startAngle+g.endAngle)/2,w=mt(g.cx,g.cy,g.outerRadius+m,x),b=ft(ft(ft(ft({},d),g),{},{stroke:"none"},f),{},{index:v,textAnchor:e.getTextAnchor(w.x,g.cx)},w),N=ft(ft(ft(ft({},d),g),{},{fill:"none",stroke:g.fill},h),{},{index:v,points:[mt(g.cx,g.cy,g.outerRadius,x),w]}),A=c;return Re(c)&&Re(u)?A="value":Re(c)&&(A=u),L.createElement(Xe,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(v)},l&&e.renderLabelLineItem(l,N,"line"),e.renderLabelItem(a,b,Jt(g,A)))});return L.createElement(Xe,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(r){var i=this,s=this.props,a=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var f=i.isActiveIndex(d),h=c&&i.hasActiveIndex()?c:null,m=f?a:h,y=ft(ft({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return L.createElement(Xe,Sl({ref:function(v){v&&!i.sectorRefs.includes(v)&&i.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},Co(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),L.createElement(K4,Sl({option:m,isActive:f,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,s=i.sectors,a=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state,h=f.prevSectors,m=f.prevIsAnimationActive;return L.createElement(_i,{begin:l,duration:c,isActive:a,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var g=y.t,v=[],x=s&&s[0],w=x.startAngle;return s.forEach(function(b,N){var A=h&&h[N],E=N>0?dr(b,"paddingAngle",0):0;if(A){var C=Bn(A.endAngle-A.startAngle,b.endAngle-b.startAngle),S=ft(ft({},b),{},{startAngle:w+E,endAngle:w+C(g)+E});v.push(S),w=S.endAngle}else{var _=b.endAngle,P=b.startAngle,T=Bn(0,_-P),O=T(g),R=ft(ft({},b),{},{startAngle:w+E,endAngle:w+O+E});v.push(R),w=R.endAngle}}),L.createElement(Xe,null,r.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var a=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,s=r.isAnimationActive,a=this.state.prevSectors;return s&&i&&i.length&&(!a||!fc(a,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,s=i.hide,a=i.sectors,l=i.className,c=i.label,u=i.cx,d=i.cy,f=i.innerRadius,h=i.outerRadius,m=i.isAnimationActive,y=this.state.isAnimationFinished;if(s||!a||!a.length||!te(u)||!te(d)||!te(f)||!te(h))return null;var g=Me("recharts-pie",l);return L.createElement(Xe,{tabIndex:this.props.rootTabIndex,className:g,ref:function(x){r.pieRef=x}},this.renderSectors(),c&&this.renderLabels(a),an.renderCallByParent(this.props,null,!1),(!m||y)&&Zi.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,s){if(L.isValidElement(r))return L.cloneElement(r,i);if(je(r))return r(i);var a=Me("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return L.createElement(Vl,Sl({},i,{key:s,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(r,i,s){if(L.isValidElement(r))return L.cloneElement(r,i);var a=s;if(je(r)&&(a=r(i),L.isValidElement(a)))return a;var l=Me("recharts-pie-label-text",typeof r!="boolean"&&!je(r)?r.className:"");return L.createElement(jo,Sl({},i,{alignmentBaseline:"middle",className:l}),a)}}])}(k.PureComponent);tm=Ss;Nr(Ss,"displayName","Pie");Nr(Ss,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Fo.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Nr(Ss,"parseDeltaAngle",function(t,e){var n=Rn(e-t),r=Math.min(Math.abs(e-t),360);return n*r});Nr(Ss,"getRealPieData",function(t){var e=t.data,n=t.children,r=be(t,!1),i=Tr(n,pv);return e&&e.length?e.map(function(s,a){return ft(ft(ft({payload:s},r),s),i&&i[a]&&i[a].props)}):i&&i.length?i.map(function(s){return ft(ft({},r),s.props)}):[]});Nr(Ss,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,s=e.height,a=j4(i,s),l=r+$n(t.cx,i,i/2),c=n+$n(t.cy,s,s/2),u=$n(t.innerRadius,a,0),d=$n(t.outerRadius,a,a*.8),f=t.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});Nr(Ss,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?ft(ft({},e.type.defaultProps),e.props):e.props,i=tm.getRealPieData(r);if(!i||!i.length)return null;var s=r.cornerRadius,a=r.startAngle,l=r.endAngle,c=r.paddingAngle,u=r.dataKey,d=r.nameKey,f=r.valueKey,h=r.tooltipType,m=Math.abs(r.minAngle),y=tm.parseCoordinateOfPie(r,n),g=tm.parseDeltaAngle(a,l),v=Math.abs(g),x=u;Re(u)&&Re(f)?(Kr(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):Re(u)&&(Kr(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=f);var w=i.filter(function(S){return Jt(S,x,0)!==0}).length,b=(v>=360?w:w-1)*c,N=v-w*m-b,A=i.reduce(function(S,_){var P=Jt(_,x,0);return S+(te(P)?P:0)},0),E;if(A>0){var C;E=i.map(function(S,_){var P=Jt(S,x,0),T=Jt(S,d,_),O=(te(P)?P:0)/A,R;_?R=C.endAngle+Rn(g)*c*(P!==0?1:0):R=a;var M=R+Rn(g)*((P!==0?m:0)+O*N),D=(R+M)/2,B=(y.innerRadius+y.outerRadius)/2,V=[{name:T,value:P,payload:S,dataKey:x,type:h}],F=mt(y.cx,y.cy,B,D);return C=ft(ft(ft({percent:O,cornerRadius:s,name:T,tooltipPayload:V,midAngle:D,middleRadius:B,tooltipPosition:F},S),y),{},{value:Jt(S,x),startAngle:R,endAngle:M,payload:S,paddingAngle:Rn(g)*c}),C})}return ft(ft({},y),{},{sectors:E,data:i})});var gTe=Math.ceil,yTe=Math.max;function vTe(t,e,n,r){for(var i=-1,s=yTe(gTe((e-t)/(n||1)),0),a=Array(s);s--;)a[r?s:++i]=t,t+=n;return a}var xTe=vTe,bTe=gL,c2=1/0,wTe=17976931348623157e292;function _Te(t){if(!t)return t===0?t:0;if(t=bTe(t),t===c2||t===-c2){var e=t<0?-1:1;return e*wTe}return t===t?t:0}var Q4=_Te,STe=xTe,NTe=hv,mx=Q4;function ATe(t){return function(e,n,r){return r&&typeof r!="number"&&NTe(e,n,r)&&(n=r=void 0),e=mx(e),n===void 0?(n=e,e=0):n=mx(n),r=r===void 0?e<n?1:-1:mx(r),STe(e,n,r,t)}}var ETe=ATe,CTe=ETe,jTe=CTe(),TTe=jTe;const Bg=st(TTe);function Mf(t){"@babel/helpers - typeof";return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mf(t)}function u2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function d2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u2(Object(n),!0).forEach(function(r){J4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function J4(t,e,n){return e=PTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function PTe(t){var e=kTe(t,"string");return Mf(e)=="symbol"?e:e+""}function kTe(t,e){if(Mf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ITe=["Webkit","Moz","O","ms"],OTe=function(e,n){var r=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=ITe.reduce(function(s,a){return d2(d2({},s),{},J4({},a+r,n))},{});return i[e]=n,i};function vc(t){"@babel/helpers - typeof";return vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vc(t)}function Ug(){return Ug=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ug.apply(this,arguments)}function f2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f2(Object(n),!0).forEach(function(r){er(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,e5(r.key),r)}}function $Te(t,e,n){return e&&h2(t.prototype,e),n&&h2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function DTe(t,e,n){return e=zg(e),MTe(t,Z4()?Reflect.construct(e,n||[],zg(t).constructor):e.apply(t,n))}function MTe(t,e){if(e&&(vc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LTe(t)}function LTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z4=function(){return!!t})()}function zg(t){return zg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zg(t)}function FTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p1(t,e)}function p1(t,e){return p1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},p1(t,e)}function er(t,e,n){return e=e5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e5(t){var e=VTe(t,"string");return vc(e)=="symbol"?e:e+""}function VTe(t,e){if(vc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var BTe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,s=e.x,a=e.width,l=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=vd().domain(Bg(0,c)).range([s,s+a-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},p2=function(e){return e.changedTouches&&!!e.changedTouches.length},xc=function(t){function e(n){var r;return RTe(this,e),r=DTe(this,e,[n]),er(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),er(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),er(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,s=i.endIndex,a=i.onDragEnd,l=i.startIndex;a==null||a({endIndex:s,startIndex:l})}),r.detachDragEndListener()}),er(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),er(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),er(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),er(r,"handleSlideDragStart",function(i){var s=p2(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return FTe(e,t),$Te(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,s=r.endX,a=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(i,s),h=Math.max(i,s),m=e.getIndexInRange(a,f),y=e.getIndexInRange(a,h);return{startIndex:m-m%c,endIndex:y===d?d:y-y%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,s=i.data,a=i.tickFormatter,l=i.dataKey,c=Jt(s[r],l,r);return je(a)?a(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,s=i.slideMoveStartX,a=i.startX,l=i.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,m=c.endIndex,y=c.onChange,g=r.pageX-s;g>0?g=Math.min(g,u+d-f-l,u+d-f-a):g<0&&(g=Math.max(g,u-a,u-l));var v=this.getIndex({startX:a+g,endX:l+g});(v.startIndex!==h||v.endIndex!==m)&&y&&y(v),this.setState({startX:a+g,endX:l+g,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var s=p2(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,s=i.brushMoveStartX,a=i.movingTravellerId,l=i.endX,c=i.startX,u=this.state[a],d=this.props,f=d.x,h=d.width,m=d.travellerWidth,y=d.onChange,g=d.gap,v=d.data,x={startX:this.state.startX,endX:this.state.endX},w=r.pageX-s;w>0?w=Math.min(w,f+h-m-u):w<0&&(w=Math.max(w,f-u)),x[a]=u+w;var b=this.getIndex(x),N=b.startIndex,A=b.endIndex,E=function(){var S=v.length-1;return a==="startX"&&(l>c?N%g===0:A%g===0)||l<c&&A===S||a==="endX"&&(l>c?A%g===0:N%g===0)||l>c&&A===S};this.setState(er(er({},a,u+w),"brushMoveStartX",r.pageX),function(){y&&E()&&y(b)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var s=this,a=this.state,l=a.scaleValues,c=a.startX,u=a.endX,d=this.state[i],f=l.indexOf(d);if(f!==-1){var h=f+r;if(!(h===-1||h>=l.length)){var m=l[h];i==="startX"&&m>=u||i==="endX"&&m<=c||this.setState(er({},i,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,l=r.height,c=r.fill,u=r.stroke;return L.createElement("rect",{stroke:u,fill:c,x:i,y:s,width:a,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,l=r.height,c=r.data,u=r.children,d=r.padding,f=k.Children.only(u);return f?L.cloneElement(f,{x:i,y:s,width:a,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var s,a,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,m=c.ariaLabel,y=c.data,g=c.startIndex,v=c.endIndex,x=Math.max(r,this.props.x),w=gx(gx({},be(this.props,!1)),{},{x,y:u,width:d,height:f}),b=m||"Min value: ".concat((s=y[g])===null||s===void 0?void 0:s.name,", Max value: ").concat((a=y[v])===null||a===void 0?void 0:a.name);return L.createElement(Xe,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(A){["ArrowLeft","ArrowRight"].includes(A.key)&&(A.preventDefault(),A.stopPropagation(),l.handleTravellerMoveKeyboard(A.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,w))}},{key:"renderSlide",value:function(r,i){var s=this.props,a=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,d=Math.min(r,i)+u,f=Math.max(Math.abs(i-r)-u,0);return L.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:a,width:f,height:l})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,s=r.endIndex,a=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,f=d.startX,h=d.endX,m=5,y={pointerEvents:"none",fill:u};return L.createElement(Xe,{className:"recharts-brush-texts"},L.createElement(jo,Ug({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-m,y:a+l/2},y),this.getTextOfTick(i)),L.createElement(jo,Ug({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+m,y:a+l/2},y),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,i=r.data,s=r.className,a=r.children,l=r.x,c=r.y,u=r.width,d=r.height,f=r.alwaysShowText,h=this.state,m=h.startX,y=h.endX,g=h.isTextActive,v=h.isSlideMoving,x=h.isTravellerMoving,w=h.isTravellerFocused;if(!i||!i.length||!te(l)||!te(c)||!te(u)||!te(d)||u<=0||d<=0)return null;var b=Me("recharts-brush",s),N=L.Children.count(a)===1,A=OTe("userSelect","none");return L.createElement(Xe,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:A},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(m,y),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(y,"endX"),(g||v||x||w||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,s=r.y,a=r.width,l=r.height,c=r.stroke,u=Math.floor(s+l/2)-1;return L.createElement(L.Fragment,null,L.createElement("rect",{x:i,y:s,width:a,height:l,fill:c,stroke:"none"}),L.createElement("line",{x1:i+1,y1:u,x2:i+a-1,y2:u,fill:"none",stroke:"#fff"}),L.createElement("line",{x1:i+1,y1:u+2,x2:i+a-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var s;return L.isValidElement(r)?s=L.cloneElement(r,i):je(r)?s=r(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(r,i){var s=r.data,a=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,f=r.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return gx({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:a},s&&s.length?BTe({data:s,width:a,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+a-c]);var h=i.scale.domain().map(function(m){return i.scale(m)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var s=r.length,a=0,l=s-1;l-a>1;){var c=Math.floor((a+l)/2);r[c]>i?l=c:a=c}return i>=r[l]?l:a}}])}(k.PureComponent);er(xc,"displayName","Brush");er(xc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var UTe=jN;function zTe(t,e){var n;return UTe(t,function(r,i,s){return n=e(r,i,s),!n}),!!n}var qTe=zTe,WTe=zM,GTe=Ci,HTe=qTe,KTe=Jn,YTe=hv;function XTe(t,e,n){var r=KTe(t)?WTe:HTe;return n&&YTe(t,e,n)&&(e=void 0),r(t,GTe(e))}var QTe=XTe;const JTe=st(QTe);var vi=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},m2=dL;function ZTe(t,e,n){e=="__proto__"&&m2?m2(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var ePe=ZTe,tPe=ePe,nPe=cL,rPe=Ci;function iPe(t,e){var n={};return e=rPe(e),nPe(t,function(r,i,s){tPe(n,i,e(r,i,s))}),n}var sPe=iPe;const aPe=st(sPe);function oPe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var lPe=oPe,cPe=jN;function uPe(t,e){var n=!0;return cPe(t,function(r,i,s){return n=!!e(r,i,s),n}),n}var dPe=uPe,fPe=lPe,hPe=dPe,pPe=Ci,mPe=Jn,gPe=hv;function yPe(t,e,n){var r=mPe(t)?fPe:hPe;return n&&gPe(t,e,n)&&(e=void 0),r(t,pPe(e))}var vPe=yPe;const t5=st(vPe);var xPe=["x","y"];function Lf(t){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lf(t)}function m1(){return m1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m1.apply(this,arguments)}function g2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?g2(Object(n),!0).forEach(function(r){bPe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bPe(t,e,n){return e=wPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wPe(t){var e=_Pe(t,"string");return Lf(e)=="symbol"?e:e+""}function _Pe(t,e){if(Lf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function SPe(t,e){if(t==null)return{};var n=NPe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function NPe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function APe(t,e){var n=t.x,r=t.y,i=SPe(t,xPe),s="".concat(n),a=parseInt(s,10),l="".concat(r),c=parseInt(l,10),u="".concat(e.height||i.height),d=parseInt(u,10),f="".concat(e.width||i.width),h=parseInt(f,10);return Vu(Vu(Vu(Vu(Vu({},e),i),a?{x:a}:{}),c?{y:c}:{}),{},{height:d,width:h,name:e.name,radius:e.radius})}function y2(t){return L.createElement(K4,m1({shapeType:"rectangle",propTransformer:APe,activeClassName:"recharts-active-bar"},t))}var EPe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var s=te(r)||Hue(r);return s?e(r,i):(s||Po(),n)}},CPe=["value","background"],n5;function bc(t){"@babel/helpers - typeof";return bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bc(t)}function jPe(t,e){if(t==null)return{};var n=TPe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function TPe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function qg(){return qg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qg.apply(this,arguments)}function v2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Bt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v2(Object(n),!0).forEach(function(r){Ks(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function PPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function x2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i5(r.key),r)}}function kPe(t,e,n){return e&&x2(t.prototype,e),n&&x2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function IPe(t,e,n){return e=Wg(e),OPe(t,r5()?Reflect.construct(e,n||[],Wg(t).constructor):e.apply(t,n))}function OPe(t,e){if(e&&(bc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RPe(t)}function RPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r5=function(){return!!t})()}function Wg(t){return Wg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Wg(t)}function $Pe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g1(t,e)}function g1(t,e){return g1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},g1(t,e)}function Ks(t,e,n){return e=i5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i5(t){var e=DPe(t,"string");return bc(e)=="symbol"?e:e+""}function DPe(t,e){if(bc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var zo=function(t){function e(){var n;PPe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=IPe(this,e,[].concat(i)),Ks(n,"state",{isAnimationFinished:!1}),Ks(n,"id",Qc("recharts-bar-")),Ks(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),Ks(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return $Pe(e,t),kPe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,s=this.props,a=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,d=be(this.props,!1);return r&&r.map(function(f,h){var m=h===c,y=m?u:a,g=Bt(Bt(Bt({},d),f),{},{isActive:m,option:y,index:h,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return L.createElement(Xe,qg({className:"recharts-bar-rectangle"},Co(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),L.createElement(y2,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,s=i.data,a=i.layout,l=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,f=i.animationId,h=this.state.prevData;return L.createElement(_i,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var y=m.t,g=s.map(function(v,x){var w=h&&h[x];if(w){var b=Bn(w.x,v.x),N=Bn(w.y,v.y),A=Bn(w.width,v.width),E=Bn(w.height,v.height);return Bt(Bt({},v),{},{x:b(y),y:N(y),width:A(y),height:E(y)})}if(a==="horizontal"){var C=Bn(0,v.height),S=C(y);return Bt(Bt({},v),{},{y:v.y+v.height-S,height:S})}var _=Bn(0,v.width),P=_(y);return Bt(Bt({},v),{},{width:P})});return L.createElement(Xe,null,r.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,s=r.isAnimationActive,a=this.state.prevData;return s&&i&&i.length&&(!a||!fc(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,s=i.data,a=i.dataKey,l=i.activeIndex,c=be(this.props.background,!1);return s.map(function(u,d){u.value;var f=u.background,h=jPe(u,CPe);if(!f)return null;var m=Bt(Bt(Bt(Bt(Bt({},h),{},{fill:"#eee"},f),c),Co(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:d,className:"recharts-bar-background-rectangle"});return L.createElement(y2,qg({key:"background-bar-".concat(d),option:r.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,f=Tr(d,Av);if(!f)return null;var h=u==="vertical"?a[0].height/2:a[0].width/2,m=function(v,x){var w=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:w,errorVal:Jt(v,x)}},y={clipPath:r?"url(#clipPath-".concat(i,")"):null};return L.createElement(Xe,y,f.map(function(g){return L.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:a,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.data,a=r.className,l=r.xAxis,c=r.yAxis,u=r.left,d=r.top,f=r.width,h=r.height,m=r.isAnimationActive,y=r.background,g=r.id;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,x=Me("recharts-bar",a),w=l&&l.allowDataOverflow,b=c&&c.allowDataOverflow,N=w||b,A=Re(g)?this.id:g;return L.createElement(Xe,{className:x},w||b?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(A)},L.createElement("rect",{x:w?u:u-f/2,y:b?d:d-h/2,width:w?f:f*2,height:b?h:h*2}))):null,L.createElement(Xe,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(A,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,A),(!m||v)&&Zi.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(k.PureComponent);n5=zo;Ks(zo,"displayName","Bar");Ks(zo,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Fo.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ks(zo,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,s=t.xAxis,a=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,h=t.offset,m=fNe(r,n);if(!m)return null;var y=e.layout,g=n.type.defaultProps,v=g!==void 0?Bt(Bt({},g),n.props):n.props,x=v.dataKey,w=v.children,b=v.minPointSize,N=y==="horizontal"?a:s,A=u?N.scale.domain():null,E=xNe({numericAxis:N}),C=Tr(w,pv),S=f.map(function(_,P){var T,O,R,M,D,B;u?T=hNe(u[d+P],A):(T=Jt(_,x),Array.isArray(T)||(T=[E,T]));var V=EPe(b,n5.defaultProps.minPointSize)(T[1],P);if(y==="horizontal"){var F,q=[a.scale(T[0]),a.scale(T[1])],H=q[0],Z=q[1];O=dk({axis:s,ticks:l,bandSize:i,offset:m.offset,entry:_,index:P}),R=(F=Z??H)!==null&&F!==void 0?F:void 0,M=m.size;var Y=H-Z;if(D=Number.isNaN(Y)?0:Y,B={x:O,y:a.y,width:M,height:a.height},Math.abs(V)>0&&Math.abs(D)<Math.abs(V)){var re=Rn(D||V)*(Math.abs(V)-Math.abs(D));R-=re,D+=re}}else{var z=[s.scale(T[0]),s.scale(T[1])],se=z[0],me=z[1];if(O=se,R=dk({axis:a,ticks:c,bandSize:i,offset:m.offset,entry:_,index:P}),M=me-se,D=m.size,B={x:s.x,y:R,width:s.width,height:D},Math.abs(V)>0&&Math.abs(M)<Math.abs(V)){var ze=Rn(M||V)*(Math.abs(V)-Math.abs(M));M+=ze}}return Bt(Bt(Bt({},_),{},{x:O,y:R,width:M,height:D,value:u?T:T[1],payload:_,background:B},C&&C[P]&&C[P].props),{},{tooltipPayload:[E4(n,_)],tooltipPosition:{x:O+M/2,y:R+D/2}})});return Bt({data:S,layout:y},h)});function Ff(t){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ff(t)}function MPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function b2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s5(r.key),r)}}function LPe(t,e,n){return e&&b2(t.prototype,e),n&&b2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function w2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ur(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w2(Object(n),!0).forEach(function(r){Ov(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ov(t,e,n){return e=s5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s5(t){var e=FPe(t,"string");return Ff(e)=="symbol"?e:e+""}function FPe(t,e){if(Ff(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var a5=function(e,n,r,i,s){var a=e.width,l=e.height,c=e.layout,u=e.children,d=Object.keys(n),f={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},h=!!nr(u,zo);return d.reduce(function(m,y){var g=n[y],v=g.orientation,x=g.domain,w=g.padding,b=w===void 0?{}:w,N=g.mirror,A=g.reversed,E="".concat(v).concat(N?"Mirror":""),C,S,_,P,T;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var O=x[1]-x[0],R=1/0,M=g.categoricalDomain.sort(Xue);if(M.forEach(function(z,se){se>0&&(R=Math.min((z||0)-(M[se-1]||0),R))}),Number.isFinite(R)){var D=R/O,B=g.layout==="vertical"?r.height:r.width;if(g.padding==="gap"&&(C=D*B/2),g.padding==="no-gap"){var V=$n(e.barCategoryGap,D*B),F=D*B/2;C=F-V-(F-V)/B*V}}}i==="xAxis"?S=[r.left+(b.left||0)+(C||0),r.left+r.width-(b.right||0)-(C||0)]:i==="yAxis"?S=c==="horizontal"?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(C||0),r.top+r.height-(b.bottom||0)-(C||0)]:S=g.range,A&&(S=[S[1],S[0]]);var q=_4(g,s,h),H=q.scale,Z=q.realScaleType;H.domain(x).range(S),S4(H);var Y=N4(H,Ur(Ur({},g),{},{realScaleType:Z}));i==="xAxis"?(T=v==="top"&&!N||v==="bottom"&&N,_=r.left,P=f[E]-T*g.height):i==="yAxis"&&(T=v==="left"&&!N||v==="right"&&N,_=f[E]-T*g.width,P=r.top);var re=Ur(Ur(Ur({},g),Y),{},{realScaleType:Z,x:_,y:P,scale:H,width:i==="xAxis"?r.width:g.width,height:i==="yAxis"?r.height:g.height});return re.bandSize=jg(re,Y),!g.hide&&i==="xAxis"?f[E]+=(T?-1:1)*re.height:g.hide||(f[E]+=(T?-1:1)*re.width),Ur(Ur({},m),{},Ov({},y,re))},{})},o5=function(e,n){var r=e.x,i=e.y,s=n.x,a=n.y;return{x:Math.min(r,s),y:Math.min(i,a),width:Math.abs(s-r),height:Math.abs(a-i)}},VPe=function(e){var n=e.x1,r=e.y1,i=e.x2,s=e.y2;return o5({x:n,y:r},{x:i,y:s})},l5=function(){function t(e){MPe(this,t),this.scale=e}return LPe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],s=r[r.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();Ov(l5,"EPS",1e-4);var rA=function(e){var n=Object.keys(e).reduce(function(r,i){return Ur(Ur({},r),{},Ov({},i,l5.create(e[i])))},{});return Ur(Ur({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,l=s.position;return aPe(i,function(c,u){return n[u].apply(c,{bandAware:a,position:l})})},isInRange:function(i){return t5(i,function(s,a){return n[a].isInRange(s)})}})};function BPe(t){return(t%180+180)%180}var UPe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=BPe(i),a=s*Math.PI/180,l=Math.atan(r/n),c=a>l&&a<Math.PI-l?r/Math.sin(a):n/Math.cos(a);return Math.abs(c)},zPe=Ci,qPe=fh,WPe=dv;function GPe(t){return function(e,n,r){var i=Object(e);if(!qPe(e)){var s=zPe(n);e=WPe(e),n=function(l){return s(i[l],l,i)}}var a=t(e,n,r);return a>-1?i[s?e[a]:a]:void 0}}var HPe=GPe,KPe=Q4;function YPe(t){var e=KPe(t),n=e%1;return e===e?n?e-n:e:0}var XPe=YPe,QPe=rL,JPe=Ci,ZPe=XPe,eke=Math.max;function tke(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:ZPe(n);return i<0&&(i=eke(r+i,0)),QPe(t,JPe(e),i)}var nke=tke,rke=HPe,ike=nke,ske=rke(ike),ake=ske;const oke=st(ake);var lke=Zce(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),iA=k.createContext(void 0),sA=k.createContext(void 0),c5=k.createContext(void 0),u5=k.createContext({}),d5=k.createContext(void 0),f5=k.createContext(0),h5=k.createContext(0),_2=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,s=n.offset,a=e.clipPathId,l=e.children,c=e.width,u=e.height,d=lke(s);return L.createElement(iA.Provider,{value:r},L.createElement(sA.Provider,{value:i},L.createElement(u5.Provider,{value:s},L.createElement(c5.Provider,{value:d},L.createElement(d5.Provider,{value:a},L.createElement(f5.Provider,{value:u},L.createElement(h5.Provider,{value:c},l)))))))},cke=function(){return k.useContext(d5)},p5=function(e){var n=k.useContext(iA);n==null&&Po();var r=n[e];return r==null&&Po(),r},uke=function(){var e=k.useContext(iA);return Us(e)},dke=function(){var e=k.useContext(sA),n=oke(e,function(r){return t5(r.domain,Number.isFinite)});return n||Us(e)},m5=function(e){var n=k.useContext(sA);n==null&&Po();var r=n[e];return r==null&&Po(),r},fke=function(){var e=k.useContext(c5);return e},hke=function(){return k.useContext(u5)},aA=function(){return k.useContext(h5)},oA=function(){return k.useContext(f5)};function wc(t){"@babel/helpers - typeof";return wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wc(t)}function pke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y5(r.key),r)}}function gke(t,e,n){return e&&mke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function yke(t,e,n){return e=Gg(e),vke(t,g5()?Reflect.construct(e,n||[],Gg(t).constructor):e.apply(t,n))}function vke(t,e){if(e&&(wc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xke(t)}function xke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function g5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(g5=function(){return!!t})()}function Gg(t){return Gg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gg(t)}function bke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y1(t,e)}function y1(t,e){return y1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},y1(t,e)}function S2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function N2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?S2(Object(n),!0).forEach(function(r){lA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lA(t,e,n){return e=y5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y5(t){var e=wke(t,"string");return wc(e)=="symbol"?e:e+""}function wke(t,e){if(wc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function _ke(t,e){return Eke(t)||Ake(t,e)||Nke(t,e)||Ske()}function Ske(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nke(t,e){if(t){if(typeof t=="string")return A2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A2(t,e)}}function A2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ake(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function Eke(t){if(Array.isArray(t))return t}function v1(){return v1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v1.apply(this,arguments)}var Cke=function(e,n){var r;return L.isValidElement(e)?r=L.cloneElement(e,n):je(e)?r=e(n):r=L.createElement("line",v1({},n,{className:"recharts-reference-line-line"})),r},jke=function(e,n,r,i,s,a,l,c,u){var d=s.x,f=s.y,h=s.width,m=s.height;if(r){var y=u.y,g=e.y.apply(y,{position:a});if(vi(u,"discard")&&!e.y.isInRange(g))return null;var v=[{x:d+h,y:g},{x:d,y:g}];return c==="left"?v.reverse():v}if(n){var x=u.x,w=e.x.apply(x,{position:a});if(vi(u,"discard")&&!e.x.isInRange(w))return null;var b=[{x:w,y:f+m},{x:w,y:f}];return l==="top"?b.reverse():b}if(i){var N=u.segment,A=N.map(function(E){return e.apply(E,{position:a})});return vi(u,"discard")&&JTe(A,function(E){return!e.isInRange(E)})?null:A}return null};function Tke(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,s=t.yAxisId,a=t.shape,l=t.className,c=t.alwaysShow,u=cke(),d=p5(i),f=m5(s),h=fke();if(!u||!h)return null;Kr(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=rA({x:d.scale,y:f.scale}),y=en(e),g=en(n),v=r&&r.length===2,x=jke(m,y,g,v,h,t.position,d.orientation,f.orientation,t);if(!x)return null;var w=_ke(x,2),b=w[0],N=b.x,A=b.y,E=w[1],C=E.x,S=E.y,_=vi(t,"hidden")?"url(#".concat(u,")"):void 0,P=N2(N2({clipPath:_},be(t,!0)),{},{x1:N,y1:A,x2:C,y2:S});return L.createElement(Xe,{className:Me("recharts-reference-line",l)},Cke(a,P),an.renderCallByParent(t,VPe({x1:N,y1:A,x2:C,y2:S})))}var cA=function(t){function e(){return pke(this,e),yke(this,e,arguments)}return bke(e,t),gke(e,[{key:"render",value:function(){return L.createElement(Tke,this.props)}}])}(L.Component);lA(cA,"displayName","ReferenceLine");lA(cA,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function x1(){return x1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x1.apply(this,arguments)}function _c(t){"@babel/helpers - typeof";return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_c(t)}function E2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function C2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E2(Object(n),!0).forEach(function(r){Rv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,x5(r.key),r)}}function Ike(t,e,n){return e&&kke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Oke(t,e,n){return e=Hg(e),Rke(t,v5()?Reflect.construct(e,n||[],Hg(t).constructor):e.apply(t,n))}function Rke(t,e){if(e&&(_c(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ke(t)}function $ke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v5=function(){return!!t})()}function Hg(t){return Hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hg(t)}function Dke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b1(t,e)}function b1(t,e){return b1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},b1(t,e)}function Rv(t,e,n){return e=x5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x5(t){var e=Mke(t,"string");return _c(e)=="symbol"?e:e+""}function Mke(t,e){if(_c(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_c(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Lke=function(e){var n=e.x,r=e.y,i=e.xAxis,s=e.yAxis,a=rA({x:i.scale,y:s.scale}),l=a.apply({x:n,y:r},{bandAware:!0});return vi(e,"discard")&&!a.isInRange(l)?null:l},$v=function(t){function e(){return Pke(this,e),Oke(this,e,arguments)}return Dke(e,t),Ike(e,[{key:"render",value:function(){var r=this.props,i=r.x,s=r.y,a=r.r,l=r.alwaysShow,c=r.clipPathId,u=en(i),d=en(s);if(Kr(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=Lke(this.props);if(!f)return null;var h=f.x,m=f.y,y=this.props,g=y.shape,v=y.className,x=vi(this.props,"hidden")?"url(#".concat(c,")"):void 0,w=C2(C2({clipPath:x},be(this.props,!0)),{},{cx:h,cy:m});return L.createElement(Xe,{className:Me("recharts-reference-dot",v)},e.renderDot(g,w),an.renderCallByParent(this.props,{x:h-a,y:m-a,width:2*a,height:2*a}))}}])}(L.Component);Rv($v,"displayName","ReferenceDot");Rv($v,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Rv($v,"renderDot",function(t,e){var n;return L.isValidElement(t)?n=L.cloneElement(t,e):je(t)?n=t(e):n=L.createElement(Ev,x1({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function w1(){return w1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w1.apply(this,arguments)}function Sc(t){"@babel/helpers - typeof";return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sc(t)}function j2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function T2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j2(Object(n),!0).forEach(function(r){Dv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,w5(r.key),r)}}function Bke(t,e,n){return e&&Vke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Uke(t,e,n){return e=Kg(e),zke(t,b5()?Reflect.construct(e,n||[],Kg(t).constructor):e.apply(t,n))}function zke(t,e){if(e&&(Sc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qke(t)}function qke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(b5=function(){return!!t})()}function Kg(t){return Kg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kg(t)}function Wke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_1(t,e)}function _1(t,e){return _1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_1(t,e)}function Dv(t,e,n){return e=w5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w5(t){var e=Gke(t,"string");return Sc(e)=="symbol"?e:e+""}function Gke(t,e){if(Sc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Hke=function(e,n,r,i,s){var a=s.x1,l=s.x2,c=s.y1,u=s.y2,d=s.xAxis,f=s.yAxis;if(!d||!f)return null;var h=rA({x:d.scale,y:f.scale}),m={x:e?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(c,{position:"start"}):h.y.rangeMin},y={x:n?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(u,{position:"end"}):h.y.rangeMax};return vi(s,"discard")&&(!h.isInRange(m)||!h.isInRange(y))?null:o5(m,y)},Mv=function(t){function e(){return Fke(this,e),Uke(this,e,arguments)}return Wke(e,t),Bke(e,[{key:"render",value:function(){var r=this.props,i=r.x1,s=r.x2,a=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;Kr(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=en(i),h=en(s),m=en(a),y=en(l),g=this.props.shape;if(!f&&!h&&!m&&!y&&!g)return null;var v=Hke(f,h,m,y,this.props);if(!v&&!g)return null;var x=vi(this.props,"hidden")?"url(#".concat(d,")"):void 0;return L.createElement(Xe,{className:Me("recharts-reference-area",c)},e.renderRect(g,T2(T2({clipPath:x},be(this.props,!0)),v)),an.renderCallByParent(this.props,v))}}])}(L.Component);Dv(Mv,"displayName","ReferenceArea");Dv(Mv,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Dv(Mv,"renderRect",function(t,e){var n;return L.isValidElement(t)?n=L.cloneElement(t,e):je(t)?n=t(e):n=L.createElement(nA,w1({},e,{className:"recharts-reference-area-rect"})),n});function _5(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function Kke(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return UPe(r,n)}function Yke(t,e,n){var r=n==="width",i=t.x,s=t.y,a=t.width,l=t.height;return e===1?{start:r?i:s,end:r?i+a:s+l}:{start:r?i+a:s+l,end:r?i:s}}function Yg(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function Xke(t,e){return _5(t,e+1)}function Qke(t,e,n,r,i){for(var s=(r||[]).slice(),a=e.start,l=e.end,c=0,u=1,d=a,f=function(){var y=r==null?void 0:r[c];if(y===void 0)return{v:_5(r,u)};var g=c,v,x=function(){return v===void 0&&(v=n(y,g)),v},w=y.coordinate,b=c===0||Yg(t,w,x,d,l);b||(c=0,d=a,u+=1),b&&(d=w+t*(x()/2+i),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function Vf(t){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vf(t)}function P2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function An(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P2(Object(n),!0).forEach(function(r){Jke(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jke(t,e,n){return e=Zke(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zke(t){var e=e2e(t,"string");return Vf(e)=="symbol"?e:e+""}function e2e(t,e){if(Vf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function t2e(t,e,n,r,i){for(var s=(r||[]).slice(),a=s.length,l=e.start,c=e.end,u=function(h){var m=s[h],y,g=function(){return y===void 0&&(y=n(m,h)),y};if(h===a-1){var v=t*(m.coordinate+t*g()/2-c);s[h]=m=An(An({},m),{},{tickCoord:v>0?m.coordinate-v*t:m.coordinate})}else s[h]=m=An(An({},m),{},{tickCoord:m.coordinate});var x=Yg(t,m.tickCoord,g,l,c);x&&(c=m.tickCoord-t*(g()/2+i),s[h]=An(An({},m),{},{isShow:!0}))},d=a-1;d>=0;d--)u(d);return s}function n2e(t,e,n,r,i,s){var a=(r||[]).slice(),l=a.length,c=e.start,u=e.end;if(s){var d=r[l-1],f=n(d,l-1),h=t*(d.coordinate+t*f/2-u);a[l-1]=d=An(An({},d),{},{tickCoord:h>0?d.coordinate-h*t:d.coordinate});var m=Yg(t,d.tickCoord,function(){return f},c,u);m&&(u=d.tickCoord-t*(f/2+i),a[l-1]=An(An({},d),{},{isShow:!0}))}for(var y=s?l-1:l,g=function(w){var b=a[w],N,A=function(){return N===void 0&&(N=n(b,w)),N};if(w===0){var E=t*(b.coordinate-t*A()/2-c);a[w]=b=An(An({},b),{},{tickCoord:E<0?b.coordinate-E*t:b.coordinate})}else a[w]=b=An(An({},b),{},{tickCoord:b.coordinate});var C=Yg(t,b.tickCoord,A,c,u);C&&(c=b.tickCoord+t*(A()/2+i),a[w]=An(An({},b),{},{isShow:!0}))},v=0;v<y;v++)g(v);return a}function uA(t,e,n){var r=t.tick,i=t.ticks,s=t.viewBox,a=t.minTickGap,l=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(te(c)||Fo.isSsr)return Xke(i,typeof c=="number"&&te(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",y=d&&m==="width"?yd(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},g=function(b,N){var A=je(u)?u(b.value,N):b.value;return m==="width"?Kke(yd(A,{fontSize:e,letterSpacing:n}),y,f):yd(A,{fontSize:e,letterSpacing:n})[m]},v=i.length>=2?Rn(i[1].coordinate-i[0].coordinate):1,x=Yke(s,v,m);return c==="equidistantPreserveStart"?Qke(v,x,g,i,a):(c==="preserveStart"||c==="preserveStartEnd"?h=n2e(v,x,g,i,a,c==="preserveStartEnd"):h=t2e(v,x,g,i,a),h.filter(function(w){return w.isShow}))}var r2e=["viewBox"],i2e=["viewBox"],s2e=["ticks"];function Nc(t){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nc(t)}function Nl(){return Nl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nl.apply(this,arguments)}function k2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k2(Object(n),!0).forEach(function(r){dA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yx(t,e){if(t==null)return{};var n=a2e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function a2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function o2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,N5(r.key),r)}}function l2e(t,e,n){return e&&I2(t.prototype,e),n&&I2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function c2e(t,e,n){return e=Xg(e),u2e(t,S5()?Reflect.construct(e,n||[],Xg(t).constructor):e.apply(t,n))}function u2e(t,e){if(e&&(Nc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d2e(t)}function d2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S5=function(){return!!t})()}function Xg(t){return Xg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xg(t)}function f2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&S1(t,e)}function S1(t,e){return S1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},S1(t,e)}function dA(t,e,n){return e=N5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N5(t){var e=h2e(t,"string");return Nc(e)=="symbol"?e:e+""}function h2e(t,e){if(Nc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var iu=function(t){function e(n){var r;return o2e(this,e),r=c2e(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return f2e(e,t),l2e(e,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,a=yx(r,r2e),l=this.props,c=l.viewBox,u=yx(l,i2e);return!Ml(s,c)||!Ml(a,u)||!Ml(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,a=i.y,l=i.width,c=i.height,u=i.orientation,d=i.tickSize,f=i.mirror,h=i.tickMargin,m,y,g,v,x,w,b=f?-1:1,N=r.tickSize||d,A=te(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":m=y=r.coordinate,v=a+ +!f*c,g=v-b*N,w=g-b*h,x=A;break;case"left":g=v=r.coordinate,y=s+ +!f*l,m=y-b*N,x=m-b*h,w=A;break;case"right":g=v=r.coordinate,y=s+ +f*l,m=y+b*N,x=m+b*h,w=A;break;default:m=y=r.coordinate,v=a+ +f*c,g=v+b*N,w=g+b*h,x=A;break}return{line:{x1:m,y1:g,x2:y,y2:v},tick:{x,y:w}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a;switch(i){case"left":a=s?"start":"end";break;case"right":a=s?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=s?"start":"end";break;default:a=s?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,l=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,f=Yt(Yt(Yt({},be(this.props,!1)),be(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=Yt(Yt({},f),{},{x1:i,y1:s+h*l,x2:i+a,y2:s+h*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);f=Yt(Yt({},f),{},{x1:i+m*a,y1:s,x2:i+m*a,y2:s+l})}return L.createElement("line",Nl({},f,{className:Me("recharts-cartesian-axis-line",dr(d,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var a=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,h=l.unit,m=uA(Yt(Yt({},this.props),{},{ticks:r}),i,s),y=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),v=be(this.props,!1),x=be(d,!1),w=Yt(Yt({},v),{},{fill:"none"},be(c,!1)),b=m.map(function(N,A){var E=a.getTickLineCoord(N),C=E.line,S=E.tick,_=Yt(Yt(Yt(Yt({textAnchor:y,verticalAnchor:g},v),{},{stroke:"none",fill:u},x),S),{},{index:A,payload:N,visibleTicksCount:m.length,tickFormatter:f});return L.createElement(Xe,Nl({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},Co(a.props,N,A)),c&&L.createElement("line",Nl({},w,C,{className:Me("recharts-cartesian-axis-tick-line",dr(c,"className"))})),d&&e.renderTickItem(d,_,"".concat(je(f)?f(N.value,A):N.value).concat(h||"")))});return L.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,a=i.width,l=i.height,c=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var f=this.props,h=f.ticks,m=yx(f,s2e),y=h;return je(c)&&(y=h&&h.length>0?c(this.props):c(m)),a<=0||l<=0||!y||!y.length?null:L.createElement(Xe,{className:Me("recharts-cartesian-axis",u),ref:function(v){r.layerReference=v}},s&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),an.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var a,l=Me(i.className,"recharts-cartesian-axis-tick-value");return L.isValidElement(r)?a=L.cloneElement(r,Yt(Yt({},i),{},{className:l})):je(r)?a=r(Yt(Yt({},i),{},{className:l})):a=L.createElement(jo,Nl({},i,{className:"recharts-cartesian-axis-tick-value"}),s),a}}])}(k.Component);dA(iu,"displayName","CartesianAxis");dA(iu,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var p2e=["x1","y1","x2","y2","key"],m2e=["offset"];function ko(t){"@babel/helpers - typeof";return ko=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ko(t)}function O2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O2(Object(n),!0).forEach(function(r){g2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g2e(t,e,n){return e=y2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y2e(t){var e=v2e(t,"string");return ko(e)=="symbol"?e:e+""}function v2e(t,e){if(ko(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ko(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ja(){return Ja=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ja.apply(this,arguments)}function R2(t,e){if(t==null)return{};var n=x2e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function x2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var b2e=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,s=e.y,a=e.width,l=e.height,c=e.ry;return L.createElement("rect",{x:i,y:s,ry:c,width:a,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function A5(t,e){var n;if(L.isValidElement(t))n=L.cloneElement(t,e);else if(je(t))n=t(e);else{var r=e.x1,i=e.y1,s=e.x2,a=e.y2,l=e.key,c=R2(e,p2e),u=be(c,!1);u.offset;var d=R2(u,m2e);n=L.createElement("line",Ja({},d,{x1:r,y1:i,x2:s,y2:a,fill:"none",key:l}))}return n}function w2e(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(l,c){var u=Tn(Tn({},t),{},{x1:e,y1:l,x2:e+n,y2:l,key:"line-".concat(c),index:c});return A5(i,u)});return L.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function _2e(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,s=t.verticalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(l,c){var u=Tn(Tn({},t),{},{x1:l,y1:e,x2:l,y2:e+n,key:"line-".concat(c),index:c});return A5(i,u)});return L.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function S2e(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,s=t.width,a=t.height,l=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=l.map(function(h){return Math.round(h+i-i)}).sort(function(h,m){return h-m});i!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var y=!d[m+1],g=y?i+a-h:d[m+1]-h;if(g<=0)return null;var v=m%e.length;return L.createElement("rect",{key:"react-".concat(m),y:h,x:r,height:g,width:s,stroke:"none",fill:e[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return L.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function N2e(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,s=t.x,a=t.y,l=t.width,c=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(h){return Math.round(h+s-s)}).sort(function(h,m){return h-m});s!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var y=!d[m+1],g=y?s+l-h:d[m+1]-h;if(g<=0)return null;var v=m%r.length;return L.createElement("rect",{key:"react-".concat(m),x:h,y:a,width:g,height:c,stroke:"none",fill:r[v],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return L.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var A2e=function(e,n){var r=e.xAxis,i=e.width,s=e.height,a=e.offset;return w4(uA(Tn(Tn(Tn({},iu.defaultProps),r),{},{ticks:Hi(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.left,a.left+a.width,n)},E2e=function(e,n){var r=e.yAxis,i=e.width,s=e.height,a=e.offset;return w4(uA(Tn(Tn(Tn({},iu.defaultProps),r),{},{ticks:Hi(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.top,a.top+a.height,n)},il={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function E5(t){var e,n,r,i,s,a,l=aA(),c=oA(),u=hke(),d=Tn(Tn({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:il.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:il.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:il.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:il.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:il.vertical,verticalFill:(a=t.verticalFill)!==null&&a!==void 0?a:il.verticalFill,x:te(t.x)?t.x:u.left,y:te(t.y)?t.y:u.top,width:te(t.width)?t.width:u.width,height:te(t.height)?t.height:u.height}),f=d.x,h=d.y,m=d.width,y=d.height,g=d.syncWithTicks,v=d.horizontalValues,x=d.verticalValues,w=uke(),b=dke();if(!te(m)||m<=0||!te(y)||y<=0||!te(f)||f!==+f||!te(h)||h!==+h)return null;var N=d.verticalCoordinatesGenerator||A2e,A=d.horizontalCoordinatesGenerator||E2e,E=d.horizontalPoints,C=d.verticalPoints;if((!E||!E.length)&&je(A)){var S=v&&v.length,_=A({yAxis:b?Tn(Tn({},b),{},{ticks:S?v:b.ticks}):void 0,width:l,height:c,offset:u},S?!0:g);Kr(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(ko(_),"]")),Array.isArray(_)&&(E=_)}if((!C||!C.length)&&je(N)){var P=x&&x.length,T=N({xAxis:w?Tn(Tn({},w),{},{ticks:P?x:w.ticks}):void 0,width:l,height:c,offset:u},P?!0:g);Kr(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(ko(T),"]")),Array.isArray(T)&&(C=T)}return L.createElement("g",{className:"recharts-cartesian-grid"},L.createElement(b2e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),L.createElement(w2e,Ja({},d,{offset:u,horizontalPoints:E,xAxis:w,yAxis:b})),L.createElement(_2e,Ja({},d,{offset:u,verticalPoints:C,xAxis:w,yAxis:b})),L.createElement(S2e,Ja({},d,{horizontalPoints:E})),L.createElement(N2e,Ja({},d,{verticalPoints:C})))}E5.displayName="CartesianGrid";var C2e=["layout","type","stroke","connectNulls","isRange","ref"],j2e=["key"],C5;function Ac(t){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ac(t)}function j5(t,e){if(t==null)return{};var n=T2e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function T2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Za(){return Za=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Za.apply(this,arguments)}function $2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ks(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$2(Object(n),!0).forEach(function(r){li(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function D2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,P5(r.key),r)}}function k2e(t,e,n){return e&&D2(t.prototype,e),n&&D2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function I2e(t,e,n){return e=Qg(e),O2e(t,T5()?Reflect.construct(e,n||[],Qg(t).constructor):e.apply(t,n))}function O2e(t,e){if(e&&(Ac(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R2e(t)}function R2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T5=function(){return!!t})()}function Qg(t){return Qg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qg(t)}function $2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N1(t,e)}function N1(t,e){return N1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},N1(t,e)}function li(t,e,n){return e=P5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function P5(t){var e=D2e(t,"string");return Ac(e)=="symbol"?e:e+""}function D2e(t,e){if(Ac(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ac(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Si=function(t){function e(){var n;P2e(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=I2e(this,e,[].concat(i)),li(n,"state",{isAnimationFinished:!0}),li(n,"id",Qc("recharts-area-")),li(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),je(a)&&a()}),li(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),je(a)&&a()}),n}return $2e(e,t),k2e(e,[{key:"renderDots",value:function(r,i,s){var a=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(a&&!l)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,h=be(this.props,!1),m=be(u,!0),y=d.map(function(v,x){var w=ks(ks(ks({key:"dot-".concat(x),r:3},h),m),{},{index:x,cx:v.x,cy:v.y,dataKey:f,value:v.value,payload:v.payload,points:d});return e.renderDotItem(u,w)}),g={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return L.createElement(Xe,Za({className:"recharts-area-dots"},g),y)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,s=i.baseLine,a=i.points,l=i.strokeWidth,c=a[0].x,u=a[a.length-1].x,d=r*Math.abs(c-u),f=Hs(a.map(function(h){return h.y||0}));return te(s)&&typeof s=="number"?f=Math.max(s,f):s&&Array.isArray(s)&&s.length&&(f=Math.max(Hs(s.map(function(h){return h.y||0})),f)),te(f)?L.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,s=i.baseLine,a=i.points,l=i.strokeWidth,c=a[0].y,u=a[a.length-1].y,d=r*Math.abs(c-u),f=Hs(a.map(function(h){return h.x||0}));return te(s)&&typeof s=="number"?f=Math.max(s,f):s&&Array.isArray(s)&&s.length&&(f=Math.max(Hs(s.map(function(h){return h.x||0})),f)),te(f)?L.createElement("rect",{x:0,y:c<u?c:c-d,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,s,a){var l=this.props,c=l.layout,u=l.type,d=l.stroke,f=l.connectNulls,h=l.isRange;l.ref;var m=j5(l,C2e);return L.createElement(Xe,{clipPath:s?"url(#clipPath-".concat(a,")"):null},L.createElement(Vl,Za({},be(m,!0),{points:r,connectNulls:f,type:u,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&L.createElement(Vl,Za({},be(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:r})),d!=="none"&&h&&L.createElement(Vl,Za({},be(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var s=this,a=this.props,l=a.points,c=a.baseLine,u=a.isAnimationActive,d=a.animationBegin,f=a.animationDuration,h=a.animationEasing,m=a.animationId,y=this.state,g=y.prevPoints,v=y.prevBaseLine;return L.createElement(_i,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var w=x.t;if(g){var b=g.length/l.length,N=l.map(function(S,_){var P=Math.floor(_*b);if(g[P]){var T=g[P],O=Bn(T.x,S.x),R=Bn(T.y,S.y);return ks(ks({},S),{},{x:O(w),y:R(w)})}return S}),A;if(te(c)&&typeof c=="number"){var E=Bn(v,c);A=E(w)}else if(Re(c)||Xc(c)){var C=Bn(v,0);A=C(w)}else A=c.map(function(S,_){var P=Math.floor(_*b);if(v[P]){var T=v[P],O=Bn(T.x,S.x),R=Bn(T.y,S.y);return ks(ks({},S),{},{x:O(w),y:R(w)})}return S});return s.renderAreaStatically(N,A,r,i)}return L.createElement(Xe,null,L.createElement("defs",null,L.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(w))),L.createElement(Xe,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(l,c,r,i)))})}},{key:"renderArea",value:function(r,i){var s=this.props,a=s.points,l=s.baseLine,c=s.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,h=u.totalLength;return c&&a&&a.length&&(!d&&h>0||!fc(d,a)||!fc(f,l))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(a,l,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,a=i.dot,l=i.points,c=i.className,u=i.top,d=i.left,f=i.xAxis,h=i.yAxis,m=i.width,y=i.height,g=i.isAnimationActive,v=i.id;if(s||!l||!l.length)return null;var x=this.state.isAnimationFinished,w=l.length===1,b=Me("recharts-area",c),N=f&&f.allowDataOverflow,A=h&&h.allowDataOverflow,E=N||A,C=Re(v)?this.id:v,S=(r=be(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},_=S.r,P=_===void 0?3:_,T=S.strokeWidth,O=T===void 0?2:T,R=sde(a)?a:{},M=R.clipDot,D=M===void 0?!0:M,B=P*2+O;return L.createElement(Xe,{className:b},N||A?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(C)},L.createElement("rect",{x:N?d:d-m/2,y:A?u:u-y/2,width:N?m:m*2,height:A?y:y*2})),!D&&L.createElement("clipPath",{id:"clipPath-dots-".concat(C)},L.createElement("rect",{x:d-B/2,y:u-B/2,width:m+B,height:y+B}))):null,w?null:this.renderArea(E,C),(a||w)&&this.renderDots(E,D,C),(!g||x)&&Zi.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(k.PureComponent);C5=Si;li(Si,"displayName","Area");li(Si,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Fo.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});li(Si,"getBaseValue",function(t,e,n,r){var i=t.layout,s=t.baseValue,a=e.props.baseValue,l=a??s;if(te(l)&&typeof l=="number")return l;var c=i==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return l==="dataMin"?f:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});li(Si,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,s=t.xAxisTicks,a=t.yAxisTicks,l=t.bandSize,c=t.dataKey,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,h=t.offset,m=e.layout,y=u&&u.length,g=C5.getBaseValue(e,n,r,i),v=m==="horizontal",x=!1,w=f.map(function(N,A){var E;y?E=u[d+A]:(E=Jt(N,c),Array.isArray(E)?x=!0:E=[g,E]);var C=E[1]==null||y&&Jt(N,c)==null;return v?{x:uk({axis:r,ticks:s,bandSize:l,entry:N,index:A}),y:C?null:i.scale(E[1]),value:E,payload:N}:{x:C?null:r.scale(E[1]),y:uk({axis:i,ticks:a,bandSize:l,entry:N,index:A}),value:E,payload:N}}),b;return y||x?b=w.map(function(N){var A=Array.isArray(N.value)?N.value[0]:null;return v?{x:N.x,y:A!=null&&N.y!=null?i.scale(A):null}:{x:A!=null?r.scale(A):null,y:N.y}}):b=v?i.scale(g):r.scale(g),ks({points:w,baseLine:b,layout:m,isRange:x},h)});li(Si,"renderDotItem",function(t,e){var n;if(L.isValidElement(t))n=L.cloneElement(t,e);else if(je(t))n=t(e);else{var r=Me("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=j5(e,j2e);n=L.createElement(Ev,Za({},s,{key:i,className:r}))}return n});function Ec(t){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ec(t)}function M2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L2e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O5(r.key),r)}}function F2e(t,e,n){return e&&L2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function V2e(t,e,n){return e=Jg(e),B2e(t,k5()?Reflect.construct(e,n||[],Jg(t).constructor):e.apply(t,n))}function B2e(t,e){if(e&&(Ec(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return U2e(t)}function U2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(k5=function(){return!!t})()}function Jg(t){return Jg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Jg(t)}function z2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A1(t,e)}function A1(t,e){return A1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},A1(t,e)}function I5(t,e,n){return e=O5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O5(t){var e=q2e(t,"string");return Ec(e)=="symbol"?e:e+""}function q2e(t,e){if(Ec(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ec(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function E1(){return E1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},E1.apply(this,arguments)}function W2e(t){var e=t.xAxisId,n=aA(),r=oA(),i=p5(e);return i==null?null:k.createElement(iu,E1({},i,{className:Me("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return Hi(a,!0)}}))}var Io=function(t){function e(){return M2e(this,e),V2e(this,e,arguments)}return z2e(e,t),F2e(e,[{key:"render",value:function(){return k.createElement(W2e,this.props)}}])}(k.Component);I5(Io,"displayName","XAxis");I5(Io,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Cc(t){"@babel/helpers - typeof";return Cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cc(t)}function G2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function H2e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,D5(r.key),r)}}function K2e(t,e,n){return e&&H2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Y2e(t,e,n){return e=Zg(e),X2e(t,R5()?Reflect.construct(e,n||[],Zg(t).constructor):e.apply(t,n))}function X2e(t,e){if(e&&(Cc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q2e(t)}function Q2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function R5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R5=function(){return!!t})()}function Zg(t){return Zg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zg(t)}function J2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C1(t,e)}function C1(t,e){return C1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},C1(t,e)}function $5(t,e,n){return e=D5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function D5(t){var e=Z2e(t,"string");return Cc(e)=="symbol"?e:e+""}function Z2e(t,e){if(Cc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function j1(){return j1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j1.apply(this,arguments)}var eIe=function(e){var n=e.yAxisId,r=aA(),i=oA(),s=m5(n);return s==null?null:k.createElement(iu,j1({},s,{className:Me("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(l){return Hi(l,!0)}}))},jc=function(t){function e(){return G2e(this,e),Y2e(this,e,arguments)}return J2e(e,t),K2e(e,[{key:"render",value:function(){return k.createElement(eIe,this.props)}}])}(k.Component);$5(jc,"displayName","YAxis");$5(jc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function M2(t){return iIe(t)||rIe(t)||nIe(t)||tIe()}function tIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nIe(t,e){if(t){if(typeof t=="string")return T1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T1(t,e)}}function rIe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function iIe(t){if(Array.isArray(t))return T1(t)}function T1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var P1=function(e,n,r,i,s){var a=Tr(e,cA),l=Tr(e,$v),c=[].concat(M2(a),M2(l)),u=Tr(e,Mv),d="".concat(i,"Id"),f=i[0],h=n;if(c.length&&(h=c.reduce(function(g,v){if(v.props[d]===r&&vi(v.props,"extendDomain")&&te(v.props[f])){var x=v.props[f];return[Math.min(g[0],x),Math.max(g[1],x)]}return g},h)),u.length){var m="".concat(f,"1"),y="".concat(f,"2");h=u.reduce(function(g,v){if(v.props[d]===r&&vi(v.props,"extendDomain")&&te(v.props[m])&&te(v.props[y])){var x=v.props[m],w=v.props[y];return[Math.min(g[0],x,w),Math.max(g[1],x,w)]}return g},h)}return s&&s.length&&(h=s.reduce(function(g,v){return te(v)?[Math.min(g[0],v),Math.max(g[1],v)]:g},h)),h},M5={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new i(d,f||c,h),y=n?n+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],m]:c._events[y].push(m):(c._events[y]=m,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,y=new Array(m);h<m;h++)y[h]=f[h].fn;return y},l.prototype.listenerCount=function(u){var d=n?n+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,y){var g=n?n+u:u;if(!this._events[g])return!1;var v=this._events[g],x=arguments.length,w,b;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),x){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,m),!0;case 6:return v.fn.call(v.context,d,f,h,m,y),!0}for(b=1,w=new Array(x-1);b<x;b++)w[b-1]=arguments[b];v.fn.apply(v.context,w)}else{var N=v.length,A;for(b=0;b<N;b++)switch(v[b].once&&this.removeListener(u,v[b].fn,void 0,!0),x){case 1:v[b].fn.call(v[b].context);break;case 2:v[b].fn.call(v[b].context,d);break;case 3:v[b].fn.call(v[b].context,d,f);break;case 4:v[b].fn.call(v[b].context,d,f,h);break;default:if(!w)for(A=1,w=new Array(x-1);A<x;A++)w[A-1]=arguments[A];v[b].fn.apply(v[b].context,w)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=n?n+u:u;if(!this._events[m])return this;if(!d)return a(this,m),this;var y=this._events[m];if(y.fn)y.fn===d&&(!h||y.once)&&(!f||y.context===f)&&a(this,m);else{for(var g=0,v=[],x=y.length;g<x;g++)(y[g].fn!==d||h&&!y[g].once||f&&y[g].context!==f)&&v.push(y[g]);v.length?this._events[m]=v.length===1?v[0]:v:a(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&a(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(M5);var sIe=M5.exports;const aIe=st(sIe);var vx=new aIe,xx="recharts.syncMouseEvents";function Bf(t){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bf(t)}function oIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lIe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L5(r.key),r)}}function cIe(t,e,n){return e&&lIe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function bx(t,e,n){return e=L5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L5(t){var e=uIe(t,"string");return Bf(e)=="symbol"?e:e+""}function uIe(t,e){if(Bf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dIe=function(){function t(){oIe(this,t),bx(this,"activeIndex",0),bx(this,"coordinateList",[]),bx(this,"layout","horizontal")}return cIe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,s=i===void 0?null:i,a=n.container,l=a===void 0?null:a,c=n.layout,u=c===void 0?null:c,d=n.offset,f=d===void 0?null:d,h=n.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,a=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=s+c+u,h=a+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function fIe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&te(r)&&te(i))return!0}return!1}function hIe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function F5(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,s=t.endAngle,a=mt(e,n,r,i),l=mt(e,n,r,s);return{points:[a,l],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function pIe(t,e,n){var r,i,s,a;if(t==="horizontal")r=e.x,s=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,f=e.angle,h=mt(l,c,u,f),m=mt(l,c,d,f);r=h.x,i=h.y,s=m.x,a=m.y}else return F5(e);return[{x:r,y:i},{x:s,y:a}]}function Uf(t){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uf(t)}function L2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L2(Object(n),!0).forEach(function(r){mIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mIe(t,e,n){return e=gIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gIe(t){var e=yIe(t,"string");return Uf(e)=="symbol"?e:e+""}function yIe(t,e){if(Uf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vIe(t){var e,n,r=t.element,i=t.tooltipEventType,s=t.isActive,a=t.activeCoordinate,l=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,f=t.layout,h=t.chartName,m=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!s||!a||h!=="ScatterChart"&&i!=="axis")return null;var y,g=Vl;if(h==="ScatterChart")y=a,g=VCe;else if(h==="BarChart")y=hIe(f,a,c,d),g=nA;else if(f==="radial"){var v=F5(a),x=v.cx,w=v.cy,b=v.radius,N=v.startAngle,A=v.endAngle;y={cx:x,cy:w,startAngle:N,endAngle:A,innerRadius:b,outerRadius:b},g=I4}else y={points:pIe(f,a,c)},g=Vl;var E=bp(bp(bp(bp({stroke:"#ccc",pointerEvents:"none"},c),y),be(m,!1)),{},{payload:l,payloadIndex:u,className:Me("recharts-tooltip-cursor",m.className)});return k.isValidElement(m)?k.cloneElement(m,E):k.createElement(g,E)}var xIe=["item"],bIe=["children","className","width","height","style","compact","title","desc"];function Tc(t){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tc(t)}function Al(){return Al=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Al.apply(this,arguments)}function F2(t,e){return SIe(t)||_Ie(t,e)||B5(t,e)||wIe()}function wIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _Ie(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function SIe(t){if(Array.isArray(t))return t}function V2(t,e){if(t==null)return{};var n=NIe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function NIe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function AIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function EIe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,U5(r.key),r)}}function CIe(t,e,n){return e&&EIe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jIe(t,e,n){return e=ey(e),TIe(t,V5()?Reflect.construct(e,n||[],ey(t).constructor):e.apply(t,n))}function TIe(t,e){if(e&&(Tc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PIe(t)}function PIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function V5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(V5=function(){return!!t})()}function ey(t){return ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ey(t)}function kIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k1(t,e)}function k1(t,e){return k1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},k1(t,e)}function Pc(t){return RIe(t)||OIe(t)||B5(t)||IIe()}function IIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B5(t,e){if(t){if(typeof t=="string")return I1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I1(t,e)}}function OIe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function RIe(t){if(Array.isArray(t))return I1(t)}function I1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function B2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B2(Object(n),!0).forEach(function(r){Ae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ae(t,e,n){return e=U5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U5(t){var e=$Ie(t,"string");return Tc(e)=="symbol"?e:e+""}function $Ie(t,e){if(Tc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DIe={xAxis:["bottom","top"],yAxis:["left","right"]},MIe={width:"100%",height:"100%"},z5={x:0,y:0};function wp(t){return t}var LIe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},FIe=function(e,n,r,i){var s=n.find(function(d){return d&&d.index===r});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var a=s.coordinate,l=i.radius;return K(K(K({},i),mt(i.cx,i.cy,l,a)),{},{angle:a,radius:l})}var c=s.coordinate,u=i.angle;return K(K(K({},i),mt(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return z5},Lv=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,a=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Pc(l),Pc(u)):l},[]);return a.length>0?a:e&&e.length&&te(i)&&te(s)?e.slice(i,s+1):[]};function q5(t){return t==="number"?[0,"auto"]:void 0}var O1=function(e,n,r,i){var s=e.graphicalItems,a=e.tooltipAxis,l=Lv(n,e);return r<0||!s||!s.length||r>=l.length?null:s.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(a.dataKey&&!a.allowDuplicatedCategory){var m=f===void 0?l:f;h=Jm(m,a.dataKey,i)}else h=f&&f[r]||l[r];return h?[].concat(Pc(c),[E4(u,h)]):c},[])},U2=function(e,n,r,i){var s=i||{x:e.chartX,y:e.chartY},a=LIe(s,r),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=aNe(a,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=O1(e,n,d,f),m=FIe(r,l,d,s);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:m}}return null},VIe=function(e,n){var r=n.axes,i=n.graphicalItems,s=n.axisType,a=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,h=e.stackOffset,m=b4(d,s);return r.reduce(function(y,g){var v,x=g.type.defaultProps!==void 0?K(K({},g.type.defaultProps),g.props):g.props,w=x.type,b=x.dataKey,N=x.allowDataOverflow,A=x.allowDuplicatedCategory,E=x.scale,C=x.ticks,S=x.includeHidden,_=x[a];if(y[_])return y;var P=Lv(e.data,{graphicalItems:i.filter(function(Y){var re,z=a in Y.props?Y.props[a]:(re=Y.type.defaultProps)===null||re===void 0?void 0:re[a];return z===_}),dataStartIndex:c,dataEndIndex:u}),T=P.length,O,R,M;fIe(x.domain,N,w)&&(O=Kw(x.domain,null,N),m&&(w==="number"||E!=="auto")&&(M=xd(P,b,"category")));var D=q5(w);if(!O||O.length===0){var B,V=(B=x.domain)!==null&&B!==void 0?B:D;if(b){if(O=xd(P,b,w),w==="category"&&m){var F=Yue(O);A&&F?(R=O,O=Bg(0,T)):A||(O=pk(V,O,g).reduce(function(Y,re){return Y.indexOf(re)>=0?Y:[].concat(Pc(Y),[re])},[]))}else if(w==="category")A?O=O.filter(function(Y){return Y!==""&&!Re(Y)}):O=pk(V,O,g).reduce(function(Y,re){return Y.indexOf(re)>=0||re===""||Re(re)?Y:[].concat(Pc(Y),[re])},[]);else if(w==="number"){var q=dNe(P,i.filter(function(Y){var re,z,se=a in Y.props?Y.props[a]:(re=Y.type.defaultProps)===null||re===void 0?void 0:re[a],me="hide"in Y.props?Y.props.hide:(z=Y.type.defaultProps)===null||z===void 0?void 0:z.hide;return se===_&&(S||!me)}),b,s,d);q&&(O=q)}m&&(w==="number"||E!=="auto")&&(M=xd(P,b,"category"))}else m?O=Bg(0,T):l&&l[_]&&l[_].hasStack&&w==="number"?O=h==="expand"?[0,1]:A4(l[_].stackGroups,c,u):O=x4(P,i.filter(function(Y){var re=a in Y.props?Y.props[a]:Y.type.defaultProps[a],z="hide"in Y.props?Y.props.hide:Y.type.defaultProps.hide;return re===_&&(S||!z)}),w,d,!0);if(w==="number")O=P1(f,O,_,s,C),V&&(O=Kw(V,O,N));else if(w==="category"&&V){var H=V,Z=O.every(function(Y){return H.indexOf(Y)>=0});Z&&(O=H)}}return K(K({},y),{},Ae({},_,K(K({},x),{},{axisType:s,domain:O,categoricalDomain:M,duplicateDomain:R,originalDomain:(v=x.domain)!==null&&v!==void 0?v:D,isCategorical:m,layout:d})))},{})},BIe=function(e,n){var r=n.graphicalItems,i=n.Axis,s=n.axisType,a=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,h=Lv(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),m=h.length,y=b4(d,s),g=-1;return r.reduce(function(v,x){var w=x.type.defaultProps!==void 0?K(K({},x.type.defaultProps),x.props):x.props,b=w[a],N=q5("number");if(!v[b]){g++;var A;return y?A=Bg(0,m):l&&l[b]&&l[b].hasStack?(A=A4(l[b].stackGroups,c,u),A=P1(f,A,b,s)):(A=Kw(N,x4(h,r.filter(function(E){var C,S,_=a in E.props?E.props[a]:(C=E.type.defaultProps)===null||C===void 0?void 0:C[a],P="hide"in E.props?E.props.hide:(S=E.type.defaultProps)===null||S===void 0?void 0:S.hide;return _===b&&!P}),"number",d),i.defaultProps.allowDataOverflow),A=P1(f,A,b,s)),K(K({},v),{},Ae({},b,K(K({axisType:s},i.defaultProps),{},{hide:!0,orientation:dr(DIe,"".concat(s,".").concat(g%2),null),domain:A,originalDomain:N,isCategorical:y,layout:d})))}return v},{})},UIe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,s=n.AxisComp,a=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.children,f="".concat(i,"Id"),h=Tr(d,s),m={};return h&&h.length?m=VIe(e,{axes:h,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):a&&a.length&&(m=BIe(e,{Axis:s,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},zIe=function(e){var n=Us(e),r=Hi(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:TN(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:jg(n,r)}},z2=function(e){var n=e.children,r=e.defaultShowTooltip,i=nr(n,xc),s=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},qIe=function(e){return!e||!e.length?!1:e.some(function(n){var r=Qi(n&&n.type);return r&&r.indexOf("Bar")>=0})},q2=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},WIe=function(e,n){var r=e.props,i=e.graphicalItems,s=e.xAxisMap,a=s===void 0?{}:s,l=e.yAxisMap,c=l===void 0?{}:l,u=r.width,d=r.height,f=r.children,h=r.margin||{},m=nr(f,xc),y=nr(f,ao),g=Object.keys(c).reduce(function(A,E){var C=c[E],S=C.orientation;return!C.mirror&&!C.hide?K(K({},A),{},Ae({},S,A[S]+C.width)):A},{left:h.left||0,right:h.right||0}),v=Object.keys(a).reduce(function(A,E){var C=a[E],S=C.orientation;return!C.mirror&&!C.hide?K(K({},A),{},Ae({},S,dr(A,"".concat(S))+C.height)):A},{top:h.top||0,bottom:h.bottom||0}),x=K(K({},v),g),w=x.bottom;m&&(x.bottom+=m.props.height||xc.defaultProps.height),y&&n&&(x=cNe(x,i,r,n));var b=u-x.left-x.right,N=d-x.top-x.bottom;return K(K({brushBottom:w},x),{},{width:Math.max(b,0),height:Math.max(N,0)})},GIe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},fA=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,a=e.validateTooltipEventTypes,l=a===void 0?["axis"]:a,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,h=function(x,w){var b=w.graphicalItems,N=w.stackGroups,A=w.offset,E=w.updateId,C=w.dataStartIndex,S=w.dataEndIndex,_=x.barSize,P=x.layout,T=x.barGap,O=x.barCategoryGap,R=x.maxBarSize,M=q2(P),D=M.numericAxisName,B=M.cateAxisName,V=qIe(b),F=[];return b.forEach(function(q,H){var Z=Lv(x.data,{graphicalItems:[q],dataStartIndex:C,dataEndIndex:S}),Y=q.type.defaultProps!==void 0?K(K({},q.type.defaultProps),q.props):q.props,re=Y.dataKey,z=Y.maxBarSize,se=Y["".concat(D,"Id")],me=Y["".concat(B,"Id")],ze={},ct=c.reduce(function(ve,ot){var W=w["".concat(ot.axisType,"Map")],de=Y["".concat(ot.axisType,"Id")];W&&W[de]||ot.axisType==="zAxis"||Po();var xe=W[de];return K(K({},ve),{},Ae(Ae({},ot.axisType,xe),"".concat(ot.axisType,"Ticks"),Hi(xe)))},ze),ae=ct[B],ye=ct["".concat(B,"Ticks")],_e=N&&N[se]&&N[se].hasStack&&bNe(q,N[se].stackGroups),X=Qi(q.type).indexOf("Bar")>=0,Ne=jg(ae,ye),Se=[],qe=V&&oNe({barSize:_,stackGroups:N,totalSize:GIe(ct,B)});if(X){var Qe,St,ie=Re(z)?R:z,ce=(Qe=(St=jg(ae,ye,!0))!==null&&St!==void 0?St:ie)!==null&&Qe!==void 0?Qe:0;Se=lNe({barGap:T,barCategoryGap:O,bandSize:ce!==Ne?ce:Ne,sizeList:qe[me],maxBarSize:ie}),ce!==Ne&&(Se=Se.map(function(ve){return K(K({},ve),{},{position:K(K({},ve.position),{},{offset:ve.position.offset-ce/2})})}))}var $e=q&&q.type&&q.type.getComposedData;$e&&F.push({props:K(K({},$e(K(K({},ct),{},{displayedData:Z,props:x,dataKey:re,item:q,bandSize:Ne,barPosition:Se,offset:A,stackedData:_e,layout:P,dataStartIndex:C,dataEndIndex:S}))),{},Ae(Ae(Ae({key:q.key||"item-".concat(H)},D,ct[D]),B,ct[B]),"animationId",E)),childIndex:lde(q,x.children),item:q})}),F},m=function(x,w){var b=x.props,N=x.dataStartIndex,A=x.dataEndIndex,E=x.updateId;if(!oT({props:b}))return null;var C=b.children,S=b.layout,_=b.stackOffset,P=b.data,T=b.reverseStackOrder,O=q2(S),R=O.numericAxisName,M=O.cateAxisName,D=Tr(C,r),B=vNe(P,D,"".concat(R,"Id"),"".concat(M,"Id"),_,T),V=c.reduce(function(Y,re){var z="".concat(re.axisType,"Map");return K(K({},Y),{},Ae({},z,UIe(b,K(K({},re),{},{graphicalItems:D,stackGroups:re.axisType===R&&B,dataStartIndex:N,dataEndIndex:A}))))},{}),F=WIe(K(K({},V),{},{props:b,graphicalItems:D}),w==null?void 0:w.legendBBox);Object.keys(V).forEach(function(Y){V[Y]=d(b,V[Y],F,Y.replace("Map",""),n)});var q=V["".concat(M,"Map")],H=zIe(q),Z=h(b,K(K({},V),{},{dataStartIndex:N,dataEndIndex:A,updateId:E,graphicalItems:D,stackGroups:B,offset:F}));return K(K({formattedGraphicalItems:Z,graphicalItems:D,offset:F,stackGroups:B},H),V)},y=function(v){function x(w){var b,N,A;return AIe(this,x),A=jIe(this,x,[w]),Ae(A,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Ae(A,"accessibilityManager",new dIe),Ae(A,"handleLegendBBoxUpdate",function(E){if(E){var C=A.state,S=C.dataStartIndex,_=C.dataEndIndex,P=C.updateId;A.setState(K({legendBBox:E},m({props:A.props,dataStartIndex:S,dataEndIndex:_,updateId:P},K(K({},A.state),{},{legendBBox:E}))))}}),Ae(A,"handleReceiveSyncEvent",function(E,C,S){if(A.props.syncId===E){if(S===A.eventEmitterSymbol&&typeof A.props.syncMethod!="function")return;A.applySyncEvent(C)}}),Ae(A,"handleBrushChange",function(E){var C=E.startIndex,S=E.endIndex;if(C!==A.state.dataStartIndex||S!==A.state.dataEndIndex){var _=A.state.updateId;A.setState(function(){return K({dataStartIndex:C,dataEndIndex:S},m({props:A.props,dataStartIndex:C,dataEndIndex:S,updateId:_},A.state))}),A.triggerSyncEvent({dataStartIndex:C,dataEndIndex:S})}}),Ae(A,"handleMouseEnter",function(E){var C=A.getMouseInfo(E);if(C){var S=K(K({},C),{},{isTooltipActive:!0});A.setState(S),A.triggerSyncEvent(S);var _=A.props.onMouseEnter;je(_)&&_(S,E)}}),Ae(A,"triggeredAfterMouseMove",function(E){var C=A.getMouseInfo(E),S=C?K(K({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};A.setState(S),A.triggerSyncEvent(S);var _=A.props.onMouseMove;je(_)&&_(S,E)}),Ae(A,"handleItemMouseEnter",function(E){A.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),Ae(A,"handleItemMouseLeave",function(){A.setState(function(){return{isTooltipActive:!1}})}),Ae(A,"handleMouseMove",function(E){E.persist(),A.throttleTriggeredAfterMouseMove(E)}),Ae(A,"handleMouseLeave",function(E){A.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};A.setState(C),A.triggerSyncEvent(C);var S=A.props.onMouseLeave;je(S)&&S(C,E)}),Ae(A,"handleOuterEvent",function(E){var C=ode(E),S=dr(A.props,"".concat(C));if(C&&je(S)){var _,P;/.*touch.*/i.test(C)?P=A.getMouseInfo(E.changedTouches[0]):P=A.getMouseInfo(E),S((_=P)!==null&&_!==void 0?_:{},E)}}),Ae(A,"handleClick",function(E){var C=A.getMouseInfo(E);if(C){var S=K(K({},C),{},{isTooltipActive:!0});A.setState(S),A.triggerSyncEvent(S);var _=A.props.onClick;je(_)&&_(S,E)}}),Ae(A,"handleMouseDown",function(E){var C=A.props.onMouseDown;if(je(C)){var S=A.getMouseInfo(E);C(S,E)}}),Ae(A,"handleMouseUp",function(E){var C=A.props.onMouseUp;if(je(C)){var S=A.getMouseInfo(E);C(S,E)}}),Ae(A,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&A.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),Ae(A,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&A.handleMouseDown(E.changedTouches[0])}),Ae(A,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&A.handleMouseUp(E.changedTouches[0])}),Ae(A,"handleDoubleClick",function(E){var C=A.props.onDoubleClick;if(je(C)){var S=A.getMouseInfo(E);C(S,E)}}),Ae(A,"handleContextMenu",function(E){var C=A.props.onContextMenu;if(je(C)){var S=A.getMouseInfo(E);C(S,E)}}),Ae(A,"triggerSyncEvent",function(E){A.props.syncId!==void 0&&vx.emit(xx,A.props.syncId,E,A.eventEmitterSymbol)}),Ae(A,"applySyncEvent",function(E){var C=A.props,S=C.layout,_=C.syncMethod,P=A.state.updateId,T=E.dataStartIndex,O=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)A.setState(K({dataStartIndex:T,dataEndIndex:O},m({props:A.props,dataStartIndex:T,dataEndIndex:O,updateId:P},A.state)));else if(E.activeTooltipIndex!==void 0){var R=E.chartX,M=E.chartY,D=E.activeTooltipIndex,B=A.state,V=B.offset,F=B.tooltipTicks;if(!V)return;if(typeof _=="function")D=_(F,E);else if(_==="value"){D=-1;for(var q=0;q<F.length;q++)if(F[q].value===E.activeLabel){D=q;break}}var H=K(K({},V),{},{x:V.left,y:V.top}),Z=Math.min(R,H.x+H.width),Y=Math.min(M,H.y+H.height),re=F[D]&&F[D].value,z=O1(A.state,A.props.data,D),se=F[D]?{x:S==="horizontal"?F[D].coordinate:Z,y:S==="horizontal"?Y:F[D].coordinate}:z5;A.setState(K(K({},E),{},{activeLabel:re,activeCoordinate:se,activePayload:z,activeTooltipIndex:D}))}else A.setState(E)}),Ae(A,"renderCursor",function(E){var C,S=A.state,_=S.isTooltipActive,P=S.activeCoordinate,T=S.activePayload,O=S.offset,R=S.activeTooltipIndex,M=S.tooltipAxisBandSize,D=A.getTooltipEventType(),B=(C=E.props.active)!==null&&C!==void 0?C:_,V=A.props.layout,F=E.key||"_recharts-cursor";return L.createElement(vIe,{key:F,activeCoordinate:P,activePayload:T,activeTooltipIndex:R,chartName:n,element:E,isActive:B,layout:V,offset:O,tooltipAxisBandSize:M,tooltipEventType:D})}),Ae(A,"renderPolarAxis",function(E,C,S){var _=dr(E,"type.axisType"),P=dr(A.state,"".concat(_,"Map")),T=E.type.defaultProps,O=T!==void 0?K(K({},T),E.props):E.props,R=P&&P[O["".concat(_,"Id")]];return k.cloneElement(E,K(K({},R),{},{className:Me(_,R.className),key:E.key||"".concat(C,"-").concat(S),ticks:Hi(R,!0)}))}),Ae(A,"renderPolarGrid",function(E){var C=E.props,S=C.radialLines,_=C.polarAngles,P=C.polarRadius,T=A.state,O=T.radiusAxisMap,R=T.angleAxisMap,M=Us(O),D=Us(R),B=D.cx,V=D.cy,F=D.innerRadius,q=D.outerRadius;return k.cloneElement(E,{polarAngles:Array.isArray(_)?_:Hi(D,!0).map(function(H){return H.coordinate}),polarRadius:Array.isArray(P)?P:Hi(M,!0).map(function(H){return H.coordinate}),cx:B,cy:V,innerRadius:F,outerRadius:q,key:E.key||"polar-grid",radialLines:S})}),Ae(A,"renderLegend",function(){var E=A.state.formattedGraphicalItems,C=A.props,S=C.children,_=C.width,P=C.height,T=A.props.margin||{},O=_-(T.left||0)-(T.right||0),R=y4({children:S,formattedGraphicalItems:E,legendWidth:O,legendContent:u});if(!R)return null;var M=R.item,D=V2(R,xIe);return k.cloneElement(M,K(K({},D),{},{chartWidth:_,chartHeight:P,margin:T,onBBoxUpdate:A.handleLegendBBoxUpdate}))}),Ae(A,"renderTooltip",function(){var E,C=A.props,S=C.children,_=C.accessibilityLayer,P=nr(S,rr);if(!P)return null;var T=A.state,O=T.isTooltipActive,R=T.activeCoordinate,M=T.activePayload,D=T.activeLabel,B=T.offset,V=(E=P.props.active)!==null&&E!==void 0?E:O;return k.cloneElement(P,{viewBox:K(K({},B),{},{x:B.left,y:B.top}),active:V,label:D,payload:V?M:[],coordinate:R,accessibilityLayer:_})}),Ae(A,"renderBrush",function(E){var C=A.props,S=C.margin,_=C.data,P=A.state,T=P.offset,O=P.dataStartIndex,R=P.dataEndIndex,M=P.updateId;return k.cloneElement(E,{key:E.key||"_recharts-brush",onChange:gp(A.handleBrushChange,E.props.onChange),data:_,x:te(E.props.x)?E.props.x:T.left,y:te(E.props.y)?E.props.y:T.top+T.height+T.brushBottom-(S.bottom||0),width:te(E.props.width)?E.props.width:T.width,startIndex:O,endIndex:R,updateId:"brush-".concat(M)})}),Ae(A,"renderReferenceElement",function(E,C,S){if(!E)return null;var _=A,P=_.clipPathId,T=A.state,O=T.xAxisMap,R=T.yAxisMap,M=T.offset,D=E.type.defaultProps||{},B=E.props,V=B.xAxisId,F=V===void 0?D.xAxisId:V,q=B.yAxisId,H=q===void 0?D.yAxisId:q;return k.cloneElement(E,{key:E.key||"".concat(C,"-").concat(S),xAxis:O[F],yAxis:R[H],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:P})}),Ae(A,"renderActivePoints",function(E){var C=E.item,S=E.activePoint,_=E.basePoint,P=E.childIndex,T=E.isRange,O=[],R=C.props.key,M=C.item.type.defaultProps!==void 0?K(K({},C.item.type.defaultProps),C.item.props):C.item.props,D=M.activeDot,B=M.dataKey,V=K(K({index:P,dataKey:B,cx:S.x,cy:S.y,r:4,fill:tA(C.item),strokeWidth:2,stroke:"#fff",payload:S.payload,value:S.value},be(D,!1)),Zm(D));return O.push(x.renderActiveDot(D,V,"".concat(R,"-activePoint-").concat(P))),_?O.push(x.renderActiveDot(D,K(K({},V),{},{cx:_.x,cy:_.y}),"".concat(R,"-basePoint-").concat(P))):T&&O.push(null),O}),Ae(A,"renderGraphicChild",function(E,C,S){var _=A.filterFormatItem(E,C,S);if(!_)return null;var P=A.getTooltipEventType(),T=A.state,O=T.isTooltipActive,R=T.tooltipAxis,M=T.activeTooltipIndex,D=T.activeLabel,B=A.props.children,V=nr(B,rr),F=_.props,q=F.points,H=F.isRange,Z=F.baseLine,Y=_.item.type.defaultProps!==void 0?K(K({},_.item.type.defaultProps),_.item.props):_.item.props,re=Y.activeDot,z=Y.hide,se=Y.activeBar,me=Y.activeShape,ze=!!(!z&&O&&V&&(re||se||me)),ct={};P!=="axis"&&V&&V.props.trigger==="click"?ct={onClick:gp(A.handleItemMouseEnter,E.props.onClick)}:P!=="axis"&&(ct={onMouseLeave:gp(A.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:gp(A.handleItemMouseEnter,E.props.onMouseEnter)});var ae=k.cloneElement(E,K(K({},_.props),ct));function ye(ot){return typeof R.dataKey=="function"?R.dataKey(ot.payload):null}if(ze)if(M>=0){var _e,X;if(R.dataKey&&!R.allowDuplicatedCategory){var Ne=typeof R.dataKey=="function"?ye:"payload.".concat(R.dataKey.toString());_e=Jm(q,Ne,D),X=H&&Z&&Jm(Z,Ne,D)}else _e=q==null?void 0:q[M],X=H&&Z&&Z[M];if(me||se){var Se=E.props.activeIndex!==void 0?E.props.activeIndex:M;return[k.cloneElement(E,K(K(K({},_.props),ct),{},{activeIndex:Se})),null,null]}if(!Re(_e))return[ae].concat(Pc(A.renderActivePoints({item:_,activePoint:_e,basePoint:X,childIndex:M,isRange:H})))}else{var qe,Qe=(qe=A.getItemByXY(A.state.activeCoordinate))!==null&&qe!==void 0?qe:{graphicalItem:ae},St=Qe.graphicalItem,ie=St.item,ce=ie===void 0?E:ie,$e=St.childIndex,ve=K(K(K({},_.props),ct),{},{activeIndex:$e});return[k.cloneElement(ce,ve),null,null]}return H?[ae,null,null]:[ae,null]}),Ae(A,"renderCustomized",function(E,C,S){return k.cloneElement(E,K(K({key:"recharts-customized-".concat(S)},A.props),A.state))}),Ae(A,"renderMap",{CartesianGrid:{handler:wp,once:!0},ReferenceArea:{handler:A.renderReferenceElement},ReferenceLine:{handler:wp},ReferenceDot:{handler:A.renderReferenceElement},XAxis:{handler:wp},YAxis:{handler:wp},Brush:{handler:A.renderBrush,once:!0},Bar:{handler:A.renderGraphicChild},Line:{handler:A.renderGraphicChild},Area:{handler:A.renderGraphicChild},Radar:{handler:A.renderGraphicChild},RadialBar:{handler:A.renderGraphicChild},Scatter:{handler:A.renderGraphicChild},Pie:{handler:A.renderGraphicChild},Funnel:{handler:A.renderGraphicChild},Tooltip:{handler:A.renderCursor,once:!0},PolarGrid:{handler:A.renderPolarGrid,once:!0},PolarAngleAxis:{handler:A.renderPolarAxis},PolarRadiusAxis:{handler:A.renderPolarAxis},Customized:{handler:A.renderCustomized}}),A.clipPathId="".concat((b=w.id)!==null&&b!==void 0?b:Qc("recharts"),"-clip"),A.throttleTriggeredAfterMouseMove=yL(A.triggeredAfterMouseMove,(N=w.throttleDelay)!==null&&N!==void 0?N:1e3/60),A.state={},A}return kIe(x,v),CIe(x,[{key:"componentDidMount",value:function(){var b,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,N=b.children,A=b.data,E=b.height,C=b.layout,S=nr(N,rr);if(S){var _=S.props.defaultIndex;if(!(typeof _!="number"||_<0||_>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[_]&&this.state.tooltipTicks[_].value,T=O1(this.state,A,_,P),O=this.state.tooltipTicks[_].coordinate,R=(this.state.offset.top+E)/2,M=C==="horizontal",D=M?{x:O,y:R}:{y:O,x:R},B=this.state.formattedGraphicalItems.find(function(F){var q=F.item;return q.type.name==="Scatter"});B&&(D=K(K({},D),B.props.points[_].tooltipPosition),T=B.props.points[_].tooltipPayload);var V={activeTooltipIndex:_,isTooltipActive:!0,activeLabel:P,activePayload:T,activeCoordinate:D};this.setState(V),this.renderCursor(S),this.accessibilityManager.setIndex(_)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var A,E;this.accessibilityManager.setDetails({offset:{left:(A=this.props.margin.left)!==null&&A!==void 0?A:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(b){cw([nr(b.children,rr)],[nr(this.props.children,rr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=nr(this.props.children,rr);if(b&&typeof b.props.shared=="boolean"){var N=b.props.shared?"axis":"item";return l.indexOf(N)>=0?N:s}return s}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var N=this.container,A=N.getBoundingClientRect(),E=Rbe(A),C={chartX:Math.round(b.pageX-E.left),chartY:Math.round(b.pageY-E.top)},S=A.width/N.offsetWidth||1,_=this.inRange(C.chartX,C.chartY,S);if(!_)return null;var P=this.state,T=P.xAxisMap,O=P.yAxisMap,R=this.getTooltipEventType(),M=U2(this.state,this.props.data,this.props.layout,_);if(R!=="axis"&&T&&O){var D=Us(T).scale,B=Us(O).scale,V=D&&D.invert?D.invert(C.chartX):null,F=B&&B.invert?B.invert(C.chartY):null;return K(K({},C),{},{xValue:V,yValue:F},M)}return M?K(K({},C),M):null}},{key:"inRange",value:function(b,N){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,C=b/A,S=N/A;if(E==="horizontal"||E==="vertical"){var _=this.state.offset,P=C>=_.left&&C<=_.left+_.width&&S>=_.top&&S<=_.top+_.height;return P?{x:C,y:S}:null}var T=this.state,O=T.angleAxisMap,R=T.radiusAxisMap;if(O&&R){var M=Us(O);return yk({x:C,y:S},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,N=this.getTooltipEventType(),A=nr(b,rr),E={};A&&N==="axis"&&(A.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=Zm(this.props,this.handleOuterEvent);return K(K({},C),E)}},{key:"addListener",value:function(){vx.on(xx,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){vx.removeListener(xx,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,N,A){for(var E=this.state.formattedGraphicalItems,C=0,S=E.length;C<S;C++){var _=E[C];if(_.item===b||_.props.key===b.key||N===Qi(_.item.type)&&A===_.childIndex)return _}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,N=this.state.offset,A=N.left,E=N.top,C=N.height,S=N.width;return L.createElement("defs",null,L.createElement("clipPath",{id:b},L.createElement("rect",{x:A,y:E,height:C,width:S})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(N,A){var E=F2(A,2),C=E[0],S=E[1];return K(K({},N),{},Ae({},C,S.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(N,A){var E=F2(A,2),C=E[0],S=E[1];return K(K({},N),{},Ae({},C,S.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[b])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(b){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[b])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(b){var N=this.state,A=N.formattedGraphicalItems,E=N.activeItem;if(A&&A.length)for(var C=0,S=A.length;C<S;C++){var _=A[C],P=_.props,T=_.item,O=T.type.defaultProps!==void 0?K(K({},T.type.defaultProps),T.props):T.props,R=Qi(T.type);if(R==="Bar"){var M=(P.data||[]).find(function(F){return bCe(b,F)});if(M)return{graphicalItem:_,payload:M}}else if(R==="RadialBar"){var D=(P.data||[]).find(function(F){return yk(b,F)});if(D)return{graphicalItem:_,payload:D}}else if(kv(_,E)||Iv(_,E)||Df(_,E)){var B=lTe({graphicalItem:_,activeTooltipItem:E,itemData:O.data}),V=O.activeIndex===void 0?B:O.activeIndex;return{graphicalItem:K(K({},_),{},{childIndex:V}),payload:Df(_,E)?O.data[B]:_.props.data[B]}}}return null}},{key:"render",value:function(){var b=this;if(!oT(this))return null;var N=this.props,A=N.children,E=N.className,C=N.width,S=N.height,_=N.style,P=N.compact,T=N.title,O=N.desc,R=V2(N,bIe),M=be(R,!1);if(P)return L.createElement(_2,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},L.createElement(dw,Al({},M,{width:C,height:S,title:T,desc:O}),this.renderClipPath(),cT(A,this.renderMap)));if(this.props.accessibilityLayer){var D,B;M.tabIndex=(D=this.props.tabIndex)!==null&&D!==void 0?D:0,M.role=(B=this.props.role)!==null&&B!==void 0?B:"application",M.onKeyDown=function(F){b.accessibilityManager.keyboardEvent(F)},M.onFocus=function(){b.accessibilityManager.focus()}}var V=this.parseEventsOfWrapper();return L.createElement(_2,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},L.createElement("div",Al({className:Me("recharts-wrapper",E),style:K({position:"relative",cursor:"default",width:C,height:S},_)},V,{ref:function(q){b.container=q}}),L.createElement(dw,Al({},M,{width:C,height:S,title:T,desc:O,style:MIe}),this.renderClipPath(),cT(A,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(k.Component);Ae(y,"displayName",n),Ae(y,"defaultProps",K({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),Ae(y,"getDerivedStateFromProps",function(v,x){var w=v.dataKey,b=v.data,N=v.children,A=v.width,E=v.height,C=v.layout,S=v.stackOffset,_=v.margin,P=x.dataStartIndex,T=x.dataEndIndex;if(x.updateId===void 0){var O=z2(v);return K(K(K({},O),{},{updateId:0},m(K(K({props:v},O),{},{updateId:0}),x)),{},{prevDataKey:w,prevData:b,prevWidth:A,prevHeight:E,prevLayout:C,prevStackOffset:S,prevMargin:_,prevChildren:N})}if(w!==x.prevDataKey||b!==x.prevData||A!==x.prevWidth||E!==x.prevHeight||C!==x.prevLayout||S!==x.prevStackOffset||!Ml(_,x.prevMargin)){var R=z2(v),M={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},D=K(K({},U2(x,b,C)),{},{updateId:x.updateId+1}),B=K(K(K({},R),M),D);return K(K(K({},B),m(K({props:v},B),x)),{},{prevDataKey:w,prevData:b,prevWidth:A,prevHeight:E,prevLayout:C,prevStackOffset:S,prevMargin:_,prevChildren:N})}if(!cw(N,x.prevChildren)){var V,F,q,H,Z=nr(N,xc),Y=Z&&(V=(F=Z.props)===null||F===void 0?void 0:F.startIndex)!==null&&V!==void 0?V:P,re=Z&&(q=(H=Z.props)===null||H===void 0?void 0:H.endIndex)!==null&&q!==void 0?q:T,z=Y!==P||re!==T,se=!Re(b),me=se&&!z?x.updateId:x.updateId+1;return K(K({updateId:me},m(K(K({props:v},x),{},{updateId:me,dataStartIndex:Y,dataEndIndex:re}),x)),{},{prevChildren:N,dataStartIndex:Y,dataEndIndex:re})}return null}),Ae(y,"renderActiveDot",function(v,x,w){var b;return k.isValidElement(v)?b=k.cloneElement(v,x):je(v)?b=v(x):b=L.createElement(Ev,x),L.createElement(Xe,{className:"recharts-active-dot",key:w},b)});var g=k.forwardRef(function(x,w){return L.createElement(y,Al({},x,{ref:w}))});return g.displayName=y.displayName,g},HIe=fA({chartName:"BarChart",GraphicalChild:zo,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Io},{axisType:"yAxis",AxisComp:jc}],formatAxisMap:a5}),KIe=fA({chartName:"PieChart",GraphicalChild:Ss,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Pv},{axisType:"radiusAxis",AxisComp:jv}],formatAxisMap:PNe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),W5=fA({chartName:"AreaChart",GraphicalChild:Si,axisComponents:[{axisType:"xAxis",AxisComp:Io},{axisType:"yAxis",AxisComp:jc}],formatAxisMap:a5});function YIe({data:t,onClose:e}){const[n,r]=k.useState(null),[i,s]=k.useState("1Y"),[a,l]=k.useState(!1),c=k.useMemo(()=>{const u=new Date;let d=new Date;i==="3M"?d.setMonth(u.getMonth()-3):i==="6M"?d.setMonth(u.getMonth()-6):i==="YTD"?d=new Date(u.getFullYear(),0,1):i==="1Y"?d.setFullYear(u.getFullYear()-1):d=new Date(0);const f=S=>{const _=S.inquiryDate||S.eventDate,P=new Date(_);return!isNaN(P)&&P>=d&&P<=u},h=t.filter(f),m=h.filter(S=>{const _=(S.stage||"").toLowerCase(),P=(S.status||"").toLowerCase();return _==="booked"||_==="won"||_==="completed"||P==="booked"||P==="won"||P==="completed"||_.includes("won")||P.includes("won")}),y=h.filter(S=>["proposal","negotiation","visit","meeting"].includes((S.stage||"").toLowerCase())),g=m.reduce((S,_)=>S+At(_.finalAmount||_.amount),0),v=y.reduce((S,_)=>S+At(_.amount),0),x=m.length>0?g/m.length:0,w={},b={};m.forEach(S=>{const _=new Date(S.inquiryDate||S.eventDate),P=_.getFullYear(),T=_.getMonth(),O=`${P}-${String(T+1).padStart(2,"0")}`,R=_.toLocaleString("default",{month:"short",year:"numeric"});w[O]||(w[O]={name:R,value:0,rawDate:O}),w[O].value+=At(S.finalAmount||S.amount),b[R]||(b[R]=[]),b[R].push(S)});const N=Object.keys(w).sort().map(S=>w[S]),A={};m.forEach(S=>{const _=S.eventType&&S.eventType.trim()?S.eventType.trim().charAt(0).toUpperCase()+S.eventType.trim().slice(1):"Other";A[_]=(A[_]||0)+At(S.finalAmount||S.amount)});const E=Object.entries(A).map(([S,_])=>({name:S,value:_})).sort((S,_)=>_.value-S.value),C=[...m].sort((S,_)=>At(_.finalAmount||_.amount)-At(S.finalAmount||S.amount)).slice(0,5);return{totalRevenue:g,potentialRevenue:v,avgDealSize:x,trendData:N,eventData:E,topDeals:C,eventsByMonth:b,total:h.length,wonCount:m.length}},[t,i]);return o.jsxs("div",{className:"fixed inset-0 bg-slate-900/70 backdrop-blur-sm z-[70] flex items-center justify-center p-4",children:[n&&o.jsx(hoe,{monthName:n,events:c.eventsByMonth[n]||[],onClose:()=>r(null)}),a&&o.jsx(goe,{stats:c,onClose:()=>l(!1)}),o.jsxs("div",{className:"bg-white w-full max-w-6xl h-[90vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-scale-in",children:[o.jsxs("div",{className:"bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-green-100 rounded-xl text-green-700",children:o.jsx($o,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Revenue Analytics"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Confirmed Bookings (Won / Booked / Completed)"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg font-bold text-xs hover:bg-purple-200 transition-colors",children:[o.jsx(ir,{className:"w-4 h-4"})," AI Analysis"]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:o.jsx(Ft,{className:"w-6 h-6 text-gray-500"})})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-8 bg-slate-50",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[o.jsx("p",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Gross Revenue"}),o.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:Le(c.totalRevenue)})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[o.jsx("p",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Pipeline Potential"}),o.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:Le(c.potentialRevenue)})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm h-72",children:[o.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Revenue Trend"}),o.jsx(fg,{width:"100%",height:"100%",children:o.jsxs(W5,{data:c.trendData,children:[o.jsx(Io,{dataKey:"name"}),o.jsx(rr,{formatter:u=>Le(u)}),o.jsx(Si,{type:"monotone",dataKey:"value",stroke:"#10B981",fill:"#10B981",fillOpacity:.1})]})})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm h-72",children:[o.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"By Event Type"}),o.jsx(fg,{width:"100%",height:"100%",children:o.jsxs(HIe,{data:c.eventData,children:[o.jsx(Io,{dataKey:"name"}),o.jsx(rr,{formatter:u=>Le(u)}),o.jsx(zo,{dataKey:"value",fill:"#3B82F6"})]})})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b",children:o.jsx("h3",{className:"font-bold text-gray-900",children:"Top Deals"})}),o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3",children:"Client"}),o.jsx("th",{className:"px-6 py-3 text-right",children:"Amount"})]})}),o.jsx("tbody",{className:"divide-y",children:c.topDeals.map((u,d)=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-3",children:u.clientName}),o.jsx("td",{className:"px-6 py-3 text-right font-bold text-green-600",children:Le(u.amount)})]},d))})]})]})]})]})]})}const XIe="https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/calendar.events",QIe="https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest";let yh="primary";function hA({title:t,description:e="",location:n="",startDate:r,startTime:i=null,endDate:s=null,endTime:a=null,durationMinutes:l=60}){const c="https://calendar.google.com/calendar/render",u=new URLSearchParams;u.set("action","TEMPLATE"),u.set("text",t),e&&u.set("details",e),n&&u.set("location",n);const d=m=>m.replace(/-/g,""),f=m=>m.replace(":","")+"00";let h;if(i){const m=`${d(r)}T${f(i)}`;let y;if(s&&a)y=`${d(s)}T${f(a)}`;else if(a)y=`${d(r)}T${f(a)}`;else{const[g,v]=i.split(":").map(Number),w=g*60+v+l,b=Math.floor(w/60)%24,N=w%60,A=`${String(b).padStart(2,"0")}:${String(N).padStart(2,"0")}`;y=`${d(s||r)}T${f(A)}`}h=`${m}/${y}`}else{const m=d(r);d(s||r);const y=new Date(s||r);y.setDate(y.getDate()+1);const g=y.toISOString().split("T")[0].replace(/-/g,"");h=`${m}/${g}`}return u.set("dates",h),`${c}?${u.toString()}`}function JIe(t){const{clientName:e,phone:n,siteVisitDate:r,siteVisitTime:i,notes:s}=t;return hA({title:` Site Visit: ${e}`,description:`Client: ${e}
Phone: ${n||"N/A"}

Notes:
${s||"No notes"}`,location:"Area 51 Banquet Hall",startDate:r,startTime:i||null,durationMinutes:60})}function R1(t){const{clientName:e,phone:n,nextCallDate:r,nextCallTime:i,lastCallNotes:s}=t;return hA({title:` Call: ${e}`,description:`Client: ${e}
Phone: ${n||"N/A"}

Last Call Notes:
${s||"No previous notes"}`,startDate:r,startTime:i||"10:00",durationMinutes:15})}function ZIe(t){const{clientName:e,phone:n,eventDate:r,eventType:i,guests:s,amount:a,notes:l}=t;return hA({title:` Event: ${e} - ${i||"Booking"}`,description:`Client: ${e}
Phone: ${n||"N/A"}
Event Type: ${i||"N/A"}
Guests: ${s||"N/A"}
Amount: PKR ${(a==null?void 0:a.toLocaleString())||"N/A"}

Notes:
${l||"No notes"}`,location:"Area 51 Banquet Hall",startDate:r,durationMinutes:480})}function Sd(t){window.open(t,"_blank","noopener,noreferrer")}let kc=!1,W2=!1,td=null;function pA(){return new Promise((t,e)=>{if(window.gapi&&window.google){t();return}const n=document.createElement("script");n.src="https://apis.google.com/js/api.js",n.async=!0,n.defer=!0;const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.async=!0,r.defer=!0;let i=!1,s=!1;const a=()=>{i&&s&&t()};n.onload=()=>{i=!0,a()},r.onload=()=>{s=!0,a()},n.onerror=e,r.onerror=e,document.head.appendChild(n),document.head.appendChild(r)})}async function G5(t,e){return await pA(),await new Promise((n,r)=>{window.gapi.load("client",{callback:n,onerror:r})}),await window.gapi.client.init({apiKey:e,discoveryDocs:[QIe]}),kc=!0,td=window.google.accounts.oauth2.initTokenClient({client_id:t,scope:XIe,callback:""}),W2=!0,{gapiInitialized:kc,gisInitialized:W2}}function su(){var t,e;return((e=(t=window.gapi)==null?void 0:t.client)==null?void 0:e.getToken())!==null}function vh(){return new Promise((t,e)=>{if(!td){e(new Error("Google Calendar API not initialized"));return}td.callback=n=>{n.error?e(n):t(n)},window.gapi.client.getToken()===null?td.requestAccessToken({prompt:"consent"}):td.requestAccessToken({prompt:""})})}function eOe(){var e,n;const t=(n=(e=window.gapi)==null?void 0:e.client)==null?void 0:n.getToken();t&&(window.google.accounts.oauth2.revoke(t.access_token),window.gapi.client.setToken("")),yh="primary"}function $1(t){yh=t||"primary"}async function tOe(){if(!kc)throw new Error("Google Calendar API not initialized");return su()||await vh(),(await window.gapi.client.calendar.calendarList.list({minAccessRole:"writer"})).result.items.map(e=>({id:e.id,name:e.summary,description:e.description||"",primary:e.primary||!1,backgroundColor:e.backgroundColor}))}async function nOe(t){if(!kc)throw new Error("Google Calendar API not initialized");su()||await vh();const{title:e,description:n,location:r,startDate:i,startTime:s,endDate:a,endTime:l,durationMinutes:c=60}=t;let u,d;if(s){const m=new Date(`${i}T${s}:00`),y=a&&l?new Date(`${a}T${l}:00`):new Date(m.getTime()+c*6e4);u={dateTime:m.toISOString(),timeZone:"Asia/Karachi"},d={dateTime:y.toISOString(),timeZone:"Asia/Karachi"}}else{u={date:i};const m=new Date(a||i);m.setDate(m.getDate()+1),d={date:m.toISOString().split("T")[0]}}const f={summary:e,description:n||"",location:r||"",start:u,end:d,reminders:{useDefault:!1,overrides:[{method:"popup",minutes:60},{method:"popup",minutes:15}]}};return(await window.gapi.client.calendar.events.insert({calendarId:yh,resource:f})).result}async function rOe(t,e){if(!kc)throw new Error("Google Calendar API not initialized");su()||await vh();const{title:n,description:r,location:i,startDate:s,startTime:a,endDate:l,endTime:c,durationMinutes:u=60}=e;let d,f;if(a){const y=new Date(`${s}T${a}:00`),g=l&&c?new Date(`${l}T${c}:00`):new Date(y.getTime()+u*6e4);d={dateTime:y.toISOString(),timeZone:"Asia/Karachi"},f={dateTime:g.toISOString(),timeZone:"Asia/Karachi"}}else{d={date:s};const y=new Date(l||s);y.setDate(y.getDate()+1),f={date:y.toISOString().split("T")[0]}}const h={summary:n,description:r||"",location:i||"",start:d,end:f};return(await window.gapi.client.calendar.events.update({calendarId:yh,eventId:t,resource:h})).result}async function G2(t){if(!kc)throw new Error("Google Calendar API not initialized");su()||await vh(),await window.gapi.client.calendar.events.delete({calendarId:yh,eventId:t})}async function iOe(t,e){var r,i;let n;switch(e){case"siteVisit":n={title:` Site Visit: ${t.clientName}`,description:`Client: ${t.clientName}
Phone: ${t.phone||"N/A"}
Stage: ${t.stage}

Notes:
${t.notes||"No notes"}`,location:"Area 51 Banquet Hall",startDate:t.siteVisitDate,startTime:t.siteVisitTime||null,durationMinutes:60};break;case"call":n={title:` Call: ${t.clientName}`,description:`Client: ${t.clientName}
Phone: ${t.phone||"N/A"}
Stage: ${t.stage}

Last Call Notes:
${t.lastCallNotes||"No previous notes"}`,startDate:t.nextCallDate,startTime:t.nextCallTime||"10:00",durationMinutes:15};break;case"event":n={title:` Event: ${t.clientName} - ${t.eventType||"Booking"}`,description:`Client: ${t.clientName}
Phone: ${t.phone||"N/A"}
Event Type: ${t.eventType||"N/A"}
Guests: ${t.guests||"N/A"}
Amount: PKR ${((r=t.amount)==null?void 0:r.toLocaleString())||"N/A"}

Notes:
${t.notes||"No notes"}`,location:"Area 51 Banquet Hall",startDate:t.eventDate,durationMinutes:480};break;case"booking":n={title:` BOOKED: ${t.clientName} - ${t.eventType||"Event"}`,description:`CONFIRMED BOOKING

Client: ${t.clientName}
Phone: ${t.phone||"N/A"}
Event Type: ${t.eventType||"N/A"}
Guests: ${t.guests||"N/A"}
Amount: PKR ${((i=t.amount)==null?void 0:i.toLocaleString())||"N/A"}

Notes:
${t.notes||"No notes"}`,location:"Area 51 Banquet Hall",startDate:t.eventDate,durationMinutes:480};break;default:throw new Error(`Unknown event type: ${e}`)}return await nOe(n)}function H2(t){return{siteVisit:"calendarEventIdSiteVisit",call:"calendarEventIdCall",event:"calendarEventIdEvent",booking:"calendarEventIdBooking"}[t]||`calendarEventId${t}`}const H5=k.createContext(null);function sOe({children:t}){const[e,n]=k.useState(null),[r,i]=k.useState(!1),[s,a]=k.useState(!1);k.useEffect(()=>{const f=Gm(Qn($t,"artifacts",Lt,"public","data","app_settings","integrations"),h=>{h.exists()&&n(h.data())});return()=>f()},[]),k.useEffect(()=>{(async()=>{if(!(e!=null&&e.googleCalendarEnabled)||!(e!=null&&e.googleCalendarClientId)||!(e!=null&&e.googleCalendarApiKey)){a(!1),i(!1);return}try{await pA(),await G5(e.googleCalendarClientId,e.googleCalendarApiKey),a(!0),i(su()),e.googleCalendarSelectedId&&$1(e.googleCalendarSelectedId)}catch(h){console.error("Failed to initialize Google Calendar:",h),a(!1),i(!1)}})()},[e==null?void 0:e.googleCalendarEnabled,e==null?void 0:e.googleCalendarClientId,e==null?void 0:e.googleCalendarApiKey]);const l=k.useCallback(f=>{if(!(e!=null&&e.googleCalendarEnabled)||!(e!=null&&e.googleCalendarAutoSync)||!r)return!1;switch(f){case"siteVisit":return e.googleCalendarSyncSiteVisits;case"call":return e.googleCalendarSyncCalls;case"event":return e.googleCalendarSyncEvents;case"booking":return e.googleCalendarSyncBookings;default:return!1}},[e,r]),c=k.useCallback(async(f,h,m)=>{if(!l(h))return null;const y=H2(h),g=f[y];try{let v=!1;switch(h){case"siteVisit":v=!!f.siteVisitDate;break;case"call":v=!!f.nextCallDate;break;case"event":case"booking":v=!!f.eventDate;break}if(!v)return g&&(await G2(g),m&&await m(f.id,{[y]:null})),null;if(g){const x=aOe(f,h);return await rOe(g,x),g}else{const x=await iOe(f,h);return x!=null&&x.id&&m&&await m(f.id,{[y]:x.id}),x==null?void 0:x.id}}catch(v){return console.error("Calendar sync error:",v),null}},[l]),u=k.useCallback(async(f,h,m)=>{const y=H2(h),g=f[y];if(g)try{await G2(g),m&&await m(f.id,{[y]:null})}catch(v){console.error("Failed to remove calendar event:",v)}},[]),d={isEnabled:(e==null?void 0:e.googleCalendarEnabled)||!1,isConnected:r,isInitialized:s,shouldAutoSync:l,syncLeadEvent:c,removeLeadEvent:u,settings:e};return o.jsx(H5.Provider,{value:d,children:t})}function K5(){const t=k.useContext(H5);if(!t)throw new Error("useGoogleCalendar must be used within a GoogleCalendarProvider");return t}function aOe(t,e){var n,r;switch(e){case"siteVisit":return{title:` Site Visit: ${t.clientName}`,description:`Client: ${t.clientName}
Phone: ${t.phone||"N/A"}
Stage: ${t.stage}

Notes:
${t.notes||"No notes"}`,location:"Area 51 Banquet Hall",startDate:t.siteVisitDate,startTime:t.siteVisitTime||null,durationMinutes:60};case"call":return{title:` Call: ${t.clientName}`,description:`Client: ${t.clientName}
Phone: ${t.phone||"N/A"}
Stage: ${t.stage}

Last Call Notes:
${t.lastCallNotes||"No previous notes"}`,startDate:t.nextCallDate,startTime:t.nextCallTime||"10:00",durationMinutes:15};case"event":return{title:` Event: ${t.clientName} - ${t.eventType||"Booking"}`,description:`Client: ${t.clientName}
Phone: ${t.phone||"N/A"}
Event Type: ${t.eventType||"N/A"}
Guests: ${t.guests||"N/A"}
Amount: PKR ${((n=t.amount)==null?void 0:n.toLocaleString())||"N/A"}

Notes:
${t.notes||"No notes"}`,location:"Area 51 Banquet Hall",startDate:t.eventDate,durationMinutes:480};case"booking":return{title:` BOOKED: ${t.clientName} - ${t.eventType||"Event"}`,description:`CONFIRMED BOOKING

Client: ${t.clientName}
Phone: ${t.phone||"N/A"}
Event Type: ${t.eventType||"N/A"}
Guests: ${t.guests||"N/A"}
Amount: PKR ${((r=t.amount)==null?void 0:r.toLocaleString())||"N/A"}

Notes:
${t.notes||"No notes"}`,location:"Area 51 Banquet Hall",startDate:t.eventDate,durationMinutes:480};default:return null}}function oOe({lead:t,currentUser:e,onClose:n,onSave:r,onOpenAi:i,sources:s,managers:a,eventTypes:l}){var re;const[c,u]=k.useState("details"),[d,f]=k.useState({...t}),[h,m]=k.useState(""),[y,g]=k.useState(!1),[v,x]=k.useState(null),[w,b]=k.useState(null),[N,A]=k.useState({venue:"",eventDate:"",eventType:"",guests:"",finalAmount:"",advanceAmount:"",notes:""}),E=k.useRef(null),{syncLeadEvent:C,shouldAutoSync:S}=K5(),[_,P]=k.useState([]),T=async()=>{try{const z=await sr.getTimeline(t.id);P(z)}catch(z){console.error("Error fetching timeline:",z)}};k.useEffect(()=>{t.id&&T()},[t.id]),k.useEffect(()=>{var z;c==="activity"&&((z=E.current)==null||z.scrollIntoView({behavior:"smooth"}))},[c,t.activityLog]);const O=async()=>{g(!0),await r(t.id,d);try{(d.siteVisitDate!==t.siteVisitDate||d.siteVisitTime!==t.siteVisitTime)&&S("siteVisit")&&await C({...d,id:t.id},"siteVisit",r),d.eventDate!==t.eventDate&&(d.stage==="Booked"&&S("booking")?await C({...d,id:t.id},"booking",r):S("event")&&await C({...d,id:t.id},"event",r))}catch(z){console.error("Calendar sync error:",z)}g(!1),n()},R=async()=>{if(h.trim())try{const z={note:h};await sr.addNote(t.id,{content:JSON.stringify(z),type:Ye.NOTE_ADDED,userId:e.id}),m(""),T()}catch(z){console.error("Error adding comment:",z)}},M=z=>{z!==d.stage&&(z==="Booked"?(A({venue:d.venue||"",eventDate:d.eventDate?new Date(d.eventDate).toISOString().split("T")[0]:"",eventType:d.eventType||"",guests:d.guests||"",finalAmount:d.quotationAmount||"",advanceAmount:d.advancePaid||"",notes:d.bookingNotes||""}),b({from:d.stage,to:z})):x({from:d.stage,to:z}))},D=async()=>{if(!v)return;const{from:z,to:se}=v,me={from:z,to:se};try{await B(se),await r(t.id,{stage:se,stageUpdatedAt:new Date().toISOString(),stageUpdatedBy:e.name}),await sr.addNote(t.id,{content:JSON.stringify(me),type:Ye.STAGE_CHANGE,userId:e.id}),f(ze=>({...ze,stage:se})),T(),x(null),u("activity")}catch(ze){console.error("Error changing stage:",ze)}},B=async z=>!0,V=()=>{x(null)},F=async()=>{if(!w||!N.venue||!N.eventDate||!N.finalAmount)return;const{from:z,to:se}=w,me=KW(Ye.STAGE_CHANGE,{from:z,to:se,bookingDetails:{venue:N.venue,eventDate:N.eventDate,finalAmount:N.finalAmount,advanceAmount:N.advanceAmount}},e.name),ze={...d,stage:se,venue:N.venue,eventDate:N.eventDate,eventType:N.eventType,guests:N.guests,quotationAmount:Number(N.finalAmount),advancePaid:Number(N.advanceAmount)||0,totalPaid:Number(N.advanceAmount)||0,totalDue:Number(N.finalAmount)-(Number(N.advanceAmount)||0),bookingNotes:N.notes,bookedAt:new Date().toISOString(),bookedBy:e.name,activityLog:[...d.activityLog||[],me]};f(ze),await r(t.id,{stage:se,venue:N.venue,eventDate:N.eventDate,eventType:N.eventType,guests:N.guests,finalAmount:Number(N.finalAmount),quotationAmount:Number(N.finalAmount),advanceAmount:Number(N.advanceAmount)||0,totalPaid:Number(N.advanceAmount)||0,totalDue:Number(N.finalAmount)-(Number(N.advanceAmount)||0),bookingNotes:N.notes,bookedAt:new Date().toISOString(),bookedBy:e.name,stageUpdatedAt:new Date().toISOString(),stageUpdatedBy:e.name});try{const ct={from:z,to:se,bookingDetails:{venue:N.venue,eventDate:N.eventDate,finalAmount:N.finalAmount,advanceAmount:N.advanceAmount}};await sr.addNote(t.id,{content:JSON.stringify(ct),type:Ye.STAGE_CHANGE,userId:e.id}),T()}catch(ct){console.error("Error logging booking activity:",ct)}b(null),u("activity")},q=()=>{b(null)},H=N.venue&&N.eventDate&&N.finalAmount,Z=k.useMemo(()=>{const z=[...s||[]];return d.source&&!z.find(se=>se.name===d.source)&&z.push({id:`custom-${d.source}`,name:d.source}),z},[s,d.source]),Y=k.useMemo(()=>{const z=[];return _.forEach(se=>{var ze;let me={};try{me=JSON.parse(se.content)}catch{me={note:se.content}}z.push({type:se.type,data:me,timestamp:new Date(se.createdAt),user:((ze=se.user)==null?void 0:ze.username)||"Unknown"})}),z.sort((se,me)=>me.timestamp-se.timestamp)},[_]);return o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white w-full max-w-4xl h-[90vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-scale-in relative",children:[o.jsxs("div",{className:"bg-white border-b border-gray-200 p-6 flex justify-between items-center sticky top-0 z-20",children:[o.jsx("div",{children:o.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[d.clientName,o.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-700 text-xs rounded-full uppercase tracking-wider",children:d.stage})]})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>i(t),className:"p-2 rounded-full bg-indigo-50 text-indigo-600 hover:bg-indigo-100 transition-colors",title:"Ask AI Assistant",children:o.jsx(ir,{className:"w-5 h-5"})}),o.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-full",children:o.jsx(Ft,{className:"w-6 h-6 text-gray-500"})})]})]}),o.jsx("div",{className:"bg-slate-50 border-b border-gray-200 px-6 py-2 flex gap-2 overflow-x-auto",children:la.map(z=>o.jsx("button",{onClick:()=>M(z),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border ${d.stage===z?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-500 border-gray-200 hover:border-blue-400"}`,children:z},z))}),v&&o.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-30 rounded-2xl",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 max-w-md mx-4 animate-scale-in",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Confirm Stage Change"}),o.jsxs("p",{className:"text-gray-600 mb-4",children:["Move this lead from ",o.jsx("span",{className:"font-semibold text-gray-900",children:v.from})," to"," ",o.jsx("span",{className:"font-semibold text-blue-600",children:v.to}),"?"]}),o.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"This will be logged in the timeline."}),o.jsxs("div",{className:"flex gap-3 justify-end",children:[o.jsx("button",{onClick:V,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium transition-colors",children:"Cancel"}),o.jsx("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg font-medium transition-colors",children:"Confirm"})]})]})}),w&&o.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-30 rounded-2xl overflow-y-auto py-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg mx-4 animate-scale-in",children:[o.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-4 rounded-t-xl",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:o.jsx(Qr,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold",children:"Confirm Booking"}),o.jsx("p",{className:"text-green-100 text-sm",children:"Please verify all details before confirming"})]})]})}),o.jsxs("div",{className:"p-5 space-y-4",children:[o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Client"}),o.jsx("p",{className:"font-bold text-gray-900",children:d.clientName}),o.jsx("p",{className:"text-sm text-gray-500",children:d.phone})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Venue ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:U0.map(z=>o.jsx("button",{type:"button",onClick:()=>A({...N,venue:z.id}),className:`p-3 rounded-lg border-2 text-left transition-all ${N.venue===z.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(FB,{className:`w-5 h-5 ${N.venue===z.id?"text-green-600":"text-gray-400"}`}),o.jsxs("div",{children:[o.jsx("p",{className:`font-medium ${N.venue===z.id?"text-green-700":"text-gray-700"}`,children:z.name}),o.jsx("p",{className:"text-xs text-gray-500",children:z.label})]})]})},z.id))}),!N.venue&&o.jsxs("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[o.jsx(mo,{className:"w-3 h-3"})," Please select a venue"]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Event Date ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"date",className:`w-full p-2.5 border rounded-lg text-sm ${N.eventDate?"border-gray-200":"border-red-300"}`,value:N.eventDate,onChange:z=>A({...N,eventDate:z.target.value})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Event Type"}),o.jsx("input",{type:"text",className:"w-full p-2.5 border border-gray-200 rounded-lg text-sm",value:N.eventType,onChange:z=>A({...N,eventType:z.target.value}),placeholder:"e.g., Wedding, Mehndi"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Guests"}),o.jsx("input",{type:"text",className:"w-full p-2.5 border border-gray-200 rounded-lg text-sm",value:N.guests,onChange:z=>A({...N,guests:z.target.value}),placeholder:"e.g., 200"})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Final Invoice Amount ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"PKR"}),o.jsx("input",{type:"number",className:`w-full p-2.5 pl-12 border rounded-lg text-sm ${N.finalAmount?"border-gray-200":"border-red-300"}`,value:N.finalAmount,onChange:z=>A({...N,finalAmount:z.target.value}),placeholder:"0"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Advance Received"}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"PKR"}),o.jsx("input",{type:"number",className:"w-full p-2.5 pl-12 border border-gray-200 rounded-lg text-sm",value:N.advanceAmount,onChange:z=>A({...N,advanceAmount:z.target.value}),placeholder:"0"})]}),N.finalAmount&&N.advanceAmount&&o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Balance due: PKR ",(Number(N.finalAmount)-Number(N.advanceAmount)).toLocaleString()]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Booking Notes"}),o.jsx("textarea",{className:"w-full p-2.5 border border-gray-200 rounded-lg text-sm h-20 resize-none",value:N.notes,onChange:z=>A({...N,notes:z.target.value}),placeholder:"Special requirements, menu preferences, etc."})]}),H&&o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs font-semibold text-green-700 uppercase tracking-wide mb-2",children:"Booking Summary"}),o.jsxs("div",{className:"text-sm text-green-800 space-y-1",children:[o.jsxs("p",{children:[o.jsx("span",{className:"text-green-600",children:"Venue:"})," ",(re=U0.find(z=>z.id===N.venue))==null?void 0:re.label]}),o.jsxs("p",{children:[o.jsx("span",{className:"text-green-600",children:"Date:"})," ",new Date(N.eventDate).toLocaleDateString("en-PK",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"text-green-600",children:"Amount:"})," PKR ",Number(N.finalAmount).toLocaleString()]})]})]})]}),o.jsxs("div",{className:"p-4 border-t bg-gray-50 flex gap-3 justify-end rounded-b-xl",children:[o.jsx("button",{onClick:q,className:"px-4 py-2 text-gray-600 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Cancel"}),o.jsxs("button",{onClick:F,disabled:!H,className:`px-6 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${H?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[o.jsx(Qr,{className:"w-4 h-4"}),"Confirm Booking"]})]})]})}),o.jsxs("div",{className:"flex-1 flex overflow-hidden bg-slate-50",children:[o.jsxs("div",{className:"w-56 bg-white border-r border-gray-200 p-4 flex flex-col gap-2",children:[o.jsxs("button",{onClick:()=>u("details"),className:`text-left px-4 py-3 rounded-xl text-sm font-bold flex items-center gap-3 ${c==="details"?"bg-blue-50 text-blue-700":"text-gray-500 hover:bg-gray-50"}`,children:[o.jsx(XB,{className:"w-4 h-4"})," Details"]}),o.jsxs("button",{onClick:()=>u("activity"),className:`text-left px-4 py-3 rounded-xl text-sm font-bold flex items-center gap-3 ${c==="activity"?"bg-blue-50 text-blue-700":"text-gray-500 hover:bg-gray-50"}`,children:[o.jsx(as,{className:"w-4 h-4"})," Timeline",Y.length>0&&o.jsx("span",{className:"ml-auto text-xs bg-gray-200 text-gray-600 px-2 py-0.5 rounded-full",children:Y.length})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-8",children:[c==="details"&&o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[d.meta&&o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-xl border border-blue-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Gd,{className:"w-4 h-4 text-blue-500"}),o.jsx("h3",{className:"text-xs font-bold text-blue-700 uppercase tracking-widest",children:"Meta Campaign Info"})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:[d.meta.campaign_name&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500 text-xs",children:"Campaign"}),o.jsx("div",{className:"font-medium text-gray-900",children:d.meta.campaign_name})]}),d.meta.adset_name&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500 text-xs",children:"Ad Set"}),o.jsx("div",{className:"font-medium text-gray-900",children:d.meta.adset_name})]}),d.meta.ad_name&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500 text-xs",children:"Ad"}),o.jsx("div",{className:"font-medium text-gray-900 truncate",title:d.meta.ad_name,children:d.meta.ad_name})]}),d.meta.platform&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500 text-xs",children:"Platform"}),o.jsx("div",{className:"font-medium text-gray-900 capitalize",children:d.meta.platform})]}),d.meta.form_name&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500 text-xs",children:"Form"}),o.jsx("div",{className:"font-medium text-gray-900",children:d.meta.form_name})]}),d.meta.city&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500 text-xs",children:"City"}),o.jsx("div",{className:"font-medium text-gray-900",children:d.meta.city})]})]}),(d.budgetRange||d.meta.budget_range||d.meta.event_type)&&o.jsxs("div",{className:"flex flex-wrap gap-2 mt-3 pt-3 border-t border-blue-200",children:[(d.budgetRange||d.meta.budget_range)&&o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs font-medium",children:[o.jsx($o,{className:"w-3 h-3"}),d.budgetRange||d.meta.budget_range]}),d.meta.event_type&&o.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:d.meta.event_type}),d.meta.guest_count&&o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:[o.jsx(jr,{className:"w-3 h-3"}),d.meta.guest_count," guests"]}),d.meta.event_date&&o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:[o.jsx(ln,{className:"w-3 h-3"}),d.meta.event_date]})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[o.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest border-b pb-2",children:"Event Info"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Event Date"}),o.jsx("input",{type:"date",className:"w-full p-2 border rounded-lg text-sm mt-1",value:d.eventDate?new Date(d.eventDate).toISOString().split("T")[0]:"",onChange:z=>f({...d,eventDate:z.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Guests"}),o.jsx("input",{type:"number",className:"w-full p-2 border rounded-lg text-sm mt-1",value:d.guests||"",onChange:z=>f({...d,guests:z.target.value})})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"text-xs font-semibold text-gray-500",children:["Client Budget ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{className:"w-full p-2 border rounded-lg text-sm mt-1",value:d.clientBudget||"",onChange:z=>f({...d,clientBudget:Number(z.target.value)}),type:"number",placeholder:"PKR",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Quotation Amount"}),o.jsx("input",{className:"w-full p-2 border rounded-lg text-sm mt-1",value:d.quotationAmount||"",onChange:z=>f({...d,quotationAmount:Number(z.target.value)}),type:"number",placeholder:"PKR (based on client budget)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Manager"}),o.jsxs("select",{className:"w-full p-2 border rounded-lg text-sm mt-1 bg-white",value:d.manager||"",onChange:z=>f({...d,manager:z.target.value}),children:[o.jsx("option",{value:"",children:"Select Manager"}),(a||ZS).map((z,se)=>o.jsx("option",{value:z,children:z},`${z}-${se}`))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Event Type"}),o.jsxs("select",{className:"w-full p-2 border rounded-lg text-sm mt-1 bg-white",value:d.eventType||"",onChange:z=>f({...d,eventType:z.target.value}),children:[o.jsx("option",{value:"",children:"Select Event Type"}),(l||of).map((z,se)=>o.jsx("option",{value:z,children:z},`${z}-${se}`))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Venue Preference"}),o.jsxs("select",{className:"w-full p-2 border rounded-lg text-sm mt-1 bg-white",value:d.venue||"",onChange:z=>f({...d,venue:z.target.value}),children:[o.jsx("option",{value:"",children:"Select Venue"}),U0.map(z=>o.jsx("option",{value:z.id,children:z.label},z.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Source"}),o.jsxs("select",{className:"w-full p-2 border rounded-lg text-sm mt-1 bg-white",value:d.source||"",onChange:z=>f({...d,source:z.target.value}),children:[o.jsx("option",{value:"",children:"Unknown"}),Z.map((z,se)=>o.jsx("option",{value:z.name,children:z.name},z.id||`source-${se}`))]})]})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[o.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest border-b pb-2",children:"Site Visit"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Site Visit Date"}),o.jsx("input",{type:"date",className:"w-full p-2 border rounded-lg text-sm mt-1",value:d.siteVisitDate||"",onChange:z=>f({...d,siteVisitDate:z.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Site Visit Time"}),o.jsx("input",{type:"time",className:"w-full p-2 border rounded-lg text-sm mt-1",value:d.siteVisitTime||"",onChange:z=>f({...d,siteVisitTime:z.target.value})})]})]})]}),(d.eventDate||d.siteVisitDate||d.nextCallDate)&&o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 p-6 rounded-xl border border-blue-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Eb,{className:"w-4 h-4 text-blue-600"}),o.jsx("h3",{className:"text-xs font-bold text-blue-700 uppercase tracking-widest",children:"Add to Google Calendar"})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.siteVisitDate&&o.jsxs("button",{onClick:()=>Sd(JIe(d)),className:"inline-flex items-center gap-2 px-3 py-2 bg-white border border-blue-200 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-50 hover:border-blue-300 transition-colors",children:[o.jsx(jb,{className:"w-4 h-4"}),"Site Visit",o.jsxs("span",{className:"text-xs text-blue-500",children:["(",new Date(d.siteVisitDate).toLocaleDateString(),")"]})]}),d.nextCallDate&&o.jsxs("button",{onClick:()=>Sd(R1(d)),className:"inline-flex items-center gap-2 px-3 py-2 bg-white border border-green-200 text-green-700 rounded-lg text-sm font-medium hover:bg-green-50 hover:border-green-300 transition-colors",children:[o.jsx(Un,{className:"w-4 h-4"}),"Scheduled Call",o.jsxs("span",{className:"text-xs text-green-500",children:["(",new Date(d.nextCallDate).toLocaleDateString(),")"]})]}),d.eventDate&&o.jsxs("button",{onClick:()=>Sd(ZIe(d)),className:"inline-flex items-center gap-2 px-3 py-2 bg-white border border-purple-200 text-purple-700 rounded-lg text-sm font-medium hover:bg-purple-50 hover:border-purple-300 transition-colors",children:[o.jsx(ln,{className:"w-4 h-4"}),d.stage==="Booked"?"Booking":"Event Date",o.jsxs("span",{className:"text-xs text-purple-500",children:["(",new Date(d.eventDate).toLocaleDateString(),")"]})]})]}),o.jsx("p",{className:"text-xs text-blue-500 mt-3",children:"Click to open Google Calendar with pre-filled event details"})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[o.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest border-b pb-2 mb-4",children:"Notes"}),o.jsx("textarea",{className:"w-full p-3 border rounded-lg text-sm h-32",value:d.notes||"",onChange:z=>f({...d,notes:z.target.value})})]})]}),c==="activity"&&o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs("div",{className:"flex-1 space-y-4 mb-4 overflow-y-auto",children:[Y.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-400",children:[o.jsx(as,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"No activity yet"}),o.jsx("p",{className:"text-xs mt-1",children:"Add a note below to start tracking"})]}):Y.map((z,se)=>{const me=YW(z.type);return o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:`w-8 h-8 rounded-full bg-${me.color}-100 flex items-center justify-center flex-shrink-0`,children:o.jsx("span",{className:"text-sm",children:me.icon})}),o.jsxs("div",{className:"flex-1 bg-white p-3 rounded-xl border shadow-sm",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:XW({type:z.type,...z.data})}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[z.user,"  ",z.timestamp.toLocaleString()]})]})]},se)}),o.jsx("div",{ref:E})]}),o.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[o.jsx("input",{className:"flex-1 p-3 rounded-xl border outline-none text-sm",placeholder:"Add note...",value:h,onChange:z=>m(z.target.value),onKeyDown:z=>z.key==="Enter"&&R()}),o.jsx("button",{onClick:R,className:"p-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700",children:o.jsx(Tm,{className:"w-4 h-4"})})]})]})]})]}),o.jsx("div",{className:"p-4 bg-white border-t border-gray-200 flex justify-end gap-2",children:o.jsxs("button",{onClick:O,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl flex items-center gap-2",children:[y?o.jsx(Ut,{className:"w-4 h-4 animate-spin"}):o.jsx(K_,{className:"w-4 h-4"})," ","Save"]})})]})})}const lOe=({text:t})=>{const[e,n]=k.useState(!1),r=async()=>{try{await navigator.clipboard.writeText(t),n(!0),setTimeout(()=>n(!1),2e3)}catch(i){console.error("Failed to copy:",i)}};return o.jsx("button",{onClick:r,className:`p-2 rounded-lg transition-colors ${e?"bg-green-100 text-green-600":"hover:bg-slate-200 text-slate-600"}`,title:"Copy Password",children:e?o.jsx(Qr,{className:"w-5 h-5"}):o.jsx(zB,{className:"w-5 h-5"})})};function cOe({onClose:t}){const[e,n]=k.useState([]),[r,i]=k.useState(""),[s,a]=k.useState(""),[l,c]=k.useState("Sales"),[u,d]=k.useState(!1),[f,h]=k.useState(!1),[m,y]=k.useState(!1),[g,v]=k.useState({mode:"round_robin",defaultAssignee:"Unassigned",sourceRules:[]}),[x,w]=k.useState([]),[b,N]=k.useState(!1),[A,E]=k.useState({}),[C,S]=k.useState(""),[_,P]=k.useState(!1),[T,O]=k.useState([]),[R,M]=k.useState(""),[D,B]=k.useState(""),[V,F]=k.useState(null),[q,H]=k.useState(null);k.useEffect(()=>{Z()},[]);const Z=async()=>{try{const W=await Yp.getAll();n(W)}catch(W){console.error("Error fetching users",W)}};k.useEffect(()=>{(async()=>{try{const de=await Ju.getAll();w(de)}catch(de){console.error("Error fetching sources",de)}})()},[]),k.useEffect(()=>{(async()=>{try{const[de,xe,Fe]=await Promise.all([tl.get("assignment_rules"),tl.get("automation_rules"),tl.get("event_types")]);de&&v(de),xe&&E(xe),Fe&&Fe.list&&Fe.list.length>0?O(Fe.list):O(of)}catch(de){console.error("Error loading settings",de),O(of)}})()},[]);const Y=async()=>{d(!0);try{await tl.update("assignment_rules",g),alert("Assignment rules saved!")}catch(W){console.error(W),alert("Failed to save rules.")}finally{d(!1)}},re=()=>{v(W=>{var de;return{...W,sourceRules:[...W.sourceRules||[],{source:"",assignTo:((de=e[0])==null?void 0:de.username)||""}]}})},z=(W,de,xe)=>{v(Fe=>{const gt=[...Fe.sourceRules||[]];return gt[W]={...gt[W],[de]:xe},{...Fe,sourceRules:gt}})},se=W=>{v(de=>({...de,sourceRules:(de.sourceRules||[]).filter((xe,Fe)=>Fe!==W)}))},me=W=>A[W]||{addToCallList:!0,sendNotification:!0,emailResponse:!1,textAutoResponse:!1,aiBot:!1},ze=(W,de)=>{E(xe=>({...xe,[W]:{...me(W),[de]:!me(W)[de]}}))},ct=async()=>{d(!0);try{await tl.update("automation_rules",A),alert("Automation rules saved!")}catch(W){console.error(W),alert("Failed to save automation rules.")}finally{d(!1)}},ae=async W=>{try{await tl.update("event_types",{list:W})}catch(de){console.error("Failed to save event types",de),alert("Failed to save event types to server")}},ye=async()=>{if(!D.trim())return;if(T.includes(D.trim())){alert("Event type already exists");return}const W=[...T,D.trim()];O(W),await ae(W),B("")},_e=async(W,de)=>{if(!de.trim())return;const xe=T.map(Fe=>Fe===W?de.trim():Fe);O(xe),await ae(xe),H(null)},X=async W=>{if(!window.confirm(`Delete event type "${W}"?`))return;const de=T.filter(xe=>xe!==W);O(de),await ae(de)},[Ne,Se]=k.useState(null),qe=async W=>{if(W.preventDefault(),!(!r.trim()||!s.trim())){d(!0);try{const de=await Yp.invite({email:r,name:s,role:l});if(de.status){const{tempPassword:xe}=de.data;Se({type:"success",title:"User Created Successfully",message:`User ${s} has been added to the team.`,password:xe,link:"https://area51crm.inplsoftwares.com",details:"Please share these credentials with the user."}),i(""),a(""),Z()}else throw new Error(de.message||"Failed to invite user")}catch(de){console.error(de);let xe=de.message||"An unknown error occurred.",Fe="Please check the details and try again.";(xe.includes("Prisma")||xe.includes("invocation")||xe.includes("create()"))&&(xe.includes("Unique constraint")?xe="A user with this email already exists.":xe.includes("argument `role`")?(xe="Invalid role selected.",Fe="The selected role is not supported by the system. Please try checking for updates."):(xe="Database operation failed.",Fe="An internal system error occurred. Please contact support.")),Se({type:"error",title:"User Creation Failed",message:xe,details:Fe})}finally{d(!1)}}},[Qe,St]=k.useState(null),ie=W=>{St({id:W.id,name:W.username||W.email})},ce=async()=>{if(Qe)try{await Yp.delete(Qe.id),Z(),St(null)}catch(W){console.error(W),Se({type:"error",title:"Deletion Failed",message:W.message||"Failed to remove user",details:"Please try again later."})}},$e=async()=>{if(window.confirm("DANGER: This will permanently delete ALL leads. Are you sure?")){h(!0);try{await B0.resetDatabase(),alert("Database cleared successfully."),window.location.reload()}catch(W){console.error(W),alert("Failed to reset database: "+W.message)}finally{h(!1)}}},ve=async()=>{if(window.confirm("This will ensure all leads have linked contacts. Continue?")){d(!0);try{const W=await B0.migrateContacts();alert(W.message),window.location.reload()}catch(W){console.error(W),alert("Migration failed: "+W.message)}finally{d(!1)}}},ot=async()=>{d(!0);try{const W=await B0.consolidateSources();alert(W.message)}catch(W){console.error(W),alert("Consolidation failed: "+W.message)}finally{d(!1)}};return o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-scale-in h-[80vh]",children:[o.jsxs("div",{className:"bg-slate-900 text-white p-6 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Tb,{className:"w-6 h-6 text-yellow-400"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold",children:"Admin Control Panel"}),o.jsx("p",{className:"text-slate-400 text-xs",children:"Manage Team Access"})]})]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full",children:o.jsx(Ft,{className:"w-5 h-5"})})]}),Ne&&o.jsx("div",{className:"absolute inset-0 z-50 bg-white/90 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:`bg-white rounded-2xl shadow-2xl border w-full max-w-md overflow-hidden transform transition-all scale-100 ${Ne.type==="error"?"border-red-100":"border-green-100"}`,children:[o.jsxs("div",{className:`p-6 text-center ${Ne.type==="error"?"bg-red-50":"bg-green-50"}`,children:[o.jsx("div",{className:`w-16 h-16 rounded-full mx-auto flex items-center justify-center mb-4 ${Ne.type==="error"?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:Ne.type==="error"?o.jsx(ss,{className:"w-8 h-8"}):o.jsx(Qr,{className:"w-8 h-8"})}),o.jsx("h3",{className:`text-xl font-bold mb-2 ${Ne.type==="error"?"text-red-900":"text-green-900"}`,children:Ne.title}),o.jsx("p",{className:`text-sm ${Ne.type==="error"?"text-red-700":"text-green-700"}`,children:Ne.message})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[Ne.type==="success"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1 uppercase tracking-wider",children:"Temporary Password"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("code",{className:"flex-1 font-mono text-lg font-bold text-slate-800 bg-white px-3 py-2 rounded border border-slate-200",children:Ne.password}),o.jsx(lOe,{text:Ne.password})]})]}),o.jsx("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"bg-blue-100 p-2 rounded-lg h-fit text-blue-600",children:o.jsx(jm,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-blue-900 text-sm mb-1",children:"Login URL"}),o.jsxs("a",{href:Ne.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-xs break-all flex items-center gap-1 font-medium",children:[Ne.link," ",o.jsx(CR,{className:"w-3 h-3"})]}),o.jsx("p",{className:"text-xs text-blue-700/80 mt-2 leading-relaxed",children:"Instructions: Go to the link above, login with the temporary password, and change it immediately."})]})]})})]}),Ne.type==="error"&&o.jsx("div",{className:"bg-red-50 p-4 rounded-xl border border-red-100 text-sm text-red-800",children:Ne.details}),o.jsx("button",{onClick:()=>Se(null),className:`w-full py-3 rounded-xl font-bold transition-all transform active:scale-95 ${Ne.type==="error"?"bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-200":"bg-green-600 hover:bg-green-700 text-white shadow-lg shadow-green-200"}`,children:Ne.type==="error"?"Close":"Done"})]})]})}),o.jsxs("div",{className:"p-6 flex-1 overflow-y-auto bg-slate-50",children:[o.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-200 mb-6",children:[o.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(km,{className:"w-4 h-4"})," Invite Team Member"]}),o.jsxs("form",{onSubmit:qe,className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsx("input",{className:"px-3 py-2 border rounded-lg text-sm",placeholder:"Name",value:s,onChange:W=>a(W.target.value),required:!0}),o.jsx("input",{className:"px-3 py-2 border rounded-lg text-sm",placeholder:"Email",type:"email",value:r,onChange:W=>i(W.target.value),required:!0}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("select",{className:"px-3 py-2 border rounded-lg text-sm flex-1",value:l,onChange:W=>c(W.target.value),children:Bse.map(W=>o.jsx("option",{value:W,children:W},W))}),o.jsx("button",{type:"submit",disabled:u,className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors",children:u?o.jsx(Ut,{className:"w-4 h-4 animate-spin"}):o.jsx(ro,{className:"w-4 h-4"})})]})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" User will receive a temporary password/link to access the CRM."})]}),o.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-xl mb-6 overflow-hidden",children:[o.jsxs("button",{onClick:()=>y(!m),className:"w-full p-5 flex items-center justify-between text-left",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(nU,{className:"w-4 h-4 text-purple-600"}),o.jsx("h3",{className:"text-sm font-bold text-purple-800",children:"Lead Assignment Rules"})]}),m?o.jsx(ia,{className:"w-4 h-4 text-purple-600"}):o.jsx(no,{className:"w-4 h-4 text-purple-600"})]}),m&&o.jsxs("div",{className:"px-5 pb-5 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-purple-700 mb-2",children:"Assignment Mode"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"round_robin",label:"Round Robin",desc:"Evenly distribute leads"},{value:"source_based",label:"By Source",desc:"Assign based on lead source"},{value:"single_person",label:"Single Person",desc:"All leads to one person"},{value:"manual",label:"Manual Only",desc:"No auto-assignment"}].map(W=>o.jsxs("button",{onClick:()=>v(de=>({...de,mode:W.value})),className:`p-3 rounded-lg border text-left transition-all ${g.mode===W.value?"border-purple-500 bg-purple-100":"border-gray-200 bg-white hover:border-purple-300"}`,children:[o.jsx("div",{className:"font-medium text-sm",children:W.label}),o.jsx("div",{className:"text-xs text-gray-500",children:W.desc})]},W.value))})]}),g.mode==="single_person"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-purple-700 mb-2",children:"Assign All Leads To"}),o.jsxs("select",{value:g.defaultAssignee||"",onChange:W=>v(de=>({...de,defaultAssignee:W.target.value})),className:"w-full px-3 py-2 border rounded-lg text-sm",children:[o.jsx("option",{value:"",children:"Select User..."}),e.map(W=>o.jsx("option",{value:W.username,children:W.username||W.email},W.id))]})]}),g.mode==="source_based"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-purple-700 mb-2",children:"Source  Employee Rules"}),o.jsxs("div",{className:"space-y-2",children:[(g.sourceRules||[]).map((W,de)=>o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsxs("select",{value:W.source,onChange:xe=>z(de,"source",xe.target.value),className:"flex-1 px-3 py-2 border rounded-lg text-sm",children:[o.jsx("option",{value:"",children:"Select Source..."}),x.map(xe=>o.jsx("option",{value:xe.name,children:xe.name},xe.id))]}),o.jsx("span",{className:"text-gray-400",children:""}),o.jsxs("select",{value:W.assignTo,onChange:xe=>z(de,"assignTo",xe.target.value),className:"flex-1 px-3 py-2 border rounded-lg text-sm",children:[o.jsx("option",{value:"",children:"Select User..."}),e.map(xe=>o.jsx("option",{value:xe.username,children:xe.username||xe.email},xe.id))]}),o.jsx("button",{onClick:()=>se(de),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:o.jsx(ai,{className:"w-4 h-4"})})]},de)),o.jsxs("button",{onClick:re,className:"text-purple-600 text-sm font-medium flex items-center gap-1 hover:text-purple-700",children:[o.jsx(ro,{className:"w-4 h-4"})," Add Rule"]})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Leads from sources not listed will use round-robin."})]}),g.mode!=="manual"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-purple-700 mb-2",children:"Fallback (if no rule matches)"}),o.jsxs("select",{value:g.fallbackAssignee||"round_robin",onChange:W=>v(de=>({...de,fallbackAssignee:W.target.value})),className:"w-full px-3 py-2 border rounded-lg text-sm",children:[o.jsx("option",{value:"round_robin",children:"Use Round Robin"}),o.jsx("option",{value:"unassigned",children:"Leave Unassigned"}),e.map(W=>o.jsxs("option",{value:W.username,children:["Always assign to ",W.username||W.email]},W.id))]})]}),o.jsxs("button",{onClick:Y,disabled:u,className:"w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2.5 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-colors",children:[u?o.jsx(Ut,{className:"w-4 h-4 animate-spin"}):o.jsx(TR,{className:"w-4 h-4"}),"Save Assignment Rules"]})]})]}),o.jsxs("div",{className:"bg-cyan-50 border border-cyan-200 rounded-xl mb-6 overflow-hidden",children:[o.jsxs("button",{onClick:()=>N(!b),className:"w-full p-5 flex items-center justify-between text-left",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Gd,{className:"w-4 h-4 text-cyan-600"}),o.jsx("h3",{className:"text-sm font-bold text-cyan-800",children:"Lead Automation Rules"}),o.jsx("span",{className:"text-xs text-cyan-600 bg-cyan-100 px-2 py-0.5 rounded-full",children:"Per Source"})]}),b?o.jsx(ia,{className:"w-4 h-4 text-cyan-600"}):o.jsx(no,{className:"w-4 h-4 text-cyan-600"})]}),b&&o.jsxs("div",{className:"px-5 pb-5 space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(_a,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search sources...",value:C,onChange:W=>S(W.target.value),className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm"})]}),o.jsx("div",{className:"bg-white rounded-lg border overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-xs",children:[o.jsx("thead",{className:"bg-gray-50 border-b",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-600 min-w-[150px]",children:"Source"}),o.jsx("th",{className:"px-3 py-3 text-center font-semibold text-gray-600",children:o.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o.jsx(yo,{className:"w-4 h-4 text-blue-500"}),o.jsx("span",{children:"Call List"})]})}),o.jsx("th",{className:"px-3 py-3 text-center font-semibold text-gray-600",children:o.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o.jsx(go,{className:"w-4 h-4 text-amber-500"}),o.jsx("span",{children:"Notify"})]})}),o.jsx("th",{className:"px-3 py-3 text-center font-semibold text-gray-600",children:o.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o.jsx(Wd,{className:"w-4 h-4 text-green-500"}),o.jsx("span",{children:"Email"})]})}),o.jsx("th",{className:"px-3 py-3 text-center font-semibold text-gray-600",children:o.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o.jsx(Kl,{className:"w-4 h-4 text-purple-500"}),o.jsx("span",{children:"Text"})]})}),o.jsx("th",{className:"px-3 py-3 text-center font-semibold text-gray-600",children:o.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o.jsx(xC,{className:"w-4 h-4 text-indigo-500"}),o.jsx("span",{children:"AI Bot"})]})})]})}),o.jsxs("tbody",{className:"divide-y",children:[o.jsxs("tr",{className:"bg-blue-50/50",children:[o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-bold rounded",children:"DEFAULT"}),o.jsx("span",{className:"text-gray-400 text-[10px]",children:"All Sources"})]})}),["addToCallList","sendNotification","emailResponse","textAutoResponse","aiBot"].map(W=>o.jsx("td",{className:"px-3 py-3 text-center",children:o.jsx("button",{onClick:()=>ze("_default",W),className:`w-10 h-5 rounded-full transition-colors relative ${me("_default")[W]?"bg-blue-500":"bg-gray-300"}`,children:o.jsx("span",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform ${me("_default")[W]?"left-5":"left-0.5"}`})})},W))]}),x.filter(W=>!C||W.name.toLowerCase().includes(C.toLowerCase())).map(W=>{const de=W.name.replace(/\s+/g,"_").toLowerCase();return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium text-gray-800",children:W.name}),W.isIntegration&&o.jsx("span",{className:"px-1.5 py-0.5 bg-purple-100 text-purple-600 text-[10px] rounded",children:"Integration"})]})}),["addToCallList","sendNotification","emailResponse","textAutoResponse","aiBot"].map(xe=>o.jsx("td",{className:"px-3 py-3 text-center",children:o.jsx("button",{onClick:()=>ze(de,xe),className:`w-10 h-5 rounded-full transition-colors relative ${me(de)[xe]?"bg-blue-500":"bg-gray-300"}`,children:o.jsx("span",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform ${me(de)[xe]?"left-5":"left-0.5"}`})})},xe))]},W.id)})]})]})})}),o.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-500",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(yo,{className:"w-3 h-3 text-blue-500"}),o.jsx("span",{children:"Call List - Auto-add to today's call list"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(go,{className:"w-3 h-3 text-amber-500"}),o.jsx("span",{children:"Notify - Send in-app/SMS notification"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Wd,{className:"w-3 h-3 text-green-500"}),o.jsx("span",{children:"Email - Auto-send welcome email"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Kl,{className:"w-3 h-3 text-purple-500"}),o.jsx("span",{children:"Text - Auto-send SMS response"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(xC,{className:"w-3 h-3 text-indigo-500"}),o.jsx("span",{children:"AI Bot - AI handles initial response"})]})]}),o.jsxs("button",{onClick:ct,disabled:u,className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white px-4 py-2.5 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-colors",children:[u?o.jsx(Ut,{className:"w-4 h-4 animate-spin"}):o.jsx(Gd,{className:"w-4 h-4"}),"Save Automation Rules"]})]})]}),o.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-xl mb-6 overflow-hidden",children:[o.jsxs("button",{onClick:()=>P(!_),className:"w-full p-5 flex items-center justify-between text-left",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Pm,{className:"w-4 h-4 text-emerald-600"}),o.jsx("h3",{className:"text-sm font-bold text-emerald-800",children:"Settings"}),o.jsx("span",{className:"text-xs text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded-full",children:"Event Types & System"})]}),_?o.jsx(ia,{className:"w-4 h-4 text-emerald-600"}):o.jsx(no,{className:"w-4 h-4 text-emerald-600"})]}),_&&o.jsxs("div",{className:"px-5 pb-5 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(jr,{className:"w-4 h-4 text-emerald-600"}),o.jsx("h4",{className:"text-sm font-bold text-emerald-800",children:"Managers / Sales Team"})]}),o.jsxs("div",{className:"bg-white p-4 rounded-lg border text-sm text-gray-600",children:[o.jsxs("p",{children:["The sales team is now automatically managed based on the ",o.jsx("strong",{children:"Invited Users"}),'. To add or remove team members, use the "Invite Team Member" section at the top.']}),o.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.map(W=>o.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-xs border border-gray-200",children:W.username||W.name},W.id))})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(ln,{className:"w-4 h-4 text-emerald-600"}),o.jsx("h4",{className:"text-sm font-bold text-emerald-800",children:"Event Types"})]}),o.jsxs("div",{className:"bg-white rounded-lg border p-4 space-y-2",children:[T.map(W=>o.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[q===W?o.jsx("input",{type:"text",defaultValue:W,autoFocus:!0,onBlur:de=>_e(W,de.target.value),onKeyDown:de=>{de.key==="Enter"&&_e(W,de.target.value),de.key==="Escape"&&H(null)},className:"flex-1 px-2 py-1 border rounded text-sm"}):o.jsx("span",{className:"text-sm text-gray-700",children:W}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{onClick:()=>H(W),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded",title:"Edit",children:o.jsx(QB,{className:"w-3.5 h-3.5"})}),o.jsx("button",{onClick:()=>X(W),className:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:o.jsx(ai,{className:"w-3.5 h-3.5"})})]})]},W)),o.jsxs("div",{className:"flex gap-2 mt-3",children:[o.jsx("input",{type:"text",placeholder:"New event type...",value:D,onChange:W=>B(W.target.value),onKeyDown:W=>W.key==="Enter"&&ye(),className:"flex-1 px-3 py-2 border rounded-lg text-sm"}),o.jsxs("button",{onClick:ye,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg text-sm font-medium flex items-center gap-1",children:[o.jsx(ro,{className:"w-4 h-4"})," Add"]})]})]})]})]})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-5 mb-6",children:[o.jsxs("h3",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[o.jsx(Cm,{className:"w-4 h-4"})," Data Maintenance"]}),o.jsx("p",{className:"text-xs text-blue-600 mb-4",children:"Migrate existing leads to the new contacts system."}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:ve,disabled:u,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 shadow-sm transition-colors",children:[u?o.jsx(Ut,{className:"w-4 h-4 animate-spin"}):o.jsx(vo,{className:"w-4 h-4"})," ","Migrate Leads to Contacts"]}),o.jsxs("button",{onClick:ot,disabled:u,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 shadow-sm transition-colors",children:[u?o.jsx(Ut,{className:"w-4 h-4 animate-spin"}):o.jsx(jm,{className:"w-4 h-4"})," ","Consolidate Sources from Leads"]})]})]}),o.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm mb-6",children:o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"bg-gray-50 text-gray-500 font-medium border-b border-gray-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3",children:"Name"}),o.jsx("th",{className:"px-6 py-3",children:"Email"}),o.jsx("th",{className:"px-6 py-3",children:"Role"}),o.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:e.map(W=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-3 font-medium",children:W.username||W.name}),o.jsx("td",{className:"px-6 py-3 text-gray-500",children:W.email}),o.jsx("td",{className:"px-6 py-3",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${W.role==="Admin"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:W.role})}),o.jsx("td",{className:"px-6 py-3 text-right flex justify-end gap-2",children:o.jsx("button",{onClick:()=>ie(W),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md",title:"Revoke Access",children:o.jsx(ai,{className:"w-4 h-4"})})})]},W.id))})]})}),o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5",children:[o.jsxs("h3",{className:"text-sm font-bold text-red-800 mb-2 flex items-center gap-2",children:[o.jsx(ss,{className:"w-4 h-4"})," Danger Zone"]}),o.jsx("p",{className:"text-xs text-red-600 mb-4",children:"This will permanently delete ALL leads. Cannot be undone."}),o.jsxs("button",{onClick:$e,disabled:f,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 shadow-sm transition-colors",children:[f?o.jsx(Ut,{className:"w-4 h-4 animate-spin"}):o.jsx(ai,{className:"w-4 h-4"})," ","Reset Database"]})]})]}),Qe&&o.jsx("div",{className:"absolute inset-0 z-50 bg-white/90 backdrop-blur-sm flex items-center justify-center p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-red-100 w-full max-w-sm overflow-hidden transform transition-all scale-100",children:[o.jsxs("div",{className:"p-6 text-center bg-red-50",children:[o.jsx("div",{className:"w-16 h-16 rounded-full mx-auto flex items-center justify-center mb-4 bg-red-100 text-red-600",children:o.jsx(ai,{className:"w-8 h-8"})}),o.jsx("h3",{className:"text-xl font-bold mb-2 text-red-900",children:"Revoke Access?"}),o.jsxs("p",{className:"text-sm text-red-700",children:["Are you sure you want to remove ",o.jsx("strong",{children:Qe.name}),"? This action cannot be undone."]})]}),o.jsxs("div",{className:"p-4 flex gap-3 bg-white",children:[o.jsx("button",{onClick:()=>St(null),className:"flex-1 py-2.5 rounded-lg font-semibold text-gray-600 hover:bg-gray-100 transition-colors",children:"Cancel"}),o.jsx("button",{onClick:ce,className:"flex-1 py-2.5 rounded-lg font-semibold text-white bg-red-600 hover:bg-red-700 shadow-lg shadow-red-200 transition-all active:scale-95",children:"Confirm Revoke"})]})]})})]})})}const _p={meta:"Meta Lead Gen",whatsapp:"WhatsApp Inbound"};function uOe({onClose:t}){const{t:e}=Zr(),[n,r]=k.useState({fbAccessToken:"",fbPageId:"",waProvider:"twilio",waApiKey:"",waApiSecret:"",waApiEndpoint:"",waBusinessNumber:"",waDefaultMessage:"Assalam o Alaikum! Area 51 Banquet Hall mein inquiry ka shukriya.",autoGreetingEnabled:!1,autoGreetingMessage:`Assalam o Alaikum {{name}}! 

Area 51 Banquet Hall mein inquiry ka shukriya! Hamari team jaldi aap se rabta karegi.

Agar koi sawal ho toh is message ka jawab dein.

 Is number pe baat cheet service quality ke liye record ki jati hai.

Shukriya,
Area 51 Team`,geminiApiKey:"",invoicingApiKey:"",invoicingApiEndpoint:"",smsEnabled:!1,smsTwilioSid:"",smsTwilioToken:"",smsTwilioNumber:"",smsNotifyOnAssignment:!0,smsNotifyOnEscalation:!0,smsNotifyOnSiteVisit:!0,smsNotifyOnQuoteFollowUp:!0,browserNotificationsEnabled:!0,googleCalendarEnabled:!1,googleCalendarClientId:"",googleCalendarApiKey:"",googleCalendarAutoSync:!1,googleCalendarSyncSiteVisits:!0,googleCalendarSyncCalls:!0,googleCalendarSyncEvents:!0,googleCalendarSyncBookings:!0,googleCalendarSelectedId:"primary"}),[i,s]=k.useState(!1),[a,l]=k.useState(!1),[c,u]=k.useState([]),[d,f]=k.useState(!1),[h,m]=k.useState(!1),[y,g]=k.useState("meta");k.useEffect(()=>{(async()=>{const C=Qn($t,"artifacts",Lt,"public","data","app_settings","integrations"),S=await rf(C);S.exists()&&r(_=>({..._,...S.data()}))})()},[]);const v=async E=>{const C=us($t,"artifacts",Lt,"public","data","lead_sources");return(await So(C)).docs.map(P=>P.data().name).includes(E)?!1:(await D7(C,{name:E,isIntegration:!0,createdAt:VS()}),!0)},x=async()=>{m(!0);const E=[];n.fbPageId&&n.fbAccessToken&&await v(_p.meta)&&E.push(_p.meta),n.waApiKey&&n.waBusinessNumber&&await v(_p.whatsapp)&&E.push(_p.whatsapp),await $7(Qn($t,"artifacts",Lt,"public","data","app_settings","integrations"),n),m(!1),E.length>0?alert(`Integration Settings Saved!

Automatically added lead sources:
 ${E.join(`
 `)}`):alert("Integration Settings Saved!")};k.useEffect(()=>{(async()=>{if(n.googleCalendarClientId&&n.googleCalendarApiKey)try{await pA();const C=su();s(C),C&&(await w(),n.googleCalendarSelectedId&&$1(n.googleCalendarSelectedId))}catch{console.log("Google Calendar not connected")}})()},[n.googleCalendarClientId,n.googleCalendarApiKey]);const w=async()=>{f(!0);try{const E=await tOe();u(E)}catch(E){console.error("Failed to load calendars:",E),u([])}f(!1)},b=async()=>{if(!n.googleCalendarClientId||!n.googleCalendarApiKey){alert("Please enter your Google Calendar Client ID and API Key first, then save.");return}l(!0);try{await G5(n.googleCalendarClientId,n.googleCalendarApiKey),await vh(),s(!0),await w(),alert("Successfully connected to Google Calendar!")}catch(E){console.error("Google Calendar connection failed:",E),alert("Failed to connect to Google Calendar. Please check your credentials.")}l(!1)},N=()=>{eOe(),u([]),s(!1),alert("Disconnected from Google Calendar")},A=[{id:"meta",label:"Meta Leads",icon:wC},{id:"whatsapp",label:"WhatsApp",icon:ur},{id:"ai",label:"AI (Gemini)",icon:ir},{id:"invoicing",label:"Invoicing",icon:zd},{id:"notifications",label:"Alerts",icon:go},{id:"calendar",label:"Calendar",icon:ln}];return o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-scale-in h-[90vh]",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900 to-slate-900 text-white p-6 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Pm,{className:"w-6 h-6 text-cyan-400"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold",children:"Integrations Hub"}),o.jsx("p",{className:"text-slate-400 text-xs",children:"Connect External Platforms"})]})]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full",children:o.jsx(Ft,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"flex border-b bg-gray-50",children:A.map(E=>o.jsxs("button",{onClick:()=>g(E.id),className:`flex-1 px-4 py-3 text-sm font-medium flex items-center justify-center gap-2 border-b-2 transition-colors ${y===E.id?"border-blue-600 text-blue-600 bg-white":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[o.jsx(E.icon,{className:"w-4 h-4"}),E.label]},E.id))}),o.jsxs("div",{className:"p-6 flex-1 overflow-y-auto bg-slate-50",children:[y==="meta"&&o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-100 pb-4",children:[o.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:o.jsx(wC,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900",children:"Meta Lead Ads Integration"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Auto-pull leads from Facebook/Instagram"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Facebook Page ID"}),o.jsx("input",{className:"w-full p-3 border rounded-lg text-sm outline-none focus:border-blue-400",value:n.fbPageId,onChange:E=>r({...n,fbPageId:E.target.value}),placeholder:"123456789"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Page Access Token"}),o.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-blue-400",value:n.fbAccessToken,onChange:E=>r({...n,fbAccessToken:E.target.value}),placeholder:"EAAxxxxxxx..."}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Get from Facebook Business Settings  System Users"})]})]})]})}),y==="whatsapp"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-100 pb-4",children:[o.jsx("div",{className:"p-2 bg-green-100 text-green-600 rounded-lg",children:o.jsx(ur,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900",children:"WhatsApp Business API"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Send/receive messages through CRM"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Provider"}),o.jsxs("select",{className:"w-full p-3 border rounded-lg text-sm outline-none focus:border-green-400",value:n.waProvider,onChange:E=>r({...n,waProvider:E.target.value}),children:[o.jsx("option",{value:"twilio",children:"Twilio"}),o.jsx("option",{value:"wati",children:"Wati"}),o.jsx("option",{value:"aisensy",children:"Aisensy"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"API Key / Account SID"}),o.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-green-400",value:n.waApiKey,onChange:E=>r({...n,waApiKey:E.target.value})})]}),n.waProvider==="twilio"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Auth Token (Twilio)"}),o.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-green-400",value:n.waApiSecret,onChange:E=>r({...n,waApiSecret:E.target.value})})]}),n.waProvider==="wati"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"API Endpoint (Wati)"}),o.jsx("input",{className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-green-400",value:n.waApiEndpoint,onChange:E=>r({...n,waApiEndpoint:E.target.value}),placeholder:"https://live-server-xxxx.wati.io"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Business WhatsApp Number"}),o.jsx("input",{className:"w-full p-3 border rounded-lg text-sm outline-none focus:border-green-400",value:n.waBusinessNumber,onChange:E=>r({...n,waBusinessNumber:E.target.value}),placeholder:"923001234567"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Default Greeting Message (Manual)"}),o.jsx("textarea",{className:"w-full p-3 border rounded-lg text-sm outline-none h-24 resize-none focus:border-green-400",value:n.waDefaultMessage,onChange:E=>r({...n,waDefaultMessage:E.target.value})})]})]})]}),o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-100 pb-4",children:[o.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:o.jsx(ir,{className:"w-6 h-6"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-gray-900",children:e("autoGreetingTitle")}),o.jsx("p",{className:"text-xs text-gray-500",children:"Automatically send WhatsApp greeting to new leads"})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n.autoGreetingEnabled,onChange:E=>r({...n,autoGreetingEnabled:E.target.checked})}),o.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),n.autoGreetingEnabled&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Quick Templates"}),o.jsxs("div",{className:"flex gap-2 flex-wrap",children:[o.jsx("button",{type:"button",onClick:()=>r({...n,autoGreetingMessage:`Hello {{name}}! 

Thank you for your interest in Area 51 Banquet Hall. We're excited to help you plan your special event!

One of our team members will contact you shortly.

 Conversations are recorded for quality purposes.

Best regards,
Area 51 Team`}),className:"px-3 py-1.5 text-xs bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors",children:" English"}),o.jsx("button",{type:"button",onClick:()=>r({...n,autoGreetingMessage:`Assalam o Alaikum {{name}}! 

Area 51 Banquet Hall mein inquiry ka shukriya! Hamari team jaldi aap se rabta karegi.

Agar koi sawal ho toh is message ka jawab dein.

 Is number pe baat cheet service quality ke liye record ki jati hai.

Shukriya,
Area 51 Team`}),className:"px-3 py-1.5 text-xs bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors",children:" Urdu"}),o.jsx("button",{type:"button",onClick:()=>r({...n,autoGreetingMessage:`Assalam o Alaikum {{name}}! 

Thank you for contacting Area 51 Banquet Hall! Our team will reach out to you shortly.

Feel free to reply if you have any questions.

 Conversations recorded for quality.

Regards,
Area 51 Team`}),className:"px-3 py-1.5 text-xs bg-purple-50 text-purple-700 rounded-lg hover:bg-purple-100 transition-colors",children:" Mixed"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Auto Greeting Message"}),o.jsx("textarea",{className:"w-full p-3 border rounded-lg text-sm outline-none h-32 resize-none focus:border-blue-400",value:n.autoGreetingMessage,onChange:E=>r({...n,autoGreetingMessage:E.target.value}),placeholder:"Enter the automatic greeting message..."}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Use ",o.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"{{name}}"})," to insert the lead's first name"]})]}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-xs text-blue-700",children:[o.jsx("strong",{children:"How it works:"})," When a new lead is created (from Meta, WhatsApp, or manual entry), this greeting will be automatically sent via WhatsApp within 1 minute."]})})]})]})]}),y==="ai"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-100 pb-4",children:[o.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-lg",children:o.jsx(ir,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900",children:"Google Gemini AI"}),o.jsx("p",{className:"text-xs text-gray-500",children:"AI-powered responses & assistant"})]})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Gemini API Key"}),o.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-purple-400",value:n.geminiApiKey,onChange:E=>r({...n,geminiApiKey:E.target.value}),placeholder:"AIzaSy..."}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Get from Google AI Studio  API Keys"})]})})]}),o.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4",children:[o.jsx("h4",{className:"font-bold text-purple-800 mb-2",children:"AI Features Enabled:"}),o.jsxs("ul",{className:"text-sm text-purple-700 space-y-1",children:[o.jsx("li",{children:" Round-robin lead assignment to employees"}),o.jsx("li",{children:" Employee Urdu assistant (query leads, availability)"}),o.jsx("li",{children:" Owner dashboard AI queries"}),o.jsx("li",{children:" Closing strategy & email generation"}),o.jsx("li",{children:" Role-based data access control"})]}),o.jsxs("p",{className:"text-xs text-purple-600 mt-3",children:[o.jsx("strong",{children:"Note:"})," Auto greeting is configured in the WhatsApp tab"]})]})]}),y==="invoicing"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-100 pb-4",children:[o.jsx("div",{className:"p-2 bg-amber-100 text-amber-600 rounded-lg",children:o.jsx(zd,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900",children:"Invoicing Software"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Push bookings & pull payment status"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Invoicing API Endpoint"}),o.jsx("input",{className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-amber-400",value:n.invoicingApiEndpoint,onChange:E=>r({...n,invoicingApiEndpoint:E.target.value}),placeholder:"https://your-invoicing-software.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"API Key"}),o.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-amber-400",value:n.invoicingApiKey,onChange:E=>r({...n,invoicingApiKey:E.target.value})})]})]})]}),o.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[o.jsx("h4",{className:"font-bold text-amber-800 mb-2",children:"Integration Behavior:"}),o.jsxs("ul",{className:"text-sm text-amber-700 space-y-1",children:[o.jsx("li",{children:' Auto-push booking when lead reaches "Booked" stage'}),o.jsx("li",{children:" Sync payment milestones (Advance, Mid, Final)"}),o.jsx("li",{children:" Show payment status in Finance dashboard"}),o.jsx("li",{children:" Alert on overdue payments"})]})]})]}),y==="notifications"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-100 pb-4",children:[o.jsx("div",{className:"p-2 bg-indigo-100 text-indigo-600 rounded-lg",children:o.jsx(go,{className:"w-6 h-6"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-gray-900",children:"Browser Notifications"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Get instant alerts in your browser"})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n.browserNotificationsEnabled,onChange:E=>r({...n,browserNotificationsEnabled:E.target.checked})}),o.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),o.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-xs text-indigo-700",children:[o.jsx("strong",{children:"Note:"})," You'll need to allow notifications when prompted by your browser. Works best on desktop browsers."]})})]}),o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-100 pb-4",children:[o.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-600 rounded-lg",children:o.jsx(rU,{className:"w-6 h-6"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-gray-900",children:"SMS Notifications (Twilio)"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Send SMS alerts to employees"})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n.smsEnabled,onChange:E=>r({...n,smsEnabled:E.target.checked})}),o.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-600"})]})]}),n.smsEnabled&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Twilio Account SID"}),o.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-emerald-400",value:n.smsTwilioSid,onChange:E=>r({...n,smsTwilioSid:E.target.value}),placeholder:"ACxxxxxxxxxxxxxxx"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Twilio Auth Token"}),o.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-emerald-400",value:n.smsTwilioToken,onChange:E=>r({...n,smsTwilioToken:E.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Twilio Phone Number (From)"}),o.jsx("input",{className:"w-full p-3 border rounded-lg text-sm outline-none focus:border-emerald-400",value:n.smsTwilioNumber,onChange:E=>r({...n,smsTwilioNumber:E.target.value}),placeholder:"+1234567890"}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Your Twilio phone number or Messaging Service SID"})]}),o.jsxs("div",{className:"border-t border-gray-100 pt-4 mt-4",children:[o.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-3",children:"Send SMS For:"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 text-emerald-600 rounded",checked:n.smsNotifyOnAssignment,onChange:E=>r({...n,smsNotifyOnAssignment:E.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700",children:"New lead assignments"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 text-emerald-600 rounded",checked:n.smsNotifyOnEscalation,onChange:E=>r({...n,smsNotifyOnEscalation:E.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700",children:"Lead escalations (48h+ no contact)"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 text-emerald-600 rounded",checked:n.smsNotifyOnSiteVisit,onChange:E=>r({...n,smsNotifyOnSiteVisit:E.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700",children:"Site visit reminders"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 text-emerald-600 rounded",checked:n.smsNotifyOnQuoteFollowUp,onChange:E=>r({...n,smsNotifyOnQuoteFollowUp:E.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700",children:"Quote follow-up (3+ days in Quoted stage)"})]})]})]})]})]}),o.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-xl p-4",children:[o.jsx("h4",{className:"font-bold text-emerald-800 mb-2",children:"How SMS Notifications Work:"}),o.jsxs("ul",{className:"text-sm text-emerald-700 space-y-1",children:[o.jsx("li",{children:" Employees receive SMS when leads are assigned"}),o.jsx("li",{children:" Escalation alerts sent for stale leads (48h+)"}),o.jsx("li",{children:" Site visit reminders sent day before"}),o.jsx("li",{children:" Quote follow-up reminders after 3 days"}),o.jsx("li",{children:" Uses employee phone from Admin Panel"})]}),o.jsxs("p",{className:"text-xs text-emerald-600 mt-3",children:[o.jsx("strong",{children:"Cost:"})," ~PKR 3-5 per SMS via Twilio"]})]})]}),y==="calendar"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-100 pb-4",children:[o.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:o.jsx(ln,{className:"w-6 h-6"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-gray-900",children:"Google Calendar Integration"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Sync lead dates to Google Calendar"})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n.googleCalendarEnabled,onChange:E=>r({...n,googleCalendarEnabled:E.target.checked})}),o.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),n.googleCalendarEnabled&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-xs text-blue-700",children:[o.jsx("strong",{children:"Quick Add:"}),' "Add to Calendar" buttons will appear on lead details, call list, and booking views - no API setup needed!']})}),o.jsxs("div",{className:"border-t border-gray-100 pt-4 mt-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(vo,{className:"w-4 h-4 text-gray-500"}),o.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase",children:"Auto-Sync (Optional - Requires Google Cloud Setup)"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Google Cloud Client ID"}),o.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-blue-400",value:n.googleCalendarClientId,onChange:E=>r({...n,googleCalendarClientId:E.target.value}),placeholder:"xxxx.apps.googleusercontent.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Google Calendar API Key"}),o.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-blue-400",value:n.googleCalendarApiKey,onChange:E=>r({...n,googleCalendarApiKey:E.target.value}),placeholder:"AIzaSy..."}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get from"," ",o.jsxs("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline inline-flex items-center gap-1",children:["Google Cloud Console ",o.jsx(CR,{className:"w-3 h-3"})]})]})]}),o.jsx("div",{className:"flex items-center gap-3",children:i?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"flex items-center gap-2 text-sm text-green-600",children:[o.jsx(W_,{className:"w-4 h-4"})," Connected"]}),o.jsx("button",{type:"button",onClick:N,className:"px-3 py-1.5 text-xs bg-red-50 text-red-700 rounded-lg hover:bg-red-100 transition-colors",children:"Disconnect"})]}):o.jsx("button",{type:"button",onClick:b,disabled:a||!n.googleCalendarClientId||!n.googleCalendarApiKey,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:a?o.jsxs(o.Fragment,{children:[o.jsx(Ut,{className:"w-4 h-4 animate-spin"})," Connecting..."]}):o.jsxs(o.Fragment,{children:[o.jsx(ln,{className:"w-4 h-4"})," Connect Google Calendar"]})})}),i&&o.jsxs("div",{className:"border-t border-gray-100 pt-4 mt-4",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Select Calendar"}),d?o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[o.jsx(Ut,{className:"w-4 h-4 animate-spin"})," Loading calendars..."]}):o.jsxs(o.Fragment,{children:[o.jsx("select",{className:"w-full p-3 border rounded-lg text-sm outline-none focus:border-blue-400",value:n.googleCalendarSelectedId||"primary",onChange:E=>{r({...n,googleCalendarSelectedId:E.target.value}),$1(E.target.value)},children:c.length===0?o.jsx("option",{value:"primary",children:"Primary Calendar"}):c.map(E=>o.jsxs("option",{value:E.id,children:[E.name," ",E.primary?"(Primary)":""]},E.id))}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"All CRM events will be synced to this calendar"}),c.length===0&&o.jsxs("button",{type:"button",onClick:w,className:"mt-2 text-xs text-blue-600 hover:underline flex items-center gap-1",children:[o.jsx(vo,{className:"w-3 h-3"})," Refresh calendar list"]})]})]}),i&&o.jsxs("div",{className:"border-t border-gray-100 pt-4 mt-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Auto-Sync Events"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Automatically create/update calendar events"})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n.googleCalendarAutoSync,onChange:E=>r({...n,googleCalendarAutoSync:E.target.checked})}),o.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),n.googleCalendarAutoSync&&o.jsxs("div",{className:"space-y-2 ml-1",children:[o.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Sync These Events:"}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 rounded",checked:n.googleCalendarSyncSiteVisits,onChange:E=>r({...n,googleCalendarSyncSiteVisits:E.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700",children:"Site Visits"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 rounded",checked:n.googleCalendarSyncCalls,onChange:E=>r({...n,googleCalendarSyncCalls:E.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700",children:"Scheduled Calls"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 rounded",checked:n.googleCalendarSyncEvents,onChange:E=>r({...n,googleCalendarSyncEvents:E.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700",children:"Event Dates"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 rounded",checked:n.googleCalendarSyncBookings,onChange:E=>r({...n,googleCalendarSyncBookings:E.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700",children:"Final Bookings"})]})]})]})]})]})]})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[o.jsx("h4",{className:"font-bold text-blue-800 mb-2",children:"How Google Calendar Works:"}),o.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Quick Add buttons"})," - Add any date to calendar with one click"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Site Visits"})," - Schedule venue visits with client details"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Scheduled Calls"})," - Never miss a follow-up call"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Event Dates"})," - Track client event dates"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Final Bookings"})," - Confirmed booking dates"]})]}),o.jsxs("p",{className:"text-xs text-blue-600 mt-3",children:[o.jsx("strong",{children:"Tip:"})," Quick Add works without any API setup. Auto-sync requires Google Cloud credentials."]})]})]})]}),o.jsx("div",{className:"p-4 bg-white border-t border-gray-200 flex justify-end",children:o.jsxs("button",{onClick:x,disabled:h,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl flex items-center gap-2 disabled:opacity-70",children:[h?o.jsx(Ut,{className:"w-4 h-4 animate-spin"}):o.jsx(K_,{className:"w-4 h-4"})," ","Save Configuration"]})})]})})}function D1({onClose:t,onSave:e,initialData:n}){const[r,i]=k.useState(n||{firstName:"",lastName:"",phone:"",email:"",notes:""}),[s,a]=k.useState(""),l=async()=>{if(!r.firstName){a("First Name is required");return}const c=JS(r.phone);if(!c){a("Invalid Phone. Use 03XXXXXXXXX format.");return}e({...r,phone:c})};return o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden animate-scale-in",children:[o.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b flex justify-between items-center",children:[o.jsx("h3",{className:"font-bold text-gray-800",children:n?"Edit Contact":"Add New Contact"}),o.jsx("button",{onClick:t,children:o.jsx(Ft,{className:"w-5 h-5 text-gray-500"})})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"First Name"}),o.jsx("input",{className:"w-full p-2 border rounded-lg mt-1",value:r.firstName,onChange:c=>i({...r,firstName:c.target.value}),placeholder:"Ali"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Last Name"}),o.jsx("input",{className:"w-full p-2 border rounded-lg mt-1",value:r.lastName,onChange:c=>i({...r,lastName:c.target.value}),placeholder:"Khan"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Phone (Pakistan)"}),o.jsx("input",{className:"w-full p-2 border rounded-lg mt-1",value:r.phone,onChange:c=>i({...r,phone:c.target.value}),placeholder:"03001234567"}),o.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Format: 03XXXXXXXXX (11 Digits)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Email (Optional)"}),o.jsx("input",{className:"w-full p-2 border rounded-lg mt-1",type:"email",value:r.email,onChange:c=>i({...r,email:c.target.value}),placeholder:"ali@example.com"})]}),s&&o.jsx("p",{className:"text-red-500 text-xs font-bold",children:s})]}),o.jsxs("div",{className:"p-4 bg-gray-50 border-t flex justify-end gap-2",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg font-medium",children:"Cancel"}),o.jsx("button",{onClick:l,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold",children:"Save Contact"})]})]})})}function dOe({onClose:t,onSave:e,managers:n,contacts:r,onAddContact:i,sources:s,eventTypes:a}){const[l,c]=k.useState(1),[u,d]=k.useState(null),[f,h]=k.useState(""),[m,y]=k.useState(!1),[g,v]=k.useState({manager:"Unassigned",stage:"New",quotationAmount:"",clientBudget:"",eventType:"",eventDate:"",inquiryDate:new Date().toISOString().split("T")[0],notes:"",source:""}),[x,w]=k.useState([]),[b,N]=k.useState(!1);L.useEffect(()=>{const P=setTimeout(async()=>{if(!f){w([]);return}N(!0);try{const T=await Bs.getAll(null,5,f);w(T.data)}catch(T){console.error(T)}finally{N(!1)}},400);return()=>clearTimeout(P)},[f]);const A=f?x:(r||[]).slice(0,5),E=_=>{d(_),c(2)},C=async _=>{const P=await i(_);P&&(d(P),y(!1),c(2))},S=()=>{if(!u)return alert("Contact is required");if(!g.clientBudget||g.clientBudget==="")return alert("Client Budget is required");e({...g,contactId:u.id,clientName:`${u.firstName} ${u.lastName||""}`.trim(),phone:u.phone,quotationAmount:Number(g.quotationAmount)||0,clientBudget:Number(g.clientBudget)}),t()};return o.jsxs("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:[m&&o.jsx(D1,{onClose:()=>y(!1),onSave:C}),o.jsxs("div",{className:"bg-white w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden animate-scale-in",children:[o.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b flex justify-between items-center",children:[o.jsx("h3",{className:"font-bold text-gray-800",children:l===1?"Step 1: Select Contact":"Step 2: Lead Details"}),o.jsx("button",{onClick:t,children:o.jsx(Ft,{className:"w-5 h-5 text-gray-500"})})]}),o.jsx("div",{className:"p-6",children:l===1?o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Every lead must be linked to a contact. Search for an existing contact or create a new one."}),o.jsxs("div",{className:"relative",children:[o.jsx(_a,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),o.jsx("input",{className:"w-full pl-10 p-3 border rounded-xl bg-gray-50 outline-none",placeholder:"Search by name or 03...",value:f,onChange:_=>h(_.target.value),autoFocus:!0})]}),o.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[b&&o.jsx("p",{className:"text-center text-xs text-gray-500",children:"Searching..."}),A.map(_=>o.jsxs("div",{onClick:()=>E(_),className:"flex items-center justify-between p-3 hover:bg-blue-50 rounded-lg cursor-pointer border border-transparent hover:border-blue-100 transition-all",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold text-xs",children:_.firstName[0]}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-bold text-gray-800 text-sm",children:[_.firstName," ",_.lastName]}),o.jsx("p",{className:"text-xs text-gray-500",children:_.phone})]})]}),o.jsx(ha,{className:"w-4 h-4 text-gray-400"})]},_.id)),!b&&A.length===0&&f&&o.jsx("p",{className:"text-center text-sm text-gray-400 py-2",children:"No contacts found."})]}),o.jsxs("button",{onClick:()=>y(!0),className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold flex items-center justify-center gap-2",children:[o.jsx(ro,{className:"w-4 h-4"})," Create New Contact"]})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(di,{className:"w-4 h-4 text-blue-600"}),o.jsxs("span",{className:"font-bold text-blue-800 text-sm",children:[u.firstName," ",u.lastName]})]}),o.jsx("button",{onClick:()=>c(1),className:"text-xs text-blue-600 underline",children:"Change"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase",children:["Client Budget ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"number",className:"w-full p-2 border rounded-lg mt-1",value:g.clientBudget,onChange:_=>v({...g,clientBudget:_.target.value}),placeholder:"PKR",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Quotation Amount"}),o.jsx("input",{type:"number",className:"w-full p-2 border rounded-lg mt-1",value:g.quotationAmount,onChange:_=>v({...g,quotationAmount:_.target.value}),placeholder:"PKR (based on budget)"})]})]}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Stage"}),o.jsx("select",{className:"w-full p-2 border rounded-lg mt-1",value:g.stage,onChange:_=>v({...g,stage:_.target.value}),children:la.map(_=>o.jsx("option",{value:_,children:_},_))})]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Manager"}),o.jsx("select",{className:"w-full p-2 border rounded-lg mt-1",value:g.manager,onChange:_=>v({...g,manager:_.target.value}),children:[...new Set(n||ZS)].map(_=>o.jsx("option",{value:_,children:_},_))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Source"}),o.jsxs("select",{className:"w-full p-2 border rounded-lg mt-1",value:g.source,onChange:_=>v({...g,source:_.target.value}),children:[o.jsx("option",{value:"",children:"Select Source"}),(s||[]).map(_=>o.jsx("option",{value:_.name,children:_.name},_.id))]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Event Date"}),o.jsx("input",{type:"date",className:"w-full p-2 border rounded-lg mt-1",value:g.eventDate,onChange:_=>v({...g,eventDate:_.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Inquiry Date"}),o.jsx("input",{type:"date",className:"w-full p-2 border rounded-lg mt-1",value:g.inquiryDate,onChange:_=>v({...g,inquiryDate:_.target.value})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Event Type"}),o.jsxs("select",{className:"w-full p-2 border rounded-lg mt-1",value:g.eventType,onChange:_=>v({...g,eventType:_.target.value}),children:[o.jsx("option",{value:"",children:"Select Event Type"}),[...new Set(a||of)].map(_=>o.jsx("option",{value:_,children:_},_))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Notes"}),o.jsx("textarea",{className:"w-full p-2 border rounded-lg mt-1 h-20",value:g.notes,onChange:_=>v({...g,notes:_.target.value})})]})]})}),o.jsxs("div",{className:"p-4 bg-gray-50 border-t flex justify-end gap-2",children:[l===2&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>c(1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg font-medium",children:"Back"}),o.jsx("button",{onClick:S,className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-bold",children:"Create Lead"})]}),l===1&&o.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg font-medium",children:"Cancel"})]})]})]})}const Bu=t=>t?t>=1e6?`Rs ${(t/1e6).toFixed(1)}M`:t>=1e3?`Rs ${(t/1e3).toFixed(0)}k`:`Rs ${t}`:"Rs 0",wx=t=>!t||!isFinite(t)?"0%":`${t.toFixed(1)}%`;function fOe({source:t,leads:e,onClose:n,onSelectLead:r}){const[i,s]=k.useState("campaigns"),[a,l]=k.useState(null),[c,u]=k.useState(""),[d,f]=k.useState(new Set),h=k.useMemo(()=>e.filter(b=>b.source===t.name),[e,t.name]),m=k.useMemo(()=>{const b=h.length,N=h.filter(_=>["Booked","Won","Completed"].includes(_.stage)||["Booked","Won","Completed"].includes(_.status)),A=N.length,E=N.reduce((_,P)=>{const T=P.finalAmount||P.amount||0;return _+Number(T)},0),C=b>0?A/b*100:0,S=A>0?E/A:0;return{total:b,booked:A,totalRevenue:E,conversionRate:C,avgDealSize:S}},[h]),y=k.useMemo(()=>{const b={};return h.forEach(N=>{var E,C,S,_;const A=((E=N.meta)==null?void 0:E.campaign_name)||"Unknown Campaign";b[A]||(b[A]={name:A,leads:[],booked:0,totalRevenue:0,platforms:new Set,adSets:new Set,ads:new Set}),b[A].leads.push(N),(["Booked","Won","Completed"].includes(N.stage)||["Booked","Won","Completed"].includes(N.status))&&(b[A].booked++,b[A].totalRevenue+=N.finalAmount||N.amount||0),(C=N.meta)!=null&&C.platform&&b[A].platforms.add(N.meta.platform),(S=N.meta)!=null&&S.adset_name&&b[A].adSets.add(N.meta.adset_name),(_=N.meta)!=null&&_.ad_name&&b[A].ads.add(N.meta.ad_name)}),Object.values(b).map(N=>({...N,count:N.leads.length,conversionRate:N.leads.length>0?N.booked/N.leads.length*100:0,avgDealSize:N.booked>0?N.totalRevenue/N.booked:0,platforms:Array.from(N.platforms),adSets:Array.from(N.adSets),ads:Array.from(N.ads)})).sort((N,A)=>A.count-N.count)},[h]),g=k.useMemo(()=>{const b={};return h.forEach(N=>{var E;const A=((E=N.meta)==null?void 0:E.city)||"Unknown";b[A]||(b[A]={name:A,leads:[],booked:0,totalRevenue:0}),b[A].leads.push(N),(["Booked","Won","Completed"].includes(N.stage)||["Booked","Won","Completed"].includes(N.status))&&(b[A].booked++,b[A].totalRevenue+=N.finalAmount||N.amount||0)}),Object.values(b).map(N=>({...N,count:N.leads.length,conversionRate:N.leads.length>0?N.booked/N.leads.length*100:0})).sort((N,A)=>A.count-N.count)},[h]),v=k.useMemo(()=>{let b=h;if(a&&(b=b.filter(N=>{var A;return(((A=N.meta)==null?void 0:A.campaign_name)||"Unknown Campaign")===a})),c){const N=c.toLowerCase();b=b.filter(A=>{var E,C,S;return((E=A.clientName)==null?void 0:E.toLowerCase().includes(N))||((C=A.phone)==null?void 0:C.includes(N))||((S=A.email)==null?void 0:S.toLowerCase().includes(N))})}return b},[h,a,c]),x=b=>{f(N=>{const A=new Set(N);return A.has(b)?A.delete(b):A.add(b),A})},w=t.name==="Meta Lead Gen";return o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:o.jsxs("div",{className:"bg-white w-full max-w-5xl h-[90vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-scale-in",onClick:b=>b.stopPropagation(),children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[t.isIntegration&&o.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:o.jsx(Gd,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:t.name}),o.jsxs("p",{className:"text-blue-100 text-sm mt-1",children:[m.total," leads  ",wx(m.conversionRate)," conversion"]})]})]}),o.jsx("button",{onClick:n,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:o.jsx(Ft,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-slate-50 border-b",children:[o.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-blue-600 text-xs mb-1 font-semibold uppercase",children:[o.jsx(jr,{className:"w-4 h-4"})," Total Leads"]}),o.jsx("div",{className:"text-2xl font-bold text-blue-900",children:m.total})]}),o.jsxs("div",{className:"bg-emerald-50 p-4 rounded-xl border border-emerald-100 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 text-xs mb-1 font-semibold uppercase",children:[o.jsx(Yl,{className:"w-4 h-4"})," Booked Deals"]}),o.jsx("div",{className:"text-2xl font-bold text-emerald-900",children:m.booked})]}),o.jsxs("div",{className:"bg-violet-50 p-4 rounded-xl border border-violet-100 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-violet-600 text-xs mb-1 font-semibold uppercase",children:[o.jsx($o,{className:"w-4 h-4"})," Total Revenue"]}),o.jsx("div",{className:"text-xl md:text-2xl font-bold text-violet-900 truncate",title:Bu(m.totalRevenue),children:new Intl.NumberFormat("en-PK",{style:"currency",currency:"PKR",maximumSignificantDigits:3}).format(m.totalRevenue)})]}),o.jsxs("div",{className:"bg-amber-50 p-4 rounded-xl border border-amber-100 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-amber-600 text-xs mb-1 font-semibold uppercase",children:[o.jsx(Yl,{className:"w-4 h-4"})," Avg Deal Size"]}),o.jsx("div",{className:"text-xl md:text-2xl font-bold text-amber-900 truncate",title:Bu(m.avgDealSize),children:new Intl.NumberFormat("en-PK",{style:"currency",currency:"PKR",maximumSignificantDigits:3}).format(m.avgDealSize)})]})]}),w&&o.jsxs("div",{className:"flex gap-2 px-4 pt-4 bg-white border-b",children:[o.jsx("button",{onClick:()=>s("campaigns"),className:`px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${i==="campaigns"?"bg-blue-50 text-blue-700 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Campaigns"}),o.jsx("button",{onClick:()=>s("locations"),className:`px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${i==="locations"?"bg-blue-50 text-blue-700 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Locations"}),o.jsx("button",{onClick:()=>s("leads"),className:`px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${i==="leads"?"bg-blue-50 text-blue-700 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"All Leads"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[i==="campaigns"&&w&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-3",children:"Campaign Performance"}),y.length===0?o.jsxs("div",{className:"text-center py-12 text-gray-400",children:[o.jsx(qd,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"No campaign data available"}),o.jsx("p",{className:"text-xs mt-1",children:"Leads imported before the update won't have campaign info"})]}):o.jsx("div",{className:"bg-white rounded-xl border overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-slate-50 text-left text-xs font-semibold text-gray-500 uppercase",children:[o.jsx("th",{className:"px-4 py-3",children:"Campaign"}),o.jsx("th",{className:"px-4 py-3 text-center",children:"Leads"}),o.jsx("th",{className:"px-4 py-3 text-center",children:"Booked"}),o.jsx("th",{className:"px-4 py-3 text-center",children:"Conv %"}),o.jsx("th",{className:"px-4 py-3 text-right",children:"Revenue"}),o.jsx("th",{className:"px-4 py-3 text-right",children:"Avg Deal"}),o.jsx("th",{className:"px-4 py-3 w-10"})]})}),o.jsx("tbody",{className:"divide-y",children:y.map(b=>o.jsxs(L.Fragment,{children:[o.jsxs("tr",{className:"hover:bg-slate-50 cursor-pointer transition-colors",onClick:()=>{l(b.name),s("leads")},children:[o.jsxs("td",{className:"px-4 py-3",children:[o.jsx("div",{className:"font-medium text-gray-900",children:b.name}),o.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:b.platforms.join(", ")})]}),o.jsx("td",{className:"px-4 py-3 text-center font-medium",children:b.count}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:b.booked})}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:`font-medium ${b.conversionRate>=5?"text-green-600":b.conversionRate>=2?"text-yellow-600":"text-red-500"}`,children:wx(b.conversionRate)})}),o.jsx("td",{className:"px-4 py-3 text-right font-medium text-gray-900",children:Bu(b.totalRevenue)}),o.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:Bu(b.avgDealSize)}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("button",{onClick:N=>{N.stopPropagation(),x(b.name)},className:"p-1 hover:bg-gray-100 rounded",children:d.has(b.name)?o.jsx(ia,{className:"w-4 h-4 text-gray-400"}):o.jsx(no,{className:"w-4 h-4 text-gray-400"})})})]}),d.has(b.name)&&o.jsx("tr",{className:"bg-slate-50",children:o.jsx("td",{colSpan:7,className:"px-4 py-3",children:o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Ad Sets:"}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:b.adSets.length>0?b.adSets.map(N=>o.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs",children:N},N)):o.jsx("span",{className:"text-gray-400 text-xs",children:"No data"})})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Ads:"}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:b.ads.length>0?b.ads.map(N=>o.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded text-xs",children:N},N)):o.jsx("span",{className:"text-gray-400 text-xs",children:"No data"})})]})]})})})]},b.name))})]})})]}),i==="locations"&&w&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-3",children:"Location Breakdown"}),g.filter(b=>b.name!=="Unknown").length===0?o.jsxs("div",{className:"text-center py-12 text-gray-400",children:[o.jsx(jb,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"No location data available"}),o.jsx("p",{className:"text-xs mt-1",children:"Configure city field in your Meta lead form"})]}):o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:g.map(b=>o.jsxs("div",{className:"bg-white p-4 rounded-xl border hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{},children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(jb,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"font-medium text-gray-900",children:b.name})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-bold text-gray-900",children:b.count}),o.jsx("div",{className:"text-xs text-gray-500",children:"Leads"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-bold text-green-600",children:b.booked}),o.jsx("div",{className:"text-xs text-gray-500",children:"Booked"})]}),o.jsxs("div",{children:[o.jsx("div",{className:`text-lg font-bold ${b.conversionRate>=5?"text-green-600":b.conversionRate>=2?"text-yellow-600":"text-red-500"}`,children:wx(b.conversionRate)}),o.jsx("div",{className:"text-xs text-gray-500",children:"Conv"})]})]})]},b.name))})]}),(i==="leads"||!w)&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex gap-3 items-center",children:[w&&a&&o.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 text-blue-700 px-3 py-1.5 rounded-lg text-sm",children:[o.jsx(qd,{className:"w-4 h-4"}),a,o.jsx("button",{onClick:()=>l(null),className:"ml-1 hover:bg-blue-100 rounded p-0.5",children:o.jsx(Ft,{className:"w-3 h-3"})})]}),o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(_a,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search leads...",value:c,onChange:b=>u(b.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg text-sm"})]}),o.jsxs("div",{className:"text-sm text-gray-500",children:[v.length," leads"]})]}),o.jsx("div",{className:"space-y-2",children:v.length===0?o.jsxs("div",{className:"text-center py-12 text-gray-400",children:[o.jsx(jr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"No leads found"})]}):v.map(b=>{var N;return o.jsxs("div",{onClick:()=>r(b),className:"bg-white p-4 rounded-xl border hover:shadow-md hover:border-blue-300 transition-all cursor-pointer",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium text-gray-900 truncate",children:b.clientName}),o.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${b.stage==="Booked"?"bg-green-100 text-green-700":b.stage==="Lost"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"}`,children:b.stage})]}),o.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-500",children:[b.phone&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Un,{className:"w-3 h-3"})," ",b.phone]}),b.email&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Wd,{className:"w-3 h-3"})," ",b.email]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[b.budgetRange&&o.jsx("span",{className:"px-2 py-1 bg-emerald-50 text-emerald-700 rounded text-xs font-medium",children:b.budgetRange}),b.eventDate&&o.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs font-medium flex items-center gap-1",children:[o.jsx(ln,{className:"w-3 h-3"}),new Date(b.eventDate).toLocaleDateString("en-US",{month:"short",year:"numeric"})]}),b.guests&&o.jsxs("span",{className:"px-2 py-1 bg-purple-50 text-purple-700 rounded text-xs font-medium flex items-center gap-1",children:[o.jsx(jr,{className:"w-3 h-3"}),b.guests]}),b.amount>0&&o.jsx("span",{className:"px-2 py-1 bg-amber-50 text-amber-700 rounded text-xs font-medium",children:Bu(b.amount)})]})]}),w&&((N=b.meta)==null?void 0:N.campaign_name)&&o.jsxs("div",{className:"mt-2 pt-2 border-t flex items-center gap-2 text-xs text-gray-400",children:[o.jsx("span",{className:"bg-gray-100 px-2 py-0.5 rounded",children:b.meta.campaign_name}),b.meta.platform&&o.jsx("span",{className:"bg-gray-100 px-2 py-0.5 rounded capitalize",children:b.meta.platform}),b.meta.ad_name&&o.jsx("span",{className:"bg-gray-100 px-2 py-0.5 rounded truncate max-w-[200px]",children:b.meta.ad_name})]})]},b.id)})})]})]})]})})}function hOe({currentUser:t,onClose:e,onLogout:n}){const[r,i]=k.useState("profile"),[s,a]=k.useState(!1),[l,c]=k.useState(null),[u,d]=k.useState({name:(t==null?void 0:t.name)||"",phone:"",email:(t==null?void 0:t.email)||""}),[f,h]=k.useState({current:"",new:"",confirm:""});k.useEffect(()=>{(async()=>{if(t!=null&&t.email)try{const w=Qn($t,"artifacts",Lt,"public","data","allowed_users",t.email),b=await rf(w);if(b.exists()){const N=b.data();d(A=>({...A,name:N.name||A.name,phone:N.phone||""}))}}catch(w){console.error("Error loading profile:",w)}})()},[t==null?void 0:t.email]);const m=async()=>{if(t!=null&&t.email){a(!0),c(null);try{const x=Qn($t,"artifacts",Lt,"public","data","allowed_users",t.email);if(await Xb(x,{name:u.name,phone:u.phone}),t!=null&&t.uid){const w=Qn($t,"artifacts",Lt,"public","data","system_users",t.uid);(await rf(w)).exists()&&await Xb(w,{name:u.name,phone:u.phone})}c({type:"success",text:"Profile updated successfully!"})}catch(x){console.error("Error saving profile:",x),c({type:"error",text:"Failed to save profile. Please try again."})}a(!1)}},y=async()=>{if(!f.current||!f.new||!f.confirm){c({type:"error",text:"Please fill in all password fields."});return}if(f.new!==f.confirm){c({type:"error",text:"New passwords do not match."});return}if(f.new.length<6){c({type:"error",text:"Password must be at least 6 characters."});return}a(!0),c(null);try{await Qu.changePassword(f.current,f.new),h({current:"",new:"",confirm:""}),c({type:"success",text:"Password changed successfully!"})}catch(x){console.error("Error changing password:",x),c({type:"error",text:x.message||"Failed to change password. Please try again."})}a(!1)},g=async()=>{try{n&&await n(),e()}catch(x){console.error("Error signing out:",x)}},v=[{id:"profile",label:"Profile",icon:di},{id:"password",label:"Password",icon:za}];return o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white w-full max-w-lg rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-scale-in max-h-[90vh]",children:[o.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 text-white p-6 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-white/10 rounded-lg",children:o.jsx(di,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold",children:"Account Settings"}),o.jsx("p",{className:"text-xs text-slate-300",children:t==null?void 0:t.email})]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:o.jsx(Ft,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"flex border-b bg-slate-50",children:v.map(x=>o.jsxs("button",{onClick:()=>{i(x.id),c(null)},className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 text-sm font-medium transition-colors ${r===x.id?"text-blue-600 border-b-2 border-blue-600 bg-white":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[o.jsx(x.icon,{className:"w-4 h-4"}),x.label]},x.id))}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[l&&o.jsxs("div",{className:`mb-4 p-3 rounded-lg text-sm flex items-center gap-2 ${l.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[l.type==="success"?o.jsx(W_,{className:"w-4 h-4"}):o.jsx(Ft,{className:"w-4 h-4"}),l.text]}),r==="profile"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Display Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(di,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"text",className:"w-full pl-10 pr-3 py-3 border rounded-lg text-sm outline-none focus:border-blue-400",value:u.name,onChange:x=>d({...u,name:x.target.value}),placeholder:"Your name"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(Wd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"email",className:"w-full pl-10 pr-3 py-3 border rounded-lg text-sm outline-none bg-gray-50 text-gray-500",value:u.email,disabled:!0})]}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email cannot be changed"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Phone Number"}),o.jsxs("div",{className:"relative",children:[o.jsx(Un,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"tel",className:"w-full pl-10 pr-3 py-3 border rounded-lg text-sm outline-none focus:border-blue-400",value:u.phone,onChange:x=>d({...u,phone:x.target.value}),placeholder:"03XX-XXXXXXX"})]}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Used for SMS notifications"})]}),o.jsxs("button",{onClick:m,disabled:s,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl flex items-center justify-center gap-2 disabled:opacity-70 transition-colors",children:[s?o.jsx(Ut,{className:"w-4 h-4 animate-spin"}):o.jsx(K_,{className:"w-4 h-4"}),"Save Profile"]})]}),r==="password"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Current Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(za,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"password",className:"w-full pl-10 pr-3 py-3 border rounded-lg text-sm outline-none focus:border-blue-400",value:f.current,onChange:x=>h({...f,current:x.target.value}),placeholder:"Enter current password"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(za,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"password",className:"w-full pl-10 pr-3 py-3 border rounded-lg text-sm outline-none focus:border-blue-400",value:f.new,onChange:x=>h({...f,new:x.target.value}),placeholder:"Enter new password"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Confirm New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(za,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"password",className:"w-full pl-10 pr-3 py-3 border rounded-lg text-sm outline-none focus:border-blue-400",value:f.confirm,onChange:x=>h({...f,confirm:x.target.value}),placeholder:"Confirm new password"})]})]}),o.jsxs("button",{onClick:y,disabled:s,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl flex items-center justify-center gap-2 disabled:opacity-70 transition-colors",children:[s?o.jsx(Ut,{className:"w-4 h-4 animate-spin"}):o.jsx(za,{className:"w-4 h-4"}),"Change Password"]}),o.jsxs("div",{className:"pt-4 border-t",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Password requirements:"}),o.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[o.jsx("li",{children:" Minimum 6 characters"}),o.jsx("li",{children:" Mix of letters and numbers recommended"})]})]})]})]}),o.jsx("div",{className:"p-4 bg-gray-50 border-t",children:o.jsxs("button",{onClick:g,className:"w-full py-2 text-red-600 hover:bg-red-50 font-medium rounded-lg flex items-center justify-center gap-2 transition-colors",children:[o.jsx(jR,{className:"w-4 h-4"}),"Sign Out"]})})]})})}function pOe({onClose:t}){const{migrateContacts:e,migrating:n,progress:r,error:i}=Zae(),s=async()=>{try{await e()}catch(l){console.error("Migration failed:",l)}},a=r.total>0?Math.round(r.current/r.total*100):0;return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-5 text-white",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:o.jsx(Cm,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"font-bold text-lg",children:"Contacts Migration"}),o.jsx("p",{className:"text-sm text-blue-100",children:"Firebase  PostgreSQL"})]})]})}),o.jsxs("div",{className:"p-5 space-y-4",children:[o.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx(mo,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-amber-800 font-medium",children:"Important"}),o.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"This checks all contacts from Firebase against PostgreSQL. Duplicates (matching phone) are skipped to prevent errors."})]})]})}),(n||r.total>0)&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between text-sm items-end",children:[o.jsx("span",{className:"text-gray-600 font-medium",children:"Progress"}),o.jsxs("span",{className:"text-indigo-600 font-bold text-lg",children:[r.current," ",o.jsxs("span",{className:"text-gray-400 text-sm font-normal",children:["/ ",r.total]})]})]}),o.jsx("div",{className:"h-3 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-500 transition-all duration-300 relative",style:{width:`${a}%`},children:o.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[o.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-100",children:[o.jsxs("div",{className:"flex items-center gap-2 text-green-700 mb-1",children:[o.jsx(Qr,{className:"w-4 h-4"}),o.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Migrated"})]}),o.jsx("p",{className:"text-2xl font-bold text-green-700",children:r.success})]}),o.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-100",children:[o.jsxs("div",{className:"flex items-center gap-2 text-red-700 mb-1",children:[o.jsx(Im,{className:"w-4 h-4"}),o.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Failed"})]}),o.jsx("p",{className:"text-2xl font-bold text-red-700",children:r.failed})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200 col-span-2",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[o.jsx(ss,{className:"w-4 h-4"}),o.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Skipped"})]}),o.jsx("span",{className:"text-sm font-bold text-gray-700",children:r.skipped})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[o.jsx("span",{children:"Duplicates (Already exist)"}),o.jsx("span",{className:"font-medium",children:r.skippedDuplicate||0})]}),o.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[o.jsx("span",{children:"Invalid Phone Numbers"}),o.jsx("span",{className:"font-medium",children:r.skippedInvalid||0})]})]})]})]})]}),i&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex items-start gap-2",children:[o.jsx(Im,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),o.jsx("p",{className:"text-sm text-red-700",children:i})]}),!n&&r.total>0&&r.current===r.total&&o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center animate-fade-in",children:[o.jsx(Qr,{className:"w-10 h-10 text-green-500 mx-auto mb-2"}),o.jsx("p",{className:"font-medium text-green-800",children:"Process Complete!"}),o.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Check the breakdown above for details."})]})]}),o.jsxs("div",{className:"border-t p-4 flex gap-3 bg-gray-50",children:[o.jsx("button",{onClick:t,className:"flex-1 px-4 py-2.5 border border-gray-200 bg-white rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:r.total>0?"Close":"Cancel"}),o.jsx("button",{onClick:s,disabled:n||r.total>0&&r.current===r.total,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-sm",children:n?o.jsxs(o.Fragment,{children:[o.jsx(Ut,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Cm,{className:"w-4 h-4"}),r.total>0?"Restart":"Start Migration"]})})]})]})})}function mOe({stats:t,onShowRevenue:e}){const{t:n}=Zr();return o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"grid grid-cols-4 gap-5",children:[o.jsx(op,{title:n("totalRevenue"),value:Le(t.revenue),icon:$o,color:"bg-green-500",onClick:e}),o.jsx(op,{title:n("pipelineValue"),value:Le(t.pipe),icon:Yl,color:"bg-blue-500"}),o.jsx(op,{title:n("totalLeads"),value:t.total,icon:jr,color:"bg-purple-500"}),o.jsx(op,{title:n("conversionRate"),value:`${t.conversion}%`,icon:Qr,color:"bg-orange-500"})]})})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Ys(t,e){return typeof t=="function"?t(e):t}function hr(t,e){return n=>{e.setState(r=>({...r,[t]:Ys(n,r[t])}))}}function Fv(t){return t instanceof Function}function gOe(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function yOe(t,e){const n=[],r=i=>{i.forEach(s=>{n.push(s);const a=e(s);a!=null&&a.length&&r(a)})};return r(t),n}function Ee(t,e,n){let r=[],i;return s=>{let a;n.key&&n.debug&&(a=Date.now());const l=t(s);if(!(l.length!==r.length||l.some((d,f)=>r[f]!==d)))return i;r=l;let u;if(n.key&&n.debug&&(u=Date.now()),i=e(...l),n==null||n.onChange==null||n.onChange(i),n.key&&n.debug&&n!=null&&n.debug()){const d=Math.round((Date.now()-a)*100)/100,f=Math.round((Date.now()-u)*100)/100,h=f/16,m=(y,g)=>{for(y=String(y);y.length<g;)y=" "+y;return y};console.info(`%c ${m(f,5)} /${m(d,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*h,120))}deg 100% 31%);`,n==null?void 0:n.key)}return i}}function Ce(t,e,n,r){return{debug:()=>{var i;return(i=t==null?void 0:t.debugAll)!=null?i:t[e]},key:!1,onChange:r}}function vOe(t,e,n,r){const i=()=>{var a;return(a=s.getValue())!=null?a:t.options.renderFallbackValue},s={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(r),renderValue:i,getContext:Ee(()=>[t,n,e,s],(a,l,c,u)=>({table:a,column:l,row:c,cell:u,getValue:u.getValue,renderValue:u.renderValue}),Ce(t.options,"debugCells"))};return t._features.forEach(a=>{a.createCell==null||a.createCell(s,n,e,t)},{}),s}function xOe(t,e,n,r){var i,s;const l={...t._getDefaultColumnDef(),...e},c=l.accessorKey;let u=(i=(s=l.id)!=null?s:c?typeof String.prototype.replaceAll=="function"?c.replaceAll(".","_"):c.replace(/\./g,"_"):void 0)!=null?i:typeof l.header=="string"?l.header:void 0,d;if(l.accessorFn?d=l.accessorFn:c&&(c.includes(".")?d=h=>{let m=h;for(const g of c.split(".")){var y;m=(y=m)==null?void 0:y[g]}return m}:d=h=>h[l.accessorKey]),!u)throw new Error;let f={id:`${String(u)}`,accessorFn:d,parent:r,depth:n,columnDef:l,columns:[],getFlatColumns:Ee(()=>[!0],()=>{var h;return[f,...(h=f.columns)==null?void 0:h.flatMap(m=>m.getFlatColumns())]},Ce(t.options,"debugColumns")),getLeafColumns:Ee(()=>[t._getOrderColumnsFn()],h=>{var m;if((m=f.columns)!=null&&m.length){let y=f.columns.flatMap(g=>g.getLeafColumns());return h(y)}return[f]},Ce(t.options,"debugColumns"))};for(const h of t._features)h.createColumn==null||h.createColumn(f,t);return f}const Nn="debugHeaders";function K2(t,e,n){var r;let s={id:(r=n.id)!=null?r:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const a=[],l=c=>{c.subHeaders&&c.subHeaders.length&&c.subHeaders.map(l),a.push(c)};return l(s),a},getContext:()=>({table:t,header:s,column:e})};return t._features.forEach(a=>{a.createHeader==null||a.createHeader(s,t)}),s}const bOe={createTable:t=>{t.getHeaderGroups=Ee(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,i)=>{var s,a;const l=(s=r==null?void 0:r.map(f=>n.find(h=>h.id===f)).filter(Boolean))!=null?s:[],c=(a=i==null?void 0:i.map(f=>n.find(h=>h.id===f)).filter(Boolean))!=null?a:[],u=n.filter(f=>!(r!=null&&r.includes(f.id))&&!(i!=null&&i.includes(f.id)));return Sp(e,[...l,...u,...c],t)},Ce(t.options,Nn)),t.getCenterHeaderGroups=Ee(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,i)=>(n=n.filter(s=>!(r!=null&&r.includes(s.id))&&!(i!=null&&i.includes(s.id))),Sp(e,n,t,"center")),Ce(t.options,Nn)),t.getLeftHeaderGroups=Ee(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,r)=>{var i;const s=(i=r==null?void 0:r.map(a=>n.find(l=>l.id===a)).filter(Boolean))!=null?i:[];return Sp(e,s,t,"left")},Ce(t.options,Nn)),t.getRightHeaderGroups=Ee(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,r)=>{var i;const s=(i=r==null?void 0:r.map(a=>n.find(l=>l.id===a)).filter(Boolean))!=null?i:[];return Sp(e,s,t,"right")},Ce(t.options,Nn)),t.getFooterGroups=Ee(()=>[t.getHeaderGroups()],e=>[...e].reverse(),Ce(t.options,Nn)),t.getLeftFooterGroups=Ee(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),Ce(t.options,Nn)),t.getCenterFooterGroups=Ee(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),Ce(t.options,Nn)),t.getRightFooterGroups=Ee(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),Ce(t.options,Nn)),t.getFlatHeaders=Ee(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ce(t.options,Nn)),t.getLeftFlatHeaders=Ee(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ce(t.options,Nn)),t.getCenterFlatHeaders=Ee(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ce(t.options,Nn)),t.getRightFlatHeaders=Ee(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ce(t.options,Nn)),t.getCenterLeafHeaders=Ee(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Ce(t.options,Nn)),t.getLeftLeafHeaders=Ee(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Ce(t.options,Nn)),t.getRightLeafHeaders=Ee(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Ce(t.options,Nn)),t.getLeafHeaders=Ee(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,r)=>{var i,s,a,l,c,u;return[...(i=(s=e[0])==null?void 0:s.headers)!=null?i:[],...(a=(l=n[0])==null?void 0:l.headers)!=null?a:[],...(c=(u=r[0])==null?void 0:u.headers)!=null?c:[]].map(d=>d.getLeafHeaders()).flat()},Ce(t.options,Nn))}};function Sp(t,e,n,r){var i,s;let a=0;const l=function(h,m){m===void 0&&(m=1),a=Math.max(a,m),h.filter(y=>y.getIsVisible()).forEach(y=>{var g;(g=y.columns)!=null&&g.length&&l(y.columns,m+1)},0)};l(t);let c=[];const u=(h,m)=>{const y={depth:m,id:[r,`${m}`].filter(Boolean).join("_"),headers:[]},g=[];h.forEach(v=>{const x=[...g].reverse()[0],w=v.column.depth===y.depth;let b,N=!1;if(w&&v.column.parent?b=v.column.parent:(b=v.column,N=!0),x&&(x==null?void 0:x.column)===b)x.subHeaders.push(v);else{const A=K2(n,b,{id:[r,m,b.id,v==null?void 0:v.id].filter(Boolean).join("_"),isPlaceholder:N,placeholderId:N?`${g.filter(E=>E.column===b).length}`:void 0,depth:m,index:g.length});A.subHeaders.push(v),g.push(A)}y.headers.push(v),v.headerGroup=y}),c.push(y),m>0&&u(g,m-1)},d=e.map((h,m)=>K2(n,h,{depth:a,index:m}));u(d,a-1),c.reverse();const f=h=>h.filter(y=>y.column.getIsVisible()).map(y=>{let g=0,v=0,x=[0];y.subHeaders&&y.subHeaders.length?(x=[],f(y.subHeaders).forEach(b=>{let{colSpan:N,rowSpan:A}=b;g+=N,x.push(A)})):g=1;const w=Math.min(...x);return v=v+w,y.colSpan=g,y.rowSpan=v,{colSpan:g,rowSpan:v}});return f((i=(s=c[0])==null?void 0:s.headers)!=null?i:[]),c}const mA=(t,e,n,r,i,s,a)=>{let l={id:e,index:r,original:n,depth:i,parentId:a,_valuesCache:{},_uniqueValuesCache:{},getValue:c=>{if(l._valuesCache.hasOwnProperty(c))return l._valuesCache[c];const u=t.getColumn(c);if(u!=null&&u.accessorFn)return l._valuesCache[c]=u.accessorFn(l.original,r),l._valuesCache[c]},getUniqueValues:c=>{if(l._uniqueValuesCache.hasOwnProperty(c))return l._uniqueValuesCache[c];const u=t.getColumn(c);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(l._uniqueValuesCache[c]=u.columnDef.getUniqueValues(l.original,r),l._uniqueValuesCache[c]):(l._uniqueValuesCache[c]=[l.getValue(c)],l._uniqueValuesCache[c])},renderValue:c=>{var u;return(u=l.getValue(c))!=null?u:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>yOe(l.subRows,c=>c.subRows),getParentRow:()=>l.parentId?t.getRow(l.parentId,!0):void 0,getParentRows:()=>{let c=[],u=l;for(;;){const d=u.getParentRow();if(!d)break;c.push(d),u=d}return c.reverse()},getAllCells:Ee(()=>[t.getAllLeafColumns()],c=>c.map(u=>vOe(t,l,u,u.id)),Ce(t.options,"debugRows")),_getAllCellsByColumnId:Ee(()=>[l.getAllCells()],c=>c.reduce((u,d)=>(u[d.column.id]=d,u),{}),Ce(t.options,"debugRows"))};for(let c=0;c<t._features.length;c++){const u=t._features[c];u==null||u.createRow==null||u.createRow(l,t)}return l},wOe={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},Y5=(t,e,n)=>{var r,i;const s=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((i=t.getValue(e))==null||(i=i.toString())==null||(i=i.toLowerCase())==null)&&i.includes(s))};Y5.autoRemove=t=>Yr(t);const X5=(t,e,n)=>{var r;return!!(!((r=t.getValue(e))==null||(r=r.toString())==null)&&r.includes(n))};X5.autoRemove=t=>Yr(t);const Q5=(t,e,n)=>{var r;return((r=t.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(n==null?void 0:n.toLowerCase())};Q5.autoRemove=t=>Yr(t);const J5=(t,e,n)=>{var r;return(r=t.getValue(e))==null?void 0:r.includes(n)};J5.autoRemove=t=>Yr(t);const Z5=(t,e,n)=>!n.some(r=>{var i;return!((i=t.getValue(e))!=null&&i.includes(r))});Z5.autoRemove=t=>Yr(t)||!(t!=null&&t.length);const e3=(t,e,n)=>n.some(r=>{var i;return(i=t.getValue(e))==null?void 0:i.includes(r)});e3.autoRemove=t=>Yr(t)||!(t!=null&&t.length);const t3=(t,e,n)=>t.getValue(e)===n;t3.autoRemove=t=>Yr(t);const n3=(t,e,n)=>t.getValue(e)==n;n3.autoRemove=t=>Yr(t);const gA=(t,e,n)=>{let[r,i]=n;const s=t.getValue(e);return s>=r&&s<=i};gA.resolveFilterValue=t=>{let[e,n]=t,r=typeof e!="number"?parseFloat(e):e,i=typeof n!="number"?parseFloat(n):n,s=e===null||Number.isNaN(r)?-1/0:r,a=n===null||Number.isNaN(i)?1/0:i;if(s>a){const l=s;s=a,a=l}return[s,a]};gA.autoRemove=t=>Yr(t)||Yr(t[0])&&Yr(t[1]);const Li={includesString:Y5,includesStringSensitive:X5,equalsString:Q5,arrIncludes:J5,arrIncludesAll:Z5,arrIncludesSome:e3,equals:t3,weakEquals:n3,inNumberRange:gA};function Yr(t){return t==null||t===""}const _Oe={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:hr("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(t.id);return typeof r=="string"?Li.includesString:typeof r=="number"?Li.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?Li.equals:Array.isArray(r)?Li.arrIncludes:Li.weakEquals},t.getFilterFn=()=>{var n,r;return Fv(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(r=e.options.filterFns)==null?void 0:r[t.columnDef.filterFn])!=null?n:Li[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,r,i;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(r=>r.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,r;return(n=(r=e.getState().columnFilters)==null?void 0:r.findIndex(i=>i.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(r=>{const i=t.getFilterFn(),s=r==null?void 0:r.find(d=>d.id===t.id),a=Ys(n,s?s.value:void 0);if(Y2(i,a,t)){var l;return(l=r==null?void 0:r.filter(d=>d.id!==t.id))!=null?l:[]}const c={id:t.id,value:a};if(s){var u;return(u=r==null?void 0:r.map(d=>d.id===t.id?c:d))!=null?u:[]}return r!=null&&r.length?[...r,c]:[c]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),r=i=>{var s;return(s=Ys(e,i))==null?void 0:s.filter(a=>{const l=n.find(c=>c.id===a.id);if(l){const c=l.getFilterFn();if(Y2(c,a.value,l))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(r)},t.resetColumnFilters=e=>{var n,r;t.setColumnFilters(e?[]:(n=(r=t.initialState)==null?void 0:r.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function Y2(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const SOe=(t,e,n)=>n.reduce((r,i)=>{const s=i.getValue(t);return r+(typeof s=="number"?s:0)},0),NOe=(t,e,n)=>{let r;return n.forEach(i=>{const s=i.getValue(t);s!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}),r},AOe=(t,e,n)=>{let r;return n.forEach(i=>{const s=i.getValue(t);s!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}),r},EOe=(t,e,n)=>{let r,i;return n.forEach(s=>{const a=s.getValue(t);a!=null&&(r===void 0?a>=a&&(r=i=a):(r>a&&(r=a),i<a&&(i=a)))}),[r,i]},COe=(t,e)=>{let n=0,r=0;if(e.forEach(i=>{let s=i.getValue(t);s!=null&&(s=+s)>=s&&(++n,r+=s)}),n)return r/n},jOe=(t,e)=>{if(!e.length)return;const n=e.map(s=>s.getValue(t));if(!gOe(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),i=n.sort((s,a)=>s-a);return n.length%2!==0?i[r]:(i[r-1]+i[r])/2},TOe=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),POe=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,kOe=(t,e)=>e.length,_x={sum:SOe,min:NOe,max:AOe,extent:EOe,mean:COe,median:jOe,unique:TOe,uniqueCount:POe,count:kOe},IOe={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:hr("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(r=>r!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,r;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(t.id);if(typeof r=="number")return _x.sum;if(Object.prototype.toString.call(r)==="[object Date]")return _x.extent},t.getAggregationFn=()=>{var n,r;if(!t)throw new Error;return Fv(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(r=e.options.aggregationFns)==null?void 0:r[t.columnDef.aggregationFn])!=null?n:_x[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,r;t.setGrouping(e?[]:(n=(r=t.initialState)==null?void 0:r.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const r=e.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(t._groupingValuesCache[n]=r.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,r)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var i;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((i=n.subRows)!=null&&i.length)}}};function OOe(t,e,n){if(!(e!=null&&e.length)||!n)return t;const r=t.filter(s=>!e.includes(s.id));return n==="remove"?r:[...e.map(s=>t.find(a=>a.id===s)).filter(Boolean),...r]}const ROe={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:hr("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=Ee(n=>[Nd(e,n)],n=>n.findIndex(r=>r.id===t.id),Ce(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var r;return((r=Nd(e,n)[0])==null?void 0:r.id)===t.id},t.getIsLastColumn=n=>{var r;const i=Nd(e,n);return((r=i[i.length-1])==null?void 0:r.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=Ee(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,r)=>i=>{let s=[];if(!(e!=null&&e.length))s=i;else{const a=[...e],l=[...i];for(;l.length&&a.length;){const c=a.shift(),u=l.findIndex(d=>d.id===c);u>-1&&s.push(l.splice(u,1)[0])}s=[...s,...l]}return OOe(s,n,r)},Ce(t.options,"debugTable"))}},Sx=()=>({left:[],right:[]}),$Oe={getInitialState:t=>({columnPinning:Sx(),...t}),getDefaultOptions:t=>({onColumnPinningChange:hr("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const r=t.getLeafColumns().map(i=>i.id).filter(Boolean);e.setColumnPinning(i=>{var s,a;if(n==="right"){var l,c;return{left:((l=i==null?void 0:i.left)!=null?l:[]).filter(f=>!(r!=null&&r.includes(f))),right:[...((c=i==null?void 0:i.right)!=null?c:[]).filter(f=>!(r!=null&&r.includes(f))),...r]}}if(n==="left"){var u,d;return{left:[...((u=i==null?void 0:i.left)!=null?u:[]).filter(f=>!(r!=null&&r.includes(f))),...r],right:((d=i==null?void 0:i.right)!=null?d:[]).filter(f=>!(r!=null&&r.includes(f)))}}return{left:((s=i==null?void 0:i.left)!=null?s:[]).filter(f=>!(r!=null&&r.includes(f))),right:((a=i==null?void 0:i.right)!=null?a:[]).filter(f=>!(r!=null&&r.includes(f)))}})},t.getCanPin=()=>t.getLeafColumns().some(r=>{var i,s,a;return((i=r.columnDef.enablePinning)!=null?i:!0)&&((s=(a=e.options.enableColumnPinning)!=null?a:e.options.enablePinning)!=null?s:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(l=>l.id),{left:r,right:i}=e.getState().columnPinning,s=n.some(l=>r==null?void 0:r.includes(l)),a=n.some(l=>i==null?void 0:i.includes(l));return s?"left":a?"right":!1},t.getPinnedIndex=()=>{var n,r;const i=t.getIsPinned();return i?(n=(r=e.getState().columnPinning)==null||(r=r[i])==null?void 0:r.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=Ee(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,r,i)=>{const s=[...r??[],...i??[]];return n.filter(a=>!s.includes(a.column.id))},Ce(e.options,"debugRows")),t.getLeftVisibleCells=Ee(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,r)=>(r??[]).map(s=>n.find(a=>a.column.id===s)).filter(Boolean).map(s=>({...s,position:"left"})),Ce(e.options,"debugRows")),t.getRightVisibleCells=Ee(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,r)=>(r??[]).map(s=>n.find(a=>a.column.id===s)).filter(Boolean).map(s=>({...s,position:"right"})),Ce(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,r;return t.setColumnPinning(e?Sx():(n=(r=t.initialState)==null?void 0:r.columnPinning)!=null?n:Sx())},t.getIsSomeColumnsPinned=e=>{var n;const r=t.getState().columnPinning;if(!e){var i,s;return!!((i=r.left)!=null&&i.length||(s=r.right)!=null&&s.length)}return!!((n=r[e])!=null&&n.length)},t.getLeftLeafColumns=Ee(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(r=>e.find(i=>i.id===r)).filter(Boolean),Ce(t.options,"debugColumns")),t.getRightLeafColumns=Ee(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(r=>e.find(i=>i.id===r)).filter(Boolean),Ce(t.options,"debugColumns")),t.getCenterLeafColumns=Ee(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r)=>{const i=[...n??[],...r??[]];return e.filter(s=>!i.includes(s.id))},Ce(t.options,"debugColumns"))}};function DOe(t){return t||(typeof document<"u"?document:null)}const Np={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Nx=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),MOe={getDefaultColumnDef:()=>Np,getInitialState:t=>({columnSizing:{},columnSizingInfo:Nx(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:hr("columnSizing",t),onColumnSizingInfoChange:hr("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,r,i;const s=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:Np.minSize,(r=s??t.columnDef.size)!=null?r:Np.size),(i=t.columnDef.maxSize)!=null?i:Np.maxSize)},t.getStart=Ee(n=>[n,Nd(e,n),e.getState().columnSizing],(n,r)=>r.slice(0,t.getIndex(n)).reduce((i,s)=>i+s.getSize(),0),Ce(e.options,"debugColumns")),t.getAfter=Ee(n=>[n,Nd(e,n),e.getState().columnSizing],(n,r)=>r.slice(t.getIndex(n)+1).reduce((i,s)=>i+s.getSize(),0),Ce(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:r,...i}=n;return i})},t.getCanResize=()=>{var n,r;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const r=i=>{if(i.subHeaders.length)i.subHeaders.forEach(r);else{var s;n+=(s=i.column.getSize())!=null?s:0}};return r(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const r=e.getColumn(t.column.id),i=r==null?void 0:r.getCanResize();return s=>{if(!r||!i||(s.persist==null||s.persist(),Ax(s)&&s.touches&&s.touches.length>1))return;const a=t.getSize(),l=t?t.getLeafHeaders().map(x=>[x.column.id,x.column.getSize()]):[[r.id,r.getSize()]],c=Ax(s)?Math.round(s.touches[0].clientX):s.clientX,u={},d=(x,w)=>{typeof w=="number"&&(e.setColumnSizingInfo(b=>{var N,A;const E=e.options.columnResizeDirection==="rtl"?-1:1,C=(w-((N=b==null?void 0:b.startOffset)!=null?N:0))*E,S=Math.max(C/((A=b==null?void 0:b.startSize)!=null?A:0),-.999999);return b.columnSizingStart.forEach(_=>{let[P,T]=_;u[P]=Math.round(Math.max(T+T*S,0)*100)/100}),{...b,deltaOffset:C,deltaPercentage:S}}),(e.options.columnResizeMode==="onChange"||x==="end")&&e.setColumnSizing(b=>({...b,...u})))},f=x=>d("move",x),h=x=>{d("end",x),e.setColumnSizingInfo(w=>({...w,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},m=DOe(n),y={moveHandler:x=>f(x.clientX),upHandler:x=>{m==null||m.removeEventListener("mousemove",y.moveHandler),m==null||m.removeEventListener("mouseup",y.upHandler),h(x.clientX)}},g={moveHandler:x=>(x.cancelable&&(x.preventDefault(),x.stopPropagation()),f(x.touches[0].clientX),!1),upHandler:x=>{var w;m==null||m.removeEventListener("touchmove",g.moveHandler),m==null||m.removeEventListener("touchend",g.upHandler),x.cancelable&&(x.preventDefault(),x.stopPropagation()),h((w=x.touches[0])==null?void 0:w.clientX)}},v=LOe()?{passive:!1}:!1;Ax(s)?(m==null||m.addEventListener("touchmove",g.moveHandler,v),m==null||m.addEventListener("touchend",g.upHandler,v)):(m==null||m.addEventListener("mousemove",y.moveHandler,v),m==null||m.addEventListener("mouseup",y.upHandler,v)),e.setColumnSizingInfo(x=>({...x,startOffset:c,startSize:a,deltaOffset:0,deltaPercentage:0,columnSizingStart:l,isResizingColumn:r.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?Nx():(n=t.initialState.columnSizingInfo)!=null?n:Nx())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0}}};let Ap=null;function LOe(){if(typeof Ap=="boolean")return Ap;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return Ap=t,Ap}function Ax(t){return t.type==="touchstart"}const FOe={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:hr("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(r=>({...r,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,r;const i=t.columns;return(n=i.length?i.some(s=>s.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[t.id])!=null?n:!0},t.getCanHide=()=>{var n,r;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((r=e.options.enableHiding)!=null?r:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=Ee(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),Ce(e.options,"debugRows")),t.getVisibleCells=Ee(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,r,i)=>[...n,...r,...i],Ce(e.options,"debugRows"))},createTable:t=>{const e=(n,r)=>Ee(()=>[r(),r().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(s=>s.getIsVisible==null?void 0:s.getIsVisible()),Ce(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var r;t.setColumnVisibility(n?{}:(r=t.initialState.columnVisibility)!=null?r:{})},t.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((i,s)=>({...i,[s.id]:n||!(s.getCanHide!=null&&s.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;t.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function Nd(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const VOe={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},BOe={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:hr("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const r=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,r,i,s;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&((s=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?s:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>Li.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:r}=t.options;return Fv(r)?r:r==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[r])!=null?e:Li[r]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},UOe={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:hr("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var r,i;if(!e){t._queue(()=>{e=!0});return}if((r=(i=t.options.autoResetAll)!=null?i:t.options.autoResetExpanded)!=null?r:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=r=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(r),t.toggleAllRowsExpanded=r=>{r??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=r=>{var i,s;t.setExpanded(r?{}:(i=(s=t.initialState)==null?void 0:s.expanded)!=null?i:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const r=t.getState().expanded;return r===!0||Object.values(r).some(Boolean)},t.getIsAllRowsExpanded=()=>{const r=t.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||t.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},t.getExpandedDepth=()=>{let r=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(s=>{const a=s.split(".");r=Math.max(r,a.length)}),r},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(r=>{var i;const s=r===!0?!0:!!(r!=null&&r[t.id]);let a={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(l=>{a[l]=!0}):a=r,n=(i=n)!=null?i:!s,!s&&n)return{...a,[t.id]:!0};if(s&&!n){const{[t.id]:l,...c}=a;return c}return r})},t.getIsExpanded=()=>{var n;const r=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:r===!0||r!=null&&r[t.id])},t.getCanExpand=()=>{var n,r,i;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((r=e.options.enableExpanding)!=null?r:!0)&&!!((i=t.subRows)!=null&&i.length)},t.getIsAllParentsExpanded=()=>{let n=!0,r=t;for(;n&&r.parentId;)r=e.getRow(r.parentId,!0),n=r.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},M1=0,L1=10,Ex=()=>({pageIndex:M1,pageSize:L1}),zOe={getInitialState:t=>({...t,pagination:{...Ex(),...t==null?void 0:t.pagination}}),getDefaultOptions:t=>({onPaginationChange:hr("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var r,i;if(!e){t._queue(()=>{e=!0});return}if((r=(i=t.options.autoResetAll)!=null?i:t.options.autoResetPageIndex)!=null?r:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=r=>{const i=s=>Ys(r,s);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(i)},t.resetPagination=r=>{var i;t.setPagination(r?Ex():(i=t.initialState.pagination)!=null?i:Ex())},t.setPageIndex=r=>{t.setPagination(i=>{let s=Ys(r,i.pageIndex);const a=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return s=Math.max(0,Math.min(s,a)),{...i,pageIndex:s}})},t.resetPageIndex=r=>{var i,s;t.setPageIndex(r?M1:(i=(s=t.initialState)==null||(s=s.pagination)==null?void 0:s.pageIndex)!=null?i:M1)},t.resetPageSize=r=>{var i,s;t.setPageSize(r?L1:(i=(s=t.initialState)==null||(s=s.pagination)==null?void 0:s.pageSize)!=null?i:L1)},t.setPageSize=r=>{t.setPagination(i=>{const s=Math.max(1,Ys(r,i.pageSize)),a=i.pageSize*i.pageIndex,l=Math.floor(a/s);return{...i,pageIndex:l,pageSize:s}})},t.setPageCount=r=>t.setPagination(i=>{var s;let a=Ys(r,(s=t.options.pageCount)!=null?s:-1);return typeof a=="number"&&(a=Math.max(-1,a)),{...i,pageCount:a}}),t.getPageOptions=Ee(()=>[t.getPageCount()],r=>{let i=[];return r&&r>0&&(i=[...new Array(r)].fill(null).map((s,a)=>a)),i},Ce(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:r}=t.getState().pagination,i=t.getPageCount();return i===-1?!0:i===0?!1:r<i-1},t.previousPage=()=>t.setPageIndex(r=>r-1),t.nextPage=()=>t.setPageIndex(r=>r+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var r;return(r=t.options.pageCount)!=null?r:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var r;return(r=t.options.rowCount)!=null?r:t.getPrePaginationRowModel().rows.length}}},Cx=()=>({top:[],bottom:[]}),qOe={getInitialState:t=>({rowPinning:Cx(),...t}),getDefaultOptions:t=>({onRowPinningChange:hr("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,r,i)=>{const s=r?t.getLeafRows().map(c=>{let{id:u}=c;return u}):[],a=i?t.getParentRows().map(c=>{let{id:u}=c;return u}):[],l=new Set([...a,t.id,...s]);e.setRowPinning(c=>{var u,d;if(n==="bottom"){var f,h;return{top:((f=c==null?void 0:c.top)!=null?f:[]).filter(g=>!(l!=null&&l.has(g))),bottom:[...((h=c==null?void 0:c.bottom)!=null?h:[]).filter(g=>!(l!=null&&l.has(g))),...Array.from(l)]}}if(n==="top"){var m,y;return{top:[...((m=c==null?void 0:c.top)!=null?m:[]).filter(g=>!(l!=null&&l.has(g))),...Array.from(l)],bottom:((y=c==null?void 0:c.bottom)!=null?y:[]).filter(g=>!(l!=null&&l.has(g)))}}return{top:((u=c==null?void 0:c.top)!=null?u:[]).filter(g=>!(l!=null&&l.has(g))),bottom:((d=c==null?void 0:c.bottom)!=null?d:[]).filter(g=>!(l!=null&&l.has(g)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:i}=e.options;return typeof r=="function"?r(t):(n=r??i)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:r,bottom:i}=e.getState().rowPinning,s=n.some(l=>r==null?void 0:r.includes(l)),a=n.some(l=>i==null?void 0:i.includes(l));return s?"top":a?"bottom":!1},t.getPinnedIndex=()=>{var n,r;const i=t.getIsPinned();if(!i)return-1;const s=(n=i==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(a=>{let{id:l}=a;return l});return(r=s==null?void 0:s.indexOf(t.id))!=null?r:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,r;return t.setRowPinning(e?Cx():(n=(r=t.initialState)==null?void 0:r.rowPinning)!=null?n:Cx())},t.getIsSomeRowsPinned=e=>{var n;const r=t.getState().rowPinning;if(!e){var i,s;return!!((i=r.top)!=null&&i.length||(s=r.bottom)!=null&&s.length)}return!!((n=r[e])!=null&&n.length)},t._getPinnedRows=(e,n,r)=>{var i;return((i=t.options.keepPinnedRows)==null||i?(n??[]).map(a=>{const l=t.getRow(a,!0);return l.getIsAllParentsExpanded()?l:null}):(n??[]).map(a=>e.find(l=>l.id===a))).filter(Boolean).map(a=>({...a,position:r}))},t.getTopRows=Ee(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),Ce(t.options,"debugRows")),t.getBottomRows=Ee(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),Ce(t.options,"debugRows")),t.getCenterRows=Ee(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,r)=>{const i=new Set([...n??[],...r??[]]);return e.filter(s=>!i.has(s.id))},Ce(t.options,"debugRows"))}},WOe={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:hr("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const r={...n},i=t.getPreGroupedRowModel().flatRows;return e?i.forEach(s=>{s.getCanSelect()&&(r[s.id]=!0)}):i.forEach(s=>{delete r[s.id]}),r})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const r=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),i={...n};return t.getRowModel().rows.forEach(s=>{F1(i,s.id,r,!0,t)}),i}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=Ee(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?jx(t,n):{rows:[],flatRows:[],rowsById:{}},Ce(t.options,"debugTable")),t.getFilteredSelectedRowModel=Ee(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?jx(t,n):{rows:[],flatRows:[],rowsById:{}},Ce(t.options,"debugTable")),t.getGroupedSelectedRowModel=Ee(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?jx(t,n):{rows:[],flatRows:[],rowsById:{}},Ce(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let r=!!(e.length&&Object.keys(n).length);return r&&e.some(i=>i.getCanSelect()&&!n[i.id])&&(r=!1),r},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:n}=t.getState();let r=!!e.length;return r&&e.some(i=>!n[i.id])&&(r=!1),r},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,r)=>{const i=t.getIsSelected();e.setRowSelection(s=>{var a;if(n=typeof n<"u"?n:!i,t.getCanSelect()&&i===n)return s;const l={...s};return F1(l,t.id,n,(a=r==null?void 0:r.selectChildren)!=null?a:!0,e),l})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return yA(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return V1(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return V1(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return r=>{var i;n&&t.toggleSelected((i=r.target)==null?void 0:i.checked)}}}},F1=(t,e,n,r,i)=>{var s;const a=i.getRow(e,!0);n?(a.getCanMultiSelect()||Object.keys(t).forEach(l=>delete t[l]),a.getCanSelect()&&(t[e]=!0)):delete t[e],r&&(s=a.subRows)!=null&&s.length&&a.getCanSelectSubRows()&&a.subRows.forEach(l=>F1(t,l.id,n,r,i))};function jx(t,e){const n=t.getState().rowSelection,r=[],i={},s=function(a,l){return a.map(c=>{var u;const d=yA(c,n);if(d&&(r.push(c),i[c.id]=c),(u=c.subRows)!=null&&u.length&&(c={...c,subRows:s(c.subRows)}),d)return c}).filter(Boolean)};return{rows:s(e.rows),flatRows:r,rowsById:i}}function yA(t,e){var n;return(n=e[t.id])!=null?n:!1}function V1(t,e,n){var r;if(!((r=t.subRows)!=null&&r.length))return!1;let i=!0,s=!1;return t.subRows.forEach(a=>{if(!(s&&!i)&&(a.getCanSelect()&&(yA(a,e)?s=!0:i=!1),a.subRows&&a.subRows.length)){const l=V1(a,e);l==="all"?s=!0:(l==="some"&&(s=!0),i=!1)}}),i?"all":s?"some":!1}const B1=/([0-9]+)/gm,GOe=(t,e,n)=>r3(va(t.getValue(n)).toLowerCase(),va(e.getValue(n)).toLowerCase()),HOe=(t,e,n)=>r3(va(t.getValue(n)),va(e.getValue(n))),KOe=(t,e,n)=>vA(va(t.getValue(n)).toLowerCase(),va(e.getValue(n)).toLowerCase()),YOe=(t,e,n)=>vA(va(t.getValue(n)),va(e.getValue(n))),XOe=(t,e,n)=>{const r=t.getValue(n),i=e.getValue(n);return r>i?1:r<i?-1:0},QOe=(t,e,n)=>vA(t.getValue(n),e.getValue(n));function vA(t,e){return t===e?0:t>e?1:-1}function va(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function r3(t,e){const n=t.split(B1).filter(Boolean),r=e.split(B1).filter(Boolean);for(;n.length&&r.length;){const i=n.shift(),s=r.shift(),a=parseInt(i,10),l=parseInt(s,10),c=[a,l].sort();if(isNaN(c[0])){if(i>s)return 1;if(s>i)return-1;continue}if(isNaN(c[1]))return isNaN(a)?-1:1;if(a>l)return 1;if(l>a)return-1}return n.length-r.length}const Uu={alphanumeric:GOe,alphanumericCaseSensitive:HOe,text:KOe,textCaseSensitive:YOe,datetime:XOe,basic:QOe},JOe={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:hr("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const i of n){const s=i==null?void 0:i.getValue(t.id);if(Object.prototype.toString.call(s)==="[object Date]")return Uu.datetime;if(typeof s=="string"&&(r=!0,s.split(B1).length>1))return Uu.alphanumeric}return r?Uu.text:Uu.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(t.id))=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,r;if(!t)throw new Error;return Fv(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(r=e.options.sortingFns)==null?void 0:r[t.columnDef.sortingFn])!=null?n:Uu[t.columnDef.sortingFn]},t.toggleSorting=(n,r)=>{const i=t.getNextSortingOrder(),s=typeof n<"u"&&n!==null;e.setSorting(a=>{const l=a==null?void 0:a.find(m=>m.id===t.id),c=a==null?void 0:a.findIndex(m=>m.id===t.id);let u=[],d,f=s?n:i==="desc";if(a!=null&&a.length&&t.getCanMultiSort()&&r?l?d="toggle":d="add":a!=null&&a.length&&c!==a.length-1?d="replace":l?d="toggle":d="replace",d==="toggle"&&(s||i||(d="remove")),d==="add"){var h;u=[...a,{id:t.id,desc:f}],u.splice(0,u.length-((h=e.options.maxMultiSortColCount)!=null?h:Number.MAX_SAFE_INTEGER))}else d==="toggle"?u=a.map(m=>m.id===t.id?{...m,desc:f}:m):d==="remove"?u=a.filter(m=>m.id!==t.id):u=[{id:t.id,desc:f}];return u})},t.getFirstSortDir=()=>{var n,r;return((n=(r=t.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var r,i;const s=t.getFirstSortDir(),a=t.getIsSorted();return a?a!==s&&((r=e.options.enableSortingRemoval)==null||r)&&(!(n&&(i=e.options.enableMultiRemove)!=null)||i)?!1:a==="desc"?"asc":"desc":s},t.getCanSort=()=>{var n,r;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,r;return(n=(r=t.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const r=(n=e.getState().sorting)==null?void 0:n.find(i=>i.id===t.id);return r?r.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,r;return(n=(r=e.getState().sorting)==null?void 0:r.findIndex(i=>i.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return r=>{n&&(r.persist==null||r.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,r;t.setSorting(e?[]:(n=(r=t.initialState)==null?void 0:r.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},ZOe=[bOe,FOe,ROe,$Oe,wOe,_Oe,VOe,BOe,JOe,IOe,UOe,zOe,qOe,WOe,MOe];function eRe(t){var e,n;const r=[...ZOe,...(e=t._features)!=null?e:[]];let i={_features:r};const s=i._features.reduce((h,m)=>Object.assign(h,m.getDefaultOptions==null?void 0:m.getDefaultOptions(i)),{}),a=h=>i.options.mergeOptions?i.options.mergeOptions(s,h):{...s,...h};let c={...{},...(n=t.initialState)!=null?n:{}};i._features.forEach(h=>{var m;c=(m=h.getInitialState==null?void 0:h.getInitialState(c))!=null?m:c});const u=[];let d=!1;const f={_features:r,options:{...s,...t},initialState:c,_queue:h=>{u.push(h),d||(d=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();d=!1}).catch(m=>setTimeout(()=>{throw m})))},reset:()=>{i.setState(i.initialState)},setOptions:h=>{const m=Ys(h,i.options);i.options=a(m)},getState:()=>i.options.state,setState:h=>{i.options.onStateChange==null||i.options.onStateChange(h)},_getRowId:(h,m,y)=>{var g;return(g=i.options.getRowId==null?void 0:i.options.getRowId(h,m,y))!=null?g:`${y?[y.id,m].join("."):m}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(h,m)=>{let y=(m?i.getPrePaginationRowModel():i.getRowModel()).rowsById[h];if(!y&&(y=i.getCoreRowModel().rowsById[h],!y))throw new Error;return y},_getDefaultColumnDef:Ee(()=>[i.options.defaultColumn],h=>{var m;return h=(m=h)!=null?m:{},{header:y=>{const g=y.header.column.columnDef;return g.accessorKey?g.accessorKey:g.accessorFn?g.id:null},cell:y=>{var g,v;return(g=(v=y.renderValue())==null||v.toString==null?void 0:v.toString())!=null?g:null},...i._features.reduce((y,g)=>Object.assign(y,g.getDefaultColumnDef==null?void 0:g.getDefaultColumnDef()),{}),...h}},Ce(t,"debugColumns")),_getColumnDefs:()=>i.options.columns,getAllColumns:Ee(()=>[i._getColumnDefs()],h=>{const m=function(y,g,v){return v===void 0&&(v=0),y.map(x=>{const w=xOe(i,x,v,g),b=x;return w.columns=b.columns?m(b.columns,w,v+1):[],w})};return m(h)},Ce(t,"debugColumns")),getAllFlatColumns:Ee(()=>[i.getAllColumns()],h=>h.flatMap(m=>m.getFlatColumns()),Ce(t,"debugColumns")),_getAllFlatColumnsById:Ee(()=>[i.getAllFlatColumns()],h=>h.reduce((m,y)=>(m[y.id]=y,m),{}),Ce(t,"debugColumns")),getAllLeafColumns:Ee(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(h,m)=>{let y=h.flatMap(g=>g.getLeafColumns());return m(y)},Ce(t,"debugColumns")),getColumn:h=>i._getAllFlatColumnsById()[h]};Object.assign(i,f);for(let h=0;h<i._features.length;h++){const m=i._features[h];m==null||m.createTable==null||m.createTable(i)}return i}function i3(){return t=>Ee(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(i,s,a){s===void 0&&(s=0);const l=[];for(let u=0;u<i.length;u++){const d=mA(t,t._getRowId(i[u],u,a),i[u],u,s,void 0,a==null?void 0:a.id);if(n.flatRows.push(d),n.rowsById[d.id]=d,l.push(d),t.options.getSubRows){var c;d.originalSubRows=t.options.getSubRows(i[u],u),(c=d.originalSubRows)!=null&&c.length&&(d.subRows=r(d.originalSubRows,s+1,d))}}return l};return n.rows=r(e),n},Ce(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function tRe(t){const e=[],n=r=>{var i;e.push(r),(i=r.subRows)!=null&&i.length&&r.getIsExpanded()&&r.subRows.forEach(n)};return t.rows.forEach(n),{rows:e,flatRows:t.flatRows,rowsById:t.rowsById}}function nRe(t,e,n){return n.options.filterFromLeafRows?rRe(t,e,n):iRe(t,e,n)}function rRe(t,e,n){var r;const i=[],s={},a=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,l=function(c,u){u===void 0&&(u=0);const d=[];for(let h=0;h<c.length;h++){var f;let m=c[h];const y=mA(n,m.id,m.original,m.index,m.depth,void 0,m.parentId);if(y.columnFilters=m.columnFilters,(f=m.subRows)!=null&&f.length&&u<a){if(y.subRows=l(m.subRows,u+1),m=y,e(m)&&!y.subRows.length){d.push(m),s[m.id]=m,i.push(m);continue}if(e(m)||y.subRows.length){d.push(m),s[m.id]=m,i.push(m);continue}}else m=y,e(m)&&(d.push(m),s[m.id]=m,i.push(m))}return d};return{rows:l(t),flatRows:i,rowsById:s}}function iRe(t,e,n){var r;const i=[],s={},a=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,l=function(c,u){u===void 0&&(u=0);const d=[];for(let h=0;h<c.length;h++){let m=c[h];if(e(m)){var f;if((f=m.subRows)!=null&&f.length&&u<a){const g=mA(n,m.id,m.original,m.index,m.depth,void 0,m.parentId);g.subRows=l(m.subRows,u+1),m=g}d.push(m),i.push(m),s[m.id]=m}}return d};return{rows:l(t),flatRows:i,rowsById:s}}function s3(){return t=>Ee(()=>[t.getPreFilteredRowModel(),t.getState().columnFilters,t.getState().globalFilter],(e,n,r)=>{if(!e.rows.length||!(n!=null&&n.length)&&!r){for(let h=0;h<e.flatRows.length;h++)e.flatRows[h].columnFilters={},e.flatRows[h].columnFiltersMeta={};return e}const i=[],s=[];(n??[]).forEach(h=>{var m;const y=t.getColumn(h.id);if(!y)return;const g=y.getFilterFn();g&&i.push({id:h.id,filterFn:g,resolvedValue:(m=g.resolveFilterValue==null?void 0:g.resolveFilterValue(h.value))!=null?m:h.value})});const a=(n??[]).map(h=>h.id),l=t.getGlobalFilterFn(),c=t.getAllLeafColumns().filter(h=>h.getCanGlobalFilter());r&&l&&c.length&&(a.push("__global__"),c.forEach(h=>{var m;s.push({id:h.id,filterFn:l,resolvedValue:(m=l.resolveFilterValue==null?void 0:l.resolveFilterValue(r))!=null?m:r})}));let u,d;for(let h=0;h<e.flatRows.length;h++){const m=e.flatRows[h];if(m.columnFilters={},i.length)for(let y=0;y<i.length;y++){u=i[y];const g=u.id;m.columnFilters[g]=u.filterFn(m,g,u.resolvedValue,v=>{m.columnFiltersMeta[g]=v})}if(s.length){for(let y=0;y<s.length;y++){d=s[y];const g=d.id;if(d.filterFn(m,g,d.resolvedValue,v=>{m.columnFiltersMeta[g]=v})){m.columnFilters.__global__=!0;break}}m.columnFilters.__global__!==!0&&(m.columnFilters.__global__=!1)}}const f=h=>{for(let m=0;m<a.length;m++)if(h.columnFilters[a[m]]===!1)return!1;return!0};return nRe(e.rows,f,t)},Ce(t.options,"debugTable","getFilteredRowModel",()=>t._autoResetPageIndex()))}function a3(t){return e=>Ee(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(n,r)=>{if(!r.rows.length)return r;const{pageSize:i,pageIndex:s}=n;let{rows:a,flatRows:l,rowsById:c}=r;const u=i*s,d=u+i;a=a.slice(u,d);let f;e.options.paginateExpandedRows?f={rows:a,flatRows:l,rowsById:c}:f=tRe({rows:a,flatRows:l,rowsById:c}),f.flatRows=[];const h=m=>{f.flatRows.push(m),m.subRows.length&&m.subRows.forEach(h)};return f.rows.forEach(h),f},Ce(e.options,"debugTable"))}function o3(){return t=>Ee(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const r=t.getState().sorting,i=[],s=r.filter(c=>{var u;return(u=t.getColumn(c.id))==null?void 0:u.getCanSort()}),a={};s.forEach(c=>{const u=t.getColumn(c.id);u&&(a[c.id]={sortUndefined:u.columnDef.sortUndefined,invertSorting:u.columnDef.invertSorting,sortingFn:u.getSortingFn()})});const l=c=>{const u=c.map(d=>({...d}));return u.sort((d,f)=>{for(let m=0;m<s.length;m+=1){var h;const y=s[m],g=a[y.id],v=g.sortUndefined,x=(h=y==null?void 0:y.desc)!=null?h:!1;let w=0;if(v){const b=d.getValue(y.id),N=f.getValue(y.id),A=b===void 0,E=N===void 0;if(A||E){if(v==="first")return A?-1:1;if(v==="last")return A?1:-1;w=A&&E?0:A?v:-v}}if(w===0&&(w=g.sortingFn(d,f,y.id)),w!==0)return x&&(w*=-1),g.invertSorting&&(w*=-1),w}return d.index-f.index}),u.forEach(d=>{var f;i.push(d),(f=d.subRows)!=null&&f.length&&(d.subRows=l(d.subRows))}),u};return{rows:l(n.rows),flatRows:i,rowsById:n.rowsById}},Ce(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function ty(t,e){return t?sRe(t)?k.createElement(t,e):t:null}function sRe(t){return aRe(t)||typeof t=="function"||oRe(t)}function aRe(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function oRe(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function l3(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=k.useState(()=>({current:eRe(e)})),[r,i]=k.useState(()=>n.current.initialState);return n.current.setOptions(s=>({...s,...t,state:{...r,...t.state},onStateChange:a=>{i(a),t.onStateChange==null||t.onStateChange(a)}})),n.current}function lRe({progress:t,onClose:e}){if(!t||!t.open)return null;const{total:n=0,current:r=0,successCount:i=0,failedRows:s=[],done:a=!1,unmatchedSources:l=[]}=t,c=s.length,u=n>0?Math.round(r/n*100):0,d=()=>{a&&e()},f=h=>{h.target===h.currentTarget&&a&&e()};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",onClick:f,children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg border border-gray-200 overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-slate-50",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-9 h-9 bg-green-100 rounded-xl flex items-center justify-center",children:o.jsx(WB,{className:"w-5 h-5 text-green-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900 text-base",children:"CSV Import"}),o.jsx("p",{className:"text-xs text-gray-500",children:a?"Import complete":"Importing leads, please wait"})]})]}),o.jsx("button",{onClick:d,disabled:!a,title:a?"Close":"Please wait until import finishes",className:`p-2 rounded-lg transition-colors ${a?"hover:bg-gray-100 text-gray-500 cursor-pointer":"text-gray-300 cursor-not-allowed"}`,children:o.jsx(Ft,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"px-6 py-5 space-y-5",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600 font-medium",children:a?"Finished":`Processing row ${r} of ${n}`}),o.jsxs("span",{className:"font-bold text-gray-800",children:[u,"%"]})]}),o.jsx("div",{className:"w-full bg-gray-100 rounded-full h-3 overflow-hidden",children:o.jsx("div",{className:`h-3 rounded-full transition-all duration-300 ${a&&c===0?"bg-green-500":a&&c>0?"bg-amber-500":"bg-blue-500"}`,style:{width:`${u}%`}})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"flex items-center gap-3 bg-green-50 border border-green-200 rounded-xl px-4 py-3",children:[o.jsx(UB,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Imported"}),o.jsx("p",{className:"text-xl font-bold text-green-700",children:i})]})]}),o.jsxs("div",{className:"flex items-center gap-3 bg-red-50 border border-red-200 rounded-xl px-4 py-3",children:[o.jsx(Im,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Failed"}),o.jsx("p",{className:"text-xl font-bold text-red-700",children:c})]})]})]}),!a&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600 bg-blue-50 border border-blue-200 rounded-lg px-4 py-2.5",children:[o.jsx(KB,{className:"w-4 h-4 animate-spin flex-shrink-0"}),o.jsx("span",{children:"Do not close or refresh this page while import is running."})]}),a&&l.length>0&&o.jsxs("div",{className:"flex items-start gap-2 bg-amber-50 border border-amber-200 rounded-lg px-4 py-3 text-sm",children:[o.jsx(ss,{className:"w-4 h-4 text-amber-500 mt-0.5 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-amber-700",children:"Unmatched sources"}),o.jsxs("p",{className:"text-amber-600 text-xs mt-0.5",children:["These sources were not found and saved as plain text:"," ",o.jsx("span",{className:"font-mono",children:l.join(", ")})]})]})]}),s.length>0&&o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:["Failed Rows (",c,")"]}),o.jsx("div",{className:"max-h-48 overflow-y-auto rounded-lg border border-red-200",children:o.jsxs("table",{className:"w-full text-xs",children:[o.jsx("thead",{className:"bg-red-50 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left font-semibold text-red-700 w-14",children:"Row #"}),o.jsx("th",{className:"px-3 py-2 text-left font-semibold text-red-700 w-28",children:"Client"}),o.jsx("th",{className:"px-3 py-2 text-left font-semibold text-red-700",children:"Reason"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-red-100",children:s.map((h,m)=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-3 py-2 text-gray-500 font-mono",children:h.rowNumber}),o.jsx("td",{className:"px-3 py-2 text-gray-700 font-medium truncate max-w-[6rem]",children:h.clientName||""}),o.jsx("td",{className:"px-3 py-2 text-red-600 break-words",children:h.error})]},m))})]})})]})]}),a&&o.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-slate-50 flex justify-end",children:o.jsx("button",{onClick:d,className:"bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold px-5 py-2 rounded-lg transition-colors",children:"Done"})})]})})}function cRe({data:t,onSelectLead:e,onShowNewLead:n,onFileUpload:r,onTruncateLeads:i,newLeadIds:s=[],viewedLeadIds:a=[],importProgress:l,closeImportModal:c}){const{t:u}=Zr(),[d,f]=k.useState(""),[h,m]=k.useState("All"),[y,g]=k.useState("All"),[v,x]=k.useState(""),[w,b]=k.useState(""),[N,A]=k.useState([{id:"inquiryDate",desc:!0}]),E=k.useMemo(()=>t.filter(T=>{const O=h==="All"?!0:h==="Pipeline"?["Proposal","Negotiation"].includes(T.stage):T.stage===h,R=y==="All"||T.manager===y;let M=!0;if(v&&w){const D=new Date(T.inquiryDate),B=new Date(v);B.setHours(0,0,0,0);const V=new Date(w);V.setHours(23,59,59,999),M=!isNaN(D)&&D>=B&&D<=V}return O&&R&&M}),[t,h,y,v,w]),C=k.useMemo(()=>[{id:"clientName",accessorKey:"clientName",header:u("client"),cell:({row:T})=>o.jsx("button",{onClick:()=>e(T.original),className:"font-bold text-blue-600 hover:text-blue-800 hover:underline text-left",children:T.original.clientName})},{accessorKey:"stage",header:u("stage"),cell:({getValue:T})=>{const O=T(),R=Wr[O]||Wr.New;return o.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${R.bg} ${R.text}`,children:O})}},{accessorKey:"quotationAmount",header:u("quotationAmount"),cell:({getValue:T})=>Le(T()),sortingFn:(T,O,R)=>At(T.getValue(R))-At(O.getValue(R))},{accessorKey:"clientBudget",header:u("clientBudget"),cell:({getValue:T})=>{const O=T();return O?Le(O):o.jsx("span",{className:"text-gray-400",children:"-"})},sortingFn:(T,O,R)=>At(T.getValue(R))-At(O.getValue(R))},{accessorKey:"source",header:u("source"),cell:({getValue:T})=>{const O=T();return O?o.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-700",children:O}):null}},{accessorKey:"inquiryDate",header:u("date"),cell:({getValue:T})=>o.jsx("span",{className:"text-gray-500",children:T()})}],[e,u]),S=l3({data:E,columns:C,state:{globalFilter:d,sorting:N},onGlobalFilterChange:f,onSortingChange:A,getCoreRowModel:i3(),getSortedRowModel:o3(),getFilteredRowModel:s3(),getPaginationRowModel:a3(),initialState:{pagination:{pageSize:10}}}),_=[...new Set(t.map(T=>T.manager))],P=T=>Wr[T]||Wr.New;return o.jsxs("div",{className:"space-y-4 animate-fade-in",children:[o.jsxs("div",{className:"flex flex-col gap-3 bg-white p-4 md:p-5 rounded-xl border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:u("allLeads")}),o.jsxs("p",{className:"text-sm text-gray-500",children:[t.length," ",u("leads").toLowerCase()]})]}),o.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[o.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[o.jsx(_a,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{className:"w-full sm:w-64 pl-10 pr-4 py-2.5 bg-slate-50 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:u("searchLeads"),value:d??"",onChange:T=>f(T.target.value)})]}),o.jsxs("label",{className:"bg-green-600 text-white px-4 py-2.5 rounded-lg text-sm font-semibold flex items-center gap-2 hover:bg-green-700 transition-colors whitespace-nowrap cursor-pointer",children:[o.jsx(aU,{className:"w-4 h-4"})," ",o.jsx("span",{className:"hidden sm:inline",children:u("importCsv")}),o.jsx("input",{type:"file",className:"hidden",accept:".csv",onChange:r})]}),i&&o.jsxs("button",{onClick:i,className:"bg-red-600 text-white px-4 py-2.5 rounded-lg text-sm font-semibold flex items-center gap-2 hover:bg-red-700 transition-colors whitespace-nowrap",children:[o.jsx(ai,{className:"w-4 h-4"})," ",o.jsx("span",{className:"hidden sm:inline",children:u("deleteAll")})]}),o.jsxs("button",{onClick:n,className:"bg-blue-600 text-white px-4 py-2.5 rounded-lg text-sm font-semibold flex items-center gap-2 hover:bg-blue-700 transition-colors whitespace-nowrap",children:[o.jsx(ro,{className:"w-4 h-4"})," ",o.jsx("span",{className:"hidden sm:inline",children:u("addLead")})]})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsxs("select",{className:"bg-slate-50 border border-gray-200 rounded-lg text-sm px-3 py-2",value:h,onChange:T=>m(T.target.value),children:[o.jsx("option",{value:"All",children:u("allStages")}),la.map(T=>o.jsx("option",{value:T,children:T},T)),o.jsx("option",{value:"Pipeline",children:u("pipeline")})]}),o.jsxs("select",{className:"bg-slate-50 border border-gray-200 rounded-lg text-sm px-3 py-2",value:y,onChange:T=>g(T.target.value),children:[o.jsx("option",{value:"All",children:u("allManagers")}),_.map(T=>o.jsx("option",{value:T,children:T},T))]}),o.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 border border-gray-200 rounded-lg text-sm px-3 py-2",children:[o.jsx("input",{type:"date",className:"bg-transparent border-none text-sm p-1",value:v,onChange:T=>{x(T.target.value)}}),o.jsx("span",{className:"text-gray-400",children:"-"}),o.jsx("input",{type:"date",className:"bg-transparent border-none text-sm p-1",value:w,onChange:T=>b(T.target.value)}),(v||w)&&o.jsx("button",{onClick:()=>{x(""),b("")},className:"text-xs text-red-500 px-2",children:u("clear")})]})]})]}),o.jsx("div",{className:"md:hidden space-y-2",children:S.getRowModel().rows.map(T=>o.jsxs("div",{onClick:()=>e(T.original),className:"bg-white p-4 rounded-xl border shadow-sm active:bg-gray-50 cursor-pointer",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:"font-bold text-gray-900",children:T.original.clientName}),o.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-1",children:[o.jsx(Un,{className:"w-3 h-3"})," ",T.original.phone]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${P(T.original.stage).bg} ${P(T.original.stage).text}`,children:T.original.stage}),o.jsx(ha,{className:"w-4 h-4 text-gray-400"})]})]}),o.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"Quotation"}),o.jsx("span",{className:"text-sm font-bold text-green-600",children:Le(T.original.quotationAmount)})]}),T.original.clientBudget&&o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"Client Budget"}),o.jsx("span",{className:"text-sm font-bold text-blue-600",children:Le(T.original.clientBudget)})]}),o.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[o.jsx(ln,{className:"w-3 h-3"})," ",T.original.inquiryDate]})]})]},T.id))}),o.jsxs("div",{className:"hidden md:block bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-slate-50 border-b border-gray-200",children:S.getHeaderGroups().map(T=>o.jsx("tr",{children:T.headers.map(O=>o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:O.isPlaceholder?null:o.jsxs("div",{className:O.column.getCanSort()?"cursor-pointer select-none flex items-center gap-2":"",onClick:O.column.getToggleSortingHandler(),children:[ty(O.column.columnDef.header,O.getContext()),{asc:o.jsx(ia,{className:"w-4 h-4"}),desc:o.jsx(no,{className:"w-4 h-4"})}[O.column.getIsSorted()]??null]})},O.id))},T.id))}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.getRowModel().rows.map(T=>{const O=s.includes(T.original.id),R=a.includes(T.original.id);return o.jsx("tr",{className:`
                        transition-colors 
                        ${O?"bg-yellow-50 hover:bg-yellow-100 border-l-4 border-l-yellow-400":""}
                        ${R?"opacity-60 hover:opacity-100":"hover:bg-slate-50"}
                    `,children:T.getVisibleCells().map(M=>o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:ty(M.column.columnDef.cell,M.getContext())},M.id))},T.id)})})]})}),o.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex flex-col sm:flex-row items-center justify-between gap-4 bg-slate-50",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm text-gray-600",children:u("show")}),o.jsx("select",{value:S.getState().pagination.pageSize,onChange:T=>{S.setPageSize(Number(T.target.value))},className:"border border-gray-200 rounded-lg px-3 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[10,20,50].map(T=>o.jsx("option",{value:T,children:T},T))}),o.jsx("span",{className:"text-sm text-gray-600",children:u("perPage")})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:[u("page")," ",o.jsx("span",{className:"font-semibold text-gray-900",children:S.getState().pagination.pageIndex+1})," ",u("of")," ",o.jsx("span",{className:"font-semibold text-gray-900",children:S.getPageCount()}),"  ",o.jsxs("span",{className:"text-gray-500",children:[S.getFilteredRowModel().rows.length," ",u("results")]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>S.setPageIndex(0),disabled:!S.getCanPreviousPage(),className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"First page",children:o.jsx(G_,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>S.previousPage(),disabled:!S.getCanPreviousPage(),className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Previous page",children:o.jsx(wy,{className:"w-4 h-4"})}),o.jsx("div",{className:"hidden sm:flex items-center gap-1 mx-2",children:Array.from({length:Math.min(5,S.getPageCount())},(T,O)=>{const R=S.getState().pagination.pageIndex,M=S.getPageCount();let D;return M<=5||R<=2?D=O:R>=M-3?D=M-5+O:D=R-2+O,o.jsx("button",{onClick:()=>S.setPageIndex(D),className:`w-9 h-9 rounded-lg text-sm font-medium transition-colors ${R===D?"bg-blue-600 text-white":"border border-gray-200 hover:bg-gray-50 text-gray-700"}`,children:D+1},D)})}),o.jsx("button",{onClick:()=>S.nextPage(),disabled:!S.getCanNextPage(),className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Next page",children:o.jsx(ha,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>S.setPageIndex(S.getPageCount()-1),disabled:!S.getCanNextPage(),className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Last page",children:o.jsx(H_,{className:"w-4 h-4"})})]})]})]}),o.jsx(lRe,{progress:l,onClose:c})]})}function uRe({contacts:t,loading:e,onAddContact:n,onUpdateContact:r,onDeleteContact:i,onDeleteAllContacts:s,searchContacts:a,loadMore:l,hasMore:c}){const[u,d]=z_(),f=u.get("modal")==="new-contact",h=u.get("contactId"),m=u.get("modal")==="edit-contact",y=k.useMemo(()=>!m||!h?null:t.find(_=>_.id==h)||null,[t,h,m]),g=_=>{d(P=>{const T=new URLSearchParams(P);return _?T.set("modal","new-contact"):T.get("modal")==="new-contact"&&T.delete("modal"),T})},v=_=>{d(P=>{const T=new URLSearchParams(P);return _?(T.set("modal","edit-contact"),T.set("contactId",_.id)):(T.get("modal")==="edit-contact"&&T.delete("modal"),T.delete("contactId")),T})},[x,w]=k.useState(""),[b,N]=k.useState([]),A=k.useMemo(()=>[{id:"name",accessorFn:_=>`${_.firstName} ${_.lastName||""}`.trim(),header:"Name",cell:({row:_})=>o.jsxs("button",{onClick:()=>v(_.original),className:"font-semibold text-blue-600 hover:text-blue-800 hover:underline text-left",children:[_.original.firstName," ",_.original.lastName||""]})},{accessorKey:"phone",header:"Phone",cell:({getValue:_})=>o.jsx("span",{className:"font-mono text-gray-600",children:_()})},{accessorKey:"email",header:"Email",cell:({getValue:_})=>o.jsx("span",{className:"text-gray-500 truncate max-w-[200px] block",children:_()||"-"})},{accessorKey:"createdAt",header:"Created",cell:({getValue:_})=>{const P=_();return P?new Date(P).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"-"}},{id:"actions",header:"Actions",cell:({row:_})=>o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>window.open(Ao(_.original.phone),"_blank"),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"WhatsApp",children:o.jsx(ur,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>i&&i(_.original.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:o.jsx(ai,{className:"w-4 h-4"})})]}),enableSorting:!1}],[i]),E=l3({data:t,columns:A,state:{globalFilter:x,sorting:b},onGlobalFilterChange:w,onSortingChange:N,getCoreRowModel:i3(),getSortedRowModel:o3(),getFilteredRowModel:s3(),getPaginationRowModel:a3(),initialState:{pagination:{pageSize:10}}}),C=async _=>{await n(_),g(!1)},S=async _=>{y&&y.id&&await r(y.id,_),v(null)};return o.jsxs("div",{className:"space-y-4 animate-fade-in",children:[f&&o.jsx(D1,{onClose:()=>g(!1),onSave:C}),y&&o.jsx(D1,{onClose:()=>v(null),onSave:S,initialData:y}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 bg-white p-4 md:p-5 rounded-xl border border-gray-200 shadow-sm",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Contacts Directory"}),o.jsxs("p",{className:"text-sm text-gray-500",children:[t.length," total contacts"]})]}),o.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[o.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[o.jsx(_a,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{className:"w-full sm:w-64 pl-10 pr-4 py-2.5 bg-slate-50 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Search contacts...",value:x??"",onChange:_=>w(_.target.value)})]}),L.useEffect(()=>{const _=setTimeout(()=>{a&&a(x)},500);return()=>clearTimeout(_)},[x,a])]}),s&&o.jsxs("button",{onClick:s,className:"bg-red-600 text-white px-4 py-2.5 rounded-lg text-sm font-semibold flex items-center gap-2 hover:bg-red-700 transition-colors whitespace-nowrap",children:[o.jsx(ai,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Delete All"})]}),o.jsxs("button",{onClick:()=>g(!0),className:"bg-blue-600 text-white px-4 py-2.5 rounded-lg text-sm font-semibold flex items-center gap-2 hover:bg-blue-700 transition-colors whitespace-nowrap",children:[o.jsx(km,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Add Contact"})]})]}),o.jsxs("div",{className:`md:hidden space-y-2 ${e?"opacity-70 pointer-events-none":""}`,children:[e&&t.length===0?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx(Ut,{className:"w-6 h-6 animate-spin text-blue-600"})}):E.getRowModel().rows.map(_=>o.jsx("div",{onClick:()=>v(_.original),className:"bg-white p-4 rounded-xl border shadow-sm active:bg-gray-50 cursor-pointer",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsxs("p",{className:"font-bold text-gray-900",children:[_.original.firstName," ",_.original.lastName]}),o.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-1",children:[o.jsx(Un,{className:"w-3 h-3"})," ",_.original.phone]}),_.original.email&&o.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1 mt-0.5 truncate",children:[o.jsx(Wd,{className:"w-3 h-3"})," ",_.original.email]})]}),o.jsx("a",{href:Ao(_.original.phone),target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-green-100 text-green-600 rounded-full",onClick:P=>P.stopPropagation(),children:o.jsx(ur,{className:"w-5 h-5"})})]})},_.id)),!e&&E.getRowModel().rows.length===0&&o.jsx("div",{className:"text-center py-8 text-gray-400",children:"No contacts found"})]}),o.jsxs("div",{className:`hidden md:block bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden ${e?"opacity-70 pointer-events-none":""}`,children:[e&&t.length===0?o.jsx("div",{className:"flex items-center justify-center py-16",children:o.jsx(Ut,{className:"w-8 h-8 animate-spin text-blue-600"})}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-gradient-to-r from-slate-50 to-gray-50 border-b border-gray-200",children:E.getHeaderGroups().map(_=>o.jsx("tr",{children:_.headers.map(P=>o.jsx("th",{className:`px-5 py-4 text-left font-semibold text-gray-600 ${P.column.getCanSort()?"cursor-pointer select-none hover:bg-gray-100 transition-colors":""}`,onClick:P.column.getToggleSortingHandler(),children:o.jsxs("div",{className:"flex items-center gap-2",children:[ty(P.column.columnDef.header,P.getContext()),P.column.getCanSort()&&o.jsx("span",{className:"text-gray-400",children:P.column.getIsSorted()==="asc"?o.jsx(ia,{className:"w-4 h-4"}):P.column.getIsSorted()==="desc"?o.jsx(no,{className:"w-4 h-4"}):o.jsx("div",{className:"w-4 h-4 opacity-0 group-hover:opacity-50",children:o.jsx(ia,{className:"w-4 h-4"})})})]})},P.id))},_.id))}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:E.getRowModel().rows.map(_=>o.jsx("tr",{className:"hover:bg-blue-50/50 transition-colors",children:_.getVisibleCells().map(P=>o.jsx("td",{className:"px-5 py-4",children:ty(P.column.columnDef.cell,P.getContext())},P.id))},_.id))})]})}),!e&&E.getRowModel().rows.length===0&&o.jsxs("div",{className:"text-center py-16 text-gray-400",children:[o.jsx(km,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-lg font-medium",children:"No contacts found"}),o.jsx("p",{className:"text-sm mt-1",children:"Add your first contact to get started"})]})]}),t.length>0&&o.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Show"}),o.jsx("select",{value:E.getState().pagination.pageSize,onChange:_=>E.setPageSize(Number(_.target.value)),className:"border border-gray-200 rounded-lg px-3 py-2 text-sm bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[10,20,50].map(_=>o.jsx("option",{value:_,children:_},_))}),o.jsx("span",{className:"text-sm text-gray-600",children:"per page"})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Page"," ",o.jsx("span",{className:"font-semibold text-gray-900",children:E.getState().pagination.pageIndex+1})," ","of"," ",o.jsx("span",{className:"font-semibold text-gray-900",children:E.getPageCount()}),"  ",o.jsxs("span",{className:"text-gray-500",children:[E.getFilteredRowModel().rows.length," results"]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>E.setPageIndex(0),disabled:!E.getCanPreviousPage(),className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"First page",children:o.jsx(G_,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>E.previousPage(),disabled:!E.getCanPreviousPage(),className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Previous page",children:o.jsx(wy,{className:"w-4 h-4"})}),o.jsx("div",{className:"hidden sm:flex items-center gap-1 mx-2",children:Array.from({length:Math.min(5,E.getPageCount())},(_,P)=>{const T=E.getState().pagination.pageIndex,O=E.getPageCount();let R;return O<=5||T<=2?R=P:T>=O-3?R=O-5+P:R=T-2+P,o.jsx("button",{onClick:()=>E.setPageIndex(R),className:`w-9 h-9 rounded-lg text-sm font-medium transition-colors ${T===R?"bg-blue-600 text-white":"border border-gray-200 hover:bg-gray-50 text-gray-700"}`,children:R+1},R)})}),o.jsx("button",{onClick:()=>E.nextPage(),disabled:!E.getCanNextPage(),className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Next page",children:o.jsx(ha,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>E.setPageIndex(E.getPageCount()-1),disabled:!E.getCanNextPage(),className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Last page",children:o.jsx(H_,{className:"w-4 h-4"})})]})]})]})}function dRe({sources:t,leads:e=[],onAdd:n,onUpdate:r,onDelete:i,onSourceClick:s}){const[a,l]=k.useState(""),[c,u]=k.useState(!1),[d,f]=k.useState(null),[h,m]=k.useState(""),y=async()=>{a.trim()&&(u(!0),await n(a),l(""),u(!1))},g=N=>{f(N.id),m(N.name)},v=()=>{f(null),m("")},x=async N=>{h.trim()&&(await r(N,h.trim()),f(null),m(""))},w=k.useMemo(()=>{const N={};return t.forEach(A=>{const E=e.filter(S=>S.source===A.name),C=E.filter(S=>S.stage==="Booked").length;N[A.id]={total:E.length,booked:C,conversionRate:E.length>0?C/E.length*100:0}}),N},[t,e]),b=N=>{s&&!d&&s(N)};return o.jsxs("div",{className:"space-y-4 md:space-y-6 max-w-2xl mx-auto",children:[o.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-xl border shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(jm,{className:"w-5 h-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"font-bold text-gray-900",children:"Manage Sources"}),o.jsxs("p",{className:"text-xs text-gray-500",children:[t.length," lead sources"]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border p-2 md:p-3 rounded-lg text-sm",value:a,onChange:N=>l(N.target.value),placeholder:"New Source Name",onKeyDown:N=>N.key==="Enter"&&y()}),o.jsxs("button",{onClick:y,disabled:c,className:"bg-blue-600 text-white px-4 md:px-6 rounded-lg hover:bg-blue-700 flex items-center gap-2 text-sm font-medium",children:[c?o.jsx(Ut,{className:"animate-spin w-4 h-4"}):o.jsx(ro,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Add"})]})]})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:t.map(N=>{const A=w[N.id]||{total:0,booked:0,conversionRate:0};return o.jsx("div",{onClick:()=>b(N),className:`p-3 md:p-4 rounded-xl border shadow-sm transition-all ${N.isIntegration?"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200":"bg-white"} ${d?"":"cursor-pointer hover:shadow-md hover:border-blue-300"}`,children:d===N.id&&!N.isIntegration?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{className:"flex-1 border p-2 rounded-lg text-sm font-medium",value:h,onChange:E=>m(E.target.value),onKeyDown:E=>{E.key==="Enter"&&x(N.id),E.key==="Escape"&&v()},onClick:E=>E.stopPropagation(),autoFocus:!0}),o.jsx("button",{onClick:E=>{E.stopPropagation(),x(N.id)},className:"p-2 text-green-600 hover:bg-green-50 rounded-lg flex-shrink-0",children:o.jsx(W_,{className:"w-4 h-4"})}),o.jsx("button",{onClick:E=>{E.stopPropagation(),v()},className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg flex-shrink-0",children:o.jsx(Ft,{className:"w-4 h-4"})})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[N.isIntegration&&o.jsx(Gd,{className:"w-4 h-4 text-blue-500 flex-shrink-0"}),o.jsx("span",{className:"font-bold text-sm md:text-base truncate",children:N.name}),N.isIntegration&&o.jsx("span",{className:"text-[10px] bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded font-medium flex-shrink-0",children:"INTEGRATION"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[N.isIntegration?o.jsx("div",{className:"p-1.5 text-gray-400 flex-shrink-0",title:"Integration sources cannot be modified",children:o.jsx(za,{className:"w-4 h-4"})}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:E=>{E.stopPropagation(),g(N)},className:"p-1.5 text-blue-500 hover:bg-blue-50 rounded-lg flex-shrink-0",children:o.jsx(JB,{className:"w-4 h-4"})}),o.jsx("button",{onClick:E=>{E.stopPropagation(),i(N.id)},className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg flex-shrink-0",children:o.jsx(ai,{className:"w-4 h-4"})})]}),o.jsx(ha,{className:"w-4 h-4 text-gray-400 ml-1"})]})]}),o.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[o.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[o.jsx(jr,{className:"w-3 h-3"}),o.jsx("span",{className:"font-medium",children:A.total}),o.jsx("span",{children:"leads"})]}),o.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[o.jsx(Yl,{className:"w-3 h-3"}),o.jsx("span",{className:"font-medium",children:A.booked}),o.jsx("span",{children:"booked"})]}),A.total>0&&o.jsxs("div",{className:`font-medium ${A.conversionRate>=5?"text-green-600":A.conversionRate>=2?"text-yellow-600":"text-gray-400"}`,children:[A.conversionRate.toFixed(1),"%"]})]})]})},N.id)})}),t.length===0&&o.jsx("div",{className:"text-center py-8 text-gray-400",children:"No sources yet. Add your first lead source above."})]})}function fRe({leads:t,currentUser:e,onSelectLead:n,onStageChange:r,onAddNote:i}){var O,R;const[s,a]=k.useState(null),[l,c]=k.useState(""),[u,d]=k.useState([]),[f,h]=k.useState(!1),[m,y]=k.useState("all"),[g,v]=k.useState(!1),[x,w]=k.useState(!1),b=k.useRef(null),{language:N,t:A,isRTL:E}=Zr(),C=k.useMemo(()=>{let M=t.filter(D=>D.manager===(e==null?void 0:e.name));if(m==="new")M=M.filter(D=>D.stage==="New");else if(m==="followup"){const D=new Date().toISOString().split("T")[0];M=M.filter(B=>B.followUpDate===D)}else m==="sitevisit"&&(M=M.filter(D=>D.stage==="Site Visit Scheduled"));return M.sort((D,B)=>{var V,F,q,H;return new Date(((F=(V=B.createdAt)==null?void 0:V.toDate)==null?void 0:F.call(V))||0)-new Date(((H=(q=D.createdAt)==null?void 0:q.toDate)==null?void 0:H.call(q))||0)})},[t,e,m]),S=C.find(M=>M.id===s),_=k.useMemo(()=>{const M=t.filter(D=>D.manager===(e==null?void 0:e.name));return{total:M.length,new:M.filter(D=>D.stage==="New").length,siteVisits:M.filter(D=>D.stage==="Site Visit Scheduled").length,booked:M.filter(D=>D.stage==="Booked").length}},[t,e]),P=async()=>{if(!l.trim())return;const M=l.trim();c(""),d(B=>[...B,{role:"user",content:M}]),h(!0);const D=await Wse(M,e,N);d(B=>[...B,{role:"assistant",content:D}]),h(!1),setTimeout(()=>{var B;(B=b.current)==null||B.scrollIntoView({behavior:"smooth"})},100)},T=M=>Wr[M]||Wr.New;return S&&window.innerWidth<768?o.jsxs("div",{className:"h-full flex flex-col bg-white",children:[o.jsxs("div",{className:"p-4 border-b bg-gradient-to-r from-gray-50 to-white flex items-center gap-3",children:[o.jsx("button",{onClick:()=>a(null),className:"p-2 -ml-2 hover:bg-gray-100 rounded-lg",children:o.jsx(q_,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:S.clientName}),o.jsx("p",{className:"text-sm text-gray-500",children:S.phone})]}),o.jsx("a",{href:Ao(S.phone),target:"_blank",rel:"noopener noreferrer",className:"p-3 bg-green-500 text-white rounded-full hover:bg-green-600",children:o.jsx(ur,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"px-4 py-3 border-b overflow-x-auto",children:o.jsx("div",{className:"flex gap-2",children:la.filter(M=>M!=="Lost").map(M=>o.jsx("button",{onClick:()=>r(S.id,M,S.stage),className:`px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-all ${S.stage===M?`${T(M).bg} ${T(M).text} ring-2 ring-offset-1`:"bg-gray-100 text-gray-500"}`,children:M},M))})}),o.jsxs("div",{className:"p-4 grid grid-cols-3 gap-2",children:[o.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[o.jsx("p",{className:"text-[10px] text-blue-600 font-medium",children:A("event")}),o.jsx("p",{className:"font-bold text-blue-900 text-sm truncate",children:S.eventType||"-"})]}),o.jsxs("div",{className:"bg-green-50 p-3 rounded-lg text-center",children:[o.jsx("p",{className:"text-[10px] text-green-600 font-medium",children:A("budget")}),o.jsx("p",{className:"font-bold text-green-900 text-sm truncate",children:S.amount?Le(S.amount):"-"})]}),o.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg text-center",children:[o.jsx("p",{className:"text-[10px] text-purple-600 font-medium",children:A("source")}),S.source?o.jsx("span",{className:"inline-block px-2 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-700 truncate max-w-full",children:S.source}):o.jsx("p",{className:"font-bold text-purple-900 text-sm",children:"-"})]})]}),o.jsxs("div",{className:"px-4 pb-3 flex flex-wrap gap-3 text-sm text-gray-600",children:[S.eventDate&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(ln,{className:"w-4 h-4"})," ",S.eventDate]}),S.guests&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(jr,{className:"w-4 h-4"})," ",S.guests," ",A("guests")]})]}),o.jsxs("div",{className:"flex-1 p-4 overflow-y-auto border-t",children:[o.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-3",children:A("notesAndActivity")}),S.notes&&o.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg mb-3 text-sm",children:S.notes}),(O=S.comments)==null?void 0:O.map((M,D)=>o.jsxs("div",{className:"mb-2 p-3 bg-gray-50 rounded-lg text-sm",children:[o.jsx("p",{children:M.text}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[M.author,"  ",new Date(M.timestamp).toLocaleString()]})]},D))]}),o.jsxs("div",{className:"p-4 border-t bg-gray-50 flex gap-2 safe-area-bottom",children:[o.jsx("button",{onClick:()=>n(S),className:"flex-1 py-3 bg-blue-600 text-white rounded-xl text-sm font-medium",children:A("viewDetails")}),o.jsx("button",{onClick:()=>{S.stage!=="Lost"&&(r(S.id,"Lost",S.stage),a(null))},className:"px-6 py-3 bg-red-100 text-red-600 rounded-xl text-sm font-medium",children:A("lost")})]})]}):o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white p-4 rounded-xl mb-4",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsxs("h1",{className:"text-lg md:text-xl font-bold truncate",children:[A("welcome")," ",e==null?void 0:e.name]}),o.jsx("p",{className:"text-emerald-100 text-xs md:text-sm mt-1",children:A("yourLeadsAndMessages")})]}),o.jsx("button",{onClick:()=>v(!0),className:"md:hidden p-2 bg-white/20 hover:bg-white/30 rounded-lg",children:o.jsx(ir,{className:"w-4 h-4"})})]})}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-3 mb-4",children:[o.jsxs("div",{onClick:()=>y("all"),className:`p-3 rounded-xl cursor-pointer transition-all ${m==="all"?"bg-blue-600 text-white":"bg-white border hover:border-blue-300"}`,children:[o.jsx("p",{className:"text-xl md:text-2xl font-bold",children:_.total}),o.jsx("p",{className:"text-xs opacity-80",children:A("totalLeads")})]}),o.jsxs("div",{onClick:()=>y("new"),className:`p-3 rounded-xl cursor-pointer transition-all ${m==="new"?"bg-green-600 text-white":"bg-white border hover:border-green-300"}`,children:[o.jsx("p",{className:"text-xl md:text-2xl font-bold",children:_.new}),o.jsx("p",{className:"text-xs opacity-80",children:A("new")})]}),o.jsxs("div",{onClick:()=>y("sitevisit"),className:`p-3 rounded-xl cursor-pointer transition-all ${m==="sitevisit"?"bg-purple-600 text-white":"bg-white border hover:border-purple-300"}`,children:[o.jsx("p",{className:"text-xl md:text-2xl font-bold",children:_.siteVisits}),o.jsx("p",{className:"text-xs opacity-80",children:A("siteVisit")})]}),o.jsxs("div",{className:"p-3 rounded-xl bg-white border",children:[o.jsx("p",{className:"text-xl md:text-2xl font-bold text-green-600",children:_.booked}),o.jsx("p",{className:"text-xs text-gray-500",children:A("booked")})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-4 min-h-0",children:[o.jsxs("div",{className:"flex-1 md:w-1/3 md:flex-none bg-white rounded-xl border shadow-sm flex flex-col min-h-0",children:[o.jsx("div",{className:"p-3 border-b bg-gray-50",children:o.jsxs("h2",{className:"font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(ur,{className:"w-4 h-4"})," ",A("inbox")]})}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:C.length===0?o.jsxs("div",{className:"p-8 text-center text-gray-400",children:[o.jsx(jr,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),o.jsx("p",{children:A("noLeads")})]}):C.map(M=>o.jsxs("div",{onClick:()=>a(M.id),className:`p-4 border-b cursor-pointer hover:bg-gray-50 transition-colors active:bg-gray-100 ${s===M.id?"bg-blue-50 border-l-4 border-l-blue-500":""}`,children:[o.jsxs("div",{className:"flex justify-between items-start gap-2",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:"font-bold text-gray-900 truncate",children:M.clientName}),o.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-1",children:[o.jsx(Un,{className:"w-3 h-3 flex-shrink-0"})," ",M.phone]})]}),o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold flex-shrink-0 ${T(M.stage).bg} ${T(M.stage).text}`,children:M.stage})]}),M.eventDate&&o.jsxs("p",{className:"text-xs text-gray-400 mt-2 flex items-center gap-1",children:[o.jsx(ln,{className:"w-3 h-3"})," ",M.eventDate]})]},M.id))})]}),o.jsx("div",{className:"hidden md:flex flex-1 bg-white rounded-xl border shadow-sm flex-col",children:S?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-4 border-b bg-gradient-to-r from-gray-50 to-white",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:S.clientName}),o.jsxs("div",{className:"flex gap-3 mt-1 text-sm text-gray-500",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Un,{className:"w-3 h-3"})," ",S.phone]}),S.eventDate&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(ln,{className:"w-3 h-3"})," ",S.eventDate]}),S.guests&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(jr,{className:"w-3 h-3"})," ",S.guests," ",A("guests")]})]})]}),o.jsx("a",{href:Ao(S.phone),target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-green-500 text-white rounded-full hover:bg-green-600",children:o.jsx(ur,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"flex gap-1 mt-3 overflow-x-auto pb-1",children:la.filter(M=>M!=="Lost").map(M=>o.jsx("button",{onClick:()=>r(S.id,M,S.stage),className:`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap transition-all ${S.stage===M?`${T(M).bg} ${T(M).text} ring-2 ring-offset-1 ${T(M).border}`:"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:M},M))})]}),o.jsxs("div",{className:"p-4 border-b grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[o.jsx("p",{className:"text-xs text-blue-600 font-medium",children:A("event")}),o.jsx("p",{className:"font-bold text-blue-900",children:S.eventType||"-"})]}),o.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[o.jsx("p",{className:"text-xs text-green-600 font-medium",children:A("budget")}),o.jsx("p",{className:"font-bold text-green-900",children:S.amount?Le(S.amount):"-"})]}),o.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg",children:[o.jsx("p",{className:"text-xs text-purple-600 font-medium",children:A("source")}),S.source?o.jsx("span",{className:"inline-block px-2 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-700",children:S.source}):o.jsx("p",{className:"font-bold text-purple-900",children:"-"})]})]}),o.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[o.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-3",children:A("notesAndActivity")}),S.notes&&o.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg mb-3 text-sm",children:S.notes}),(R=S.comments)==null?void 0:R.map((M,D)=>o.jsxs("div",{className:"mb-2 p-2 bg-gray-50 rounded text-sm",children:[o.jsx("p",{children:M.text}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[M.author,"  ",new Date(M.timestamp).toLocaleString()]})]},D))]}),o.jsxs("div",{className:"p-3 border-t bg-gray-50 flex gap-2",children:[o.jsx("button",{onClick:()=>n(S),className:"flex-1 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",children:A("viewDetails")}),o.jsx("button",{onClick:()=>{S.stage!=="Lost"&&r(S.id,"Lost",S.stage)},className:"px-4 py-2 bg-red-100 text-red-600 rounded-lg text-sm font-medium hover:bg-red-200",children:A("lost")})]})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:o.jsxs("div",{className:"text-center",children:[o.jsx(di,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:A("selectLead")})]})})}),x?o.jsxs("button",{onClick:()=>w(!1),className:"hidden md:flex fixed bottom-6 right-6 items-center gap-2 px-4 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-full shadow-lg hover:shadow-xl hover:scale-105 transition-all z-40",children:[o.jsx(ir,{className:"w-5 h-5 text-yellow-300"}),o.jsx("span",{className:"font-medium",children:A("aiAssistant")}),o.jsx(wy,{className:"w-4 h-4"})]}):o.jsxs("div",{className:"hidden md:flex w-80 bg-gradient-to-b from-indigo-900 to-slate-900 rounded-xl shadow-sm flex-col text-white",children:[o.jsxs("div",{className:"p-4 border-b border-white/10",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h2",{className:"font-bold flex items-center gap-2",children:[o.jsx(ir,{className:"w-4 h-4 text-yellow-400"}),A("aiAssistant")]}),o.jsx("button",{onClick:()=>w(!0),className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",title:"Collapse AI Panel",children:o.jsx(Ft,{className:"w-4 h-4"})})]}),o.jsx("p",{className:"text-xs text-indigo-300 mt-1",children:A("askInUrdu")})]}),o.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-3",children:[u.length===0?o.jsxs("div",{className:"text-center text-indigo-300 text-sm",children:[o.jsx(ir,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),o.jsx("p",{children:A("example")}),o.jsxs("p",{className:"text-xs mt-2 opacity-70",children:['"',A("showTodayFollowups"),'"']}),o.jsxs("p",{className:"text-xs opacity-70",children:['"',A("whatIsLeadStatus"),'"']}),o.jsxs("p",{className:"text-xs opacity-70",children:['"',A("isDateAvailable"),'"']})]}):u.map((M,D)=>o.jsx("div",{className:`rounded-lg p-3 text-sm leading-relaxed ${M.role==="user"?"bg-indigo-600 ml-8":"bg-white/10 mr-8"}`,children:M.content},D)),f&&o.jsx("div",{className:"bg-white/10 rounded-lg p-3 mr-8",children:o.jsxs("div",{className:"flex gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),o.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),o.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})}),o.jsx("div",{ref:b})]}),o.jsx("div",{className:"p-3 border-t border-white/10",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-sm placeholder-indigo-300 outline-none focus:border-indigo-400",placeholder:A("typeQuestion"),value:l,onChange:M=>c(M.target.value),onKeyDown:M=>M.key==="Enter"&&P(),dir:E?"rtl":"ltr"}),o.jsx("button",{onClick:P,disabled:f,className:"p-2 bg-indigo-600 hover:bg-indigo-500 rounded-lg disabled:opacity-50",children:f?o.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):o.jsx(Tm,{className:"w-5 h-5"})})]})})]})]}),g&&o.jsxs("div",{className:"md:hidden fixed inset-0 z-50 bg-gradient-to-b from-indigo-900 to-slate-900 flex flex-col text-white",children:[o.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:[o.jsxs("h2",{className:"font-bold flex items-center gap-2",children:[o.jsx(ir,{className:"w-4 h-4 text-yellow-400"}),A("aiAssistant")]}),o.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-white/10 rounded-lg",children:o.jsx(Ft,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-3",children:[u.length===0?o.jsxs("div",{className:"text-center text-indigo-300 text-sm py-8",children:[o.jsx(ir,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-lg mb-4",children:A("askInUrdu")}),o.jsxs("p",{className:"text-xs opacity-70",children:['"',A("showTodayFollowups"),'"']}),o.jsxs("p",{className:"text-xs opacity-70",children:['"',A("whatIsLeadStatus"),'"']}),o.jsxs("p",{className:"text-xs opacity-70",children:['"',A("isDateAvailable"),'"']})]}):u.map((M,D)=>o.jsx("div",{className:`rounded-lg p-4 text-sm leading-relaxed ${M.role==="user"?"bg-indigo-600 ml-8":"bg-white/10 mr-8"}`,children:M.content},D)),f&&o.jsx("div",{className:"bg-white/10 rounded-lg p-4 mr-8",children:o.jsxs("div",{className:"flex gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),o.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),o.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),o.jsx("div",{className:"p-4 border-t border-white/10 safe-area-bottom",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-base placeholder-indigo-300 outline-none focus:border-indigo-400",placeholder:A("typeQuestion"),value:l,onChange:M=>c(M.target.value),onKeyDown:M=>M.key==="Enter"&&P(),dir:E?"rtl":"ltr"}),o.jsx("button",{onClick:P,disabled:f,className:"p-3 bg-indigo-600 hover:bg-indigo-500 rounded-xl disabled:opacity-50",children:f?o.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}):o.jsx(Tm,{className:"w-6 h-6"})})]})})]})]})}function hRe({leads:t=[],onShowRevenue:e}){const{t:n,language:r}=Zr(),[i,s]=k.useState(""),[a,l]=k.useState(""),[c,u]=k.useState(!1),[d,f]=k.useState("month"),[h,m]=k.useState(null),[y,g]=k.useState(null),[v,x]=k.useState(null),w=k.useMemo(()=>{const _=new Date,P=r==="ur"?"ur-PK":"en-US";let T,O,R,M,D=[];const B=ie=>{const ce=new Date(ie),$e=ce.getDay(),ve=ce.getDate()-$e+($e===0?-6:1);return new Date(ce.setDate(ve))};switch(d){case"week":T=B(_),T.setHours(0,0,0,0),O=new Date(_),R=new Date(T),R.setDate(T.getDate()-7),M=new Date(T),M.setSeconds(M.getSeconds()-1);for(let $e=0;$e<7;$e++){const ve=new Date(T);if(ve.setDate(ve.getDate()+$e),ve>_)break;D.push({date:ve,name:ve.toLocaleDateString(P,{weekday:"short"})})}break;case"month":T=new Date(_.getFullYear(),_.getMonth(),1),O=new Date(_.getFullYear(),_.getMonth()+1,0),R=new Date(_.getFullYear(),_.getMonth()-1,1),M=new Date(_.getFullYear(),_.getMonth(),0);const ie=O.getDate();for(let $e=1;$e<=ie;$e++){const ve=new Date(_.getFullYear(),_.getMonth(),$e);if(ve>_)break;D.push({date:ve,name:ve.getDate().toString()})}break;case"quarter":const ce=Math.floor(_.getMonth()/3);T=new Date(_.getFullYear(),ce*3,1),O=new Date(_.getFullYear(),(ce+1)*3,0),R=new Date(_.getFullYear(),(ce-1)*3,1),M=new Date(_.getFullYear(),ce*3,0);for(let $e=0;$e<3;$e++){const ve=new Date(_.getFullYear(),ce*3+$e,1);D.push({date:ve,name:ve.toLocaleString(P,{month:"short"})})}break;case"year":T=new Date(_.getFullYear(),0,1),O=new Date(_.getFullYear(),11,31),R=new Date(_.getFullYear()-1,0,1),M=new Date(_.getFullYear()-1,11,31);for(let $e=0;$e<12;$e++){const ve=new Date(_.getFullYear(),$e,1);D.push({date:ve,name:ve.toLocaleString(P,{month:"short"})})}break;default:T=new Date(_.getFullYear(),_.getMonth(),1),R=new Date(_.getFullYear(),_.getMonth()-1,1),D=[]}const V=ie=>{var ce,$e;if(ie.inquiryDate){const ve=new Date(ie.inquiryDate);if(!isNaN(ve.getTime()))return ve.getFullYear()<100&&ve.setFullYear(ve.getFullYear()+2e3),ve;const ot=ie.inquiryDate.match(/(\d{1,2})-(\w{3})-(\d{2})/);if(ot){const[,W,de,xe]=ot,gt=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"].indexOf(de.toLowerCase());if(gt!==-1)return new Date(2e3+parseInt(xe),gt,parseInt(W))}}return(ce=ie.createdAt)!=null&&ce.toDate?ie.createdAt.toDate():($e=ie.createdAt)!=null&&$e.seconds?new Date(ie.createdAt.seconds*1e3):ie.createdAt?new Date(ie.createdAt):null},F=t.filter(ie=>{const ce=V(ie);return ce&&ce>=T&&ce<=new Date(_)}),q=t.filter(ie=>{const ce=V(ie);return ce&&ce>=R&&ce<=M});D=D.map(ie=>{const ce=t.filter(ve=>{const ot=V(ve);return ot?d==="week"||d==="month"?ot.getDate()===ie.date.getDate()&&ot.getMonth()===ie.date.getMonth()&&ot.getFullYear()===ie.date.getFullYear():ot.getMonth()===ie.date.getMonth()&&ot.getFullYear()===ie.date.getFullYear():!1}),$e=ce.filter(ve=>ri(ve.stage));return{name:ie.name,leads:ce.length,booked:$e.length,revenue:$e.reduce((ve,ot)=>ve+At(ot.amount),0)}});const H=F,Z={};H.forEach(ie=>{const ce=ie.source||"Unknown";Z[ce]=(Z[ce]||0)+1});const Y={};Object.keys(Z).forEach(ie=>{const ce=H.filter(ve=>(ve.source||"Unknown")===ie),$e=ce.filter(ve=>ri(ve.stage)).length;Y[ie]=ce.length>0?($e/ce.length*100).toFixed(1):0});const re={"New Lead":"New",Proposal:"Quoted",Won:"Booked",Negotiation:"Negotiating"},z={};la.forEach(ie=>z[ie]=0),H.forEach(ie=>{const ce=re[ie.stage]||ie.stage;z[ce]!==void 0&&z[ce]++});const se={},me={};H.forEach(ie=>{const ce=ie.manager||"Unassigned";se[ce]||(se[ce]={leads:0,booked:0,revenue:0},me[ce]=[]),se[ce].leads++,ri(ie.stage)&&(se[ce].booked++,se[ce].revenue+=At(ie.amount)),ie.responseTimeMinutes>0&&me[ce].push(ie.responseTimeMinutes)}),Object.keys(se).forEach(ie=>{const ce=me[ie]||[];se[ie].avgResponseTime=ce.length>0?Math.round(ce.reduce(($e,ve)=>$e+ve,0)/ce.length):null});const ze=H.filter(ie=>ie.responseTimeMinutes>0).map(ie=>ie.responseTimeMinutes),ct=ze.length>0?Math.round(ze.reduce((ie,ce)=>ie+ce,0)/ze.length):null,ae=F.filter(ie=>ri(ie.stage)).reduce((ie,ce)=>ie+At(ce.amount),0),ye=q.filter(ie=>ri(ie.stage)).reduce((ie,ce)=>ie+At(ce.amount),0),_e=new Date(_.getFullYear(),0,1),Ne=t.filter(ie=>{const ce=V(ie);return ce&&ce>=_e}).filter(ie=>ri(ie.stage)).reduce((ie,ce)=>ie+At(ce.amount),0),Se=F.filter(ie=>ri(ie.stage)),qe=F.length>0?(Se.length/F.length*100).toFixed(1):0,Qe=t.filter(ie=>{var ve,ot,W,de;if(!["New","Contacted"].includes(ie.stage))return!1;const ce=((ot=(ve=ie.lastContactedAt)==null?void 0:ve.toDate)==null?void 0:ot.call(ve))||((de=(W=ie.createdAt)==null?void 0:W.toDate)==null?void 0:de.call(W));return ce?(_-ce)/(1e3*60*60)>24:!1}),St=t.filter(ie=>ie.stage==="Booked"&&ie.paymentStatus==="overdue");return{totalLeads:t.length,periodLeads:F.length,previousPeriodLeads:q.length,leadsBySource:Z,conversionBySource:Y,leadsByStage:z,employeeStats:se,revenueInPeriod:ae,previousRevenue:ye,ytdRevenue:Ne,conversionRate:qe,trendData:D,staleLeads:Qe,overduePayments:St,avgResponseTime:ct,revenueGrowth:ye>0?((ae-ye)/ye*100).toFixed(1):0}},[t,d]),b=async()=>{if(!i.trim())return;u(!0);const _=await UD(i);l(_),u(!1)},N=Object.entries(w.leadsBySource).map(([_,P])=>({name:_,value:P})).sort((_,P)=>P.value-_.value).slice(0,6);la.filter(_=>_!=="Lost").map((_,P)=>({name:_,value:w.leadsByStage[_]||0,fill:Ps[P%Ps.length]}));const A=Object.entries(w.employeeStats).map(([_,P])=>({name:_.split(" ")[0],leads:P.leads,booked:P.booked,revenue:P.revenue,conversion:P.leads>0?(P.booked/P.leads*100).toFixed(0):0,avgResponseTime:P.avgResponseTime})).sort((_,P)=>P.revenue-_.revenue),E=()=>{const _=new Date,P=new Date(_.getFullYear(),_.getMonth(),1);switch(h){case"leads":return t.filter(O=>{var M,D;return(((D=(M=O.createdAt)==null?void 0:M.toDate)==null?void 0:D.call(M))||new Date(O.inquiryDate))>=P});case"conversion":return t.filter(O=>ri(O.stage));case"stale":return w.staleLeads;case"ytd":const T=new Date(_.getFullYear(),0,1);return t.filter(O=>{var M,D;return(((D=(M=O.createdAt)==null?void 0:M.toDate)==null?void 0:D.call(M))||new Date(O.inquiryDate))>=T&&ri(O.stage)});case"source":return y?t.filter(O=>(O.source||"Unknown")===y):[];case"funnel":return v?t.filter(O=>O.stage===v):[];default:return[]}},C=()=>{switch(h){case"leads":return`${n("leadsThisMonth")} (${w.periodLeads})`;case"conversion":return`${n("bookedLeads")} (${w.conversionRate}% ${n("conversionRate").toLowerCase()})`;case"stale":return`${n("staleLeads")} (${w.staleLeads.length})`;case"ytd":return`${n("revenueYtd")} - ${Le(w.ytdRevenue)}`;case"source":return`${n("source")}: ${y}`;case"funnel":return`${n("stage")}: ${v}`;default:return""}},S=()=>{if(!h)return null;const _=E();return o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b bg-gray-50 flex justify-between items-center",children:[o.jsx("h3",{className:"font-bold text-gray-900",children:C()}),o.jsx("button",{onClick:()=>{m(null),g(null),x(null)},className:"p-2 hover:bg-gray-200 rounded-lg",children:o.jsx(Ft,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"overflow-y-auto max-h-[60vh]",children:_.length===0?o.jsx("div",{className:"p-8 text-center text-gray-400",children:n("noBookingsFound").replace("bookings","leads")}):o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50 sticky top-0",children:o.jsxs("tr",{className:"text-left text-gray-500",children:[o.jsx("th",{className:"px-4 py-3",children:n("client")}),o.jsx("th",{className:"px-4 py-3",children:n("stage")}),o.jsx("th",{className:"px-4 py-3 hidden sm:table-cell",children:n("source")}),o.jsx("th",{className:"px-4 py-3 text-right",children:n("amount")}),o.jsx("th",{className:"px-4 py-3",children:n("actions")})]})}),o.jsx("tbody",{className:"divide-y",children:_.map(P=>{var T,O;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"px-4 py-3",children:[o.jsx("div",{className:"font-medium text-gray-900",children:P.clientName}),o.jsx("div",{className:"text-xs text-gray-500",children:P.phone})]}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${((T=Wr[P.stage])==null?void 0:T.bg)||"bg-gray-100"} ${((O=Wr[P.stage])==null?void 0:O.text)||"text-gray-600"}`,children:P.stage})}),o.jsx("td",{className:"px-4 py-3 hidden sm:table-cell",children:P.source?o.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-700",children:P.source}):o.jsx("span",{className:"text-gray-400",children:"-"})}),o.jsx("td",{className:"px-4 py-3 text-right font-medium",children:Le(P.amount)}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("a",{href:Ao(P.phone),target:"_blank",rel:"noopener noreferrer",className:"p-2 text-green-600 hover:bg-green-50 rounded-lg inline-block",children:o.jsx(ur,{className:"w-4 h-4"})})})]},P.id)})})]})}),o.jsxs("div",{className:"p-4 border-t bg-gray-50 text-sm text-gray-500",children:[_.length," ",n("leads"),"  ",n("total"),": ",Le(_.reduce((P,T)=>P+At(T.amount),0))]})]})})};return o.jsxs("div",{className:"space-y-4 md:space-y-6",children:[o.jsx(S,{}),o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600",children:n("ownerDashboard")}),o.jsxs("p",{className:"text-gray-500 mt-1",children:[n("welcomeBack"),", ",o.jsx("span",{className:"font-semibold text-gray-900",children:"Admin"})]})]}),o.jsxs("div",{className:"flex bg-white rounded-xl shadow-sm border p-1",children:[o.jsx("button",{onClick:()=>f("week"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${d==="week"?"bg-blue-600 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"Week"}),o.jsx("button",{onClick:()=>f("month"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${d==="month"?"bg-blue-600 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"Month"}),o.jsx("button",{onClick:()=>f("quarter"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${d==="quarter"?"bg-blue-600 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"Quarter"}),o.jsx("button",{onClick:()=>f("year"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${d==="year"?"bg-blue-600 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"Year"})]})]}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:n("quickStats")}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[o.jsxs("div",{onClick:()=>e&&e(),className:"bg-white p-4 rounded-2xl border shadow-sm hover:shadow-md transition-all cursor-pointer group relative overflow-hidden",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("div",{className:"p-2 bg-green-100 text-green-600 rounded-xl group-hover:scale-110 transition-transform",children:o.jsx($o,{className:"w-5 h-5"})}),o.jsxs("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded-full flex items-center gap-0.5 ${parseFloat(w.revenueGrowth)>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[parseFloat(w.revenueGrowth)>=0?o.jsx(DB,{className:"w-2.5 h-2.5"}):o.jsx($B,{className:"w-2.5 h-2.5"}),Math.abs(w.revenueGrowth),"%"]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 font-medium truncate",children:n("revenue")}),o.jsx("h3",{className:"text-lg font-bold text-gray-900 mt-1 truncate",children:Le(w.revenueInPeriod)})]})]}),o.jsxs("div",{className:"bg-white p-4 rounded-2xl border shadow-sm",children:[o.jsx("div",{className:"flex justify-between items-start mb-4",children:o.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-xl",children:o.jsx(Qr,{className:"w-5 h-5"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 font-medium truncate",children:n("booked")}),o.jsx("h3",{className:"text-lg font-bold text-gray-900 mt-1",children:w.periodLeads>0?w.trendData.reduce((_,P)=>_+P.booked,0):0})]})]}),o.jsxs("div",{onClick:()=>m("leads"),className:"bg-white p-4 rounded-2xl border shadow-sm cursor-pointer hover:shadow-md transition-all",children:[o.jsx("div",{className:"flex justify-between items-start mb-4",children:o.jsx("div",{className:"p-2 bg-amber-100 text-amber-600 rounded-xl",children:o.jsx(jr,{className:"w-5 h-5"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 font-medium truncate",children:n("activeLeads")}),o.jsx("h3",{className:"text-lg font-bold text-gray-900 mt-1",children:w.periodLeads})]})]}),o.jsxs("div",{className:"bg-white p-4 rounded-2xl border shadow-sm",children:[o.jsx("div",{className:"flex justify-between items-start mb-4",children:o.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-xl",children:o.jsx(iU,{className:"w-5 h-5"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 font-medium truncate",children:n("conversionRate")}),o.jsxs("h3",{className:"text-lg font-bold text-gray-900 mt-1",children:[w.conversionRate,"%"]})]})]}),o.jsxs("div",{className:"bg-white p-4 rounded-2xl border shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:()=>m("ytd"),children:[o.jsx("div",{className:"flex justify-between items-start mb-4",children:o.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-600 rounded-xl",children:o.jsx(Yl,{className:"w-5 h-5"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 font-medium truncate",children:n("revenueYtd")}),o.jsx("h3",{className:"text-lg font-bold text-gray-900 mt-1 truncate",children:Le(w.ytdRevenue)})]})]}),o.jsxs("div",{className:"bg-white p-4 rounded-2xl border shadow-sm",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("div",{className:"p-2 bg-cyan-100 text-cyan-600 rounded-xl",children:o.jsx(sU,{className:"w-5 h-5"})}),w.avgResponseTime!==null&&o.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded-full ${w.avgResponseTime<=30?"bg-green-100 text-green-700":w.avgResponseTime<=120?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:w.avgResponseTime<=30?n("excellent"):w.avgResponseTime<=120?n("good"):n("needsImprovement")})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 font-medium truncate",children:n("avgResponseTime")}),o.jsx("h3",{className:"text-lg font-bold text-gray-900 mt-1",children:w.avgResponseTime!==null?w.avgResponseTime<60?`${w.avgResponseTime}m`:`${Math.round(w.avgResponseTime/60)}h`:""})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"lg:col-span-2 bg-white p-4 md:p-5 rounded-xl border shadow-sm",children:[o.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2 text-sm md:text-base",children:[o.jsx(ER,{className:"w-4 h-4"})," ",n("revenueLeadsTrend")]}),o.jsx("div",{className:"h-48 md:h-64",children:o.jsx(fg,{width:"100%",height:"100%",children:o.jsxs(W5,{data:w.trendData,children:[o.jsx(E5,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),o.jsx(Io,{dataKey:"name",tick:{fontSize:10}}),o.jsx(jc,{yAxisId:"left",tick:{fontSize:10},width:30}),o.jsx(jc,{yAxisId:"right",orientation:"right",tick:{fontSize:10},width:40}),o.jsx(rr,{formatter:(_,P)=>P==="Revenue"?[`${Le(_)}`,n("revenue")]:[`${_.toLocaleString()} ${n("leads").toLowerCase()}`,n("leads")]}),o.jsx(ao,{wrapperStyle:{fontSize:"12px"}}),o.jsx(Si,{yAxisId:"right",type:"monotone",dataKey:"revenue",stroke:"#10B981",fill:"#10B981",fillOpacity:.1,name:n("revenue")}),o.jsx(Si,{yAxisId:"left",type:"monotone",dataKey:"leads",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.1,name:n("leads")})]})})})]}),o.jsxs("div",{className:"bg-white p-4 md:p-5 rounded-xl border shadow-sm",children:[o.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2 text-sm md:text-base",children:[o.jsx(tU,{className:"w-4 h-4"})," ",n("trafficSources")]}),o.jsx("div",{className:"h-36 md:h-48",children:o.jsx(fg,{width:"100%",height:"100%",children:o.jsxs(KIe,{children:[o.jsx(Ss,{data:N,cx:"50%",cy:"50%",innerRadius:35,outerRadius:55,paddingAngle:2,dataKey:"value",children:N.map((_,P)=>o.jsx(pv,{fill:Ps[P%Ps.length]},`cell-${P}`))}),o.jsx(rr,{formatter:(_,P)=>[`${_.toLocaleString()} ${n("leads").toLowerCase()}`,P]})]})})}),o.jsx("div",{className:"mt-2 grid grid-cols-2 gap-x-2 gap-y-1 text-[10px] md:text-xs",children:N.map((_,P)=>o.jsxs("div",{className:"flex items-center gap-1 truncate cursor-pointer hover:bg-gray-100 p-1 rounded",onClick:()=>{g(_.name),m("source")},children:[o.jsx("span",{className:"w-2 h-2 md:w-3 md:h-3 rounded-full flex-shrink-0",style:{backgroundColor:Ps[P%Ps.length]}}),o.jsx("span",{className:"truncate text-gray-600",children:_.name==="Unknown"?n("unknownSource"):_.name}),o.jsxs("span",{className:"font-bold text-gray-800 ml-auto",children:[(_.value/w.totalLeads*100).toFixed(0),"%"]})]},_.name))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"bg-white p-4 md:p-5 rounded-xl border shadow-sm",children:[o.jsx("h3",{className:"font-bold text-gray-800 mb-4 text-sm md:text-base",children:n("leadConversionFunnel")}),o.jsx("div",{className:"space-y-2",children:la.filter(_=>_!=="Lost").map((_,P)=>{const T=w.leadsByStage[_]||0,O=Math.max(...Object.values(w.leadsByStage)),R=O>0?T/O*100:0,M=Wr[_];return o.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80",onClick:()=>{x(_),m("funnel")},children:[o.jsx("div",{className:"w-16 md:w-24 text-[10px] md:text-xs text-gray-600 truncate",children:_}),o.jsx("div",{className:"flex-1 bg-gray-100 rounded-full h-5 md:h-6 overflow-hidden",children:o.jsx("div",{className:`h-full ${M.bg} flex items-center justify-end pr-2`,style:{width:`${Math.max(R,10)}%`},children:o.jsx("span",{className:`text-[10px] md:text-xs font-bold ${M.text}`,children:T})})})]},_)})})]}),o.jsxs("div",{className:"lg:col-span-2 bg-white p-4 md:p-5 rounded-xl border shadow-sm",children:[o.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2 text-sm md:text-base",children:[o.jsx(TR,{className:"w-4 h-4"})," ",n("topPerformingEmployees")]}),o.jsx("div",{className:"overflow-x-auto -mx-4 md:mx-0",children:o.jsxs("table",{className:"w-full text-xs md:text-sm min-w-[500px]",children:[o.jsx("thead",{className:"text-left text-gray-500 border-b",children:o.jsxs("tr",{children:[o.jsx("th",{className:"pb-2 pl-4 md:pl-0",children:n("name")}),o.jsx("th",{className:"pb-2 text-center",children:n("leads")}),o.jsx("th",{className:"pb-2 text-center",children:n("booked")}),o.jsx("th",{className:"pb-2 text-center",children:n("convRateAbbr")}),o.jsx("th",{className:"pb-2 text-center",children:n("respTimeAbbr")}),o.jsx("th",{className:"pb-2 text-right pr-4 md:pr-0",children:n("revenue")})]})}),o.jsx("tbody",{className:"divide-y",children:A.slice(0,5).map((_,P)=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"py-2 pl-4 md:pl-0 font-medium flex items-center gap-2",children:[o.jsx("span",{className:"w-5 h-5 md:w-6 md:h-6 rounded-full flex items-center justify-center text-white text-[10px] md:text-xs font-bold flex-shrink-0",style:{backgroundColor:Ps[P%Ps.length]},children:_.name[0]}),o.jsx("span",{className:"truncate",children:_.name})]}),o.jsx("td",{className:"py-2 text-center",children:_.leads}),o.jsx("td",{className:"py-2 text-center text-green-600 font-medium",children:_.booked}),o.jsx("td",{className:"py-2 text-center",children:o.jsxs("span",{className:`px-1.5 md:px-2 py-0.5 rounded text-[10px] md:text-xs font-medium ${Number(_.conversion)>=20?"bg-green-100 text-green-700":Number(_.conversion)>=10?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[_.conversion,"%"]})}),o.jsx("td",{className:"py-2 text-center",children:_.avgResponseTime!==null?o.jsx("span",{className:`px-1.5 md:px-2 py-0.5 rounded text-[10px] md:text-xs font-medium ${_.avgResponseTime<=30?"bg-green-100 text-green-700":_.avgResponseTime<=120?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:_.avgResponseTime<60?`${_.avgResponseTime}m`:`${Math.round(_.avgResponseTime/60)}h`}):o.jsx("span",{className:"text-gray-400",children:""})}),o.jsx("td",{className:"py-2 text-right pr-4 md:pr-0 font-bold",children:Le(_.revenue)})]},_.name))})]})})]})]}),o.jsx("div",{className:"bg-gradient-to-r from-indigo-900 to-purple-900 rounded-xl p-4 md:p-6 text-white",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-start gap-4",children:[o.jsx("div",{className:"p-2 md:p-3 bg-white/10 rounded-xl w-fit",children:o.jsx(ir,{className:"w-5 h-5 md:w-6 md:h-6 text-yellow-400"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-base md:text-lg",children:n("aiBusinessAssistant")}),o.jsx("p",{className:"text-indigo-200 text-xs md:text-sm mt-1",children:n("askAboutBusiness")}),a&&o.jsx("div",{className:"mt-4 bg-white/10 rounded-lg p-3 md:p-4 text-xs md:text-sm leading-relaxed whitespace-pre-line",children:a.replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").split(`
`).map((_,P)=>o.jsx("span",{className:_.startsWith("")?"block ml-2":"block",children:_.includes(":")&&!_.startsWith("")?o.jsx("strong",{children:_}):_},P))}),o.jsxs("div",{className:"mt-4 flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 bg-white/10 border border-white/20 rounded-lg px-3 md:px-4 py-2 md:py-2.5 text-xs md:text-sm placeholder-indigo-300 outline-none focus:border-indigo-400",placeholder:n("typeQuestion"),value:i,onChange:_=>s(_.target.value),onKeyDown:_=>_.key==="Enter"&&b()}),o.jsxs("button",{onClick:b,disabled:c,className:"px-3 md:px-4 py-2 md:py-2.5 bg-indigo-600 hover:bg-indigo-500 rounded-lg font-medium text-xs md:text-sm disabled:opacity-50 flex items-center gap-1 md:gap-2",children:[c?o.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):o.jsx(Tm,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:n("askButton")})]})]}),o.jsx("div",{className:"mt-3 flex gap-2 flex-wrap",children:[n("activeLeads"),n("staleLeads"),n("revenue")].map(_=>o.jsx("button",{onClick:()=>{s(_),b()},className:"text-[10px] md:text-xs bg-white/10 hover:bg-white/20 px-2 md:px-3 py-1 md:py-1.5 rounded-full",children:_},_))})]})]})}),(w.staleLeads.length>0||w.overduePayments.length>0)&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w.staleLeads.length>0&&o.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 md:p-4",children:[o.jsxs("h3",{className:"font-bold text-amber-800 flex items-center gap-2 mb-3 text-sm md:text-base",children:[o.jsx(ss,{className:"w-4 h-4"})," ",n("staleLeads")," (",w.staleLeads.length,")"]}),o.jsx("div",{className:"space-y-2 max-h-32 md:max-h-40 overflow-y-auto",children:w.staleLeads.slice(0,5).map(_=>{var P;return o.jsxs("div",{className:"flex justify-between items-center text-xs md:text-sm bg-white p-2 rounded",children:[o.jsx("span",{className:"font-medium truncate",children:_.clientName}),o.jsx("span",{className:"text-amber-600 ml-2 flex-shrink-0",children:(P=_.manager)==null?void 0:P.split(" ")[0]})]},_.id)})})]}),w.overduePayments.length>0&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 md:p-4",children:[o.jsxs("h3",{className:"font-bold text-red-800 flex items-center gap-2 mb-3 text-sm md:text-base",children:[o.jsx(ss,{className:"w-4 h-4"})," ",n("overduePayments")," (",w.overduePayments.length,")"]}),o.jsx("div",{className:"space-y-2 max-h-32 md:max-h-40 overflow-y-auto",children:w.overduePayments.slice(0,5).map(_=>o.jsxs("div",{className:"flex justify-between items-center text-xs md:text-sm bg-white p-2 rounded",children:[o.jsx("span",{className:"font-medium truncate",children:_.clientName}),o.jsx("span",{className:"text-red-600 ml-2 flex-shrink-0",children:Le(_.totalDue)})]},_.id))})]})]})]})}function pRe({lead:t,onClose:e,onUpdate:n}){const{t:r}=Zr(),[i,s]=k.useState(""),[a,l]=k.useState(new Date().toISOString().split("T")[0]),[c,u]=k.useState("Mid-payment"),[d,f]=k.useState(""),[h,m]=k.useState(!1),y=()=>{const C=Array.isArray(t==null?void 0:t.payments)?t.payments:[],S=C.some(_=>_.type==="Advance"||_.type==="Advance (Initial)"||_.notes&&_.notes.toLowerCase().includes("initial booking"));return t!=null&&t.advanceAmount&&t.advanceAmount>0&&!S?[{id:"legacy-advance",amount:t.advanceAmount,date:t.bookedAt||t.createdAt||new Date().toISOString(),type:"Advance (Initial)",notes:"Initial booking payment",isLegacy:!0},...C]:C},[g,v]=k.useState(y());k.useEffect(()=>{v(y())},[t]);const x=At((t==null?void 0:t.finalAmount)||(t==null?void 0:t.amount)),w=g.reduce((C,S)=>C+At(S.amount),0),b=x-w,N=async()=>{if(!(!i||!a)){if(Number(i)>b){alert(`Payment amount cannot exceed remaining balance (${Le(b)})`);return}m(!0);try{const C={amount:Number(i),date:new Date(a).toISOString(),type:c,notes:d},S=await sr.addPayment(t.id,C);if(S.status){const _=S.data,P=[...g,_];v(P),n&&n(t.id,{payments:P}),s(""),f("")}}catch(C){console.error("Failed to add payment",C),alert("Failed to add payment")}finally{m(!1)}}},A=async C=>{if(C==="legacy-advance"){alert("Cannot delete the initial advance payment. This is a legacy booking payment.");return}if(confirm("Are you sure you want to delete this payment?"))try{await sr.deletePayment(t.id,C);const S=g.filter(_=>_.id!==C);v(S),n&&n(t.id,{payments:S})}catch(S){console.error("Failed to delete payment",S),alert("Failed to delete payment")}},E=C=>({Advance:r("advanceInitial"),"Advance (Initial)":r("advanceInitial"),"Mid-payment":r("midPayment"),Final:r("finalPayment"),Custom:r("custom")})[C]||C;return o.jsx("div",{className:"fixed inset-0 bg-black/50 z-[60] flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-xl overflow-hidden flex flex-col max-h-[90vh]",children:[o.jsxs("div",{className:"bg-white border-b px-6 py-4 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:r("paymentHistory")}),o.jsxs("p",{className:"text-sm text-gray-500",children:[t==null?void 0:t.clientName," - ",t==null?void 0:t.eventType]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full",children:o.jsx(Ft,{className:"w-5 h-5 text-gray-500"})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50",children:[o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm",children:[o.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:r("totalValue")}),o.jsx("p",{className:"text-xl font-bold text-gray-900 mt-1",children:Le(x)})]}),o.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm",children:[o.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:r("collected")}),o.jsx("p",{className:`text-xl font-bold mt-1 ${w>=x?"text-green-600":"text-blue-600"}`,children:Le(w)})]}),o.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm",children:[o.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:r("remaining")}),o.jsx("p",{className:`text-xl font-bold mt-1 ${b>0?"text-red-600":"text-gray-400"}`,children:Le(Math.max(0,b))})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border shadow-sm p-4 mb-6",children:[o.jsxs("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(ro,{className:"w-4 h-4"})," ",r("addPayment")]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:r("amount")}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"Rs"}),o.jsx("input",{type:"number",value:i,onChange:C=>s(C.target.value),className:"w-full pl-9 pr-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"0.00"})]}),o.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[r("remainingAfterPayment"),": ",o.jsx("span",{className:`font-bold ${b-(Number(i)||0)<0?"text-red-500":"text-gray-700"}`,children:Le(Math.max(0,b-(Number(i)||0)))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:r("date")}),o.jsx("input",{type:"date",value:a,onChange:C=>l(C.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:r("type")}),o.jsxs("select",{value:c,onChange:C=>u(C.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",children:[o.jsx("option",{value:"Advance",children:r("advanceInitial")}),o.jsx("option",{value:"Mid-payment",children:r("midPayment")}),o.jsx("option",{value:"Final",children:r("finalPayment")}),o.jsx("option",{value:"Custom",children:r("custom")})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:r("notesOptional")}),o.jsx("input",{type:"text",value:d,onChange:C=>f(C.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. Bank Transfer ID..."})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:N,disabled:h||!i||Number(i)>b,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:r(h?"adding":"addPayment")})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900 mb-3 ml-1",children:r("paymentHistory")}),g.length===0?o.jsx("div",{className:"text-center py-8 text-gray-400 bg-white rounded-xl border border-dashed",children:r("noPaymentsRecorded")}):o.jsx("div",{className:"space-y-3",children:g.sort((C,S)=>new Date(S.date)-new Date(C.date)).map(C=>o.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm flex items-center justify-between group",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`p-2 rounded-lg ${C.type.includes("Advance")?"bg-purple-100 text-purple-600":C.type==="Final"?"bg-green-100 text-green-600":"bg-blue-100 text-blue-600"}`,children:o.jsx($o,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-gray-900",children:E(C.type)}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mt-0.5",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(ln,{className:"w-3 h-3"})," ",new Date(C.date).toLocaleDateString()]}),C.notes&&o.jsxs("span",{className:"flex items-center gap-1",children:[" ",o.jsx(GB,{className:"w-3 h-3"})," ",C.notes]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"font-bold text-gray-900",children:Le(C.amount)}),!C.isLegacy&&o.jsx("button",{onClick:()=>A(C.id),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors opacity-0 group-hover:opacity-100",children:o.jsx(ai,{className:"w-4 h-4"})})]})]},C.id))})]})]})]})})}function mRe({leads:t,onSyncPayments:e}){const{t:n,language:r}=Zr(),[i,s]=k.useState("all"),[a,l]=k.useState(""),[c,u]=k.useState(""),[d,f]=k.useState(""),[h,m]=k.useState(!1),[y,g]=z_(),v=y.get("clientId"),x=k.useMemo(()=>v&&t.find(D=>D.id==v)||null,[t,v]),w=D=>{g(B=>{const V=new URLSearchParams(B);return D?(V.set("modal","payment-history"),V.set("clientId",D.id)):(V.delete("modal"),V.delete("clientId")),V})},[b,N]=k.useState(0),[A,E]=k.useState(10),C=k.useMemo(()=>{const D=new Date;return D.setHours(0,0,0,0),t.filter(B=>{const V=(B.stage||"").toLowerCase(),F=(B.status||"").toLowerCase();return V==="booked"||V==="won"||V==="completed"||F==="booked"||F==="won"||F==="completed"||V.includes("won")||F.includes("won")}).map(B=>{const V=At(B.finalAmount!==void 0&&B.finalAmount!==null?B.finalAmount:B.quotationAmount);let F=0;const q=Array.isArray(B.payments)?B.payments:[];q.length>0&&(F=q.reduce((re,z)=>re+At(z.amount),0)),!q.some(re=>re.type==="Advance"||re.type==="Advance (Initial)"||re.notes&&re.notes.toLowerCase().includes("initial booking"))&&B.advanceAmount>0&&(F+=At(B.advanceAmount));const Z=Math.max(0,V-F);let Y="pending";return V>0&&Z<=0?Y="paid":F>0&&(Y="partial"),B.eventDate&&new Date(B.eventDate)<D&&Z>0&&(Y="overdue"),{...B,totalValue:V,totalPaid:F,totalDue:Z,paymentStatus:Y}}).sort((B,V)=>new Date(V.eventDate||0)-new Date(B.eventDate||0))},[t]),S=k.useMemo(()=>{N(0);let D=C;if(a){const B=a.toLowerCase();D=D.filter(V=>V.clientName&&V.clientName.toLowerCase().includes(B)||V.phone&&V.phone.toLowerCase().includes(B))}if(c&&d){const B=new Date(c);B.setHours(0,0,0,0);const V=new Date(d);V.setHours(23,59,59,999),D=D.filter(F=>{if(!F.eventDate)return!1;const q=new Date(F.eventDate);return q>=B&&q<=V})}return i!=="all"&&(D=D.filter(B=>B.paymentStatus==="overdue"?i==="overdue":B.paymentStatus===i)),D},[C,i,c,d,a]),_=k.useMemo(()=>{const D=b*A;return S.slice(D,D+A)},[S,b,A]),P=Math.ceil(S.length/A),T=k.useMemo(()=>{let D=C;if(c&&d){const B=new Date(c);B.setHours(0,0,0,0);const V=new Date(d);V.setHours(23,59,59,999),D=D.filter(F=>{if(!F.eventDate)return!1;const q=new Date(F.eventDate);return q>=B&&q<=V})}return D},[C,c,d]),O=k.useMemo(()=>{const D=T,B=D.length,V=D.reduce((se,me)=>se+me.totalValue,0),F=D.reduce((se,me)=>se+me.totalPaid,0),q=D.reduce((se,me)=>se+me.totalDue,0),H=D.filter(se=>se.paymentStatus==="overdue").length,Z=D.filter(se=>se.paymentStatus==="overdue").reduce((se,me)=>se+me.totalDue,0),Y=new Date,re=new Date(Y.getFullYear(),Y.getMonth()+1,0),z=D.filter(se=>{if(!se.eventDate)return!1;const me=new Date(se.eventDate);return me>=Y&&me<=re});return{totalBookings:B,totalValue:V,totalPaid:F,totalDue:q,overdueCount:H,overdueAmount:Z,upcomingThisMonth:z.length,collectionRate:V>0?(F/V*100).toFixed(1):0}},[T]),R=async()=>{m(!0),await Zse(C),m(!1),e&&e()},M=D=>{const B="px-2.5 py-0.5 rounded-full text-xs font-medium border flex items-center gap-1.5 w-fit mx-auto";switch(D){case"paid":return o.jsxs("span",{className:`${B} bg-emerald-50 text-emerald-700 border-emerald-200`,children:[o.jsx(Qr,{className:"w-3.5 h-3.5"})," ",n("paid")]});case"partial":return o.jsxs("span",{className:`${B} bg-amber-50 text-amber-700 border-amber-200`,children:[o.jsx(as,{className:"w-3.5 h-3.5"})," ",n("partial")]});case"overdue":return o.jsxs("span",{className:`${B} bg-red-50 text-red-700 border-red-200`,children:[o.jsx(ss,{className:"w-3.5 h-3.5"})," ",n("overdue")]});default:return o.jsx("span",{className:`${B} bg-slate-50 text-slate-600 border-slate-200`,children:n("pending")})}};return o.jsxs("div",{className:"space-y-4 md:space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:n("financeDashboard")}),o.jsx("p",{className:"text-xs md:text-sm text-gray-500",children:n("bookingPaymentsInvoicing")})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:R,disabled:h,className:"px-3 md:px-4 py-2 bg-blue-600 text-white rounded-lg text-xs md:text-sm font-medium flex items-center gap-1 md:gap-2 hover:bg-blue-700 disabled:opacity-50",children:[o.jsx(vo,{className:`w-4 h-4 ${h?"animate-spin":""}`}),o.jsx("span",{className:"hidden sm:inline",children:n("sync")})]}),o.jsxs("button",{className:"px-3 md:px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-xs md:text-sm font-medium flex items-center gap-1 md:gap-2 hover:bg-gray-200",children:[o.jsx(qB,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:n("export")})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2 md:gap-4",children:[o.jsxs("div",{className:"bg-white p-3 md:p-5 rounded-xl border shadow-sm",children:[o.jsx("div",{className:"p-1.5 md:p-2 bg-blue-100 rounded-lg w-fit",children:o.jsx(zd,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-600"})}),o.jsx("p",{className:"text-lg md:text-2xl font-bold mt-2 md:mt-3",children:O.totalBookings}),o.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 mt-1",children:n("totalBookings")})]}),o.jsxs("div",{className:"bg-white p-3 md:p-5 rounded-xl border shadow-sm",children:[o.jsx("div",{className:"p-1.5 md:p-2 bg-green-100 rounded-lg w-fit",children:o.jsx($o,{className:"w-4 h-4 md:w-5 md:h-5 text-green-600"})}),o.jsx("p",{className:"text-lg md:text-2xl font-bold mt-2 md:mt-3 truncate",children:Le(O.totalValue)}),o.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 mt-1",children:n("totalValue")})]}),o.jsxs("div",{className:"bg-white p-3 md:p-5 rounded-xl border shadow-sm",children:[o.jsx("div",{className:"p-1.5 md:p-2 bg-emerald-100 rounded-lg w-fit",children:o.jsx(MB,{className:"w-4 h-4 md:w-5 md:h-5 text-emerald-600"})}),o.jsx("p",{className:"text-lg md:text-2xl font-bold mt-2 md:mt-3 truncate",children:Le(O.totalPaid)}),o.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 mt-1",children:n("collected")})]}),o.jsxs("div",{className:"bg-white p-3 md:p-5 rounded-xl border shadow-sm",children:[o.jsx("div",{className:"p-1.5 md:p-2 bg-amber-100 rounded-lg w-fit",children:o.jsx(Yl,{className:"w-4 h-4 md:w-5 md:h-5 text-amber-600"})}),o.jsxs("p",{className:"text-lg md:text-2xl font-bold mt-2 md:mt-3",children:[O.collectionRate,"%"]}),o.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 mt-1",children:n("collectionRate")})]}),o.jsxs("div",{className:"bg-white p-3 md:p-5 rounded-xl border shadow-sm border-red-200 col-span-2 sm:col-span-1",children:[o.jsx("div",{className:"p-1.5 md:p-2 bg-red-100 rounded-lg w-fit",children:o.jsx(ss,{className:"w-4 h-4 md:w-5 md:h-5 text-red-600"})}),o.jsx("p",{className:"text-lg md:text-2xl font-bold mt-2 md:mt-3 text-red-600",children:O.overdueCount}),o.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 mt-1",children:n("overdue")})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 bg-white p-2 md:p-3 rounded-xl border",children:[o.jsx(qd,{className:"w-4 h-4 text-gray-400 my-auto flex-shrink-0"}),[{key:"all",label:n("all")},{key:"pending",label:n("pending")},{key:"partial",label:n("partial")},{key:"paid",label:n("paid")},{key:"overdue",label:n("overdue")}].map(D=>o.jsx("button",{onClick:()=>s(D.key),className:`px-2 md:px-3 h-9 flex items-center justify-center rounded-lg text-xs md:text-sm font-medium whitespace-nowrap ${i===D.key?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:D.label},D.key)),o.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2 hidden sm:block"}),o.jsxs("div",{className:"flex items-center gap-1 bg-gray-50 border border-gray-200 rounded-lg text-sm px-2 h-9",children:[o.jsx("input",{type:"date",className:"bg-transparent border-none text-xs md:text-sm p-1 w-24 md:w-auto",value:c,onChange:D=>u(D.target.value)}),o.jsx("span",{className:"text-gray-400",children:"-"}),o.jsx("input",{type:"date",className:"bg-transparent border-none text-xs md:text-sm p-1 w-24 md:w-auto",value:d,onChange:D=>f(D.target.value)}),(c||d)&&o.jsx("button",{onClick:()=>{u(""),f("")},className:"text-xs text-red-500 px-1 hover:text-red-700 font-medium",children:n("clear")})]}),o.jsxs("div",{className:"relative",children:[o.jsx(_a,{className:"w-4 h-4 absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",placeholder:n("search")||"Search...",value:a,onChange:D=>l(D.target.value),className:"pl-8 pr-3 h-9 bg-gray-50 border border-gray-200 rounded-lg text-xs md:text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-32 md:w-48 transition-all"})]})]}),o.jsx("div",{className:"md:hidden space-y-2",children:_.length===0?o.jsx("div",{className:"text-center py-8 text-gray-400 bg-white rounded-xl border",children:n("noBookingsFound")}):_.map(D=>o.jsxs("div",{className:"bg-white p-3 rounded-xl border shadow-sm",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:"font-bold text-gray-900 truncate",children:D.clientName}),o.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-1",children:[o.jsx(ln,{className:"w-3 h-3"})," ",D.eventDate?new Date(D.eventDate).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-"]})]}),M(D.paymentStatus)]}),o.jsxs("div",{className:"flex justify-between items-center mt-3 pt-2 border-t",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-[10px] text-gray-400",children:n("total")}),o.jsx("p",{className:"text-sm font-bold",children:Le(D.totalValue)})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-[10px] text-gray-400",children:n("collected")}),o.jsx("p",{className:"text-sm font-bold text-green-600",children:Le(D.totalPaid)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-[10px] text-gray-400",children:n("due")}),o.jsx("p",{className:"text-sm font-bold text-red-600",children:Le(D.totalDue)})]})]})]},D.id))}),o.jsx("div",{className:"hidden md:block bg-white rounded-xl border shadow-sm overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50 text-gray-600 font-medium border-b",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-4 py-3",children:n("client")}),o.jsx("th",{className:"text-left px-4 py-3",children:n("eventDate")}),o.jsx("th",{className:"text-left px-4 py-3 hidden lg:table-cell",children:n("eventType")}),o.jsx("th",{className:"text-right px-4 py-3",children:n("total")}),o.jsx("th",{className:"text-right px-4 py-3",children:n("collected")}),o.jsx("th",{className:"text-right px-4 py-3",children:n("due")}),o.jsx("th",{className:"text-center px-4 py-3",children:n("status")})]})}),o.jsx("tbody",{className:"divide-y",children:_.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:"7",className:"text-center py-8 text-gray-400",children:"No bookings found"})}):_.map(D=>o.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>w(D),children:[o.jsxs("td",{className:"px-4 py-3",children:[o.jsx("div",{className:"font-medium text-gray-900",children:D.clientName}),o.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[o.jsx(Un,{className:"w-3 h-3"})," ",D.phone]})]}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-1 text-gray-700",children:[o.jsx(ln,{className:"w-3 h-3"}),D.eventDate?new Date(D.eventDate).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-"]})}),o.jsx("td",{className:"px-4 py-3 text-gray-600 hidden lg:table-cell",children:D.eventType||"-"}),o.jsx("td",{className:"px-4 py-3 text-right font-bold",children:Le(D.totalValue)}),o.jsx("td",{className:"px-4 py-3 text-right text-green-600 font-medium",children:Le(D.totalPaid)}),o.jsx("td",{className:"px-4 py-3 text-right text-red-600 font-medium",children:Le(D.totalDue)}),o.jsx("td",{className:"px-4 py-3 text-center",children:M(D.paymentStatus)})]},D.id))})]})})}),S.length>0&&o.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Show"}),o.jsx("select",{value:A,onChange:D=>{E(Number(D.target.value)),N(0)},className:"border border-gray-200 rounded-lg px-3 py-2 text-sm bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[10,20,50].map(D=>o.jsx("option",{value:D,children:D},D))}),o.jsx("span",{className:"text-sm text-gray-600",children:"per page"})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Page"," ",o.jsx("span",{className:"font-semibold text-gray-900",children:b+1})," ","of"," ",o.jsx("span",{className:"font-semibold text-gray-900",children:P}),"  ",o.jsxs("span",{className:"text-gray-500",children:[S.length," results"]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>N(0),disabled:b===0,className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"First page",children:o.jsx(G_,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>N(D=>Math.max(0,D-1)),disabled:b===0,className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Previous page",children:o.jsx(wy,{className:"w-4 h-4"})}),o.jsx("div",{className:"hidden sm:flex items-center gap-1 mx-2",children:Array.from({length:Math.min(5,P)},(D,B)=>{let V;return P<=5||b<=2?V=B:b>=P-3?V=P-5+B:V=b-2+B,o.jsx("button",{onClick:()=>N(V),className:`w-9 h-9 rounded-lg text-sm font-medium transition-colors ${b===V?"bg-blue-600 text-white":"border border-gray-200 hover:bg-gray-50 text-gray-700"}`,children:V+1},V)})}),o.jsx("button",{onClick:()=>N(D=>Math.min(P-1,D+1)),disabled:b>=P-1,className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Next page",children:o.jsx(ha,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>N(P-1),disabled:b>=P-1,className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Last page",children:o.jsx(H_,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"hidden md:block bg-blue-50 border border-blue-200 rounded-xl p-4 md:p-5",children:[o.jsx("h3",{className:"font-bold text-blue-900 mb-3",children:"Payment Milestone Structure"}),o.jsx("div",{className:"grid grid-cols-3 gap-3 md:gap-4",children:Use.map((D,B)=>o.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-lg border border-blue-100",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"w-5 h-5 md:w-6 md:h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-xs font-bold",children:B+1}),o.jsx("span",{className:"font-medium text-blue-900 text-sm",children:D})]}),o.jsxs("p",{className:"text-xs md:text-sm text-blue-700",children:[B===0&&"30% on booking",B===1&&"40% week before",B===2&&"30% event day"]})]},D))})]}),O.upcomingThisMonth>0&&o.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 md:p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(ln,{className:"w-5 h-5 text-amber-600 flex-shrink-0"}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-bold text-amber-900 text-sm md:text-base",children:[O.upcomingThisMonth," events this month"]}),o.jsx("p",{className:"text-xs md:text-sm text-amber-700",children:"Ensure all payments are collected before event dates"})]})]})}),x&&o.jsx(pRe,{lead:x,onClose:()=>w(null),onUpdate:(D,B)=>{e&&e()}})]})}const gRe=[{id:"connected_interested",label:"Connected - Interested",labelUr:"  -  ",icon:Qr,color:"green"},{id:"connected_not_interested",label:"Connected - Not Interested",labelUr:"  -  ",icon:Im,color:"red"},{id:"connected_callback",label:"Connected - Callback Requested",labelUr:"  -   ",icon:yo,color:"blue"},{id:"no_answer",label:"No Answer",labelUr:" ",icon:ZB,color:"amber"},{id:"busy",label:"Busy / Call Later",labelUr:" /    ",icon:as,color:"orange"},{id:"wrong_number",label:"Wrong Number",labelUr:" ",icon:eU,color:"gray"}];function yRe({leads:t,currentUser:e,onLogCall:n,onSelectLead:r,onSaveLead:i}){const{t:s,language:a}=Zr(),{syncLeadEvent:l,shouldAutoSync:c}=K5(),[u,d]=k.useState(null),[f,h]=k.useState(!1),[m,y]=k.useState("all"),[g,v]=k.useState({outcome:"",notes:"",nextCallDate:"",nextCallTime:""}),[x,w]=k.useState(!1),b=new Date().toISOString().split("T")[0],N=k.useMemo(()=>{const O=((e==null?void 0:e.role)==="Owner"||(e==null?void 0:e.role)==="Admin"?t:t.filter(V=>V.manager===(e==null?void 0:e.name))).filter(V=>V.stage!=="Booked"&&V.stage!=="Lost"),R=[],M=[],D=[],B=[];return O.forEach(V=>{const F=V.nextCallDate;if(V.lastCallDate,!F){B.push({...V,callPriority:"new",callStatus:s("newLeadNeverCalled")});return}F<b?R.push({...V,callPriority:"overdue",callStatus:`${s("overdue")}: ${F}`}):F===b?M.push({...V,callPriority:"today",callStatus:V.nextCallTime?`${s("todayAt")} ${V.nextCallTime}`:s("today")}):D.push({...V,callPriority:"upcoming",callStatus:`${F}${V.nextCallTime?` ${s("at")} ${V.nextCallTime}`:""}`})}),R.sort((V,F)=>new Date(V.nextCallDate)-new Date(F.nextCallDate)),M.sort((V,F)=>V.nextCallTime?F.nextCallTime?V.nextCallTime.localeCompare(F.nextCallTime):-1:1),D.sort((V,F)=>{const q=new Date(V.nextCallDate)-new Date(F.nextCallDate);return q!==0?q:V.nextCallTime?F.nextCallTime?V.nextCallTime.localeCompare(F.nextCallTime):-1:1}),B.sort((V,F)=>{var q,H,Z,Y;return new Date(((H=(q=F.createdAt)==null?void 0:q.toDate)==null?void 0:H.call(q))||0)-new Date(((Y=(Z=V.createdAt)==null?void 0:Z.toDate)==null?void 0:Y.call(Z))||0)}),{overdue:R,today:M,upcoming:D,neverCalled:B}},[t,e,b,s]),A=k.useMemo(()=>{switch(m){case"overdue":return[...N.overdue,...N.neverCalled];case"today":return N.today;case"upcoming":return N.upcoming;default:return[...N.overdue,...N.neverCalled,...N.today,...N.upcoming]}},[N,m]),E={overdue:N.overdue.length+N.neverCalled.length,today:N.today.length,upcoming:N.upcoming.length,total:N.overdue.length+N.neverCalled.length+N.today.length+N.upcoming.length},C=T=>{d(T);const O=new Date;O.setDate(O.getDate()+1),v({outcome:"",notes:"",nextCallDate:O.toISOString().split("T")[0],nextCallTime:"10:00"}),h(!0)},S=async()=>{if(g.outcome){w(!0);try{if(await n(u.id,{outcome:g.outcome,notes:g.notes,nextCallDate:g.nextCallDate,nextCallTime:g.nextCallTime,calledAt:new Date().toISOString(),calledBy:e==null?void 0:e.name}),g.nextCallDate&&c("call")&&i)try{const T={...u,nextCallDate:g.nextCallDate,nextCallTime:g.nextCallTime,lastCallNotes:g.notes};await l(T,"call",i)}catch(T){console.error("Calendar sync error:",T)}h(!1),d(null)}catch(T){console.error("Error saving call log:",T)}w(!1)}},_=T=>Wr[T]||Wr.New,P=T=>{switch(T){case"overdue":return"border-l-4 border-l-red-500 bg-red-50";case"new":return"border-l-4 border-l-amber-500 bg-amber-50";case"today":return"border-l-4 border-l-blue-500 bg-blue-50";case"upcoming":return"border-l-4 border-l-gray-300 bg-white";default:return"bg-white"}};return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white p-4 rounded-xl mb-4",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx(Un,{className:"w-5 h-5"}),s("callList")]}),o.jsx("p",{className:"text-orange-100 text-sm mt-1",children:s("callsStatsSummary").replace("{today}",E.today).replace("{overdue}",E.overdue)})]})})}),o.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[o.jsxs("button",{onClick:()=>y("all"),className:`p-3 rounded-xl text-center transition-all ${m==="all"?"bg-gray-800 text-white":"bg-white border hover:border-gray-400"}`,children:[o.jsx("p",{className:"text-xl font-bold",children:E.total}),o.jsx("p",{className:"text-[10px] opacity-80",children:s("total")})]}),o.jsxs("button",{onClick:()=>y("overdue"),className:`p-3 rounded-xl text-center transition-all ${m==="overdue"?"bg-red-600 text-white":"bg-white border hover:border-red-400"}`,children:[o.jsx("p",{className:"text-xl font-bold",children:E.overdue}),o.jsx("p",{className:"text-[10px] opacity-80",children:s("overdue")})]}),o.jsxs("button",{onClick:()=>y("today"),className:`p-3 rounded-xl text-center transition-all ${m==="today"?"bg-blue-600 text-white":"bg-white border hover:border-blue-400"}`,children:[o.jsx("p",{className:"text-xl font-bold",children:E.today}),o.jsx("p",{className:"text-[10px] opacity-80",children:s("today")})]}),o.jsxs("button",{onClick:()=>y("upcoming"),className:`p-3 rounded-xl text-center transition-all ${m==="upcoming"?"bg-green-600 text-white":"bg-white border hover:border-green-400"}`,children:[o.jsx("p",{className:"text-xl font-bold",children:E.upcoming}),o.jsx("p",{className:"text-[10px] opacity-80",children:s("upcoming")})]})]}),o.jsxs("div",{className:"flex-1 bg-white rounded-xl border shadow-sm overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"p-3 border-b bg-gray-50 flex items-center justify-between",children:[o.jsxs("h2",{className:"font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(yo,{className:"w-4 h-4"}),m==="all"&&s("allCalls"),m==="overdue"&&s("overdueCalls"),m==="today"&&s("todayCalls"),m==="upcoming"&&s("upcomingCalls")]}),o.jsxs("span",{className:"text-sm text-gray-500",children:[A.length," ",s("leads")]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:A.length===0?o.jsxs("div",{className:"p-8 text-center text-gray-400",children:[o.jsx(Un,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),o.jsx("p",{children:s("noCallsScheduled")})]}):A.map(T=>o.jsx("div",{className:`p-4 border-b transition-colors hover:bg-gray-50 ${P(T.callPriority)}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${T.callPriority==="overdue"?"bg-red-100":T.callPriority==="new"?"bg-amber-100":T.callPriority==="today"?"bg-blue-100":"bg-gray-100"}`,children:[T.callPriority==="overdue"&&o.jsx(mo,{className:"w-5 h-5 text-red-600"}),T.callPriority==="new"&&o.jsx(di,{className:"w-5 h-5 text-amber-600"}),T.callPriority==="today"&&o.jsx(as,{className:"w-5 h-5 text-blue-600"}),T.callPriority==="upcoming"&&o.jsx(ln,{className:"w-5 h-5 text-gray-500"})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:"font-bold text-gray-900 truncate",children:T.clientName}),o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${_(T.stage).bg} ${_(T.stage).text}`,children:T.stage})]}),o.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-2 mt-0.5",children:[o.jsx(Un,{className:"w-3 h-3"})," ",T.phone]}),o.jsx("p",{className:`text-xs mt-1 ${T.callPriority==="overdue"?"text-red-600 font-medium":T.callPriority==="new"?"text-amber-600 font-medium":T.callPriority==="today"?"text-blue-600 font-medium":"text-gray-400"}`,children:T.callPriority==="new"?s("newLeadMakeFirstCall"):T.callStatus}),T.lastCallOutcome&&o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[s("last"),": ",T.lastCallOutcome," (",T.lastCallDate,")"]})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[T.nextCallDate&&o.jsx("button",{onClick:()=>Sd(R1(T)),className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200",title:s("addToCalendar"),children:o.jsx(Eb,{className:"w-4 h-4"})}),o.jsx("a",{href:Ao(T.phone),target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200",title:"WhatsApp",children:o.jsx(ur,{className:"w-4 h-4"})}),o.jsxs("button",{onClick:()=>C(T),className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-1 text-sm font-medium",children:[o.jsx(Un,{className:"w-4 h-4"}),s("call")]}),o.jsx("button",{onClick:()=>r(T),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",title:s("viewDetails"),children:o.jsx(ha,{className:"w-4 h-4"})})]})]})},T.id))})]}),f&&u&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-4",children:[o.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[o.jsx(yo,{className:"w-5 h-5"}),a==="ur"?"  ":"Log Call"]}),o.jsxs("p",{className:"text-blue-100 text-sm mt-1",children:[u.clientName," - ",u.phone]})]}),o.jsxs("div",{className:"p-4 border-b bg-gray-50",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-2",children:a==="ur"?"  :":"Make the call first:"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("a",{href:`tel:${u.phone}`,className:"flex-1 py-2 bg-blue-600 text-white rounded-lg text-center text-sm font-medium hover:bg-blue-700 flex items-center justify-center gap-2",children:[o.jsx(Un,{className:"w-4 h-4"}),a==="ur"?" ":"Phone Call"]}),o.jsxs("a",{href:Ao(u.phone),target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-2 bg-green-600 text-white rounded-lg text-center text-sm font-medium hover:bg-green-700 flex items-center justify-center gap-2",children:[o.jsx(ur,{className:"w-4 h-4"}),"WhatsApp"]})]})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:[a==="ur"?"  ":"Call Outcome"," *"]}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:gRe.map(T=>{const O=T.icon,R=g.outcome===T.id;return o.jsxs("button",{onClick:()=>v({...g,outcome:T.id}),className:`p-2 rounded-lg border text-left text-sm flex items-center gap-2 transition-all ${R?`border-${T.color}-500 bg-${T.color}-50 text-${T.color}-700`:"border-gray-200 hover:border-gray-400"}`,children:[o.jsx(O,{className:`w-4 h-4 ${R?`text-${T.color}-600`:"text-gray-400"}`}),o.jsx("span",{className:"truncate",children:a==="ur"?T.labelUr:T.label})]},T.id)})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:s("notes")}),o.jsx("textarea",{className:"w-full p-3 border rounded-lg text-sm outline-none focus:border-blue-400 h-20 resize-none",placeholder:s("callDetailsPlaceholder"),value:g.notes,onChange:T=>v({...g,notes:T.target.value})})]}),o.jsxs("div",{className:"border-t pt-4",children:[o.jsxs("label",{className:"text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[o.jsx(VB,{className:"w-4 h-4"}),s("scheduleNextCall")]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("input",{type:"date",className:"p-2 border rounded-lg text-sm outline-none focus:border-blue-400",value:g.nextCallDate,onChange:T=>v({...g,nextCallDate:T.target.value}),min:b}),o.jsx("input",{type:"time",className:"p-2 border rounded-lg text-sm outline-none focus:border-blue-400",value:g.nextCallTime,onChange:T=>v({...g,nextCallTime:T.target.value})})]}),g.nextCallDate&&o.jsxs("button",{type:"button",onClick:()=>Sd(R1({...u,nextCallDate:g.nextCallDate,nextCallTime:g.nextCallTime,lastCallNotes:g.notes})),className:"mt-2 w-full py-2 px-3 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-100 flex items-center justify-center gap-2 border border-blue-200",children:[o.jsx(Eb,{className:"w-4 h-4"}),s("addToGoogleCalendar")]})]})]}),o.jsxs("div",{className:"p-4 border-t bg-gray-50 flex gap-2",children:[o.jsx("button",{onClick:()=>{h(!1),d(null)},className:"flex-1 py-2 border border-gray-300 rounded-lg text-sm font-medium hover:bg-gray-100",children:s("cancel")}),o.jsx("button",{onClick:S,disabled:!g.outcome||x,className:"flex-1 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s(x?"saving":"saveAndNext")})]})]})})]})}function vRe({leads:t,currentUser:e}){var g;const[n,r]=k.useState(null),[i,s]=k.useState([]),[a,l]=k.useState(!1),[c,u]=k.useState(""),[d,f]=k.useState("all"),h=k.useMemo(()=>[...new Set(t.map(x=>x.manager).filter(Boolean))].sort(),[t]),m=k.useMemo(()=>t.filter(v=>v.hasUnreadMessages||v.lastMessageAt).filter(v=>{var x,w,b;if(d!=="all"&&v.manager!==d)return!1;if(c){const N=c.toLowerCase();return((x=v.clientName)==null?void 0:x.toLowerCase().includes(N))||((w=v.phone)==null?void 0:w.includes(N))||((b=v.manager)==null?void 0:b.toLowerCase().includes(N))}return!0}).sort((v,x)=>{var N,A,E,C;const w=((A=(N=v.lastMessageAt)==null?void 0:N.toDate)==null?void 0:A.call(N))||new Date(0);return(((C=(E=x.lastMessageAt)==null?void 0:E.toDate)==null?void 0:C.call(E))||new Date(0))-w}),[t,c,d]);k.useEffect(()=>{if(!n){s([]);return}l(!0);const v=us($t,"artifacts",Lt,"public","data","leads",n.id,"messages"),x=Gm(nf(v,DS("timestamp","desc"),Vy(100)),w=>{const b=w.docs.map(N=>({id:N.id,...N.data()})).reverse();s(b),l(!1)},w=>{console.error("Error loading messages:",w),l(!1)});return()=>x()},[n]);const y=v=>{if(!v)return"";const x=v.toDate?v.toDate():new Date(v),b=new Date-x;return b<6e4?"Just now":b<36e5?`${Math.floor(b/6e4)}m ago`:b<864e5?x.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):x.toLocaleDateString()};return o.jsxs("div",{className:"h-[calc(100vh-8rem)] flex flex-col",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Conversation Logs"}),o.jsx("p",{className:"text-xs md:text-sm text-gray-500",children:"View all WhatsApp conversations between employees and leads"})]}),o.jsxs("div",{className:"flex-1 flex gap-4 min-h-0",children:[o.jsxs("div",{className:`${n?"hidden md:flex":"flex"} flex-col w-full md:w-96 bg-white rounded-xl border shadow-sm overflow-hidden`,children:[o.jsxs("div",{className:"p-3 border-b space-y-2",children:[o.jsxs("div",{className:"relative",children:[o.jsx(_a,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search conversations...",className:"w-full pl-9 pr-3 py-2 text-sm border rounded-lg outline-none focus:border-blue-400",value:c,onChange:v=>u(v.target.value)})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(qd,{className:"w-4 h-4 text-gray-400 my-auto"}),o.jsxs("select",{className:"flex-1 text-sm border rounded-lg px-2 py-1.5 outline-none",value:d,onChange:v=>f(v.target.value),children:[o.jsx("option",{value:"all",children:"All Employees"}),h.map(v=>o.jsx("option",{value:v,children:v},v))]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:m.length===0?o.jsxs("div",{className:"p-8 text-center text-gray-400",children:[o.jsx(ur,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),o.jsx("p",{children:"No conversations found"})]}):m.map(v=>{var x;return o.jsx("button",{onClick:()=>r(v),className:`w-full p-3 border-b text-left hover:bg-gray-50 transition-colors ${(n==null?void 0:n.id)===v.id?"bg-blue-50 border-l-4 border-l-blue-500":""}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-white font-bold flex-shrink-0",children:((x=v.clientName)==null?void 0:x[0])||"?"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("p",{className:"font-medium text-gray-900 truncate",children:v.clientName}),o.jsx("span",{className:"text-[10px] text-gray-400 flex-shrink-0 ml-2",children:y(v.lastMessageAt)})]}),o.jsx("p",{className:"text-xs text-gray-500 truncate",children:v.lastMessagePreview||"No messages"}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("span",{className:"text-[10px] text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded",children:v.manager||"Unassigned"}),v.hasUnreadMessages&&o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})]})]}),o.jsx(ha,{className:"w-4 h-4 text-gray-300 flex-shrink-0 my-auto"})]})},v.id)})}),o.jsxs("div",{className:"p-3 border-t bg-gray-50 text-xs text-gray-500 text-center",children:[m.length," conversations"]})]}),o.jsx("div",{className:`${n?"flex":"hidden md:flex"} flex-col flex-1 bg-white rounded-xl border shadow-sm overflow-hidden`,children:n?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"p-4 border-b bg-gradient-to-r from-green-50 to-emerald-50",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:()=>r(null),className:"md:hidden p-2 hover:bg-white/50 rounded-lg",children:o.jsx(q_,{className:"w-5 h-5"})}),o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-white font-bold",children:((g=n.clientName)==null?void 0:g[0])||"?"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-bold text-gray-900",children:n.clientName}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[o.jsx(Un,{className:"w-3 h-3"}),n.phone,o.jsx("span",{className:"text-gray-300",children:""}),o.jsx(di,{className:"w-3 h-3"}),n.manager||"Unassigned"]})]}),o.jsx("div",{className:"text-right",children:o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${n.stage==="Booked"?"bg-green-100 text-green-700":n.stage==="New"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:n.stage})})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50",children:a?o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsx(vo,{className:"w-6 h-6 animate-spin text-gray-400"})}):i.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[o.jsx(Kl,{className:"w-12 h-12 mb-3 opacity-30"}),o.jsx("p",{children:"No messages in this conversation"})]}):i.map(v=>o.jsx("div",{className:`flex ${v.direction==="outbound"?"justify-end":"justify-start"}`,children:o.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-2 ${v.direction==="outbound"?"bg-green-500 text-white rounded-br-md":"bg-white text-gray-900 rounded-bl-md shadow-sm"}`,children:[o.jsx("p",{className:"text-sm whitespace-pre-wrap",children:v.text||v.message}),o.jsxs("div",{className:`flex items-center gap-1 mt-1 text-[10px] ${v.direction==="outbound"?"text-green-100":"text-gray-400"}`,children:[o.jsx(as,{className:"w-3 h-3"}),y(v.timestamp),v.type==="auto_greeting"&&o.jsx("span",{className:"ml-1 px-1 py-0.5 bg-white/20 rounded text-[9px]",children:"Auto"})]})]})},v.id))}),o.jsx("div",{className:"p-3 border-t bg-gray-50 text-xs text-gray-500 text-center",children:o.jsx("p",{children:"This is a read-only view of the conversation history"})})]}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[o.jsx(ur,{className:"w-16 h-16 mb-4 opacity-30"}),o.jsx("p",{className:"text-lg font-medium",children:"Select a conversation"}),o.jsx("p",{className:"text-sm",children:"Choose a lead from the list to view their messages"})]})})]})]})}function xRe({leads:t,currentUser:e}){const{t:n}=Zr(),[r,i]=k.useState([]),[s,a]=k.useState(!0),[l,c]=k.useState(""),[u,d]=k.useState("all"),[f,h]=k.useState("all"),[m,y]=k.useState("7"),[g,v]=k.useState(null);k.useEffect(()=>{(async()=>{a(!0);try{const _=us($t,"artifacts",Lt,"public","data","ai_audit_logs"),P=new Date;P.setDate(P.getDate()-parseInt(m));const T=nf(_,Wm("timestamp",">=",Gt.fromDate(P)),DS("timestamp","desc"),Vy(500)),R=(await So(T)).docs.map(M=>({id:M.id,...M.data()}));i(R)}catch(_){console.error("Error fetching audit logs:",_)}finally{a(!1)}})()},[m]);const x=k.useMemo(()=>[...new Set(r.map(_=>_.userName).filter(Boolean))].sort(),[r]),w=[{value:"all",label:n("allTypes")},{value:"query",label:n("aiQuery")},{value:"suggestion",label:n("aiSuggestion")},{value:"auto_greeting",label:n("autoGreeting")},{value:"quote_reminder",label:n("quoteReminder")},{value:"lead_summary",label:n("leadSummary")}],b=k.useMemo(()=>r.filter(S=>{var _,P,T,O;if(u!=="all"&&S.type!==u||f!=="all"&&S.userName!==f)return!1;if(l){const R=l.toLowerCase();return((_=S.query)==null?void 0:_.toLowerCase().includes(R))||((P=S.response)==null?void 0:P.toLowerCase().includes(R))||((T=S.userName)==null?void 0:T.toLowerCase().includes(R))||((O=S.leadName)==null?void 0:O.toLowerCase().includes(R))}return!0}),[r,u,f,l]),N=S=>S?(S.toDate?S.toDate():new Date(S)).toLocaleString("en-PK",{dateStyle:"medium",timeStyle:"short"}):"",A=S=>{switch(S){case"query":return o.jsx(Kl,{className:"w-4 h-4"});case"suggestion":return o.jsx(ir,{className:"w-4 h-4"});case"auto_greeting":return o.jsx(dd,{className:"w-4 h-4"});case"quote_reminder":return o.jsx(as,{className:"w-4 h-4"});default:return o.jsx(dd,{className:"w-4 h-4"})}},E=S=>{switch(S){case"query":return"bg-blue-100 text-blue-700";case"suggestion":return"bg-purple-100 text-purple-700";case"auto_greeting":return"bg-green-100 text-green-700";case"quote_reminder":return"bg-amber-100 text-amber-700";default:return"bg-gray-100 text-gray-700"}},C=S=>{const _=w.find(P=>P.value===S);return(_==null?void 0:_.label)||S||"AI Interaction"};return o.jsxs("div",{className:"h-[calc(100vh-8rem)] flex flex-col",children:[o.jsxs("div",{className:"mb-4",children:[o.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 flex items-center gap-2",children:[o.jsx(dd,{className:"w-6 h-6 text-purple-600"}),n("aiAuditLogs")]}),o.jsx("p",{className:"text-xs md:text-sm text-gray-500",children:n("viewAiHistory")})]}),o.jsx("div",{className:"bg-white rounded-xl border shadow-sm p-4 mb-4",children:o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[o.jsx(_a,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"text",placeholder:n("searchLogs"),className:"w-full pl-9 pr-3 py-2 text-sm border rounded-lg outline-none focus:border-purple-400",value:l,onChange:S=>c(S.target.value)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qd,{className:"w-4 h-4 text-gray-400"}),o.jsx("select",{className:"text-sm border rounded-lg px-3 py-2 outline-none focus:border-purple-400",value:u,onChange:S=>d(S.target.value),children:w.map(S=>o.jsx("option",{value:S.value,children:S.label},S.value))})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(di,{className:"w-4 h-4 text-gray-400"}),o.jsxs("select",{className:"text-sm border rounded-lg px-3 py-2 outline-none focus:border-purple-400",value:f,onChange:S=>h(S.target.value),children:[o.jsx("option",{value:"all",children:n("allUsers")}),x.map(S=>o.jsx("option",{value:S,children:S},S))]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ln,{className:"w-4 h-4 text-gray-400"}),o.jsxs("select",{className:"text-sm border rounded-lg px-3 py-2 outline-none focus:border-purple-400",value:m,onChange:S=>y(S.target.value),children:[o.jsx("option",{value:"1",children:n("last24Hours")}),o.jsx("option",{value:"7",children:n("last7Days")}),o.jsx("option",{value:"30",children:n("last30Days")}),o.jsx("option",{value:"90",children:n("last90Days")})]})]})]})}),o.jsxs("div",{className:"flex-1 bg-white rounded-xl border shadow-sm overflow-hidden flex flex-col",children:[s?o.jsx("div",{className:"flex-1 flex items-center justify-center",children:o.jsx(vo,{className:"w-8 h-8 animate-spin text-gray-400"})}):b.length===0?o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400",children:[o.jsx(mo,{className:"w-12 h-12 mb-3 opacity-30"}),o.jsx("p",{className:"text-lg font-medium",children:n("noAuditLogs")}),o.jsx("p",{className:"text-sm",children:n("auditLogsPlaceholder")})]}):o.jsx("div",{className:"flex-1 overflow-y-auto",children:b.map(S=>o.jsxs("div",{className:"border-b last:border-b-0 hover:bg-gray-50 transition-colors",children:[o.jsx("button",{onClick:()=>v(g===S.id?null:S.id),className:"w-full p-4 text-left",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${E(S.type)}`,children:A(S.type)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${E(S.type)}`,children:C(S.type)}),S.leadName&&o.jsxs("span",{className:"text-xs text-gray-500",children:[n("lead"),": ",S.leadName]})]}),o.jsx("p",{className:"text-sm text-gray-900 mt-1 line-clamp-2",children:S.query||S.action||"AI interaction"}),o.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-400",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(di,{className:"w-3 h-3"}),S.userName||"System"]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(as,{className:"w-3 h-3"}),N(S.timestamp)]}),S.tokenCount&&o.jsxs("span",{className:"text-purple-500",children:[S.tokenCount," tokens"]})]})]}),o.jsx("div",{className:"flex-shrink-0",children:g===S.id?o.jsx(ia,{className:"w-5 h-5 text-gray-400"}):o.jsx(no,{className:"w-5 h-5 text-gray-400"})})]})}),g===S.id&&o.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[S.query&&o.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs font-medium text-blue-700 mb-1",children:n("queryInput")}),o.jsx("p",{className:"text-sm text-blue-900 whitespace-pre-wrap",children:S.query})]}),S.response&&o.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs font-medium text-purple-700 mb-1",children:n("aiResponse")}),o.jsx("p",{className:"text-sm text-purple-900 whitespace-pre-wrap",children:S.response})]}),(S.context||S.metadata)&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:n("contextMetadata")}),o.jsx("pre",{className:"text-xs text-gray-600 overflow-x-auto",children:JSON.stringify(S.context||S.metadata,null,2)})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[S.model&&o.jsxs("span",{className:"px-2 py-1 bg-gray-100 rounded text-gray-600",children:[n("model"),": ",S.model]}),S.latencyMs&&o.jsxs("span",{className:"px-2 py-1 bg-gray-100 rounded text-gray-600",children:[n("latency"),": ",S.latencyMs,"ms"]}),S.success!==void 0&&o.jsx("span",{className:`px-2 py-1 rounded ${S.success?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:S.success?n("success"):n("failed")})]})]})]},S.id))}),o.jsxs("div",{className:"p-3 border-t bg-gray-50 text-xs text-gray-500 text-center",children:[b.length," ",n("auditLogEntries")]})]})]})}function bRe(){const{user:t,activeUser:e,setActiveUser:n,authLoading:r,authError:i,login:s,signup:a,logout:l}=QW(),c=[],u=[],d=[],{eventTypes:f}=Xae(),{users:h}=toe({enabled:!!t}),m=(h||[]).map(ee=>ee.username),{contacts:y,loading:g,addContact:v,updateContact:x,deleteContact:w,deleteAllContacts:b,searchContacts:N,loadMore:A,hasMore:E}=Qae({enabled:!!t}),{sources:C,addSource:S,updateSource:_,deleteSource:P}=Jae({enabled:!!t}),{leads:T,stats:O,fetchLeads:R,addLead:M,updateLead:D,deleteAllLeads:B,addLeadNote:V}=eoe({enabled:!!t}),{importProgress:F,closeImportModal:q,handleFileUpload:H}=Vse(C,R),{notifications:Z,markAsRead:Y,markAllAsRead:re,deleteNotification:z,handleNewNotification:se}=Hae(e,{enableBrowserNotifications:!0}),[me,ze]=k.useState(()=>{try{const ee=localStorage.getItem("newLeadIds");return ee?JSON.parse(ee):[]}catch(ee){return console.error("Error parsing newLeadIds from localStorage",ee),[]}}),[ct,ae]=k.useState([]);k.useEffect(()=>{try{localStorage.setItem("newLeadIds",JSON.stringify(me))}catch(ee){console.error("Error saving newLeadIds to localStorage",ee)}},[me]),Yae(ee=>{const Te=ee.lead||ee,fe=ee.notification;ze(De=>De.includes(Te.id)?De:[...De,Te.id]),R(),fe&&(fe.userId&&fe.userId==e.id||fe.assignedTo===e.role||fe.assignedTo==="all"||(e.role==="Admin"||e.role==="Owner")&&fe.type==="lead_assigned")&&se(fe)});const ye=ee=>{me.includes(ee.id)&&(ze(Te=>Te.filter(fe=>fe!==ee.id)),ae(Te=>[...Te,ee.id])),Pi(ee)},[_e,X]=k.useState(null),[Ne,Se]=k.useState(!1),[qe,Qe]=z_(),St=xy(),ie=Ai(),ce=qe.get("modal")==="new-lead",$e=qe.get("modal")==="revenue",ve=qe.get("modal")==="admin",ot=qe.get("modal")==="integrations",W=qe.get("modal")==="settings",de=qe.get("modal")==="migration",xe=qe.get("leadId"),Fe=qe.get("sourceId"),gt=xe?T.find(ee=>ee.id==xe)||c.find(ee=>ee.id==xe):null,ja=Fe?C.find(ee=>ee.id==Fe)||u.find(ee=>ee.id==Fe):null,ji=(ee,Te)=>{Qe(fe=>{const De=new URLSearchParams(fe);return Te?De.set("modal",ee):De.get("modal")===ee&&De.delete("modal"),De})},qo=ee=>ji("new-lead",ee),au=ee=>ji("revenue",ee),Ti=ee=>ji("admin",ee),Wo=ee=>ji("integrations",ee),Go=ee=>ji("settings",ee),Ta=ee=>ji("migration",ee),Pi=ee=>{Qe(Te=>{const fe=new URLSearchParams(Te);return ee?fe.set("leadId",ee.id):fe.delete("leadId"),fe})},ou=ee=>{Qe(Te=>{const fe=new URLSearchParams(Te);return ee?fe.set("sourceId",ee.id):fe.delete("sourceId"),fe})},Ho=ie.pathname==="/"?"owner-dashboard":ie.pathname.substring(1),lu=ee=>{const Te=ee==="owner-dashboard"?"/":`/${ee}`;St(Te),Se(!1)},[Vv,Ko]=k.useState([]);Lse(e,c,d,X);const cu=async ee=>{try{const Te=h.find(du=>du.username===ee.manager),fe=Te?Te.id:null,De=C.find(du=>du.name===ee.source),Ns=De?De.id:null;let Ii=ee.title;!Ii&&ee.eventType&&(Ii=`${ee.eventType}${ee.eventDate?` - ${ee.eventDate}`:""}`);const Pa=(ee.stage==="New Lead"?"New":ee.stage)||"New",Bv={quotationAmount:Number(ee.quotationAmount)||0,clientBudget:Number(ee.clientBudget)||0,status:Pa,notes:ee.notes,contactId:ee.contactId,assignedTo:fe,sourceId:Ns,title:Ii,expectedCloseDate:ee.inquiryDate?new Date(ee.inquiryDate).toISOString():null,eventDate:ee.eventDate?new Date(ee.eventDate).toISOString():null,eventType:ee.eventType,venue:ee.venue,guests:ee.guests?parseInt(ee.guests):null};await M(Bv),qo(!1),X({message:"Lead added successfully",type:"success"})}catch(Te){console.error("Error adding lead:",Te),X({message:Te.message||"Failed to add lead",type:"error"})}},uu=async(ee,Te)=>{try{const fe={...Te};if(fe.stage&&(fe.status=fe.stage,delete fe.stage),fe.source&&typeof fe.source=="string"){const De=C.find(Ns=>Ns.name===fe.source);fe.sourceId=De?De.id:null,delete fe.source}if(fe.manager&&typeof fe.manager=="string"){const De=h.find(Ns=>Ns.username===fe.manager);fe.assignedTo=De?De.id:null,delete fe.manager}delete fe.id,delete fe.contactId,delete fe.clientName,delete fe.phone,delete fe.source,delete fe.inquiryDate,delete fe.stageUpdatedAt,delete fe.stageUpdatedBy,delete fe.createdAt,delete fe.updatedAt,delete fe.contact,delete fe.assignee,delete fe.activityLog,delete fe.totalPaid,delete fe.totalDue,await D(ee,fe),X({message:"Lead updated successfully",type:"success"})}catch(fe){console.error("Error updating lead:",fe),X({message:fe.message||"Failed to update lead",type:"error"})}},ki=async(ee,Te,fe=null)=>{try{await D(ee,{stage:Te,stageUpdatedAt:new Date().toISOString(),stageUpdatedBy:e==null?void 0:e.name}),await V(ee,JSON.stringify({from:fe||"Unknown",to:Te}),Ye.STAGE_CHANGE),X({message:`Lead moved to ${Te}`,type:"success"})}catch(De){console.error("Error updating stage:",De),X({message:"Failed to update stage",type:"error"})}},xh=async(ee,Te)=>{try{const fe={outcome:Te.outcome,notes:Te.notes,nextCallDate:Te.nextCallDate,nextCallTime:Te.nextCallTime};await V(ee,JSON.stringify(fe),Ye.CALL_LOGGED);const De={lastCallDate:new Date().toISOString(),lastCallOutcome:Te.outcome,lastCallNotes:Te.notes,lastCalledBy:e==null?void 0:e.name};Te.nextCallDate&&(De.nextCallDate=Te.nextCallDate,De.nextCallTime=Te.nextCallTime||null),await D(ee,De),X({message:"Call logged successfully",type:"success"})}catch(fe){console.error("Error logging call:",fe),X({message:"Failed to log call",type:"error"})}},Yo=ee=>{lu(ee),Se(!1)};return r?o.jsxs("div",{className:"h-screen flex items-center justify-center flex-col gap-4",children:[o.jsx(Ut,{className:"w-8 h-8 animate-spin text-blue-600"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Authenticating..."})]}):!t||!e||i?o.jsx(o.Fragment,{children:o.jsx(ioe,{onLogin:n,isLoading:r,authError:i,login:s,signup:a,logout:l})}):o.jsxs("div",{className:"flex h-screen bg-slate-50 font-sans text-slate-900",children:[o.jsx(foe,{}),_e&&o.jsx(noe,{message:_e.message,type:_e.type,onClose:()=>X(null)}),gt&&o.jsx(oOe,{lead:gt,onClose:()=>Pi(null),onSave:uu,currentUser:e,sources:C,managers:m,eventTypes:f,onOpenAi:()=>{}}),$e&&o.jsx(YIe,{data:T,onClose:()=>au(!1)}),ve&&o.jsx(cOe,{onClose:()=>Ti(!1)}),ot&&o.jsx(uOe,{onClose:()=>Wo(!1)}),ce&&o.jsx(dOe,{onClose:()=>qo(!1),onSave:cu,managers:m,contacts:y,onAddContact:v,sources:C,eventTypes:f}),ja&&o.jsx(fOe,{source:ja,leads:T,onClose:()=>ou(null),onSelectLead:ee=>{ou(null),Pi(ee)}}),W&&o.jsx(hOe,{currentUser:e,onClose:()=>Go(!1),onLogout:l}),de&&o.jsx(pOe,{onClose:()=>Ta(!1)}),o.jsx("div",{className:"hidden md:block",children:o.jsx(qj,{activeTab:Ho,setActiveTab:lu,userRole:(e==null?void 0:e.role)||"Admin",onShowAdmin:()=>Ti(!0),onShowIntegrations:()=>Wo(!0),onShowUserSettings:()=>Go(!0),onShowMigration:()=>Ta(!0)})}),o.jsx("div",{className:"md:hidden fixed top-0 left-0 right-0 z-40 bg-white border-b shadow-sm",children:o.jsxs("div",{className:"flex items-center justify-between p-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-white font-bold text-sm",children:"51"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"font-bold text-gray-900 text-sm",children:"Area 51 CRM"}),o.jsx("p",{className:"text-[10px] text-gray-500",children:e==null?void 0:e.name})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Gj,{compact:!0}),o.jsx(Wj,{notifications:Z,onMarkRead:Y,onMarkAllRead:re,onDelete:z,onNotificationClick:ee=>{if(ee.leadId){const Te=T.find(fe=>fe.id===ee.leadId);Te&&Pi(Te)}},currentUser:e}),o.jsx("button",{onClick:()=>Se(!Ne),className:"p-2 hover:bg-gray-100 rounded-lg",children:Ne?o.jsx(Ft,{className:"w-6 h-6"}):o.jsx(YB,{className:"w-6 h-6"})})]})]})}),Ne&&o.jsx("div",{className:"md:hidden fixed inset-0 z-30 bg-black/50",onClick:()=>Se(!1),children:o.jsx("div",{className:"absolute top-14 left-0 right-0 bg-white border-b shadow-lg max-h-[70vh] overflow-y-auto",onClick:ee=>ee.stopPropagation(),children:o.jsx(qj,{activeTab:Ho,setActiveTab:Yo,userRole:(e==null?void 0:e.role)||"Admin",onShowAdmin:()=>{Ti(!0),Se(!1)},onShowIntegrations:()=>{Wo(!0),Se(!1)},onShowUserSettings:()=>{Go(!0),Se(!1)},onShowMigration:()=>{Ta(!0),Se(!1)},isMobile:!0})})}),o.jsxs("main",{className:"flex-1 overflow-y-auto p-3 md:p-6 pt-16 md:pt-6",children:[o.jsxs("div",{className:"hidden md:flex fixed top-4 right-6 z-40 items-center gap-3",children:[o.jsx(Gj,{}),o.jsx(Wj,{notifications:Z,onMarkRead:Y,onMarkAllRead:re,onDelete:z,onNotificationClick:ee=>{if(ee.leadId){const Te=T.find(fe=>fe.id===ee.leadId);Te&&Pi(Te)}},currentUser:e})]}),o.jsxs(Z6,{children:[o.jsx(br,{path:"/",element:o.jsx(hRe,{leads:T,onShowRevenue:()=>au(!0)})}),o.jsx(br,{path:"/employee",element:o.jsx(fRe,{leads:T,currentUser:e,onSelectLead:Pi,onStageChange:ki,onAddNote:()=>{}})}),o.jsx(br,{path:"/finance",element:o.jsx(mRe,{leads:T,onSyncPayments:R})}),o.jsx(br,{path:"/call-list",element:o.jsx(yRe,{leads:T,currentUser:e,onLogCall:xh,onSelectLead:Pi,onSaveLead:D})}),o.jsx(br,{path:"/dashboard",element:o.jsx(mOe,{stats:O,onShowRevenue:()=>au(!0)})}),o.jsx(br,{path:"/leads",element:o.jsx(cRe,{data:T,onSelectLead:ye,newLeadIds:me,viewedLeadIds:ct,onShowNewLead:()=>qo(!0),onFileUpload:H,onTruncateLeads:B,importProgress:F,closeImportModal:q})}),o.jsx(br,{path:"/contacts",element:o.jsx(uRe,{contacts:y,loading:g,onAddContact:v,onUpdateContact:x,onDeleteContact:w,onDeleteAllContacts:b,searchContacts:N,loadMore:A,hasMore:E})}),o.jsx(br,{path:"/sources",element:o.jsx(dRe,{sources:C,leads:T,onAdd:S,onUpdate:_,onDelete:P,onSourceClick:ou})}),o.jsx(br,{path:"/conversation-logs",element:o.jsx(vRe,{leads:T,currentUser:e})}),o.jsx(br,{path:"/audit-logs",element:o.jsx(xRe,{leads:T,currentUser:e})}),o.jsx(br,{path:"*",element:o.jsx(Q6,{to:"/",replace:!0})})]})]})]})}Tx.createRoot(document.getElementById("root")).render(o.jsx(L.StrictMode,{children:o.jsx(Mse,{children:o.jsx(sOe,{children:o.jsx(NB,{children:o.jsx(bRe,{})})})})}));
//# sourceMappingURL=index-1tuTu6_m.js.map
