(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Z2={exports:{}},sy={},eI={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zf=Symbol.for("react.element"),D3=Symbol.for("react.portal"),M3=Symbol.for("react.fragment"),L3=Symbol.for("react.strict_mode"),F3=Symbol.for("react.profiler"),V3=Symbol.for("react.provider"),B3=Symbol.for("react.context"),U3=Symbol.for("react.forward_ref"),z3=Symbol.for("react.suspense"),q3=Symbol.for("react.memo"),W3=Symbol.for("react.lazy"),aE=Symbol.iterator;function G3(t){return t===null||typeof t!="object"?null:(t=aE&&t[aE]||t["@@iterator"],typeof t=="function"?t:null)}var tI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nI=Object.assign,rI={};function Ic(t,e,n){this.props=t,this.context=e,this.refs=rI,this.updater=n||tI}Ic.prototype.isReactComponent={};Ic.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ic.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function iI(){}iI.prototype=Ic.prototype;function q1(t,e,n){this.props=t,this.context=e,this.refs=rI,this.updater=n||tI}var W1=q1.prototype=new iI;W1.constructor=q1;nI(W1,Ic.prototype);W1.isPureReactComponent=!0;var oE=Array.isArray,sI=Object.prototype.hasOwnProperty,G1={current:null},aI={key:!0,ref:!0,__self:!0,__source:!0};function oI(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)sI.call(e,r)&&!aI.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:zf,type:t,key:s,ref:a,props:i,_owner:G1.current}}function H3(t,e){return{$$typeof:zf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function H1(t){return typeof t=="object"&&t!==null&&t.$$typeof===zf}function K3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var lE=/\/+/g;function t0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?K3(""+t.key):e.toString(36)}function kp(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case zf:case D3:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+t0(a,0):r,oE(i)?(n="",t!=null&&(n=t.replace(lE,"$&/")+"/"),kp(i,e,n,"",function(u){return u})):i!=null&&(H1(i)&&(i=H3(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(lE,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",oE(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+t0(s,l);a+=kp(s,e,n,c,i)}else if(c=G3(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+t0(s,l++),a+=kp(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Vh(t,e,n){if(t==null)return t;var r=[],i=0;return kp(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Y3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bn={current:null},Ip={transition:null},X3={ReactCurrentDispatcher:Bn,ReactCurrentBatchConfig:Ip,ReactCurrentOwner:G1};function lI(){throw Error("act(...) is not supported in production builds of React.")}Me.Children={map:Vh,forEach:function(t,e,n){Vh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vh(t,function(){e++}),e},toArray:function(t){return Vh(t,function(e){return e})||[]},only:function(t){if(!H1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Me.Component=Ic;Me.Fragment=M3;Me.Profiler=F3;Me.PureComponent=q1;Me.StrictMode=L3;Me.Suspense=z3;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X3;Me.act=lI;Me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=nI({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=G1.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)sI.call(e,c)&&!aI.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:zf,type:t.type,key:i,ref:s,props:r,_owner:a}};Me.createContext=function(t){return t={$$typeof:B3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:V3,_context:t},t.Consumer=t};Me.createElement=oI;Me.createFactory=function(t){var e=oI.bind(null,t);return e.type=t,e};Me.createRef=function(){return{current:null}};Me.forwardRef=function(t){return{$$typeof:U3,render:t}};Me.isValidElement=H1;Me.lazy=function(t){return{$$typeof:W3,_payload:{_status:-1,_result:t},_init:Y3}};Me.memo=function(t,e){return{$$typeof:q3,type:t,compare:e===void 0?null:e}};Me.startTransition=function(t){var e=Ip.transition;Ip.transition={};try{t()}finally{Ip.transition=e}};Me.unstable_act=lI;Me.useCallback=function(t,e){return Bn.current.useCallback(t,e)};Me.useContext=function(t){return Bn.current.useContext(t)};Me.useDebugValue=function(){};Me.useDeferredValue=function(t){return Bn.current.useDeferredValue(t)};Me.useEffect=function(t,e){return Bn.current.useEffect(t,e)};Me.useId=function(){return Bn.current.useId()};Me.useImperativeHandle=function(t,e,n){return Bn.current.useImperativeHandle(t,e,n)};Me.useInsertionEffect=function(t,e){return Bn.current.useInsertionEffect(t,e)};Me.useLayoutEffect=function(t,e){return Bn.current.useLayoutEffect(t,e)};Me.useMemo=function(t,e){return Bn.current.useMemo(t,e)};Me.useReducer=function(t,e,n){return Bn.current.useReducer(t,e,n)};Me.useRef=function(t){return Bn.current.useRef(t)};Me.useState=function(t){return Bn.current.useState(t)};Me.useSyncExternalStore=function(t,e,n){return Bn.current.useSyncExternalStore(t,e,n)};Me.useTransition=function(){return Bn.current.useTransition()};Me.version="18.3.1";eI.exports=Me;var k=eI.exports;const L=rt(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q3=k,J3=Symbol.for("react.element"),Z3=Symbol.for("react.fragment"),eF=Object.prototype.hasOwnProperty,tF=Q3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nF={key:!0,ref:!0,__self:!0,__source:!0};function cI(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)eF.call(e,r)&&!nF.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:J3,type:t,key:s,ref:a,props:i,_owner:tF.current}}sy.Fragment=Z3;sy.jsx=cI;sy.jsxs=cI;Z2.exports=sy;var o=Z2.exports,Px={},uI={exports:{}},mr={},dI={exports:{}},fI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,W){var H=V.length;V.push(W);e:for(;0<H;){var te=H-1>>>1,X=V[te];if(0<i(X,W))V[te]=W,V[H]=X,H=te;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var W=V[0],H=V.pop();if(H!==W){V[0]=H;e:for(var te=0,X=V.length,ie=X>>>1;te<ie;){var q=2*(te+1)-1,ae=V[q],ge=q+1,Fe=V[ge];if(0>i(ae,H))ge<X&&0>i(Fe,ae)?(V[te]=Fe,V[ge]=H,te=ge):(V[te]=ae,V[q]=H,te=q);else if(ge<X&&0>i(Fe,H))V[te]=Fe,V[ge]=H,te=ge;else break e}}return W}function i(V,W){var H=V.sortIndex-W.sortIndex;return H!==0?H:V.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,y=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(V){for(var W=n(u);W!==null;){if(W.callback===null)r(u);else if(W.startTime<=V)r(u),W.sortIndex=W.expirationTime,e(c,W);else break;W=n(u)}}function N(V){if(g=!1,v(V),!y)if(n(c)!==null)y=!0,B(S);else{var W=n(u);W!==null&&U(N,W.startTime-V)}}function S(V,W){y=!1,g&&(g=!1,w(_),_=-1),m=!0;var H=h;try{for(v(W),f=n(c);f!==null&&(!(f.expirationTime>W)||V&&!T());){var te=f.callback;if(typeof te=="function"){f.callback=null,h=f.priorityLevel;var X=te(f.expirationTime<=W);W=t.unstable_now(),typeof X=="function"?f.callback=X:f===n(c)&&r(c),v(W)}else r(c);f=n(c)}if(f!==null)var ie=!0;else{var q=n(u);q!==null&&U(N,q.startTime-W),ie=!1}return ie}finally{f=null,h=H,m=!1}}var A=!1,E=null,_=-1,C=5,P=-1;function T(){return!(t.unstable_now()-P<C)}function O(){if(E!==null){var V=t.unstable_now();P=V;var W=!0;try{W=E(!0,V)}finally{W?R():(A=!1,E=null)}}else A=!1}var R;if(typeof b=="function")R=function(){b(O)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,D=M.port2;M.port1.onmessage=O,R=function(){D.postMessage(null)}}else R=function(){x(O,0)};function B(V){E=V,A||(A=!0,R())}function U(V,W){_=x(function(){V(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,B(S))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(V){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var H=h;h=W;try{return V()}finally{h=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var H=h;h=V;try{return W()}finally{h=H}},t.unstable_scheduleCallback=function(V,W,H){var te=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?te+H:te):H=te,V){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=H+X,V={id:d++,callback:W,priorityLevel:V,startTime:H,expirationTime:X,sortIndex:-1},H>te?(V.sortIndex=H,e(u,V),n(c)===null&&V===n(u)&&(g?(w(_),_=-1):g=!0,U(N,H-te))):(V.sortIndex=X,e(c,V),y||m||(y=!0,B(S))),V},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(V){var W=h;return function(){var H=h;h=W;try{return V.apply(this,arguments)}finally{h=H}}}})(fI);dI.exports=fI;var rF=dI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iF=k,hr=rF;function re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hI=new Set,Nd={};function Io(t,e){Vl(t,e),Vl(t+"Capture",e)}function Vl(t,e){for(Nd[t]=e,t=0;t<e.length;t++)hI.add(e[t])}var ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kx=Object.prototype.hasOwnProperty,sF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cE={},uE={};function aF(t){return kx.call(uE,t)?!0:kx.call(cE,t)?!1:sF.test(t)?uE[t]=!0:(cE[t]=!0,!1)}function oF(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lF(t,e,n,r){if(e===null||typeof e>"u"||oF(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Un(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var vn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vn[t]=new Un(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vn[e]=new Un(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vn[t]=new Un(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vn[t]=new Un(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vn[t]=new Un(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vn[t]=new Un(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vn[t]=new Un(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vn[t]=new Un(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vn[t]=new Un(t,5,!1,t.toLowerCase(),null,!1,!1)});var K1=/[\-:]([a-z])/g;function Y1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(K1,Y1);vn[e]=new Un(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(K1,Y1);vn[e]=new Un(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(K1,Y1);vn[e]=new Un(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vn[t]=new Un(t,1,!1,t.toLowerCase(),null,!1,!1)});vn.xlinkHref=new Un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vn[t]=new Un(t,1,!1,t.toLowerCase(),null,!0,!0)});function X1(t,e,n,r){var i=vn.hasOwnProperty(e)?vn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lF(e,n,i,r)&&(n=null),r||i===null?aF(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ys=iF.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bh=Symbol.for("react.element"),al=Symbol.for("react.portal"),ol=Symbol.for("react.fragment"),Q1=Symbol.for("react.strict_mode"),Ix=Symbol.for("react.profiler"),pI=Symbol.for("react.provider"),mI=Symbol.for("react.context"),J1=Symbol.for("react.forward_ref"),Ox=Symbol.for("react.suspense"),Rx=Symbol.for("react.suspense_list"),Z1=Symbol.for("react.memo"),Is=Symbol.for("react.lazy"),gI=Symbol.for("react.offscreen"),dE=Symbol.iterator;function xu(t){return t===null||typeof t!="object"?null:(t=dE&&t[dE]||t["@@iterator"],typeof t=="function"?t:null)}var Ct=Object.assign,n0;function Uu(t){if(n0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);n0=e&&e[1]||""}return`
`+n0+t}var r0=!1;function i0(t,e){if(!t||r0)return"";r0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{r0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Uu(t):""}function cF(t){switch(t.tag){case 5:return Uu(t.type);case 16:return Uu("Lazy");case 13:return Uu("Suspense");case 19:return Uu("SuspenseList");case 0:case 2:case 15:return t=i0(t.type,!1),t;case 11:return t=i0(t.type.render,!1),t;case 1:return t=i0(t.type,!0),t;default:return""}}function $x(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ol:return"Fragment";case al:return"Portal";case Ix:return"Profiler";case Q1:return"StrictMode";case Ox:return"Suspense";case Rx:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mI:return(t.displayName||"Context")+".Consumer";case pI:return(t._context.displayName||"Context")+".Provider";case J1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Z1:return e=t.displayName||null,e!==null?e:$x(t.type)||"Memo";case Is:e=t._payload,t=t._init;try{return $x(t(e))}catch{}}return null}function uF(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $x(e);case 8:return e===Q1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function da(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dF(t){var e=yI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Uh(t){t._valueTracker||(t._valueTracker=dF(t))}function vI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dx(t,e){var n=e.checked;return Ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function fE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=da(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xI(t,e){e=e.checked,e!=null&&X1(t,"checked",e,!1)}function Mx(t,e){xI(t,e);var n=da(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Lx(t,e.type,n):e.hasOwnProperty("defaultValue")&&Lx(t,e.type,da(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Lx(t,e,n){(e!=="number"||lm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zu=Array.isArray;function Al(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+da(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Fx(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(re(91));return Ct({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function pE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(re(92));if(zu(n)){if(1<n.length)throw Error(re(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:da(n)}}function bI(t,e){var n=da(e.value),r=da(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function mE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vx(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var zh,_I=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(zh=zh||document.createElement("div"),zh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=zh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ed(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var nd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fF=["Webkit","ms","Moz","O"];Object.keys(nd).forEach(function(t){fF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nd[e]=nd[t]})});function SI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||nd.hasOwnProperty(t)&&nd[t]?(""+e).trim():e+"px"}function AI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=SI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var hF=Ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bx(t,e){if(e){if(hF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(re(62))}}function Ux(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zx=null;function e_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qx=null,Nl=null,El=null;function gE(t){if(t=Gf(t)){if(typeof qx!="function")throw Error(re(280));var e=t.stateNode;e&&(e=uy(e),qx(t.stateNode,t.type,e))}}function NI(t){Nl?El?El.push(t):El=[t]:Nl=t}function EI(){if(Nl){var t=Nl,e=El;if(El=Nl=null,gE(t),e)for(t=0;t<e.length;t++)gE(e[t])}}function CI(t,e){return t(e)}function jI(){}var s0=!1;function TI(t,e,n){if(s0)return t(e,n);s0=!0;try{return CI(t,e,n)}finally{s0=!1,(Nl!==null||El!==null)&&(jI(),EI())}}function Cd(t,e){var n=t.stateNode;if(n===null)return null;var r=uy(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(re(231,e,typeof n));return n}var Wx=!1;if(ts)try{var bu={};Object.defineProperty(bu,"passive",{get:function(){Wx=!0}}),window.addEventListener("test",bu,bu),window.removeEventListener("test",bu,bu)}catch{Wx=!1}function pF(t,e,n,r,i,s,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var rd=!1,cm=null,um=!1,Gx=null,mF={onError:function(t){rd=!0,cm=t}};function gF(t,e,n,r,i,s,a,l,c){rd=!1,cm=null,pF.apply(mF,arguments)}function yF(t,e,n,r,i,s,a,l,c){if(gF.apply(this,arguments),rd){if(rd){var u=cm;rd=!1,cm=null}else throw Error(re(198));um||(um=!0,Gx=u)}}function Oo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function PI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function yE(t){if(Oo(t)!==t)throw Error(re(188))}function vF(t){var e=t.alternate;if(!e){if(e=Oo(t),e===null)throw Error(re(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return yE(i),t;if(s===r)return yE(i),e;s=s.sibling}throw Error(re(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(re(189))}}if(n.alternate!==r)throw Error(re(190))}if(n.tag!==3)throw Error(re(188));return n.stateNode.current===n?t:e}function kI(t){return t=vF(t),t!==null?II(t):null}function II(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=II(t);if(e!==null)return e;t=t.sibling}return null}var OI=hr.unstable_scheduleCallback,vE=hr.unstable_cancelCallback,xF=hr.unstable_shouldYield,bF=hr.unstable_requestPaint,$t=hr.unstable_now,wF=hr.unstable_getCurrentPriorityLevel,t_=hr.unstable_ImmediatePriority,RI=hr.unstable_UserBlockingPriority,dm=hr.unstable_NormalPriority,_F=hr.unstable_LowPriority,$I=hr.unstable_IdlePriority,ay=null,di=null;function SF(t){if(di&&typeof di.onCommitFiberRoot=="function")try{di.onCommitFiberRoot(ay,t,void 0,(t.current.flags&128)===128)}catch{}}var Yr=Math.clz32?Math.clz32:EF,AF=Math.log,NF=Math.LN2;function EF(t){return t>>>=0,t===0?32:31-(AF(t)/NF|0)|0}var qh=64,Wh=4194304;function qu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=qu(l):(s&=a,s!==0&&(r=qu(s)))}else a=n&~i,a!==0?r=qu(a):s!==0&&(r=qu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yr(e),i=1<<n,r|=t[n],e&=~i;return r}function CF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jF(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Yr(s),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=CF(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function Hx(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function DI(){var t=qh;return qh<<=1,!(qh&4194240)&&(qh=64),t}function a0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yr(e),t[e]=n}function TF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Yr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function n_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var tt=0;function MI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var LI,r_,FI,VI,BI,Kx=!1,Gh=[],Xs=null,Qs=null,Js=null,jd=new Map,Td=new Map,Ds=[],PF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xE(t,e){switch(t){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":Qs=null;break;case"mouseover":case"mouseout":Js=null;break;case"pointerover":case"pointerout":jd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Td.delete(e.pointerId)}}function wu(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Gf(e),e!==null&&r_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kF(t,e,n,r,i){switch(e){case"focusin":return Xs=wu(Xs,t,e,n,r,i),!0;case"dragenter":return Qs=wu(Qs,t,e,n,r,i),!0;case"mouseover":return Js=wu(Js,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return jd.set(s,wu(jd.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Td.set(s,wu(Td.get(s)||null,t,e,n,r,i)),!0}return!1}function UI(t){var e=qa(t.target);if(e!==null){var n=Oo(e);if(n!==null){if(e=n.tag,e===13){if(e=PI(n),e!==null){t.blockedOn=e,BI(t.priority,function(){FI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Op(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zx=r,n.target.dispatchEvent(r),zx=null}else return e=Gf(n),e!==null&&r_(e),t.blockedOn=n,!1;e.shift()}return!0}function bE(t,e,n){Op(t)&&n.delete(e)}function IF(){Kx=!1,Xs!==null&&Op(Xs)&&(Xs=null),Qs!==null&&Op(Qs)&&(Qs=null),Js!==null&&Op(Js)&&(Js=null),jd.forEach(bE),Td.forEach(bE)}function _u(t,e){t.blockedOn===e&&(t.blockedOn=null,Kx||(Kx=!0,hr.unstable_scheduleCallback(hr.unstable_NormalPriority,IF)))}function Pd(t){function e(i){return _u(i,t)}if(0<Gh.length){_u(Gh[0],t);for(var n=1;n<Gh.length;n++){var r=Gh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xs!==null&&_u(Xs,t),Qs!==null&&_u(Qs,t),Js!==null&&_u(Js,t),jd.forEach(e),Td.forEach(e),n=0;n<Ds.length;n++)r=Ds[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ds.length&&(n=Ds[0],n.blockedOn===null);)UI(n),n.blockedOn===null&&Ds.shift()}var Cl=ys.ReactCurrentBatchConfig,hm=!0;function OF(t,e,n,r){var i=tt,s=Cl.transition;Cl.transition=null;try{tt=1,i_(t,e,n,r)}finally{tt=i,Cl.transition=s}}function RF(t,e,n,r){var i=tt,s=Cl.transition;Cl.transition=null;try{tt=4,i_(t,e,n,r)}finally{tt=i,Cl.transition=s}}function i_(t,e,n,r){if(hm){var i=Yx(t,e,n,r);if(i===null)g0(t,e,r,pm,n),xE(t,r);else if(kF(i,t,e,n,r))r.stopPropagation();else if(xE(t,r),e&4&&-1<PF.indexOf(t)){for(;i!==null;){var s=Gf(i);if(s!==null&&LI(s),s=Yx(t,e,n,r),s===null&&g0(t,e,r,pm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else g0(t,e,r,null,n)}}var pm=null;function Yx(t,e,n,r){if(pm=null,t=e_(r),t=qa(t),t!==null)if(e=Oo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=PI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pm=t,null}function zI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wF()){case t_:return 1;case RI:return 4;case dm:case _F:return 16;case $I:return 536870912;default:return 16}default:return 16}}var zs=null,s_=null,Rp=null;function qI(){if(Rp)return Rp;var t,e=s_,n=e.length,r,i="value"in zs?zs.value:zs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return Rp=i.slice(t,1<r?1-r:void 0)}function $p(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Hh(){return!0}function wE(){return!1}function gr(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Hh:wE,this.isPropagationStopped=wE,this}return Ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hh)},persist:function(){},isPersistent:Hh}),e}var Oc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},a_=gr(Oc),Wf=Ct({},Oc,{view:0,detail:0}),$F=gr(Wf),o0,l0,Su,oy=Ct({},Wf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:o_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Su&&(Su&&t.type==="mousemove"?(o0=t.screenX-Su.screenX,l0=t.screenY-Su.screenY):l0=o0=0,Su=t),o0)},movementY:function(t){return"movementY"in t?t.movementY:l0}}),_E=gr(oy),DF=Ct({},oy,{dataTransfer:0}),MF=gr(DF),LF=Ct({},Wf,{relatedTarget:0}),c0=gr(LF),FF=Ct({},Oc,{animationName:0,elapsedTime:0,pseudoElement:0}),VF=gr(FF),BF=Ct({},Oc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UF=gr(BF),zF=Ct({},Oc,{data:0}),SE=gr(zF),qF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=GF[t])?!!e[t]:!1}function o_(){return HF}var KF=Ct({},Wf,{key:function(t){if(t.key){var e=qF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=$p(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:o_,charCode:function(t){return t.type==="keypress"?$p(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$p(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),YF=gr(KF),XF=Ct({},oy,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),AE=gr(XF),QF=Ct({},Wf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:o_}),JF=gr(QF),ZF=Ct({},Oc,{propertyName:0,elapsedTime:0,pseudoElement:0}),eV=gr(ZF),tV=Ct({},oy,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nV=gr(tV),rV=[9,13,27,32],l_=ts&&"CompositionEvent"in window,id=null;ts&&"documentMode"in document&&(id=document.documentMode);var iV=ts&&"TextEvent"in window&&!id,WI=ts&&(!l_||id&&8<id&&11>=id),NE=" ",EE=!1;function GI(t,e){switch(t){case"keyup":return rV.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function HI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ll=!1;function sV(t,e){switch(t){case"compositionend":return HI(e);case"keypress":return e.which!==32?null:(EE=!0,NE);case"textInput":return t=e.data,t===NE&&EE?null:t;default:return null}}function aV(t,e){if(ll)return t==="compositionend"||!l_&&GI(t,e)?(t=qI(),Rp=s_=zs=null,ll=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return WI&&e.locale!=="ko"?null:e.data;default:return null}}var oV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oV[t.type]:e==="textarea"}function KI(t,e,n,r){NI(r),e=mm(e,"onChange"),0<e.length&&(n=new a_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var sd=null,kd=null;function lV(t){sO(t,0)}function ly(t){var e=dl(t);if(vI(e))return t}function cV(t,e){if(t==="change")return e}var YI=!1;if(ts){var u0;if(ts){var d0="oninput"in document;if(!d0){var jE=document.createElement("div");jE.setAttribute("oninput","return;"),d0=typeof jE.oninput=="function"}u0=d0}else u0=!1;YI=u0&&(!document.documentMode||9<document.documentMode)}function TE(){sd&&(sd.detachEvent("onpropertychange",XI),kd=sd=null)}function XI(t){if(t.propertyName==="value"&&ly(kd)){var e=[];KI(e,kd,t,e_(t)),TI(lV,e)}}function uV(t,e,n){t==="focusin"?(TE(),sd=e,kd=n,sd.attachEvent("onpropertychange",XI)):t==="focusout"&&TE()}function dV(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ly(kd)}function fV(t,e){if(t==="click")return ly(e)}function hV(t,e){if(t==="input"||t==="change")return ly(e)}function pV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zr=typeof Object.is=="function"?Object.is:pV;function Id(t,e){if(Zr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!kx.call(e,i)||!Zr(t[i],e[i]))return!1}return!0}function PE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kE(t,e){var n=PE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=PE(n)}}function QI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?QI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function JI(){for(var t=window,e=lm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lm(t.document)}return e}function c_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mV(t){var e=JI(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&QI(n.ownerDocument.documentElement,n)){if(r!==null&&c_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=kE(n,s);var a=kE(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gV=ts&&"documentMode"in document&&11>=document.documentMode,cl=null,Xx=null,ad=null,Qx=!1;function IE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qx||cl==null||cl!==lm(r)||(r=cl,"selectionStart"in r&&c_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ad&&Id(ad,r)||(ad=r,r=mm(Xx,"onSelect"),0<r.length&&(e=new a_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=cl)))}function Kh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ul={animationend:Kh("Animation","AnimationEnd"),animationiteration:Kh("Animation","AnimationIteration"),animationstart:Kh("Animation","AnimationStart"),transitionend:Kh("Transition","TransitionEnd")},f0={},ZI={};ts&&(ZI=document.createElement("div").style,"AnimationEvent"in window||(delete ul.animationend.animation,delete ul.animationiteration.animation,delete ul.animationstart.animation),"TransitionEvent"in window||delete ul.transitionend.transition);function cy(t){if(f0[t])return f0[t];if(!ul[t])return t;var e=ul[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ZI)return f0[t]=e[n];return t}var eO=cy("animationend"),tO=cy("animationiteration"),nO=cy("animationstart"),rO=cy("transitionend"),iO=new Map,OE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ba(t,e){iO.set(t,e),Io(e,[t])}for(var h0=0;h0<OE.length;h0++){var p0=OE[h0],yV=p0.toLowerCase(),vV=p0[0].toUpperCase()+p0.slice(1);ba(yV,"on"+vV)}ba(eO,"onAnimationEnd");ba(tO,"onAnimationIteration");ba(nO,"onAnimationStart");ba("dblclick","onDoubleClick");ba("focusin","onFocus");ba("focusout","onBlur");ba(rO,"onTransitionEnd");Vl("onMouseEnter",["mouseout","mouseover"]);Vl("onMouseLeave",["mouseout","mouseover"]);Vl("onPointerEnter",["pointerout","pointerover"]);Vl("onPointerLeave",["pointerout","pointerover"]);Io("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Io("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Io("onBeforeInput",["compositionend","keypress","textInput","paste"]);Io("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Io("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Io("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xV=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wu));function RE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,yF(r,e,void 0,t),t.currentTarget=null}function sO(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;RE(i,l,u),s=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;RE(i,l,u),s=c}}}if(um)throw t=Gx,um=!1,Gx=null,t}function gt(t,e){var n=e[nb];n===void 0&&(n=e[nb]=new Set);var r=t+"__bubble";n.has(r)||(aO(e,t,2,!1),n.add(r))}function m0(t,e,n){var r=0;e&&(r|=4),aO(n,t,r,e)}var Yh="_reactListening"+Math.random().toString(36).slice(2);function Od(t){if(!t[Yh]){t[Yh]=!0,hI.forEach(function(n){n!=="selectionchange"&&(xV.has(n)||m0(n,!1,t),m0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yh]||(e[Yh]=!0,m0("selectionchange",!1,e))}}function aO(t,e,n,r){switch(zI(e)){case 1:var i=OF;break;case 4:i=RF;break;default:i=i_}n=i.bind(null,e,n,t),i=void 0,!Wx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function g0(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=qa(l),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}l=l.parentNode}}r=r.return}TI(function(){var u=s,d=e_(n),f=[];e:{var h=iO.get(t);if(h!==void 0){var m=a_,y=t;switch(t){case"keypress":if($p(n)===0)break e;case"keydown":case"keyup":m=YF;break;case"focusin":y="focus",m=c0;break;case"focusout":y="blur",m=c0;break;case"beforeblur":case"afterblur":m=c0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=_E;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=MF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=JF;break;case eO:case tO:case nO:m=VF;break;case rO:m=eV;break;case"scroll":m=$F;break;case"wheel":m=nV;break;case"copy":case"cut":case"paste":m=UF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=AE}var g=(e&4)!==0,x=!g&&t==="scroll",w=g?h!==null?h+"Capture":null:h;g=[];for(var b=u,v;b!==null;){v=b;var N=v.stateNode;if(v.tag===5&&N!==null&&(v=N,w!==null&&(N=Cd(b,w),N!=null&&g.push(Rd(b,N,v)))),x)break;b=b.return}0<g.length&&(h=new m(h,y,null,n,d),f.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==zx&&(y=n.relatedTarget||n.fromElement)&&(qa(y)||y[ns]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=u,y=y?qa(y):null,y!==null&&(x=Oo(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(g=_E,N="onMouseLeave",w="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(g=AE,N="onPointerLeave",w="onPointerEnter",b="pointer"),x=m==null?h:dl(m),v=y==null?h:dl(y),h=new g(N,b+"leave",m,n,d),h.target=x,h.relatedTarget=v,N=null,qa(d)===u&&(g=new g(w,b+"enter",y,n,d),g.target=v,g.relatedTarget=x,N=g),x=N,m&&y)t:{for(g=m,w=y,b=0,v=g;v;v=Jo(v))b++;for(v=0,N=w;N;N=Jo(N))v++;for(;0<b-v;)g=Jo(g),b--;for(;0<v-b;)w=Jo(w),v--;for(;b--;){if(g===w||w!==null&&g===w.alternate)break t;g=Jo(g),w=Jo(w)}g=null}else g=null;m!==null&&$E(f,h,m,g,!1),y!==null&&x!==null&&$E(f,x,y,g,!0)}}e:{if(h=u?dl(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var S=cV;else if(CE(h))if(YI)S=hV;else{S=dV;var A=uV}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=fV);if(S&&(S=S(t,u))){KI(f,S,n,d);break e}A&&A(t,h,u),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&Lx(h,"number",h.value)}switch(A=u?dl(u):window,t){case"focusin":(CE(A)||A.contentEditable==="true")&&(cl=A,Xx=u,ad=null);break;case"focusout":ad=Xx=cl=null;break;case"mousedown":Qx=!0;break;case"contextmenu":case"mouseup":case"dragend":Qx=!1,IE(f,n,d);break;case"selectionchange":if(gV)break;case"keydown":case"keyup":IE(f,n,d)}var E;if(l_)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ll?GI(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(WI&&n.locale!=="ko"&&(ll||_!=="onCompositionStart"?_==="onCompositionEnd"&&ll&&(E=qI()):(zs=d,s_="value"in zs?zs.value:zs.textContent,ll=!0)),A=mm(u,_),0<A.length&&(_=new SE(_,t,null,n,d),f.push({event:_,listeners:A}),E?_.data=E:(E=HI(n),E!==null&&(_.data=E)))),(E=iV?sV(t,n):aV(t,n))&&(u=mm(u,"onBeforeInput"),0<u.length&&(d=new SE("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=E))}sO(f,e)})}function Rd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function mm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Cd(t,n),s!=null&&r.unshift(Rd(t,s,i)),s=Cd(t,e),s!=null&&r.push(Rd(t,s,i))),t=t.return}return r}function Jo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $E(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,i?(c=Cd(n,s),c!=null&&a.unshift(Rd(n,c,l))):i||(c=Cd(n,s),c!=null&&a.push(Rd(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var bV=/\r\n?/g,wV=/\u0000|\uFFFD/g;function DE(t){return(typeof t=="string"?t:""+t).replace(bV,`
`).replace(wV,"")}function Xh(t,e,n){if(e=DE(e),DE(t)!==e&&n)throw Error(re(425))}function gm(){}var Jx=null,Zx=null;function eb(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tb=typeof setTimeout=="function"?setTimeout:void 0,_V=typeof clearTimeout=="function"?clearTimeout:void 0,ME=typeof Promise=="function"?Promise:void 0,SV=typeof queueMicrotask=="function"?queueMicrotask:typeof ME<"u"?function(t){return ME.resolve(null).then(t).catch(AV)}:tb;function AV(t){setTimeout(function(){throw t})}function y0(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Pd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Pd(e)}function Zs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function LE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Rc=Math.random().toString(36).slice(2),li="__reactFiber$"+Rc,$d="__reactProps$"+Rc,ns="__reactContainer$"+Rc,nb="__reactEvents$"+Rc,NV="__reactListeners$"+Rc,EV="__reactHandles$"+Rc;function qa(t){var e=t[li];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ns]||n[li]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=LE(t);t!==null;){if(n=t[li])return n;t=LE(t)}return e}t=n,n=t.parentNode}return null}function Gf(t){return t=t[li]||t[ns],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function dl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(re(33))}function uy(t){return t[$d]||null}var rb=[],fl=-1;function wa(t){return{current:t}}function bt(t){0>fl||(t.current=rb[fl],rb[fl]=null,fl--)}function ht(t,e){fl++,rb[fl]=t.current,t.current=e}var fa={},In=wa(fa),Xn=wa(!1),co=fa;function Bl(t,e){var n=t.type.contextTypes;if(!n)return fa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Qn(t){return t=t.childContextTypes,t!=null}function ym(){bt(Xn),bt(In)}function FE(t,e,n){if(In.current!==fa)throw Error(re(168));ht(In,e),ht(Xn,n)}function oO(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(re(108,uF(t)||"Unknown",i));return Ct({},n,r)}function vm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fa,co=In.current,ht(In,t),ht(Xn,Xn.current),!0}function VE(t,e,n){var r=t.stateNode;if(!r)throw Error(re(169));n?(t=oO(t,e,co),r.__reactInternalMemoizedMergedChildContext=t,bt(Xn),bt(In),ht(In,t)):bt(Xn),ht(Xn,n)}var Fi=null,dy=!1,v0=!1;function lO(t){Fi===null?Fi=[t]:Fi.push(t)}function CV(t){dy=!0,lO(t)}function _a(){if(!v0&&Fi!==null){v0=!0;var t=0,e=tt;try{var n=Fi;for(tt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fi=null,dy=!1}catch(i){throw Fi!==null&&(Fi=Fi.slice(t+1)),OI(t_,_a),i}finally{tt=e,v0=!1}}return null}var hl=[],pl=0,xm=null,bm=0,_r=[],Sr=0,uo=null,Vi=1,Bi="";function Da(t,e){hl[pl++]=bm,hl[pl++]=xm,xm=t,bm=e}function cO(t,e,n){_r[Sr++]=Vi,_r[Sr++]=Bi,_r[Sr++]=uo,uo=t;var r=Vi;t=Bi;var i=32-Yr(r)-1;r&=~(1<<i),n+=1;var s=32-Yr(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Vi=1<<32-Yr(e)+i|n<<i|r,Bi=s+t}else Vi=1<<s|n<<i|r,Bi=t}function u_(t){t.return!==null&&(Da(t,1),cO(t,1,0))}function d_(t){for(;t===xm;)xm=hl[--pl],hl[pl]=null,bm=hl[--pl],hl[pl]=null;for(;t===uo;)uo=_r[--Sr],_r[Sr]=null,Bi=_r[--Sr],_r[Sr]=null,Vi=_r[--Sr],_r[Sr]=null}var ur=null,lr=null,_t=!1,Gr=null;function uO(t,e){var n=Er(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function BE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ur=t,lr=Zs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ur=t,lr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=uo!==null?{id:Vi,overflow:Bi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Er(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ur=t,lr=null,!0):!1;default:return!1}}function ib(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sb(t){if(_t){var e=lr;if(e){var n=e;if(!BE(t,e)){if(ib(t))throw Error(re(418));e=Zs(n.nextSibling);var r=ur;e&&BE(t,e)?uO(r,n):(t.flags=t.flags&-4097|2,_t=!1,ur=t)}}else{if(ib(t))throw Error(re(418));t.flags=t.flags&-4097|2,_t=!1,ur=t}}}function UE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ur=t}function Qh(t){if(t!==ur)return!1;if(!_t)return UE(t),_t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!eb(t.type,t.memoizedProps)),e&&(e=lr)){if(ib(t))throw dO(),Error(re(418));for(;e;)uO(t,e),e=Zs(e.nextSibling)}if(UE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){lr=Zs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}lr=null}}else lr=ur?Zs(t.stateNode.nextSibling):null;return!0}function dO(){for(var t=lr;t;)t=Zs(t.nextSibling)}function Ul(){lr=ur=null,_t=!1}function f_(t){Gr===null?Gr=[t]:Gr.push(t)}var jV=ys.ReactCurrentBatchConfig;function Au(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(re(309));var r=n.stateNode}if(!r)throw Error(re(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(re(284));if(!n._owner)throw Error(re(290,t))}return t}function Jh(t,e){throw t=Object.prototype.toString.call(e),Error(re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zE(t){var e=t._init;return e(t._payload)}function fO(t){function e(w,b){if(t){var v=w.deletions;v===null?(w.deletions=[b],w.flags|=16):v.push(b)}}function n(w,b){if(!t)return null;for(;b!==null;)e(w,b),b=b.sibling;return null}function r(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function i(w,b){return w=ra(w,b),w.index=0,w.sibling=null,w}function s(w,b,v){return w.index=v,t?(v=w.alternate,v!==null?(v=v.index,v<b?(w.flags|=2,b):v):(w.flags|=2,b)):(w.flags|=1048576,b)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,b,v,N){return b===null||b.tag!==6?(b=N0(v,w.mode,N),b.return=w,b):(b=i(b,v),b.return=w,b)}function c(w,b,v,N){var S=v.type;return S===ol?d(w,b,v.props.children,N,v.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Is&&zE(S)===b.type)?(N=i(b,v.props),N.ref=Au(w,b,v),N.return=w,N):(N=Up(v.type,v.key,v.props,null,w.mode,N),N.ref=Au(w,b,v),N.return=w,N)}function u(w,b,v,N){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=E0(v,w.mode,N),b.return=w,b):(b=i(b,v.children||[]),b.return=w,b)}function d(w,b,v,N,S){return b===null||b.tag!==7?(b=eo(v,w.mode,N,S),b.return=w,b):(b=i(b,v),b.return=w,b)}function f(w,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=N0(""+b,w.mode,v),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Bh:return v=Up(b.type,b.key,b.props,null,w.mode,v),v.ref=Au(w,null,b),v.return=w,v;case al:return b=E0(b,w.mode,v),b.return=w,b;case Is:var N=b._init;return f(w,N(b._payload),v)}if(zu(b)||xu(b))return b=eo(b,w.mode,v,null),b.return=w,b;Jh(w,b)}return null}function h(w,b,v,N){var S=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return S!==null?null:l(w,b,""+v,N);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Bh:return v.key===S?c(w,b,v,N):null;case al:return v.key===S?u(w,b,v,N):null;case Is:return S=v._init,h(w,b,S(v._payload),N)}if(zu(v)||xu(v))return S!==null?null:d(w,b,v,N,null);Jh(w,v)}return null}function m(w,b,v,N,S){if(typeof N=="string"&&N!==""||typeof N=="number")return w=w.get(v)||null,l(b,w,""+N,S);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Bh:return w=w.get(N.key===null?v:N.key)||null,c(b,w,N,S);case al:return w=w.get(N.key===null?v:N.key)||null,u(b,w,N,S);case Is:var A=N._init;return m(w,b,v,A(N._payload),S)}if(zu(N)||xu(N))return w=w.get(v)||null,d(b,w,N,S,null);Jh(b,N)}return null}function y(w,b,v,N){for(var S=null,A=null,E=b,_=b=0,C=null;E!==null&&_<v.length;_++){E.index>_?(C=E,E=null):C=E.sibling;var P=h(w,E,v[_],N);if(P===null){E===null&&(E=C);break}t&&E&&P.alternate===null&&e(w,E),b=s(P,b,_),A===null?S=P:A.sibling=P,A=P,E=C}if(_===v.length)return n(w,E),_t&&Da(w,_),S;if(E===null){for(;_<v.length;_++)E=f(w,v[_],N),E!==null&&(b=s(E,b,_),A===null?S=E:A.sibling=E,A=E);return _t&&Da(w,_),S}for(E=r(w,E);_<v.length;_++)C=m(E,w,_,v[_],N),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?_:C.key),b=s(C,b,_),A===null?S=C:A.sibling=C,A=C);return t&&E.forEach(function(T){return e(w,T)}),_t&&Da(w,_),S}function g(w,b,v,N){var S=xu(v);if(typeof S!="function")throw Error(re(150));if(v=S.call(v),v==null)throw Error(re(151));for(var A=S=null,E=b,_=b=0,C=null,P=v.next();E!==null&&!P.done;_++,P=v.next()){E.index>_?(C=E,E=null):C=E.sibling;var T=h(w,E,P.value,N);if(T===null){E===null&&(E=C);break}t&&E&&T.alternate===null&&e(w,E),b=s(T,b,_),A===null?S=T:A.sibling=T,A=T,E=C}if(P.done)return n(w,E),_t&&Da(w,_),S;if(E===null){for(;!P.done;_++,P=v.next())P=f(w,P.value,N),P!==null&&(b=s(P,b,_),A===null?S=P:A.sibling=P,A=P);return _t&&Da(w,_),S}for(E=r(w,E);!P.done;_++,P=v.next())P=m(E,w,_,P.value,N),P!==null&&(t&&P.alternate!==null&&E.delete(P.key===null?_:P.key),b=s(P,b,_),A===null?S=P:A.sibling=P,A=P);return t&&E.forEach(function(O){return e(w,O)}),_t&&Da(w,_),S}function x(w,b,v,N){if(typeof v=="object"&&v!==null&&v.type===ol&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Bh:e:{for(var S=v.key,A=b;A!==null;){if(A.key===S){if(S=v.type,S===ol){if(A.tag===7){n(w,A.sibling),b=i(A,v.props.children),b.return=w,w=b;break e}}else if(A.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Is&&zE(S)===A.type){n(w,A.sibling),b=i(A,v.props),b.ref=Au(w,A,v),b.return=w,w=b;break e}n(w,A);break}else e(w,A);A=A.sibling}v.type===ol?(b=eo(v.props.children,w.mode,N,v.key),b.return=w,w=b):(N=Up(v.type,v.key,v.props,null,w.mode,N),N.ref=Au(w,b,v),N.return=w,w=N)}return a(w);case al:e:{for(A=v.key;b!==null;){if(b.key===A)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(w,b.sibling),b=i(b,v.children||[]),b.return=w,w=b;break e}else{n(w,b);break}else e(w,b);b=b.sibling}b=E0(v,w.mode,N),b.return=w,w=b}return a(w);case Is:return A=v._init,x(w,b,A(v._payload),N)}if(zu(v))return y(w,b,v,N);if(xu(v))return g(w,b,v,N);Jh(w,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(w,b.sibling),b=i(b,v),b.return=w,w=b):(n(w,b),b=N0(v,w.mode,N),b.return=w,w=b),a(w)):n(w,b)}return x}var zl=fO(!0),hO=fO(!1),wm=wa(null),_m=null,ml=null,h_=null;function p_(){h_=ml=_m=null}function m_(t){var e=wm.current;bt(wm),t._currentValue=e}function ab(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function jl(t,e){_m=t,h_=ml=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kn=!0),t.firstContext=null)}function kr(t){var e=t._currentValue;if(h_!==t)if(t={context:t,memoizedValue:e,next:null},ml===null){if(_m===null)throw Error(re(308));ml=t,_m.dependencies={lanes:0,firstContext:t}}else ml=ml.next=t;return e}var Wa=null;function g_(t){Wa===null?Wa=[t]:Wa.push(t)}function pO(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,g_(e)):(n.next=i.next,i.next=n),e.interleaved=n,rs(t,r)}function rs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Os=!1;function y_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mO(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ea(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,rs(t,n)}return i=r.interleaved,i===null?(e.next=e,g_(r)):(e.next=i.next,i.next=e),r.interleaved=e,rs(t,n)}function Dp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,n_(t,n)}}function qE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sm(t,e,n,r){var i=t.updateQueue;Os=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=i.baseState;a=0,d=u=c=null,l=s;do{var h=l.lane,m=l.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,g=l;switch(h=e,m=n,g.tag){case 1:if(y=g.payload,typeof y=="function"){f=y.call(m,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,h=typeof y=="function"?y.call(m,f,h):y,h==null)break e;f=Ct({},f,h);break e;case 2:Os=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,a|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ho|=a,t.lanes=a,t.memoizedState=f}}function WE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(re(191,i));i.call(r)}}}var Hf={},fi=wa(Hf),Dd=wa(Hf),Md=wa(Hf);function Ga(t){if(t===Hf)throw Error(re(174));return t}function v_(t,e){switch(ht(Md,e),ht(Dd,t),ht(fi,Hf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vx(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vx(e,t)}bt(fi),ht(fi,e)}function ql(){bt(fi),bt(Dd),bt(Md)}function gO(t){Ga(Md.current);var e=Ga(fi.current),n=Vx(e,t.type);e!==n&&(ht(Dd,t),ht(fi,n))}function x_(t){Dd.current===t&&(bt(fi),bt(Dd))}var Nt=wa(0);function Am(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var x0=[];function b_(){for(var t=0;t<x0.length;t++)x0[t]._workInProgressVersionPrimary=null;x0.length=0}var Mp=ys.ReactCurrentDispatcher,b0=ys.ReactCurrentBatchConfig,fo=0,Et=null,Kt=null,rn=null,Nm=!1,od=!1,Ld=0,TV=0;function _n(){throw Error(re(321))}function w_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zr(t[n],e[n]))return!1;return!0}function __(t,e,n,r,i,s){if(fo=s,Et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Mp.current=t===null||t.memoizedState===null?OV:RV,t=n(r,i),od){s=0;do{if(od=!1,Ld=0,25<=s)throw Error(re(301));s+=1,rn=Kt=null,e.updateQueue=null,Mp.current=$V,t=n(r,i)}while(od)}if(Mp.current=Em,e=Kt!==null&&Kt.next!==null,fo=0,rn=Kt=Et=null,Nm=!1,e)throw Error(re(300));return t}function S_(){var t=Ld!==0;return Ld=0,t}function oi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Et.memoizedState=rn=t:rn=rn.next=t,rn}function Ir(){if(Kt===null){var t=Et.alternate;t=t!==null?t.memoizedState:null}else t=Kt.next;var e=rn===null?Et.memoizedState:rn.next;if(e!==null)rn=e,Kt=t;else{if(t===null)throw Error(re(310));Kt=t,t={memoizedState:Kt.memoizedState,baseState:Kt.baseState,baseQueue:Kt.baseQueue,queue:Kt.queue,next:null},rn===null?Et.memoizedState=rn=t:rn=rn.next=t}return rn}function Fd(t,e){return typeof e=="function"?e(t):e}function w0(t){var e=Ir(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=Kt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((fo&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,Et.lanes|=d,ho|=d}u=u.next}while(u!==null&&u!==s);c===null?a=r:c.next=l,Zr(r,e.memoizedState)||(Kn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Et.lanes|=s,ho|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function _0(t){var e=Ir(),n=e.queue;if(n===null)throw Error(re(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Zr(s,e.memoizedState)||(Kn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function yO(){}function vO(t,e){var n=Et,r=Ir(),i=e(),s=!Zr(r.memoizedState,i);if(s&&(r.memoizedState=i,Kn=!0),r=r.queue,A_(wO.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||rn!==null&&rn.memoizedState.tag&1){if(n.flags|=2048,Vd(9,bO.bind(null,n,r,i,e),void 0,null),an===null)throw Error(re(349));fo&30||xO(n,e,i)}return i}function xO(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function bO(t,e,n,r){e.value=n,e.getSnapshot=r,_O(e)&&SO(t)}function wO(t,e,n){return n(function(){_O(e)&&SO(t)})}function _O(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zr(t,n)}catch{return!0}}function SO(t){var e=rs(t,1);e!==null&&Xr(e,t,1,-1)}function GE(t){var e=oi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fd,lastRenderedState:t},e.queue=t,t=t.dispatch=IV.bind(null,Et,t),[e.memoizedState,t]}function Vd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Et.updateQueue,e===null?(e={lastEffect:null,stores:null},Et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function AO(){return Ir().memoizedState}function Lp(t,e,n,r){var i=oi();Et.flags|=t,i.memoizedState=Vd(1|e,n,void 0,r===void 0?null:r)}function fy(t,e,n,r){var i=Ir();r=r===void 0?null:r;var s=void 0;if(Kt!==null){var a=Kt.memoizedState;if(s=a.destroy,r!==null&&w_(r,a.deps)){i.memoizedState=Vd(e,n,s,r);return}}Et.flags|=t,i.memoizedState=Vd(1|e,n,s,r)}function HE(t,e){return Lp(8390656,8,t,e)}function A_(t,e){return fy(2048,8,t,e)}function NO(t,e){return fy(4,2,t,e)}function EO(t,e){return fy(4,4,t,e)}function CO(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function jO(t,e,n){return n=n!=null?n.concat([t]):null,fy(4,4,CO.bind(null,e,t),n)}function N_(){}function TO(t,e){var n=Ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&w_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function PO(t,e){var n=Ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&w_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function kO(t,e,n){return fo&21?(Zr(n,e)||(n=DI(),Et.lanes|=n,ho|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kn=!0),t.memoizedState=n)}function PV(t,e){var n=tt;tt=n!==0&&4>n?n:4,t(!0);var r=b0.transition;b0.transition={};try{t(!1),e()}finally{tt=n,b0.transition=r}}function IO(){return Ir().memoizedState}function kV(t,e,n){var r=na(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},OO(t))RO(e,n);else if(n=pO(t,e,n,r),n!==null){var i=Ln();Xr(n,t,r,i),$O(n,e,r)}}function IV(t,e,n){var r=na(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(OO(t))RO(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,Zr(l,a)){var c=e.interleaved;c===null?(i.next=i,g_(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=pO(t,e,i,r),n!==null&&(i=Ln(),Xr(n,t,r,i),$O(n,e,r))}}function OO(t){var e=t.alternate;return t===Et||e!==null&&e===Et}function RO(t,e){od=Nm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $O(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,n_(t,n)}}var Em={readContext:kr,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useInsertionEffect:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useMutableSource:_n,useSyncExternalStore:_n,useId:_n,unstable_isNewReconciler:!1},OV={readContext:kr,useCallback:function(t,e){return oi().memoizedState=[t,e===void 0?null:e],t},useContext:kr,useEffect:HE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Lp(4194308,4,CO.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Lp(4194308,4,t,e)},useInsertionEffect:function(t,e){return Lp(4,2,t,e)},useMemo:function(t,e){var n=oi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=oi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kV.bind(null,Et,t),[r.memoizedState,t]},useRef:function(t){var e=oi();return t={current:t},e.memoizedState=t},useState:GE,useDebugValue:N_,useDeferredValue:function(t){return oi().memoizedState=t},useTransition:function(){var t=GE(!1),e=t[0];return t=PV.bind(null,t[1]),oi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Et,i=oi();if(_t){if(n===void 0)throw Error(re(407));n=n()}else{if(n=e(),an===null)throw Error(re(349));fo&30||xO(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,HE(wO.bind(null,r,s,t),[t]),r.flags|=2048,Vd(9,bO.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=oi(),e=an.identifierPrefix;if(_t){var n=Bi,r=Vi;n=(r&~(1<<32-Yr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ld++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=TV++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},RV={readContext:kr,useCallback:TO,useContext:kr,useEffect:A_,useImperativeHandle:jO,useInsertionEffect:NO,useLayoutEffect:EO,useMemo:PO,useReducer:w0,useRef:AO,useState:function(){return w0(Fd)},useDebugValue:N_,useDeferredValue:function(t){var e=Ir();return kO(e,Kt.memoizedState,t)},useTransition:function(){var t=w0(Fd)[0],e=Ir().memoizedState;return[t,e]},useMutableSource:yO,useSyncExternalStore:vO,useId:IO,unstable_isNewReconciler:!1},$V={readContext:kr,useCallback:TO,useContext:kr,useEffect:A_,useImperativeHandle:jO,useInsertionEffect:NO,useLayoutEffect:EO,useMemo:PO,useReducer:_0,useRef:AO,useState:function(){return _0(Fd)},useDebugValue:N_,useDeferredValue:function(t){var e=Ir();return Kt===null?e.memoizedState=t:kO(e,Kt.memoizedState,t)},useTransition:function(){var t=_0(Fd)[0],e=Ir().memoizedState;return[t,e]},useMutableSource:yO,useSyncExternalStore:vO,useId:IO,unstable_isNewReconciler:!1};function Ur(t,e){if(t&&t.defaultProps){e=Ct({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ob(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ct({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hy={isMounted:function(t){return(t=t._reactInternals)?Oo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ln(),i=na(t),s=Yi(r,i);s.payload=e,n!=null&&(s.callback=n),e=ea(t,s,i),e!==null&&(Xr(e,t,i,r),Dp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ln(),i=na(t),s=Yi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ea(t,s,i),e!==null&&(Xr(e,t,i,r),Dp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ln(),r=na(t),i=Yi(n,r);i.tag=2,e!=null&&(i.callback=e),e=ea(t,i,r),e!==null&&(Xr(e,t,r,n),Dp(e,t,r))}};function KE(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Id(n,r)||!Id(i,s):!0}function DO(t,e,n){var r=!1,i=fa,s=e.contextType;return typeof s=="object"&&s!==null?s=kr(s):(i=Qn(e)?co:In.current,r=e.contextTypes,s=(r=r!=null)?Bl(t,i):fa),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hy,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function YE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&hy.enqueueReplaceState(e,e.state,null)}function lb(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},y_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=kr(s):(s=Qn(e)?co:In.current,i.context=Bl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ob(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&hy.enqueueReplaceState(i,i.state,null),Sm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Wl(t,e){try{var n="",r=e;do n+=cF(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function S0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cb(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var DV=typeof WeakMap=="function"?WeakMap:Map;function MO(t,e,n){n=Yi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jm||(jm=!0,xb=r),cb(t,e)},n}function LO(t,e,n){n=Yi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){cb(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){cb(t,e),typeof r!="function"&&(ta===null?ta=new Set([this]):ta.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function XE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new DV;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=XV.bind(null,t,e,n),e.then(t,t))}function QE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function JE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yi(-1,1),e.tag=2,ea(n,e,1))),n.lanes|=1),t)}var MV=ys.ReactCurrentOwner,Kn=!1;function Rn(t,e,n,r){e.child=t===null?hO(e,null,n,r):zl(e,t.child,n,r)}function ZE(t,e,n,r,i){n=n.render;var s=e.ref;return jl(e,i),r=__(t,e,n,r,s,i),n=S_(),t!==null&&!Kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,is(t,e,i)):(_t&&n&&u_(e),e.flags|=1,Rn(t,e,r,i),e.child)}function eC(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!O_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,FO(t,e,s,r,i)):(t=Up(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Id,n(a,r)&&t.ref===e.ref)return is(t,e,i)}return e.flags|=1,t=ra(s,r),t.ref=e.ref,t.return=e,e.child=t}function FO(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Id(s,r)&&t.ref===e.ref)if(Kn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Kn=!0);else return e.lanes=t.lanes,is(t,e,i)}return ub(t,e,n,r,i)}function VO(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ht(yl,nr),nr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ht(yl,nr),nr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ht(yl,nr),nr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ht(yl,nr),nr|=r;return Rn(t,e,i,n),e.child}function BO(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ub(t,e,n,r,i){var s=Qn(n)?co:In.current;return s=Bl(e,s),jl(e,i),n=__(t,e,n,r,s,i),r=S_(),t!==null&&!Kn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,is(t,e,i)):(_t&&r&&u_(e),e.flags|=1,Rn(t,e,n,i),e.child)}function tC(t,e,n,r,i){if(Qn(n)){var s=!0;vm(e)}else s=!1;if(jl(e,i),e.stateNode===null)Fp(t,e),DO(e,n,r),lb(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=kr(u):(u=Qn(n)?co:In.current,u=Bl(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&YE(e,a,r,u),Os=!1;var h=e.memoizedState;a.state=h,Sm(e,r,a,i),c=e.memoizedState,l!==r||h!==c||Xn.current||Os?(typeof d=="function"&&(ob(e,n,d,r),c=e.memoizedState),(l=Os||KE(e,n,l,r,h,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,mO(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ur(e.type,l),a.props=u,f=e.pendingProps,h=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=kr(c):(c=Qn(n)?co:In.current,c=Bl(e,c));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||h!==c)&&YE(e,a,r,c),Os=!1,h=e.memoizedState,a.state=h,Sm(e,r,a,i);var y=e.memoizedState;l!==f||h!==y||Xn.current||Os?(typeof m=="function"&&(ob(e,n,m,r),y=e.memoizedState),(u=Os||KE(e,n,u,r,h,y,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),a.props=r,a.state=y,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return db(t,e,n,r,s,i)}function db(t,e,n,r,i,s){BO(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&VE(e,n,!1),is(t,e,s);r=e.stateNode,MV.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=zl(e,t.child,null,s),e.child=zl(e,null,l,s)):Rn(t,e,l,s),e.memoizedState=r.state,i&&VE(e,n,!0),e.child}function UO(t){var e=t.stateNode;e.pendingContext?FE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&FE(t,e.context,!1),v_(t,e.containerInfo)}function nC(t,e,n,r,i){return Ul(),f_(i),e.flags|=256,Rn(t,e,n,r),e.child}var fb={dehydrated:null,treeContext:null,retryLane:0};function hb(t){return{baseLanes:t,cachePool:null,transitions:null}}function zO(t,e,n){var r=e.pendingProps,i=Nt.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ht(Nt,i&1),t===null)return sb(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=gy(a,r,0,null),t=eo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=hb(n),e.memoizedState=fb,t):E_(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return LV(t,e,a,r,l,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ra(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=ra(l,s):(s=eo(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?hb(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=fb,r}return s=t.child,t=s.sibling,r=ra(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function E_(t,e){return e=gy({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zh(t,e,n,r){return r!==null&&f_(r),zl(e,t.child,null,n),t=E_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function LV(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=S0(Error(re(422))),Zh(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=gy({mode:"visible",children:r.children},i,0,null),s=eo(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&zl(e,t.child,null,a),e.child.memoizedState=hb(a),e.memoizedState=fb,s);if(!(e.mode&1))return Zh(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(re(419)),r=S0(s,r,void 0),Zh(t,e,a,r)}if(l=(a&t.childLanes)!==0,Kn||l){if(r=an,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,rs(t,i),Xr(r,t,i,-1))}return I_(),r=S0(Error(re(421))),Zh(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=QV.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,lr=Zs(i.nextSibling),ur=e,_t=!0,Gr=null,t!==null&&(_r[Sr++]=Vi,_r[Sr++]=Bi,_r[Sr++]=uo,Vi=t.id,Bi=t.overflow,uo=e),e=E_(e,r.children),e.flags|=4096,e)}function rC(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ab(t.return,e,n)}function A0(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qO(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Rn(t,e,r.children,n),r=Nt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&rC(t,n,e);else if(t.tag===19)rC(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ht(Nt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Am(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),A0(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Am(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}A0(e,!0,n,null,s);break;case"together":A0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function is(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ho|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(re(153));if(e.child!==null){for(t=e.child,n=ra(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ra(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function FV(t,e,n){switch(e.tag){case 3:UO(e),Ul();break;case 5:gO(e);break;case 1:Qn(e.type)&&vm(e);break;case 4:v_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ht(wm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ht(Nt,Nt.current&1),e.flags|=128,null):n&e.child.childLanes?zO(t,e,n):(ht(Nt,Nt.current&1),t=is(t,e,n),t!==null?t.sibling:null);ht(Nt,Nt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qO(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ht(Nt,Nt.current),r)break;return null;case 22:case 23:return e.lanes=0,VO(t,e,n)}return is(t,e,n)}var WO,pb,GO,HO;WO=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pb=function(){};GO=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ga(fi.current);var s=null;switch(n){case"input":i=Dx(t,i),r=Dx(t,r),s=[];break;case"select":i=Ct({},i,{value:void 0}),r=Ct({},r,{value:void 0}),s=[];break;case"textarea":i=Fx(t,i),r=Fx(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gm)}Bx(n,r);var a;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Nd.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Nd.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&gt("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};HO=function(t,e,n,r){n!==r&&(e.flags|=4)};function Nu(t,e){if(!_t)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Sn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function VV(t,e,n){var r=e.pendingProps;switch(d_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Sn(e),null;case 1:return Qn(e.type)&&ym(),Sn(e),null;case 3:return r=e.stateNode,ql(),bt(Xn),bt(In),b_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gr!==null&&(_b(Gr),Gr=null))),pb(t,e),Sn(e),null;case 5:x_(e);var i=Ga(Md.current);if(n=e.type,t!==null&&e.stateNode!=null)GO(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(re(166));return Sn(e),null}if(t=Ga(fi.current),Qh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[li]=e,r[$d]=s,t=(e.mode&1)!==0,n){case"dialog":gt("cancel",r),gt("close",r);break;case"iframe":case"object":case"embed":gt("load",r);break;case"video":case"audio":for(i=0;i<Wu.length;i++)gt(Wu[i],r);break;case"source":gt("error",r);break;case"img":case"image":case"link":gt("error",r),gt("load",r);break;case"details":gt("toggle",r);break;case"input":fE(r,s),gt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},gt("invalid",r);break;case"textarea":pE(r,s),gt("invalid",r)}Bx(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Xh(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Xh(r.textContent,l,t),i=["children",""+l]):Nd.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&gt("scroll",r)}switch(n){case"input":Uh(r),hE(r,s,!0);break;case"textarea":Uh(r),mE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=gm)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[li]=e,t[$d]=r,WO(t,e,!1,!1),e.stateNode=t;e:{switch(a=Ux(n,r),n){case"dialog":gt("cancel",t),gt("close",t),i=r;break;case"iframe":case"object":case"embed":gt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Wu.length;i++)gt(Wu[i],t);i=r;break;case"source":gt("error",t),i=r;break;case"img":case"image":case"link":gt("error",t),gt("load",t),i=r;break;case"details":gt("toggle",t),i=r;break;case"input":fE(t,r),i=Dx(t,r),gt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ct({},r,{value:void 0}),gt("invalid",t);break;case"textarea":pE(t,r),i=Fx(t,r),gt("invalid",t);break;default:i=r}Bx(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?AI(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&_I(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ed(t,c):typeof c=="number"&&Ed(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Nd.hasOwnProperty(s)?c!=null&&s==="onScroll"&&gt("scroll",t):c!=null&&X1(t,s,c,a))}switch(n){case"input":Uh(t),hE(t,r,!1);break;case"textarea":Uh(t),mE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+da(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Al(t,!!r.multiple,s,!1):r.defaultValue!=null&&Al(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=gm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Sn(e),null;case 6:if(t&&e.stateNode!=null)HO(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(re(166));if(n=Ga(Md.current),Ga(fi.current),Qh(e)){if(r=e.stateNode,n=e.memoizedProps,r[li]=e,(s=r.nodeValue!==n)&&(t=ur,t!==null))switch(t.tag){case 3:Xh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[li]=e,e.stateNode=r}return Sn(e),null;case 13:if(bt(Nt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_t&&lr!==null&&e.mode&1&&!(e.flags&128))dO(),Ul(),e.flags|=98560,s=!1;else if(s=Qh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(re(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(re(317));s[li]=e}else Ul(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Sn(e),s=!1}else Gr!==null&&(_b(Gr),Gr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Nt.current&1?Qt===0&&(Qt=3):I_())),e.updateQueue!==null&&(e.flags|=4),Sn(e),null);case 4:return ql(),pb(t,e),t===null&&Od(e.stateNode.containerInfo),Sn(e),null;case 10:return m_(e.type._context),Sn(e),null;case 17:return Qn(e.type)&&ym(),Sn(e),null;case 19:if(bt(Nt),s=e.memoizedState,s===null)return Sn(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Nu(s,!1);else{if(Qt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Am(t),a!==null){for(e.flags|=128,Nu(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ht(Nt,Nt.current&1|2),e.child}t=t.sibling}s.tail!==null&&$t()>Gl&&(e.flags|=128,r=!0,Nu(s,!1),e.lanes=4194304)}else{if(!r)if(t=Am(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Nu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!_t)return Sn(e),null}else 2*$t()-s.renderingStartTime>Gl&&n!==1073741824&&(e.flags|=128,r=!0,Nu(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$t(),e.sibling=null,n=Nt.current,ht(Nt,r?n&1|2:n&1),e):(Sn(e),null);case 22:case 23:return k_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?nr&1073741824&&(Sn(e),e.subtreeFlags&6&&(e.flags|=8192)):Sn(e),null;case 24:return null;case 25:return null}throw Error(re(156,e.tag))}function BV(t,e){switch(d_(e),e.tag){case 1:return Qn(e.type)&&ym(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ql(),bt(Xn),bt(In),b_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return x_(e),null;case 13:if(bt(Nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(re(340));Ul()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return bt(Nt),null;case 4:return ql(),null;case 10:return m_(e.type._context),null;case 22:case 23:return k_(),null;case 24:return null;default:return null}}var ep=!1,jn=!1,UV=typeof WeakSet=="function"?WeakSet:Set,he=null;function gl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){It(t,e,r)}else n.current=null}function mb(t,e,n){try{n()}catch(r){It(t,e,r)}}var iC=!1;function zV(t,e){if(Jx=hm,t=JI(),c_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(l=a+i),f!==s||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===t)break t;if(h===n&&++u===i&&(l=a),h===s&&++d===r&&(c=a),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zx={focusedElem:t,selectionRange:n},hm=!1,he=e;he!==null;)if(e=he,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,he=t;else for(;he!==null;){e=he;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,x=y.memoizedState,w=e.stateNode,b=w.getSnapshotBeforeUpdate(e.elementType===e.type?g:Ur(e.type,g),x);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(N){It(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,he=t;break}he=e.return}return y=iC,iC=!1,y}function ld(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&mb(e,n,s)}i=i.next}while(i!==r)}}function py(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gb(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function KO(t){var e=t.alternate;e!==null&&(t.alternate=null,KO(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[li],delete e[$d],delete e[nb],delete e[NV],delete e[EV])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function YO(t){return t.tag===5||t.tag===3||t.tag===4}function sC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||YO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gm));else if(r!==4&&(t=t.child,t!==null))for(yb(t,e,n),t=t.sibling;t!==null;)yb(t,e,n),t=t.sibling}function vb(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(vb(t,e,n),t=t.sibling;t!==null;)vb(t,e,n),t=t.sibling}var fn=null,zr=!1;function js(t,e,n){for(n=n.child;n!==null;)XO(t,e,n),n=n.sibling}function XO(t,e,n){if(di&&typeof di.onCommitFiberUnmount=="function")try{di.onCommitFiberUnmount(ay,n)}catch{}switch(n.tag){case 5:jn||gl(n,e);case 6:var r=fn,i=zr;fn=null,js(t,e,n),fn=r,zr=i,fn!==null&&(zr?(t=fn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):fn.removeChild(n.stateNode));break;case 18:fn!==null&&(zr?(t=fn,n=n.stateNode,t.nodeType===8?y0(t.parentNode,n):t.nodeType===1&&y0(t,n),Pd(t)):y0(fn,n.stateNode));break;case 4:r=fn,i=zr,fn=n.stateNode.containerInfo,zr=!0,js(t,e,n),fn=r,zr=i;break;case 0:case 11:case 14:case 15:if(!jn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&mb(n,e,a),i=i.next}while(i!==r)}js(t,e,n);break;case 1:if(!jn&&(gl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){It(n,e,l)}js(t,e,n);break;case 21:js(t,e,n);break;case 22:n.mode&1?(jn=(r=jn)||n.memoizedState!==null,js(t,e,n),jn=r):js(t,e,n);break;default:js(t,e,n)}}function aC(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new UV),e.forEach(function(r){var i=JV.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Fr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:fn=l.stateNode,zr=!1;break e;case 3:fn=l.stateNode.containerInfo,zr=!0;break e;case 4:fn=l.stateNode.containerInfo,zr=!0;break e}l=l.return}if(fn===null)throw Error(re(160));XO(s,a,i),fn=null,zr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){It(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)QO(e,t),e=e.sibling}function QO(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Fr(e,t),si(t),r&4){try{ld(3,t,t.return),py(3,t)}catch(g){It(t,t.return,g)}try{ld(5,t,t.return)}catch(g){It(t,t.return,g)}}break;case 1:Fr(e,t),si(t),r&512&&n!==null&&gl(n,n.return);break;case 5:if(Fr(e,t),si(t),r&512&&n!==null&&gl(n,n.return),t.flags&32){var i=t.stateNode;try{Ed(i,"")}catch(g){It(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&xI(i,s),Ux(l,a);var u=Ux(l,s);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?AI(i,f):d==="dangerouslySetInnerHTML"?_I(i,f):d==="children"?Ed(i,f):X1(i,d,f,u)}switch(l){case"input":Mx(i,s);break;case"textarea":bI(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Al(i,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?Al(i,!!s.multiple,s.defaultValue,!0):Al(i,!!s.multiple,s.multiple?[]:"",!1))}i[$d]=s}catch(g){It(t,t.return,g)}}break;case 6:if(Fr(e,t),si(t),r&4){if(t.stateNode===null)throw Error(re(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){It(t,t.return,g)}}break;case 3:if(Fr(e,t),si(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Pd(e.containerInfo)}catch(g){It(t,t.return,g)}break;case 4:Fr(e,t),si(t);break;case 13:Fr(e,t),si(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(T_=$t())),r&4&&aC(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(jn=(u=jn)||d,Fr(e,t),jn=u):Fr(e,t),si(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(he=t,d=t.child;d!==null;){for(f=he=d;he!==null;){switch(h=he,m=h.child,h.tag){case 0:case 11:case 14:case 15:ld(4,h,h.return);break;case 1:gl(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){It(r,n,g)}}break;case 5:gl(h,h.return);break;case 22:if(h.memoizedState!==null){lC(f);continue}}m!==null?(m.return=h,he=m):lC(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=SI("display",a))}catch(g){It(t,t.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){It(t,t.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Fr(e,t),si(t),r&4&&aC(t);break;case 21:break;default:Fr(e,t),si(t)}}function si(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(YO(n)){var r=n;break e}n=n.return}throw Error(re(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ed(i,""),r.flags&=-33);var s=sC(t);vb(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=sC(t);yb(t,l,a);break;default:throw Error(re(161))}}catch(c){It(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qV(t,e,n){he=t,JO(t)}function JO(t,e,n){for(var r=(t.mode&1)!==0;he!==null;){var i=he,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||ep;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||jn;l=ep;var u=jn;if(ep=a,(jn=c)&&!u)for(he=i;he!==null;)a=he,c=a.child,a.tag===22&&a.memoizedState!==null?cC(i):c!==null?(c.return=a,he=c):cC(i);for(;s!==null;)he=s,JO(s),s=s.sibling;he=i,ep=l,jn=u}oC(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,he=s):oC(t)}}function oC(t){for(;he!==null;){var e=he;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:jn||py(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!jn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ur(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&WE(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}WE(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Pd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}jn||e.flags&512&&gb(e)}catch(h){It(e,e.return,h)}}if(e===t){he=null;break}if(n=e.sibling,n!==null){n.return=e.return,he=n;break}he=e.return}}function lC(t){for(;he!==null;){var e=he;if(e===t){he=null;break}var n=e.sibling;if(n!==null){n.return=e.return,he=n;break}he=e.return}}function cC(t){for(;he!==null;){var e=he;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{py(4,e)}catch(c){It(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){It(e,i,c)}}var s=e.return;try{gb(e)}catch(c){It(e,s,c)}break;case 5:var a=e.return;try{gb(e)}catch(c){It(e,a,c)}}}catch(c){It(e,e.return,c)}if(e===t){he=null;break}var l=e.sibling;if(l!==null){l.return=e.return,he=l;break}he=e.return}}var WV=Math.ceil,Cm=ys.ReactCurrentDispatcher,C_=ys.ReactCurrentOwner,jr=ys.ReactCurrentBatchConfig,Ke=0,an=null,Vt=null,gn=0,nr=0,yl=wa(0),Qt=0,Bd=null,ho=0,my=0,j_=0,cd=null,qn=null,T_=0,Gl=1/0,Di=null,jm=!1,xb=null,ta=null,tp=!1,qs=null,Tm=0,ud=0,bb=null,Vp=-1,Bp=0;function Ln(){return Ke&6?$t():Vp!==-1?Vp:Vp=$t()}function na(t){return t.mode&1?Ke&2&&gn!==0?gn&-gn:jV.transition!==null?(Bp===0&&(Bp=DI()),Bp):(t=tt,t!==0||(t=window.event,t=t===void 0?16:zI(t.type)),t):1}function Xr(t,e,n,r){if(50<ud)throw ud=0,bb=null,Error(re(185));qf(t,n,r),(!(Ke&2)||t!==an)&&(t===an&&(!(Ke&2)&&(my|=n),Qt===4&&Ms(t,gn)),Jn(t,r),n===1&&Ke===0&&!(e.mode&1)&&(Gl=$t()+500,dy&&_a()))}function Jn(t,e){var n=t.callbackNode;jF(t,e);var r=fm(t,t===an?gn:0);if(r===0)n!==null&&vE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&vE(n),e===1)t.tag===0?CV(uC.bind(null,t)):lO(uC.bind(null,t)),SV(function(){!(Ke&6)&&_a()}),n=null;else{switch(MI(r)){case 1:n=t_;break;case 4:n=RI;break;case 16:n=dm;break;case 536870912:n=$I;break;default:n=dm}n=aR(n,ZO.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ZO(t,e){if(Vp=-1,Bp=0,Ke&6)throw Error(re(327));var n=t.callbackNode;if(Tl()&&t.callbackNode!==n)return null;var r=fm(t,t===an?gn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Pm(t,r);else{e=r;var i=Ke;Ke|=2;var s=tR();(an!==t||gn!==e)&&(Di=null,Gl=$t()+500,Za(t,e));do try{KV();break}catch(l){eR(t,l)}while(!0);p_(),Cm.current=s,Ke=i,Vt!==null?e=0:(an=null,gn=0,e=Qt)}if(e!==0){if(e===2&&(i=Hx(t),i!==0&&(r=i,e=wb(t,i))),e===1)throw n=Bd,Za(t,0),Ms(t,r),Jn(t,$t()),n;if(e===6)Ms(t,r);else{if(i=t.current.alternate,!(r&30)&&!GV(i)&&(e=Pm(t,r),e===2&&(s=Hx(t),s!==0&&(r=s,e=wb(t,s))),e===1))throw n=Bd,Za(t,0),Ms(t,r),Jn(t,$t()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(re(345));case 2:Ma(t,qn,Di);break;case 3:if(Ms(t,r),(r&130023424)===r&&(e=T_+500-$t(),10<e)){if(fm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ln(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=tb(Ma.bind(null,t,qn,Di),e);break}Ma(t,qn,Di);break;case 4:if(Ms(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Yr(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=$t()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*WV(r/1960))-r,10<r){t.timeoutHandle=tb(Ma.bind(null,t,qn,Di),r);break}Ma(t,qn,Di);break;case 5:Ma(t,qn,Di);break;default:throw Error(re(329))}}}return Jn(t,$t()),t.callbackNode===n?ZO.bind(null,t):null}function wb(t,e){var n=cd;return t.current.memoizedState.isDehydrated&&(Za(t,e).flags|=256),t=Pm(t,e),t!==2&&(e=qn,qn=n,e!==null&&_b(e)),t}function _b(t){qn===null?qn=t:qn.push.apply(qn,t)}function GV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Zr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ms(t,e){for(e&=~j_,e&=~my,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yr(e),r=1<<n;t[n]=-1,e&=~r}}function uC(t){if(Ke&6)throw Error(re(327));Tl();var e=fm(t,0);if(!(e&1))return Jn(t,$t()),null;var n=Pm(t,e);if(t.tag!==0&&n===2){var r=Hx(t);r!==0&&(e=r,n=wb(t,r))}if(n===1)throw n=Bd,Za(t,0),Ms(t,e),Jn(t,$t()),n;if(n===6)throw Error(re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ma(t,qn,Di),Jn(t,$t()),null}function P_(t,e){var n=Ke;Ke|=1;try{return t(e)}finally{Ke=n,Ke===0&&(Gl=$t()+500,dy&&_a())}}function po(t){qs!==null&&qs.tag===0&&!(Ke&6)&&Tl();var e=Ke;Ke|=1;var n=jr.transition,r=tt;try{if(jr.transition=null,tt=1,t)return t()}finally{tt=r,jr.transition=n,Ke=e,!(Ke&6)&&_a()}}function k_(){nr=yl.current,bt(yl)}function Za(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_V(n)),Vt!==null)for(n=Vt.return;n!==null;){var r=n;switch(d_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ym();break;case 3:ql(),bt(Xn),bt(In),b_();break;case 5:x_(r);break;case 4:ql();break;case 13:bt(Nt);break;case 19:bt(Nt);break;case 10:m_(r.type._context);break;case 22:case 23:k_()}n=n.return}if(an=t,Vt=t=ra(t.current,null),gn=nr=e,Qt=0,Bd=null,j_=my=ho=0,qn=cd=null,Wa!==null){for(e=0;e<Wa.length;e++)if(n=Wa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Wa=null}return t}function eR(t,e){do{var n=Vt;try{if(p_(),Mp.current=Em,Nm){for(var r=Et.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Nm=!1}if(fo=0,rn=Kt=Et=null,od=!1,Ld=0,C_.current=null,n===null||n.return===null){Qt=1,Bd=e,Vt=null;break}e:{var s=t,a=n.return,l=n,c=e;if(e=gn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=QE(a);if(m!==null){m.flags&=-257,JE(m,a,l,s,e),m.mode&1&&XE(s,u,e),e=m,c=u;var y=e.updateQueue;if(y===null){var g=new Set;g.add(c),e.updateQueue=g}else y.add(c);break e}else{if(!(e&1)){XE(s,u,e),I_();break e}c=Error(re(426))}}else if(_t&&l.mode&1){var x=QE(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),JE(x,a,l,s,e),f_(Wl(c,l));break e}}s=c=Wl(c,l),Qt!==4&&(Qt=2),cd===null?cd=[s]:cd.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=MO(s,c,e);qE(s,w);break e;case 1:l=c;var b=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ta===null||!ta.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var N=LO(s,l,e);qE(s,N);break e}}s=s.return}while(s!==null)}rR(n)}catch(S){e=S,Vt===n&&n!==null&&(Vt=n=n.return);continue}break}while(!0)}function tR(){var t=Cm.current;return Cm.current=Em,t===null?Em:t}function I_(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),an===null||!(ho&268435455)&&!(my&268435455)||Ms(an,gn)}function Pm(t,e){var n=Ke;Ke|=2;var r=tR();(an!==t||gn!==e)&&(Di=null,Za(t,e));do try{HV();break}catch(i){eR(t,i)}while(!0);if(p_(),Ke=n,Cm.current=r,Vt!==null)throw Error(re(261));return an=null,gn=0,Qt}function HV(){for(;Vt!==null;)nR(Vt)}function KV(){for(;Vt!==null&&!xF();)nR(Vt)}function nR(t){var e=sR(t.alternate,t,nr);t.memoizedProps=t.pendingProps,e===null?rR(t):Vt=e,C_.current=null}function rR(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=BV(n,e),n!==null){n.flags&=32767,Vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qt=6,Vt=null;return}}else if(n=VV(n,e,nr),n!==null){Vt=n;return}if(e=e.sibling,e!==null){Vt=e;return}Vt=e=t}while(e!==null);Qt===0&&(Qt=5)}function Ma(t,e,n){var r=tt,i=jr.transition;try{jr.transition=null,tt=1,YV(t,e,n,r)}finally{jr.transition=i,tt=r}return null}function YV(t,e,n,r){do Tl();while(qs!==null);if(Ke&6)throw Error(re(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(re(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(TF(t,s),t===an&&(Vt=an=null,gn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||tp||(tp=!0,aR(dm,function(){return Tl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=jr.transition,jr.transition=null;var a=tt;tt=1;var l=Ke;Ke|=4,C_.current=null,zV(t,n),QO(n,t),mV(Zx),hm=!!Jx,Zx=Jx=null,t.current=n,qV(n),bF(),Ke=l,tt=a,jr.transition=s}else t.current=n;if(tp&&(tp=!1,qs=t,Tm=i),s=t.pendingLanes,s===0&&(ta=null),SF(n.stateNode),Jn(t,$t()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(jm)throw jm=!1,t=xb,xb=null,t;return Tm&1&&t.tag!==0&&Tl(),s=t.pendingLanes,s&1?t===bb?ud++:(ud=0,bb=t):ud=0,_a(),null}function Tl(){if(qs!==null){var t=MI(Tm),e=jr.transition,n=tt;try{if(jr.transition=null,tt=16>t?16:t,qs===null)var r=!1;else{if(t=qs,qs=null,Tm=0,Ke&6)throw Error(re(331));var i=Ke;for(Ke|=4,he=t.current;he!==null;){var s=he,a=s.child;if(he.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(he=u;he!==null;){var d=he;switch(d.tag){case 0:case 11:case 15:ld(8,d,s)}var f=d.child;if(f!==null)f.return=d,he=f;else for(;he!==null;){d=he;var h=d.sibling,m=d.return;if(KO(d),d===u){he=null;break}if(h!==null){h.return=m,he=h;break}he=m}}}var y=s.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}he=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,he=a;else e:for(;he!==null;){if(s=he,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ld(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,he=w;break e}he=s.return}}var b=t.current;for(he=b;he!==null;){a=he;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,he=v;else e:for(a=b;he!==null;){if(l=he,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:py(9,l)}}catch(S){It(l,l.return,S)}if(l===a){he=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,he=N;break e}he=l.return}}if(Ke=i,_a(),di&&typeof di.onPostCommitFiberRoot=="function")try{di.onPostCommitFiberRoot(ay,t)}catch{}r=!0}return r}finally{tt=n,jr.transition=e}}return!1}function dC(t,e,n){e=Wl(n,e),e=MO(t,e,1),t=ea(t,e,1),e=Ln(),t!==null&&(qf(t,1,e),Jn(t,e))}function It(t,e,n){if(t.tag===3)dC(t,t,n);else for(;e!==null;){if(e.tag===3){dC(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ta===null||!ta.has(r))){t=Wl(n,t),t=LO(e,t,1),e=ea(e,t,1),t=Ln(),e!==null&&(qf(e,1,t),Jn(e,t));break}}e=e.return}}function XV(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ln(),t.pingedLanes|=t.suspendedLanes&n,an===t&&(gn&n)===n&&(Qt===4||Qt===3&&(gn&130023424)===gn&&500>$t()-T_?Za(t,0):j_|=n),Jn(t,e)}function iR(t,e){e===0&&(t.mode&1?(e=Wh,Wh<<=1,!(Wh&130023424)&&(Wh=4194304)):e=1);var n=Ln();t=rs(t,e),t!==null&&(qf(t,e,n),Jn(t,n))}function QV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),iR(t,n)}function JV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(re(314))}r!==null&&r.delete(e),iR(t,n)}var sR;sR=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Xn.current)Kn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kn=!1,FV(t,e,n);Kn=!!(t.flags&131072)}else Kn=!1,_t&&e.flags&1048576&&cO(e,bm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fp(t,e),t=e.pendingProps;var i=Bl(e,In.current);jl(e,n),i=__(null,e,r,t,i,n);var s=S_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qn(r)?(s=!0,vm(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,y_(e),i.updater=hy,e.stateNode=i,i._reactInternals=e,lb(e,r,t,n),e=db(null,e,r,!0,s,n)):(e.tag=0,_t&&s&&u_(e),Rn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=e6(r),t=Ur(r,t),i){case 0:e=ub(null,e,r,t,n);break e;case 1:e=tC(null,e,r,t,n);break e;case 11:e=ZE(null,e,r,t,n);break e;case 14:e=eC(null,e,r,Ur(r.type,t),n);break e}throw Error(re(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ur(r,i),ub(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ur(r,i),tC(t,e,r,i,n);case 3:e:{if(UO(e),t===null)throw Error(re(387));r=e.pendingProps,s=e.memoizedState,i=s.element,mO(t,e),Sm(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Wl(Error(re(423)),e),e=nC(t,e,r,n,i);break e}else if(r!==i){i=Wl(Error(re(424)),e),e=nC(t,e,r,n,i);break e}else for(lr=Zs(e.stateNode.containerInfo.firstChild),ur=e,_t=!0,Gr=null,n=hO(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ul(),r===i){e=is(t,e,n);break e}Rn(t,e,r,n)}e=e.child}return e;case 5:return gO(e),t===null&&sb(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,eb(r,i)?a=null:s!==null&&eb(r,s)&&(e.flags|=32),BO(t,e),Rn(t,e,a,n),e.child;case 6:return t===null&&sb(e),null;case 13:return zO(t,e,n);case 4:return v_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=zl(e,null,r,n):Rn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ur(r,i),ZE(t,e,r,i,n);case 7:return Rn(t,e,e.pendingProps,n),e.child;case 8:return Rn(t,e,e.pendingProps.children,n),e.child;case 12:return Rn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,ht(wm,r._currentValue),r._currentValue=a,s!==null)if(Zr(s.value,a)){if(s.children===i.children&&!Xn.current){e=is(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Yi(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),ab(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(re(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),ab(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Rn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,jl(e,n),i=kr(i),r=r(i),e.flags|=1,Rn(t,e,r,n),e.child;case 14:return r=e.type,i=Ur(r,e.pendingProps),i=Ur(r.type,i),eC(t,e,r,i,n);case 15:return FO(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ur(r,i),Fp(t,e),e.tag=1,Qn(r)?(t=!0,vm(e)):t=!1,jl(e,n),DO(e,r,i),lb(e,r,i,n),db(null,e,r,!0,t,n);case 19:return qO(t,e,n);case 22:return VO(t,e,n)}throw Error(re(156,e.tag))};function aR(t,e){return OI(t,e)}function ZV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(t,e,n,r){return new ZV(t,e,n,r)}function O_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function e6(t){if(typeof t=="function")return O_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===J1)return 11;if(t===Z1)return 14}return 2}function ra(t,e){var n=t.alternate;return n===null?(n=Er(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Up(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")O_(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ol:return eo(n.children,i,s,e);case Q1:a=8,i|=8;break;case Ix:return t=Er(12,n,e,i|2),t.elementType=Ix,t.lanes=s,t;case Ox:return t=Er(13,n,e,i),t.elementType=Ox,t.lanes=s,t;case Rx:return t=Er(19,n,e,i),t.elementType=Rx,t.lanes=s,t;case gI:return gy(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pI:a=10;break e;case mI:a=9;break e;case J1:a=11;break e;case Z1:a=14;break e;case Is:a=16,r=null;break e}throw Error(re(130,t==null?t:typeof t,""))}return e=Er(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function eo(t,e,n,r){return t=Er(7,t,r,e),t.lanes=n,t}function gy(t,e,n,r){return t=Er(22,t,r,e),t.elementType=gI,t.lanes=n,t.stateNode={isHidden:!1},t}function N0(t,e,n){return t=Er(6,t,null,e),t.lanes=n,t}function E0(t,e,n){return e=Er(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function t6(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=a0(0),this.expirationTimes=a0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=a0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function R_(t,e,n,r,i,s,a,l,c){return t=new t6(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Er(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},y_(s),t}function n6(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:al,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function oR(t){if(!t)return fa;t=t._reactInternals;e:{if(Oo(t)!==t||t.tag!==1)throw Error(re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(re(171))}if(t.tag===1){var n=t.type;if(Qn(n))return oO(t,n,e)}return e}function lR(t,e,n,r,i,s,a,l,c){return t=R_(n,r,!0,t,i,s,a,l,c),t.context=oR(null),n=t.current,r=Ln(),i=na(n),s=Yi(r,i),s.callback=e??null,ea(n,s,i),t.current.lanes=i,qf(t,i,r),Jn(t,r),t}function yy(t,e,n,r){var i=e.current,s=Ln(),a=na(i);return n=oR(n),e.context===null?e.context=n:e.pendingContext=n,e=Yi(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ea(i,e,a),t!==null&&(Xr(t,i,a,s),Dp(t,i,a)),a}function km(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function fC(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $_(t,e){fC(t,e),(t=t.alternate)&&fC(t,e)}function r6(){return null}var cR=typeof reportError=="function"?reportError:function(t){console.error(t)};function D_(t){this._internalRoot=t}vy.prototype.render=D_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(re(409));yy(t,e,null,null)};vy.prototype.unmount=D_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;po(function(){yy(null,t,null,null)}),e[ns]=null}};function vy(t){this._internalRoot=t}vy.prototype.unstable_scheduleHydration=function(t){if(t){var e=VI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ds.length&&e!==0&&e<Ds[n].priority;n++);Ds.splice(n,0,t),n===0&&UI(t)}};function M_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hC(){}function i6(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=km(a);s.call(u)}}var a=lR(e,r,t,0,null,!1,!1,"",hC);return t._reactRootContainer=a,t[ns]=a.current,Od(t.nodeType===8?t.parentNode:t),po(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=km(c);l.call(u)}}var c=R_(t,0,!1,null,null,!1,!1,"",hC);return t._reactRootContainer=c,t[ns]=c.current,Od(t.nodeType===8?t.parentNode:t),po(function(){yy(e,c,n,r)}),c}function by(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var c=km(a);l.call(c)}}yy(e,a,t,i)}else a=i6(n,e,t,i,r);return km(a)}LI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qu(e.pendingLanes);n!==0&&(n_(e,n|1),Jn(e,$t()),!(Ke&6)&&(Gl=$t()+500,_a()))}break;case 13:po(function(){var r=rs(t,1);if(r!==null){var i=Ln();Xr(r,t,1,i)}}),$_(t,1)}};r_=function(t){if(t.tag===13){var e=rs(t,134217728);if(e!==null){var n=Ln();Xr(e,t,134217728,n)}$_(t,134217728)}};FI=function(t){if(t.tag===13){var e=na(t),n=rs(t,e);if(n!==null){var r=Ln();Xr(n,t,e,r)}$_(t,e)}};VI=function(){return tt};BI=function(t,e){var n=tt;try{return tt=t,e()}finally{tt=n}};qx=function(t,e,n){switch(e){case"input":if(Mx(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=uy(r);if(!i)throw Error(re(90));vI(r),Mx(r,i)}}}break;case"textarea":bI(t,n);break;case"select":e=n.value,e!=null&&Al(t,!!n.multiple,e,!1)}};CI=P_;jI=po;var s6={usingClientEntryPoint:!1,Events:[Gf,dl,uy,NI,EI,P_]},Eu={findFiberByHostInstance:qa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},a6={bundleType:Eu.bundleType,version:Eu.version,rendererPackageName:Eu.rendererPackageName,rendererConfig:Eu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ys.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=kI(t),t===null?null:t.stateNode},findFiberByHostInstance:Eu.findFiberByHostInstance||r6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var np=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!np.isDisabled&&np.supportsFiber)try{ay=np.inject(a6),di=np}catch{}}mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s6;mr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!M_(e))throw Error(re(200));return n6(t,e,null,n)};mr.createRoot=function(t,e){if(!M_(t))throw Error(re(299));var n=!1,r="",i=cR;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=R_(t,1,!1,null,null,n,!1,r,i),t[ns]=e.current,Od(t.nodeType===8?t.parentNode:t),new D_(e)};mr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(re(188)):(t=Object.keys(t).join(","),Error(re(268,t)));return t=kI(e),t=t===null?null:t.stateNode,t};mr.flushSync=function(t){return po(t)};mr.hydrate=function(t,e,n){if(!xy(e))throw Error(re(200));return by(null,t,e,!0,n)};mr.hydrateRoot=function(t,e,n){if(!M_(t))throw Error(re(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=cR;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=lR(e,null,t,1,n??null,i,!1,s,a),t[ns]=e.current,Od(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new vy(e)};mr.render=function(t,e,n){if(!xy(e))throw Error(re(200));return by(null,t,e,!1,n)};mr.unmountComponentAtNode=function(t){if(!xy(t))throw Error(re(40));return t._reactRootContainer?(po(function(){by(null,null,t,!1,function(){t._reactRootContainer=null,t[ns]=null})}),!0):!1};mr.unstable_batchedUpdates=P_;mr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xy(n))throw Error(re(200));if(t==null||t._reactInternals===void 0)throw Error(re(38));return by(t,e,n,!1,r)};mr.version="18.3.1-next-f1338f8080-20240426";function uR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uR)}catch(t){console.error(t)}}uR(),uI.exports=mr;var o6=uI.exports,pC=o6;Px.createRoot=pC.createRoot,Px.hydrateRoot=pC.hydrateRoot;/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var mC="popstate";function l6(t={}){function e(r,i){let{pathname:s,search:a,hash:l}=r.location;return Sb("",{pathname:s,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Ud(i)}return u6(e,n,null,t)}function At(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Or(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function c6(){return Math.random().toString(36).substring(2,10)}function gC(t,e){return{usr:t.state,key:t.key,idx:e}}function Sb(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?$c(e):e,state:n,key:e&&e.key||r||c6()}}function Ud({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function $c(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function u6(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,l="POP",c=null,u=d();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function d(){return(a.state||{idx:null}).idx}function f(){l="POP";let x=d(),w=x==null?null:x-u;u=x,c&&c({action:l,location:g.location,delta:w})}function h(x,w){l="PUSH";let b=Sb(g.location,x,w);u=d()+1;let v=gC(b,u),N=g.createHref(b);try{a.pushState(v,"",N)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(N)}s&&c&&c({action:l,location:g.location,delta:1})}function m(x,w){l="REPLACE";let b=Sb(g.location,x,w);u=d();let v=gC(b,u),N=g.createHref(b);a.replaceState(v,"",N),s&&c&&c({action:l,location:g.location,delta:0})}function y(x){return d6(x)}let g={get action(){return l},get location(){return t(i,a)},listen(x){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(mC,f),c=x,()=>{i.removeEventListener(mC,f),c=null}},createHref(x){return e(i,x)},createURL:y,encodeLocation(x){let w=y(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:h,replace:m,go(x){return a.go(x)}};return g}function d6(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),At(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Ud(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function dR(t,e,n="/"){return f6(t,e,n,!1)}function f6(t,e,n,r){let i=typeof e=="string"?$c(e):e,s=ss(i.pathname||"/",n);if(s==null)return null;let a=fR(t);h6(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=A6(s);l=_6(a[c],u,r)}return l}function fR(t,e=[],n=[],r="",i=!1){let s=(a,l,c=i,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&c)return;At(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let f=Xi([r,d.relativePath]),h=n.concat(d);a.children&&a.children.length>0&&(At(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),fR(a.children,e,h,f,c)),!(a.path==null&&!a.index)&&e.push({path:f,score:b6(f,a.index),routesMeta:h})};return t.forEach((a,l)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))s(a,l);else for(let u of hR(a.path))s(a,l,!0,u)}),e}function hR(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let a=hR(r.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...a),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function h6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:w6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var p6=/^:[\w-]+$/,m6=3,g6=2,y6=1,v6=10,x6=-2,yC=t=>t==="*";function b6(t,e){let n=t.split("/"),r=n.length;return n.some(yC)&&(r+=x6),e&&(r+=g6),n.filter(i=>!yC(i)).reduce((i,s)=>i+(p6.test(s)?m6:s===""?y6:v6),r)}function w6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function _6(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=Im({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=Im({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),a.push({params:i,pathname:Xi([s,f.pathname]),pathnameBase:j6(Xi([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=Xi([s,f.pathnameBase]))}return a}function Im(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=S6(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let y=l[h]||"";a=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const m=l[h];return f&&!m?u[d]=void 0:u[d]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:t}}function S6(t,e=!1,n=!0){Or(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function A6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Or(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ss(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var N6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function E6(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?$c(t):t,s;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?s=vC(n.substring(1),"/"):s=vC(n,e)):s=e,{pathname:s,search:T6(r),hash:P6(i)}}function vC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function C0(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function C6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function L_(t){let e=C6(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function F_(t,e,n,r=!1){let i;typeof t=="string"?i=$c(t):(i={...t},At(!i.pathname||!i.pathname.includes("?"),C0("?","pathname","search",i)),At(!i.pathname||!i.pathname.includes("#"),C0("#","pathname","hash",i)),At(!i.search||!i.search.includes("#"),C0("#","search","hash",i)));let s=t===""||i.pathname==="",a=s?"/":i.pathname,l;if(a==null)l=n;else{let f=e.length-1;if(!r&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}l=f>=0?e[f]:"/"}let c=E6(i,l),u=a&&a!=="/"&&a.endsWith("/"),d=(s||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var Xi=t=>t.join("/").replace(/\/\/+/g,"/"),j6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),T6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,P6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,k6=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function I6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function O6(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var pR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function mR(t,e){let n=t;if(typeof n!="string"||!N6.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(pR)try{let s=new URL(window.location.href),a=n.startsWith("//")?new URL(s.protocol+n):new URL(n),l=ss(a.pathname,e);a.origin===s.origin&&l!=null?n=l+a.search+a.hash:i=!0}catch{Or(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var gR=["POST","PUT","PATCH","DELETE"];new Set(gR);var R6=["GET",...gR];new Set(R6);var Dc=k.createContext(null);Dc.displayName="DataRouter";var wy=k.createContext(null);wy.displayName="DataRouterState";var $6=k.createContext(!1),yR=k.createContext({isTransitioning:!1});yR.displayName="ViewTransition";var D6=k.createContext(new Map);D6.displayName="Fetchers";var M6=k.createContext(null);M6.displayName="Await";var yr=k.createContext(null);yr.displayName="Navigation";var Kf=k.createContext(null);Kf.displayName="Location";var Ci=k.createContext({outlet:null,matches:[],isDataRoute:!1});Ci.displayName="Route";var V_=k.createContext(null);V_.displayName="RouteError";var vR="REACT_ROUTER_ERROR",L6="REDIRECT",F6="ROUTE_ERROR_RESPONSE";function V6(t){if(t.startsWith(`${vR}:${L6}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function B6(t){if(t.startsWith(`${vR}:${F6}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new k6(e.status,e.statusText,e.data)}catch{}}function U6(t,{relative:e}={}){At(Mc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=k.useContext(yr),{hash:i,pathname:s,search:a}=Yf(t,{relative:e}),l=s;return n!=="/"&&(l=s==="/"?n:Xi([n,s])),r.createHref({pathname:l,search:a,hash:i})}function Mc(){return k.useContext(Kf)!=null}function ji(){return At(Mc(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Kf).location}var xR="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bR(t){k.useContext(yr).static||k.useLayoutEffect(t)}function _y(){let{isDataRoute:t}=k.useContext(Ci);return t?tB():z6()}function z6(){At(Mc(),"useNavigate() may be used only in the context of a <Router> component.");let t=k.useContext(Dc),{basename:e,navigator:n}=k.useContext(yr),{matches:r}=k.useContext(Ci),{pathname:i}=ji(),s=JSON.stringify(L_(r)),a=k.useRef(!1);return bR(()=>{a.current=!0}),k.useCallback((c,u={})=>{if(Or(a.current,xR),!a.current)return;if(typeof c=="number"){n.go(c);return}let d=F_(c,JSON.parse(s),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Xi([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,s,i,t])}k.createContext(null);function Yf(t,{relative:e}={}){let{matches:n}=k.useContext(Ci),{pathname:r}=ji(),i=JSON.stringify(L_(n));return k.useMemo(()=>F_(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function q6(t,e){return wR(t,e)}function wR(t,e,n,r,i){var b;At(Mc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=k.useContext(yr),{matches:a}=k.useContext(Ci),l=a[a.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",f=l&&l.route;{let v=f&&f.path||"";SR(u,!f||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let h=ji(),m;if(e){let v=typeof e=="string"?$c(e):e;At(d==="/"||((b=v.pathname)==null?void 0:b.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${v.pathname}" was given in the \`location\` prop.`),m=v}else m=h;let y=m.pathname||"/",g=y;if(d!=="/"){let v=d.replace(/^\//,"").split("/");g="/"+y.replace(/^\//,"").split("/").slice(v.length).join("/")}let x=dR(t,{pathname:g});Or(f||x!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Or(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=Y6(x&&x.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:Xi([d,s.encodeLocation?s.encodeLocation(v.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?d:Xi([d,s.encodeLocation?s.encodeLocation(v.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathnameBase])})),a,n,r,i);return e&&w?k.createElement(Kf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},w):w}function W6(){let t=eB(),e=I6(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:s},"ErrorBoundary")," or"," ",k.createElement("code",{style:s},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:i},n):null,a)}var G6=k.createElement(W6,null),_R=class extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=B6(t.digest);n&&(t=n)}let e=t!==void 0?k.createElement(Ci.Provider,{value:this.props.routeContext},k.createElement(V_.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?k.createElement(H6,{error:t},e):e}};_R.contextType=$6;var j0=new WeakMap;function H6({children:t,error:e}){let{basename:n}=k.useContext(yr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=V6(e.digest);if(r){let i=j0.get(e);if(i)throw i;let s=mR(r.location,n);if(pR&&!j0.get(e))if(s.isExternal||r.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:r.replace}));throw j0.set(e,a),a}return k.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return t}function K6({routeContext:t,match:e,children:n}){let r=k.useContext(Dc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(Ci.Provider,{value:t},n)}function Y6(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n==null?void 0:n.errors;if(a!=null){let d=s.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);At(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,d+1))}let l=!1,c=-1;if(n)for(let d=0;d<s.length;d++){let f=s[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:h,errors:m}=n,y=f.route.loader&&!h.hasOwnProperty(f.route.id)&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}let u=n&&r?(d,f)=>{var h,m;r(d,{location:n.location,params:((m=(h=n.matches)==null?void 0:h[0])==null?void 0:m.params)??{},unstable_pattern:O6(n.matches),errorInfo:f})}:void 0;return s.reduceRight((d,f,h)=>{let m,y=!1,g=null,x=null;n&&(m=a&&f.route.id?a[f.route.id]:void 0,g=f.route.errorElement||G6,l&&(c<0&&h===0?(SR("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,x=null):c===h&&(y=!0,x=f.route.hydrateFallbackElement||null)));let w=e.concat(s.slice(0,h+1)),b=()=>{let v;return m?v=g:y?v=x:f.route.Component?v=k.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=d,k.createElement(K6,{match:f,routeContext:{outlet:d,matches:w,isDataRoute:n!=null},children:v})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?k.createElement(_R,{location:n.location,revalidation:n.revalidation,component:g,error:m,children:b(),routeContext:{outlet:null,matches:w,isDataRoute:!0},onError:u}):b()},null)}function B_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function X6(t){let e=k.useContext(Dc);return At(e,B_(t)),e}function Q6(t){let e=k.useContext(wy);return At(e,B_(t)),e}function J6(t){let e=k.useContext(Ci);return At(e,B_(t)),e}function U_(t){let e=J6(t),n=e.matches[e.matches.length-1];return At(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Z6(){return U_("useRouteId")}function eB(){var r;let t=k.useContext(V_),e=Q6("useRouteError"),n=U_("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function tB(){let{router:t}=X6("useNavigate"),e=U_("useNavigate"),n=k.useRef(!1);return bR(()=>{n.current=!0}),k.useCallback(async(i,s={})=>{Or(n.current,xR),n.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var xC={};function SR(t,e,n){!e&&!xC[t]&&(xC[t]=!0,Or(!1,n))}k.memo(nB);function nB({routes:t,future:e,state:n,onError:r}){return wR(t,void 0,n,r,e)}function rB({to:t,replace:e,state:n,relative:r}){At(Mc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=k.useContext(yr);Or(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=k.useContext(Ci),{pathname:a}=ji(),l=_y(),c=F_(t,L_(s),a,r==="path"),u=JSON.stringify(c);return k.useEffect(()=>{l(JSON.parse(u),{replace:e,state:n,relative:r})},[l,u,r,e,n]),null}function wr(t){At(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function iB({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1,unstable_useTransitions:a}){At(!Mc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=k.useMemo(()=>({basename:l,navigator:i,static:s,unstable_useTransitions:a,future:{}}),[l,i,s,a]);typeof n=="string"&&(n=$c(n));let{pathname:u="/",search:d="",hash:f="",state:h=null,key:m="default"}=n,y=k.useMemo(()=>{let g=ss(u,l);return g==null?null:{location:{pathname:g,search:d,hash:f,state:h,key:m},navigationType:r}},[l,u,d,f,h,m,r]);return Or(y!=null,`<Router basename="${l}"> is not able to match the URL "${u}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:k.createElement(yr.Provider,{value:c},k.createElement(Kf.Provider,{children:e,value:y}))}function sB({children:t,location:e}){return q6(Ab(t),e)}function Ab(t,e=[]){let n=[];return k.Children.forEach(t,(r,i)=>{if(!k.isValidElement(r))return;let s=[...e,i];if(r.type===k.Fragment){n.push.apply(n,Ab(r.props.children,s));return}At(r.type===wr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),At(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Ab(r.props.children,s)),n.push(a)}),n}var zp="get",qp="application/x-www-form-urlencoded";function Sy(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function aB(t){return Sy(t)&&t.tagName.toLowerCase()==="button"}function oB(t){return Sy(t)&&t.tagName.toLowerCase()==="form"}function lB(t){return Sy(t)&&t.tagName.toLowerCase()==="input"}function cB(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function uB(t,e){return t.button===0&&(!e||e==="_self")&&!cB(t)}function Nb(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function dB(t,e){let n=Nb(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}var rp=null;function fB(){if(rp===null)try{new FormData(document.createElement("form"),0),rp=!1}catch{rp=!0}return rp}var hB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function T0(t){return t!=null&&!hB.has(t)?(Or(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qp}"`),null):t}function pB(t,e){let n,r,i,s,a;if(oB(t)){let l=t.getAttribute("action");r=l?ss(l,e):null,n=t.getAttribute("method")||zp,i=T0(t.getAttribute("enctype"))||qp,s=new FormData(t)}else if(aB(t)||lB(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(r=c?ss(c,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||zp,i=T0(t.getAttribute("formenctype"))||T0(l.getAttribute("enctype"))||qp,s=new FormData(l,t),!fB()){let{name:u,type:d,value:f}=t;if(d==="image"){let h=u?`${u}.`:"";s.append(`${h}x`,"0"),s.append(`${h}y`,"0")}else u&&s.append(u,f)}}else{if(Sy(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=zp,r=null,i=qp,a=t}return s&&i==="text/plain"&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function z_(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mB(t,e,n,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&ss(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function gB(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yB(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function vB(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let a=await gB(s,n);return a.links?a.links():[]}return[]}));return _B(r.flat(1).filter(yB).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function bC(t,e,n,r,i,s){let a=(c,u)=>n[u]?c.route.id!==n[u].route.id:!0,l=(c,u)=>{var d;return n[u].pathname!==c.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,u)=>a(c,u)||l(c,u)):s==="data"?e.filter((c,u)=>{var f;let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(a(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function xB(t,e,{includeHydrateFallback:n}={}){return bB(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function bB(t){return[...new Set(t)]}function wB(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function _B(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let s=JSON.stringify(wB(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function AR(){let t=k.useContext(Dc);return z_(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function SB(){let t=k.useContext(wy);return z_(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var q_=k.createContext(void 0);q_.displayName="FrameworkContext";function NR(){let t=k.useContext(q_);return z_(t,"You must render this element inside a <HydratedRouter> element"),t}function AB(t,e){let n=k.useContext(q_),[r,i]=k.useState(!1),[s,a]=k.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=e,h=k.useRef(null);k.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let g=w=>{w.forEach(b=>{a(b.isIntersecting)})},x=new IntersectionObserver(g,{threshold:.5});return h.current&&x.observe(h.current),()=>{x.disconnect()}}},[t]),k.useEffect(()=>{if(r){let g=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(g)}}},[r]);let m=()=>{i(!0)},y=()=>{i(!1),a(!1)};return n?t!=="intent"?[s,h,{}]:[s,h,{onFocus:Cu(l,m),onBlur:Cu(c,y),onMouseEnter:Cu(u,m),onMouseLeave:Cu(d,y),onTouchStart:Cu(f,m)}]:[!1,h,{}]}function Cu(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function NB({page:t,...e}){let{router:n}=AR(),r=k.useMemo(()=>dR(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?k.createElement(CB,{page:t,matches:r,...e}):null}function EB(t){let{manifest:e,routeModules:n}=NR(),[r,i]=k.useState([]);return k.useEffect(()=>{let s=!1;return vB(t,e,n).then(a=>{s||i(a)}),()=>{s=!0}},[t,e,n]),r}function CB({page:t,matches:e,...n}){let r=ji(),{future:i,manifest:s,routeModules:a}=NR(),{basename:l}=AR(),{loaderData:c,matches:u}=SB(),d=k.useMemo(()=>bC(t,e,u,s,r,"data"),[t,e,u,s,r]),f=k.useMemo(()=>bC(t,e,u,s,r,"assets"),[t,e,u,s,r]),h=k.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let g=new Set,x=!1;if(e.forEach(b=>{var N;let v=s.routes[b.route.id];!v||!v.hasLoader||(!d.some(S=>S.route.id===b.route.id)&&b.route.id in c&&((N=a[b.route.id])!=null&&N.shouldRevalidate)||v.hasClientLoader?x=!0:g.add(b.route.id))}),g.size===0)return[];let w=mB(t,l,i.unstable_trailingSlashAwareDataRequests,"data");return x&&g.size>0&&w.searchParams.set("_routes",e.filter(b=>g.has(b.route.id)).map(b=>b.route.id).join(",")),[w.pathname+w.search]},[l,i.unstable_trailingSlashAwareDataRequests,c,r,s,d,e,t,a]),m=k.useMemo(()=>xB(f,s),[f,s]),y=EB(f);return k.createElement(k.Fragment,null,h.map(g=>k.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),m.map(g=>k.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),y.map(({key:g,link:x})=>k.createElement("link",{key:g,nonce:n.nonce,...x,crossOrigin:x.crossOrigin??n.crossOrigin})))}function jB(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var TB=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{TB&&(window.__reactRouterVersion="7.13.0")}catch{}function PB({basename:t,children:e,unstable_useTransitions:n,window:r}){let i=k.useRef();i.current==null&&(i.current=l6({window:r,v5Compat:!0}));let s=i.current,[a,l]=k.useState({action:s.action,location:s.location}),c=k.useCallback(u=>{n===!1?l(u):k.startTransition(()=>l(u))},[n]);return k.useLayoutEffect(()=>s.listen(c),[s,c]),k.createElement(iB,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:s,unstable_useTransitions:n})}var ER=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,CR=k.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:h,...m},y){let{basename:g,unstable_useTransitions:x}=k.useContext(yr),w=typeof u=="string"&&ER.test(u),b=mR(u,g);u=b.to;let v=U6(u,{relative:i}),[N,S,A]=AB(r,m),E=OB(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:i,viewTransition:f,unstable_defaultShouldRevalidate:h,unstable_useTransitions:x});function _(P){e&&e(P),P.defaultPrevented||E(P)}let C=k.createElement("a",{...m,...A,href:b.absoluteURL||v,onClick:b.isExternal||s?e:_,ref:jB(y,S),target:c,"data-discover":!w&&n==="render"?"true":void 0});return N&&!w?k.createElement(k.Fragment,null,C,k.createElement(NB,{page:v})):C});CR.displayName="Link";var Eb=k.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:a,viewTransition:l,children:c,...u},d){let f=Yf(a,{relative:u.relative}),h=ji(),m=k.useContext(wy),{navigator:y,basename:g}=k.useContext(yr),x=m!=null&&LB(f)&&l===!0,w=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,b=h.pathname,v=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(b=b.toLowerCase(),v=v?v.toLowerCase():null,w=w.toLowerCase()),v&&g&&(v=ss(v,g)||v);const N=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let S=b===w||!i&&b.startsWith(w)&&b.charAt(N)==="/",A=v!=null&&(v===w||!i&&v.startsWith(w)&&v.charAt(w.length)==="/"),E={isActive:S,isPending:A,isTransitioning:x},_=S?e:void 0,C;typeof r=="function"?C=r(E):C=[r,S?"active":null,A?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let P=typeof s=="function"?s(E):s;return k.createElement(CR,{...u,"aria-current":_,className:C,ref:d,style:P,to:a,viewTransition:l},typeof c=="function"?c(E):c)});Eb.displayName="NavLink";var kB=k.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:a=zp,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:h,...m},y)=>{let{unstable_useTransitions:g}=k.useContext(yr),x=DB(),w=MB(l,{relative:u}),b=a.toLowerCase()==="get"?"get":"post",v=typeof l=="string"&&ER.test(l),N=S=>{if(c&&c(S),S.defaultPrevented)return;S.preventDefault();let A=S.nativeEvent.submitter,E=(A==null?void 0:A.getAttribute("formmethod"))||a,_=()=>x(A||S.currentTarget,{fetcherKey:e,method:E,navigate:n,replace:i,state:s,relative:u,preventScrollReset:d,viewTransition:f,unstable_defaultShouldRevalidate:h});g&&n!==!1?k.startTransition(()=>_()):_()};return k.createElement("form",{ref:y,method:b,action:w,onSubmit:r?c:N,...m,"data-discover":!v&&t==="render"?"true":void 0})});kB.displayName="Form";function IB(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jR(t){let e=k.useContext(Dc);return At(e,IB(t)),e}function OB(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:l,unstable_useTransitions:c}={}){let u=_y(),d=ji(),f=Yf(t,{relative:s});return k.useCallback(h=>{if(uB(h,e)){h.preventDefault();let m=n!==void 0?n:Ud(d)===Ud(f),y=()=>u(t,{replace:m,state:r,preventScrollReset:i,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:l});c?k.startTransition(()=>y()):y()}},[d,u,f,n,r,e,t,i,s,a,l,c])}function W_(t){Or(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=k.useRef(Nb(t)),n=k.useRef(!1),r=ji(),i=k.useMemo(()=>dB(r.search,n.current?null:e.current),[r.search]),s=_y(),a=k.useCallback((l,c)=>{const u=Nb(typeof l=="function"?l(new URLSearchParams(i)):l);n.current=!0,s("?"+u,c)},[s,i]);return[i,a]}var RB=0,$B=()=>`__${String(++RB)}__`;function DB(){let{router:t}=jR("useSubmit"),{basename:e}=k.useContext(yr),n=Z6(),r=t.fetch,i=t.navigate;return k.useCallback(async(s,a={})=>{let{action:l,method:c,encType:u,formData:d,body:f}=pB(s,e);if(a.navigate===!1){let h=a.fetcherKey||$B();await r(h,n,a.action||l,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||c,formEncType:a.encType||u,flushSync:a.flushSync})}else await i(a.action||l,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||c,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,i,e,n])}function MB(t,{relative:e}={}){let{basename:n}=k.useContext(yr),r=k.useContext(Ci);At(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Yf(t||".",{relative:e})},a=ji();if(t==null){s.search=a.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();s.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:Xi([n,s.pathname])),Ud(s)}function LB(t,{relative:e}={}){let n=k.useContext(yR);At(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=jR("useViewTransitionState"),i=Yf(t,{relative:e});if(!n.isTransitioning)return!1;let s=ss(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=ss(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Im(i.pathname,a)!=null||Im(i.pathname,s)!=null}/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),le=(t,e)=>{const n=k.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:l="",children:c,...u},d)=>k.createElement("svg",{ref:d,...FB,width:i,height:i,stroke:r,strokeWidth:a?Number(s)*24/Number(i):s,className:["lucide",`lucide-${VB(t)}`,l].join(" "),...u},[...e.map(([f,h])=>k.createElement(f,h)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=le("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=le("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BB=le("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G_=le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UB=le("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zB=le("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=le("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=le("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=le("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dd=le("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=le("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=le("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=le("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.25V14",key:"re2vv1"}],["path",{d:"M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z",key:"ame013"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=le("CalendarPlus",[["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["line",{x1:"19",x2:"19",y1:"16",y2:"22",key:"1ttwzi"}],["line",{x1:"16",x2:"22",y1:"19",y2:"19",key:"1g9955"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=le("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=le("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=le("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=le("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H_=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=le("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=le("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K_=le("ChevronsLeft",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y_=le("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=le("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=le("Contact",[["path",{d:"M17 18a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2",key:"1mghuy"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["circle",{cx:"12",cy:"10",r:"2",key:"1yojzk"}],["line",{x1:"8",x2:"8",y1:"2",y2:"4",key:"1ff9gb"}],["line",{x1:"16",x2:"16",y1:"2",y2:"4",key:"1ufoma"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=le("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=le("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=le("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=le("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=le("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=le("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QB=le("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=le("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=le("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X_=le("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=le("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eU=le("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=le("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=le("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tU=le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=le("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=le("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nU=le("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rU=le("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iU=le("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=le("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sU=le("PhoneMissed",[["line",{x1:"22",x2:"16",y1:"2",y2:"8",key:"1xzwqn"}],["line",{x1:"16",x2:"22",y1:"2",y2:"8",key:"13zxdn"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aU=le("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=le("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oU=le("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=le("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q_=le("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=le("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=le("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $m=le("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=le("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lU=le("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cU=le("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=le("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uU=le("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=le("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=le("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fU=le("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=le("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=le("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=le("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=le("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var AC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},hU=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},OR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let h=(l&15)<<2|u>>6,m=u&63;c||(m=64,a||(h=64)),r.push(n[d],n[f],n[h],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(IR(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):hU(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||f==null)throw new pU;const h=s<<2|l>>4;if(r.push(h),u!==64){const m=l<<4&240|u>>2;if(r.push(m),f!==64){const y=u<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pU extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mU=function(t){const e=IR(t);return OR.encodeByteArray(e,!0)},Lm=function(t){return mU(t).replace(/\./g,"")},RR=function(t){try{return OR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU=()=>gU().__FIREBASE_DEFAULTS__,vU=()=>{if(typeof process>"u"||typeof AC>"u")return;const t=AC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xU=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&RR(t[1]);return e&&JSON.parse(e)},Ny=()=>{try{return yU()||vU()||xU()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$R=t=>{var e,n;return(n=(e=Ny())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},DR=t=>{const e=$R(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},MR=()=>{var t;return(t=Ny())===null||t===void 0?void 0:t.config},LR=t=>{var e;return(e=Ny())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bU{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Lm(JSON.stringify(n)),Lm(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _U(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(On())}function SU(){var t;const e=(t=Ny())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AU(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NU(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function EU(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CU(){const t=On();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function jU(){return!SU()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TU(){try{return typeof indexedDB=="object"}catch{return!1}}function PU(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU="FirebaseError";class vs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kU,Object.setPrototypeOf(this,vs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xf.prototype.create)}}class Xf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?IU(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new vs(i,l,r)}}function IU(t,e){return t.replace(OU,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const OU=/\{\$([^}]+)}/g;function RU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(NC(s)&&NC(a)){if(!Hd(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function NC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $U(t,e){const n=new DU(t,e);return n.subscribe.bind(n)}class DU{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");MU(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=P0),i.error===void 0&&(i.error=P0),i.complete===void 0&&(i.complete=P0);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MU(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function P0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(t){return t&&t._delegate?t._delegate:t}class ma{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LU{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new bU;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VU(e))try{this.getOrInitializeService({instanceIdentifier:La})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=La){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=La){return this.instances.has(e)}getOptions(e=La){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FU(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=La){return this.component?this.component.multipleInstances?e:La:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FU(t){return t===La?void 0:t}function VU(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new LU(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ue||(Ue={}));const UU={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},zU=Ue.INFO,qU={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},WU=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=qU[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class J_{constructor(e){this.name=e,this._logLevel=zU,this._logHandler=WU,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UU[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const GU=(t,e)=>e.some(n=>t instanceof n);let EC,CC;function HU(){return EC||(EC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KU(){return CC||(CC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FR=new WeakMap,kb=new WeakMap,VR=new WeakMap,k0=new WeakMap,Z_=new WeakMap;function YU(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(sa(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&FR.set(n,t)}).catch(()=>{}),Z_.set(e,t),e}function XU(t){if(kb.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});kb.set(t,e)}let Ib={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||VR.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return sa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QU(t){Ib=t(Ib)}function JU(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(I0(this),e,...n);return VR.set(r,e.sort?e.sort():[e]),sa(r)}:KU().includes(t)?function(...e){return t.apply(I0(this),e),sa(FR.get(this))}:function(...e){return sa(t.apply(I0(this),e))}}function ZU(t){return typeof t=="function"?JU(t):(t instanceof IDBTransaction&&XU(t),GU(t,HU())?new Proxy(t,Ib):t)}function sa(t){if(t instanceof IDBRequest)return YU(t);if(k0.has(t))return k0.get(t);const e=ZU(t);return e!==t&&(k0.set(t,e),Z_.set(e,t)),e}const I0=t=>Z_.get(t);function e9(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=sa(a);return r&&a.addEventListener("upgradeneeded",c=>{r(sa(a.result),c.oldVersion,c.newVersion,sa(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const t9=["get","getKey","getAll","getAllKeys","count"],n9=["put","add","delete","clear"],O0=new Map;function jC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(O0.get(e))return O0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=n9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||t9.includes(n)))return;const s=async function(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&c.done]))[0]};return O0.set(e,s),s}QU(t=>({...t,get:(e,n,r)=>jC(e,n)||t.get(e,n,r),has:(e,n)=>!!jC(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(i9(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function i9(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ob="@firebase/app",TC="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=new J_("@firebase/app"),s9="@firebase/app-compat",a9="@firebase/analytics-compat",o9="@firebase/analytics",l9="@firebase/app-check-compat",c9="@firebase/app-check",u9="@firebase/auth",d9="@firebase/auth-compat",f9="@firebase/database",h9="@firebase/data-connect",p9="@firebase/database-compat",m9="@firebase/functions",g9="@firebase/functions-compat",y9="@firebase/installations",v9="@firebase/installations-compat",x9="@firebase/messaging",b9="@firebase/messaging-compat",w9="@firebase/performance",_9="@firebase/performance-compat",S9="@firebase/remote-config",A9="@firebase/remote-config-compat",N9="@firebase/storage",E9="@firebase/storage-compat",C9="@firebase/firestore",j9="@firebase/vertexai-preview",T9="@firebase/firestore-compat",P9="firebase",k9="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="[DEFAULT]",I9={[Ob]:"fire-core",[s9]:"fire-core-compat",[o9]:"fire-analytics",[a9]:"fire-analytics-compat",[c9]:"fire-app-check",[l9]:"fire-app-check-compat",[u9]:"fire-auth",[d9]:"fire-auth-compat",[f9]:"fire-rtdb",[h9]:"fire-data-connect",[p9]:"fire-rtdb-compat",[m9]:"fire-fn",[g9]:"fire-fn-compat",[y9]:"fire-iid",[v9]:"fire-iid-compat",[x9]:"fire-fcm",[b9]:"fire-fcm-compat",[w9]:"fire-perf",[_9]:"fire-perf-compat",[S9]:"fire-rc",[A9]:"fire-rc-compat",[N9]:"fire-gcs",[E9]:"fire-gcs-compat",[C9]:"fire-fst",[T9]:"fire-fst-compat",[j9]:"fire-vertex","fire-js":"fire-js",[P9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm=new Map,O9=new Map,$b=new Map;function PC(t,e){try{t.container.addComponent(e)}catch(n){ls.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xo(t){const e=t.name;if($b.has(e))return ls.debug(`There were multiple attempts to register component ${e}.`),!1;$b.set(e,t);for(const n of Fm.values())PC(n,t);for(const n of O9.values())PC(n,t);return!0}function Ey(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ws(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},aa=new Xf("app","Firebase",R9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw aa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=k9;function BR(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Rb,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw aa.create("bad-app-name",{appName:String(i)});if(n||(n=MR()),!n)throw aa.create("no-options");const s=Fm.get(i);if(s){if(Hd(n,s.options)&&Hd(r,s.config))return s;throw aa.create("duplicate-app",{appName:i})}const a=new BU(i);for(const c of $b.values())a.addComponent(c);const l=new $9(n,r,a);return Fm.set(i,l),l}function eS(t=Rb){const e=Fm.get(t);if(!e&&t===Rb&&MR())return BR();if(!e)throw aa.create("no-app",{appName:t});return e}function pi(t,e,n){var r;let i=(r=I9[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ls.warn(l.join(" "));return}xo(new ma(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D9="firebase-heartbeat-database",M9=1,Kd="firebase-heartbeat-store";let R0=null;function UR(){return R0||(R0=e9(D9,M9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Kd)}catch(n){console.warn(n)}}}}).catch(t=>{throw aa.create("idb-open",{originalErrorMessage:t.message})})),R0}async function L9(t){try{const n=(await UR()).transaction(Kd),r=await n.objectStore(Kd).get(zR(t));return await n.done,r}catch(e){if(e instanceof vs)ls.warn(e.message);else{const n=aa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ls.warn(n.message)}}}async function kC(t,e){try{const r=(await UR()).transaction(Kd,"readwrite");await r.objectStore(Kd).put(e,zR(t)),await r.done}catch(n){if(n instanceof vs)ls.warn(n.message);else{const r=aa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ls.warn(r.message)}}}function zR(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9=1024,V9=30*24*60*60*1e3;class B9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new z9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=IC();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=V9}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ls.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=IC(),{heartbeatsToSend:r,unsentEntries:i}=U9(this._heartbeatsCache.heartbeats),s=Lm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ls.warn(n),""}}}function IC(){return new Date().toISOString().substring(0,10)}function U9(t,e=F9){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),OC(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),OC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class z9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TU()?PU().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await L9(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return kC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return kC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function OC(t){return Lm(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q9(t){xo(new ma("platform-logger",e=>new r9(e),"PRIVATE")),xo(new ma("heartbeat",e=>new B9(e),"PRIVATE")),pi(Ob,TC,t),pi(Ob,TC,"esm2017"),pi("fire-js","")}q9("");var RC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ro,qR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,_){function C(){}C.prototype=_.prototype,E.D=_.prototype,E.prototype=new C,E.prototype.constructor=E,E.C=function(P,T,O){for(var R=Array(arguments.length-2),M=2;M<arguments.length;M++)R[M-2]=arguments[M];return _.prototype[T].apply(P,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,_,C){C||(C=0);var P=Array(16);if(typeof _=="string")for(var T=0;16>T;++T)P[T]=_.charCodeAt(C++)|_.charCodeAt(C++)<<8|_.charCodeAt(C++)<<16|_.charCodeAt(C++)<<24;else for(T=0;16>T;++T)P[T]=_[C++]|_[C++]<<8|_[C++]<<16|_[C++]<<24;_=E.g[0],C=E.g[1],T=E.g[2];var O=E.g[3],R=_+(O^C&(T^O))+P[0]+3614090360&4294967295;_=C+(R<<7&4294967295|R>>>25),R=O+(T^_&(C^T))+P[1]+3905402710&4294967295,O=_+(R<<12&4294967295|R>>>20),R=T+(C^O&(_^C))+P[2]+606105819&4294967295,T=O+(R<<17&4294967295|R>>>15),R=C+(_^T&(O^_))+P[3]+3250441966&4294967295,C=T+(R<<22&4294967295|R>>>10),R=_+(O^C&(T^O))+P[4]+4118548399&4294967295,_=C+(R<<7&4294967295|R>>>25),R=O+(T^_&(C^T))+P[5]+1200080426&4294967295,O=_+(R<<12&4294967295|R>>>20),R=T+(C^O&(_^C))+P[6]+2821735955&4294967295,T=O+(R<<17&4294967295|R>>>15),R=C+(_^T&(O^_))+P[7]+4249261313&4294967295,C=T+(R<<22&4294967295|R>>>10),R=_+(O^C&(T^O))+P[8]+1770035416&4294967295,_=C+(R<<7&4294967295|R>>>25),R=O+(T^_&(C^T))+P[9]+2336552879&4294967295,O=_+(R<<12&4294967295|R>>>20),R=T+(C^O&(_^C))+P[10]+4294925233&4294967295,T=O+(R<<17&4294967295|R>>>15),R=C+(_^T&(O^_))+P[11]+2304563134&4294967295,C=T+(R<<22&4294967295|R>>>10),R=_+(O^C&(T^O))+P[12]+1804603682&4294967295,_=C+(R<<7&4294967295|R>>>25),R=O+(T^_&(C^T))+P[13]+4254626195&4294967295,O=_+(R<<12&4294967295|R>>>20),R=T+(C^O&(_^C))+P[14]+2792965006&4294967295,T=O+(R<<17&4294967295|R>>>15),R=C+(_^T&(O^_))+P[15]+1236535329&4294967295,C=T+(R<<22&4294967295|R>>>10),R=_+(T^O&(C^T))+P[1]+4129170786&4294967295,_=C+(R<<5&4294967295|R>>>27),R=O+(C^T&(_^C))+P[6]+3225465664&4294967295,O=_+(R<<9&4294967295|R>>>23),R=T+(_^C&(O^_))+P[11]+643717713&4294967295,T=O+(R<<14&4294967295|R>>>18),R=C+(O^_&(T^O))+P[0]+3921069994&4294967295,C=T+(R<<20&4294967295|R>>>12),R=_+(T^O&(C^T))+P[5]+3593408605&4294967295,_=C+(R<<5&4294967295|R>>>27),R=O+(C^T&(_^C))+P[10]+38016083&4294967295,O=_+(R<<9&4294967295|R>>>23),R=T+(_^C&(O^_))+P[15]+3634488961&4294967295,T=O+(R<<14&4294967295|R>>>18),R=C+(O^_&(T^O))+P[4]+3889429448&4294967295,C=T+(R<<20&4294967295|R>>>12),R=_+(T^O&(C^T))+P[9]+568446438&4294967295,_=C+(R<<5&4294967295|R>>>27),R=O+(C^T&(_^C))+P[14]+3275163606&4294967295,O=_+(R<<9&4294967295|R>>>23),R=T+(_^C&(O^_))+P[3]+4107603335&4294967295,T=O+(R<<14&4294967295|R>>>18),R=C+(O^_&(T^O))+P[8]+1163531501&4294967295,C=T+(R<<20&4294967295|R>>>12),R=_+(T^O&(C^T))+P[13]+2850285829&4294967295,_=C+(R<<5&4294967295|R>>>27),R=O+(C^T&(_^C))+P[2]+4243563512&4294967295,O=_+(R<<9&4294967295|R>>>23),R=T+(_^C&(O^_))+P[7]+1735328473&4294967295,T=O+(R<<14&4294967295|R>>>18),R=C+(O^_&(T^O))+P[12]+2368359562&4294967295,C=T+(R<<20&4294967295|R>>>12),R=_+(C^T^O)+P[5]+4294588738&4294967295,_=C+(R<<4&4294967295|R>>>28),R=O+(_^C^T)+P[8]+2272392833&4294967295,O=_+(R<<11&4294967295|R>>>21),R=T+(O^_^C)+P[11]+1839030562&4294967295,T=O+(R<<16&4294967295|R>>>16),R=C+(T^O^_)+P[14]+4259657740&4294967295,C=T+(R<<23&4294967295|R>>>9),R=_+(C^T^O)+P[1]+2763975236&4294967295,_=C+(R<<4&4294967295|R>>>28),R=O+(_^C^T)+P[4]+1272893353&4294967295,O=_+(R<<11&4294967295|R>>>21),R=T+(O^_^C)+P[7]+4139469664&4294967295,T=O+(R<<16&4294967295|R>>>16),R=C+(T^O^_)+P[10]+3200236656&4294967295,C=T+(R<<23&4294967295|R>>>9),R=_+(C^T^O)+P[13]+681279174&4294967295,_=C+(R<<4&4294967295|R>>>28),R=O+(_^C^T)+P[0]+3936430074&4294967295,O=_+(R<<11&4294967295|R>>>21),R=T+(O^_^C)+P[3]+3572445317&4294967295,T=O+(R<<16&4294967295|R>>>16),R=C+(T^O^_)+P[6]+76029189&4294967295,C=T+(R<<23&4294967295|R>>>9),R=_+(C^T^O)+P[9]+3654602809&4294967295,_=C+(R<<4&4294967295|R>>>28),R=O+(_^C^T)+P[12]+3873151461&4294967295,O=_+(R<<11&4294967295|R>>>21),R=T+(O^_^C)+P[15]+530742520&4294967295,T=O+(R<<16&4294967295|R>>>16),R=C+(T^O^_)+P[2]+3299628645&4294967295,C=T+(R<<23&4294967295|R>>>9),R=_+(T^(C|~O))+P[0]+4096336452&4294967295,_=C+(R<<6&4294967295|R>>>26),R=O+(C^(_|~T))+P[7]+1126891415&4294967295,O=_+(R<<10&4294967295|R>>>22),R=T+(_^(O|~C))+P[14]+2878612391&4294967295,T=O+(R<<15&4294967295|R>>>17),R=C+(O^(T|~_))+P[5]+4237533241&4294967295,C=T+(R<<21&4294967295|R>>>11),R=_+(T^(C|~O))+P[12]+1700485571&4294967295,_=C+(R<<6&4294967295|R>>>26),R=O+(C^(_|~T))+P[3]+2399980690&4294967295,O=_+(R<<10&4294967295|R>>>22),R=T+(_^(O|~C))+P[10]+4293915773&4294967295,T=O+(R<<15&4294967295|R>>>17),R=C+(O^(T|~_))+P[1]+2240044497&4294967295,C=T+(R<<21&4294967295|R>>>11),R=_+(T^(C|~O))+P[8]+1873313359&4294967295,_=C+(R<<6&4294967295|R>>>26),R=O+(C^(_|~T))+P[15]+4264355552&4294967295,O=_+(R<<10&4294967295|R>>>22),R=T+(_^(O|~C))+P[6]+2734768916&4294967295,T=O+(R<<15&4294967295|R>>>17),R=C+(O^(T|~_))+P[13]+1309151649&4294967295,C=T+(R<<21&4294967295|R>>>11),R=_+(T^(C|~O))+P[4]+4149444226&4294967295,_=C+(R<<6&4294967295|R>>>26),R=O+(C^(_|~T))+P[11]+3174756917&4294967295,O=_+(R<<10&4294967295|R>>>22),R=T+(_^(O|~C))+P[2]+718787259&4294967295,T=O+(R<<15&4294967295|R>>>17),R=C+(O^(T|~_))+P[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(T+(R<<21&4294967295|R>>>11))&4294967295,E.g[2]=E.g[2]+T&4294967295,E.g[3]=E.g[3]+O&4294967295}r.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var C=_-this.blockSize,P=this.B,T=this.h,O=0;O<_;){if(T==0)for(;O<=C;)i(this,E,O),O+=this.blockSize;if(typeof E=="string"){for(;O<_;)if(P[T++]=E.charCodeAt(O++),T==this.blockSize){i(this,P),T=0;break}}else for(;O<_;)if(P[T++]=E[O++],T==this.blockSize){i(this,P),T=0;break}}this.h=T,this.o+=_},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var C=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=C&255,C/=256;for(this.u(E),E=Array(16),_=C=0;4>_;++_)for(var P=0;32>P;P+=8)E[C++]=this.g[_]>>>P&255;return E};function s(E,_){var C=l;return Object.prototype.hasOwnProperty.call(C,E)?C[E]:C[E]=_(E)}function a(E,_){this.h=_;for(var C=[],P=!0,T=E.length-1;0<=T;T--){var O=E[T]|0;P&&O==_||(C[T]=O,P=!1)}this.g=C}var l={};function c(E){return-128<=E&&128>E?s(E,function(_){return new a([_|0],0>_?-1:0)}):new a([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return x(u(-E));for(var _=[],C=1,P=0;E>=C;P++)_[P]=E/C|0,C*=4294967296;return new a(_,0)}function d(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return x(d(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(_,8)),P=f,T=0;T<E.length;T+=8){var O=Math.min(8,E.length-T),R=parseInt(E.substring(T,T+O),_);8>O?(O=u(Math.pow(_,O)),P=P.j(O).add(u(R))):(P=P.j(C),P=P.add(u(R)))}return P}var f=c(0),h=c(1),m=c(16777216);t=a.prototype,t.m=function(){if(g(this))return-x(this).m();for(var E=0,_=1,C=0;C<this.g.length;C++){var P=this.i(C);E+=(0<=P?P:4294967296+P)*_,_*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(y(this))return"0";if(g(this))return"-"+x(this).toString(E);for(var _=u(Math.pow(E,6)),C=this,P="";;){var T=N(C,_).g;C=w(C,T.j(_));var O=((0<C.g.length?C.g[0]:C.h)>>>0).toString(E);if(C=T,y(C))return O+P;for(;6>O.length;)O="0"+O;P=O+P}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function y(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function g(E){return E.h==-1}t.l=function(E){return E=w(this,E),g(E)?-1:y(E)?0:1};function x(E){for(var _=E.g.length,C=[],P=0;P<_;P++)C[P]=~E.g[P];return new a(C,~E.h).add(h)}t.abs=function(){return g(this)?x(this):this},t.add=function(E){for(var _=Math.max(this.g.length,E.g.length),C=[],P=0,T=0;T<=_;T++){var O=P+(this.i(T)&65535)+(E.i(T)&65535),R=(O>>>16)+(this.i(T)>>>16)+(E.i(T)>>>16);P=R>>>16,O&=65535,R&=65535,C[T]=R<<16|O}return new a(C,C[C.length-1]&-2147483648?-1:0)};function w(E,_){return E.add(x(_))}t.j=function(E){if(y(this)||y(E))return f;if(g(this))return g(E)?x(this).j(x(E)):x(x(this).j(E));if(g(E))return x(this.j(x(E)));if(0>this.l(m)&&0>E.l(m))return u(this.m()*E.m());for(var _=this.g.length+E.g.length,C=[],P=0;P<2*_;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(var T=0;T<E.g.length;T++){var O=this.i(P)>>>16,R=this.i(P)&65535,M=E.i(T)>>>16,D=E.i(T)&65535;C[2*P+2*T]+=R*D,b(C,2*P+2*T),C[2*P+2*T+1]+=O*D,b(C,2*P+2*T+1),C[2*P+2*T+1]+=R*M,b(C,2*P+2*T+1),C[2*P+2*T+2]+=O*M,b(C,2*P+2*T+2)}for(P=0;P<_;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=_;P<2*_;P++)C[P]=0;return new a(C,0)};function b(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function v(E,_){this.g=E,this.h=_}function N(E,_){if(y(_))throw Error("division by zero");if(y(E))return new v(f,f);if(g(E))return _=N(x(E),_),new v(x(_.g),x(_.h));if(g(_))return _=N(E,x(_)),new v(x(_.g),_.h);if(30<E.g.length){if(g(E)||g(_))throw Error("slowDivide_ only works with positive integers.");for(var C=h,P=_;0>=P.l(E);)C=S(C),P=S(P);var T=A(C,1),O=A(P,1);for(P=A(P,2),C=A(C,2);!y(P);){var R=O.add(P);0>=R.l(E)&&(T=T.add(C),O=R),P=A(P,1),C=A(C,1)}return _=w(E,T.j(_)),new v(T,_)}for(T=f;0<=E.l(_);){for(C=Math.max(1,Math.floor(E.m()/_.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),O=u(C),R=O.j(_);g(R)||0<R.l(E);)C-=P,O=u(C),R=O.j(_);y(O)&&(O=h),T=T.add(O),E=w(E,R)}return new v(T,E)}t.A=function(E){return N(this,E).h},t.and=function(E){for(var _=Math.max(this.g.length,E.g.length),C=[],P=0;P<_;P++)C[P]=this.i(P)&E.i(P);return new a(C,this.h&E.h)},t.or=function(E){for(var _=Math.max(this.g.length,E.g.length),C=[],P=0;P<_;P++)C[P]=this.i(P)|E.i(P);return new a(C,this.h|E.h)},t.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),C=[],P=0;P<_;P++)C[P]=this.i(P)^E.i(P);return new a(C,this.h^E.h)};function S(E){for(var _=E.g.length+1,C=[],P=0;P<_;P++)C[P]=E.i(P)<<1|E.i(P-1)>>>31;return new a(C,E.h)}function A(E,_){var C=_>>5;_%=32;for(var P=E.g.length-C,T=[],O=0;O<P;O++)T[O]=0<_?E.i(O+C)>>>_|E.i(O+C+1)<<32-_:E.i(O+C);return new a(T,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,qR=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=d,ro=a}).apply(typeof RC<"u"?RC:typeof self<"u"?self:typeof window<"u"?window:{});var ip=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var WR,Gu,GR,Wp,Db,HR,KR,YR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,j,I){return p==Array.prototype||p==Object.prototype||(p[j]=I.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof ip=="object"&&ip];for(var j=0;j<p.length;++j){var I=p[j];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function i(p,j){if(j)e:{var I=r;p=p.split(".");for(var $=0;$<p.length-1;$++){var z=p[$];if(!(z in I))break e;I=I[z]}p=p[p.length-1],$=I[p],j=j($),j!=$&&j!=null&&e(I,p,{configurable:!0,writable:!0,value:j})}}function s(p,j){p instanceof String&&(p+="");var I=0,$=!1,z={next:function(){if(!$&&I<p.length){var G=I++;return{value:j(G,p[G]),done:!1}}return $=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}i("Array.prototype.values",function(p){return p||function(){return s(this,function(j,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(p){var j=typeof p;return j=j!="object"?j:p?Array.isArray(p)?"array":j:"null",j=="array"||j=="object"&&typeof p.length=="number"}function u(p){var j=typeof p;return j=="object"&&p!=null||j=="function"}function d(p,j,I){return p.call.apply(p.bind,arguments)}function f(p,j,I){if(!p)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,$),p.apply(j,z)}}return function(){return p.apply(j,arguments)}}function h(p,j,I){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function m(p,j){var I=Array.prototype.slice.call(arguments,1);return function(){var $=I.slice();return $.push.apply($,arguments),p.apply(this,$)}}function y(p,j){function I(){}I.prototype=j.prototype,p.aa=j.prototype,p.prototype=new I,p.prototype.constructor=p,p.Qb=function($,z,G){for(var oe=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)oe[lt-2]=arguments[lt];return j.prototype[z].apply($,oe)}}function g(p){const j=p.length;if(0<j){const I=Array(j);for(let $=0;$<j;$++)I[$]=p[$];return I}return[]}function x(p,j){for(let I=1;I<arguments.length;I++){const $=arguments[I];if(c($)){const z=p.length||0,G=$.length||0;p.length=z+G;for(let oe=0;oe<G;oe++)p[z+oe]=$[oe]}else p.push($)}}class w{constructor(j,I){this.i=j,this.j=I,this.h=0,this.g=null}get(){let j;return 0<this.h?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function b(p){return/^[\s\xa0]*$/.test(p)}function v(){var p=l.navigator;return p&&(p=p.userAgent)?p:""}function N(p){return N[" "](p),p}N[" "]=function(){};var S=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function A(p,j,I){for(const $ in p)j.call(I,p[$],$,p)}function E(p,j){for(const I in p)j.call(void 0,p[I],I,p)}function _(p){const j={};for(const I in p)j[I]=p[I];return j}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(p,j){let I,$;for(let z=1;z<arguments.length;z++){$=arguments[z];for(I in $)p[I]=$[I];for(let G=0;G<C.length;G++)I=C[G],Object.prototype.hasOwnProperty.call($,I)&&(p[I]=$[I])}}function T(p){var j=1;p=p.split(":");const I=[];for(;0<j&&p.length;)I.push(p.shift()),j--;return p.length&&I.push(p.join(":")),I}function O(p){l.setTimeout(()=>{throw p},0)}function R(){var p=W;let j=null;return p.g&&(j=p.g,p.g=p.g.next,p.g||(p.h=null),j.next=null),j}class M{constructor(){this.h=this.g=null}add(j,I){const $=D.get();$.set(j,I),this.h?this.h.next=$:this.g=$,this.h=$}}var D=new w(()=>new B,p=>p.reset());class B{constructor(){this.next=this.g=this.h=null}set(j,I){this.h=j,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let U,V=!1,W=new M,H=()=>{const p=l.Promise.resolve(void 0);U=()=>{p.then(te)}};var te=()=>{for(var p;p=R();){try{p.h.call(p.g)}catch(I){O(I)}var j=D;j.j(p),100>j.h&&(j.h++,p.next=j.g,j.g=p)}V=!1};function X(){this.s=this.s,this.C=this.C}X.prototype.s=!1,X.prototype.ma=function(){this.s||(this.s=!0,this.N())},X.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(p,j){this.type=p,this.g=this.target=j,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var p=!1,j=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const I=()=>{};l.addEventListener("test",I,j),l.removeEventListener("test",I,j)}catch{}return p}();function ae(p,j){if(ie.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var I=this.type=p.type,$=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=j,j=p.relatedTarget){if(S){e:{try{N(j.nodeName);var z=!0;break e}catch{}z=!1}z||(j=null)}}else I=="mouseover"?j=p.fromElement:I=="mouseout"&&(j=p.toElement);this.relatedTarget=j,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:ge[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&ae.aa.h.call(this)}}y(ae,ie);var ge={2:"touch",3:"pen",4:"mouse"};ae.prototype.h=function(){ae.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),et=0;function se(p,j,I,$,z){this.listener=p,this.proxy=null,this.src=j,this.type=I,this.capture=!!$,this.ha=z,this.key=++et,this.da=this.fa=!1}function ye(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function ve(p){this.src=p,this.g={},this.h=0}ve.prototype.add=function(p,j,I,$,z){var G=p.toString();p=this.g[G],p||(p=this.g[G]=[],this.h++);var oe=ze(p,j,$,z);return-1<oe?(j=p[oe],I||(j.fa=!1)):(j=new se(j,this.src,G,!!$,z),j.fa=I,p.push(j)),j};function J(p,j){var I=j.type;if(I in p.g){var $=p.g[I],z=Array.prototype.indexOf.call($,j,void 0),G;(G=0<=z)&&Array.prototype.splice.call($,z,1),G&&(ye(j),p.g[I].length==0&&(delete p.g[I],p.h--))}}function ze(p,j,I,$){for(var z=0;z<p.length;++z){var G=p[z];if(!G.da&&G.listener==j&&G.capture==!!I&&G.ha==$)return z}return-1}var Pe="closure_lm_"+(1e6*Math.random()|0),Je={};function st(p,j,I,$,z){if(Array.isArray(j)){for(var G=0;G<j.length;G++)st(p,j[G],I,$,z);return null}return I=ri(I),p&&p[Fe]?p.K(j,I,u($)?!!$.capture:!1,z):Tt(p,j,I,!1,$,z)}function Tt(p,j,I,$,z,G){if(!j)throw Error("Invalid event type");var oe=u(z)?!!z.capture:!!z,lt=en(p);if(lt||(p[Pe]=lt=new ve(p)),I=lt.add(j,I,$,oe,G),I.proxy)return I;if($=F(),I.proxy=$,$.src=p,$.listener=I,p.addEventListener)q||(z=oe),z===void 0&&(z=!1),p.addEventListener(j.toString(),$,z);else if(p.attachEvent)p.attachEvent(de(j.toString()),$);else if(p.addListener&&p.removeListener)p.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return I}function F(){function p(I){return j.call(p.src,p.listener,I)}const j=He;return p}function K(p,j,I,$,z){if(Array.isArray(j))for(var G=0;G<j.length;G++)K(p,j[G],I,$,z);else $=u($)?!!$.capture:!!$,I=ri(I),p&&p[Fe]?(p=p.i,j=String(j).toString(),j in p.g&&(G=p.g[j],I=ze(G,I,$,z),-1<I&&(ye(G[I]),Array.prototype.splice.call(G,I,1),G.length==0&&(delete p.g[j],p.h--)))):p&&(p=en(p))&&(j=p.g[j.toString()],p=-1,j&&(p=ze(j,I,$,z)),(I=-1<p?j[p]:null)&&ce(I))}function ce(p){if(typeof p!="number"&&p&&!p.da){var j=p.src;if(j&&j[Fe])J(j.i,p);else{var I=p.type,$=p.proxy;j.removeEventListener?j.removeEventListener(I,$,p.capture):j.detachEvent?j.detachEvent(de(I),$):j.addListener&&j.removeListener&&j.removeListener($),(I=en(j))?(J(I,p),I.h==0&&(I.src=null,j[Pe]=null)):ye(p)}}}function de(p){return p in Je?Je[p]:Je[p]="on"+p}function He(p,j){if(p.da)p=!0;else{j=new ae(j,this);var I=p.listener,$=p.ha||p.src;p.fa&&ce(p),p=I.call($,j)}return p}function en(p){return p=p[Pe],p instanceof ve?p:null}var zn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ri(p){return typeof p=="function"?p:(p[zn]||(p[zn]=function(j){return p.handleEvent(j)}),p[zn])}function wt(){X.call(this),this.i=new ve(this),this.M=this,this.F=null}y(wt,X),wt.prototype[Fe]=!0,wt.prototype.removeEventListener=function(p,j,I,$){K(this,p,j,I,$)};function Pt(p,j){var I,$=p.F;if($)for(I=[];$;$=$.F)I.push($);if(p=p.M,$=j.type||j,typeof j=="string")j=new ie(j,p);else if(j instanceof ie)j.target=j.target||p;else{var z=j;j=new ie($,p),P(j,z)}if(z=!0,I)for(var G=I.length-1;0<=G;G--){var oe=j.g=I[G];z=As(oe,$,!0,j)&&z}if(oe=j.g=p,z=As(oe,$,!0,j)&&z,z=As(oe,$,!1,j)&&z,I)for(G=0;G<I.length;G++)oe=j.g=I[G],z=As(oe,$,!1,j)&&z}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var p=this.i,j;for(j in p.g){for(var I=p.g[j],$=0;$<I.length;$++)ye(I[$]);delete p.g[j],p.h--}}this.F=null},wt.prototype.K=function(p,j,I,$){return this.i.add(String(p),j,!1,I,$)},wt.prototype.L=function(p,j,I,$){return this.i.add(String(p),j,!0,I,$)};function As(p,j,I,$){if(j=p.i.g[String(j)],!j)return!0;j=j.concat();for(var z=!0,G=0;G<j.length;++G){var oe=j[G];if(oe&&!oe.da&&oe.capture==I){var lt=oe.listener,un=oe.ha||oe.src;oe.fa&&J(p.i,oe),z=lt.call(un,$)!==!1&&z}}return z&&!$.defaultPrevented}function zo(p,j,I){if(typeof p=="function")I&&(p=h(p,I));else if(p&&typeof p.handleEvent=="function")p=h(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(j)?-1:l.setTimeout(p,j||0)}function qo(p){p.g=zo(()=>{p.g=null,p.i&&(p.i=!1,qo(p))},p.l);const j=p.h;p.h=null,p.m.apply(null,j)}class ou extends X{constructor(j,I){super(),this.m=j,this.l=I,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:qo(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ki(p){X.call(this),this.h=p,this.g={}}y(ki,X);var ii=[];function Wo(p){A(p.g,function(j,I){this.g.hasOwnProperty(I)&&ce(j)},p),p.g={}}ki.prototype.N=function(){ki.aa.N.call(this),Wo(this)},ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Go=l.JSON.stringify,bh=l.JSON.parse,bN=class{stringify(p){return l.JSON.stringify(p,void 0)}parse(p){return l.JSON.parse(p,void 0)}};function wh(){}wh.prototype.h=null;function _h(p){return p.h||(p.h=p.i())}function Sh(){}var Ta={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function lu(){ie.call(this,"d")}y(lu,ie);function cu(){ie.call(this,"c")}y(cu,ie);var Z={},Ce=null;function fe(){return Ce=Ce||new wt}Z.La="serverreachability";function at(p){ie.call(this,Z.La,p)}y(at,ie);function Mr(p){const j=fe();Pt(j,new at(j))}Z.STAT_EVENT="statevent";function Ho(p,j){ie.call(this,Z.STAT_EVENT,p),this.stat=j}y(Ho,ie);function cn(p){const j=fe();Pt(j,new Ho(j,p))}Z.Ma="timingevent";function Ah(p,j){ie.call(this,Z.Ma,p),this.size=j}y(Ah,ie);function Ii(p,j){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){p()},j)}function uu(){this.g=!0}uu.prototype.xa=function(){this.g=!1};function h3(p,j,I,$,z,G){p.info(function(){if(p.g)if(G)for(var oe="",lt=G.split("&"),un=0;un<lt.length;un++){var Ye=lt[un].split("=");if(1<Ye.length){var bn=Ye[0];Ye=Ye[1];var wn=bn.split("_");oe=2<=wn.length&&wn[1]=="type"?oe+(bn+"="+Ye+"&"):oe+(bn+"=redacted&")}}else oe=null;else oe=G;return"XMLHTTP REQ ("+$+") [attempt "+z+"]: "+j+`
`+I+`
`+oe})}function p3(p,j,I,$,z,G,oe){p.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+z+"]: "+j+`
`+I+`
`+G+" "+oe})}function Ko(p,j,I,$){p.info(function(){return"XMLHTTP TEXT ("+j+"): "+g3(p,I)+($?" "+$:"")})}function m3(p,j){p.info(function(){return"TIMEOUT: "+j})}uu.prototype.info=function(){};function g3(p,j){if(!p.g)return j;if(!j)return null;try{var I=JSON.parse(j);if(I){for(p=0;p<I.length;p++)if(Array.isArray(I[p])){var $=I[p];if(!(2>$.length)){var z=$[1];if(Array.isArray(z)&&!(1>z.length)){var G=z[0];if(G!="noop"&&G!="stop"&&G!="close")for(var oe=1;oe<z.length;oe++)z[oe]=""}}}}return Go(I)}catch{return j}}var Nh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wN={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zv;function Eh(){}y(Eh,wh),Eh.prototype.g=function(){return new XMLHttpRequest},Eh.prototype.i=function(){return{}},zv=new Eh;function Ns(p,j,I,$){this.j=p,this.i=j,this.l=I,this.R=$||1,this.U=new ki(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _N}function _N(){this.i=null,this.g="",this.h=!1}var SN={},qv={};function Wv(p,j,I){p.L=1,p.v=Ph(Oi(j)),p.m=I,p.P=!0,AN(p,null)}function AN(p,j){p.F=Date.now(),Ch(p),p.A=Oi(p.v);var I=p.A,$=p.R;Array.isArray($)||($=[String($)]),LN(I.i,"t",$),p.C=0,I=p.j.J,p.h=new _N,p.g=nE(p.j,I?j:null,!p.m),0<p.O&&(p.M=new ou(h(p.Y,p,p.g),p.O)),j=p.U,I=p.g,$=p.ca;var z="readystatechange";Array.isArray(z)||(z&&(ii[0]=z.toString()),z=ii);for(var G=0;G<z.length;G++){var oe=st(I,z[G],$||j.handleEvent,!1,j.h||j);if(!oe)break;j.g[oe.key]=oe}j=p.H?_(p.H):{},p.m?(p.u||(p.u="POST"),j["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,j)):(p.u="GET",p.g.ea(p.A,p.u,null,j)),Mr(),h3(p.i,p.u,p.A,p.l,p.R,p.m)}Ns.prototype.ca=function(p){p=p.target;const j=this.M;j&&Ri(p)==3?j.j():this.Y(p)},Ns.prototype.Y=function(p){try{if(p==this.g)e:{const wn=Ri(this.g);var j=this.g.Ba();const Qo=this.g.Z();if(!(3>wn)&&(wn!=3||this.g&&(this.h.h||this.g.oa()||WN(this.g)))){this.J||wn!=4||j==7||(j==8||0>=Qo?Mr(3):Mr(2)),Gv(this);var I=this.g.Z();this.X=I;t:if(NN(this)){var $=WN(this.g);p="";var z=$.length,G=Ri(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pa(this),du(this);var oe="";break t}this.h.i=new l.TextDecoder}for(j=0;j<z;j++)this.h.h=!0,p+=this.h.i.decode($[j],{stream:!(G&&j==z-1)});$.length=0,this.h.g+=p,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=I==200,p3(this.i,this.u,this.A,this.l,this.R,wn,I),this.o){if(this.T&&!this.K){t:{if(this.g){var lt,un=this.g;if((lt=un.g?un.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(lt)){var Ye=lt;break t}}Ye=null}if(I=Ye)Ko(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hv(this,I);else{this.o=!1,this.s=3,cn(12),Pa(this),du(this);break e}}if(this.P){I=!0;let Lr;for(;!this.J&&this.C<oe.length;)if(Lr=y3(this,oe),Lr==qv){wn==4&&(this.s=4,cn(14),I=!1),Ko(this.i,this.l,null,"[Incomplete Response]");break}else if(Lr==SN){this.s=4,cn(15),Ko(this.i,this.l,oe,"[Invalid Chunk]"),I=!1;break}else Ko(this.i,this.l,Lr,null),Hv(this,Lr);if(NN(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wn!=4||oe.length!=0||this.h.h||(this.s=1,cn(16),I=!1),this.o=this.o&&I,!I)Ko(this.i,this.l,oe,"[Invalid Chunked Response]"),Pa(this),du(this);else if(0<oe.length&&!this.W){this.W=!0;var bn=this.j;bn.g==this&&bn.ba&&!bn.M&&(bn.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Zv(bn),bn.M=!0,cn(11))}}else Ko(this.i,this.l,oe,null),Hv(this,oe);wn==4&&Pa(this),this.o&&!this.J&&(wn==4?JN(this.j,this):(this.o=!1,Ch(this)))}else R3(this.g),I==400&&0<oe.indexOf("Unknown SID")?(this.s=3,cn(12)):(this.s=0,cn(13)),Pa(this),du(this)}}}catch{}finally{}};function NN(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function y3(p,j){var I=p.C,$=j.indexOf(`
`,I);return $==-1?qv:(I=Number(j.substring(I,$)),isNaN(I)?SN:($+=1,$+I>j.length?qv:(j=j.slice($,$+I),p.C=$+I,j)))}Ns.prototype.cancel=function(){this.J=!0,Pa(this)};function Ch(p){p.S=Date.now()+p.I,EN(p,p.I)}function EN(p,j){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Ii(h(p.ba,p),j)}function Gv(p){p.B&&(l.clearTimeout(p.B),p.B=null)}Ns.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(m3(this.i,this.A),this.L!=2&&(Mr(),cn(17)),Pa(this),this.s=2,du(this)):EN(this,this.S-p)};function du(p){p.j.G==0||p.J||JN(p.j,p)}function Pa(p){Gv(p);var j=p.M;j&&typeof j.ma=="function"&&j.ma(),p.M=null,Wo(p.U),p.g&&(j=p.g,p.g=null,j.abort(),j.ma())}function Hv(p,j){try{var I=p.j;if(I.G!=0&&(I.g==p||Kv(I.h,p))){if(!p.K&&Kv(I.h,p)&&I.G==3){try{var $=I.Da.g.parse(j)}catch{$=null}if(Array.isArray($)&&$.length==3){var z=$;if(z[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<p.F)Dh(I),Rh(I);else break e;Jv(I),cn(18)}}else I.za=z[1],0<I.za-I.T&&37500>z[2]&&I.F&&I.v==0&&!I.C&&(I.C=Ii(h(I.Za,I),6e3));if(1>=TN(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Ia(I,11)}else if((p.K||I.g==p)&&Dh(I),!b(j))for(z=I.Da.g.parse(j),j=0;j<z.length;j++){let Ye=z[j];if(I.T=Ye[0],Ye=Ye[1],I.G==2)if(Ye[0]=="c"){I.K=Ye[1],I.ia=Ye[2];const bn=Ye[3];bn!=null&&(I.la=bn,I.j.info("VER="+I.la));const wn=Ye[4];wn!=null&&(I.Aa=wn,I.j.info("SVER="+I.Aa));const Qo=Ye[5];Qo!=null&&typeof Qo=="number"&&0<Qo&&($=1.5*Qo,I.L=$,I.j.info("backChannelRequestTimeoutMs_="+$)),$=I;const Lr=p.g;if(Lr){const Lh=Lr.g?Lr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lh){var G=$.h;G.g||Lh.indexOf("spdy")==-1&&Lh.indexOf("quic")==-1&&Lh.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Yv(G,G.h),G.h=null))}if($.D){const e0=Lr.g?Lr.g.getResponseHeader("X-HTTP-Session-Id"):null;e0&&($.ya=e0,mt($.I,$.D,e0))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-p.F,I.j.info("Handshake RTT: "+I.R+"ms")),$=I;var oe=p;if($.qa=tE($,$.J?$.ia:null,$.W),oe.K){PN($.h,oe);var lt=oe,un=$.L;un&&(lt.I=un),lt.B&&(Gv(lt),Ch(lt)),$.g=oe}else XN($);0<I.i.length&&$h(I)}else Ye[0]!="stop"&&Ye[0]!="close"||Ia(I,7);else I.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?Ia(I,7):Qv(I):Ye[0]!="noop"&&I.l&&I.l.ta(Ye),I.v=0)}}Mr(4)}catch{}}var v3=class{constructor(p,j){this.g=p,this.map=j}};function CN(p){this.l=p||10,l.PerformanceNavigationTiming?(p=l.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jN(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function TN(p){return p.h?1:p.g?p.g.size:0}function Kv(p,j){return p.h?p.h==j:p.g?p.g.has(j):!1}function Yv(p,j){p.g?p.g.add(j):p.h=j}function PN(p,j){p.h&&p.h==j?p.h=null:p.g&&p.g.has(j)&&p.g.delete(j)}CN.prototype.cancel=function(){if(this.i=kN(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function kN(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let j=p.i;for(const I of p.g.values())j=j.concat(I.D);return j}return g(p.i)}function x3(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(c(p)){for(var j=[],I=p.length,$=0;$<I;$++)j.push(p[$]);return j}j=[],I=0;for($ in p)j[I++]=p[$];return j}function b3(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(c(p)||typeof p=="string"){var j=[];p=p.length;for(var I=0;I<p;I++)j.push(I);return j}j=[],I=0;for(const $ in p)j[I++]=$;return j}}}function IN(p,j){if(p.forEach&&typeof p.forEach=="function")p.forEach(j,void 0);else if(c(p)||typeof p=="string")Array.prototype.forEach.call(p,j,void 0);else for(var I=b3(p),$=x3(p),z=$.length,G=0;G<z;G++)j.call(void 0,$[G],I&&I[G],p)}var ON=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function w3(p,j){if(p){p=p.split("&");for(var I=0;I<p.length;I++){var $=p[I].indexOf("="),z=null;if(0<=$){var G=p[I].substring(0,$);z=p[I].substring($+1)}else G=p[I];j(G,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function ka(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof ka){this.h=p.h,jh(this,p.j),this.o=p.o,this.g=p.g,Th(this,p.s),this.l=p.l;var j=p.i,I=new pu;I.i=j.i,j.g&&(I.g=new Map(j.g),I.h=j.h),RN(this,I),this.m=p.m}else p&&(j=String(p).match(ON))?(this.h=!1,jh(this,j[1]||"",!0),this.o=fu(j[2]||""),this.g=fu(j[3]||"",!0),Th(this,j[4]),this.l=fu(j[5]||"",!0),RN(this,j[6]||"",!0),this.m=fu(j[7]||"")):(this.h=!1,this.i=new pu(null,this.h))}ka.prototype.toString=function(){var p=[],j=this.j;j&&p.push(hu(j,$N,!0),":");var I=this.g;return(I||j=="file")&&(p.push("//"),(j=this.o)&&p.push(hu(j,$N,!0),"@"),p.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&p.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&p.push("/"),p.push(hu(I,I.charAt(0)=="/"?A3:S3,!0))),(I=this.i.toString())&&p.push("?",I),(I=this.m)&&p.push("#",hu(I,E3)),p.join("")};function Oi(p){return new ka(p)}function jh(p,j,I){p.j=I?fu(j,!0):j,p.j&&(p.j=p.j.replace(/:$/,""))}function Th(p,j){if(j){if(j=Number(j),isNaN(j)||0>j)throw Error("Bad port number "+j);p.s=j}else p.s=null}function RN(p,j,I){j instanceof pu?(p.i=j,C3(p.i,p.h)):(I||(j=hu(j,N3)),p.i=new pu(j,p.h))}function mt(p,j,I){p.i.set(j,I)}function Ph(p){return mt(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function fu(p,j){return p?j?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function hu(p,j,I){return typeof p=="string"?(p=encodeURI(p).replace(j,_3),I&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function _3(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var $N=/[#\/\?@]/g,S3=/[#\?:]/g,A3=/[#\?]/g,N3=/[#\?@]/g,E3=/#/g;function pu(p,j){this.h=this.g=null,this.i=p||null,this.j=!!j}function Es(p){p.g||(p.g=new Map,p.h=0,p.i&&w3(p.i,function(j,I){p.add(decodeURIComponent(j.replace(/\+/g," ")),I)}))}t=pu.prototype,t.add=function(p,j){Es(this),this.i=null,p=Yo(this,p);var I=this.g.get(p);return I||this.g.set(p,I=[]),I.push(j),this.h+=1,this};function DN(p,j){Es(p),j=Yo(p,j),p.g.has(j)&&(p.i=null,p.h-=p.g.get(j).length,p.g.delete(j))}function MN(p,j){return Es(p),j=Yo(p,j),p.g.has(j)}t.forEach=function(p,j){Es(this),this.g.forEach(function(I,$){I.forEach(function(z){p.call(j,z,$,this)},this)},this)},t.na=function(){Es(this);const p=Array.from(this.g.values()),j=Array.from(this.g.keys()),I=[];for(let $=0;$<j.length;$++){const z=p[$];for(let G=0;G<z.length;G++)I.push(j[$])}return I},t.V=function(p){Es(this);let j=[];if(typeof p=="string")MN(this,p)&&(j=j.concat(this.g.get(Yo(this,p))));else{p=Array.from(this.g.values());for(let I=0;I<p.length;I++)j=j.concat(p[I])}return j},t.set=function(p,j){return Es(this),this.i=null,p=Yo(this,p),MN(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[j]),this.h+=1,this},t.get=function(p,j){return p?(p=this.V(p),0<p.length?String(p[0]):j):j};function LN(p,j,I){DN(p,j),0<I.length&&(p.i=null,p.g.set(Yo(p,j),g(I)),p.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],j=Array.from(this.g.keys());for(var I=0;I<j.length;I++){var $=j[I];const G=encodeURIComponent(String($)),oe=this.V($);for($=0;$<oe.length;$++){var z=G;oe[$]!==""&&(z+="="+encodeURIComponent(String(oe[$]))),p.push(z)}}return this.i=p.join("&")};function Yo(p,j){return j=String(j),p.j&&(j=j.toLowerCase()),j}function C3(p,j){j&&!p.j&&(Es(p),p.i=null,p.g.forEach(function(I,$){var z=$.toLowerCase();$!=z&&(DN(this,$),LN(this,z,I))},p)),p.j=j}function j3(p,j){const I=new uu;if(l.Image){const $=new Image;$.onload=m(Cs,I,"TestLoadImage: loaded",!0,j,$),$.onerror=m(Cs,I,"TestLoadImage: error",!1,j,$),$.onabort=m(Cs,I,"TestLoadImage: abort",!1,j,$),$.ontimeout=m(Cs,I,"TestLoadImage: timeout",!1,j,$),l.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=p}else j(!1)}function T3(p,j){const I=new uu,$=new AbortController,z=setTimeout(()=>{$.abort(),Cs(I,"TestPingServer: timeout",!1,j)},1e4);fetch(p,{signal:$.signal}).then(G=>{clearTimeout(z),G.ok?Cs(I,"TestPingServer: ok",!0,j):Cs(I,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(z),Cs(I,"TestPingServer: error",!1,j)})}function Cs(p,j,I,$,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),$(I)}catch{}}function P3(){this.g=new bN}function k3(p,j,I){const $=I||"";try{IN(p,function(z,G){let oe=z;u(z)&&(oe=Go(z)),j.push($+G+"="+encodeURIComponent(oe))})}catch(z){throw j.push($+"type="+encodeURIComponent("_badmap")),z}}function kh(p){this.l=p.Ub||null,this.j=p.eb||!1}y(kh,wh),kh.prototype.g=function(){return new Ih(this.l,this.j)},kh.prototype.i=function(p){return function(){return p}}({});function Ih(p,j){wt.call(this),this.D=p,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Ih,wt),t=Ih.prototype,t.open=function(p,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=j,this.readyState=1,gu(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const j={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(j.body=p),(this.D||l).fetch(new Request(this.A,j)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mu(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,gu(this)),this.g&&(this.readyState=3,gu(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;FN(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function FN(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var j=p.value?p.value:new Uint8Array(0);(j=this.v.decode(j,{stream:!p.done}))&&(this.response=this.responseText+=j)}p.done?mu(this):gu(this),this.readyState==3&&FN(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,mu(this))},t.Qa=function(p){this.g&&(this.response=p,mu(this))},t.ga=function(){this.g&&mu(this)};function mu(p){p.readyState=4,p.l=null,p.j=null,p.v=null,gu(p)}t.setRequestHeader=function(p,j){this.u.append(p,j)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],j=this.h.entries();for(var I=j.next();!I.done;)I=I.value,p.push(I[0]+": "+I[1]),I=j.next();return p.join(`\r
`)};function gu(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Ih.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function VN(p){let j="";return A(p,function(I,$){j+=$,j+=":",j+=I,j+=`\r
`}),j}function Xv(p,j,I){e:{for($ in I){var $=!1;break e}$=!0}$||(I=VN(I),typeof p=="string"?I!=null&&encodeURIComponent(String(I)):mt(p,j,I))}function kt(p){wt.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(kt,wt);var I3=/^https?$/i,O3=["POST","PUT"];t=kt.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,j,I,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);j=j?j.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zv.g(),this.v=this.o?_h(this.o):_h(zv),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(j,String(p),!0),this.B=!1}catch(G){BN(this,G);return}if(p=I||"",I=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var z in $)I.set(z,$[z]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const G of $.keys())I.set(G,$.get(G));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(I.keys()).find(G=>G.toLowerCase()=="content-type"),z=l.FormData&&p instanceof l.FormData,!(0<=Array.prototype.indexOf.call(O3,j,void 0))||$||z||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,oe]of I)this.g.setRequestHeader(G,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qN(this),this.u=!0,this.g.send(p),this.u=!1}catch(G){BN(this,G)}};function BN(p,j){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=j,p.m=5,UN(p),Oh(p)}function UN(p){p.A||(p.A=!0,Pt(p,"complete"),Pt(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Pt(this,"complete"),Pt(this,"abort"),Oh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oh(this,!0)),kt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?zN(this):this.bb())},t.bb=function(){zN(this)};function zN(p){if(p.h&&typeof a<"u"&&(!p.v[1]||Ri(p)!=4||p.Z()!=2)){if(p.u&&Ri(p)==4)zo(p.Ea,0,p);else if(Pt(p,"readystatechange"),Ri(p)==4){p.h=!1;try{const oe=p.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var I;if(!(I=j)){var $;if($=oe===0){var z=String(p.D).match(ON)[1]||null;!z&&l.self&&l.self.location&&(z=l.self.location.protocol.slice(0,-1)),$=!I3.test(z?z.toLowerCase():"")}I=$}if(I)Pt(p,"complete"),Pt(p,"success");else{p.m=6;try{var G=2<Ri(p)?p.g.statusText:""}catch{G=""}p.l=G+" ["+p.Z()+"]",UN(p)}}finally{Oh(p)}}}}function Oh(p,j){if(p.g){qN(p);const I=p.g,$=p.v[0]?()=>{}:null;p.g=null,p.v=null,j||Pt(p,"ready");try{I.onreadystatechange=$}catch{}}}function qN(p){p.I&&(l.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function Ri(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<Ri(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var j=this.g.responseText;return p&&j.indexOf(p)==0&&(j=j.substring(p.length)),bh(j)}};function WN(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function R3(p){const j={};p=(p.g&&2<=Ri(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<p.length;$++){if(b(p[$]))continue;var I=T(p[$]);const z=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const G=j[z]||[];j[z]=G,G.push(I)}E(j,function($){return $.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yu(p,j,I){return I&&I.internalChannelParams&&I.internalChannelParams[p]||j}function GN(p){this.Aa=0,this.i=[],this.j=new uu,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yu("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yu("baseRetryDelayMs",5e3,p),this.cb=yu("retryDelaySeedMs",1e4,p),this.Wa=yu("forwardChannelMaxRetries",2,p),this.wa=yu("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new CN(p&&p.concurrentRequestLimit),this.Da=new P3,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=GN.prototype,t.la=8,t.G=1,t.connect=function(p,j,I,$){cn(0),this.W=p,this.H=j||{},I&&$!==void 0&&(this.H.OSID=I,this.H.OAID=$),this.F=this.X,this.I=tE(this,null,this.W),$h(this)};function Qv(p){if(HN(p),p.G==3){var j=p.U++,I=Oi(p.I);if(mt(I,"SID",p.K),mt(I,"RID",j),mt(I,"TYPE","terminate"),vu(p,I),j=new Ns(p,p.j,j),j.L=2,j.v=Ph(Oi(I)),I=!1,l.navigator&&l.navigator.sendBeacon)try{I=l.navigator.sendBeacon(j.v.toString(),"")}catch{}!I&&l.Image&&(new Image().src=j.v,I=!0),I||(j.g=nE(j.j,null),j.g.ea(j.v)),j.F=Date.now(),Ch(j)}eE(p)}function Rh(p){p.g&&(Zv(p),p.g.cancel(),p.g=null)}function HN(p){Rh(p),p.u&&(l.clearTimeout(p.u),p.u=null),Dh(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&l.clearTimeout(p.s),p.s=null)}function $h(p){if(!jN(p.h)&&!p.s){p.s=!0;var j=p.Ga;U||H(),V||(U(),V=!0),W.add(j,p),p.B=0}}function $3(p,j){return TN(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=j.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Ii(h(p.Ga,p,j),ZN(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const z=new Ns(this,this.j,p);let G=this.o;if(this.S&&(G?(G=_(G),P(G,this.S)):G=this.S),this.m!==null||this.O||(z.H=G,G=null),this.P)e:{for(var j=0,I=0;I<this.i.length;I++){t:{var $=this.i[I];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(j+=$,4096<j){j=I;break e}if(j===4096||I===this.i.length-1){j=I+1;break e}}j=1e3}else j=1e3;j=YN(this,z,j),I=Oi(this.I),mt(I,"RID",p),mt(I,"CVER",22),this.D&&mt(I,"X-HTTP-Session-Id",this.D),vu(this,I),G&&(this.O?j="headers="+encodeURIComponent(String(VN(G)))+"&"+j:this.m&&Xv(I,this.m,G)),Yv(this.h,z),this.Ua&&mt(I,"TYPE","init"),this.P?(mt(I,"$req",j),mt(I,"SID","null"),z.T=!0,Wv(z,I,null)):Wv(z,I,j),this.G=2}}else this.G==3&&(p?KN(this,p):this.i.length==0||jN(this.h)||KN(this))};function KN(p,j){var I;j?I=j.l:I=p.U++;const $=Oi(p.I);mt($,"SID",p.K),mt($,"RID",I),mt($,"AID",p.T),vu(p,$),p.m&&p.o&&Xv($,p.m,p.o),I=new Ns(p,p.j,I,p.B+1),p.m===null&&(I.H=p.o),j&&(p.i=j.D.concat(p.i)),j=YN(p,I,1e3),I.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Yv(p.h,I),Wv(I,$,j)}function vu(p,j){p.H&&A(p.H,function(I,$){mt(j,$,I)}),p.l&&IN({},function(I,$){mt(j,$,I)})}function YN(p,j,I){I=Math.min(p.i.length,I);var $=p.l?h(p.l.Na,p.l,p):null;e:{var z=p.i;let G=-1;for(;;){const oe=["count="+I];G==-1?0<I?(G=z[0].g,oe.push("ofs="+G)):G=0:oe.push("ofs="+G);let lt=!0;for(let un=0;un<I;un++){let Ye=z[un].g;const bn=z[un].map;if(Ye-=G,0>Ye)G=Math.max(0,z[un].g-100),lt=!1;else try{k3(bn,oe,"req"+Ye+"_")}catch{$&&$(bn)}}if(lt){$=oe.join("&");break e}}}return p=p.i.splice(0,I),j.D=p,$}function XN(p){if(!p.g&&!p.u){p.Y=1;var j=p.Fa;U||H(),V||(U(),V=!0),W.add(j,p),p.v=0}}function Jv(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Ii(h(p.Fa,p),ZN(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,QN(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Ii(h(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,cn(10),Rh(this),QN(this))};function Zv(p){p.A!=null&&(l.clearTimeout(p.A),p.A=null)}function QN(p){p.g=new Ns(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var j=Oi(p.qa);mt(j,"RID","rpc"),mt(j,"SID",p.K),mt(j,"AID",p.T),mt(j,"CI",p.F?"0":"1"),!p.F&&p.ja&&mt(j,"TO",p.ja),mt(j,"TYPE","xmlhttp"),vu(p,j),p.m&&p.o&&Xv(j,p.m,p.o),p.L&&(p.g.I=p.L);var I=p.g;p=p.ia,I.L=1,I.v=Ph(Oi(j)),I.m=null,I.P=!0,AN(I,p)}t.Za=function(){this.C!=null&&(this.C=null,Rh(this),Jv(this),cn(19))};function Dh(p){p.C!=null&&(l.clearTimeout(p.C),p.C=null)}function JN(p,j){var I=null;if(p.g==j){Dh(p),Zv(p),p.g=null;var $=2}else if(Kv(p.h,j))I=j.D,PN(p.h,j),$=1;else return;if(p.G!=0){if(j.o)if($==1){I=j.m?j.m.length:0,j=Date.now()-j.F;var z=p.B;$=fe(),Pt($,new Ah($,I)),$h(p)}else XN(p);else if(z=j.s,z==3||z==0&&0<j.X||!($==1&&$3(p,j)||$==2&&Jv(p)))switch(I&&0<I.length&&(j=p.h,j.i=j.i.concat(I)),z){case 1:Ia(p,5);break;case 4:Ia(p,10);break;case 3:Ia(p,6);break;default:Ia(p,2)}}}function ZN(p,j){let I=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(I*=2),I*j}function Ia(p,j){if(p.j.info("Error code "+j),j==2){var I=h(p.fb,p),$=p.Xa;const z=!$;$=new ka($||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||jh($,"https"),Ph($),z?j3($.toString(),I):T3($.toString(),I)}else cn(2);p.G=0,p.l&&p.l.sa(j),eE(p),HN(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),cn(2)):(this.j.info("Failed to ping google.com"),cn(1))};function eE(p){if(p.G=0,p.ka=[],p.l){const j=kN(p.h);(j.length!=0||p.i.length!=0)&&(x(p.ka,j),x(p.ka,p.i),p.h.i.length=0,g(p.i),p.i.length=0),p.l.ra()}}function tE(p,j,I){var $=I instanceof ka?Oi(I):new ka(I);if($.g!="")j&&($.g=j+"."+$.g),Th($,$.s);else{var z=l.location;$=z.protocol,j=j?j+"."+z.hostname:z.hostname,z=+z.port;var G=new ka(null);$&&jh(G,$),j&&(G.g=j),z&&Th(G,z),I&&(G.l=I),$=G}return I=p.D,j=p.ya,I&&j&&mt($,I,j),mt($,"VER",p.la),vu(p,$),$}function nE(p,j,I){if(j&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return j=p.Ca&&!p.pa?new kt(new kh({eb:I})):new kt(p.pa),j.Ha(p.J),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function rE(){}t=rE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Mh(){}Mh.prototype.g=function(p,j){return new er(p,j)};function er(p,j){wt.call(this),this.g=new GN(j),this.l=p,this.h=j&&j.messageUrlParams||null,p=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(p?p["X-WebChannel-Content-Type"]=j.messageContentType:p={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.va&&(p?p["X-WebChannel-Client-Profile"]=j.va:p={"X-WebChannel-Client-Profile":j.va}),this.g.S=p,(p=j&&j.Sb)&&!b(p)&&(this.g.m=p),this.v=j&&j.supportsCrossDomainXhr||!1,this.u=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!b(j)&&(this.g.D=j,p=this.h,p!==null&&j in p&&(p=this.h,j in p&&delete p[j])),this.j=new Xo(this)}y(er,wt),er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){Qv(this.g)},er.prototype.o=function(p){var j=this.g;if(typeof p=="string"){var I={};I.__data__=p,p=I}else this.u&&(I={},I.__data__=Go(p),p=I);j.i.push(new v3(j.Ya++,p)),j.G==3&&$h(j)},er.prototype.N=function(){this.g.l=null,delete this.j,Qv(this.g),delete this.g,er.aa.N.call(this)};function iE(p){lu.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var j=p.__sm__;if(j){e:{for(const I in j){p=I;break e}p=void 0}(this.i=p)&&(p=this.i,j=j!==null&&p in j?j[p]:void 0),this.data=j}else this.data=p}y(iE,lu);function sE(){cu.call(this),this.status=1}y(sE,cu);function Xo(p){this.g=p}y(Xo,rE),Xo.prototype.ua=function(){Pt(this.g,"a")},Xo.prototype.ta=function(p){Pt(this.g,new iE(p))},Xo.prototype.sa=function(p){Pt(this.g,new sE)},Xo.prototype.ra=function(){Pt(this.g,"b")},Mh.prototype.createWebChannel=Mh.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,YR=function(){return new Mh},KR=function(){return fe()},HR=Z,Db={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Nh.NO_ERROR=0,Nh.TIMEOUT=8,Nh.HTTP_ERROR=6,Wp=Nh,wN.COMPLETE="complete",GR=wN,Sh.EventType=Ta,Ta.OPEN="a",Ta.CLOSE="b",Ta.ERROR="c",Ta.MESSAGE="d",wt.prototype.listen=wt.prototype.K,Gu=Sh,kt.prototype.listenOnce=kt.prototype.L,kt.prototype.getLastError=kt.prototype.Ka,kt.prototype.getLastErrorCode=kt.prototype.Ba,kt.prototype.getStatus=kt.prototype.Z,kt.prototype.getResponseJson=kt.prototype.Oa,kt.prototype.getResponseText=kt.prototype.oa,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Ha,WR=kt}).apply(typeof ip<"u"?ip:typeof self<"u"?self:typeof window<"u"?window:{});const $C="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Cn.UNAUTHENTICATED=new Cn(null),Cn.GOOGLE_CREDENTIALS=new Cn("google-credentials-uid"),Cn.FIRST_PARTY=new Cn("first-party-uid"),Cn.MOCK_USER=new Cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=new J_("@firebase/firestore");function ju(){return bo.logLevel}function me(t,...e){if(bo.logLevel<=Ue.DEBUG){const n=e.map(tS);bo.debug(`Firestore (${Fc}): ${t}`,...n)}}function cs(t,...e){if(bo.logLevel<=Ue.ERROR){const n=e.map(tS);bo.error(`Firestore (${Fc}): ${t}`,...n)}}function Yl(t,...e){if(bo.logLevel<=Ue.WARN){const n=e.map(tS);bo.warn(`Firestore (${Fc}): ${t}`,...n)}}function tS(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(t="Unexpected state"){const e=`FIRESTORE (${Fc}) INTERNAL ASSERTION FAILED: `+t;throw cs(e),new Error(e)}function nt(t,e){t||Ee()}function Te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends vs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class W9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Cn.UNAUTHENTICATED))}shutdown(){}}class G9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class H9{constructor(e){this.t=e,this.currentUser=Cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nt(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new Qi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Qi,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Qi)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nt(typeof r.accessToken=="string"),new XR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string"),new Cn(e)}}class K9{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Cn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Y9{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new K9(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class X9{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Q9{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){nt(this.o===void 0);const r=s=>{s.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,me("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(nt(typeof n.token=="string"),this.R=n.token,new X9(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=J9(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Xe(t,e){return t<e?-1:t>e?1:0}function Xl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ue(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zt.fromMillis(Date.now())}static fromDate(e){return zt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new zt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.timestamp=e}static fromTimestamp(e){return new je(e)}static min(){return new je(new zt(0,0))}static max(){return new je(new zt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ee(),r===void 0?r=e.length-n:r>e.length-n&&Ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Yd.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yd?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class xt extends Yd{construct(e,n,r){return new xt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new xt(n)}static emptyPath(){return new xt([])}}const Z9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends Yd{construct(e,n,r){return new mn(e,n,r)}static isValidIdentifier(e){return Z9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new mn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ue(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ue(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ue(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new ue(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(n)}static emptyPath(){return new mn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(xt.fromString(e))}static fromName(e){return new be(xt.fromString(e).popFirst(5))}static empty(){return new be(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new xt(e.slice()))}}function ez(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=je.fromTimestamp(r===1e9?new zt(n+1,0):new zt(n,r));return new ga(i,be.empty(),e)}function tz(t){return new ga(t.readTime,t.key,-1)}class ga{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ga(je.min(),be.empty(),-1)}static max(){return new ga(je.max(),be.empty(),-1)}}function nz(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=be.comparator(t.documentKey,e.documentKey),n!==0?n:Xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iz{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jf(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==rz)throw t;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.reject(n)}static resolve(e){return new ee((n,r)=>{n(e)})}static reject(e){return new ee((n,r)=>{r(e)})}static waitFor(e){return new ee((n,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&n()},c=>r(c))}),a=!0,s===i&&n()})}static or(e){let n=ee.resolve(!1);for(const r of e)n=n.next(i=>i?ee.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new ee((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;n(e[u]).next(d=>{a[u]=d,++l,l===s&&r(a)},d=>i(d))}})}static doWhile(e,n){return new ee((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function sz(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}nS.oe=-1;function Cy(t){return t==null}function Vm(t){return t===0&&1/t==-1/0}function az(t){return typeof t=="number"&&Number.isInteger(t)&&!Vm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function $o(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function JR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){this.comparator=e,this.root=n||hn.EMPTY}insert(e,n){return new jt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new jt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sp(this.root,e,this.comparator,!1)}getReverseIterator(){return new sp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sp(this.root,e,this.comparator,!0)}}class sp{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??hn.RED,this.left=i??hn.EMPTY,this.right=s??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new hn(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return hn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,n,r,i,s){return this}insert(e,n,r){return new hn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.comparator=e,this.data=new jt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new MC(this.data.getIterator())}getIteratorFrom(e){return new MC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new yn(this.comparator);return n.data=e,n}}class MC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new cr([])}unionWith(e){let n=new yn(mn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new cr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ZR("Invalid base64 string: "+s):s}}(e);return new xn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new xn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xn.EMPTY_BYTE_STRING=new xn("");const oz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ya(t){if(nt(!!t),typeof t=="string"){let e=0;const n=oz.exec(t);if(nt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rt(t.seconds),nanos:Rt(t.nanos)}}function Rt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wo(t){return typeof t=="string"?xn.fromBase64String(t):xn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function iS(t){const e=t.mapValue.fields.__previous_value__;return rS(e)?iS(e):e}function Xd(t){const e=ya(t.mapValue.fields.__local_write_time__.timestampValue);return new zt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(e,n,r,i,s,a,l,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u}}class Qd{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Qd("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Qd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap={mapValue:{}};function _o(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rS(t)?4:uz(t)?9007199254740991:cz(t)?10:11:Ee()}function wi(t,e){if(t===e)return!0;const n=_o(t);if(n!==_o(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xd(t).isEqual(Xd(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=ya(i.timestampValue),l=ya(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return wo(i.bytesValue).isEqual(wo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Rt(i.geoPointValue.latitude)===Rt(s.geoPointValue.latitude)&&Rt(i.geoPointValue.longitude)===Rt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Rt(i.integerValue)===Rt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Rt(i.doubleValue),l=Rt(s.doubleValue);return a===l?Vm(a)===Vm(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Xl(t.arrayValue.values||[],e.arrayValue.values||[],wi);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(DC(a)!==DC(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!wi(a[c],l[c])))return!1;return!0}(t,e);default:return Ee()}}function Jd(t,e){return(t.values||[]).find(n=>wi(n,e))!==void 0}function Ql(t,e){if(t===e)return 0;const n=_o(t),r=_o(e);if(n!==r)return Xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xe(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=Rt(s.integerValue||s.doubleValue),c=Rt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return LC(t.timestampValue,e.timestampValue);case 4:return LC(Xd(t),Xd(e));case 5:return Xe(t.stringValue,e.stringValue);case 6:return function(s,a){const l=wo(s),c=wo(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),c=a.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=Xe(l[u],c[u]);if(d!==0)return d}return Xe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=Xe(Rt(s.latitude),Rt(a.latitude));return l!==0?l:Xe(Rt(s.longitude),Rt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return FC(t.arrayValue,e.arrayValue);case 10:return function(s,a){var l,c,u,d;const f=s.fields||{},h=a.fields||{},m=(l=f.value)===null||l===void 0?void 0:l.arrayValue,y=(c=h.value)===null||c===void 0?void 0:c.arrayValue,g=Xe(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((d=y==null?void 0:y.values)===null||d===void 0?void 0:d.length)||0);return g!==0?g:FC(m,y)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===ap.mapValue&&a===ap.mapValue)return 0;if(s===ap.mapValue)return 1;if(a===ap.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=a.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=Xe(c[f],d[f]);if(h!==0)return h;const m=Ql(l[c[f]],u[d[f]]);if(m!==0)return m}return Xe(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Ee()}}function LC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xe(t,e);const n=ya(t),r=ya(e),i=Xe(n.seconds,r.seconds);return i!==0?i:Xe(n.nanos,r.nanos)}function FC(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ql(n[i],r[i]);if(s)return s}return Xe(n.length,r.length)}function Jl(t){return Mb(t)}function Mb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ya(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return wo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return be.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Mb(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Mb(n.fields[a])}`;return i+"}"}(t.mapValue):Ee()}function VC(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Lb(t){return!!t&&"integerValue"in t}function sS(t){return!!t&&"arrayValue"in t}function BC(t){return!!t&&"nullValue"in t}function UC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gp(t){return!!t&&"mapValue"in t}function cz(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function fd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return $o(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function uz(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fd(n)}setAll(e){let n=mn.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=fd(a):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Gp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Gp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){$o(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Hn(fd(this.value))}}function e$(t){const e=[];return $o(t.fields,(n,r)=>{const i=new mn([n]);if(Gp(r)){const s=e$(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new cr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Tn(e,0,je.min(),je.min(),je.min(),Hn.empty(),0)}static newFoundDocument(e,n,r,i){return new Tn(e,1,n,je.min(),r,i,0)}static newNoDocument(e,n){return new Tn(e,2,n,je.min(),je.min(),Hn.empty(),0)}static newUnknownDocument(e,n){return new Tn(e,3,n,je.min(),je.min(),Hn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e,n){this.position=e,this.inclusive=n}}function zC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=be.comparator(be.fromName(a.referenceValue),n.key):r=Ql(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function qC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n="asc"){this.field=e,this.dir=n}}function dz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t${}class Bt extends t${constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hz(e,n,r):n==="array-contains"?new gz(e,r):n==="in"?new yz(e,r):n==="not-in"?new vz(e,r):n==="array-contains-any"?new xz(e,r):new Bt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pz(e,r):new mz(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ql(n,this.value)):n!==null&&_o(this.value)===_o(n)&&this.matchesComparison(Ql(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ei extends t${constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ei(e,n)}matches(e){return n$(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function n$(t){return t.op==="and"}function r$(t){return fz(t)&&n$(t)}function fz(t){for(const e of t.filters)if(e instanceof ei)return!1;return!0}function Fb(t){if(t instanceof Bt)return t.field.canonicalString()+t.op.toString()+Jl(t.value);if(r$(t))return t.filters.map(e=>Fb(e)).join(",");{const e=t.filters.map(n=>Fb(n)).join(",");return`${t.op}(${e})`}}function i$(t,e){return t instanceof Bt?function(r,i){return i instanceof Bt&&r.op===i.op&&r.field.isEqual(i.field)&&wi(r.value,i.value)}(t,e):t instanceof ei?function(r,i){return i instanceof ei&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&i$(a,i.filters[l]),!0):!1}(t,e):void Ee()}function s$(t){return t instanceof Bt?function(n){return`${n.field.canonicalString()} ${n.op} ${Jl(n.value)}`}(t):t instanceof ei?function(n){return n.op.toString()+" {"+n.getFilters().map(s$).join(" ,")+"}"}(t):"Filter"}class hz extends Bt{constructor(e,n,r){super(e,n,r),this.key=be.fromName(r.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class pz extends Bt{constructor(e,n){super(e,"in",n),this.keys=a$("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class mz extends Bt{constructor(e,n){super(e,"not-in",n),this.keys=a$("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function a$(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>be.fromName(r.referenceValue))}class gz extends Bt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sS(n)&&Jd(n.arrayValue,this.value)}}class yz extends Bt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jd(this.value.arrayValue,n)}}class vz extends Bt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Jd(this.value.arrayValue,n)}}class xz extends Bt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sS(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Jd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.ue=null}}function WC(t,e=null,n=[],r=[],i=null,s=null,a=null){return new bz(t,e,n,r,i,s,a)}function aS(t){const e=Te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Fb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Cy(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Jl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Jl(r)).join(",")),e.ue=n}return e.ue}function oS(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!dz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!i$(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qC(t.startAt,e.startAt)&&qC(t.endAt,e.endAt)}function Vb(t){return be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function wz(t,e,n,r,i,s,a,l){return new Vc(t,e,n,r,i,s,a,l)}function jy(t){return new Vc(t)}function GC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function o$(t){return t.collectionGroup!==null}function hd(t){const e=Te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new yn(mn.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Zd(s,r))}),n.has(mn.keyField().canonicalString())||e.ce.push(new Zd(mn.keyField(),r))}return e.ce}function mi(t){const e=Te(t);return e.le||(e.le=_z(e,hd(t))),e.le}function _z(t,e){if(t.limitType==="F")return WC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Zd(i.field,s)});const n=t.endAt?new Bm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bm(t.startAt.position,t.startAt.inclusive):null;return WC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Bb(t,e){const n=t.filters.concat([e]);return new Vc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Um(t,e,n){return new Vc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ty(t,e){return oS(mi(t),mi(e))&&t.limitType===e.limitType}function l$(t){return`${aS(mi(t))}|lt:${t.limitType}`}function rl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>s$(i)).join(", ")}]`),Cy(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Jl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Jl(i)).join(",")),`Target(${r})`}(mi(t))}; limitType=${t.limitType})`}function Py(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):be.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of hd(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,c){const u=zC(a,l,c);return a.inclusive?u<=0:u<0}(r.startAt,hd(r),i)||r.endAt&&!function(a,l,c){const u=zC(a,l,c);return a.inclusive?u>=0:u>0}(r.endAt,hd(r),i))}(t,e)}function Sz(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function c$(t){return(e,n)=>{let r=!1;for(const i of hd(t)){const s=Az(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Az(t,e,n){const r=t.field.isKeyField()?be.comparator(e.key,n.key):function(s,a,l){const c=a.data.field(s),u=l.data.field(s);return c!==null&&u!==null?Ql(c,u):Ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$o(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return JR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nz=new jt(be.comparator);function us(){return Nz}const u$=new jt(be.comparator);function Hu(...t){let e=u$;for(const n of t)e=e.insert(n.key,n);return e}function d$(t){let e=u$;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ha(){return pd()}function f$(){return pd()}function pd(){return new Bc(t=>t.toString(),(t,e)=>t.isEqual(e))}const Ez=new jt(be.comparator),Cz=new yn(be.comparator);function Le(...t){let e=Cz;for(const n of t)e=e.add(n);return e}const jz=new yn(Xe);function Tz(){return jz}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vm(e)?"-0":e}}function h$(t){return{integerValue:""+t}}function Pz(t,e){return az(e)?h$(e):lS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(){this._=void 0}}function kz(t,e,n){return t instanceof ef?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&rS(s)&&(s=iS(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(n,e):t instanceof Zl?m$(t,e):t instanceof tf?g$(t,e):function(i,s){const a=p$(i,s),l=HC(a)+HC(i.Pe);return Lb(a)&&Lb(i.Pe)?h$(l):lS(i.serializer,l)}(t,e)}function Iz(t,e,n){return t instanceof Zl?m$(t,e):t instanceof tf?g$(t,e):n}function p$(t,e){return t instanceof zm?function(r){return Lb(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ef extends ky{}class Zl extends ky{constructor(e){super(),this.elements=e}}function m$(t,e){const n=y$(e);for(const r of t.elements)n.some(i=>wi(i,r))||n.push(r);return{arrayValue:{values:n}}}class tf extends ky{constructor(e){super(),this.elements=e}}function g$(t,e){let n=y$(e);for(const r of t.elements)n=n.filter(i=>!wi(i,r));return{arrayValue:{values:n}}}class zm extends ky{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function HC(t){return Rt(t.integerValue||t.doubleValue)}function y$(t){return sS(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(e,n){this.field=e,this.transform=n}}function Oz(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Zl&&i instanceof Zl||r instanceof tf&&i instanceof tf?Xl(r.elements,i.elements,wi):r instanceof zm&&i instanceof zm?wi(r.Pe,i.Pe):r instanceof ef&&i instanceof ef}(t.transform,e.transform)}class Rz{constructor(e,n){this.version=e,this.transformResults=n}}class Fn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Fn}static exists(e){return new Fn(void 0,e)}static updateTime(e){return new Fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Iy{}function x$(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Oy(t.key,Fn.none()):new eh(t.key,t.data,Fn.none());{const n=t.data,r=Hn.empty();let i=new yn(mn.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Aa(t.key,r,new cr(i.toArray()),Fn.none())}}function $z(t,e,n){t instanceof eh?function(i,s,a){const l=i.value.clone(),c=YC(i.fieldTransforms,s,a.transformResults);l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Aa?function(i,s,a){if(!Hp(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=YC(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(b$(i)),c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function md(t,e,n,r){return t instanceof eh?function(s,a,l,c){if(!Hp(s.precondition,a))return l;const u=s.value.clone(),d=XC(s.fieldTransforms,c,a);return u.setAll(d),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Aa?function(s,a,l,c){if(!Hp(s.precondition,a))return l;const u=XC(s.fieldTransforms,c,a),d=a.data;return d.setAll(b$(s)),d.setAll(u),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,a,l){return Hp(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function Dz(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=p$(r.transform,i||null);s!=null&&(n===null&&(n=Hn.empty()),n.set(r.field,s))}return n||null}function KC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Xl(r,i,(s,a)=>Oz(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class eh extends Iy{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Aa extends Iy{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function b$(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function YC(t,e,n){const r=new Map;nt(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,Iz(a,l,n[i]))}return r}function XC(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,kz(s,a,e))}return r}class Oy extends Iy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Mz extends Iy{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&$z(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=md(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=md(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=f$();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const c=x$(a,l);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(je.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Le())}isEqual(e){return this.batchId===e.batchId&&Xl(this.mutations,e.mutations,(n,r)=>KC(n,r))&&Xl(this.baseMutations,e.baseMutations,(n,r)=>KC(n,r))}}class cS{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){nt(e.mutations.length===r.length);let i=function(){return Ez}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new cS(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,qe;function Bz(t){switch(t){default:return Ee();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function w$(t){if(t===void 0)return cs("GRPC error has no .code"),Q.UNKNOWN;switch(t){case Mt.OK:return Q.OK;case Mt.CANCELLED:return Q.CANCELLED;case Mt.UNKNOWN:return Q.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return Q.INTERNAL;case Mt.UNAVAILABLE:return Q.UNAVAILABLE;case Mt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case Mt.NOT_FOUND:return Q.NOT_FOUND;case Mt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case Mt.ABORTED:return Q.ABORTED;case Mt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case Mt.DATA_LOSS:return Q.DATA_LOSS;default:return Ee()}}(qe=Mt||(Mt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uz(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zz=new ro([4294967295,4294967295],0);function QC(t){const e=Uz().encode(t),n=new qR;return n.update(e),new Uint8Array(n.digest())}function JC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ro([n,r],0),new ro([i,s],0)]}class uS{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ku(`Invalid padding: ${n}`);if(r<0)throw new Ku(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ku(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ku(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ro.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(ro.fromNumber(r)));return i.compare(zz)===1&&(i=new ro([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=QC(e),[r,i]=JC(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new uS(s,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.Ie===0)return;const n=QC(e),[r,i]=JC(n);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ku extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,th.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ry(je.min(),i,new jt(Xe),us(),Le())}}class th{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new th(r,n,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class _${constructor(e,n){this.targetId=e,this.me=n}}class S${constructor(e,n,r=xn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ZC{constructor(){this.fe=0,this.ge=tj(),this.pe=xn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Le(),n=Le(),r=Le();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ee()}}),new th(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=tj()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,nt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class qz{constructor(e){this.Le=e,this.Be=new Map,this.ke=us(),this.qe=ej(),this.Qe=new jt(Xe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Vb(s))if(r===0){const a=new be(s.path);this.Ue(n,a,Tn.newNoDocument(a,je.min()))}else nt(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),c=l?this.Xe(l,e,a):1;if(c!==0){this.je(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=wo(r).toUint8Array()}catch(c){if(c instanceof ZR)return Yl("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new uS(a,i,s)}catch(c){return Yl(c instanceof Ku?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,a)=>{const l=this.Je(a);if(l){if(s.current&&Vb(l.target)){const c=new be(l.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,Tn.newNoDocument(c,e))}s.be&&(n.set(a,s.ve()),s.Ce())}});let r=Le();this.qe.forEach((s,a)=>{let l=!0;a.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new Ry(e,n,this.Qe,this.ke,r);return this.ke=us(),this.qe=ej(),this.Qe=new jt(Xe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ZC,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new yn(Xe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ZC),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function ej(){return new jt(be.comparator)}function tj(){return new jt(be.comparator)}const Wz={asc:"ASCENDING",desc:"DESCENDING"},Gz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hz={and:"AND",or:"OR"};class Kz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ub(t,e){return t.useProto3Json||Cy(e)?e:{value:e}}function qm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function A$(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Yz(t,e){return qm(t,e.toTimestamp())}function gi(t){return nt(!!t),je.fromTimestamp(function(n){const r=ya(n);return new zt(r.seconds,r.nanos)}(t))}function dS(t,e){return zb(t,e).canonicalString()}function zb(t,e){const n=function(i){return new xt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function N$(t){const e=xt.fromString(t);return nt(P$(e)),e}function qb(t,e){return dS(t.databaseId,e.path)}function $0(t,e){const n=N$(e);if(n.get(1)!==t.databaseId.projectId)throw new ue(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ue(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new be(C$(n))}function E$(t,e){return dS(t.databaseId,e)}function Xz(t){const e=N$(t);return e.length===4?xt.emptyPath():C$(e)}function Wb(t){return new xt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function C$(t){return nt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function nj(t,e,n){return{name:qb(t,e),fields:n.value.mapValue.fields}}function Qz(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(nt(d===void 0||typeof d=="string"),xn.fromBase64String(d||"")):(nt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),xn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(u){const d=u.code===void 0?Q.UNKNOWN:w$(u.code);return new ue(d,u.message||"")}(a);n=new S$(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=$0(t,r.document.name),s=gi(r.document.updateTime),a=r.document.createTime?gi(r.document.createTime):je.min(),l=new Hn({mapValue:{fields:r.document.fields}}),c=Tn.newFoundDocument(i,s,a,l),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Kp(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=$0(t,r.document),s=r.readTime?gi(r.readTime):je.min(),a=Tn.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Kp([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=$0(t,r.document),s=r.removedTargetIds||[];n=new Kp([],s,i,null)}else{if(!("filter"in e))return Ee();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new Vz(i,s),l=r.targetId;n=new _$(l,a)}}return n}function Jz(t,e){let n;if(e instanceof eh)n={update:nj(t,e.key,e.value)};else if(e instanceof Oy)n={delete:qb(t,e.key)};else if(e instanceof Aa)n={update:nj(t,e.key,e.data),updateMask:o8(e.fieldMask)};else{if(!(e instanceof Mz))return Ee();n={verify:qb(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof ef)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Zl)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof tf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof zm)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw Ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Yz(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ee()}(t,e.precondition)),n}function Zz(t,e){return t&&t.length>0?(nt(e!==void 0),t.map(n=>function(i,s){let a=i.updateTime?gi(i.updateTime):gi(s);return a.isEqual(je.min())&&(a=gi(s)),new Rz(a,i.transformResults||[])}(n,e))):[]}function e8(t,e){return{documents:[E$(t,e.path)]}}function t8(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=E$(t,i);const s=function(u){if(u.length!==0)return T$(ei.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:il(h.field),direction:i8(h.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Ub(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function n8(t){let e=Xz(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){nt(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){const h=j$(f);return h instanceof ei&&r$(h)?h.getFilters():[h]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(h=>function(y){return new Zd(sl(y.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(h))}(n.orderBy));let l=null;n.limit&&(l=function(f){let h;return h=typeof f=="object"?f.value:f,Cy(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(f){const h=!!f.before,m=f.values||[];return new Bm(m,h)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const h=!f.before,m=f.values||[];return new Bm(m,h)}(n.endAt)),wz(e,i,a,s,l,"F",c,u)}function r8(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function j$(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=sl(n.unaryFilter.field);return Bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=sl(n.unaryFilter.field);return Bt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=sl(n.unaryFilter.field);return Bt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=sl(n.unaryFilter.field);return Bt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}}(t):t.fieldFilter!==void 0?function(n){return Bt.create(sl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ei.create(n.compositeFilter.filters.map(r=>j$(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ee()}}(n.compositeFilter.op))}(t):Ee()}function i8(t){return Wz[t]}function s8(t){return Gz[t]}function a8(t){return Hz[t]}function il(t){return{fieldPath:t.canonicalString()}}function sl(t){return mn.fromServerFormat(t.fieldPath)}function T$(t){return t instanceof Bt?function(n){if(n.op==="=="){if(UC(n.value))return{unaryFilter:{field:il(n.field),op:"IS_NAN"}};if(BC(n.value))return{unaryFilter:{field:il(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(UC(n.value))return{unaryFilter:{field:il(n.field),op:"IS_NOT_NAN"}};if(BC(n.value))return{unaryFilter:{field:il(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:il(n.field),op:s8(n.op),value:n.value}}}(t):t instanceof ei?function(n){const r=n.getFilters().map(i=>T$(i));return r.length===1?r[0]:{compositeFilter:{op:a8(n.op),filters:r}}}(t):Ee()}function o8(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function P$(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e,n,r,i,s=je.min(),a=je.min(),l=xn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e){this.ct=e}}function c8(t){const e=n8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Um(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8{constructor(){this.un=new d8}addToCollectionParentIndex(e,n){return this.un.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(ga.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(ga.min())}updateCollectionGroup(e,n,r){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class d8{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new yn(xt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new yn(xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ec(0)}static kn(){return new ec(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(){this.changes=new Bc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ee.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h8{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&md(r.mutation,i,cr.empty(),zt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Le()){const i=Ha();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Hu();return s.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Ha();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Le()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let s=us();const a=pd(),l=function(){return pd()}();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Aa)?s=s.insert(u.key,u):d!==void 0?(a.set(u.key,d.mutation.getFieldMask()),md(d.mutation,u,d.mutation.getFieldMask(),zt.now())):a.set(u.key,cr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>a.set(u,d)),n.forEach((u,d)=>{var f;return l.set(u,new h8(d,(f=a.get(u))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,n){const r=pd();let i=new jt((a,l)=>a-l),s=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||cr.empty();d=l.applyToLocalView(u,d),r.set(c,d);const f=(i.get(l.batchId)||Le()).add(c);i=i.insert(l.batchId,f)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=f$();d.forEach(h=>{if(!s.has(h)){const m=x$(n.get(h),r.get(h));m!==null&&f.set(h,m),s=s.add(h)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,f))}return ee.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return be.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):o$(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):ee.resolve(Ha());let l=-1,c=s;return a.next(u=>ee.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?ee.resolve():this.remoteDocumentCache.getEntry(e,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Le())).next(d=>({batchId:l,changes:d$(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(r=>{let i=Hu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Hu();return this.indexManager.getCollectionParents(e,s).next(l=>ee.forEach(l,c=>{const u=function(f,h){return new Vc(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,h)=>{a=a.insert(f,h)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((c,u)=>{const d=u.getKey();a.get(d)===null&&(a=a.insert(d,Tn.newInvalidDocument(d)))});let l=Hu();return a.forEach((c,u)=>{const d=s.get(c);d!==void 0&&md(d.mutation,u,cr.empty(),zt.now()),Py(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m8{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return ee.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:gi(i.createTime)}}(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:c8(i.bundledQuery),readTime:gi(i.readTime)}}(n)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8{constructor(){this.overlays=new jt(be.comparator),this.Ir=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ha();return ee.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),ee.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),ee.resolve()}getOverlaysForCollection(e,n,r){const i=Ha(),s=n.length+1,a=new be(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return ee.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new jt((u,d)=>u-d);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Ha(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Ha(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=i)););return ee.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Fz(n,r));let s=this.Ir.get(n);s===void 0&&(s=Le(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y8{constructor(){this.sessionToken=xn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(){this.Tr=new yn(tn.Er),this.dr=new yn(tn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new tn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new tn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new be(new xt([])),r=new tn(n,e),i=new tn(n,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new be(new xt([])),r=new tn(n,e),i=new tn(n,e+1);let s=Le();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new tn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return be.comparator(e.key,n.key)||Xe(e.wr,n.wr)}static Ar(e,n){return Xe(e.wr,n.wr)||be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v8{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new yn(tn.Er)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Lz(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.br=this.br.add(new tn(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ee.resolve(a)}lookupMutationBatch(e,n){return ee.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return ee.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tn(n,0),i=new tn(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const l=this.Dr(a.wr);s.push(l)}),ee.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new yn(Xe);return n.forEach(i=>{const s=new tn(i,0),a=new tn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],l=>{r=r.add(l.wr)})}),ee.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;be.isDocumentKey(s)||(s=s.child(""));const a=new tn(new be(s),0);let l=new yn(Xe);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(l=l.add(c.wr)),!0)},a),ee.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){nt(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return ee.forEach(n.mutations,i=>{const s=new tn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new tn(n,0),i=this.br.firstAfterOrEqual(r);return ee.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x8{constructor(e){this.Mr=e,this.docs=function(){return new jt(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ee.resolve(r?r.document.mutableCopy():Tn.newInvalidDocument(n))}getEntries(e,n){let r=us();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Tn.newInvalidDocument(i))}),ee.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=us();const a=n.path,l=new be(a.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||nz(tz(d),r)<=0||(i.has(d.key)||Py(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return ee.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Ee()}Or(e,n){return ee.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new b8(this)}getSize(e){return ee.resolve(this.size)}}class b8 extends f8{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),ee.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(e){this.persistence=e,this.Nr=new Bc(n=>aS(n),oS),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.Lr=0,this.Br=new fS,this.targetCount=0,this.kr=ec.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),ee.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ec(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.Kn(n),ee.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),ee.waitFor(s).next(()=>i)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return ee.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),ee.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),ee.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return ee.resolve(r)}containsKey(e,n){return ee.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8{constructor(e,n){this.qr={},this.overlays={},this.Qr=new nS(0),this.Kr=!1,this.Kr=!0,this.$r=new y8,this.referenceDelegate=e(this),this.Ur=new w8(this),this.indexManager=new u8,this.remoteDocumentCache=function(i){return new x8(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new l8(n),this.Gr=new m8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new g8,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new v8(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){me("MemoryPersistence","Starting transaction:",e);const i=new S8(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return ee.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class S8 extends iz{constructor(e){super(),this.currentSequenceNumber=e}}class hS{constructor(e){this.persistence=e,this.Jr=new fS,this.Yr=null}static Zr(e){return new hS(e)}get Xr(){if(this.Yr)return this.Yr;throw Ee()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),ee.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),ee.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.Xr,r=>{const i=be.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,je.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return ee.or([()=>ee.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Le(),i=Le();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new pS(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N8{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return jU()?8:sz(On())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new A8;return this.Xi(e,n,a).next(l=>{if(s.result=l,this.zi)return this.es(e,n,a,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ju()<=Ue.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",rl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ee.resolve()):(ju()<=Ue.DEBUG&&me("QueryEngine","Query:",rl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ju()<=Ue.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",rl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,mi(n))):ee.resolve())}Yi(e,n){if(GC(n))return ee.resolve(null);let r=mi(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Um(n,null,"F"),r=mi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=Le(...s);return this.Ji.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(n,l);return this.ns(n,u,a,c.readTime)?this.Yi(e,Um(n,null,"F")):this.rs(e,u,n,c)}))})))}Zi(e,n,r,i){return GC(n)||i.isEqual(je.min())?ee.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(n,s);return this.ns(n,a,r,i)?ee.resolve(null):(ju()<=Ue.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),rl(n)),this.rs(e,a,n,ez(i,-1)).next(l=>l))})}ts(e,n){let r=new yn(c$(e));return n.forEach((i,s)=>{Py(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ju()<=Ue.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",rl(n)),this.Ji.getDocumentsMatchingQuery(e,n,ga.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new jt(Xe),this._s=new Bc(s=>aS(s),oS),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new p8(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function C8(t,e,n,r){return new E8(t,e,n,r)}async function k$(t,e){const n=Te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let c=Le();for(const u of i){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:a,addedBatchIds:l}))})})}function j8(t,e){const n=Te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,h=f.keys();let m=ee.resolve();return h.forEach(y=>{m=m.next(()=>d.getEntry(c,y)).next(g=>{const x=u.docVersions.get(y);nt(x!==null),g.version.compareTo(x)<0&&(f.applyToRemoteDocument(g,u),g.isValidDocument()&&(g.setReadTime(u.commitVersion),d.addEntry(g)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Le();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function I$(t){const e=Te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function T8(t,e){const n=Te(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((d,f)=>{const h=i.get(f);if(!h)return;l.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,f)));let m=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(xn.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(f,m),function(g,x,w){return g.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(h,m,d)&&l.push(n.Ur.updateTargetData(s,m))});let c=us(),u=Le();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(P8(s,a,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(je.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(d)}return ee.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.os=i,s))}function P8(t,e,n){let r=Le(),i=Le();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=us();return n.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(je.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):me("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Ps:a,Is:i}})}function k8(t,e){const n=Te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function I8(t,e){const n=Te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,ee.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new Gs(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Gb(t,e,n){const r=Te(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Zf(a))throw a;me("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function rj(t,e,n){const r=Te(t);let i=je.min(),s=Le();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,d){const f=Te(c),h=f._s.get(d);return h!==void 0?ee.resolve(f.os.get(h)):f.Ur.getTargetData(u,d)}(r,a,mi(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:je.min(),n?s:Le())).next(l=>(O8(r,Sz(e),l),{documents:l,Ts:s})))}function O8(t,e,n){let r=t.us.get(e)||je.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class ij{constructor(){this.activeTargetIds=Tz()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class R8{constructor(){this.so=new ij,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ij,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let op=null;function D0(){return op===null?op=function(){return 268435456+Math.round(2147483648*Math.random())}():op++,"0x"+op.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An="WebChannelConnection";class L8 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,a){const l=D0(),c=this.xo(n,r.toUriEncodedString());me("RestConnection",`Sending RPC '${n}' ${l}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,a),this.No(n,c,u,i).then(d=>(me("RestConnection",`Received RPC '${n}' ${l}: `,d),d),d=>{throw Yl("RestConnection",`RPC '${n}' ${l} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(n,r,i,s,a,l){return this.Mo(n,r,i,s,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>n[a]=s),i&&i.headers.forEach((s,a)=>n[a]=s)}xo(n,r){const i=D8[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=D0();return new Promise((a,l)=>{const c=new WR;c.setWithCredentials(!0),c.listenOnce(GR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Wp.NO_ERROR:const d=c.getResponseJson();me(An,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),a(d);break;case Wp.TIMEOUT:me(An,`RPC '${e}' ${s} timed out`),l(new ue(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Wp.HTTP_ERROR:const f=c.getStatus();if(me(An,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);const m=h==null?void 0:h.error;if(m&&m.status&&m.message){const y=function(x){const w=x.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(w)>=0?w:Q.UNKNOWN}(m.status);l(new ue(y,m.message))}else l(new ue(Q.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new ue(Q.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{me(An,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);me(An,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=D0(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=YR(),l=KR(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=s.join("");me(An,`Creating RPC '${e}' stream ${i}: ${d}`,c);const f=a.createWebChannel(d,c);let h=!1,m=!1;const y=new M8({Io:x=>{m?me(An,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(h||(me(An,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),me(An,`RPC '${e}' stream ${i} sending:`,x),f.send(x))},To:()=>f.close()}),g=(x,w,b)=>{x.listen(w,v=>{try{b(v)}catch(N){setTimeout(()=>{throw N},0)}})};return g(f,Gu.EventType.OPEN,()=>{m||(me(An,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),g(f,Gu.EventType.CLOSE,()=>{m||(m=!0,me(An,`RPC '${e}' stream ${i} transport closed`),y.So())}),g(f,Gu.EventType.ERROR,x=>{m||(m=!0,Yl(An,`RPC '${e}' stream ${i} transport errored:`,x),y.So(new ue(Q.UNAVAILABLE,"The operation could not be completed")))}),g(f,Gu.EventType.MESSAGE,x=>{var w;if(!m){const b=x.data[0];nt(!!b);const v=b,N=v.error||((w=v[0])===null||w===void 0?void 0:w.error);if(N){me(An,`RPC '${e}' stream ${i} received error:`,N);const S=N.status;let A=function(C){const P=Mt[C];if(P!==void 0)return w$(P)}(S),E=N.message;A===void 0&&(A=Q.INTERNAL,E="Unknown error status: "+S+" with message "+N.message),m=!0,y.So(new ue(A,E)),f.close()}else me(An,`RPC '${e}' stream ${i} received:`,b),y.bo(b)}}),g(l,HR.STAT_EVENT,x=>{x.stat===Db.PROXY?me(An,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Db.NOPROXY&&me(An,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function M0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(t){return new Kz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R${constructor(e,n,r,i,s,a,l,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new O$(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(cs(n.toString()),cs("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ue(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class F8 extends R${constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Qz(this.serializer,e),r=function(s){if(!("targetChange"in s))return je.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?je.min():a.readTime?gi(a.readTime):je.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Wb(this.serializer),n.addTarget=function(s,a){let l;const c=a.target;if(l=Vb(c)?{documents:e8(s,c)}:{query:t8(s,c)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=A$(s,a.resumeToken);const u=Ub(s,a.expectedCount);u!==null&&(l.expectedCount=u)}else if(a.snapshotVersion.compareTo(je.min())>0){l.readTime=qm(s,a.snapshotVersion.toTimestamp());const u=Ub(s,a.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=r8(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Wb(this.serializer),n.removeTarget=e,this.a_(n)}}class V8 extends R${constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return nt(!!e.streamToken),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){nt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Zz(e.writeResults,e.commitTime),r=gi(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Wb(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Jz(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ue(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,zb(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ue(Q.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Lo(e,zb(n,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ue(Q.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class U8{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(cs(n),this.D_=!1):me("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{Do(this)&&(me("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=Te(c);u.L_.add(4),await nh(u),u.q_.set("Unknown"),u.L_.delete(4),await Dy(u)}(this))})}),this.q_=new U8(r,i)}}async function Dy(t){if(Do(t))for(const e of t.B_)await e(!0)}async function nh(t){for(const e of t.B_)await e(!1)}function $$(t,e){const n=Te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),vS(n)?yS(n):Uc(n).r_()&&gS(n,e))}function mS(t,e){const n=Te(t),r=Uc(n);n.N_.delete(e),r.r_()&&D$(n,e),n.N_.size===0&&(r.r_()?r.o_():Do(n)&&n.q_.set("Unknown"))}function gS(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Uc(t).A_(e)}function D$(t,e){t.Q_.xe(e),Uc(t).R_(e)}function yS(t){t.Q_=new qz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Uc(t).start(),t.q_.v_()}function vS(t){return Do(t)&&!Uc(t).n_()&&t.N_.size>0}function Do(t){return Te(t).L_.size===0}function M$(t){t.Q_=void 0}async function q8(t){t.q_.set("Online")}async function W8(t){t.N_.forEach((e,n)=>{gS(t,e)})}async function G8(t,e){M$(t),vS(t)?(t.q_.M_(e),yS(t)):t.q_.set("Unknown")}async function H8(t,e,n){if(t.q_.set("Online"),e instanceof S$&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wm(t,r)}else if(e instanceof Kp?t.Q_.Ke(e):e instanceof _$?t.Q_.He(e):t.Q_.We(e),!n.isEqual(je.min()))try{const r=await I$(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.Q_.rt(a);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,u)=>{const d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(xn.EMPTY_BYTE_STRING,d.snapshotVersion)),D$(s,c);const f=new Gs(d.target,c,u,d.sequenceNumber);gS(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){me("RemoteStore","Failed to raise snapshot:",r),await Wm(t,r)}}async function Wm(t,e,n){if(!Zf(e))throw e;t.L_.add(1),await nh(t),t.q_.set("Offline"),n||(n=()=>I$(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{me("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Dy(t)})}function L$(t,e){return e().catch(n=>Wm(t,n,e))}async function My(t){const e=Te(t),n=va(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;K8(e);)try{const i=await k8(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Y8(e,i)}catch(i){await Wm(e,i)}F$(e)&&V$(e)}function K8(t){return Do(t)&&t.O_.length<10}function Y8(t,e){t.O_.push(e);const n=va(t);n.r_()&&n.V_&&n.m_(e.mutations)}function F$(t){return Do(t)&&!va(t).n_()&&t.O_.length>0}function V$(t){va(t).start()}async function X8(t){va(t).p_()}async function Q8(t){const e=va(t);for(const n of t.O_)e.m_(n.mutations)}async function J8(t,e,n){const r=t.O_.shift(),i=cS.from(r,e,n);await L$(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await My(t)}async function Z8(t,e){e&&va(t).V_&&await async function(r,i){if(function(a){return Bz(a)&&a!==Q.ABORTED}(i.code)){const s=r.O_.shift();va(r).s_(),await L$(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await My(r)}}(t,e),F$(t)&&V$(t)}async function aj(t,e){const n=Te(t);n.asyncQueue.verifyOperationInProgress(),me("RemoteStore","RemoteStore received new credentials");const r=Do(n);n.L_.add(3),await nh(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Dy(n)}async function e7(t,e){const n=Te(t);e?(n.L_.delete(2),await Dy(n)):e||(n.L_.add(2),await nh(n),n.q_.set("Unknown"))}function Uc(t){return t.K_||(t.K_=function(n,r,i){const s=Te(n);return s.w_(),new F8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:q8.bind(null,t),Ro:W8.bind(null,t),mo:G8.bind(null,t),d_:H8.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),vS(t)?yS(t):t.q_.set("Unknown")):(await t.K_.stop(),M$(t))})),t.K_}function va(t){return t.U_||(t.U_=function(n,r,i){const s=Te(n);return s.w_(),new V8(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:X8.bind(null,t),mo:Z8.bind(null,t),f_:Q8.bind(null,t),g_:J8.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await My(t)):(await t.U_.stop(),t.O_.length>0&&(me("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Qi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new xS(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bS(t,e){if(cs("AsyncQueue",`${e}: ${t}`),Zf(t))return new ue(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||be.comparator(n.key,r.key):(n,r)=>be.comparator(n.key,r.key),this.keyedMap=Hu(),this.sortedSet=new jt(this.comparator)}static emptySet(e){return new Pl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Pl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(){this.W_=new jt(be.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class tc{constructor(e,n,r,i,s,a,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new tc(e,n,Pl.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ty(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class n7{constructor(){this.queries=lj(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Te(n),s=i.queries;i.queries=lj(),s.forEach((a,l)=>{for(const c of l.j_)c.onError(r)})})(this,new ue(Q.ABORTED,"Firestore shutting down"))}}function lj(){return new Bc(t=>l$(t),Ty)}async function wS(t,e){const n=Te(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new t7,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=bS(a,`Initialization of query '${rl(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&SS(n)}async function _S(t,e){const n=Te(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function r7(t,e){const n=Te(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.j_)l.X_(i)&&(r=!0);a.z_=i}}r&&SS(n)}function i7(t,e,n){const r=Te(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function SS(t){t.Y_.forEach(e=>{e.next()})}var Hb,cj;(cj=Hb||(Hb={})).ea="default",cj.Cache="cache";class AS{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new tc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=tc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Hb.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B${constructor(e){this.key=e}}class U${constructor(e){this.key=e}}class s7{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Le(),this.mutatedKeys=Le(),this.Aa=c$(e),this.Ra=new Pl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new oj,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const h=i.get(d),m=Py(this.query,f)?f:null,y=!!h&&this.mutatedKeys.has(h.key),g=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;h&&m?h.data.isEqual(m.data)?y!==g&&(r.track({type:3,doc:m}),x=!0):this.ga(h,m)||(r.track({type:2,doc:m}),x=!0,(c&&this.Aa(m,c)>0||u&&this.Aa(m,u)<0)&&(l=!0)):!h&&m?(r.track({type:0,doc:m}),x=!0):h&&!m&&(r.track({type:1,doc:h}),x=!0,(c||u)&&(l=!0)),x&&(m?(a=a.add(m),s=g?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:a,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((d,f)=>function(m,y){const g=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return g(m)-g(y)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,a.length!==0||u?{snapshot:new tc(this.query,e.Ra,s,a,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new oj,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Le(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new U$(r))}),this.da.forEach(r=>{e.has(r)||n.push(new B$(r))}),n}ba(e){this.Ta=e.Ts,this.da=Le();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return tc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class a7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class o7{constructor(e){this.key=e,this.va=!1}}class l7{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Bc(l=>l$(l),Ty),this.Ma=new Map,this.xa=new Set,this.Oa=new jt(be.comparator),this.Na=new Map,this.La=new fS,this.Ba={},this.ka=new Map,this.qa=ec.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function c7(t,e,n=!0){const r=K$(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await z$(r,e,n,!0),i}async function u7(t,e){const n=K$(t);await z$(n,e,!0,!1)}async function z$(t,e,n,r){const i=await I8(t.localStore,mi(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await d7(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&$$(t.remoteStore,i),l}async function d7(t,e,n,r,i){t.Ka=(f,h,m)=>async function(g,x,w,b){let v=x.view.ma(w);v.ns&&(v=await rj(g.localStore,x.query,!1).then(({documents:E})=>x.view.ma(E,v)));const N=b&&b.targetChanges.get(x.targetId),S=b&&b.targetMismatches.get(x.targetId)!=null,A=x.view.applyChanges(v,g.isPrimaryClient,N,S);return dj(g,x.targetId,A.wa),A.snapshot}(t,f,h,m);const s=await rj(t.localStore,e,!0),a=new s7(e,s.Ts),l=a.ma(s.documents),c=th.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=a.applyChanges(l,t.isPrimaryClient,c);dj(t,n,u.wa);const d=new a7(e,n,a);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function f7(t,e,n){const r=Te(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!Ty(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Gb(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&mS(r.remoteStore,i.targetId),Kb(r,i.targetId)}).catch(Jf)):(Kb(r,i.targetId),await Gb(r.localStore,i.targetId,!0))}async function h7(t,e){const n=Te(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mS(n.remoteStore,r.targetId))}async function p7(t,e,n){const r=w7(t);try{const i=await function(a,l){const c=Te(a),u=zt.now(),d=l.reduce((m,y)=>m.add(y.key),Le());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=us(),g=Le();return c.cs.getEntries(m,d).next(x=>{y=x,y.forEach((w,b)=>{b.isValidDocument()||(g=g.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,y)).next(x=>{f=x;const w=[];for(const b of l){const v=Dz(b,f.get(b.key).overlayedDocument);v!=null&&w.push(new Aa(b.key,v,e$(v.value.mapValue),Fn.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,w,l)}).next(x=>{h=x;const w=x.applyToLocalDocumentSet(f,g);return c.documentOverlayCache.saveOverlays(m,x.batchId,w)})}).then(()=>({batchId:h.batchId,changes:d$(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,c){let u=a.Ba[a.currentUser.toKey()];u||(u=new jt(Xe)),u=u.insert(l,c),a.Ba[a.currentUser.toKey()]=u}(r,i.batchId,n),await rh(r,i.changes),await My(r.remoteStore)}catch(i){const s=bS(i,"Failed to persist write");n.reject(s)}}async function q$(t,e){const n=Te(t);try{const r=await T8(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Na.get(s);a&&(nt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?nt(a.va):i.removedDocuments.size>0&&(nt(a.va),a.va=!1))}),await rh(n,r,e)}catch(r){await Jf(r)}}function uj(t,e,n){const r=Te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,a)=>{const l=a.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const c=Te(a);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.j_)h.Z_(l)&&(u=!0)}),u&&SS(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function m7(t,e,n){const r=Te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new jt(be.comparator);a=a.insert(s,Tn.newNoDocument(s,je.min()));const l=Le().add(s),c=new Ry(je.min(),new Map,new jt(Xe),a,l);await q$(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),NS(r)}else await Gb(r.localStore,e,!1).then(()=>Kb(r,e,n)).catch(Jf)}async function g7(t,e){const n=Te(t),r=e.batch.batchId;try{const i=await j8(n.localStore,e);G$(n,r,null),W$(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await rh(n,i)}catch(i){await Jf(i)}}async function y7(t,e,n){const r=Te(t);try{const i=await function(a,l){const c=Te(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(nt(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);G$(r,e,n),W$(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await rh(r,i)}catch(i){await Jf(i)}}function W$(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function G$(t,e,n){const r=Te(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Kb(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||H$(t,r)})}function H$(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(mS(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),NS(t))}function dj(t,e,n){for(const r of n)r instanceof B$?(t.La.addReference(r.key,e),v7(t,r)):r instanceof U$?(me("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||H$(t,r.key)):Ee()}function v7(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(me("SyncEngine","New document in limbo: "+n),t.xa.add(r),NS(t))}function NS(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new be(xt.fromString(e)),r=t.qa.next();t.Na.set(r,new o7(n)),t.Oa=t.Oa.insert(n,r),$$(t.remoteStore,new Gs(mi(jy(n.path)),r,"TargetPurposeLimboResolution",nS.oe))}}async function rh(t,e,n){const r=Te(t),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{a.push(r.Ka(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=pS.Wi(c.targetId,u);s.push(f)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(c,u){const d=Te(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ee.forEach(u,h=>ee.forEach(h.$i,m=>d.persistence.referenceDelegate.addReference(f,h.targetId,m)).next(()=>ee.forEach(h.Ui,m=>d.persistence.referenceDelegate.removeReference(f,h.targetId,m)))))}catch(f){if(!Zf(f))throw f;me("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const m=d.os.get(h),y=m.snapshotVersion,g=m.withLastLimboFreeSnapshotVersion(y);d.os=d.os.insert(h,g)}}}(r.localStore,s))}async function x7(t,e){const n=Te(t);if(!n.currentUser.isEqual(e)){me("SyncEngine","User change. New user:",e.toKey());const r=await k$(n.localStore,e);n.currentUser=e,function(s,a){s.ka.forEach(l=>{l.forEach(c=>{c.reject(new ue(Q.CANCELLED,a))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rh(n,r.hs)}}function b7(t,e){const n=Te(t),r=n.Na.get(e);if(r&&r.va)return Le().add(r.key);{let i=Le();const s=n.Ma.get(e);if(!s)return i;for(const a of s){const l=n.Fa.get(a);i=i.unionWith(l.view.Va)}return i}}function K$(t){const e=Te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=q$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=b7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m7.bind(null,e),e.Ca.d_=r7.bind(null,e.eventManager),e.Ca.$a=i7.bind(null,e.eventManager),e}function w7(t){const e=Te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=g7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y7.bind(null,e),e}class Gm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$y(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return C8(this.persistence,new N8,e.initialUser,this.serializer)}Ga(e){return new _8(hS.Zr,this.serializer)}Wa(e){return new R8}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gm.provider={build:()=>new Gm};class Yb{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>uj(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=x7.bind(null,this.syncEngine),await e7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new n7}()}createDatastore(e){const n=$y(e.databaseInfo.databaseId),r=function(s){return new L8(s)}(e.databaseInfo);return function(s,a,l,c){return new B8(s,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,l){return new z8(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>uj(this.syncEngine,n,0),function(){return sj.D()?new sj:new $8}())}createSyncEngine(e,n){return function(i,s,a,l,c,u,d){const f=new l7(i,s,a,l,c,u);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Te(i);me("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await nh(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Yb.provider={build:()=>new Yb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):cs("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Cn.UNAUTHENTICATED,this.clientId=QR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{me("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(me("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bS(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function L0(t,e){t.asyncQueue.verifyOperationInProgress(),me("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await k$(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fj(t,e){t.asyncQueue.verifyOperationInProgress();const n=await S7(t);me("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>aj(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>aj(e.remoteStore,i)),t._onlineComponents=e}async function S7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){me("FirestoreClient","Using user provided OfflineComponentProvider");try{await L0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Q.FAILED_PRECONDITION||i.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Yl("Error using user provided cache. Falling back to memory cache: "+n),await L0(t,new Gm)}}else me("FirestoreClient","Using default OfflineComponentProvider"),await L0(t,new Gm);return t._offlineComponents}async function Y$(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(me("FirestoreClient","Using user provided OnlineComponentProvider"),await fj(t,t._uninitializedComponentsProvider._online)):(me("FirestoreClient","Using default OnlineComponentProvider"),await fj(t,new Yb))),t._onlineComponents}function A7(t){return Y$(t).then(e=>e.syncEngine)}async function Hm(t){const e=await Y$(t),n=e.eventManager;return n.onListen=c7.bind(null,e.syncEngine),n.onUnlisten=f7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=u7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=h7.bind(null,e.syncEngine),n}function N7(t,e,n={}){const r=new Qi;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,u){const d=new ES({next:h=>{d.Za(),a.enqueueAndForget(()=>_S(s,f));const m=h.docs.has(l);!m&&h.fromCache?u.reject(new ue(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&c&&c.source==="server"?u.reject(new ue(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new AS(jy(l.path),d,{includeMetadataChanges:!0,_a:!0});return wS(s,f)}(await Hm(t),t.asyncQueue,e,n,r)),r.promise}function E7(t,e,n={}){const r=new Qi;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,u){const d=new ES({next:h=>{d.Za(),a.enqueueAndForget(()=>_S(s,f)),h.fromCache&&c.source==="server"?u.reject(new ue(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new AS(l,d,{includeMetadataChanges:!0,_a:!0});return wS(s,f)}(await Hm(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q$(t,e,n){if(!n)throw new ue(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function C7(t,e,n,r){if(e===!0&&r===!0)throw new ue(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function pj(t){if(!be.isDocumentKey(t))throw new ue(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mj(t){if(be.isDocumentKey(t))throw new ue(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ly(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ee()}function Vn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ue(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ly(t);throw new ue(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function j7(t,e){if(e<=0)throw new ue(Q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ue(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}C7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=X$((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ue(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ue(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ue(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fy{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gj({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gj(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new W9;switch(r.type){case"firstParty":return new Y9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=hj.get(n);r&&(me("ComponentProvider","Removing Datastore"),hj.delete(n),r.terminate())}(this),Promise.resolve()}}function T7(t,e,n,r={}){var i;const s=(t=Vn(t,Fy))._getSettings(),a=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Yl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=Cn.MOCK_USER;else{l=wU(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new ue(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Cn(u)}t._authCredentials=new G9(new XR(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xs(this.firestore,e,this._query)}}class kn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kn(this.firestore,e,this._key)}}class oa extends xs{constructor(e,n,r){super(e,n,jy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kn(this.firestore,null,new be(e))}withConverter(e){return new oa(this.firestore,e,this._path)}}function pn(t,e,...n){if(t=Wt(t),Q$("collection","path",e),t instanceof Fy){const r=xt.fromString(e,...n);return mj(r),new oa(t,null,r)}{if(!(t instanceof kn||t instanceof oa))throw new ue(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xt.fromString(e,...n));return mj(r),new oa(t.firestore,null,r)}}function Yt(t,e,...n){if(t=Wt(t),arguments.length===1&&(e=QR.newId()),Q$("doc","path",e),t instanceof Fy){const r=xt.fromString(e,...n);return pj(r),new kn(t,null,new be(r))}{if(!(t instanceof kn||t instanceof oa))throw new ue(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xt.fromString(e,...n));return pj(r),new kn(t.firestore,t instanceof oa?t.converter:null,new be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new O$(this,"async_queue_retry"),this.Vu=()=>{const r=M0();r&&me("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=M0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=M0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Qi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Zf(e))throw e;me("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(r);throw cs("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=xS.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function vj(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class _i extends Fy{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new yj,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yj(e),this._firestoreClient=void 0,await e}}}function P7(t,e){const n=typeof t=="object"?t:eS(),r=typeof t=="string"?t:"(default)",i=Ey(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=DR("firestore");s&&T7(i,...s)}return i}function ih(t){if(t._terminated)throw new ue(Q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||k7(t),t._firestoreClient}function k7(t){var e,n,r;const i=t._freezeSettings(),s=function(l,c,u,d){return new lz(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,X$(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new _7(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nc(xn.fromBase64String(e))}catch(n){throw new ue(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new nc(xn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I7=/^__.*__$/;class O7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Aa(e,this.data,this.fieldMask,n,this.fieldTransforms):new eh(e,this.data,n,this.fieldTransforms)}}class J${constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Aa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Z$(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class Vy{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Vy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Km(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Z$(this.Cu)&&I7.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class R7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$y(e)}Qu(e,n,r,i=!1){return new Vy({Cu:e,methodName:n,qu:r,path:mn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oh(t){const e=t._freezeSettings(),n=$y(t._databaseId);return new R7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function TS(t,e,n,r,i,s={}){const a=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);IS("Data must be an object, but it was:",a,r);const l=nD(r,a);let c,u;if(s.merge)c=new cr(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=Xb(e,f,n);if(!a.contains(h))throw new ue(Q.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);iD(d,h)||d.push(h)}c=new cr(d),u=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=a.fieldTransforms;return new O7(new Hn(l),c,u)}class By extends ah{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof By}}function $7(t,e,n){return new Vy({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class PS extends ah{_toFieldTransform(e){return new v$(e.path,new ef)}isEqual(e){return e instanceof PS}}class kS extends ah{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=$7(this,e,!0),r=this.Ku.map(s=>zc(s,n)),i=new Zl(r);return new v$(e.path,i)}isEqual(e){return e instanceof kS&&Hd(this.Ku,e.Ku)}}function eD(t,e,n,r){const i=t.Qu(1,e,n);IS("Data must be an object, but it was:",i,r);const s=[],a=Hn.empty();$o(r,(c,u)=>{const d=OS(e,c,n);u=Wt(u);const f=i.Nu(d);if(u instanceof By)s.push(d);else{const h=zc(u,f);h!=null&&(s.push(d),a.set(d,h))}});const l=new cr(s);return new J$(a,l,i.fieldTransforms)}function tD(t,e,n,r,i,s){const a=t.Qu(1,e,n),l=[Xb(e,r,n)],c=[i];if(s.length%2!=0)throw new ue(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)l.push(Xb(e,s[h])),c.push(s[h+1]);const u=[],d=Hn.empty();for(let h=l.length-1;h>=0;--h)if(!iD(u,l[h])){const m=l[h];let y=c[h];y=Wt(y);const g=a.Nu(m);if(y instanceof By)u.push(m);else{const x=zc(y,g);x!=null&&(u.push(m),d.set(m,x))}}const f=new cr(u);return new J$(d,f,a.fieldTransforms)}function D7(t,e,n,r=!1){return zc(n,t.Qu(r?4:3,e))}function zc(t,e){if(rD(t=Wt(t)))return IS("Unsupported field value:",e,t),nD(t,e);if(t instanceof ah)return function(r,i){if(!Z$(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let c=zc(l,i.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Pz(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=zt.fromDate(r);return{timestampValue:qm(i.serializer,s)}}if(r instanceof zt){const s=new zt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:qm(i.serializer,s)}}if(r instanceof CS)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof nc)return{bytesValue:A$(i.serializer,r._byteString)};if(r instanceof kn){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:dS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof jS)return function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return lS(l.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Ly(r)}`)}(t,e)}function nD(t,e){const n={};return JR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$o(t,(r,i)=>{const s=zc(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function rD(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof zt||t instanceof CS||t instanceof nc||t instanceof kn||t instanceof ah||t instanceof jS)}function IS(t,e,n){if(!rD(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Ly(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Xb(t,e,n){if((e=Wt(e))instanceof sh)return e._internalPath;if(typeof e=="string")return OS(t,e);throw Km("Field path arguments must be of type string or ",t,!1,void 0,n)}const M7=new RegExp("[~\\*/\\[\\]]");function OS(t,e,n){if(e.search(M7)>=0)throw Km(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sh(...e.split("."))._internalPath}catch{throw Km(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Km(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new ue(Q.INVALID_ARGUMENT,l+t+c)}function iD(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new kn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new L7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Uy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class L7 extends sD{data(){return super.data()}}function Uy(t,e){return typeof e=="string"?OS(t,e):e instanceof sh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ue(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class RS{}class $S extends RS{}function nf(t,e,...n){let r=[];e instanceof RS&&r.push(e),r=r.concat(n),function(s){const a=s.filter(c=>c instanceof DS).length,l=s.filter(c=>c instanceof zy).length;if(a>1||a>0&&l>0)throw new ue(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class zy extends $S{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new zy(e,n,r)}_apply(e){const n=this._parse(e);return oD(e._query,n),new xs(e.firestore,e.converter,Bb(e._query,n))}_parse(e){const n=oh(e.firestore);return function(s,a,l,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ue(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){bj(f,d);const m=[];for(const y of f)m.push(xj(c,s,y));h={arrayValue:{values:m}}}else h=xj(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||bj(f,d),h=D7(l,a,f,d==="in"||d==="not-in");return Bt.create(u,d,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ym(t,e,n){const r=e,i=Uy("where",t);return zy._create(i,r,n)}class DS extends RS{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new DS(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ei.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const l=s.getFlattenedFilters();for(const c of l)oD(a,c),a=Bb(a,c)}(e._query,n),new xs(e.firestore,e.converter,Bb(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class MS extends $S{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new MS(e,n)}_apply(e){const n=function(i,s,a){if(i.startAt!==null)throw new ue(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ue(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zd(s,a)}(e._query,this._field,this._direction);return new xs(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new Vc(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function LS(t,e="asc"){const n=e,r=Uy("orderBy",t);return MS._create(r,n)}class FS extends $S{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new FS(e,n,r)}_apply(e){return new xs(e.firestore,e.converter,Um(e._query,this._limit,this._limitType))}}function qy(t){return j7("limit",t),FS._create("limit",t,"F")}function xj(t,e,n){if(typeof(n=Wt(n))=="string"){if(n==="")throw new ue(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!o$(e)&&n.indexOf("/")!==-1)throw new ue(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(xt.fromString(n));if(!be.isDocumentKey(r))throw new ue(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return VC(t,new be(r))}if(n instanceof kn)return VC(t,n._key);throw new ue(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ly(n)}.`)}function bj(t,e){if(!Array.isArray(t)||t.length===0)throw new ue(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oD(t,e){const n=function(i,s){for(const a of i)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ue(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class F7{convertValue(e,n="none"){switch(_o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return $o(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Rt(a.doubleValue));return new jS(s)}convertGeoPoint(e){return new CS(Rt(e.latitude),Rt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=iS(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xd(e));default:return null}}convertTimestamp(e){const n=ya(e);return new zt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xt.fromString(e);nt(P$(r));const i=new Qd(r.get(1),r.get(3)),s=new be(r.popFirst(5));return i.isEqual(n)||cs(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lD extends sD{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Yp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Uy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Yp extends lD{data(e={}){return super.data(e)}}class cD{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Yu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yp(this._firestore,this._userDataWriter,r.key,r,new Yu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const c=new Yp(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Yu(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new Yp(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Yu(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return l.type!==0&&(u=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:V7(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function V7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(t){t=Vn(t,kn);const e=Vn(t.firestore,_i);return N7(ih(e),t._key).then(n=>uD(e,t,n))}class BS extends F7{constructor(e){super(),this.firestore=e}convertBytes(e){return new nc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,n)}}function ds(t){t=Vn(t,xs);const e=Vn(t.firestore,_i),n=ih(e),r=new BS(e);return aD(t._query),E7(n,t._query).then(i=>new cD(e,r,t,i))}function Xu(t,e,n){t=Vn(t,kn);const r=Vn(t.firestore,_i),i=VS(t.converter,e,n);return lh(r,[TS(oh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Fn.none())])}function Qb(t,e,n,...r){t=Vn(t,kn);const i=Vn(t.firestore,_i),s=oh(i);let a;return a=typeof(e=Wt(e))=="string"||e instanceof sh?tD(s,"updateDoc",t._key,e,n,r):eD(s,"updateDoc",t._key,e),lh(i,[a.toMutation(t._key,Fn.exists(!0))])}function B7(t){return lh(Vn(t.firestore,_i),[new Oy(t._key,Fn.none())])}function Xp(t,e){const n=Vn(t.firestore,_i),r=Yt(t),i=VS(t.converter,e);return lh(n,[TS(oh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Fn.exists(!1))]).then(()=>r)}function io(t,...e){var n,r,i;t=Wt(t);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||vj(e[a])||(s=e[a],a++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(vj(e[a])){const f=e[a];e[a]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[a+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[a+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(t instanceof kn)u=Vn(t.firestore,_i),d=jy(t._key.path),c={next:f=>{e[a]&&e[a](uD(u,t,f))},error:e[a+1],complete:e[a+2]};else{const f=Vn(t,xs);u=Vn(f.firestore,_i),d=f._query;const h=new BS(u);c={next:m=>{e[a]&&e[a](new cD(u,h,f,m))},error:e[a+1],complete:e[a+2]},aD(t._query)}return function(h,m,y,g){const x=new ES(g),w=new AS(m,x,y);return h.asyncQueue.enqueueAndForget(async()=>wS(await Hm(h),w)),()=>{x.Za(),h.asyncQueue.enqueueAndForget(async()=>_S(await Hm(h),w))}}(ih(u),d,l,c)}function lh(t,e){return function(r,i){const s=new Qi;return r.asyncQueue.enqueueAndForget(async()=>p7(await A7(r),i,s)),s.promise}(ih(t),e)}function uD(t,e,n){const r=n.docs.get(e._key),i=new BS(t);return new lD(t,i,e._key,r,new Yu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=oh(e)}set(e,n,r){this._verifyNotCommitted();const i=F0(e,this._firestore),s=VS(i.converter,n,r),a=TS(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,Fn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=F0(e,this._firestore);let a;return a=typeof(n=Wt(n))=="string"||n instanceof sh?tD(this._dataReader,"WriteBatch.update",s._key,n,r,i):eD(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(a.toMutation(s._key,Fn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=F0(e,this._firestore);return this._mutations=this._mutations.concat(new Oy(n._key,Fn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ue(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function F0(t,e){if((t=Wt(t)).firestore!==e)throw new ue(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function kl(){return new PS("serverTimestamp")}function wj(...t){return new kS("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(t){return ih(t=Vn(t,_i)),new U7(t,e=>lh(t,e))}(function(e,n=!0){(function(i){Fc=i})(Lc),xo(new ma("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new _i(new H9(r.getProvider("auth-internal")),new Q9(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ue(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qd(u.options.projectId,d)}(a,i),a);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),pi($C,"4.7.3",e),pi($C,"4.7.3","esm2017")})();var z7="firebase",q7="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(z7,q7,"app");function US(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function dD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const W7=dD,fD=new Xf("auth","Firebase",dD());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm=new J_("@firebase/auth");function G7(t,...e){Xm.logLevel<=Ue.WARN&&Xm.warn(`Auth (${Lc}): ${t}`,...e)}function Qp(t,...e){Xm.logLevel<=Ue.ERROR&&Xm.error(`Auth (${Lc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(t,...e){throw zS(t,...e)}function yi(t,...e){return zS(t,...e)}function hD(t,e,n){const r=Object.assign(Object.assign({},W7()),{[e]:n});return new Xf("auth","Firebase",r).create(e,{appName:t.name})}function so(t){return hD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zS(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return fD.create(t,...e)}function Ne(t,e,...n){if(!t)throw zS(e,...n)}function zi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Qp(e),new Error(e)}function hs(t,e){t||zi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function H7(){return _j()==="http:"||_j()==="https:"}function _j(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(H7()||NU()||"connection"in navigator)?navigator.onLine:!0}function Y7(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n){this.shortDelay=e,this.longDelay=n,hs(n>e,"Short delay should be less than long delay!"),this.isMobile=_U()||EU()}get(){return K7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(t,e){hs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q7=new ch(3e4,6e4);function WS(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function qc(t,e,n,r,i={}){return mD(t,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const l=Qf(Object.assign({key:t.config.apiKey},a)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},s);return AU()||(u.referrerPolicy="no-referrer"),pD.fetch()(gD(t,t.config.apiHost,n,l),u)})}async function mD(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},X7),e);try{const i=new Z7(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw lp(t,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const l=s.ok?a.errorMessage:a.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw lp(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw lp(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw lp(t,"user-disabled",a);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw hD(t,d,u);fs(t,d)}}catch(i){if(i instanceof vs)throw i;fs(t,"network-request-failed",{message:String(i)})}}async function J7(t,e,n,r,i={}){const s=await qc(t,e,n,r,i);return"mfaPendingCredential"in s&&fs(t,"multi-factor-auth-required",{_serverResponse:s}),s}function gD(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?qS(t.config,i):`${t.config.apiScheme}://${i}`}class Z7{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yi(this.auth,"network-request-failed")),Q7.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=yi(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eq(t,e){return qc(t,"POST","/v1/accounts:delete",e)}async function yD(t,e){return qc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tq(t,e=!1){const n=Wt(t),r=await n.getIdToken(e),i=GS(r);Ne(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:gd(V0(i.auth_time)),issuedAtTime:gd(V0(i.iat)),expirationTime:gd(V0(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function V0(t){return Number(t)*1e3}function GS(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Qp("JWT malformed, contained fewer than 3 sections"),null;try{const i=RR(n);return i?JSON.parse(i):(Qp("Failed to decode base64 JWT payload"),null)}catch(i){return Qp("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Sj(t){const e=GS(t);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sf(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof vs&&nq(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function nq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rq{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gd(this.lastLoginAt),this.creationTime=gd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qm(t){var e;const n=t.auth,r=await t.getIdToken(),i=await sf(t,yD(n,{idToken:r}));Ne(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?vD(s.providerUserInfo):[],l=sq(t.providerData,a),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new ew(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function iq(t){const e=Wt(t);await Qm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sq(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function vD(t){return t.map(e=>{var{providerId:n}=e,r=US(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aq(t,e){const n=await mD(t,{},async()=>{const r=Qf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,a=gD(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",pD.fetch()(a,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oq(t,e){return qc(t,"POST","/v2/accounts:revokeToken",WS(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sj(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const n=Sj(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await aq(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,a=new Il;return r&&(Ne(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(Ne(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(Ne(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Il,this.toJSON())}_performRefresh(){return zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(t,e){Ne(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=US(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rq(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ew(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await sf(this,this.stsTokenManager.getToken(this.auth,e));return Ne(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return tq(this,e)}reload(){return iq(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Qm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ws(this.auth.app))return Promise.reject(so(this.auth));const e=await this.getIdToken();return await sf(this,eq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,a,l,c,u,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(a=n.photoURL)!==null&&a!==void 0?a:void 0,g=(l=n.tenantId)!==null&&l!==void 0?l:void 0,x=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,w=(u=n.createdAt)!==null&&u!==void 0?u:void 0,b=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:v,emailVerified:N,isAnonymous:S,providerData:A,stsTokenManager:E}=n;Ne(v&&E,e,"internal-error");const _=Il.fromJSON(this.name,E);Ne(typeof v=="string",e,"internal-error"),Ts(f,e.name),Ts(h,e.name),Ne(typeof N=="boolean",e,"internal-error"),Ne(typeof S=="boolean",e,"internal-error"),Ts(m,e.name),Ts(y,e.name),Ts(g,e.name),Ts(x,e.name),Ts(w,e.name),Ts(b,e.name);const C=new qi({uid:v,auth:e,email:h,emailVerified:N,displayName:f,isAnonymous:S,photoURL:y,phoneNumber:m,tenantId:g,stsTokenManager:_,createdAt:w,lastLoginAt:b});return A&&Array.isArray(A)&&(C.providerData=A.map(P=>Object.assign({},P))),x&&(C._redirectEventId=x),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new Il;i.updateFromServerResponse(n);const s=new qi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Qm(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ne(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?vD(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Il;l.updateFromIdToken(r);const c=new qi({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ew(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=new Map;function Wi(t){hs(t instanceof Function,"Expected a class definition");let e=Aj.get(t);return e?(hs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Aj.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}xD.type="NONE";const Nj=xD;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t,e,n){return`firebase:${t}:${e}:${n}`}class Ol{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Jp(this.userKey,i.apiKey,s),this.fullPersistenceKey=Jp("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ol(Wi(Nj),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||Wi(Nj);const a=Jp(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(a);if(d){const f=qi._fromJSON(e,d);u!==s&&(l=f),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Ol(s,e,r):(s=c[0],l&&await s._set(a,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Ol(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ej(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(SD(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bD(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ND(e))return"Blackberry";if(ED(e))return"Webos";if(wD(e))return"Safari";if((e.includes("chrome/")||_D(e))&&!e.includes("edge/"))return"Chrome";if(AD(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bD(t=On()){return/firefox\//i.test(t)}function wD(t=On()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _D(t=On()){return/crios\//i.test(t)}function SD(t=On()){return/iemobile/i.test(t)}function AD(t=On()){return/android/i.test(t)}function ND(t=On()){return/blackberry/i.test(t)}function ED(t=On()){return/webos/i.test(t)}function HS(t=On()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lq(t=On()){var e;return HS(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function cq(){return CU()&&document.documentMode===10}function CD(t=On()){return HS(t)||AD(t)||ED(t)||ND(t)||/windows phone/i.test(t)||SD(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t,e=[]){let n;switch(t){case"Browser":n=Ej(On());break;case"Worker":n=`${Ej(On())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Lc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uq{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((a,l)=>{try{const c=e(s);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dq(t,e={}){return qc(t,"GET","/v2/passwordPolicy",WS(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fq=6;class hq{constructor(e){var n,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:fq,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,a,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pq{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cj(this),this.idTokenSubscription=new Cj(this),this.beforeStateQueue=new uq(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ol.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await yD(this,{idToken:e}),r=await qi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ws(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Qm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Y7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ws(this.app))return Promise.reject(so(this));const n=e?Wt(e):null;return n&&Ne(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ws(this.app)?Promise.reject(so(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ws(this.app)?Promise.reject(so(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dq(this),n=new hq(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xf("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oq(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Wi(e)||this._popupRedirectResolver;Ne(n,this,"argument-error"),this.redirectPersistenceManager=await Ol.create(this,[Wi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(l,this,"internal-error"),l.then(()=>{a||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&G7(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function KS(t){return Wt(t)}class Cj{constructor(e){this.auth=e,this.observer=null,this.addObserver=$U(n=>this.observer=n)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let YS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mq(t){YS=t}function gq(t){return YS.loadJS(t)}function yq(){return YS.gapiScript}function vq(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xq(t,e){const n=Ey(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Hd(s,e??{}))return i;fs(i,"already-initialized")}return n.initialize({options:e})}function bq(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Wi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function wq(t,e,n){const r=KS(t);Ne(r._canInitEmulator,r,"emulator-config-failed"),Ne(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=TD(e),{host:a,port:l}=_q(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${a}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Sq()}function TD(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _q(t){const e=TD(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:jj(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:jj(a)}}}function jj(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Sq(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return zi("not implemented")}_getIdTokenResponse(e){return zi("not implemented")}_linkToIdToken(e,n){return zi("not implemented")}_getReauthenticationResolver(e){return zi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rl(t,e){return J7(t,"POST","/v1/accounts:signInWithIdp",WS(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aq="http://localhost";class So extends PD{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new So(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=US(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new So(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Rl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Rl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Rl(e,n)}buildRequest(){const e={requestUri:Aq,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh extends kD{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends uh{constructor(){super("facebook.com")}static credential(e){return So._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ls.credential(e.oauthAccessToken)}catch{return null}}}Ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends uh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return So._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Fs.credential(n,r)}catch{return null}}}Fs.GOOGLE_SIGN_IN_METHOD="google.com";Fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends uh{constructor(){super("github.com")}static credential(e){return So._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.GITHUB_SIGN_IN_METHOD="github.com";Vs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends uh{constructor(){super("twitter.com")}static credential(e,n){return So._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Bs.credential(n,r)}catch{return null}}}Bs.TWITTER_SIGN_IN_METHOD="twitter.com";Bs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await qi._fromIdTokenResponse(e,r,i),a=Tj(r);return new rc({user:s,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Tj(r);return new rc({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Tj(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm extends vs{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Jm.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Jm(e,n,r,i)}}function ID(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Jm._fromErrorAndOperation(t,s,e,r):s})}async function Nq(t,e,n=!1){const r=await sf(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return rc._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eq(t,e,n=!1){const{auth:r}=t;if(Ws(r.app))return Promise.reject(so(r));const i="reauthenticate";try{const s=await sf(t,ID(r,i,e,t),n);Ne(s.idToken,r,"internal-error");const a=GS(s.idToken);Ne(a,r,"internal-error");const{sub:l}=a;return Ne(t.uid===l,r,"user-mismatch"),rc._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&fs(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cq(t,e,n=!1){if(Ws(t.app))return Promise.reject(so(t));const r="signIn",i=await ID(t,r,e),s=await rc._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function jq(t,e,n,r){return Wt(t).onIdTokenChanged(e,n,r)}function Tq(t,e,n){return Wt(t).beforeAuthStateChanged(e,n)}const Zm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zm,"1"),this.storage.removeItem(Zm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pq=1e3,kq=10;class RD extends OD{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CD(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);cq()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,kq):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Pq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}RD.type="LOCAL";const Iq=RD;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D extends OD{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}$D.type="SESSION";const DD=$D;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oq(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Wy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(a).map(async u=>u(n.origin,s)),c=await Oq(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rq{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((l,c)=>{const u=XS("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(){return window}function $q(t){vi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MD(){return typeof vi().WorkerGlobalScope<"u"&&typeof vi().importScripts=="function"}async function Dq(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Mq(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Lq(){return MD()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD="firebaseLocalStorageDb",Fq=1,eg="firebaseLocalStorage",FD="fbase_key";class dh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gy(t,e){return t.transaction([eg],e?"readwrite":"readonly").objectStore(eg)}function Vq(){const t=indexedDB.deleteDatabase(LD);return new dh(t).toPromise()}function tw(){const t=indexedDB.open(LD,Fq);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(eg,{keyPath:FD})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(eg)?e(r):(r.close(),await Vq(),e(await tw()))})})}async function Pj(t,e,n){const r=Gy(t,!0).put({[FD]:e,value:n});return new dh(r).toPromise()}async function Bq(t,e){const n=Gy(t,!1).get(e),r=await new dh(n).toPromise();return r===void 0?null:r.value}function kj(t,e){const n=Gy(t,!0).delete(e);return new dh(n).toPromise()}const Uq=800,zq=3;class VD{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tw(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>zq)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return MD()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wy._getInstance(Lq()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Dq(),!this.activeServiceWorker)return;this.sender=new Rq(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Mq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tw();return await Pj(e,Zm,"1"),await kj(e,Zm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Pj(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Bq(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>kj(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Gy(i,!1).getAll();return new dh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Uq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VD.type="LOCAL";const qq=VD;new ch(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wq(t,e){return e?Wi(e):(Ne(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS extends PD{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Rl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Rl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Gq(t){return Cq(t.auth,new QS(t),t.bypassAuthState)}function Hq(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),Eq(n,new QS(t),t.bypassAuthState)}async function Kq(t){const{auth:e,user:n}=t;return Ne(n,e,"internal-error"),Nq(n,new QS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Gq;case"linkViaPopup":case"linkViaRedirect":return Kq;case"reauthViaPopup":case"reauthViaRedirect":return Hq;default:fs(this.auth,"internal-error")}}resolve(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yq=new ch(2e3,1e4);class vl extends BD{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,vl.currentPopupAction&&vl.currentPopupAction.cancel(),vl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){hs(this.filter.length===1,"Popup operations only handle one event");const e=XS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Yq.get())};e()}}vl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xq="pendingRedirect",Zp=new Map;class Qq extends BD{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Zp.get(this.auth._key());if(!e){try{const r=await Jq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Zp.set(this.auth._key(),e)}return this.bypassAuthState||Zp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Jq(t,e){const n=tW(e),r=eW(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Zq(t,e){Zp.set(t._key(),e)}function eW(t){return Wi(t._redirectPersistence)}function tW(t){return Jp(Xq,t.config.apiKey,t.name)}async function nW(t,e,n=!1){if(Ws(t.app))return Promise.reject(so(t));const r=KS(t),i=Wq(r,e),a=await new Qq(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rW=10*60*1e3;class iW{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sW(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!UD(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(yi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rW&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ij(e))}saveEventToCache(e){this.cachedEventUids.add(Ij(e)),this.lastProcessedEventTime=Date.now()}}function Ij(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function UD({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sW(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return UD(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aW(t,e={}){return qc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lW=/^https?/;async function cW(t){if(t.config.emulator)return;const{authorizedDomains:e}=await aW(t);for(const n of e)try{if(uW(n))return}catch{}fs(t,"unauthorized-domain")}function uW(t){const e=Zb(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!lW.test(n))return!1;if(oW.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dW=new ch(3e4,6e4);function Oj(){const t=vi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function fW(t){return new Promise((e,n)=>{var r,i,s;function a(){Oj(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Oj(),n(yi(t,"network-request-failed"))},timeout:dW.get()})}if(!((i=(r=vi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=vi().gapi)===null||s===void 0)&&s.load)a();else{const l=vq("iframefcb");return vi()[l]=()=>{gapi.load?a():n(yi(t,"network-request-failed"))},gq(`${yq()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw em=null,e})}let em=null;function hW(t){return em=em||fW(t),em}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pW=new ch(5e3,15e3),mW="__/auth/iframe",gW="emulator/auth/iframe",yW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xW(t){const e=t.config;Ne(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qS(e,gW):`https://${t.config.authDomain}/${mW}`,r={apiKey:e.apiKey,appName:t.name,v:Lc},i=vW.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Qf(r).slice(1)}`}async function bW(t){const e=await hW(t),n=vi().gapi;return Ne(n,t,"internal-error"),e.open({where:document.body,url:xW(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yW,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=yi(t,"network-request-failed"),l=vi().setTimeout(()=>{s(a)},pW.get());function c(){vi().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_W=500,SW=600,AW="_blank",NW="http://localhost";class Rj{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EW(t,e,n,r=_W,i=SW){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},wW),{width:r.toString(),height:i.toString(),top:s,left:a}),u=On().toLowerCase();n&&(l=_D(u)?AW:n),bD(u)&&(e=e||NW,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[m,y])=>`${h}${m}=${y},`,"");if(lq(u)&&l!=="_self")return CW(e||"",l),new Rj(null);const f=window.open(e||"",l,d);Ne(f,t,"popup-blocked");try{f.focus()}catch{}return new Rj(f)}function CW(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jW="__/auth/handler",TW="emulator/auth/handler",PW=encodeURIComponent("fac");async function $j(t,e,n,r,i,s){Ne(t.config.authDomain,t,"auth-domain-config-required"),Ne(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Lc,eventId:i};if(e instanceof kD){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",RU(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))a[d]=f}if(e instanceof uh){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${PW}=${encodeURIComponent(c)}`:"";return`${kW(t)}?${Qf(l).slice(1)}${u}`}function kW({config:t}){return t.emulator?qS(t,TW):`https://${t.authDomain}/${jW}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="webStorageSupport";class IW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DD,this._completeRedirectFn=nW,this._overrideRedirectResult=Zq}async _openPopup(e,n,r,i){var s;hs((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await $j(e,n,r,Zb(),i);return EW(e,a,XS())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await $j(e,n,r,Zb(),i);return $q(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(hs(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await bW(e),r=new iW(e);return n.register("authEvent",i=>(Ne(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(B0,{type:B0},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[B0];a!==void 0&&n(!!a),fs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=cW(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return CD()||wD()||HS()}}const OW=IW;var Dj="@firebase/auth",Mj="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $W(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DW(t){xo(new ma("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;Ne(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jD(t)},u=new pq(r,i,s,c);return bq(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),xo(new ma("auth-internal",e=>{const n=KS(e.getProvider("auth").getImmediate());return(r=>new RW(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pi(Dj,Mj,$W(t)),pi(Dj,Mj,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MW=5*60,LW=LR("authIdTokenMaxAge")||MW;let Lj=null;const FW=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LW)return;const i=n==null?void 0:n.token;Lj!==i&&(Lj=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function VW(t=eS()){const e=Ey(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xq(t,{popupRedirectResolver:OW,persistence:[qq,Iq,DD]}),r=LR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=FW(s.toString());Tq(n,a,()=>a(n.currentUser)),jq(n,l=>a(l))}}const i=$R("auth");return i&&wq(n,`http://${i}`),n}function BW(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}mq({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=yi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",BW().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DW("Browser");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="us-central1";class zW{constructor(e,n,r,i,s=nw,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new UW(n,r,i),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(s);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=nw}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function qW(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}const Fj="@firebase/functions",Vj="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WW="auth-internal",GW="app-check-internal",HW="messaging-internal";function KW(t,e){const n=(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),a=r.getProvider(WW),l=r.getProvider(HW),c=r.getProvider(GW);return new zW(s,a,l,c,i,t)};xo(new ma(zD,n,"PUBLIC").setMultipleInstances(!0)),pi(Fj,Vj,e),pi(Fj,Vj,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YW(t=eS(),e=nw){const r=Ey(Wt(t),zD).getImmediate({identifier:e}),i=DR("functions");return i&&XW(r,...i),r}function XW(t,e,n){qW(Wt(t),e,n)}KW(fetch.bind(self));const QW={apiKey:"AIzaSyBwQsjNBEMOYavhGC660Q4pmng1oCofh8o",authDomain:"area-51-crm.firebaseapp.com",projectId:"area-51-crm",storageBucket:"area-51-crm.firebasestorage.app",messagingSenderId:"438467751802",appId:"1:438467751802:web:7c2256f6bf0e88487f30c3",measurementId:"G-6HZKZC5TKX"},JS=BR(QW);VW(JS);const De=P7(JS);YW(JS);const We="crm_v1_production",Br=t=>{if(!t)return!1;const e=t.toLowerCase();return e==="booked"||e==="won"||e.includes("confirm")||e.includes("book")},ft=t=>{if(t==null||t==="")return 0;if(typeof t=="number")return t;const e=String(t).replace(/[^0-9.-]+/g,""),n=parseFloat(e);return isNaN(n)?0:n},ZS=t=>{if(!t)return null;let e=String(t).replace(/\D/g,"");return e.startsWith("92")&&e.length===12&&(e="0"+e.substring(2)),e.startsWith("0092")&&e.length===14&&(e="0"+e.substring(4)),e.length===10&&e.startsWith("3")&&(e="0"+e),e.length===11&&e.startsWith("03")?e:null},Oe=t=>new Intl.NumberFormat("en-PK",{style:"currency",currency:"PKR",maximumSignificantDigits:3}).format(ft(t)),Ao=(t,e="")=>{if(!t)return null;let n=String(t).replace(/\D/g,"");n.startsWith("0")?n="92"+n.substring(1):n.length===10&&n.startsWith("3")&&(n="92"+n);const r=`https://wa.me/${n}`;return e?`${r}?text=${encodeURIComponent(e)}`:r},Ve={STAGE_CHANGE:"stage_change",NOTE_ADDED:"note_added",WHATSAPP_OPENED:"whatsapp_opened",CALL_MADE:"call_made",CALL_LOGGED:"call_logged",LEAD_ASSIGNED:"lead_assigned",LEAD_REASSIGNED:"lead_reassigned",FOLLOW_UP_SET:"follow_up_set",SITE_VISIT_SCHEDULED:"site_visit_scheduled",PAYMENT_RECEIVED:"payment_received",LEAD_CREATED:"lead_created",DETAILS_UPDATED:"details_updated",AUTO_GREETING_SENT:"auto_greeting_sent",QUOTE_REMINDER_SENT:"quote_reminder_sent"},qD=(t,e,n)=>({type:t,timestamp:new Date().toISOString(),user:n,...e}),JW=t=>({[Ve.STAGE_CHANGE]:{icon:"",color:"blue",label:"Stage Changed"},[Ve.NOTE_ADDED]:{icon:"",color:"gray",label:"Note Added"},[Ve.WHATSAPP_OPENED]:{icon:"",color:"green",label:"WhatsApp"},[Ve.CALL_MADE]:{icon:"",color:"purple",label:"Call Made"},[Ve.CALL_LOGGED]:{icon:"",color:"cyan",label:"Call Logged"},[Ve.LEAD_ASSIGNED]:{icon:"",color:"indigo",label:"Assigned"},[Ve.LEAD_REASSIGNED]:{icon:"",color:"orange",label:"Reassigned"},[Ve.FOLLOW_UP_SET]:{icon:"",color:"amber",label:"Follow-up Set"},[Ve.SITE_VISIT_SCHEDULED]:{icon:"",color:"teal",label:"Site Visit"},[Ve.PAYMENT_RECEIVED]:{icon:"",color:"emerald",label:"Payment"},[Ve.LEAD_CREATED]:{icon:"",color:"blue",label:"Lead Created"},[Ve.DETAILS_UPDATED]:{icon:"",color:"slate",label:"Updated"},[Ve.AUTO_GREETING_SENT]:{icon:"",color:"green",label:"Auto Greeting"},[Ve.QUOTE_REMINDER_SENT]:{icon:"",color:"amber",label:"Quote Reminder"}})[t]||{icon:"",color:"gray",label:"Activity"},ZW=t=>{switch(t.type){case Ve.STAGE_CHANGE:return`Stage changed: ${t.from}  ${t.to}`;case Ve.NOTE_ADDED:return t.note||"Note added";case Ve.WHATSAPP_OPENED:return"WhatsApp conversation opened";case Ve.CALL_MADE:return"Phone call made";case Ve.CALL_LOGGED:return t.outcome?`Call logged: ${t.outcome}`:"Call logged";case Ve.LEAD_ASSIGNED:return`Lead assigned to ${t.assignee}`;case Ve.LEAD_REASSIGNED:return`Reassigned from ${t.from} to ${t.to}`;case Ve.FOLLOW_UP_SET:return`Follow-up scheduled for ${t.date}`;case Ve.SITE_VISIT_SCHEDULED:return`Site visit scheduled for ${t.date}`;case Ve.PAYMENT_RECEIVED:return`Payment received: ${Oe(t.amount)}`;case Ve.LEAD_CREATED:return"Lead created";case Ve.DETAILS_UPDATED:return`${t.field} updated`;case Ve.AUTO_GREETING_SENT:return"Auto greeting sent via WhatsApp";case Ve.QUOTE_REMINDER_SENT:return"Quote follow-up reminder sent";default:return"Activity logged"}},Re="https://area51crm.inplsoftwares.com/api",$e=async(t,e={})=>{const n=localStorage.getItem("token"),r={...e.headers};n&&(r.Authorization=`Bearer ${n}`);const i={...e,headers:r,credentials:"include"},s=await fetch(t,i);return s.status===401&&!t.includes("/logout")&&window.dispatchEvent(new Event("auth:unauthorized")),s},Qu={async signup(t,e,n,r){var a;const i=await $e(`${Re}/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,email:e,password:n,role:r})}),s=await i.json();if(!i.ok)throw new Error(s.message||"Signup failed");return(a=s.data)!=null&&a.token&&localStorage.setItem("token",s.data.token),s},async login(t,e){var i;const n=await $e(`${Re}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})}),r=await n.json();if(!n.ok)throw new Error(r.message||"Login failed");return(i=r.data)!=null&&i.token&&localStorage.setItem("token",r.data.token),r},async logout(){localStorage.getItem("token");const t=await $e(`${Re}/logout`,{method:"POST",headers:{"Content-Type":"application/json"}});return localStorage.removeItem("token"),t.json()},async changePassword(t,e){const n=await $e(`${Re}/change-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:t,newPassword:e})}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to change password");return r},getToken(){return localStorage.getItem("token")},isAuthenticated(){return!!localStorage.getItem("token")}},Rs={async getAll(t=null,e=100){const n=new URLSearchParams;t&&n.append("cursor",t),n.append("limit",e.toString());const r=`${Re}/contacts${n.toString()?"?"+n.toString():""}`,i=await $e(r,{headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}}),s=await i.json();if(!i.ok)throw new Error(s.message||"Failed to fetch contacts");return{data:s.data||[],pagination:s.pagination||{nextCursor:null,hasMore:!1,total:0}}},async getById(t){const e=await $e(`${Re}/contacts/${t}`),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to fetch contact");return n.data},async create(t){const e=await $e(`${Re}/contacts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to create contact");return n.data},async update(t,e){const n=await $e(`${Re}/contacts/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to update contact");return r.data},async delete(t){const e=await $e(`${Re}/contacts/${t}`,{method:"DELETE"}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to delete contact");return n},async deleteAll(){const t=await $e(`${Re}/contacts`,{method:"DELETE"}),e=await t.json();if(!t.ok)throw new Error(e.message||"Failed to delete all contacts");return e}},Ju={async getAll(){const t=await $e(`${Re}/sources`),e=await t.json();if(!t.ok)throw new Error(e.message||"Failed to fetch sources");return e.data||[]},async getById(t){const e=await $e(`${Re}/sources/${t}`),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to fetch source");return n.data},async create(t){const e=await $e(`${Re}/sources`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to create source");return n.data},async update(t,e){const n=await $e(`${Re}/sources/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to update source");return r.data},async delete(t){const e=await $e(`${Re}/sources/${t}`,{method:"DELETE"}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to delete source");return n}},ar={async getAll(t={}){const e=new URLSearchParams(t).toString(),n=await $e(`${Re}/leads?${e}`),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to fetch leads");return r},async getById(t){const e=await $e(`${Re}/leads/${t}`),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to fetch lead");return n.data},async create(t){const e=await $e(`${Re}/leads`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to create lead");return n.data},async update(t,e){const n=await $e(`${Re}/leads/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to update lead");return r.data},async delete(t){const e=await $e(`${Re}/leads/${t}`,{method:"DELETE"}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to delete lead");return n},async deleteAll(){const t=await $e(`${Re}/leads/all`,{method:"DELETE"}),e=await t.json();if(!t.ok)throw new Error(e.message||"Failed to delete all leads");return e},async import(t){const e=await $e(`${Re}/leads/import`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leads:t})}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to import leads");return n},async addNote(t,e){const n=await $e(`${Re}/leads/${t}/timeline`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to add note");return r.data},async getTimeline(t){const e=await $e(`${Re}/leads/${t}/timeline`),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to fetch timeline");return n.data},async addPayment(t,e){const n=await $e(`${Re}/leads/${t}/payments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to add payment");return r},async deletePayment(t,e){const n=await $e(`${Re}/leads/${t}/payments/${e}`,{method:"DELETE"}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to delete payment");return r}},tm={async getAll(){const t=await $e(`${Re}/users`),e=await t.json();if(!t.ok)throw new Error(e.message||"Failed to fetch users");return e.data},async invite(t){const e=await $e(`${Re}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to invite user");return n},async delete(t){const e=await $e(`${Re}/users/${t}`,{method:"DELETE"}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to delete user");return n}},Zo={async get(t){const e=await $e(`${Re}/settings/${t}`),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to fetch settings");return n.data},async update(t,e){const n=await $e(`${Re}/settings/${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:e})}),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to update settings");return r.data}},U0={async resetDatabase(){const t=await $e(`${Re}/maintenance/reset`,{method:"POST"}),e=await t.json();if(!t.ok)throw new Error(e.message||"Failed to reset database");return e},async migrateContacts(){const t=await $e(`${Re}/maintenance/migrate-contacts`,{method:"POST"}),e=await t.json();if(!t.ok)throw new Error(e.message||"Failed to migrate contacts");return e},async consolidateSources(){const t=await $e(`${Re}/maintenance/consolidate-sources`,{method:"POST"}),e=await t.json();if(!t.ok)throw new Error(e.message||"Failed to consolidate sources");return e}},cp={async getAll(t={}){const e=new URLSearchParams(t).toString(),n=await $e(`${Re}/notifications?${e}`),r=await n.json();if(!n.ok)throw new Error(r.message||"Failed to fetch notifications");return r},async markAsRead(t){const e=await $e(`${Re}/notifications/${t}/read`,{method:"PATCH"}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to mark notification as read");return n},async markAllAsRead(t){const e=await $e(`${Re}/notifications/read-all`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to mark all as read");return n},async delete(t){const e=await $e(`${Re}/notifications/${t}`,{method:"DELETE"}),n=await e.json();if(!e.ok)throw new Error(n.message||"Failed to delete notification");return n}};function eG(){const[t,e]=k.useState(null),[n,r]=k.useState(null),[i,s]=k.useState(!0),[a,l]=k.useState(null);k.useEffect(()=>{const f=Qu.getToken();if(f)try{const h=JSON.parse(atob(f.split(".")[1])),m=localStorage.getItem("user");if(m){const y=JSON.parse(m);e({id:h.id,role:h.role}),r(y)}}catch(h){console.error("Invalid token:",h),localStorage.removeItem("token"),localStorage.removeItem("user")}s(!1)},[]);const c=k.useCallback(async(f,h)=>{s(!0),l(null);try{const m=await Qu.login(f,h),{user:y,token:g}=m.data;return e({id:y.id,role:y.role}),r({uid:y.id,email:y.email,name:y.username,role:y.role}),localStorage.setItem("user",JSON.stringify({uid:y.id,email:y.email,name:y.username,role:y.role})),m}catch(m){throw l(m.message),m}finally{s(!1)}},[]),u=k.useCallback(async(f,h,m,y)=>{s(!0),l(null);try{const g=await Qu.signup(f,h,m,y),{user:x,token:w}=g.data;return e({id:x.id,role:x.role}),r({uid:x.id,email:x.email,name:x.username,role:x.role}),localStorage.setItem("user",JSON.stringify({uid:x.id,email:x.email,name:x.username,role:x.role})),g}catch(g){throw l(g.message),g}finally{s(!1)}},[]),d=k.useCallback(async()=>{try{await Qu.logout()}catch(f){console.error("Logout error:",f)}finally{e(null),r(null),l(null),localStorage.removeItem("user"),localStorage.removeItem("token")}},[]);return k.useEffect(()=>{const f=()=>{localStorage.getItem("token")&&d()};return window.addEventListener("auth:unauthorized",f),()=>{window.removeEventListener("auth:unauthorized",f)}},[d]),{user:t,activeUser:n,setActiveUser:r,authLoading:i,authError:a,login:c,signup:u,logout:d,isAuthenticated:!!t}}const tG="Welcome",nG="Your leads and messages",rG="Total Leads",iG="Site Visit",sG="Booked",aG="Inbox",oG="No leads",lG="guests",cG="Event",uG="Budget",dG="Source",fG="Notes & Activity",hG="View Details",pG="Schedule Next Call",mG="Call Outcome",gG="Call Notes",yG="Save Call Log",vG="Saving...",xG="Add to Google Calendar",bG="Contacts Directory",wG="total contacts",_G="Search contacts...",SG="Add Contact",AG="Phone",NG="Email",EG="Created",CG="Actions",jG="No contacts found",TG="Add your first contact to get started",PG="Manage Sources",kG="lead sources",IG="New Source Name",OG="Add",RG="leads",$G="INTEGRATION",DG="Integration sources cannot be modified",MG="No sources yet. Add your first lead source above.",LG="New Source Name",FG="Save",VG="Cancel",BG="WhatsApp",UG="Notes",zG="Call details...",qG="Save & Next",WG="Schedule",GG="Lost",HG="Select a lead",KG="AI Assistant",YG="Ask in Urdu",XG="Example:",QG="Show today's follow-ups",JG="What is this lead's status?",ZG="Is March 15 available?",eH="Type your question...",tH="Finance Dashboard",nH="Booking payments & invoicing",rH="Sync",iH="Total Bookings",sH="Total Value",aH="Collected",oH="Collection Rate",lH="Overdue",cH="All",uH="Pending",dH="Partial",fH="Paid",hH="Client",pH="Event Date",mH="Event Type",gH="Total",yH="Due",vH="Status",xH="No bookings found",bH="Payment History",wH="Remaining",_H="Add Payment",SH="Amount",AH="Quotation Amount",NH="Client Budget",EH="Date",CH="Type",jH="Notes (Optional)",TH="Adding...",PH="Advance (Initial)",kH="Mid-payment",IH="Final Payment",OH="Custom",RH="History",$H="No payments recorded",DH="Owner Dashboard",MH="Welcome back",LH="Quick Stats",FH="Recent Activity",VH="View All",BH="Revenue",UH="Active Leads",zH="Conversion Rate",qH="Remaining after this payment",WH="Revenue YTD",GH="Avg Response Time",HH="Excellent",KH="Good",YH="Needs Improvement",XH="Revenue & Leads Trend",QH="Traffic Sources",JH="Lead Conversion Funnel",ZH="Top Performing Employees",eK="Unknown Source",tK="AI Business Assistant",nK="Ask questions about your business performance",rK="Stale Leads",iK="Overdue Payments",sK="Name",aK="Leads",oK="Conv %",lK="Resp Time",cK="Ask",uK="Leads This Month",dK="Booked Leads",fK="Stage",hK="Total Revenue",pK="Pipeline Value",mK="All Leads",gK="Search leads...",yK="Import CSV",vK="Importing...",xK="Delete All",bK="Add Lead",wK="All Stages",_K="All Managers",SK="Clear",AK="Show",NK="per page",EK="Page",CK="of",jK="results",TK="Pipeline",PK="Call List",kK="{today} calls today, {overdue} overdue",IK="Upcoming",OK="Upcoming Calls",RK="Overdue Calls",$K="Today's Calls",DK="All Calls",MK="No calls scheduled",LK="Call",FK="Add to Calendar",VK="New Lead - Make First Call",BK="Last",UK="New Lead - Never Called",zK="Today at",qK="at",WK="AI Audit Logs",GK="View history of all AI interactions across the system",HK="Search queries, responses, users...",KK="All Types",YK="AI Query",XK="AI Suggestion",QK="Auto Greeting",JK="Quote Reminder",ZK="Lead Summary",eY="All Users",tY="Last 24 hours",nY="Last 7 days",rY="Last 30 days",iY="Last 90 days",sY="No audit logs found",aY="AI interactions will appear here",oY="Query / Input",lY="AI Response",cY="Context / Metadata",uY="Model",dY="Latency",fY="Success",hY="Failed",pY="audit log entries",mY="Admin Control Panel",gY="Manage Team Access",yY="Invite Team Member",vY="Invite sent!",xY="{name} will receive an email at {email} to set their password.",bY="User {name} has been added!",wY="Could not send email automatically. Copy the password reset link to share manually?",_Y="Click OK to copy the link",SY="Revoke Access",AY="Reset Database",NY="DANGER: This will permanently delete ALL leads. Are you sure?",EY="Database cleared successfully.",CY="Migrate Contacts",jY="This will create contacts from existing leads. Continue?",TY=`Migration Complete.
Created Contacts: {created}
Updated Leads: {updated}`,PY="Consolidate Sources",kY="Consolidate Sources from Leads",IY="All sources are already consolidated.",OY="Successfully consolidated {count} new sources from leads.",RY="Data Maintenance",$Y="Migrate existing leads to the new contacts system.",DY="Lead Assignment Rules",MY="Assignment Mode",LY="Round Robin",FY="Evenly distribute leads",VY="By Source",BY="Assign based on lead source",UY="Single Person",zY="All leads to one person",qY="Manual Only",WY="No auto-assignment",GY="Assign All Leads To",HY="Source  Employee Rules",KY="Select Source...",YY="Add Rule",XY="Leads from sources not listed will use round-robin.",QY="Fallback (if no rule matches)",JY="Use Round Robin",ZY="Leave Unassigned",eX="Always assign to {name}",tX="Save Assignment Rules",nX="Lead Automation Rules",rX="Per Source",iX="Search sources...",sX="Notify",aX="Text",oX="AI Bot",lX="Call List - Auto-add to today's call list",cX="Notify - Send in-app/SMS notification",uX="Email - Auto-send welcome email",dX="Text - Auto-send SMS response",fX="AI Bot - AI handles initial response",hX="Save Automation Rules",pX="Settings",mX="Managers & Event Types",gX="Managers / Sales Team",yX="Edit",vX="Danger Zone",xX="This will permanently delete ALL leads. Cannot be undone.",bX="Role",wX="Manager already exists",_X="Event type already exists",SX='Cannot delete "Unassigned"',AX='Delete manager "{name}"?',NX='Delete event type "{name}"?',EX="Password reset link copied to clipboard!",CX="Copy this password reset link:",jX="Failed to invite user",TX="Migrate Leads to Contacts",PX="Integrations Hub",kX="Connect External Platforms",IX="Meta Leads",OX="AI (Gemini)",RX="Invoicing",$X="Alerts",DX="Calendar",MX="Meta Lead Ads Integration",LX="Auto-pull leads from Facebook/Instagram",FX="Facebook Page ID",VX="Page Access Token",BX="Get from Facebook Business Settings  System Users",UX="WhatsApp Business API",zX="Send/receive messages through CRM",qX="Provider",WX="API Key / Account SID",GX="Auth Token (Twilio)",HX="API Endpoint",KX="Business WhatsApp Number",YX="Default Greeting Message (Manual)",XX="Auto Greeting for New Leads",QX="Automatically send WhatsApp greeting to new leads",JX="Auto Greeting Message",ZX="How it works",eQ="When a new lead is created (from Meta, WhatsApp, or manual entry), this greeting will be automatically sent via WhatsApp within 1 minute.",tQ="Google Gemini AI",nQ="AI-powered responses & assistant",rQ="Gemini API Key",iQ="Get from Google AI Studio  API Keys",sQ="AI Features Enabled:",aQ="Invoicing Software",oQ="Push bookings & pull payment status",lQ="Invoicing API Endpoint",cQ="Integration Behavior:",uQ="Browser Notifications",dQ="Get instant alerts in your browser",fQ="Note: You'll need to allow notifications when prompted by your browser. Works best on desktop browsers.",hQ="SMS Notifications (Twilio)",pQ="Send SMS alerts to employees",mQ="Twilio Account SID",gQ="Twilio Auth Token",yQ="Twilio Phone Number (From)",vQ="Send SMS For:",xQ="New lead assignments",bQ="Lead escalations (48h+ no contact)",wQ="Site visit reminders",_Q="Quote follow-up (3+ days in Quoted stage)",SQ="How SMS Notifications Work:",AQ="Cost: ~PKR 3-5 per SMS via Twilio",NQ="Google Calendar Integration",EQ="Sync lead dates to Google Calendar",CQ="Quick Add",jQ='"Add to Calendar" buttons will appear on lead details, call list, and booking views - no API setup needed!',TQ="Auto-Sync (Optional - Requires Google Cloud Setup)",PQ="Google Cloud Client ID",kQ="Google Calendar API Key",IQ="Please enter your Google Calendar Client ID and API Key first, then save.",OQ="Successfully connected to Google Calendar!",RQ="Failed to connect to Google Calendar. Please check your credentials.",$Q="Disconnected from Google Calendar",DQ="Integration Settings Saved!",MQ=`Automatically added lead sources:
 {sources}`,LQ="Account Settings",FQ="Profile",VQ="Password",BQ="Display Name",UQ="Email Address",zQ="Email cannot be changed",qQ="Phone Number",WQ="Used for SMS notifications",GQ="Save Profile",HQ="Current Password",KQ="New Password",YQ="Confirm New Password",XQ="Change Password",QQ="Password requirements:",JQ="Minimum 6 characters",ZQ="Mix of letters and numbers recommended",eJ="Sign Out",tJ="Profile updated successfully!",nJ="Failed to save profile. Please try again.",rJ="Please fill in all password fields.",iJ="New passwords do not match.",sJ="Password must be at least 6 characters.",aJ="Password changed successfully!",oJ="Current password is incorrect.",lJ="Please log out and log back in before changing your password.",cJ="Failed to change password. Please try again.",uJ="Enter current password",dJ="Enter new password",fJ="Confirm new password",hJ="Your name",pJ="03XX-XXXXXXX",mJ="Employees receive SMS when leads are assigned",gJ="Escalation alerts sent for stale leads (48h+)",yJ="Site visit reminders sent day before",vJ="Quote follow-up reminders after 3 days",xJ="Uses employee phone from Admin Panel",bJ="Quick Add buttons - Add any date to calendar with one click",wJ="Site Visits - Schedule venue visits with client details",_J="Scheduled Calls - Never miss a follow-up call",SJ="Event Dates - Track client event dates",AJ="Final Bookings - Confirmed booking dates",NJ="Round-robin lead assignment to employees",EJ="Employee Urdu assistant (query leads, availability)",CJ="Owner dashboard AI queries",jJ="Closing strategy & email generation",TJ="Role-based data access control",PJ='Auto-push booking when lead reaches "Booked" stage',kJ="Sync payment milestones (Advance, Mid, Final)",IJ="Show payment status in Finance dashboard",OJ="Alert on overdue payments",RJ="How it works: When a new lead is created (from Meta, WhatsApp, or manual entry), this greeting will be automatically sent via WhatsApp within 1 minute.",$J="Use {{name}} to insert the lead's first name",DJ="Enter the automatic greeting message...",MJ="Auto Greeting Message",LJ="Quick Templates",FJ="Dashboard",VJ="Sales View",BJ="Conversations",UJ="Finance",zJ="Contacts",qJ="Sources",WJ="AI Audit",GJ="My Leads",HJ={welcome:tG,yourLeadsAndMessages:nG,totalLeads:rG,new:"New",siteVisit:iG,booked:sG,inbox:aG,noLeads:oG,guests:lG,event:cG,budget:uG,source:dG,notesAndActivity:fG,viewDetails:hG,scheduleNextCall:pG,callOutcome:mG,callNotes:gG,saveCallLog:yG,saving:vG,addToGoogleCalendar:xG,contactsDirectory:bG,totalContacts:wG,searchContacts:_G,addContact:SG,phone:AG,email:NG,created:EG,actions:CG,noContacts:jG,addFirstContact:TG,manageSources:PG,leadSources:kG,newSourceName:IG,add:OG,sourceStats:RG,integration:$G,integrationsLocked:DG,noSourcesYet:MG,newSourcePlaceholder:LG,save:FG,cancel:VG,delete:"Delete",whatsapp:BG,notes:UG,callDetailsPlaceholder:zG,saveAndNext:qG,schedule:WG,lost:GG,selectLead:HG,aiAssistant:KG,askInUrdu:YG,example:XG,showTodayFollowups:QG,whatIsLeadStatus:JG,isDateAvailable:ZG,typeQuestion:eH,financeDashboard:tH,bookingPaymentsInvoicing:nH,sync:rH,export:"Export",totalBookings:iH,totalValue:sH,collected:aH,collectionRate:oH,overdue:lH,all:cH,pending:uH,partial:dH,paid:fH,client:hH,eventDate:pH,eventType:mH,total:gH,due:yH,status:vH,noBookingsFound:xH,paymentHistory:bH,remaining:wH,addPayment:_H,amount:SH,quotationAmount:AH,clientBudget:NH,date:EH,type:CH,notesOptional:jH,adding:TH,advanceInitial:PH,midPayment:kH,finalPayment:IH,custom:OH,history:RH,noPaymentsRecorded:$H,ownerDashboard:DH,welcomeBack:MH,quickStats:LH,recentActivity:FH,viewAll:VH,revenue:BH,activeLeads:UH,conversionRate:zH,remainingAfterPayment:qH,revenueYtd:WH,avgResponseTime:GH,excellent:HH,good:KH,needsImprovement:YH,revenueLeadsTrend:XH,trafficSources:QH,leadConversionFunnel:JH,topPerformingEmployees:ZH,unknownSource:eK,aiBusinessAssistant:tK,askAboutBusiness:nK,staleLeads:rK,overduePayments:iK,name:sK,leads:aK,convRateAbbr:oK,respTimeAbbr:lK,askButton:cK,leadsThisMonth:uK,bookedLeads:dK,stage:fK,totalRevenue:hK,pipelineValue:pK,allLeads:mK,searchLeads:gK,importCsv:yK,importing:vK,deleteAll:xK,addLead:bK,allStages:wK,allManagers:_K,clear:SK,show:AK,perPage:NK,page:EK,of:CK,results:jK,pipeline:TK,callList:PK,callsStatsSummary:kK,upcoming:IK,upcomingCalls:OK,overdueCalls:RK,todayCalls:$K,allCalls:DK,noCallsScheduled:MK,call:LK,addToCalendar:FK,newLeadMakeFirstCall:VK,last:BK,newLeadNeverCalled:UK,todayAt:zK,at:qK,aiAuditLogs:WK,viewAiHistory:GK,searchLogs:HK,allTypes:KK,aiQuery:YK,aiSuggestion:XK,autoGreeting:QK,quoteReminder:JK,leadSummary:ZK,allUsers:eY,last24Hours:tY,last7Days:nY,last30Days:rY,last90Days:iY,noAuditLogs:sY,auditLogsPlaceholder:aY,queryInput:oY,aiResponse:lY,contextMetadata:cY,model:uY,latency:dY,success:fY,failed:hY,auditLogEntries:pY,adminControlPanel:mY,manageTeamAccess:gY,inviteTeamMember:yY,inviteSent:vY,inviteSentBody:xY,userAdded:bY,copyLink:wY,copyLinkButton:_Y,revokeAccess:SY,resetDatabase:AY,resetDatabaseConfirm:NY,databaseCleared:EY,migrateContacts:CY,migrateContactsConfirm:jY,migrationComplete:TY,consolidateSources:PY,consolidateSourcesConfirm:kY,allSourcesConsolidated:IY,consolidatedSuccess:OY,dataMaintenance:RY,dataMaintenanceDesc:$Y,assignmentRules:DY,assignmentMode:MY,roundRobin:LY,roundRobinDesc:FY,bySource:VY,bySourceDesc:BY,singlePerson:UY,singlePersonDesc:zY,manualOnly:qY,manualOnlyDesc:WY,assignAllLeadsTo:GY,sourceEmployeeRules:HY,selectSource:KY,addRule:YY,leadsFromOtherSources:XY,fallbackAssignee:QY,useRoundRobin:JY,leaveUnassigned:ZY,alwaysAssignTo:eX,saveAssignmentRules:tX,automationRules:nX,perSource:rX,searchSources:iX,notify:sX,text:aX,aiBot:oX,default:"DEFAULT",callListAutoAdd:lX,notifyDesc:cX,emailDesc:uX,textDesc:dX,aiBotDesc:fX,saveAutomationRules:hX,settings:pX,managersEventTypes:mX,managersSalesTeam:gX,edit:yX,dangerZone:vX,dangerZoneDesc:xX,role:bX,managerAlreadyExists:wX,eventTypeAlreadyExists:_X,cannotDeleteUnassigned:SX,deleteManagerConfirm:AX,deleteEventTypeConfirm:NX,passwordResetLinkCopied:EX,copyPasswordResetLink:CX,failedToInviteUser:jX,migrateLeadsToContacts:TX,integrationsHub:PX,connectExternalPlatforms:kX,metaLeads:IX,aiGemini:OX,invoicing:RX,alerts:$X,calendar:DX,metaIntegration:MX,metaIntegrationDesc:LX,facebookPageId:FX,pageAccessToken:VX,getFromFacebook:BX,whatsappApi:UX,whatsappApiDesc:zX,provider:qX,apiKeySid:WX,authToken:GX,apiEndpoint:HX,businessNumber:KX,defaultGreeting:YX,autoGreetingTitle:XX,autoGreetingDesc:QX,autoGreetingMessage:JX,howItWorks:ZX,howItWorksDesc:eQ,googleGeminiAi:tQ,geminiAiDesc:nQ,geminiApiKey:rQ,getFromGoogleAi:iQ,aiFeaturesEnabled:sQ,invoicingSoftware:aQ,invoicingDesc:oQ,invoicingApiEndpoint:lQ,integrationBehavior:cQ,browserNotifications:uQ,browserNotificationsDesc:dQ,browserNotificationsNote:fQ,smsNotifications:hQ,smsNotificationsDesc:pQ,twilioAccountSid:mQ,twilioAuthToken:gQ,twilioPhoneNumber:yQ,sendSmsFor:vQ,newLeadAssignments:xQ,leadEscalations:bQ,siteVisitReminders:wQ,quoteFollowUp:_Q,howSmsWorks:SQ,smsCost:AQ,googleCalendarIntegration:NQ,googleCalendarDesc:EQ,quickAdd:CQ,quickAddDesc:jQ,autoSync:TQ,googleCloudClientId:PQ,googleCalendarApiKey:kQ,pleaseEnterGoogleCreds:IQ,googleConnectSuccess:OQ,googleConnectFail:RQ,disconnectedGoogle:$Q,integrationSettingsSaved:DQ,integrationSettingsSavedBody:MQ,accountSettings:LQ,profile:FQ,password:VQ,displayName:BQ,emailAddress:UQ,emailCannotBeChanged:zQ,phoneNumber:qQ,usedForSms:WQ,saveProfile:GQ,currentPassword:HQ,newPassword:KQ,confirmNewPassword:YQ,changePassword:XQ,passwordRequirements:QQ,minChar:JQ,mixRecommended:ZQ,signOut:eJ,profileUpdated:tJ,profileUpdateFailed:nJ,fillAllPasswordFields:rJ,passwordsDoNotMatch:iJ,passwordMinLength:sJ,passwordChanged:aJ,currentPasswordIncorrect:oJ,requiresRecentLogin:lJ,passwordChangeFailed:cJ,enterCurrentPassword:uJ,enterNewPassword:dJ,confirmNewPasswordPlaceholder:fJ,yourName:hJ,phonePlaceholder:pJ,smsWork1:mJ,smsWork2:gJ,smsWork3:yJ,smsWork4:vJ,smsWork5:xJ,calendarWork1:bJ,calendarWork2:wJ,calendarWork3:_J,calendarWork4:SJ,calendarWork5:AJ,aiFeature1:NJ,aiFeature2:EJ,aiFeature3:CJ,aiFeature4:jJ,aiFeature5:TJ,behavior1:PJ,behavior2:kJ,behavior3:IJ,behavior4:OJ,autoGreetingHow:RJ,autoGreetingNote:$J,autoGreetingPlaceholder:DJ,autoGreetingMessageLabel:MJ,quickTemplates:LJ,dashboard:FJ,salesView:VJ,conversations:BJ,finance:UJ,contacts:zJ,sources:qJ,aiAudit:WJ,myLeads:GJ},KJ=" ",YJ="    ",XJ=" ",QJ=" ",JJ=" ",ZJ=" ",eZ="  ",tZ="",nZ="",rZ="",iZ="",sZ="  ",aZ=" ",oZ="   ",lZ="  ",cZ=" ",uZ="   ",dZ="   ...",fZ="    ",hZ="  ",pZ=" ",mZ="  ...",gZ="  ",yZ="",vZ=" ",xZ="",bZ="",wZ="   ",_Z="        ",SZ="   ",AZ="  ",NZ="   ",EZ=" ",CZ="",jZ="",TZ="        ",PZ="            ",kZ="   ",IZ=" ",OZ="",RZ=" ",$Z="",DZ="  ...",MZ="   ",LZ="",FZ="",VZ="  ",BZ="AI ",UZ="   ",zZ=":",qZ="    ",WZ="     ",GZ="15  available ",HZ=" ...",KZ="  ",YZ="   ",XZ="",QZ=" ",JZ=" ",ZZ=" ",eee="  ",tee="",nee="",ree=" ",iee="",see=" ",aee="",oee="  ",lee="  ",cee="",uee=" ",dee="",fee="   ",hee="  ",pee="",mee="  ",gee="",yee="",vee="",xee=" ()",bee="   ...",wee=" ()",_ee=" ",See=" ",Aee="",Nee="",Eee="    ",Cee="  ",jee=" ",Tee=" ",Pee=" ",kee=" ",Iee="",Oee=" ",Ree="  ",$ee="    ",Dee=" ( )",Mee="  ",Lee="",Fee="",Vee="   ",Bee="    ",Uee="  ",zee="    ",qee="    ",Wee=" ",Gee="AI  ",Hee="        ",Kee=" ",Yee="  ",Xee="",Qee="",Jee=" ",Zee=" ",ete="",tte="   ",nte="  ",rte="",ite=" ",ste="  ",ate=" ",ote="  ...",lte="CSV  ",cte="   ...",ute="  ",dte="  ",fte=" ",hte=" ",pte=" ",mte="",gte=" ",yte="",vte="",xte="",bte=" ",wte=" ",_te=" {today}  {overdue} ",Ste=" ",Ate="  ",Nte=" ",Ete="  ",Cte=" ",jte="  ",Tte="",Pte="   ",kte="  -   ",Ite="",Ote="  -     ",Rte="",$te="",Dte="AI  ",Mte="    AI    ",Lte="  (  )...",Fte=" ",Vte="AI ",Bte="AI ",Ute=" ",zte="  ",qte="  ",Wte=" ",Gte=" 24 ",Hte=" 7 ",Kte=" 30 ",Yte=" 90 ",Xte="    ",Qte="AI     ",Jte=" /  ",Zte="AI ",ene="   /  ",tne="",nne=" (Latency)",rne="",ine="",sne="  ",ane="  ",one="     ",lne="    ",cne="    !",une="{name}  {email}           ",dne=" {name}      !",fne="                     ",hne="     OK   ",pne="  ",mne="    ",gne=":                ",yne="      ",vne="  ",xne="        ",bne=` 
  : {created}
   : {updated}`,wne="   ",_ne="     ",Sne="     ",Ane="    {count}    ",Nne="   ",Ene="         ",Cne="   ",jne="  ",Tne=" ",Pne="    ",kne=" ",Ine="       ",One=" ",Rne="    ",$ne=" ",Dne="   ",Mne="     ",Lne="    ",Fne="  ...",Vne="  ",Bne="             ",Une="  (     )",zne="   ",qne="    ",Wne=" {name}   ",Gne="    ",Hne="   ",Kne=" ",Yne="  ...",Xne=" ",Qne="",Jne="AI ",Zne="  -         ",ere="  - /    ",tre="  -        ",nre=" -        ",rre="AI  - AI    ",ire="    ",sre="",are="    ",ore=" /  ",lre="",cre=" ",ure="               ",dre="",fre="    ",hre="      ",pre='"  "      ',mre='  "{name}"   ',gre='    "{name}"   ',yre="          !",vre="       :",xre="     ",bre="     ",wre=" ",_re="    ",Sre=" ",Are="AI ()",Nre="",Ere="",Cre="",jre="   ",Tre=" /      ",Pre="    ",kre="  ",Ire="         ",Ore="   API",Rre="CRM    / ",$re="",Dre="API  /  SID",Mre="  ()",Lre="API  ",Fre="   ",Vre="   ()",Bre="     ",Ure="        ",zre="  ",qre="    ",Wre="      (      )     1             ",Gre="  AI",Hre="AI      ",Kre=" API ",Yre=" AI   API    ",Xre="AI  :",Qre="  ",Jre="        ",Zre=" API  ",eie="  :",tie=" ",nie="      ",rie=":                        ",iie="SMS  ()",sie="  SMS  ",aie="  SID",oie="  ",lie="   ()",cie="   SMS :",uie="  ",die="  (48 +   )",fie="    ",hie="   (   3+ )",pie="SMS     :",mie=": ~PKR 3-5  SMS  ",gie="  ",yie="         ",vie="  ",xie='"   "                -  API     !',bie="   ( -      )",wie="    ",_ie="  API ",Sie="          API      ",Aie="        !",Nie="            ",Eie="    ",Cie="    !",jie=`     :
 {sources}`,Tie=" ",Pie="",kie=" ",Iie=" ",Oie="  ",Rie="      ",$ie=" ",Die="SMS       ",Mie="  ",Lie="  ",Fie="  ",Vie="     ",Bie="   ",Uie="   :",zie="   6 ",qie="        ",Wie=" ",Gie="      !",Hie="         ",Kie="       ",Yie="     ",Xie="     6    ",Qie="      !",Jie="    ",Zie="                ",ese="          ",tse="    ",nse="    ",rse="     ",ise="  ",sse="03XX-XXXXXXX",ase="      SMS  ",ose="  (48 +)      ",lse="          ",cse="3         ",use="        ",dse="   -           ",fse="  -         ",hse="  -      ",pse="   -        ",mse="  -     ",gse="     ",yse="   (   )",vse="   AI ",xse="     ",bse="       ",wse='  ""        ',_se="    (  )   ",Sse="       ",Ase="    ",Nse="    :       (       )    1              ",Ese="{{name}}         ",Cse="    ...",jse="  ",Tse=" ",Pse=" ",kse=" ",Ise="",Ose="",Rse="",$se="",Dse="AI ",Mse=" ",Lse={welcome:KJ,yourLeadsAndMessages:YJ,totalLeads:XJ,new:"",siteVisit:QJ,booked:JJ,inbox:ZJ,noLeads:eZ,guests:tZ,event:nZ,budget:rZ,source:iZ,notesAndActivity:sZ,viewDetails:aZ,scheduleNextCall:oZ,callOutcome:lZ,callNotes:cZ,saveCallLog:uZ,saving:dZ,addToGoogleCalendar:fZ,contactsDirectory:hZ,totalContacts:pZ,searchContacts:mZ,addContact:gZ,phone:yZ,email:vZ,created:xZ,actions:bZ,noContacts:wZ,addFirstContact:_Z,manageSources:SZ,leadSources:AZ,newSourceName:NZ,add:EZ,sourceStats:CZ,integration:jZ,integrationsLocked:TZ,noSourcesYet:PZ,newSourcePlaceholder:kZ,save:IZ,cancel:OZ,delete:" ",whatsapp:RZ,notes:$Z,callDetailsPlaceholder:DZ,saveAndNext:MZ,schedule:LZ,lost:FZ,selectLead:VZ,aiAssistant:BZ,askInUrdu:UZ,example:zZ,showTodayFollowups:qZ,whatIsLeadStatus:WZ,isDateAvailable:GZ,typeQuestion:HZ,financeDashboard:KZ,bookingPaymentsInvoicing:YZ,sync:XZ,export:"",totalBookings:QZ,totalValue:JZ,collected:ZZ,collectionRate:eee,overdue:tee,all:nee,pending:ree,partial:iee,paid:see,client:aee,eventDate:oee,eventType:lee,total:cee,due:uee,status:dee,noBookingsFound:fee,paymentHistory:hee,remaining:pee,addPayment:mee,amount:gee,date:yee,type:vee,notesOptional:xee,adding:bee,advanceInitial:wee,midPayment:_ee,finalPayment:See,custom:Aee,history:Nee,noPaymentsRecorded:Eee,ownerDashboard:Cee,welcomeBack:jee,quickStats:Tee,recentActivity:Pee,viewAll:kee,revenue:Iee,activeLeads:Oee,conversionRate:Ree,remainingAfterPayment:$ee,revenueYtd:Dee,avgResponseTime:Mee,excellent:Lee,good:Fee,needsImprovement:Vee,revenueLeadsTrend:Bee,trafficSources:Uee,leadConversionFunnel:zee,topPerformingEmployees:qee,unknownSource:Wee,aiBusinessAssistant:Gee,askAboutBusiness:Hee,staleLeads:Kee,overduePayments:Yee,name:Xee,leads:Qee,convRateAbbr:Jee,respTimeAbbr:Zee,askButton:ete,leadsThisMonth:tte,bookedLeads:nte,stage:rte,totalRevenue:ite,pipelineValue:ste,allLeads:ate,searchLeads:ote,importCsv:lte,importing:cte,deleteAll:ute,addLead:dte,allStages:fte,allManagers:hte,clear:pte,show:mte,perPage:gte,page:yte,of:vte,results:xte,pipeline:bte,callList:wte,callsStatsSummary:_te,upcoming:Ste,upcomingCalls:Ate,overdueCalls:Nte,todayCalls:Ete,allCalls:Cte,noCallsScheduled:jte,call:Tte,addToCalendar:Pte,newLeadMakeFirstCall:kte,last:Ite,newLeadNeverCalled:Ote,todayAt:Rte,at:$te,aiAuditLogs:Dte,viewAiHistory:Mte,searchLogs:Lte,allTypes:Fte,aiQuery:Vte,aiSuggestion:Bte,autoGreeting:Ute,quoteReminder:zte,leadSummary:qte,allUsers:Wte,last24Hours:Gte,last7Days:Hte,last30Days:Kte,last90Days:Yte,noAuditLogs:Xte,auditLogsPlaceholder:Qte,queryInput:Jte,aiResponse:Zte,contextMetadata:ene,model:tne,latency:nne,success:rne,failed:ine,auditLogEntries:sne,adminControlPanel:ane,manageTeamAccess:one,inviteTeamMember:lne,inviteSent:cne,inviteSentBody:une,userAdded:dne,copyLink:fne,copyLinkButton:hne,revokeAccess:pne,resetDatabase:mne,resetDatabaseConfirm:gne,databaseCleared:yne,migrateContacts:vne,migrateContactsConfirm:xne,migrationComplete:bne,consolidateSources:wne,consolidateSourcesConfirm:_ne,allSourcesConsolidated:Sne,consolidatedSuccess:Ane,dataMaintenance:Nne,dataMaintenanceDesc:Ene,assignmentRules:Cne,assignmentMode:jne,roundRobin:Tne,roundRobinDesc:Pne,bySource:kne,bySourceDesc:Ine,singlePerson:One,singlePersonDesc:Rne,manualOnly:$ne,manualOnlyDesc:Dne,assignAllLeadsTo:Mne,sourceEmployeeRules:Lne,selectSource:Fne,addRule:Vne,leadsFromOtherSources:Bne,fallbackAssignee:Une,useRoundRobin:zne,leaveUnassigned:qne,alwaysAssignTo:Wne,saveAssignmentRules:Gne,automationRules:Hne,perSource:Kne,searchSources:Yne,notify:Xne,text:Qne,aiBot:Jne,default:"",callListAutoAdd:Zne,notifyDesc:ere,emailDesc:tre,textDesc:nre,aiBotDesc:rre,saveAutomationRules:ire,settings:sre,managersEventTypes:are,managersSalesTeam:ore,edit:lre,dangerZone:cre,dangerZoneDesc:ure,role:dre,managerAlreadyExists:fre,eventTypeAlreadyExists:hre,cannotDeleteUnassigned:pre,deleteManagerConfirm:mre,deleteEventTypeConfirm:gre,passwordResetLinkCopied:yre,copyPasswordResetLink:vre,failedToInviteUser:xre,migrateLeadsToContacts:bre,integrationsHub:wre,connectExternalPlatforms:_re,metaLeads:Sre,aiGemini:Are,invoicing:Nre,alerts:Ere,calendar:Cre,metaIntegration:jre,metaIntegrationDesc:Tre,facebookPageId:Pre,pageAccessToken:kre,getFromFacebook:Ire,whatsappApi:Ore,whatsappApiDesc:Rre,provider:$re,apiKeySid:Dre,authToken:Mre,apiEndpoint:Lre,businessNumber:Fre,defaultGreeting:Vre,autoGreetingTitle:Bre,autoGreetingDesc:Ure,autoGreetingMessage:zre,howItWorks:qre,howItWorksDesc:Wre,googleGeminiAi:Gre,geminiAiDesc:Hre,geminiApiKey:Kre,getFromGoogleAi:Yre,aiFeaturesEnabled:Xre,invoicingSoftware:Qre,invoicingDesc:Jre,invoicingApiEndpoint:Zre,integrationBehavior:eie,browserNotifications:tie,browserNotificationsDesc:nie,browserNotificationsNote:rie,smsNotifications:iie,smsNotificationsDesc:sie,twilioAccountSid:aie,twilioAuthToken:oie,twilioPhoneNumber:lie,sendSmsFor:cie,newLeadAssignments:uie,leadEscalations:die,siteVisitReminders:fie,quoteFollowUp:hie,howSmsWorks:pie,smsCost:mie,googleCalendarIntegration:gie,googleCalendarDesc:yie,quickAdd:vie,quickAddDesc:xie,autoSync:bie,googleCloudClientId:wie,googleCalendarApiKey:_ie,pleaseEnterGoogleCreds:Sie,googleConnectSuccess:Aie,googleConnectFail:Nie,disconnectedGoogle:Eie,integrationSettingsSaved:Cie,integrationSettingsSavedBody:jie,accountSettings:Tie,profile:Pie,password:kie,displayName:Iie,emailAddress:Oie,emailCannotBeChanged:Rie,phoneNumber:$ie,usedForSms:Die,saveProfile:Mie,currentPassword:Lie,newPassword:Fie,confirmNewPassword:Vie,changePassword:Bie,passwordRequirements:Uie,minChar:zie,mixRecommended:qie,signOut:Wie,profileUpdated:Gie,profileUpdateFailed:Hie,fillAllPasswordFields:Kie,passwordsDoNotMatch:Yie,passwordMinLength:Xie,passwordChanged:Qie,currentPasswordIncorrect:Jie,requiresRecentLogin:Zie,passwordChangeFailed:ese,enterCurrentPassword:tse,enterNewPassword:nse,confirmNewPasswordPlaceholder:rse,yourName:ise,phonePlaceholder:sse,smsWork1:ase,smsWork2:ose,smsWork3:lse,smsWork4:cse,smsWork5:use,calendarWork1:dse,calendarWork2:fse,calendarWork3:hse,calendarWork4:pse,calendarWork5:mse,aiFeature1:gse,aiFeature2:yse,aiFeature3:vse,aiFeature4:xse,aiFeature5:bse,behavior1:wse,behavior2:_se,behavior3:Sse,behavior4:Ase,autoGreetingHow:Nse,autoGreetingNote:Ese,autoGreetingPlaceholder:Cse,autoGreetingMessageLabel:jse,quickTemplates:Tse,dashboard:Pse,salesView:kse,conversations:Ise,finance:Ose,contacts:Rse,sources:$se,aiAudit:Dse,myLeads:Mse},Fse={en:HJ,ur:Lse},WD=k.createContext();function Vse({children:t}){const[e,n]=k.useState("en"),r=k.useCallback(()=>{n(a=>a==="ur"?"en":"ur")},[]),i=k.useCallback(a=>Fse[e][a]||a,[e]),s=e==="ur";return o.jsx(WD.Provider,{value:{language:e,toggleLanguage:r,t:i,isRTL:s},children:t})}function ti(){const t=k.useContext(WD);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t}function Bse(t){const[e,n]=k.useState([]),[r,i]=k.useState([]),[s,a]=k.useState([]);k.useEffect(()=>{if(!t)return;const b=io(pn(De,"artifacts",We,"public","data","leads"),S=>{n(S.docs.map(A=>({id:A.id,...A.data()})))}),v=io(pn(De,"artifacts",We,"public","data","lead_sources"),S=>{i(S.docs.map(A=>({id:A.id,...A.data()})))}),N=io(pn(De,"artifacts",We,"public","data","contacts"),S=>{a(S.docs.map(A=>({id:A.id,...A.data()})))});return()=>{b(),v(),N()}},[t]);const l=k.useMemo(()=>{const b=e.filter(A=>Br(A.stage)),v=b.reduce((A,E)=>A+ft(E.amount),0),N=e.filter(A=>["proposal","negotiation"].some(E=>(A.stage||"").toLowerCase().includes(E))).reduce((A,E)=>A+ft(E.amount),0),S=e.length>0?(b.length/e.length*100).toFixed(1):0;return{revenue:v,pipe:N,total:e.length,conversion:S,wonCount:b.length}},[e]);return{data:e,sources:r,contacts:s,stats:l,handleSaveLead:async(b,v,N=null)=>{const S={...v};N&&(S.activityLog=wj(N)),await Xu(Yt(De,"artifacts",We,"public","data","leads",b),S,{merge:!0})},handleAddLead:async(b,v="System")=>{const N=qD(Ve.LEAD_CREATED,{},v);await Xp(pn(De,"artifacts",We,"public","data","leads"),{...b,createdAt:kl(),activityLog:[N]})},addActivityLog:async(b,v)=>{await Xu(Yt(De,"artifacts",We,"public","data","leads",b),{activityLog:wj(v)},{merge:!0})},handleAddSource:async b=>{await Xp(pn(De,"artifacts",We,"public","data","lead_sources"),{name:b,createdAt:kl()})},handleUpdateSource:async(b,v)=>{await Xu(Yt(De,"artifacts",We,"public","data","lead_sources",b),{name:v},{merge:!0})},handleDeleteSource:async b=>{window.confirm("Delete source?")&&await B7(Yt(De,"artifacts",We,"public","data","lead_sources",b))},handleAddContact:async b=>{try{return{id:(await Xp(pn(De,"artifacts",We,"public","data","contacts"),{...b,createdAt:kl()})).id,...b}}catch(v){return console.error(v),alert("Failed to save contact"),null}},handleUpdateContact:async(b,v)=>{try{return await Xu(Yt(De,"artifacts",We,"public","data","contacts",b),v,{merge:!0}),!0}catch(N){return console.error(N),alert("Failed to update contact"),!1}},handleTruncateLeads:async()=>{if(window.confirm("WARNING: This will delete ALL leads. This action cannot be undone. Are you sure?"))try{const b=pn(De,"artifacts",We,"public","data","leads"),v=await ds(b);if(v.empty){alert("No leads to delete.");return}const N=450,S=[],A=v.docs;for(let E=0;E<A.length;E+=N)S.push(A.slice(E,E+N));for(const E of S){const _=Jb(De);E.forEach(C=>{_.delete(C.ref)}),await _.commit()}alert("All leads have been deleted.")}catch(b){console.error("Error truncating leads:",b),alert("Failed to truncate leads: "+b.message)}},handleDeleteAllContacts:async()=>{if(window.confirm("WARNING: This will delete ALL contacts. This action cannot be undone. Are you sure?"))try{const b=pn(De,"artifacts",We,"public","data","contacts"),v=await ds(b);if(v.empty){alert("No contacts to delete.");return}const N=450,S=[],A=v.docs;for(let E=0;E<A.length;E+=N)S.push(A.slice(E,E+N));for(const E of S){const _=Jb(De);E.forEach(C=>{_.delete(C.ref)}),await _.commit()}alert("All contacts have been deleted.")}catch(b){console.error("Error deleting contacts:",b),alert("Failed to delete contacts: "+b.message)}}}}function Use(t,e,n,r){k.useEffect(()=>{if(!t||e.length===0)return;const s=setTimeout(async()=>{const a=e.filter(l=>!l.contactId&&l.phone);if(a.length!==0)try{const l=Jb(De),c=pn(De,"artifacts",We,"public","data","contacts");let u=0,d=0;const f=new Map;n.forEach(h=>f.set(h.phone,h.id));for(const h of a){const m=ZS(h.phone);if(!m)continue;let y=f.get(m);if(!y){const x=Yt(c);y=x.id;const w=(h.clientName||"Unknown").split(" ");l.set(x,{firstName:w[0],lastName:w.slice(1).join(" "),phone:m,email:"",createdAt:kl()}),f.set(m,y),d++,u++}const g=Yt(De,"artifacts",We,"public","data","leads",h.id);if(l.set(g,{contactId:y,phone:m},{merge:!0}),u++,u>=450)break}u>0&&(await l.commit(),r({message:`System Auto-Fix: ${d} contacts created & linked.`,type:"success"}))}catch(l){console.error("Auto-fix failed",l)}},2e3);return()=>clearTimeout(s)},[t,e.length,n.length,r])}function zse(t){const e=[];let n=[],r="",i=!1;const s=t.length;for(let a=0;a<s;a++){const l=t[a],c=t[a+1];l==='"'?i&&c==='"'?(r+='"',a++):i=!i:l===","&&!i?(n.push(r.trim()),r=""):(l===`
`||l==="\r")&&!i?(n.push(r.trim()),n.length>0&&e.push(n),n=[],r="",l==="\r"&&c===`
`&&a++):r+=l}return(r||n.length>0)&&(n.push(r.trim()),n.length>0&&e.push(n)),e}const Bj={open:!1,total:0,current:0,successCount:0,failedRows:[],done:!1,unmatchedSources:[]};function qse(t=[],e=null){const[n,r]=k.useState(Bj);return{importProgress:n,closeImportModal:()=>{r(Bj)},handleFileUpload:a=>{const l=a.target.files[0];if(!l)return;const c=new FileReader;c.onload=async u=>{var d,f,h,m;try{const y=zse(u.target.result),g=y.findIndex(C=>C.join(" ").toLowerCase().includes("client name"));if(g===-1){alert('Invalid CSV: Could not find "Client Name" header');return}const x=y[g].map(C=>C.replace(/"/g,"").trim().toLowerCase()),w=(C,...P)=>{for(const T of P){const O=x.findIndex(R=>R.includes(T));if(O>-1&&C[O])return C[O].replace(/"/g,"").trim()}return""},b=[],v=C=>{const P=x.findIndex(M=>M==="amount"||M==="quotation amount"||M.startsWith("amount"));if(P<0||P>=C.length)return C;const T=(C[P]||"").trim();let O=P+1;for(;O<C.length&&/^\d{3}$/.test((C[O]||"").trim());)O++;if(O===P+1)return C;const R=C.slice(P,O).join("");return[...C.slice(0,P),R,...C.slice(O)]},N=C=>C?String(C).replace(/[^\d.]/g,""):"";if(y.slice(g+1).forEach(C=>{if(C.length<2)return;const P=v(C),T=w(P,"client name","name");T&&b.push({clientName:T,amount:N(w(P,"amount","quotation")),quotationAmount:N(w(P,"amount","quotation")),clientBudget:N(w(P,"budget","client budget")),status:w(P,"status")||"New",notes:w(P,"notes"),phone:w(P,"phone","contact","mobile","cell"),email:w(P,"email","mail"),source:w(P,"source"),manager:w(P,"manager"),inquiryDate:w(P,"date","inquiry date"),eventDate:w(P,"event date","eventdate","function date"),eventType:w(P,"event type","eventtype","function type","occasion"),guests:w(P,"guests","pax","headcount","attendees"),venue:w(P,"venue","location")})}),b.length===0){alert("No valid leads found in CSV");return}r({open:!0,total:b.length,current:0,successCount:0,failedRows:[],done:!1,unmatchedSources:[]});const S=10;let A=0;const E=[];let _=0;for(let C=0;C<b.length;C+=S){const P=b.slice(C,C+S),T=C;try{const O=await ar.import(P);A+=((d=O.data)==null?void 0:d.successCount)??P.length,((h=(f=O.data)==null?void 0:f.errors)==null?void 0:h.length)>0&&(O.data.errors.forEach((R,M)=>{var B;const D=g+1+T+M+2;E.push({rowNumber:D,clientName:R.row||((B=P[M])==null?void 0:B.clientName)||"",error:R.error})}),A=A-(((m=O.data)==null?void 0:m.failedCount)??0))}catch(O){P.forEach((R,M)=>{const D=g+1+T+M+2;E.push({rowNumber:D,clientName:R.clientName,error:O.message})})}_+=P.length,r(O=>({...O,current:_,successCount:A,failedRows:[...E]}))}r(C=>({...C,current:b.length,successCount:A,failedRows:[...E],done:!0})),typeof e=="function"&&e()}catch(y){console.error("Import failed:",y),r(g=>({...g,done:!0,failedRows:[...g.failedRows,{rowNumber:"?",clientName:"Unknown",error:y.message}]}))}finally{a.target.value=""}},c.readAsText(l)}}}const Ps=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6366F1"],la=["New","Contacted","Qualified","Site Visit Scheduled","Quoted","Negotiating","Booked","Lost"],Kr={New:{bg:"bg-blue-100",text:"text-blue-700",border:"border-blue-300"},Contacted:{bg:"bg-cyan-100",text:"text-cyan-700",border:"border-cyan-300"},Qualified:{bg:"bg-indigo-100",text:"text-indigo-700",border:"border-indigo-300"},"Site Visit Scheduled":{bg:"bg-purple-100",text:"text-purple-700",border:"border-purple-300"},Quoted:{bg:"bg-amber-100",text:"text-amber-700",border:"border-amber-300"},Negotiating:{bg:"bg-orange-100",text:"text-orange-700",border:"border-orange-300"},Booked:{bg:"bg-green-100",text:"text-green-700",border:"border-green-300"},Lost:{bg:"bg-red-100",text:"text-red-700",border:"border-red-300"}},eA=["Rafaqat Ali","Zia un Nabi","Hassan Rizvi","Khizar","Unassigned"],Wse=["Admin","Owner","Sales","Finance"],af={name:"Area 51 Banquet Hall"},z0=[{id:"marquee",name:"Marquee",label:"Area 51 Marquee"},{id:"banquet",name:"Banquet",label:"Area 51 Banquet Hall"}],Gse=["Advance","Mid-payment","Final payment"],of=["Wedding","Mehndi","Engagement","Birthday","Corporate Event","Other"];function Hse(t){if(!t)return{type:"none",filter:null};const e=(t.role||"employee").toLowerCase();return e==="owner"||e==="admin"?{type:"all",filter:null}:e==="manager"?{type:"team",filter:{teamId:t.teamId||null},managerId:t.id||t.uid}:{type:"self",filter:{manager:t.name}}}const Kse="";async function tA(t,e=""){var i,s,a,l,c,u;let n=Kse;if(n||(n=(i=(await rf(Yt(De,"artifacts",We,"public","data","app_settings","integrations"))).data())==null?void 0:i.geminiApiKey),!n)return{success:!1,error:"Gemini API key not configured"};const r=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${n}`;try{const d=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:t}]}],systemInstruction:e?{parts:[{text:e}]}:void 0})});return d.ok?{success:!0,text:((u=(c=(l=(a=(s=(await d.json()).candidates)==null?void 0:s[0])==null?void 0:a.content)==null?void 0:l.parts)==null?void 0:c[0])==null?void 0:u.text)||""}:{success:!1,error:"API request failed"}}catch(d){return console.error("Gemini API error:",d),{success:!1,error:d.message}}}async function Yse(t,e,n="en"){if(!e)return n==="ur"?"User session nahi mila. Dobara login karein.":"User session not found. Please log in again.";Hse(e);const r=(e.role||"employee").toLowerCase();return r==="owner"||r==="admin"?GD(t,e):r==="manager"?Xse(t,e,n):Jse(t,e.name,n,e)}async function Xse(t,e,n="en"){const r=n==="ur",i=r?`
    You are an AI assistant for "${af.name}" CRM, helping a manager in Urdu.
    Manager name: ${e.name}

    You can help with:
    - Team performance ("Team ki performance kaisi hai?")
    - Team's leads and follow-ups
    - Individual team member stats
    - Team conversion rates

    IMPORTANT: You can ONLY see data for this manager's team.
    You cannot compare with other teams or see company-wide data.

    Respond in Urdu (Roman script). Be concise.
  `:`
    You are an AI assistant for "${af.name}" CRM, helping a manager.
    Manager name: ${e.name}

    You can help with:
    - Team performance queries
    - Team's leads and follow-ups
    - Individual team member statistics
    - Team conversion rates and metrics

    IMPORTANT: You can ONLY see data for this manager's team.
    You cannot compare with other teams or access company-wide data.

    Respond in English. Be data-driven and concise.
  `,s=await Qse(),a=`
    Manager Query: "${t}"

    Team Metrics:
    - Total team leads: ${s.totalLeads}
    - Team conversion rate: ${s.conversionRate}%
    - Team revenue this month: PKR ${s.revenueThisMonth.toLocaleString()}

    Team Members:
    ${s.members.map(u=>`- ${u.name}: ${u.leads} leads, ${u.converted} converted`).join(`
`)}

    Respond to the manager's query in ${r?"Urdu (Roman script)":"English"}.
    ${r?"Agar manager company-wide data maangta hai, politely bataein ke aap sirf team data access kar sakte hain.":"If the manager asks for company-wide data, politely explain you can only access team data."}
  `,l=await tA(a,i),c=r?"Maaf kijiye, abhi jawab nahi de sakta. Dobara koshish karein.":"Sorry, unable to respond right now. Please try again.";return l.success?l.text:c}async function Qse(t){const e={totalLeads:0,conversionRate:0,revenueThisMonth:0,members:[]};try{const r=(await ds(nf(pn(De,"artifacts",We,"public","data","allowed_users"),Ym("role","in",["Sales","Employee"])))).docs.map(d=>({id:d.id,...d.data()})).filter(d=>d.name),i={};let s=0,a=0,l=0;const c=new Date,u=new Date(c.getFullYear(),c.getMonth(),1);for(const d of r){const f=await ds(nf(pn(De,"artifacts",We,"public","data","leads"),Ym("manager","==",d.name),qy(100)));i[d.name]={leads:0,converted:0},f.docs.forEach(h=>{var y,g;const m=h.data();s++,i[d.name].leads++,m.stage==="Booked"&&(a++,i[d.name].converted++,((g=(y=m.createdAt)==null?void 0:y.toDate)==null?void 0:g.call(y))>=u&&(l+=Number(m.amount)||0))})}e.totalLeads=s,e.conversionRate=s>0?(a/s*100).toFixed(1):0,e.revenueThisMonth=l,e.members=Object.entries(i).map(([d,f])=>({name:d,...f}))}catch(n){console.error("Error fetching team context:",n)}return e}async function Jse(t,e,n="en",r=null){var d;const i=n==="ur",s=i?`
    You are an AI assistant for "${af.name}" CRM, helping sales employees in Urdu.
    The employee's name is ${e}.

    You can help with:
    - Lead status queries ("Is lead ka status kya hai?")
    - Follow-up reminders ("Aaj ke follow-ups dikhao")
    - Date availability ("15 March available hai?")
    - Lead details and history
    - Personal performance metrics ("Meri conversion rate kya hai?")

    IMPORTANT SCOPE RULES:
    - You can ONLY see leads assigned to ${e}
    - You CANNOT see other team members' leads or performance
    - If asked about team/company data, politely explain you can only show their personal data
    - Never reveal other employees' metrics or compare performance

    Always respond in Urdu (Roman script). Be concise and helpful.
  `:`
    You are an AI assistant for "${af.name}" CRM, helping sales employees.
    The employee's name is ${e}.

    You can help with:
    - Lead status queries ("What's the status of this lead?")
    - Follow-up reminders ("Show me today's follow-ups")
    - Date availability ("Is March 15 available?")
    - Lead details and history
    - Personal performance metrics ("What's my conversion rate?")

    IMPORTANT SCOPE RULES:
    - You can ONLY see leads assigned to ${e}
    - You CANNOT see other team members' leads or performance
    - If asked about team/company data, politely explain you can only show their personal data
    - Never reveal other employees' metrics or compare performance

    Always respond in English. Be concise and helpful.
  `,a=await Zse(e),l=`
    Employee Query: "${t}"

    YOUR Leads Data (${e}'s data only):
    - Total assigned leads: ${a.totalLeads}
    - New leads: ${a.newLeads}
    - Booked/Won: ${a.bookedLeads}
    - Your conversion rate: ${a.conversionRate}%
    - Today's follow-ups: ${a.todayFollowups}
    - Pending site visits: ${a.pendingSiteVisits}
    - Your revenue: PKR ${((d=a.revenue)==null?void 0:d.toLocaleString())||0}

    Your recent leads:
    ${a.recentLeads.map(f=>`- ${f.clientName}: ${f.stage} (${f.eventDate||"No date"})`).join(`
`)}

    Respond to the employee's query in ${i?"Urdu (Roman script)":"English"}.
    ${i?"Agar employee team ya company data poochhe, politely bataein ke aap sirf unke personal data access kar sakte hain.":"If the employee asks about team or company data, politely explain you can only access their personal data."}
  `,c=await tA(l,s),u=i?"Maaf kijiye, abhi jawab nahi de sakta. Dobara koshish karein.":"Sorry, unable to respond right now. Please try again.";return c.success?c.text:u}async function Zse(t){const e={totalLeads:0,newLeads:0,bookedLeads:0,conversionRate:0,revenue:0,todayFollowups:0,pendingSiteVisits:0,recentLeads:[]};try{const n=await ds(nf(pn(De,"artifacts",We,"public","data","leads"),Ym("manager","==",t),LS("createdAt","desc"),qy(100))),r=new Date().toISOString().split("T")[0];n.docs.forEach(i=>{const s=i.data();e.totalLeads++,s.stage==="New"&&e.newLeads++,s.stage==="Site Visit Scheduled"&&e.pendingSiteVisits++,(s.followUpDate===r||s.nextCallDate===r)&&e.todayFollowups++,(s.stage==="Booked"||s.stage==="Won")&&(e.bookedLeads++,e.revenue+=Number(s.amount)||0),e.recentLeads.length<10&&e.recentLeads.push({clientName:s.clientName,stage:s.stage,eventDate:s.eventDate})}),e.conversionRate=e.totalLeads>0?(e.bookedLeads/e.totalLeads*100).toFixed(1):0}catch(n){console.error("Error fetching employee context:",n)}return e}async function GD(t,e=null){const n=`
    You are an AI analytics assistant for "${af.name}" CRM, helping the owner understand business performance.
    ${e?`Current user: ${e.name} (${e.role})`:""}

    RESPONSE FORMAT RULES (CRITICAL):
    - Keep responses SHORT and SCANNABLE (max 150 words)
    - Use bullet points () for lists, NOT asterisks
    - Use line breaks between sections
    - Bold key numbers by wrapping in **number**
    - Structure: Brief insight  Key metrics  1-2 action items

    Example good response:
    "Lead volume is strong but conversion needs work.

     Total Leads: **5,600+** (mostly from Meta)
     Conversion Rate: **1.9%** (below 5% target)
     Revenue: PKR **0** this month

    Action Items:
     Review Meta ad targeting quality
     Train team on follow-up timing"

    You have FULL ACCESS to all company data, employees, revenue, and analytics.
    Be direct, data-driven, and actionable.
  `,r=await eae(),i=`
    Owner Query: "${t}"

    Business Metrics:
    - Total leads this month: ${r.leadsThisMonth}
    - Leads by source: ${JSON.stringify(r.leadsBySource)}
    - Conversion rate: ${r.conversionRate}%
    - Average response time: ${r.avgResponseTime} hours
    - Revenue this month: PKR ${r.revenueThisMonth.toLocaleString()}
    - Revenue YTD: PKR ${r.revenueYTD.toLocaleString()}

    Leads by stage:
    ${Object.entries(r.leadsByStage).map(([a,l])=>`- ${a}: ${l}`).join(`
`)}

    Employee Performance:
    ${r.employeePerformance.map(a=>`- ${a.name}: ${a.leads} leads, ${a.converted} converted, PKR ${a.revenue.toLocaleString()}`).join(`
`)}

    Answer the owner's question based on this data.
  `,s=await tA(i,n);return s.success?s.text:"Unable to process query. Please try again."}async function eae(){const t={leadsThisMonth:0,leadsBySource:{},leadsByStage:{},conversionRate:0,avgResponseTime:0,revenueThisMonth:0,revenueYTD:0,employeePerformance:[]};try{const e=new Date,n=new Date(e.getFullYear(),e.getMonth(),1).toISOString(),r=new Date(e.getFullYear(),0,1).toISOString(),i=await ds(pn(De,"artifacts",We,"public","data","leads")),s={};let a=0,l=0;i.docs.forEach(c=>{var h,m,y,g,x,w;const u=c.data();a++,t.leadsByStage[u.stage]=(t.leadsByStage[u.stage]||0)+1;const d=u.source||"Unknown";if(t.leadsBySource[d]=(t.leadsBySource[d]||0)+1,((m=(h=u.createdAt)==null?void 0:h.toDate)==null?void 0:m.call(h))>=new Date(n)&&t.leadsThisMonth++,u.stage==="Booked"||u.stage==="Won"){l++;const b=Number(u.amount)||0;((g=(y=u.createdAt)==null?void 0:y.toDate)==null?void 0:g.call(y))>=new Date(n)&&(t.revenueThisMonth+=b),((w=(x=u.createdAt)==null?void 0:x.toDate)==null?void 0:w.call(x))>=new Date(r)&&(t.revenueYTD+=b)}const f=u.manager||"Unassigned";s[f]||(s[f]={leads:0,converted:0,revenue:0}),s[f].leads++,u.stage==="Booked"&&(s[f].converted++,s[f].revenue+=Number(u.amount)||0)}),t.conversionRate=a>0?(l/a*100).toFixed(1):0,t.employeePerformance=Object.entries(s).map(([c,u])=>({name:c,...u}))}catch(e){console.error("Error fetching business metrics:",e)}return t}async function tae(){const t=Yt(De,"artifacts",We,"public","data","app_settings","integrations"),e=await rf(t);return e.exists()?e.data():null}async function nae(t){const e=await tae();if(!(e!=null&&e.invoicingApiKey)||!(e!=null&&e.invoicingApiEndpoint))return{success:!1,error:"Invoicing not configured"};try{const n=await fetch(`${e.invoicingApiEndpoint}/api/bookings/${t}/payments`,{headers:{Authorization:`Bearer ${e.invoicingApiKey}`}}),r=await n.json();if(n.ok)return{success:!0,payments:r.payments||[],totalPaid:r.totalPaid||0,totalDue:r.totalDue||0,status:r.status};throw new Error(r.message||"Failed to fetch payments")}catch(n){return console.error("Payment status error:",n),{success:!1,error:n.message}}}async function rae(t){const e=t.filter(r=>r.stage==="Booked"&&r.invoicingId),n=[];for(const r of e){const i=await nae(r.invoicingId);i.success&&(await Qb(Yt(De,"artifacts",We,"public","data","leads",r.id),{paymentStatus:i.status,totalPaid:i.totalPaid,totalDue:i.totalDue,lastPaymentSync:kl()}),n.push({leadId:r.id,...i}))}return n}const Si=Object.create(null);Si.open="0";Si.close="1";Si.ping="2";Si.pong="3";Si.message="4";Si.upgrade="5";Si.noop="6";const nm=Object.create(null);Object.keys(Si).forEach(t=>{nm[Si[t]]=t});const rw={type:"error",data:"parser error"},HD=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",KD=typeof ArrayBuffer=="function",YD=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,nA=({type:t,data:e},n,r)=>HD&&e instanceof Blob?n?r(e):Uj(e,r):KD&&(e instanceof ArrayBuffer||YD(e))?n?r(e):Uj(new Blob([e]),r):r(Si[t]+(e||"")),Uj=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function zj(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let q0;function iae(t,e){if(HD&&t.data instanceof Blob)return t.data.arrayBuffer().then(zj).then(e);if(KD&&(t.data instanceof ArrayBuffer||YD(t.data)))return e(zj(t.data));nA(t,!1,n=>{q0||(q0=new TextEncoder),e(q0.encode(n))})}const qj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<qj.length;t++)Zu[qj.charCodeAt(t)]=t;const sae=t=>{let e=t.length*.75,n=t.length,r,i=0,s,a,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const u=new ArrayBuffer(e),d=new Uint8Array(u);for(r=0;r<n;r+=4)s=Zu[t.charCodeAt(r)],a=Zu[t.charCodeAt(r+1)],l=Zu[t.charCodeAt(r+2)],c=Zu[t.charCodeAt(r+3)],d[i++]=s<<2|a>>4,d[i++]=(a&15)<<4|l>>2,d[i++]=(l&3)<<6|c&63;return u},aae=typeof ArrayBuffer=="function",rA=(t,e)=>{if(typeof t!="string")return{type:"message",data:XD(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:oae(t.substring(1),e)}:nm[n]?t.length>1?{type:nm[n],data:t.substring(1)}:{type:nm[n]}:rw},oae=(t,e)=>{if(aae){const n=sae(t);return XD(n,e)}else return{base64:!0,data:t}},XD=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},QD="",lae=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,a)=>{nA(s,!1,l=>{r[a]=l,++i===n&&e(r.join(QD))})})},cae=(t,e)=>{const n=t.split(QD),r=[];for(let i=0;i<n.length;i++){const s=rA(n[i],e);if(r.push(s),s.type==="error")break}return r};function uae(){return new TransformStream({transform(t,e){iae(t,n=>{const r=n.length;let i;if(r<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,r);else if(r<65536){i=new Uint8Array(3);const s=new DataView(i.buffer);s.setUint8(0,126),s.setUint16(1,r)}else{i=new Uint8Array(9);const s=new DataView(i.buffer);s.setUint8(0,127),s.setBigUint64(1,BigInt(r))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(n)})}})}let W0;function up(t){return t.reduce((e,n)=>e+n.length,0)}function dp(t,e){if(t[0].length===e)return t.shift();const n=new Uint8Array(e);let r=0;for(let i=0;i<e;i++)n[i]=t[0][r++],r===t[0].length&&(t.shift(),r=0);return t.length&&r<t[0].length&&(t[0]=t[0].slice(r)),n}function dae(t,e){W0||(W0=new TextDecoder);const n=[];let r=0,i=-1,s=!1;return new TransformStream({transform(a,l){for(n.push(a);;){if(r===0){if(up(n)<1)break;const c=dp(n,1);s=(c[0]&128)===128,i=c[0]&127,i<126?r=3:i===126?r=1:r=2}else if(r===1){if(up(n)<2)break;const c=dp(n,2);i=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),r=3}else if(r===2){if(up(n)<8)break;const c=dp(n,8),u=new DataView(c.buffer,c.byteOffset,c.length),d=u.getUint32(0);if(d>Math.pow(2,21)-1){l.enqueue(rw);break}i=d*Math.pow(2,32)+u.getUint32(4),r=3}else{if(up(n)<i)break;const c=dp(n,i);l.enqueue(rA(s?c:W0.decode(c),e)),r=0}if(i===0||i>t){l.enqueue(rw);break}}}})}const JD=4;function Ut(t){if(t)return fae(t)}function fae(t){for(var e in Ut.prototype)t[e]=Ut.prototype[e];return t}Ut.prototype.on=Ut.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Ut.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Ut.prototype.off=Ut.prototype.removeListener=Ut.prototype.removeAllListeners=Ut.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Ut.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};Ut.prototype.emitReserved=Ut.prototype.emit;Ut.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Ut.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Hy=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Ar=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),hae="arraybuffer";function ZD(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const pae=Ar.setTimeout,mae=Ar.clearTimeout;function Ky(t,e){e.useNativeTimers?(t.setTimeoutFn=pae.bind(Ar),t.clearTimeoutFn=mae.bind(Ar)):(t.setTimeoutFn=Ar.setTimeout.bind(Ar),t.clearTimeoutFn=Ar.clearTimeout.bind(Ar))}const gae=1.33;function yae(t){return typeof t=="string"?vae(t):Math.ceil((t.byteLength||t.size)*gae)}function vae(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function eM(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function xae(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function bae(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class wae extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class iA extends Ut{constructor(e){super(),this.writable=!1,Ky(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,r){return super.emitReserved("error",new wae(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=rA(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=xae(e);return n.length?"?"+n:""}}class _ae extends iA{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};cae(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,lae(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=eM()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let tM=!1;try{tM=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Sae=tM;function Aae(){}class Nae extends _ae{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||r!==e.port}}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let $l=class rm extends Ut{constructor(e,n,r){super(),this.createRequest=e,Ky(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var e;const n=ZD(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=rm.requestsCount++,rm.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Aae,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete rm.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};$l.requestsCount=0;$l.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Wj);else if(typeof addEventListener=="function"){const t="onpagehide"in Ar?"pagehide":"unload";addEventListener(t,Wj,!1)}}function Wj(){for(let t in $l.requests)$l.requests.hasOwnProperty(t)&&$l.requests[t].abort()}const Eae=function(){const t=nM({xdomain:!1});return t&&t.responseType!==null}();class Cae extends Nae{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=Eae&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new $l(nM,this.uri(),e)}}function nM(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Sae))return new XMLHttpRequest}catch{}if(!e)try{return new Ar[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const rM=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class jae extends iA{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,r=rM?{}:ZD(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;nA(r,this.supportsBinary,s=>{try{this.doWrite(r,s)}catch{}i&&Hy(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=eM()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const G0=Ar.WebSocket||Ar.MozWebSocket;class Tae extends jae{createSocket(e,n,r){return rM?new G0(e,n,r):n?new G0(e,n):new G0(e)}doWrite(e,n){this.ws.send(n)}}class Pae extends iA{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=dae(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=e.readable.pipeThrough(n).getReader(),i=uae();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const s=()=>{r.read().then(({done:l,value:c})=>{l||(this.onPacket(c),s())}).catch(l=>{})};s();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;this._writer.write(r).then(()=>{i&&Hy(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const kae={websocket:Tae,webtransport:Pae,polling:Cae},Iae=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Oae=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function iw(t){if(t.length>8e3)throw"URI too long";const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=Iae.exec(t||""),s={},a=14;for(;a--;)s[Oae[a]]=i[a]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=Rae(s,s.path),s.queryKey=$ae(s,s.query),s}function Rae(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function $ae(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}const sw=typeof addEventListener=="function"&&typeof removeEventListener=="function",im=[];sw&&addEventListener("offline",()=>{im.forEach(t=>t())},!1);class ca extends Ut{constructor(e,n){if(super(),this.binaryType=hae,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const r=iw(e);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=iw(n.host).host);Ky(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const i=r.prototype.name;this.transports.push(i),this._transportsByName[i]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=bae(this.opts.query)),sw&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},im.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=JD,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&ca.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",ca.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=yae(i)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Hy(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,r){return this._sendPacket("message",e,n,r),this}send(e,n,r){return this._sendPacket("message",e,n,r),this}_sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}_onError(e){if(ca.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),sw&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=im.indexOf(this._offlineEventListener);r!==-1&&im.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}ca.protocol=JD;class Dae extends ca{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),r=!1;ca.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",f=>{if(!r)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;ca.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(d(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function s(){r||(r=!0,d(),n.close(),n=null)}const a=f=>{const h=new Error("probe error: "+f);h.transport=n.name,s(),this.emitReserved("upgradeError",h)};function l(){a("transport closed")}function c(){a("socket closed")}function u(f){n&&f.name!==n.name&&s()}const d=()=>{n.removeListener("open",i),n.removeListener("error",a),n.removeListener("close",l),this.off("close",c),this.off("upgrading",u)};n.once("open",i),n.once("error",a),n.once("close",l),this.once("close",c),this.once("upgrading",u),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let r=0;r<e.length;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}}let Mae=class extends Dae{constructor(e,n={}){const r=typeof e=="object"?e:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(i=>kae[i]).filter(i=>!!i)),super(e,r)}};function Lae(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=iw(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const Fae=typeof ArrayBuffer=="function",Vae=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,iM=Object.prototype.toString,Bae=typeof Blob=="function"||typeof Blob<"u"&&iM.call(Blob)==="[object BlobConstructor]",Uae=typeof File=="function"||typeof File<"u"&&iM.call(File)==="[object FileConstructor]";function sA(t){return Fae&&(t instanceof ArrayBuffer||Vae(t))||Bae&&t instanceof Blob||Uae&&t instanceof File}function sm(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(sm(t[n]))return!0;return!1}if(sA(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return sm(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&sm(t[n]))return!0;return!1}function zae(t){const e=[],n=t.data,r=t;return r.data=aw(n,e),r.attachments=e.length,{packet:r,buffers:e}}function aw(t,e){if(!t)return t;if(sA(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=aw(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=aw(t[r],e));return n}return t}function qae(t,e){return t.data=ow(t.data,e),delete t.attachments,t}function ow(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=ow(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=ow(t[n],e));return t}const Wae=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var Be;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(Be||(Be={}));class Gae{constructor(e){this.replacer=e}encode(e){return(e.type===Be.EVENT||e.type===Be.ACK)&&sm(e)?this.encodeAsBinary({type:e.type===Be.EVENT?Be.BINARY_EVENT:Be.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===Be.BINARY_EVENT||e.type===Be.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=zae(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}class aA extends Ut{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===Be.BINARY_EVENT;r||n.type===Be.BINARY_ACK?(n.type=r?Be.EVENT:Be.ACK,this.reconstructor=new Hae(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(sA(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(Be[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===Be.BINARY_EVENT||r.type===Be.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const a=e.substring(s,n);if(a!=Number(a)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(a)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const a=e.charAt(n);if(a==null||Number(a)!=a){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(aA.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case Be.CONNECT:return Gj(n);case Be.DISCONNECT:return n===void 0;case Be.CONNECT_ERROR:return typeof n=="string"||Gj(n);case Be.EVENT:case Be.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Wae.indexOf(n[0])===-1);case Be.ACK:case Be.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Hae{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=qae(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Gj(t){return Object.prototype.toString.call(t)==="[object Object]"}const Kae=Object.freeze(Object.defineProperty({__proto__:null,Decoder:aA,Encoder:Gae,get PacketType(){return Be}},Symbol.toStringTag,{value:"Module"}));function qr(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const Yae=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class sM extends Ut{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[qr(e,"open",this.onopen.bind(this)),qr(e,"packet",this.onpacket.bind(this)),qr(e,"error",this.onerror.bind(this)),qr(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var r,i,s;if(Yae.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const a={type:Be.EVENT,data:n};if(a.options={},a.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const d=this.ids++,f=n.pop();this._registerAckCallback(d,f),a.id=d}const l=(i=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||i===void 0?void 0:i.writable,c=this.connected&&!(!((s=this.io.engine)===null||s===void 0)&&s._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===e&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},i),a=(...l)=>{this.io.clearTimeoutFn(s),n.apply(this,l)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...n){return new Promise((r,i)=>{const s=(a,l)=>a?i(a):r(l);s.withError=!0,n.push(s),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>(this._queue[0],i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Be.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(r=>String(r.id)===e)){const r=this.acks[e];delete this.acks[e],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Be.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Be.EVENT:case Be.BINARY_EVENT:this.onevent(e);break;case Be.ACK:case Be.BINARY_ACK:this.onack(e);break;case Be.DISCONNECT:this.ondisconnect();break;case Be.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:Be.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Be.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}}function Wc(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Wc.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Wc.prototype.reset=function(){this.attempts=0};Wc.prototype.setMin=function(t){this.ms=t};Wc.prototype.setMax=function(t){this.max=t};Wc.prototype.setJitter=function(t){this.jitter=t};class lw extends Ut{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Ky(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Wc({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||Kae;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Mae(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=qr(n,"open",function(){r.onopen(),e&&e()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},a=qr(n,"error",s);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(qr(e,"ping",this.onping.bind(this)),qr(e,"data",this.ondata.bind(this)),qr(e,"error",this.onerror.bind(this)),qr(e,"close",this.onclose.bind(this)),qr(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Hy(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new sM(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Tu={};function am(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=Lae(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,a=Tu[i]&&s in Tu[i].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||a;let c;return l?c=new lw(r,e):(Tu[i]||(Tu[i]=new lw(r,e)),c=Tu[i]),n.query&&!e.query&&(e.query=n.queryKey),c.socket(n.path,e)}Object.assign(am,{Manager:lw,Socket:sM,io:am,connect:am});let ai;const Xae=(t="https://area51crm.inplsoftwares.com")=>{const[e,n]=k.useState(!1);return k.useEffect(()=>{ai||(ai=am(t,{withCredentials:!0,transports:["websocket","polling"],autoConnect:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3}));const r=()=>{console.log(" Connected to Socket.IO server at",t),n(!0)},i=a=>{console.log(" Disconnected from Socket.IO server:",a),n(!1)},s=a=>{console.error(" Socket connection error:",a.message)};return ai.connected&&n(!0),ai.on("connect",r),ai.on("disconnect",i),ai.on("connect_error",s),()=>{ai.off("connect",r),ai.off("disconnect",i),ai.off("connect_error",s)}},[t]),{socket:ai,isConnected:e}};function Qae(t,e={}){const{maxNotifications:n=50,enableBrowserNotifications:r=!1}=e,[i,s]=k.useState([]),[a,l]=k.useState(!0),[c,u]=k.useState(null),[d,f]=k.useState(typeof Notification<"u"?Notification.permission:"denied"),[h,m]=k.useState(new Set),y=k.useCallback(async()=>{if(typeof Notification>"u")return console.warn("Browser notifications not supported"),!1;if(Notification.permission==="granted")return f("granted"),!0;if(Notification.permission!=="denied"){const E=await Notification.requestPermission();return f(E),E==="granted"}return!1},[]),g=k.useCallback(E=>{if(!(d!=="granted"||!r)&&!h.has(E.id))try{const _=x(E.type),C=new Notification(_,{body:E.message,icon:"/favicon.ico",tag:E.id,requireInteraction:E.priority==="high"});E.priority!=="high"&&setTimeout(()=>C.close(),5e3),m(P=>new Set([...P,E.id])),C.onclick=()=>{window.focus(),C.close()}}catch(_){console.error("Error showing browser notification:",_)}},[d,r,h]),x=E=>{switch(E){case"lead_assigned":return"New Lead Assigned!";case"stale_lead_reminder":return"Follow-up Reminder";case"stale_lead_escalation":return"URGENT: Lead Escalation";case"site_visit_reminder":return"Site Visit Tomorrow";default:return"Area 51 CRM"}},w=k.useCallback(async()=>{const E=(t==null?void 0:t.id)||(t==null?void 0:t.uid);if(console.log("[useNotifications] Fetching for user:",E,"Current User Object:",t),!E){console.log("[useNotifications] No userId, skipping fetch");return}l(!0);try{console.log("[useNotifications] Calling API...");const _=await cp.getAll({userId:E,role:t.role,limit:n});console.log("[useNotifications] Fetched data:",_),s(_),u(null)}catch(_){console.error("Error fetching notifications:",_),u(_.message)}finally{l(!1)}},[t,n]);k.useEffect(()=>{w()},[w]);const b=k.useCallback(async E=>{s(_=>_.map(C=>C.id===E?{...C,read:!0}:C));try{await cp.markAsRead(E)}catch(_){console.error("Error marking notification as read:",_)}},[]),v=k.useCallback(async()=>{s(E=>E.map(_=>({..._,read:!0})));try{const E=(t==null?void 0:t.id)||(t==null?void 0:t.uid);await cp.markAllAsRead({userId:E,role:t.role})}catch(E){console.error("Error marking all notifications as read:",E)}},[t]),N=k.useCallback(async E=>{s(_=>_.filter(C=>C.id!==E));try{await cp.delete(E)}catch(_){console.error("Error deleting notification:",_)}},[]),S=k.useCallback(E=>{s(_=>_.some(C=>C.id===E.id)?_:[E,..._]),r&&g(E)},[r,g]),A=i.filter(E=>!E.read).length;return{notifications:i,unreadCount:A,loading:a,error:c,markAsRead:b,markAllAsRead:v,deleteNotification:N,browserPermission:d,requestBrowserPermission:y,handleNewNotification:S,refreshNotifications:w}}const Jae=()=>{try{new Audio("/notification.mp3.mp3").play().catch(e=>console.error("Audio play error",e))}catch(t){console.error("Audio setup error",t)}};function Zae(t){const{socket:e}=Xae();k.useEffect(()=>{if(!e)return;const n=r=>{console.log(" Received new-lead event:",r),Jae(),t&&t(r)};return console.log(" Listening for new-lead events"),e.on("new-lead",n),()=>{e.off("new-lead",n)}},[e,t])}function eoe(){const[t,e]=k.useState(eA),[n,r]=k.useState(of),[i,s]=k.useState(!0);return k.useEffect(()=>{const a=io(Yt(De,"artifacts",We,"public","data","app_settings","managers"),c=>{var u;c.exists()&&((u=c.data().list)==null?void 0:u.length)>0&&e(c.data().list)}),l=io(Yt(De,"artifacts",We,"public","data","app_settings","event_types"),c=>{var u;c.exists()&&((u=c.data().list)==null?void 0:u.length)>0&&r(c.data().list),s(!1)});return()=>{a(),l()}},[]),{managers:t,eventTypes:n,loading:i}}function toe({enabled:t=!0}={}){const[e,n]=k.useState([]),[r,i]=k.useState(t),[s,a]=k.useState(null),[l,c]=k.useState(!1),[u,d]=k.useState(null),[f,h]=k.useState(0),m=k.useCallback(async(N=null,S=!1)=>{i(!0),a(null);try{const A=await Rs.getAll(N,100);n(S?E=>[...E,...A.data]:A.data),c(A.pagination.hasMore),d(A.pagination.nextCursor),h(A.pagination.total)}catch(A){a(A.message),console.error("Failed to fetch contacts:",A)}finally{i(!1)}},[]),y=k.useCallback(async()=>{l&&u&&!r&&await m(u,!0)},[l,u,r,m]),g=k.useCallback(async()=>{console.log("[useContacts] Fetching all contacts..."),i(!0),a(null);try{let N=[],S=null,A=!0;for(;A;){console.log("[useContacts] Fetching page, cursor:",S);const E=await Rs.getAll(S,1e3);if(console.log("[useContacts] Received result:",E),N=[...N,...E.data],A=E.pagination.hasMore,S=E.pagination.nextCursor,N.length>1e5){console.warn("[useContacts] Safety break: exceeding 100k contacts, stopping fetch.");break}}console.log("[useContacts] Total contacts fetched:",N.length),n(N),c(!1),d(null),h(N.length)}catch(N){console.error("[useContacts] Error fetching contacts:",N),a(N.message)}finally{i(!1)}},[]);k.useEffect(()=>{t?g():i(!1)},[g,t]);const x=k.useCallback(async N=>{try{const S=await Rs.create(N);return n(A=>[S,...A]),h(A=>A+1),S}catch(S){throw a(S.message),S}},[]),w=k.useCallback(async(N,S)=>{try{const A=await Rs.update(N,S);return n(E=>E.map(_=>_.id===N?A:_)),A}catch(A){throw a(A.message),A}},[]),b=k.useCallback(async N=>{try{await Rs.delete(N),n(S=>S.filter(A=>A.id!==N)),h(S=>S-1)}catch(S){throw a(S.message),S}},[]),v=k.useCallback(async()=>{try{await Rs.deleteAll(),n([]),h(0)}catch(N){throw a(N.message),N}},[]);return{contacts:e,loading:r,error:s,hasMore:l,totalCount:f,fetchContacts:m,fetchAllContacts:g,loadMore:y,addContact:x,updateContact:w,deleteContact:b,deleteAllContacts:v}}function noe({enabled:t=!0}={}){const[e,n]=k.useState([]),[r,i]=k.useState(t),[s,a]=k.useState(null),l=k.useCallback(async()=>{i(!0),a(null);try{const f=await Ju.getAll();n(f)}catch(f){a(f.message),console.error("Failed to fetch sources:",f)}finally{i(!1)}},[]);k.useEffect(()=>{t?l():i(!1)},[l,t]);const c=k.useCallback(async f=>{try{const h=await Ju.create(f);return n(m=>[h,...m]),h}catch(h){throw a(h.message),h}},[]),u=k.useCallback(async(f,h)=>{try{const m=await Ju.update(f,h);return n(y=>y.map(g=>g.id===f?m:g)),m}catch(m){throw a(m.message),m}},[]),d=k.useCallback(async f=>{try{await Ju.delete(f),n(h=>h.filter(m=>m.id!==f))}catch(h){throw a(h.message),h}},[]);return{sources:e,loading:r,error:s,fetchSources:l,addSource:c,updateSource:u,deleteSource:d}}function roe(){const[t,e]=k.useState(!1),[n,r]=k.useState({current:0,total:0,success:0,skipped:0,skippedDuplicate:0,skippedInvalid:0,failed:0}),[i,s]=k.useState(null);return{migrateContacts:k.useCallback(async()=>{e(!0),s(null),r({current:0,total:0,success:0,skipped:0,skippedDuplicate:0,skippedInvalid:0,failed:0});try{console.log("Fetching contacts from Firebase...");const l=pn(De,"artifacts",We,"public","data","contacts"),u=(await ds(l)).docs.map(w=>({id:w.id,...w.data()}));if(console.log(`Found ${u.length} contacts in Firebase`),u.length===0)return{success:0,skipped:0,failed:0,total:0};r(w=>({...w,total:u.length}));let d=[];try{let w=null,b=!0;for(console.log("Fetching existing contacts from PostgreSQL...");b;){const v=await Rs.getAll(w,100);d=[...d,...v.data],b=v.pagination.hasMore,w=v.pagination.nextCursor}console.log(`Fetched ${d.length} existing contacts from PostgreSQL`)}catch(w){console.error("Failed to fetch existing contacts:",w)}const f=new Set(d.map(w=>w.phone)),h=new Set(d.map(w=>w.email).filter(Boolean));let m=0,y=0,g=0,x=0;for(let w=0;w<u.length;w++){const b=u[w];try{let v=ZS(b.phone);if(!v&&b.phone){const A=String(b.phone).replace(/[^0-9+]/g,"");A.length>=7&&(v=A)}if(!v){console.warn(`Skipping invalid phone: ${b.firstName} (${b.phone})`),g++,r(A=>({...A,current:w+1,skipped:y+g,skippedInvalid:g}));continue}if(f.has(v)){console.log(`Skipping duplicate phone: ${v} (${b.firstName})`),y++,r(A=>({...A,current:w+1,skipped:y+g,skippedDuplicate:y}));continue}const N=b.email||null;if(N&&h.has(N)){console.log(`Skipping duplicate email: ${N} (${b.firstName})`),y++,r(A=>({...A,current:w+1,skipped:y+g,skippedDuplicate:y}));continue}const S={firstName:b.firstName||"Unknown",lastName:b.lastName||"",email:N,phone:v};await Rs.create(S),f.add(v),N&&h.add(N),m++,r(A=>({...A,current:w+1,success:m}))}catch(v){if(v.message&&v.message.includes("already exists")){console.log(`Skipping duplicate (API 409): ${b.phone}`),y++,r(N=>({...N,current:w+1,skipped:y+g,skippedDuplicate:y}));continue}console.error(`Failed to migrate contact: ${b.firstName}`,v),x++,r(N=>({...N,current:w+1,failed:x}))}}return console.log("Migration complete:",{success:m,skippedDuplicate:y,skippedInvalid:g,failed:x,total:u.length}),{success:m,skippedDuplicate:y,skippedInvalid:g,failed:x,total:u.length}}catch(l){throw console.error("Migration error:",l),s(l.message),l}finally{e(!1)}},[]),migrating:t,progress:n,error:i}}function ioe({enabled:t=!0}={}){const[e,n]=k.useState([]),[r,i]=k.useState(t),[s,a]=k.useState(null),[l,c]=k.useState({page:1,limit:100,total:0}),u=k.useCallback(async(x={})=>{i(!0);try{const w={limit:1e3,...x},b=await ar.getAll(w),v=b.data.map(N=>{var S,A;return{...N,clientName:N.contact?`${N.contact.firstName} ${N.contact.lastName}`.trim():N.title||"Unknown",stage:N.status,inquiryDate:new Date(N.createdAt).toISOString().split("T")[0],manager:N.assignee?N.assignee.username:"Unassigned",phone:((S=N.contact)==null?void 0:S.phone)||"",source:((A=N.source)==null?void 0:A.name)||""}});n(v),c(b.pagination),a(null)}catch(w){console.error("Error fetching leads:",w),a(w.message)}finally{i(!1)}},[]);k.useEffect(()=>{t?u():i(!1)},[u,t]);const d=async x=>{try{const w=await ar.create(x);return await u(),w}catch(w){throw w}},f=async(x,w)=>{try{const b=await ar.update(x,w);return await u(),b}catch(b){throw b}},h=async x=>{try{await ar.delete(x),await u()}catch(w){throw w}},m=async()=>{try{await ar.deleteAll(),await u()}catch(x){throw x}},y=async(x,w,b="NOTE")=>{try{await ar.addNote(x,{content:w,type:b})}catch(v){throw v}},g=k.useMemo(()=>{const x=e.filter(N=>Br(N.stage)),w=x.reduce((N,S)=>N+ft(S.amount),0),b=e.filter(N=>["proposal","negotiation"].some(S=>(N.stage||"").toLowerCase().includes(S))).reduce((N,S)=>N+ft(S.amount),0),v=e.length>0?(x.length/e.length*100).toFixed(1):0;return{revenue:w,pipe:b,total:e.length,conversion:v,wonCount:x.length}},[e]);return{leads:e,loading:r,error:s,pagination:l,fetchLeads:u,addLead:d,updateLead:f,deleteLead:h,deleteAllLeads:m,addLeadNote:y,stats:g}}function soe({enabled:t=!0}={}){const[e,n]=k.useState([]),[r,i]=k.useState(t),[s,a]=k.useState(null);return k.useEffect(()=>{t?(async()=>{try{const c=await tm.getAll();n(c),a(null)}catch(c){console.error("Error fetching users:",c),a(c.message)}finally{i(!1)}})():i(!1)},[t]),{users:e,loading:r,error:s}}function aoe({message:t,type:e="success",onClose:n}){return k.useEffect(()=>{const r=setTimeout(n,5e3);return()=>clearTimeout(r)},[n]),o.jsxs("div",{className:`fixed bottom-4 right-4 z-[100] px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3 animate-bounce-in ${e==="success"?"bg-slate-900 text-green-400 border border-green-500":"bg-red-900 text-white border border-red-500"}`,children:[e==="success"?o.jsx(as,{className:"w-6 h-6"}):o.jsx(mo,{className:"w-6 h-6"}),o.jsx("div",{children:o.jsx("p",{className:"font-bold",children:t})}),o.jsx("button",{onClick:n,className:"ml-4 hover:opacity-70",children:o.jsx(Dt,{className:"w-4 h-4"})})]})}function fp({title:t,value:e,icon:n,color:r,subtext:i,onClick:s}){return o.jsxs("div",{onClick:s,className:"bg-white rounded-xl p-5 border border-gray-100 shadow-sm hover:shadow-md transition-all cursor-pointer group relative overflow-hidden",children:[o.jsx("div",{className:`absolute top-0 right-0 p-3 opacity-10 group-hover:opacity-20 transition-opacity ${r.replace("bg-","text-")}`,children:o.jsx(n,{className:"w-16 h-16"})}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:`p-3 rounded-xl ${r} bg-opacity-10 w-fit mb-4`,children:o.jsx(n,{className:`w-6 h-6 ${r.replace("bg-","text-")}`})}),o.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),o.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-1 tracking-tight",children:e}),i&&o.jsx("p",{className:"text-xs text-gray-400 mt-2 font-medium",children:i})]})]})}const ooe=(t,e)=>{const n=[{id:"owner-dashboard",path:"/",label:e("dashboard"),icon:TR,description:"Analytics & KPIs"},{id:"leads",path:"/leads",label:e("allLeads"),icon:Tr,description:"Manage leads"},{id:"employee",path:"/employee",label:e("salesView"),icon:Hl,description:"Employee interface"},{id:"call-list",path:"/call-list",label:e("callList"),icon:yo,description:"Scheduled calls"},{id:"conversation-logs",path:"/conversation-logs",label:e("conversations"),icon:dr,description:"WhatsApp history"},{id:"finance",path:"/finance",label:e("finance"),icon:zd,description:"Payments & invoicing"},{id:"contacts",path:"/contacts",label:e("contacts"),icon:_C,description:"Contact directory"},{id:"sources",path:"/sources",label:e("sources"),icon:X_,description:"Lead sources"},{id:"audit-logs",path:"/audit-logs",label:e("aiAudit"),icon:dd,description:"AI interaction logs"}],r=[{id:"employee",path:"/employee",label:e("myLeads"),icon:Hl,description:"My inbox"},{id:"call-list",path:"/call-list",label:e("callList"),icon:yo,description:"Scheduled calls"},{id:"contacts",path:"/contacts",label:e("contacts"),icon:_C,description:"Contacts"}],i=[{id:"finance",path:"/finance",label:e("finance"),icon:zd,description:"Payments & invoicing"}];switch(t){case"Owner":case"Admin":return n;case"Sales":return r;case"Finance":return i;default:return n}};function Hj({activeTab:t,setActiveTab:e,userRole:n,onShowAdmin:r,onShowIntegrations:i,onShowUserSettings:s,onShowMigration:a,isMobile:l=!1}){const{t:c}=ti(),u=ooe(n,c),d=["Owner","Admin"].includes(n),f=()=>{l&&e&&e()};return l?o.jsxs("div",{className:"p-2",children:[o.jsx("div",{className:"px-3 py-2 mb-2",children:o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${n==="Owner"||n==="Admin"?"bg-purple-100 text-purple-700":n==="Sales"?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:n})}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:u.map(h=>o.jsx(Eb,{to:h.path,onClick:f,className:({isActive:m})=>`flex items-center gap-2 px-3 py-3 rounded-xl text-left transition-all ${m?"bg-blue-100 text-blue-700 font-semibold":"bg-gray-50 text-gray-600 active:bg-gray-100"}`,children:({isActive:m})=>o.jsxs(o.Fragment,{children:[o.jsx(h.icon,{className:`w-5 h-5 flex-shrink-0 ${m?"text-blue-600":"text-gray-400"}`}),o.jsx("span",{className:"text-sm font-medium truncate",children:h.label})]})},h.id))}),d&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"my-3 border-t border-gray-200"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-3 py-3 rounded-xl text-left bg-purple-50 text-purple-700 active:bg-purple-100",children:[o.jsx(Pb,{className:"w-5 h-5 text-purple-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Admin"})]}),o.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-3 py-3 rounded-xl text-left bg-cyan-50 text-cyan-700 active:bg-cyan-100",children:[o.jsx($m,{className:"w-5 h-5 text-cyan-500"}),o.jsx("span",{className:"text-sm font-medium",children:"Settings"})]})]})]}),o.jsx("div",{className:"my-3 border-t border-gray-200"}),o.jsxs("button",{onClick:s,className:"w-full flex items-center gap-2 px-3 py-3 rounded-xl text-left bg-gray-100 text-gray-700 active:bg-gray-200",children:[o.jsx(jb,{className:"w-5 h-5 text-gray-500"}),o.jsx("span",{className:"text-sm font-medium",children:"My Account"})]})]}):o.jsxs("aside",{className:"w-64 bg-white border-r flex flex-col shadow-sm h-full",children:[o.jsx("div",{className:"p-5 border-b",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center",children:o.jsx(qB,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"font-bold text-gray-900",children:"Area 51"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Banquet Hall CRM"})]})]})}),o.jsx("div",{className:"px-5 py-3 bg-gray-50 border-b",children:o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${n==="Owner"||n==="Admin"?"bg-purple-100 text-purple-700":n==="Sales"?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:n})}),o.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[u.map(h=>o.jsx(Eb,{to:h.path,className:({isActive:m})=>`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all ${m?"bg-blue-50 text-blue-700 font-semibold":"text-gray-600 hover:bg-gray-50"}`,children:({isActive:m})=>o.jsxs(o.Fragment,{children:[o.jsx(h.icon,{className:`w-5 h-5 ${m?"text-blue-600":"text-gray-400"}`}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:h.label}),!m&&o.jsx("p",{className:"text-[10px] text-gray-400",children:h.description})]})]})},h.id)),d&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"my-4 border-t border-gray-100"}),o.jsx("p",{className:"px-4 text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Settings"}),o.jsxs("button",{onClick:r,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left text-gray-600 hover:bg-purple-50 hover:text-purple-700 transition-all",children:[o.jsx(Pb,{className:"w-5 h-5 text-purple-500"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:"Admin Panel"}),o.jsx("p",{className:"text-[10px] text-gray-400",children:"Users & permissions"})]})]}),o.jsxs("button",{onClick:i,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left text-gray-600 hover:bg-cyan-50 hover:text-cyan-700 transition-all",children:[o.jsx($m,{className:"w-5 h-5 text-cyan-500"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:"Integrations"}),o.jsx("p",{className:"text-[10px] text-gray-400",children:"WhatsApp, Meta, AI"})]})]}),o.jsxs("button",{onClick:a,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left text-gray-600 hover:bg-orange-50 hover:text-orange-700 transition-all font-medium",children:[o.jsx(Om,{className:"w-5 h-5 text-orange-500"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:"Data Migration"}),o.jsx("p",{className:"text-[10px] text-gray-400",children:"Firebase to SQL"})]})]})]})]}),o.jsx("div",{className:"p-4 border-t",children:o.jsxs("button",{onClick:s,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left text-gray-600 hover:bg-gray-100 transition-all",children:[o.jsx(jb,{className:"w-5 h-5 text-gray-500"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium",children:"My Account"}),o.jsx("p",{className:"text-[10px] text-gray-400",children:"Profile & password"})]})]})}),o.jsx("div",{className:"p-4 border-t bg-gray-50",children:o.jsx("p",{className:"text-[10px] text-gray-400 text-center",children:"Area 51 CRM v1.0"})})]})}function loe({onLogin:t,isLoading:e,authError:n,login:r,signup:i,logout:s}){const[a,l]=k.useState(""),[c,u]=k.useState(""),[d,f]=k.useState(""),[h,m]=k.useState("Sales"),[y,g]=k.useState(""),[x,w]=k.useState("login"),[b,v]=k.useState(!1),N=async E=>{E.preventDefault(),g(""),v(!0);try{await r(a,c)}catch(_){g(_.message||"Login failed. Please try again.")}finally{v(!1)}},S=async E=>{E.preventDefault(),g(""),v(!0);try{await i(d,a,c,h)}catch(_){_.message.includes("already exists")?g("An account with this email already exists. Please sign in."):g(_.message||"Registration failed. Please try again.")}finally{v(!1)}},A=async()=>{await s()};return e?o.jsx("div",{className:"h-screen flex items-center justify-center bg-slate-100",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Ft,{className:"w-8 h-8 animate-spin text-blue-600 mx-auto"}),o.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Loading..."})]})}):n?o.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center p-4 font-sans",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden border border-slate-200",children:[o.jsxs("div",{className:"p-8 text-center bg-gradient-to-br from-red-500 to-orange-600",children:[o.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(mo,{className:"w-10 h-10 text-white"})}),o.jsx("h1",{className:"text-2xl font-bold text-white",children:"Access Denied"})]}),o.jsxs("div",{className:"p-8 text-center",children:[o.jsx("p",{className:"text-gray-600 mb-6",children:n}),o.jsxs("button",{onClick:A,className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold py-3 rounded-xl flex items-center justify-center gap-2",children:[o.jsx(PR,{className:"w-4 h-4"})," Sign Out & Try Different Account"]})]})]})}):o.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center p-4 font-sans",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden border border-slate-200 animate-scale-in",children:[o.jsxs("div",{className:`p-8 text-center relative overflow-hidden ${x==="register"?"bg-gradient-to-br from-green-600 to-teal-700":"bg-gradient-to-br from-blue-600 to-indigo-700"}`,children:[o.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center mx-auto mb-4 shadow-inner",children:x==="register"?o.jsx(Dm,{className:"w-10 h-10 text-white"}):o.jsx(Ua,{className:"w-10 h-10 text-white"})}),o.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:x==="register"?"Create Account":"Area 51 CRM"}),o.jsx("p",{className:"text-white/70 text-sm mt-1",children:x==="register"?"Join our platform":"Sign in to your account"})]}),o.jsxs("div",{className:"p-8",children:[o.jsxs("form",{onSubmit:x==="register"?S:N,className:"space-y-5",children:[x==="register"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Username"}),o.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl border border-gray-300 outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",value:d,onChange:E=>f(E.target.value),placeholder:"Your username",required:!0,minLength:3})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Role"}),o.jsxs("select",{className:"w-full px-4 py-3 rounded-xl border border-gray-300 outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",value:h,onChange:E=>m(E.target.value),required:!0,children:[o.jsx("option",{value:"Admin",children:"Admin"}),o.jsx("option",{value:"Owner",children:"Owner"}),o.jsx("option",{value:"Sales",children:"Sales"}),o.jsx("option",{value:"Finance",children:"Finance"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Email"}),o.jsx("input",{type:"email",className:"w-full px-4 py-3 rounded-xl border border-gray-300 outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",value:a,onChange:E=>l(E.target.value),placeholder:"your@email.com",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Password"}),o.jsx("input",{type:"password",className:"w-full px-4 py-3 rounded-xl border border-gray-300 outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",value:c,onChange:E=>u(E.target.value),placeholder:"",required:!0,minLength:6})]}),y&&o.jsxs("div",{className:"p-3 bg-red-50 text-red-600 text-sm rounded-lg flex items-start gap-2",children:[o.jsx(mo,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),y]}),o.jsx("button",{type:"submit",disabled:b,className:`w-full text-white font-bold py-3.5 rounded-xl shadow-lg transition-all hover:shadow-xl ${x==="register"?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"} disabled:opacity-70`,children:b?o.jsx(Ft,{className:"w-5 h-5 animate-spin mx-auto"}):x==="register"?"Create Account":"Sign In"})]}),o.jsxs("div",{className:"mt-6 space-y-2",children:[x==="login"&&o.jsx("button",{type:"button",onClick:()=>{w("register"),g("")},className:"block w-full text-sm text-blue-600 hover:text-blue-700 font-medium",children:"New user? Create an account"}),x==="register"&&o.jsxs("button",{type:"button",onClick:()=>{w("login"),g("")},className:"block w-full text-sm text-blue-600 hover:text-blue-700 font-medium flex items-center justify-center gap-1",children:[o.jsx(G_,{className:"w-4 h-4"})," Already have an account? Sign in"]})]})]})]})})}const coe=t=>{switch(t){case"lead_assigned":return{icon:hi,color:"blue",label:"New Lead"};case"stale_lead_reminder":return{icon:os,color:"amber",label:"Follow-up"};case"stale_lead_escalation":return{icon:ha,color:"red",label:"Escalation"};case"site_visit_reminder":return{icon:on,color:"green",label:"Site Visit"};default:return{icon:go,color:"gray",label:"Notification"}}},uoe=t=>{if(!t)return"";const e=t.toDate?t.toDate():new Date(t),r=new Date-e,i=Math.floor(r/6e4),s=Math.floor(r/36e5),a=Math.floor(r/864e5);return i<1?"Just now":i<60?`${i}m ago`:s<24?`${s}h ago`:a<7?`${a}d ago`:e.toLocaleDateString()};function Kj({notifications:t=[],onMarkRead:e,onMarkAllRead:n,onDelete:r,onNotificationClick:i,currentUser:s}){const[a,l]=k.useState(!1),c=k.useRef(null),u=t,d=u.filter(m=>!m.read).length;k.useEffect(()=>{const m=y=>{c.current&&!c.current.contains(y.target)&&l(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const f=m=>{m.read||e==null||e(m.id),i==null||i(m),l(!1)},h=m=>{m.stopPropagation(),n==null||n()};return o.jsxs("div",{className:"relative",ref:c,children:[o.jsxs("button",{onClick:()=>l(!a),className:`relative p-2 rounded-full transition-all ${a?"bg-blue-100 text-blue-600":"hover:bg-gray-100 text-gray-600"}`,children:[o.jsx(go,{className:"w-5 h-5"}),d>0&&o.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full border-2 border-white animate-pulse"})]}),a&&o.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-xl shadow-xl border border-gray-200 z-50 overflow-hidden animate-scale-in origin-top-right",children:[o.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 flex items-center justify-between bg-gray-50/50 backdrop-blur-sm",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900",children:"Notifications"}),o.jsx("p",{className:"text-xs text-gray-500",children:d>0?`${d} unread`:"All caught up"})]}),d>0&&o.jsxs("button",{onClick:h,className:"text-sm text-blue-500 hover:text-blue-700 hover:underline font-medium flex items-center gap-1 transition-colors",children:[o.jsx(HB,{className:"w-3.5 h-3.5"}),"Mark all read"]})]}),o.jsx("div",{className:"max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-gray-200 scrollbar-track-transparent",children:u.length===0?o.jsxs("div",{className:"p-8 text-center text-gray-400 flex flex-col items-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center mb-3",children:o.jsx(go,{className:"w-8 h-8 opacity-20"})}),o.jsx("p",{className:"font-medium text-gray-900",children:"No notifications"}),o.jsx("p",{className:"text-xs mt-1",children:"You're all caught up!"})]}):o.jsx("div",{className:"divide-y divide-gray-50",children:u.map(m=>{const y=coe(m.type),g=y.icon;return o.jsxs("div",{onClick:()=>f(m),className:`relative px-4 py-3 cursor-pointer transition-all duration-300 hover:bg-gray-50 group ${m.read?"opacity-60 hover:opacity-100":"bg-yellow-50"}`,children:[!m.read&&o.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-yellow-400"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:`w-10 h-10 rounded-full bg-${y.color}-100 flex items-center justify-center flex-shrink-0 mt-0.5`,children:o.jsx(g,{className:`w-5 h-5 text-${y.color}-600`})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex justify-between items-start gap-2",children:[o.jsx("p",{className:`text-sm leading-snug ${m.read?"text-gray-700":"font-semibold text-gray-900"}`,children:m.message}),o.jsx("span",{className:"text-[10px] text-gray-400 whitespace-nowrap flex-shrink-0",children:uoe(m.createdAt)})]}),o.jsx("div",{className:"flex items-center gap-2 mt-1.5",children:o.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full bg-${y.color}-50 text-${y.color}-700 font-medium border border-${y.color}-100`,children:y.label})})]})]})]},m.id)})})})]})]})}function Yj({compact:t=!1}){const{language:e,toggleLanguage:n}=ti(),r=e==="ur";return t?o.jsxs("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors flex items-center gap-1",title:r?"Switch to English":"  ",children:[o.jsx(ZB,{className:"w-5 h-5 text-gray-600"}),o.jsx("span",{className:"text-xs font-bold text-gray-600",children:r?"EN":"UR"})]}):o.jsx("button",{onClick:n,className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 rounded-full transition-all",title:r?"Switch to English":"  ",children:o.jsxs("div",{className:"relative flex items-center bg-white rounded-full p-0.5 shadow-inner",children:[o.jsx("div",{className:`absolute h-6 w-8 bg-blue-500 rounded-full transition-transform duration-200 ${r?"translate-x-8":"translate-x-0"}`}),o.jsx("span",{className:`relative z-10 px-2 py-0.5 text-xs font-bold rounded-full transition-colors ${r?"text-gray-500":"text-white"}`,children:"EN"}),o.jsx("span",{className:`relative z-10 px-2 py-0.5 text-xs font-bold rounded-full transition-colors ${r?"text-white":"text-gray-500"}`,style:{fontFamily:"Noto Nastaliq Urdu, serif"},children:""})]})})}const doe="modulepreload",foe=function(t){return"/"+t},Xj={},hoe=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=foe(c),c in Xj)return;Xj[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":doe,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function poe(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:a}=t;let l,c;const u=async(f=!0)=>{await c};async function d(){if("serviceWorker"in navigator){if(l=await hoe(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-vqzQaGvo.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/sw.js",{scope:"/",type:"classic"})).catch(f=>{a==null||a(f)}),!l)return;l.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),l.addEventListener("installed",f=>{f.isUpdate||r==null||r()}),l.register({immediate:e}).then(f=>{s?s("/sw.js",f):i==null||i(f)}).catch(f=>{a==null||a(f)})}}return c=d(),u}function moe(t={}){const{immediate:e=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:a}=t,[l,c]=k.useState(!1),[u,d]=k.useState(!1),[f]=k.useState(()=>poe({immediate:e,onOfflineReady(){d(!0),r==null||r()},onNeedRefresh(){c(!0),n==null||n()},onRegistered:i,onRegisteredSW:s,onRegisterError:a}));return{needRefresh:[l,c],offlineReady:[u,d],updateServiceWorker:f}}function goe(){const[t,e]=k.useState(!1),{needRefresh:[n,r],updateServiceWorker:i}=moe({onRegisteredSW(l,c){console.log("SW Registered:",l),c&&setInterval(()=>{c.update()},60*60*1e3)},onRegisterError(l){console.error("SW registration error",l)}});k.useEffect(()=>{n&&e(!0)},[n]);const s=()=>{i(!0)},a=()=>{e(!1),r(!1)};return t?o.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 z-50",children:o.jsxs("div",{className:"bg-emerald-600 text-white rounded-lg shadow-lg p-4 flex items-center gap-3",children:[o.jsx(vo,{className:"w-6 h-6 flex-shrink-0 animate-spin-slow"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-medium",children:"Update Available"}),o.jsx("p",{className:"text-sm text-emerald-100",children:"A new version is ready. Refresh to update."})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:s,className:"px-3 py-1.5 bg-white text-emerald-600 rounded font-medium hover:bg-emerald-50 transition-colors",children:"Update"}),o.jsx("button",{onClick:a,className:"p-1.5 hover:bg-emerald-500 rounded transition-colors",children:o.jsx(Dt,{className:"w-5 h-5"})})]})]})}):null}function yoe({monthName:t,events:e,onClose:n}){const r=k.useMemo(()=>[...e].sort((i,s)=>new Date(i.inquiryDate||i.eventDate)-new Date(s.inquiryDate||s.eventDate)),[e]);return o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[80] flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white w-full max-w-4xl h-[80vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-scale-in border border-gray-200",children:[o.jsxs("div",{className:"bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Booked Events: ",t]}),o.jsxs("p",{className:"text-sm text-gray-500",children:[r.length," confirmed bookings"]})]}),o.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-full",children:o.jsx(Dt,{className:"w-6 h-6 text-gray-500"})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50",children:[o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map((i,s)=>o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm hover:border-green-400 hover:shadow-md transition-all group relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-green-500"}),o.jsxs("div",{className:"flex justify-between items-start mb-3 pl-2",children:[o.jsx("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 text-[10px] font-bold rounded uppercase tracking-wide",children:i.eventType||"Event"}),o.jsx("span",{className:"text-xs font-medium text-gray-400",children:i.inquiryDate})]}),o.jsx("h4",{className:"font-bold text-gray-900 text-lg pl-2 mb-1",children:i.clientName}),o.jsxs("p",{className:"text-xs text-gray-500 pl-2 mb-4 flex items-center gap-1",children:[o.jsx(jb,{className:"w-3 h-3"})," ",i.manager]}),o.jsxs("div",{className:"flex justify-between items-center border-t border-gray-50 pt-3 pl-2",children:[o.jsx("span",{className:"font-bold text-green-700 text-sm",children:Oe(i.amount)}),o.jsxs("span",{className:"text-xs text-gray-400 bg-gray-100 px-2 py-1 rounded-full",children:[i.guests||0," Pax"]})]})]},s))}),r.length===0&&o.jsx("p",{className:"text-center text-gray-400 mt-10",children:"No confirmed bookings found."})]})]})})}const voe="",xoe=async t=>{var n,r,i,s,a;const e=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${voe}`;try{const l=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:t}]}]})});return l.ok?((a=(s=(i=(r=(n=(await l.json()).candidates)==null?void 0:n[0])==null?void 0:r.content)==null?void 0:i.parts)==null?void 0:s[0])==null?void 0:a.text)||"No response generated.":"I'm having trouble thinking right now. Please try again later."}catch(l){return console.error("Gemini API error:",l),"AI Service unavailable."}};function boe({stats:t,onClose:e}){const[n,r]=k.useState(""),[i,s]=k.useState(!0);return k.useEffect(()=>{(async()=>{const l=`
        Act as a Chief Revenue Officer. Analyze this data for "Area 51" Event Venue:
        - Total Revenue (Confirmed): ${Oe(t.totalRevenue)}
        - Potential Revenue (Pipeline): ${Oe(t.potentialRevenue)}
        - Conversion Rate: ${t.wonCount}/${t.total} leads
        - Monthly Trend Data: ${JSON.stringify(t.trendData.slice(-6))}

        Write a 3-paragraph executive summary:
        1. Financial Health Assessment
        2. Pipeline Opportunity Analysis
        3. One critical recommendation to increase revenue next month.

        Do not use markdown, just plain text paragraphs separated by newlines.
      `,c=await xoe(l);r(c),s(!1)})()},[t]),o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[90] flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-2xl animate-scale-in overflow-hidden",children:[o.jsxs("div",{className:"p-6 bg-gradient-to-r from-purple-600 to-indigo-600 text-white flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(dd,{className:"w-8 h-8 text-purple-200"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold",children:"AI Executive Report"}),o.jsx("p",{className:"text-purple-200 text-xs",children:"Generated by Gemini"})]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-full",children:o.jsx(Dt,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"p-8 min-h-[300px]",children:i?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-4 opacity-60",children:[o.jsx(Ft,{className:"w-10 h-10 text-purple-600 animate-spin"}),o.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Analyzing financial patterns..."})]}):o.jsx("div",{className:"prose prose-indigo text-gray-700 leading-relaxed whitespace-pre-wrap font-medium text-sm",children:n})})]})})}function aM(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=aM(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ie(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=aM(t))&&(r&&(r+=" "),r+=e);return r}var woe=Array.isArray,Zn=woe,_oe=typeof Fh=="object"&&Fh&&Fh.Object===Object&&Fh,oM=_oe,Soe=oM,Aoe=typeof self=="object"&&self&&self.Object===Object&&self,Noe=Soe||Aoe||Function("return this")(),Ti=Noe,Eoe=Ti,Coe=Eoe.Symbol,fh=Coe,Qj=fh,lM=Object.prototype,joe=lM.hasOwnProperty,Toe=lM.toString,Pu=Qj?Qj.toStringTag:void 0;function Poe(t){var e=joe.call(t,Pu),n=t[Pu];try{t[Pu]=void 0;var r=!0}catch{}var i=Toe.call(t);return r&&(e?t[Pu]=n:delete t[Pu]),i}var koe=Poe,Ioe=Object.prototype,Ooe=Ioe.toString;function Roe(t){return Ooe.call(t)}var $oe=Roe,Jj=fh,Doe=koe,Moe=$oe,Loe="[object Null]",Foe="[object Undefined]",Zj=Jj?Jj.toStringTag:void 0;function Voe(t){return t==null?t===void 0?Foe:Loe:Zj&&Zj in Object(t)?Doe(t):Moe(t)}var bs=Voe;function Boe(t){return t!=null&&typeof t=="object"}var ws=Boe,Uoe=bs,zoe=ws,qoe="[object Symbol]";function Woe(t){return typeof t=="symbol"||zoe(t)&&Uoe(t)==qoe}var Gc=Woe,Goe=Zn,Hoe=Gc,Koe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yoe=/^\w*$/;function Xoe(t,e){if(Goe(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Hoe(t)?!0:Yoe.test(t)||!Koe.test(t)||e!=null&&t in Object(e)}var oA=Xoe;function Qoe(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Na=Qoe;const Hc=rt(Na);var Joe=bs,Zoe=Na,ele="[object AsyncFunction]",tle="[object Function]",nle="[object GeneratorFunction]",rle="[object Proxy]";function ile(t){if(!Zoe(t))return!1;var e=Joe(t);return e==tle||e==nle||e==ele||e==rle}var lA=ile;const Ae=rt(lA);var sle=Ti,ale=sle["__core-js_shared__"],ole=ale,H0=ole,eT=function(){var t=/[^.]+$/.exec(H0&&H0.keys&&H0.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function lle(t){return!!eT&&eT in t}var cle=lle,ule=Function.prototype,dle=ule.toString;function fle(t){if(t!=null){try{return dle.call(t)}catch{}try{return t+""}catch{}}return""}var cM=fle,hle=lA,ple=cle,mle=Na,gle=cM,yle=/[\\^$.*+?()[\]{}|]/g,vle=/^\[object .+?Constructor\]$/,xle=Function.prototype,ble=Object.prototype,wle=xle.toString,_le=ble.hasOwnProperty,Sle=RegExp("^"+wle.call(_le).replace(yle,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ale(t){if(!mle(t)||ple(t))return!1;var e=hle(t)?Sle:vle;return e.test(gle(t))}var Nle=Ale;function Ele(t,e){return t==null?void 0:t[e]}var Cle=Ele,jle=Nle,Tle=Cle;function Ple(t,e){var n=Tle(t,e);return jle(n)?n:void 0}var Mo=Ple,kle=Mo,Ile=kle(Object,"create"),Yy=Ile,tT=Yy;function Ole(){this.__data__=tT?tT(null):{},this.size=0}var Rle=Ole;function $le(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Dle=$le,Mle=Yy,Lle="__lodash_hash_undefined__",Fle=Object.prototype,Vle=Fle.hasOwnProperty;function Ble(t){var e=this.__data__;if(Mle){var n=e[t];return n===Lle?void 0:n}return Vle.call(e,t)?e[t]:void 0}var Ule=Ble,zle=Yy,qle=Object.prototype,Wle=qle.hasOwnProperty;function Gle(t){var e=this.__data__;return zle?e[t]!==void 0:Wle.call(e,t)}var Hle=Gle,Kle=Yy,Yle="__lodash_hash_undefined__";function Xle(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Kle&&e===void 0?Yle:e,this}var Qle=Xle,Jle=Rle,Zle=Dle,ece=Ule,tce=Hle,nce=Qle;function Kc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Kc.prototype.clear=Jle;Kc.prototype.delete=Zle;Kc.prototype.get=ece;Kc.prototype.has=tce;Kc.prototype.set=nce;var rce=Kc;function ice(){this.__data__=[],this.size=0}var sce=ice;function ace(t,e){return t===e||t!==t&&e!==e}var cA=ace,oce=cA;function lce(t,e){for(var n=t.length;n--;)if(oce(t[n][0],e))return n;return-1}var Xy=lce,cce=Xy,uce=Array.prototype,dce=uce.splice;function fce(t){var e=this.__data__,n=cce(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():dce.call(e,n,1),--this.size,!0}var hce=fce,pce=Xy;function mce(t){var e=this.__data__,n=pce(e,t);return n<0?void 0:e[n][1]}var gce=mce,yce=Xy;function vce(t){return yce(this.__data__,t)>-1}var xce=vce,bce=Xy;function wce(t,e){var n=this.__data__,r=bce(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var _ce=wce,Sce=sce,Ace=hce,Nce=gce,Ece=xce,Cce=_ce;function Yc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Yc.prototype.clear=Sce;Yc.prototype.delete=Ace;Yc.prototype.get=Nce;Yc.prototype.has=Ece;Yc.prototype.set=Cce;var Qy=Yc,jce=Mo,Tce=Ti,Pce=jce(Tce,"Map"),uA=Pce,nT=rce,kce=Qy,Ice=uA;function Oce(){this.size=0,this.__data__={hash:new nT,map:new(Ice||kce),string:new nT}}var Rce=Oce;function $ce(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Dce=$ce,Mce=Dce;function Lce(t,e){var n=t.__data__;return Mce(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Jy=Lce,Fce=Jy;function Vce(t){var e=Fce(this,t).delete(t);return this.size-=e?1:0,e}var Bce=Vce,Uce=Jy;function zce(t){return Uce(this,t).get(t)}var qce=zce,Wce=Jy;function Gce(t){return Wce(this,t).has(t)}var Hce=Gce,Kce=Jy;function Yce(t,e){var n=Kce(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Xce=Yce,Qce=Rce,Jce=Bce,Zce=qce,eue=Hce,tue=Xce;function Xc(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Xc.prototype.clear=Qce;Xc.prototype.delete=Jce;Xc.prototype.get=Zce;Xc.prototype.has=eue;Xc.prototype.set=tue;var dA=Xc,uM=dA,nue="Expected a function";function fA(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(nue);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=t.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(fA.Cache||uM),n}fA.Cache=uM;var dM=fA;const rue=rt(dM);var iue=dM,sue=500;function aue(t){var e=iue(t,function(r){return n.size===sue&&n.clear(),r}),n=e.cache;return e}var oue=aue,lue=oue,cue=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,uue=/\\(\\)?/g,due=lue(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(cue,function(n,r,i,s){e.push(i?s.replace(uue,"$1"):r||n)}),e}),fue=due;function hue(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var hA=hue,rT=fh,pue=hA,mue=Zn,gue=Gc,iT=rT?rT.prototype:void 0,sT=iT?iT.toString:void 0;function fM(t){if(typeof t=="string")return t;if(mue(t))return pue(t,fM)+"";if(gue(t))return sT?sT.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var yue=fM,vue=yue;function xue(t){return t==null?"":vue(t)}var hM=xue,bue=Zn,wue=oA,_ue=fue,Sue=hM;function Aue(t,e){return bue(t)?t:wue(t,e)?[t]:_ue(Sue(t))}var pM=Aue,Nue=Gc;function Eue(t){if(typeof t=="string"||Nue(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Zy=Eue,Cue=pM,jue=Zy;function Tue(t,e){e=Cue(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[jue(e[n++])];return n&&n==r?t:void 0}var pA=Tue,Pue=pA;function kue(t,e,n){var r=t==null?void 0:Pue(t,e);return r===void 0?n:r}var mM=kue;const fr=rt(mM);function Iue(t){return t==null}var Oue=Iue;const ke=rt(Oue);var Rue=bs,$ue=Zn,Due=ws,Mue="[object String]";function Lue(t){return typeof t=="string"||!$ue(t)&&Due(t)&&Rue(t)==Mue}var Fue=Lue;const No=rt(Fue);var gM={exports:{}},it={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mA=Symbol.for("react.element"),gA=Symbol.for("react.portal"),ev=Symbol.for("react.fragment"),tv=Symbol.for("react.strict_mode"),nv=Symbol.for("react.profiler"),rv=Symbol.for("react.provider"),iv=Symbol.for("react.context"),Vue=Symbol.for("react.server_context"),sv=Symbol.for("react.forward_ref"),av=Symbol.for("react.suspense"),ov=Symbol.for("react.suspense_list"),lv=Symbol.for("react.memo"),cv=Symbol.for("react.lazy"),Bue=Symbol.for("react.offscreen"),yM;yM=Symbol.for("react.module.reference");function $r(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case mA:switch(t=t.type,t){case ev:case nv:case tv:case av:case ov:return t;default:switch(t=t&&t.$$typeof,t){case Vue:case iv:case sv:case cv:case lv:case rv:return t;default:return e}}case gA:return e}}}it.ContextConsumer=iv;it.ContextProvider=rv;it.Element=mA;it.ForwardRef=sv;it.Fragment=ev;it.Lazy=cv;it.Memo=lv;it.Portal=gA;it.Profiler=nv;it.StrictMode=tv;it.Suspense=av;it.SuspenseList=ov;it.isAsyncMode=function(){return!1};it.isConcurrentMode=function(){return!1};it.isContextConsumer=function(t){return $r(t)===iv};it.isContextProvider=function(t){return $r(t)===rv};it.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===mA};it.isForwardRef=function(t){return $r(t)===sv};it.isFragment=function(t){return $r(t)===ev};it.isLazy=function(t){return $r(t)===cv};it.isMemo=function(t){return $r(t)===lv};it.isPortal=function(t){return $r(t)===gA};it.isProfiler=function(t){return $r(t)===nv};it.isStrictMode=function(t){return $r(t)===tv};it.isSuspense=function(t){return $r(t)===av};it.isSuspenseList=function(t){return $r(t)===ov};it.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===ev||t===nv||t===tv||t===av||t===ov||t===Bue||typeof t=="object"&&t!==null&&(t.$$typeof===cv||t.$$typeof===lv||t.$$typeof===rv||t.$$typeof===iv||t.$$typeof===sv||t.$$typeof===yM||t.getModuleId!==void 0)};it.typeOf=$r;gM.exports=it;var Uue=gM.exports,zue=bs,que=ws,Wue="[object Number]";function Gue(t){return typeof t=="number"||que(t)&&zue(t)==Wue}var vM=Gue;const Hue=rt(vM);var Kue=vM;function Yue(t){return Kue(t)&&t!=+t}var Xue=Yue;const Qc=rt(Xue);var $n=function(e){return e===0?0:e>0?1:-1},Ka=function(e){return No(e)&&e.indexOf("%")===e.length-1},ne=function(e){return Hue(e)&&!Qc(e)},Que=function(e){return ke(e)},Jt=function(e){return ne(e)||No(e)},Jue=0,Jc=function(e){var n=++Jue;return"".concat(e||"").concat(n)},Dn=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ne(e)&&!No(e))return r;var s;if(Ka(e)){var a=e.indexOf("%");s=n*parseFloat(e.slice(0,a))/100}else s=+e;return Qc(s)&&(s=r),i&&s>n&&(s=n),s},Us=function(e){if(!e)return null;var n=Object.keys(e);return n&&n.length?e[n[0]]:null},Zue=function(e){if(!Array.isArray(e))return!1;for(var n=e.length,r={},i=0;i<n;i++)if(!r[e[i]])r[e[i]]=!0;else return!0;return!1},Wn=function(e,n){return ne(e)&&ne(n)?function(r){return e+r*(n-e)}:function(){return n}};function tg(t,e,n){return!t||!t.length?null:t.find(function(r){return r&&(typeof e=="function"?e(r):fr(r,e))===n})}var ede=function(e,n){return ne(e)&&ne(n)?e-n:No(e)&&No(n)?e.localeCompare(n):e instanceof Date&&n instanceof Date?e.getTime()-n.getTime():String(e).localeCompare(String(n))};function Dl(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function cw(t){"@babel/helpers - typeof";return cw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cw(t)}var tde=["viewBox","children"],nde=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],aT=["points","pathLength"],K0={svg:tde,polygon:aT,polyline:aT},yA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],ng=function(e,n){if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(k.isValidElement(e)&&(r=e.props),!Hc(r))return null;var i={};return Object.keys(r).forEach(function(s){yA.includes(s)&&(i[s]=n||function(a){return r[s](r,a)})}),i},rde=function(e,n,r){return function(i){return e(n,r,i),null}},Eo=function(e,n,r){if(!Hc(e)||cw(e)!=="object")return null;var i=null;return Object.keys(e).forEach(function(s){var a=e[s];yA.includes(s)&&typeof a=="function"&&(i||(i={}),i[s]=rde(a,n,r))}),i},ide=["children"],sde=["children"];function oT(t,e){if(t==null)return{};var n=ade(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ade(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function uw(t){"@babel/helpers - typeof";return uw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uw(t)}var lT={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ji=function(e){return typeof e=="string"?e:e?e.displayName||e.name||"Component":""},cT=null,Y0=null,vA=function t(e){if(e===cT&&Array.isArray(Y0))return Y0;var n=[];return k.Children.forEach(e,function(r){ke(r)||(Uue.isFragment(r)?n=n.concat(t(r.props.children)):n.push(r))}),Y0=n,cT=e,n};function Pr(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(function(i){return Ji(i)}):r=[Ji(e)],vA(t).forEach(function(i){var s=fr(i,"type.displayName")||fr(i,"type.name");r.indexOf(s)!==-1&&n.push(i)}),n}function rr(t,e){var n=Pr(t,e);return n&&n[0]}var uT=function(e){if(!e||!e.props)return!1;var n=e.props,r=n.width,i=n.height;return!(!ne(r)||r<=0||!ne(i)||i<=0)},ode=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],lde=function(e){return e&&e.type&&No(e.type)&&ode.indexOf(e.type)>=0},cde=function(e){return e&&uw(e)==="object"&&"clipDot"in e},ude=function(e,n,r,i){var s,a=(s=K0==null?void 0:K0[i])!==null&&s!==void 0?s:[];return n.startsWith("data-")||!Ae(e)&&(i&&a.includes(n)||nde.includes(n))||r&&yA.includes(n)},xe=function(e,n,r){if(!e||typeof e=="function"||typeof e=="boolean")return null;var i=e;if(k.isValidElement(e)&&(i=e.props),!Hc(i))return null;var s={};return Object.keys(i).forEach(function(a){var l;ude((l=i)===null||l===void 0?void 0:l[a],a,n,r)&&(s[a]=i[a])}),s},dw=function t(e,n){if(e===n)return!0;var r=k.Children.count(e);if(r!==k.Children.count(n))return!1;if(r===0)return!0;if(r===1)return dT(Array.isArray(e)?e[0]:e,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var s=e[i],a=n[i];if(Array.isArray(s)||Array.isArray(a)){if(!t(s,a))return!1}else if(!dT(s,a))return!1}return!0},dT=function(e,n){if(ke(e)&&ke(n))return!0;if(!ke(e)&&!ke(n)){var r=e.props||{},i=r.children,s=oT(r,ide),a=n.props||{},l=a.children,c=oT(a,sde);return i&&l?Dl(s,c)&&dw(i,l):!i&&!l?Dl(s,c):!1}return!1},fT=function(e,n){var r=[],i={};return vA(e).forEach(function(s,a){if(lde(s))r.push(s);else if(s){var l=Ji(s.type),c=n[l]||{},u=c.handler,d=c.once;if(u&&(!d||!i[l])){var f=u(s,l,a);r.push(f),i[l]=!0}}}),r},dde=function(e){var n=e&&e.type;return n&&lT[n]?lT[n]:null},fde=function(e,n){return vA(n).indexOf(e)},hde=["children","width","height","viewBox","className","style","title","desc"];function fw(){return fw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fw.apply(this,arguments)}function pde(t,e){if(t==null)return{};var n=mde(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function mde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function hw(t){var e=t.children,n=t.width,r=t.height,i=t.viewBox,s=t.className,a=t.style,l=t.title,c=t.desc,u=pde(t,hde),d=i||{width:n,height:r,x:0,y:0},f=Ie("recharts-surface",s);return L.createElement("svg",fw({},xe(u,!0,"svg"),{className:f,width:n,height:r,style:a,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),L.createElement("title",null,l),L.createElement("desc",null,c),e)}var gde=["children","className"];function pw(){return pw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pw.apply(this,arguments)}function yde(t,e){if(t==null)return{};var n=vde(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function vde(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var Ge=L.forwardRef(function(t,e){var n=t.children,r=t.className,i=yde(t,gde),s=Ie("recharts-layer",r);return L.createElement("g",pw({className:s},xe(i,!0),{ref:e}),n)}),Qr=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s]};function xde(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}var bde=xde,wde=bde;function _de(t,e,n){var r=t.length;return n=n===void 0?r:n,!e&&n>=r?t:wde(t,e,n)}var Sde=_de,Ade="\\ud800-\\udfff",Nde="\\u0300-\\u036f",Ede="\\ufe20-\\ufe2f",Cde="\\u20d0-\\u20ff",jde=Nde+Ede+Cde,Tde="\\ufe0e\\ufe0f",Pde="\\u200d",kde=RegExp("["+Pde+Ade+jde+Tde+"]");function Ide(t){return kde.test(t)}var xM=Ide;function Ode(t){return t.split("")}var Rde=Ode,bM="\\ud800-\\udfff",$de="\\u0300-\\u036f",Dde="\\ufe20-\\ufe2f",Mde="\\u20d0-\\u20ff",Lde=$de+Dde+Mde,Fde="\\ufe0e\\ufe0f",Vde="["+bM+"]",mw="["+Lde+"]",gw="\\ud83c[\\udffb-\\udfff]",Bde="(?:"+mw+"|"+gw+")",wM="[^"+bM+"]",_M="(?:\\ud83c[\\udde6-\\uddff]){2}",SM="[\\ud800-\\udbff][\\udc00-\\udfff]",Ude="\\u200d",AM=Bde+"?",NM="["+Fde+"]?",zde="(?:"+Ude+"(?:"+[wM,_M,SM].join("|")+")"+NM+AM+")*",qde=NM+AM+zde,Wde="(?:"+[wM+mw+"?",mw,_M,SM,Vde].join("|")+")",Gde=RegExp(gw+"(?="+gw+")|"+Wde+qde,"g");function Hde(t){return t.match(Gde)||[]}var Kde=Hde,Yde=Rde,Xde=xM,Qde=Kde;function Jde(t){return Xde(t)?Qde(t):Yde(t)}var Zde=Jde,efe=Sde,tfe=xM,nfe=Zde,rfe=hM;function ife(t){return function(e){e=rfe(e);var n=tfe(e)?nfe(e):void 0,r=n?n[0]:e.charAt(0),i=n?efe(n,1).join(""):e.slice(1);return r[t]()+i}}var sfe=ife,afe=sfe,ofe=afe("toUpperCase"),lfe=ofe;const uv=rt(lfe);function dt(t){return function(){return t}}const EM=Math.cos,rg=Math.sin,ni=Math.sqrt,ig=Math.PI,dv=2*ig,yw=Math.PI,vw=2*yw,Fa=1e-6,cfe=vw-Fa;function CM(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function ufe(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return CM;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class dfe{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?CM:ufe(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,l=this._y1,c=r-e,u=i-n,d=a-e,f=l-n,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(h>Fa)if(!(Math.abs(f*c-u*d)>Fa)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let m=r-a,y=i-l,g=c*c+u*u,x=m*m+y*y,w=Math.sqrt(g),b=Math.sqrt(h),v=s*Math.tan((yw-Math.acos((g+h-x)/(2*w*b)))/2),N=v/b,S=v/w;Math.abs(N-1)>Fa&&this._append`L${e+N*d},${n+N*f}`,this._append`A${s},${s},0,0,${+(f*m>d*y)},${this._x1=e+S*c},${this._y1=n+S*u}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let l=r*Math.cos(i),c=r*Math.sin(i),u=e+l,d=n+c,f=1^a,h=a?i-s:s-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Fa||Math.abs(this._y1-d)>Fa)&&this._append`L${u},${d}`,r&&(h<0&&(h=h%vw+vw),h>cfe?this._append`A${r},${r},0,1,${f},${e-l},${n-c}A${r},${r},0,1,${f},${this._x1=u},${this._y1=d}`:h>Fa&&this._append`A${r},${r},0,${+(h>=yw)},${f},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function xA(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new dfe(e)}function bA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function jM(t){this._context=t}jM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function fv(t){return new jM(t)}function TM(t){return t[0]}function PM(t){return t[1]}function kM(t,e){var n=dt(!0),r=null,i=fv,s=null,a=xA(l);t=typeof t=="function"?t:t===void 0?TM:dt(t),e=typeof e=="function"?e:e===void 0?PM:dt(e);function l(c){var u,d=(c=bA(c)).length,f,h=!1,m;for(r==null&&(s=i(m=a())),u=0;u<=d;++u)!(u<d&&n(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(f,u,c),+e(f,u,c));if(m)return s=null,m+""||null}return l.x=function(c){return arguments.length?(t=typeof c=="function"?c:dt(+c),l):t},l.y=function(c){return arguments.length?(e=typeof c=="function"?c:dt(+c),l):e},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:dt(!!c),l):n},l.curve=function(c){return arguments.length?(i=c,r!=null&&(s=i(r)),l):i},l.context=function(c){return arguments.length?(c==null?r=s=null:s=i(r=c),l):r},l}function hp(t,e,n){var r=null,i=dt(!0),s=null,a=fv,l=null,c=xA(u);t=typeof t=="function"?t:t===void 0?TM:dt(+t),e=typeof e=="function"?e:dt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?PM:dt(+n);function u(f){var h,m,y,g=(f=bA(f)).length,x,w=!1,b,v=new Array(g),N=new Array(g);for(s==null&&(l=a(b=c())),h=0;h<=g;++h){if(!(h<g&&i(x=f[h],h,f))===w)if(w=!w)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=h-1;y>=m;--y)l.point(v[y],N[y]);l.lineEnd(),l.areaEnd()}w&&(v[h]=+t(x,h,f),N[h]=+e(x,h,f),l.point(r?+r(x,h,f):v[h],n?+n(x,h,f):N[h]))}if(b)return l=null,b+""||null}function d(){return kM().defined(i).curve(a).context(s)}return u.x=function(f){return arguments.length?(t=typeof f=="function"?f:dt(+f),r=null,u):t},u.x0=function(f){return arguments.length?(t=typeof f=="function"?f:dt(+f),u):t},u.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:dt(+f),u):r},u.y=function(f){return arguments.length?(e=typeof f=="function"?f:dt(+f),n=null,u):e},u.y0=function(f){return arguments.length?(e=typeof f=="function"?f:dt(+f),u):e},u.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:dt(+f),u):n},u.lineX0=u.lineY0=function(){return d().x(t).y(e)},u.lineY1=function(){return d().x(t).y(n)},u.lineX1=function(){return d().x(r).y(e)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:dt(!!f),u):i},u.curve=function(f){return arguments.length?(a=f,s!=null&&(l=a(s)),u):a},u.context=function(f){return arguments.length?(f==null?s=l=null:l=a(s=f),u):s},u}class IM{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function ffe(t){return new IM(t,!0)}function hfe(t){return new IM(t,!1)}const wA={draw(t,e){const n=ni(e/ig);t.moveTo(n,0),t.arc(0,0,n,0,dv)}},pfe={draw(t,e){const n=ni(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},OM=ni(1/3),mfe=OM*2,gfe={draw(t,e){const n=ni(e/mfe),r=n*OM;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},yfe={draw(t,e){const n=ni(e),r=-n/2;t.rect(r,r,n,n)}},vfe=.8908130915292852,RM=rg(ig/10)/rg(7*ig/10),xfe=rg(dv/10)*RM,bfe=-EM(dv/10)*RM,wfe={draw(t,e){const n=ni(e*vfe),r=xfe*n,i=bfe*n;t.moveTo(0,-n),t.lineTo(r,i);for(let s=1;s<5;++s){const a=dv*s/5,l=EM(a),c=rg(a);t.lineTo(c*n,-l*n),t.lineTo(l*r-c*i,c*r+l*i)}t.closePath()}},X0=ni(3),_fe={draw(t,e){const n=-ni(e/(X0*3));t.moveTo(0,n*2),t.lineTo(-X0*n,-n),t.lineTo(X0*n,-n),t.closePath()}},vr=-.5,xr=ni(3)/2,xw=1/ni(12),Sfe=(xw/2+1)*3,Afe={draw(t,e){const n=ni(e/Sfe),r=n/2,i=n*xw,s=r,a=n*xw+n,l=-s,c=a;t.moveTo(r,i),t.lineTo(s,a),t.lineTo(l,c),t.lineTo(vr*r-xr*i,xr*r+vr*i),t.lineTo(vr*s-xr*a,xr*s+vr*a),t.lineTo(vr*l-xr*c,xr*l+vr*c),t.lineTo(vr*r+xr*i,vr*i-xr*r),t.lineTo(vr*s+xr*a,vr*a-xr*s),t.lineTo(vr*l+xr*c,vr*c-xr*l),t.closePath()}};function Nfe(t,e){let n=null,r=xA(i);t=typeof t=="function"?t:dt(t||wA),e=typeof e=="function"?e:dt(e===void 0?64:+e);function i(){let s;if(n||(n=s=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(t=typeof s=="function"?s:dt(s),i):t},i.size=function(s){return arguments.length?(e=typeof s=="function"?s:dt(+s),i):e},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function sg(){}function ag(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function $M(t){this._context=t}$M.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ag(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ag(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Efe(t){return new $M(t)}function DM(t){this._context=t}DM.prototype={areaStart:sg,areaEnd:sg,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ag(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Cfe(t){return new DM(t)}function MM(t){this._context=t}MM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:ag(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function jfe(t){return new MM(t)}function LM(t){this._context=t}LM.prototype={areaStart:sg,areaEnd:sg,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Tfe(t){return new LM(t)}function hT(t){return t<0?-1:1}function pT(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),l=(s*i+a*r)/(r+i);return(hT(s)+hT(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(l))||0}function mT(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Q0(t,e,n){var r=t._x0,i=t._y0,s=t._x1,a=t._y1,l=(s-r)/3;t._context.bezierCurveTo(r+l,i+l*e,s-l,a-l*n,s,a)}function og(t){this._context=t}og.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Q0(this,this._t0,mT(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Q0(this,mT(this,n=pT(this,t,e)),n);break;default:Q0(this,this._t0,n=pT(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function FM(t){this._context=new VM(t)}(FM.prototype=Object.create(og.prototype)).point=function(t,e){og.prototype.point.call(this,e,t)};function VM(t){this._context=t}VM.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function Pfe(t){return new og(t)}function kfe(t){return new FM(t)}function BM(t){this._context=t}BM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=gT(t),i=gT(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function gT(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),a=new Array(n);for(i[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,a[e]-=r*a[e-1];for(i[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(a[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function Ife(t){return new BM(t)}function hv(t,e){this._context=t,this._t=e}hv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function Ofe(t){return new hv(t,.5)}function Rfe(t){return new hv(t,0)}function $fe(t){return new hv(t,1)}function ic(t,e){if((a=t.length)>1)for(var n=1,r,i,s=t[e[0]],a,l=s.length;n<a;++n)for(i=s,s=t[e[n]],r=0;r<l;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function bw(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Dfe(t,e){return t[e]}function Mfe(t){const e=[];return e.key=t,e}function Lfe(){var t=dt([]),e=bw,n=ic,r=Dfe;function i(s){var a=Array.from(t.apply(this,arguments),Mfe),l,c=a.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(a[l][u]=[0,+r(f,a[l].key,u,s)]).data=f;for(l=0,d=bA(e(a));l<c;++l)a[d[l]].index=l;return n(a,d),a}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:dt(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:dt(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?bw:typeof s=="function"?s:dt(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??ic,i):n},i}function Ffe(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,a;i<s;++i){for(a=n=0;n<r;++n)a+=t[n][i][1]||0;if(a)for(n=0;n<r;++n)t[n][i][1]/=a}ic(t,e)}}function Vfe(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var a=0,l=0;a<i;++a)l+=t[a][n][1]||0;r[n][1]+=r[n][0]=-l/2}ic(t,e)}}function Bfe(t,e){if(!(!((a=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,a;r<s;++r){for(var l=0,c=0,u=0;l<a;++l){for(var d=t[e[l]],f=d[r][1]||0,h=d[r-1][1]||0,m=(f-h)/2,y=0;y<l;++y){var g=t[e[y]],x=g[r][1]||0,w=g[r-1][1]||0;m+=x-w}c+=f,u+=m*f}i[r-1][1]+=i[r-1][0]=n,c&&(n-=u/c)}i[r-1][1]+=i[r-1][0]=n,ic(t,e)}}function lf(t){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lf(t)}var Ufe=["type","size","sizeType"];function ww(){return ww=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ww.apply(this,arguments)}function yT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yT(Object(n),!0).forEach(function(r){zfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zfe(t,e,n){return e=qfe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qfe(t){var e=Wfe(t,"string");return lf(e)=="symbol"?e:e+""}function Wfe(t,e){if(lf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Gfe(t,e){if(t==null)return{};var n=Hfe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Hfe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var UM={symbolCircle:wA,symbolCross:pfe,symbolDiamond:gfe,symbolSquare:yfe,symbolStar:wfe,symbolTriangle:_fe,symbolWye:Afe},Kfe=Math.PI/180,Yfe=function(e){var n="symbol".concat(uv(e));return UM[n]||wA},Xfe=function(e,n,r){if(n==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var i=18*Kfe;return 1.25*e*e*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Qfe=function(e,n){UM["symbol".concat(uv(e))]=n},_A=function(e){var n=e.type,r=n===void 0?"circle":n,i=e.size,s=i===void 0?64:i,a=e.sizeType,l=a===void 0?"area":a,c=Gfe(e,Ufe),u=vT(vT({},c),{},{type:r,size:s,sizeType:l}),d=function(){var x=Yfe(r),w=Nfe().type(x).size(Xfe(s,l,r));return w()},f=u.className,h=u.cx,m=u.cy,y=xe(u,!0);return h===+h&&m===+m&&s===+s?L.createElement("path",ww({},y,{className:Ie("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:d()})):null};_A.registerSymbol=Qfe;function sc(t){"@babel/helpers - typeof";return sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sc(t)}function _w(){return _w=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_w.apply(this,arguments)}function xT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Jfe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xT(Object(n),!0).forEach(function(r){cf(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zfe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ehe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qM(r.key),r)}}function the(t,e,n){return e&&ehe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function nhe(t,e,n){return e=lg(e),rhe(t,zM()?Reflect.construct(e,n||[],lg(t).constructor):e.apply(t,n))}function rhe(t,e){if(e&&(sc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ihe(t)}function ihe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zM=function(){return!!t})()}function lg(t){return lg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lg(t)}function she(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sw(t,e)}function Sw(t,e){return Sw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Sw(t,e)}function cf(t,e,n){return e=qM(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qM(t){var e=ahe(t,"string");return sc(e)=="symbol"?e:e+""}function ahe(t,e){if(sc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var br=32,SA=function(t){function e(){return Zfe(this,e),nhe(this,e,arguments)}return she(e,t),the(e,[{key:"renderIcon",value:function(r){var i=this.props.inactiveColor,s=br/2,a=br/6,l=br/3,c=r.inactive?i:r.color;if(r.type==="plainline")return L.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:s,x2:br,y2:s,className:"recharts-legend-icon"});if(r.type==="line")return L.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(br,"M").concat(2*l,",").concat(s,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(r.type==="rect")return L.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(br/8,"h").concat(br,"v").concat(br*3/4,"h").concat(-br,"z"),className:"recharts-legend-icon"});if(L.isValidElement(r.legendIcon)){var u=Jfe({},r);return delete u.legendIcon,L.cloneElement(r.legendIcon,u)}return L.createElement(_A,{fill:c,cx:s,cy:s,size:br,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,i=this.props,s=i.payload,a=i.iconSize,l=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:br,height:br},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(m,y){var g=m.formatter||c,x=Ie(cf(cf({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",m.inactive));if(m.type==="none")return null;var w=Ae(m.value)?null:m.value;Qr(!Ae(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=m.inactive?u:m.color;return L.createElement("li",_w({className:x,style:f,key:"legend-item-".concat(y)},Eo(r.props,m,y)),L.createElement(hw,{width:a,height:a,viewBox:d,style:h},r.renderIcon(m)),L.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},g?g(w,m,y):w))})}},{key:"render",value:function(){var r=this.props,i=r.payload,s=r.layout,a=r.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?a:"left"};return L.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(k.PureComponent);cf(SA,"displayName","Legend");cf(SA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var ohe=Qy;function lhe(){this.__data__=new ohe,this.size=0}var che=lhe;function uhe(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var dhe=uhe;function fhe(t){return this.__data__.get(t)}var hhe=fhe;function phe(t){return this.__data__.has(t)}var mhe=phe,ghe=Qy,yhe=uA,vhe=dA,xhe=200;function bhe(t,e){var n=this.__data__;if(n instanceof ghe){var r=n.__data__;if(!yhe||r.length<xhe-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new vhe(r)}return n.set(t,e),this.size=n.size,this}var whe=bhe,_he=Qy,She=che,Ahe=dhe,Nhe=hhe,Ehe=mhe,Che=whe;function Zc(t){var e=this.__data__=new _he(t);this.size=e.size}Zc.prototype.clear=She;Zc.prototype.delete=Ahe;Zc.prototype.get=Nhe;Zc.prototype.has=Ehe;Zc.prototype.set=Che;var WM=Zc,jhe="__lodash_hash_undefined__";function The(t){return this.__data__.set(t,jhe),this}var Phe=The;function khe(t){return this.__data__.has(t)}var Ihe=khe,Ohe=dA,Rhe=Phe,$he=Ihe;function cg(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Ohe;++e<n;)this.add(t[e])}cg.prototype.add=cg.prototype.push=Rhe;cg.prototype.has=$he;var GM=cg;function Dhe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var HM=Dhe;function Mhe(t,e){return t.has(e)}var KM=Mhe,Lhe=GM,Fhe=HM,Vhe=KM,Bhe=1,Uhe=2;function zhe(t,e,n,r,i,s){var a=n&Bhe,l=t.length,c=e.length;if(l!=c&&!(a&&c>l))return!1;var u=s.get(t),d=s.get(e);if(u&&d)return u==e&&d==t;var f=-1,h=!0,m=n&Uhe?new Lhe:void 0;for(s.set(t,e),s.set(e,t);++f<l;){var y=t[f],g=e[f];if(r)var x=a?r(g,y,f,e,t,s):r(y,g,f,t,e,s);if(x!==void 0){if(x)continue;h=!1;break}if(m){if(!Fhe(e,function(w,b){if(!Vhe(m,b)&&(y===w||i(y,w,n,r,s)))return m.push(b)})){h=!1;break}}else if(!(y===g||i(y,g,n,r,s))){h=!1;break}}return s.delete(t),s.delete(e),h}var YM=zhe,qhe=Ti,Whe=qhe.Uint8Array,Ghe=Whe;function Hhe(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}var Khe=Hhe;function Yhe(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var AA=Yhe,bT=fh,wT=Ghe,Xhe=cA,Qhe=YM,Jhe=Khe,Zhe=AA,epe=1,tpe=2,npe="[object Boolean]",rpe="[object Date]",ipe="[object Error]",spe="[object Map]",ape="[object Number]",ope="[object RegExp]",lpe="[object Set]",cpe="[object String]",upe="[object Symbol]",dpe="[object ArrayBuffer]",fpe="[object DataView]",_T=bT?bT.prototype:void 0,J0=_T?_T.valueOf:void 0;function hpe(t,e,n,r,i,s,a){switch(n){case fpe:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case dpe:return!(t.byteLength!=e.byteLength||!s(new wT(t),new wT(e)));case npe:case rpe:case ape:return Xhe(+t,+e);case ipe:return t.name==e.name&&t.message==e.message;case ope:case cpe:return t==e+"";case spe:var l=Jhe;case lpe:var c=r&epe;if(l||(l=Zhe),t.size!=e.size&&!c)return!1;var u=a.get(t);if(u)return u==e;r|=tpe,a.set(t,e);var d=Qhe(l(t),l(e),r,i,s,a);return a.delete(t),d;case upe:if(J0)return J0.call(t)==J0.call(e)}return!1}var ppe=hpe;function mpe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var XM=mpe,gpe=XM,ype=Zn;function vpe(t,e,n){var r=e(t);return ype(t)?r:gpe(r,n(t))}var xpe=vpe;function bpe(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var a=t[n];e(a,n,t)&&(s[i++]=a)}return s}var wpe=bpe;function _pe(){return[]}var Spe=_pe,Ape=wpe,Npe=Spe,Epe=Object.prototype,Cpe=Epe.propertyIsEnumerable,ST=Object.getOwnPropertySymbols,jpe=ST?function(t){return t==null?[]:(t=Object(t),Ape(ST(t),function(e){return Cpe.call(t,e)}))}:Npe,Tpe=jpe;function Ppe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var kpe=Ppe,Ipe=bs,Ope=ws,Rpe="[object Arguments]";function $pe(t){return Ope(t)&&Ipe(t)==Rpe}var Dpe=$pe,AT=Dpe,Mpe=ws,QM=Object.prototype,Lpe=QM.hasOwnProperty,Fpe=QM.propertyIsEnumerable,Vpe=AT(function(){return arguments}())?AT:function(t){return Mpe(t)&&Lpe.call(t,"callee")&&!Fpe.call(t,"callee")},NA=Vpe,ug={exports:{}};function Bpe(){return!1}var Upe=Bpe;ug.exports;(function(t,e){var n=Ti,r=Upe,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,l=a?n.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;t.exports=u})(ug,ug.exports);var JM=ug.exports,zpe=9007199254740991,qpe=/^(?:0|[1-9]\d*)$/;function Wpe(t,e){var n=typeof t;return e=e??zpe,!!e&&(n=="number"||n!="symbol"&&qpe.test(t))&&t>-1&&t%1==0&&t<e}var EA=Wpe,Gpe=9007199254740991;function Hpe(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Gpe}var CA=Hpe,Kpe=bs,Ype=CA,Xpe=ws,Qpe="[object Arguments]",Jpe="[object Array]",Zpe="[object Boolean]",eme="[object Date]",tme="[object Error]",nme="[object Function]",rme="[object Map]",ime="[object Number]",sme="[object Object]",ame="[object RegExp]",ome="[object Set]",lme="[object String]",cme="[object WeakMap]",ume="[object ArrayBuffer]",dme="[object DataView]",fme="[object Float32Array]",hme="[object Float64Array]",pme="[object Int8Array]",mme="[object Int16Array]",gme="[object Int32Array]",yme="[object Uint8Array]",vme="[object Uint8ClampedArray]",xme="[object Uint16Array]",bme="[object Uint32Array]",yt={};yt[fme]=yt[hme]=yt[pme]=yt[mme]=yt[gme]=yt[yme]=yt[vme]=yt[xme]=yt[bme]=!0;yt[Qpe]=yt[Jpe]=yt[ume]=yt[Zpe]=yt[dme]=yt[eme]=yt[tme]=yt[nme]=yt[rme]=yt[ime]=yt[sme]=yt[ame]=yt[ome]=yt[lme]=yt[cme]=!1;function wme(t){return Xpe(t)&&Ype(t.length)&&!!yt[Kpe(t)]}var _me=wme;function Sme(t){return function(e){return t(e)}}var ZM=Sme,dg={exports:{}};dg.exports;(function(t,e){var n=oM,r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===r,a=s&&n.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}}();t.exports=l})(dg,dg.exports);var Ame=dg.exports,Nme=_me,Eme=ZM,NT=Ame,ET=NT&&NT.isTypedArray,Cme=ET?Eme(ET):Nme,eL=Cme,jme=kpe,Tme=NA,Pme=Zn,kme=JM,Ime=EA,Ome=eL,Rme=Object.prototype,$me=Rme.hasOwnProperty;function Dme(t,e){var n=Pme(t),r=!n&&Tme(t),i=!n&&!r&&kme(t),s=!n&&!r&&!i&&Ome(t),a=n||r||i||s,l=a?jme(t.length,String):[],c=l.length;for(var u in t)(e||$me.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Ime(u,c)))&&l.push(u);return l}var Mme=Dme,Lme=Object.prototype;function Fme(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||Lme;return t===n}var Vme=Fme;function Bme(t,e){return function(n){return t(e(n))}}var tL=Bme,Ume=tL,zme=Ume(Object.keys,Object),qme=zme,Wme=Vme,Gme=qme,Hme=Object.prototype,Kme=Hme.hasOwnProperty;function Yme(t){if(!Wme(t))return Gme(t);var e=[];for(var n in Object(t))Kme.call(t,n)&&n!="constructor"&&e.push(n);return e}var Xme=Yme,Qme=lA,Jme=CA;function Zme(t){return t!=null&&Jme(t.length)&&!Qme(t)}var hh=Zme,ege=Mme,tge=Xme,nge=hh;function rge(t){return nge(t)?ege(t):tge(t)}var pv=rge,ige=xpe,sge=Tpe,age=pv;function oge(t){return ige(t,age,sge)}var lge=oge,CT=lge,cge=1,uge=Object.prototype,dge=uge.hasOwnProperty;function fge(t,e,n,r,i,s){var a=n&cge,l=CT(t),c=l.length,u=CT(e),d=u.length;if(c!=d&&!a)return!1;for(var f=c;f--;){var h=l[f];if(!(a?h in e:dge.call(e,h)))return!1}var m=s.get(t),y=s.get(e);if(m&&y)return m==e&&y==t;var g=!0;s.set(t,e),s.set(e,t);for(var x=a;++f<c;){h=l[f];var w=t[h],b=e[h];if(r)var v=a?r(b,w,h,e,t,s):r(w,b,h,t,e,s);if(!(v===void 0?w===b||i(w,b,n,r,s):v)){g=!1;break}x||(x=h=="constructor")}if(g&&!x){var N=t.constructor,S=e.constructor;N!=S&&"constructor"in t&&"constructor"in e&&!(typeof N=="function"&&N instanceof N&&typeof S=="function"&&S instanceof S)&&(g=!1)}return s.delete(t),s.delete(e),g}var hge=fge,pge=Mo,mge=Ti,gge=pge(mge,"DataView"),yge=gge,vge=Mo,xge=Ti,bge=vge(xge,"Promise"),wge=bge,_ge=Mo,Sge=Ti,Age=_ge(Sge,"Set"),nL=Age,Nge=Mo,Ege=Ti,Cge=Nge(Ege,"WeakMap"),jge=Cge,Aw=yge,Nw=uA,Ew=wge,Cw=nL,jw=jge,rL=bs,eu=cM,jT="[object Map]",Tge="[object Object]",TT="[object Promise]",PT="[object Set]",kT="[object WeakMap]",IT="[object DataView]",Pge=eu(Aw),kge=eu(Nw),Ige=eu(Ew),Oge=eu(Cw),Rge=eu(jw),Va=rL;(Aw&&Va(new Aw(new ArrayBuffer(1)))!=IT||Nw&&Va(new Nw)!=jT||Ew&&Va(Ew.resolve())!=TT||Cw&&Va(new Cw)!=PT||jw&&Va(new jw)!=kT)&&(Va=function(t){var e=rL(t),n=e==Tge?t.constructor:void 0,r=n?eu(n):"";if(r)switch(r){case Pge:return IT;case kge:return jT;case Ige:return TT;case Oge:return PT;case Rge:return kT}return e});var $ge=Va,Z0=WM,Dge=YM,Mge=ppe,Lge=hge,OT=$ge,RT=Zn,$T=JM,Fge=eL,Vge=1,DT="[object Arguments]",MT="[object Array]",pp="[object Object]",Bge=Object.prototype,LT=Bge.hasOwnProperty;function Uge(t,e,n,r,i,s){var a=RT(t),l=RT(e),c=a?MT:OT(t),u=l?MT:OT(e);c=c==DT?pp:c,u=u==DT?pp:u;var d=c==pp,f=u==pp,h=c==u;if(h&&$T(t)){if(!$T(e))return!1;a=!0,d=!1}if(h&&!d)return s||(s=new Z0),a||Fge(t)?Dge(t,e,n,r,i,s):Mge(t,e,c,n,r,i,s);if(!(n&Vge)){var m=d&&LT.call(t,"__wrapped__"),y=f&&LT.call(e,"__wrapped__");if(m||y){var g=m?t.value():t,x=y?e.value():e;return s||(s=new Z0),i(g,x,n,r,s)}}return h?(s||(s=new Z0),Lge(t,e,n,r,i,s)):!1}var zge=Uge,qge=zge,FT=ws;function iL(t,e,n,r,i){return t===e?!0:t==null||e==null||!FT(t)&&!FT(e)?t!==t&&e!==e:qge(t,e,n,r,iL,i)}var jA=iL,Wge=WM,Gge=jA,Hge=1,Kge=2;function Yge(t,e,n,r){var i=n.length,s=i,a=!r;if(t==null)return!s;for(t=Object(t);i--;){var l=n[i];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<s;){l=n[i];var c=l[0],u=t[c],d=l[1];if(a&&l[2]){if(u===void 0&&!(c in t))return!1}else{var f=new Wge;if(r)var h=r(u,d,c,t,e,f);if(!(h===void 0?Gge(d,u,Hge|Kge,r,f):h))return!1}}return!0}var Xge=Yge,Qge=Na;function Jge(t){return t===t&&!Qge(t)}var sL=Jge,Zge=sL,eye=pv;function tye(t){for(var e=eye(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Zge(i)]}return e}var nye=tye;function rye(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}var aL=rye,iye=Xge,sye=nye,aye=aL;function oye(t){var e=sye(t);return e.length==1&&e[0][2]?aye(e[0][0],e[0][1]):function(n){return n===t||iye(n,t,e)}}var lye=oye;function cye(t,e){return t!=null&&e in Object(t)}var uye=cye,dye=pM,fye=NA,hye=Zn,pye=EA,mye=CA,gye=Zy;function yye(t,e,n){e=dye(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var a=gye(e[r]);if(!(s=t!=null&&n(t,a)))break;t=t[a]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&mye(i)&&pye(a,i)&&(hye(t)||fye(t)))}var vye=yye,xye=uye,bye=vye;function wye(t,e){return t!=null&&bye(t,e,xye)}var _ye=wye,Sye=jA,Aye=mM,Nye=_ye,Eye=oA,Cye=sL,jye=aL,Tye=Zy,Pye=1,kye=2;function Iye(t,e){return Eye(t)&&Cye(e)?jye(Tye(t),e):function(n){var r=Aye(n,t);return r===void 0&&r===e?Nye(n,t):Sye(e,r,Pye|kye)}}var Oye=Iye;function Rye(t){return t}var tu=Rye;function $ye(t){return function(e){return e==null?void 0:e[t]}}var Dye=$ye,Mye=pA;function Lye(t){return function(e){return Mye(e,t)}}var Fye=Lye,Vye=Dye,Bye=Fye,Uye=oA,zye=Zy;function qye(t){return Uye(t)?Vye(zye(t)):Bye(t)}var Wye=qye,Gye=lye,Hye=Oye,Kye=tu,Yye=Zn,Xye=Wye;function Qye(t){return typeof t=="function"?t:t==null?Kye:typeof t=="object"?Yye(t)?Hye(t[0],t[1]):Gye(t):Xye(t)}var Pi=Qye;function Jye(t,e,n,r){for(var i=t.length,s=n+(r?1:-1);r?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var oL=Jye;function Zye(t){return t!==t}var eve=Zye;function tve(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}var nve=tve,rve=oL,ive=eve,sve=nve;function ave(t,e,n){return e===e?sve(t,e,n):rve(t,ive,n)}var ove=ave,lve=ove;function cve(t,e){var n=t==null?0:t.length;return!!n&&lve(t,e,0)>-1}var uve=cve;function dve(t,e,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}var fve=dve;function hve(){}var pve=hve,ex=nL,mve=pve,gve=AA,yve=1/0,vve=ex&&1/gve(new ex([,-0]))[1]==yve?function(t){return new ex(t)}:mve,xve=vve,bve=GM,wve=uve,_ve=fve,Sve=KM,Ave=xve,Nve=AA,Eve=200;function Cve(t,e,n){var r=-1,i=wve,s=t.length,a=!0,l=[],c=l;if(n)a=!1,i=_ve;else if(s>=Eve){var u=e?null:Ave(t);if(u)return Nve(u);a=!1,i=Sve,c=new bve}else c=e?[]:l;e:for(;++r<s;){var d=t[r],f=e?e(d):d;if(d=n||d!==0?d:0,a&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;e&&c.push(f),l.push(d)}else i(c,f,n)||(c!==l&&c.push(f),l.push(d))}return l}var jve=Cve,Tve=Pi,Pve=jve;function kve(t,e){return t&&t.length?Pve(t,Tve(e)):[]}var Ive=kve;const VT=rt(Ive);function lL(t,e,n){return e===!0?VT(t,n):Ae(e)?VT(t,e):t}function ac(t){"@babel/helpers - typeof";return ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ac(t)}var Ove=["ref"];function BT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $i(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BT(Object(n),!0).forEach(function(r){mv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rve(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function UT(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,uL(r.key),r)}}function $ve(t,e,n){return e&&UT(t.prototype,e),n&&UT(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dve(t,e,n){return e=fg(e),Mve(t,cL()?Reflect.construct(e,n||[],fg(t).constructor):e.apply(t,n))}function Mve(t,e){if(e&&(ac(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lve(t)}function Lve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cL=function(){return!!t})()}function fg(t){return fg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fg(t)}function Fve(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tw(t,e)}function Tw(t,e){return Tw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Tw(t,e)}function mv(t,e,n){return e=uL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uL(t){var e=Vve(t,"string");return ac(e)=="symbol"?e:e+""}function Vve(t,e){if(ac(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ac(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Bve(t,e){if(t==null)return{};var n=Uve(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Uve(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function zve(t){return t.value}function qve(t,e){if(L.isValidElement(t))return L.cloneElement(t,e);if(typeof t=="function")return L.createElement(t,e);e.ref;var n=Bve(e,Ove);return L.createElement(SA,n)}var zT=1,ao=function(t){function e(){var n;Rve(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Dve(this,e,[].concat(i)),mv(n,"lastBoundingBox",{width:-1,height:-1}),n}return Fve(e,t),$ve(e,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>zT||Math.abs(i.height-this.lastBoundingBox.height)>zT)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,r&&r(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?$i({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var i=this.props,s=i.layout,a=i.align,l=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,f,h;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(a==="center"&&s==="vertical"){var m=this.getBBoxSnapshot();f={left:((u||0)-m.width)/2}}else f=a==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();h={top:((d||0)-y.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return $i($i({},f),h)}},{key:"render",value:function(){var r=this,i=this.props,s=i.content,a=i.width,l=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,f=$i($i({position:"absolute",width:a||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return L.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){r.wrapperNode=m}},qve(s,$i($i({},this.props),{},{payload:lL(d,u,zve)})))}}],[{key:"getWithHeight",value:function(r,i){var s=$i($i({},this.defaultProps),r.props),a=s.layout;return a==="vertical"&&ne(r.props.height)?{height:r.props.height}:a==="horizontal"?{width:r.props.width||i}:null}}])}(k.PureComponent);mv(ao,"displayName","Legend");mv(ao,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var qT=fh,Wve=NA,Gve=Zn,WT=qT?qT.isConcatSpreadable:void 0;function Hve(t){return Gve(t)||Wve(t)||!!(WT&&t&&t[WT])}var Kve=Hve,Yve=XM,Xve=Kve;function dL(t,e,n,r,i){var s=-1,a=t.length;for(n||(n=Xve),i||(i=[]);++s<a;){var l=t[s];e>0&&n(l)?e>1?dL(l,e-1,n,r,i):Yve(i,l):r||(i[i.length]=l)}return i}var fL=dL;function Qve(t){return function(e,n,r){for(var i=-1,s=Object(e),a=r(e),l=a.length;l--;){var c=a[t?l:++i];if(n(s[c],c,s)===!1)break}return e}}var Jve=Qve,Zve=Jve,e0e=Zve(),t0e=e0e,n0e=t0e,r0e=pv;function i0e(t,e){return t&&n0e(t,e,r0e)}var hL=i0e,s0e=hh;function a0e(t,e){return function(n,r){if(n==null)return n;if(!s0e(n))return t(n,r);for(var i=n.length,s=e?i:-1,a=Object(n);(e?s--:++s<i)&&r(a[s],s,a)!==!1;);return n}}var o0e=a0e,l0e=hL,c0e=o0e,u0e=c0e(l0e),TA=u0e,d0e=TA,f0e=hh;function h0e(t,e){var n=-1,r=f0e(t)?Array(t.length):[];return d0e(t,function(i,s,a){r[++n]=e(i,s,a)}),r}var pL=h0e;function p0e(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}var m0e=p0e,GT=Gc;function g0e(t,e){if(t!==e){var n=t!==void 0,r=t===null,i=t===t,s=GT(t),a=e!==void 0,l=e===null,c=e===e,u=GT(e);if(!l&&!u&&!s&&t>e||s&&a&&c&&!l&&!u||r&&a&&c||!n&&c||!i)return 1;if(!r&&!s&&!u&&t<e||u&&n&&i&&!r&&!s||l&&n&&i||!a&&i||!c)return-1}return 0}var y0e=g0e,v0e=y0e;function x0e(t,e,n){for(var r=-1,i=t.criteria,s=e.criteria,a=i.length,l=n.length;++r<a;){var c=v0e(i[r],s[r]);if(c){if(r>=l)return c;var u=n[r];return c*(u=="desc"?-1:1)}}return t.index-e.index}var b0e=x0e,tx=hA,w0e=pA,_0e=Pi,S0e=pL,A0e=m0e,N0e=ZM,E0e=b0e,C0e=tu,j0e=Zn;function T0e(t,e,n){e.length?e=tx(e,function(s){return j0e(s)?function(a){return w0e(a,s.length===1?s[0]:s)}:s}):e=[C0e];var r=-1;e=tx(e,N0e(_0e));var i=S0e(t,function(s,a,l){var c=tx(e,function(u){return u(s)});return{criteria:c,index:++r,value:s}});return A0e(i,function(s,a){return E0e(s,a,n)})}var P0e=T0e;function k0e(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var I0e=k0e,O0e=I0e,HT=Math.max;function R0e(t,e,n){return e=HT(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=HT(r.length-e,0),a=Array(s);++i<s;)a[i]=r[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=r[i];return l[e]=n(a),O0e(t,this,l)}}var $0e=R0e;function D0e(t){return function(){return t}}var M0e=D0e,L0e=Mo,F0e=function(){try{var t=L0e(Object,"defineProperty");return t({},"",{}),t}catch{}}(),mL=F0e,V0e=M0e,KT=mL,B0e=tu,U0e=KT?function(t,e){return KT(t,"toString",{configurable:!0,enumerable:!1,value:V0e(e),writable:!0})}:B0e,z0e=U0e,q0e=800,W0e=16,G0e=Date.now;function H0e(t){var e=0,n=0;return function(){var r=G0e(),i=W0e-(r-n);if(n=r,i>0){if(++e>=q0e)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var K0e=H0e,Y0e=z0e,X0e=K0e,Q0e=X0e(Y0e),J0e=Q0e,Z0e=tu,exe=$0e,txe=J0e;function nxe(t,e){return txe(exe(t,e,Z0e),t+"")}var rxe=nxe,ixe=cA,sxe=hh,axe=EA,oxe=Na;function lxe(t,e,n){if(!oxe(n))return!1;var r=typeof e;return(r=="number"?sxe(n)&&axe(e,n.length):r=="string"&&e in n)?ixe(n[e],t):!1}var gv=lxe,cxe=fL,uxe=P0e,dxe=rxe,YT=gv,fxe=dxe(function(t,e){if(t==null)return[];var n=e.length;return n>1&&YT(t,e[0],e[1])?e=[]:n>2&&YT(e[0],e[1],e[2])&&(e=[e[0]]),uxe(t,cxe(e,1),[])}),hxe=fxe;const PA=rt(hxe);function uf(t){"@babel/helpers - typeof";return uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uf(t)}function Pw(){return Pw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pw.apply(this,arguments)}function pxe(t,e){return vxe(t)||yxe(t,e)||gxe(t,e)||mxe()}function mxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gxe(t,e){if(t){if(typeof t=="string")return XT(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XT(t,e)}}function XT(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yxe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function vxe(t){if(Array.isArray(t))return t}function QT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QT(Object(n),!0).forEach(function(r){xxe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xxe(t,e,n){return e=bxe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bxe(t){var e=wxe(t,"string");return uf(e)=="symbol"?e:e+""}function wxe(t,e){if(uf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _xe(t){return Array.isArray(t)&&Jt(t[0])&&Jt(t[1])?t.join(" ~ "):t}var Sxe=function(e){var n=e.separator,r=n===void 0?" : ":n,i=e.contentStyle,s=i===void 0?{}:i,a=e.itemStyle,l=a===void 0?{}:a,c=e.labelStyle,u=c===void 0?{}:c,d=e.payload,f=e.formatter,h=e.itemSorter,m=e.wrapperClassName,y=e.labelClassName,g=e.label,x=e.labelFormatter,w=e.accessibilityLayer,b=w===void 0?!1:w,v=function(){if(d&&d.length){var O={padding:0,margin:0},R=(h?PA(d,h):d).map(function(M,D){if(M.type==="none")return null;var B=nx({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},l),U=M.formatter||f||_xe,V=M.value,W=M.name,H=V,te=W;if(U&&H!=null&&te!=null){var X=U(V,W,M,D,d);if(Array.isArray(X)){var ie=pxe(X,2);H=ie[0],te=ie[1]}else H=X}return L.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:B},Jt(te)?L.createElement("span",{className:"recharts-tooltip-item-name"},te):null,Jt(te)?L.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,L.createElement("span",{className:"recharts-tooltip-item-value"},H),L.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return L.createElement("ul",{className:"recharts-tooltip-item-list",style:O},R)}return null},N=nx({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),S=nx({margin:0},u),A=!ke(g),E=A?g:"",_=Ie("recharts-default-tooltip",m),C=Ie("recharts-tooltip-label",y);A&&x&&d!==void 0&&d!==null&&(E=x(g,d));var P=b?{role:"status","aria-live":"assertive"}:{};return L.createElement("div",Pw({className:_,style:N},P),L.createElement("p",{className:C,style:S},L.isValidElement(E)?E:"".concat(E)),v())};function df(t){"@babel/helpers - typeof";return df=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},df(t)}function mp(t,e,n){return e=Axe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Axe(t){var e=Nxe(t,"string");return df(e)=="symbol"?e:e+""}function Nxe(t,e){if(df(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(df(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ku="recharts-tooltip-wrapper",Exe={visibility:"hidden"};function Cxe(t){var e=t.coordinate,n=t.translateX,r=t.translateY;return Ie(ku,mp(mp(mp(mp({},"".concat(ku,"-right"),ne(n)&&e&&ne(e.x)&&n>=e.x),"".concat(ku,"-left"),ne(n)&&e&&ne(e.x)&&n<e.x),"".concat(ku,"-bottom"),ne(r)&&e&&ne(e.y)&&r>=e.y),"".concat(ku,"-top"),ne(r)&&e&&ne(e.y)&&r<e.y))}function JT(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.key,i=t.offsetTopLeft,s=t.position,a=t.reverseDirection,l=t.tooltipDimension,c=t.viewBox,u=t.viewBoxDimension;if(s&&ne(s[r]))return s[r];var d=n[r]-l-i,f=n[r]+i;if(e[r])return a[r]?d:f;if(a[r]){var h=d,m=c[r];return h<m?Math.max(f,c[r]):Math.max(d,c[r])}var y=f+l,g=c[r]+u;return y>g?Math.max(d,c[r]):Math.max(f,c[r])}function jxe(t){var e=t.translateX,n=t.translateY,r=t.useTranslate3d;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function Txe(t){var e=t.allowEscapeViewBox,n=t.coordinate,r=t.offsetTopLeft,i=t.position,s=t.reverseDirection,a=t.tooltipBox,l=t.useTranslate3d,c=t.viewBox,u,d,f;return a.height>0&&a.width>0&&n?(d=JT({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.width,viewBox:c,viewBoxDimension:c.width}),f=JT({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:s,tooltipDimension:a.height,viewBox:c,viewBoxDimension:c.height}),u=jxe({translateX:d,translateY:f,useTranslate3d:l})):u=Exe,{cssProperties:u,cssClasses:Cxe({translateX:d,translateY:f,coordinate:n})}}function oc(t){"@babel/helpers - typeof";return oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oc(t)}function ZT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZT(Object(n),!0).forEach(function(r){Iw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kxe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yL(r.key),r)}}function Ixe(t,e,n){return e&&kxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Oxe(t,e,n){return e=hg(e),Rxe(t,gL()?Reflect.construct(e,n||[],hg(t).constructor):e.apply(t,n))}function Rxe(t,e){if(e&&(oc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $xe(t)}function $xe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gL=function(){return!!t})()}function hg(t){return hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},hg(t)}function Dxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kw(t,e)}function kw(t,e){return kw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},kw(t,e)}function Iw(t,e,n){return e=yL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yL(t){var e=Mxe(t,"string");return oc(e)=="symbol"?e:e+""}function Mxe(t,e){if(oc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(oc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var tP=1,Lxe=function(t){function e(){var n;Pxe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=Oxe(this,e,[].concat(i)),Iw(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Iw(n,"handleKeyDown",function(a){if(a.key==="Escape"){var l,c,u,d;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=n.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),n}return Dxe(e,t),Ixe(e,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>tP||Math.abs(r.height-this.state.lastBoundingBox.height)>tP)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,f=i.hasPayload,h=i.isAnimationActive,m=i.offset,y=i.position,g=i.reverseDirection,x=i.useTranslate3d,w=i.viewBox,b=i.wrapperStyle,v=Txe({allowEscapeViewBox:a,coordinate:d,offsetTopLeft:m,position:y,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:w}),N=v.cssClasses,S=v.cssProperties,A=eP(eP({transition:h&&s?"transform ".concat(l,"ms ").concat(c):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&f?"visible":"hidden",position:"absolute",top:0,left:0},b);return L.createElement("div",{tabIndex:-1,className:N,style:A,ref:function(_){r.wrapperNode=_}},u)}}])}(k.PureComponent),Fxe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Lo={isSsr:Fxe()};function lc(t){"@babel/helpers - typeof";return lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lc(t)}function nP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function rP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nP(Object(n),!0).forEach(function(r){kA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vxe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bxe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xL(r.key),r)}}function Uxe(t,e,n){return e&&Bxe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function zxe(t,e,n){return e=pg(e),qxe(t,vL()?Reflect.construct(e,n||[],pg(t).constructor):e.apply(t,n))}function qxe(t,e){if(e&&(lc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wxe(t)}function Wxe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vL=function(){return!!t})()}function pg(t){return pg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pg(t)}function Gxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ow(t,e)}function Ow(t,e){return Ow=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Ow(t,e)}function kA(t,e,n){return e=xL(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xL(t){var e=Hxe(t,"string");return lc(e)=="symbol"?e:e+""}function Hxe(t,e){if(lc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Kxe(t){return t.dataKey}function Yxe(t,e){return L.isValidElement(t)?L.cloneElement(t,e):typeof t=="function"?L.createElement(t,e):L.createElement(Sxe,e)}var ir=function(t){function e(){return Vxe(this,e),zxe(this,e,arguments)}return Gxe(e,t),Uxe(e,[{key:"render",value:function(){var r=this,i=this.props,s=i.active,a=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,f=i.filterNull,h=i.isAnimationActive,m=i.offset,y=i.payload,g=i.payloadUniqBy,x=i.position,w=i.reverseDirection,b=i.useTranslate3d,v=i.viewBox,N=i.wrapperStyle,S=y??[];f&&S.length&&(S=lL(y.filter(function(E){return E.value!=null&&(E.hide!==!0||r.props.includeHidden)}),g,Kxe));var A=S.length>0;return L.createElement(Lxe,{allowEscapeViewBox:a,animationDuration:l,animationEasing:c,isAnimationActive:h,active:s,coordinate:d,hasPayload:A,offset:m,position:x,reverseDirection:w,useTranslate3d:b,viewBox:v,wrapperStyle:N},Yxe(u,rP(rP({},this.props),{},{payload:S})))}}])}(k.PureComponent);kA(ir,"displayName","Tooltip");kA(ir,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Lo.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Xxe=Ti,Qxe=function(){return Xxe.Date.now()},Jxe=Qxe,Zxe=/\s/;function ebe(t){for(var e=t.length;e--&&Zxe.test(t.charAt(e)););return e}var tbe=ebe,nbe=tbe,rbe=/^\s+/;function ibe(t){return t&&t.slice(0,nbe(t)+1).replace(rbe,"")}var sbe=ibe,abe=sbe,iP=Na,obe=Gc,sP=NaN,lbe=/^[-+]0x[0-9a-f]+$/i,cbe=/^0b[01]+$/i,ube=/^0o[0-7]+$/i,dbe=parseInt;function fbe(t){if(typeof t=="number")return t;if(obe(t))return sP;if(iP(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=iP(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=abe(t);var n=cbe.test(t);return n||ube.test(t)?dbe(t.slice(2),n?2:8):lbe.test(t)?sP:+t}var bL=fbe,hbe=Na,rx=Jxe,aP=bL,pbe="Expected a function",mbe=Math.max,gbe=Math.min;function ybe(t,e,n){var r,i,s,a,l,c,u=0,d=!1,f=!1,h=!0;if(typeof t!="function")throw new TypeError(pbe);e=aP(e)||0,hbe(n)&&(d=!!n.leading,f="maxWait"in n,s=f?mbe(aP(n.maxWait)||0,e):s,h="trailing"in n?!!n.trailing:h);function m(A){var E=r,_=i;return r=i=void 0,u=A,a=t.apply(_,E),a}function y(A){return u=A,l=setTimeout(w,e),d?m(A):a}function g(A){var E=A-c,_=A-u,C=e-E;return f?gbe(C,s-_):C}function x(A){var E=A-c,_=A-u;return c===void 0||E>=e||E<0||f&&_>=s}function w(){var A=rx();if(x(A))return b(A);l=setTimeout(w,g(A))}function b(A){return l=void 0,h&&r?m(A):(r=i=void 0,a)}function v(){l!==void 0&&clearTimeout(l),u=0,r=c=i=l=void 0}function N(){return l===void 0?a:b(rx())}function S(){var A=rx(),E=x(A);if(r=arguments,i=this,c=A,E){if(l===void 0)return y(c);if(f)return clearTimeout(l),l=setTimeout(w,e),m(c)}return l===void 0&&(l=setTimeout(w,e)),a}return S.cancel=v,S.flush=N,S}var vbe=ybe,xbe=vbe,bbe=Na,wbe="Expected a function";function _be(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(wbe);return bbe(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),xbe(t,e,{leading:r,maxWait:e,trailing:i})}var Sbe=_be;const wL=rt(Sbe);function ff(t){"@babel/helpers - typeof";return ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ff(t)}function oP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oP(Object(n),!0).forEach(function(r){Abe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Abe(t,e,n){return e=Nbe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nbe(t){var e=Ebe(t,"string");return ff(e)=="symbol"?e:e+""}function Ebe(t,e){if(ff(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cbe(t,e){return kbe(t)||Pbe(t,e)||Tbe(t,e)||jbe()}function jbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tbe(t,e){if(t){if(typeof t=="string")return lP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lP(t,e)}}function lP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Pbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function kbe(t){if(Array.isArray(t))return t}var mg=k.forwardRef(function(t,e){var n=t.aspect,r=t.initialDimension,i=r===void 0?{width:-1,height:-1}:r,s=t.width,a=s===void 0?"100%":s,l=t.height,c=l===void 0?"100%":l,u=t.minWidth,d=u===void 0?0:u,f=t.minHeight,h=t.maxHeight,m=t.children,y=t.debounce,g=y===void 0?0:y,x=t.id,w=t.className,b=t.onResize,v=t.style,N=v===void 0?{}:v,S=k.useRef(null),A=k.useRef();A.current=b,k.useImperativeHandle(e,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var E=k.useState({containerWidth:i.width,containerHeight:i.height}),_=Cbe(E,2),C=_[0],P=_[1],T=k.useCallback(function(R,M){P(function(D){var B=Math.round(R),U=Math.round(M);return D.containerWidth===B&&D.containerHeight===U?D:{containerWidth:B,containerHeight:U}})},[]);k.useEffect(function(){var R=function(W){var H,te=W[0].contentRect,X=te.width,ie=te.height;T(X,ie),(H=A.current)===null||H===void 0||H.call(A,X,ie)};g>0&&(R=wL(R,g,{trailing:!0,leading:!1}));var M=new ResizeObserver(R),D=S.current.getBoundingClientRect(),B=D.width,U=D.height;return T(B,U),M.observe(S.current),function(){M.disconnect()}},[T,g]);var O=k.useMemo(function(){var R=C.containerWidth,M=C.containerHeight;if(R<0||M<0)return null;Qr(Ka(a)||Ka(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,c),Qr(!n||n>0,"The aspect(%s) must be greater than zero.",n);var D=Ka(a)?R:a,B=Ka(c)?M:c;n&&n>0&&(D?B=D/n:B&&(D=B*n),h&&B>h&&(B=h)),Qr(D>0||B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,B,a,c,d,f,n);var U=!Array.isArray(m)&&Ji(m.type).endsWith("Chart");return L.Children.map(m,function(V){return L.isValidElement(V)?k.cloneElement(V,gp({width:D,height:B},U?{style:gp({height:"100%",width:"100%",maxHeight:B,maxWidth:D},V.props.style)}:{})):V})},[n,m,c,h,f,d,C,a]);return L.createElement("div",{id:x?"".concat(x):void 0,className:Ie("recharts-responsive-container",w),style:gp(gp({},N),{},{width:a,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:S},O)}),yv=function(e){return null};yv.displayName="Cell";function hf(t){"@babel/helpers - typeof";return hf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hf(t)}function cP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cP(Object(n),!0).forEach(function(r){Ibe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ibe(t,e,n){return e=Obe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Obe(t){var e=Rbe(t,"string");return hf(e)=="symbol"?e:e+""}function Rbe(t,e){if(hf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var el={widthCache:{},cacheCount:0},$be=2e3,Dbe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},uP="recharts_measurement_span";function Mbe(t){var e=Rw({},t);return Object.keys(e).forEach(function(n){e[n]||delete e[n]}),e}var yd=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Lo.isSsr)return{width:0,height:0};var r=Mbe(n),i=JSON.stringify({text:e,copyStyle:r});if(el.widthCache[i])return el.widthCache[i];try{var s=document.getElementById(uP);s||(s=document.createElement("span"),s.setAttribute("id",uP),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var a=Rw(Rw({},Dbe),r);Object.assign(s.style,a),s.textContent="".concat(e);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return el.widthCache[i]=c,++el.cacheCount>$be&&(el.cacheCount=0,el.widthCache={}),c}catch{return{width:0,height:0}}},Lbe=function(e){return{top:e.top+window.scrollY-document.documentElement.clientTop,left:e.left+window.scrollX-document.documentElement.clientLeft}};function pf(t){"@babel/helpers - typeof";return pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pf(t)}function gg(t,e){return Ube(t)||Bbe(t,e)||Vbe(t,e)||Fbe()}function Fbe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vbe(t,e){if(t){if(typeof t=="string")return dP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dP(t,e)}}function dP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Bbe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function Ube(t){if(Array.isArray(t))return t}function zbe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fP(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Wbe(r.key),r)}}function qbe(t,e,n){return e&&fP(t.prototype,e),n&&fP(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Wbe(t){var e=Gbe(t,"string");return pf(e)=="symbol"?e:e+""}function Gbe(t,e){if(pf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var hP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,pP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Hbe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Kbe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,_L={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Ybe=Object.keys(_L),xl="NaN";function Xbe(t,e){return t*_L[e]}var yp=function(){function t(e,n){zbe(this,t),this.num=e,this.unit=n,this.num=e,this.unit=n,Number.isNaN(e)&&(this.unit=""),n!==""&&!Hbe.test(n)&&(this.num=NaN,this.unit=""),Ybe.includes(n)&&(this.num=Xbe(e,n),this.unit="px")}return qbe(t,[{key:"add",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new t(NaN,""):new t(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new t(NaN,""):new t(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,i=(r=Kbe.exec(n))!==null&&r!==void 0?r:[],s=gg(i,3),a=s[1],l=s[2];return new t(parseFloat(a),l??"")}}])}();function SL(t){if(t.includes(xl))return xl;for(var e=t;e.includes("*")||e.includes("/");){var n,r=(n=hP.exec(e))!==null&&n!==void 0?n:[],i=gg(r,4),s=i[1],a=i[2],l=i[3],c=yp.parse(s??""),u=yp.parse(l??""),d=a==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return xl;e=e.replace(hP,d.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var f,h=(f=pP.exec(e))!==null&&f!==void 0?f:[],m=gg(h,4),y=m[1],g=m[2],x=m[3],w=yp.parse(y??""),b=yp.parse(x??""),v=g==="+"?w.add(b):w.subtract(b);if(v.isNaN())return xl;e=e.replace(pP,v.toString())}return e}var mP=/\(([^()]*)\)/;function Qbe(t){for(var e=t;e.includes("(");){var n=mP.exec(e),r=gg(n,2),i=r[1];e=e.replace(mP,SL(i))}return e}function Jbe(t){var e=t.replace(/\s+/g,"");return e=Qbe(e),e=SL(e),e}function Zbe(t){try{return Jbe(t)}catch{return xl}}function ix(t){var e=Zbe(t.slice(5,-1));return e===xl?"":e}var ewe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],twe=["dx","dy","angle","className","breakAll"];function $w(){return $w=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$w.apply(this,arguments)}function gP(t,e){if(t==null)return{};var n=nwe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nwe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function yP(t,e){return awe(t)||swe(t,e)||iwe(t,e)||rwe()}function rwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iwe(t,e){if(t){if(typeof t=="string")return vP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vP(t,e)}}function vP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function swe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function awe(t){if(Array.isArray(t))return t}var AL=/[ \f\n\r\t\v\u2028\u2029]+/,NL=function(e){var n=e.children,r=e.breakAll,i=e.style;try{var s=[];ke(n)||(r?s=n.toString().split(""):s=n.toString().split(AL));var a=s.map(function(c){return{word:c,width:yd(c,i).width}}),l=r?0:yd("",i).width;return{wordsWithComputedWidth:a,spaceWidth:l}}catch{return null}},owe=function(e,n,r,i,s){var a=e.maxLines,l=e.children,c=e.style,u=e.breakAll,d=ne(a),f=l,h=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce(function(B,U){var V=U.word,W=U.width,H=B[B.length-1];if(H&&(i==null||s||H.width+W+r<Number(i)))H.words.push(V),H.width+=W+r;else{var te={words:[V],width:W};B.push(te)}return B},[])},m=h(n),y=function(D){return D.reduce(function(B,U){return B.width>U.width?B:U})};if(!d)return m;for(var g="",x=function(D){var B=f.slice(0,D),U=NL({breakAll:u,style:c,children:B+g}).wordsWithComputedWidth,V=h(U),W=V.length>a||y(V).width>Number(i);return[W,V]},w=0,b=f.length-1,v=0,N;w<=b&&v<=f.length-1;){var S=Math.floor((w+b)/2),A=S-1,E=x(A),_=yP(E,2),C=_[0],P=_[1],T=x(S),O=yP(T,1),R=O[0];if(!C&&!R&&(w=S+1),C&&R&&(b=S-1),!C&&R){N=P;break}v++}return N||m},xP=function(e){var n=ke(e)?[]:e.toString().split(AL);return[{words:n}]},lwe=function(e){var n=e.width,r=e.scaleToFit,i=e.children,s=e.style,a=e.breakAll,l=e.maxLines;if((n||r)&&!Lo.isSsr){var c,u,d=NL({breakAll:a,children:i,style:s});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return xP(i);return owe({breakAll:a,children:i,maxLines:l,style:s},c,u,n,r)}return xP(i)},bP="#808080",Co=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,a=e.lineHeight,l=a===void 0?"1em":a,c=e.capHeight,u=c===void 0?"0.71em":c,d=e.scaleToFit,f=d===void 0?!1:d,h=e.textAnchor,m=h===void 0?"start":h,y=e.verticalAnchor,g=y===void 0?"end":y,x=e.fill,w=x===void 0?bP:x,b=gP(e,ewe),v=k.useMemo(function(){return lwe({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),N=b.dx,S=b.dy,A=b.angle,E=b.className,_=b.breakAll,C=gP(b,twe);if(!Jt(r)||!Jt(s))return null;var P=r+(ne(N)?N:0),T=s+(ne(S)?S:0),O;switch(g){case"start":O=ix("calc(".concat(u,")"));break;case"middle":O=ix("calc(".concat((v.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:O=ix("calc(".concat(v.length-1," * -").concat(l,")"));break}var R=[];if(f){var M=v[0].width,D=b.width;R.push("scale(".concat((ne(D)?D/M:1)/M,")"))}return A&&R.push("rotate(".concat(A,", ").concat(P,", ").concat(T,")")),R.length&&(C.transform=R.join(" ")),L.createElement("text",$w({},xe(C,!0),{x:P,y:T,className:Ie("recharts-text",E),textAnchor:m,fill:w.includes("url")?bP:w}),v.map(function(B,U){var V=B.words.join(_?"":" ");return L.createElement("tspan",{x:P,dy:U===0?O:l,key:"".concat(V,"-").concat(U)},V)}))};function ua(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function cwe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function IA(t){let e,n,r;t.length!==2?(e=ua,n=(l,c)=>ua(t(l),c),r=(l,c)=>t(l)-c):(e=t===ua||t===cwe?t:uwe,n=t,r=t);function i(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(e(c,c)!==0)return d;do{const f=u+d>>>1;n(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function a(l,c,u=0,d=l.length){const f=i(l,c,u,d-1);return f>u&&r(l[f-1],c)>-r(l[f],c)?f-1:f}return{left:i,center:a,right:s}}function uwe(){return 0}function EL(t){return t===null?NaN:+t}function*dwe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const fwe=IA(ua),ph=fwe.right;IA(EL).center;class wP extends Map{constructor(e,n=mwe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(_P(this,e))}has(e){return super.has(_P(this,e))}set(e,n){return super.set(hwe(this,e),n)}delete(e){return super.delete(pwe(this,e))}}function _P({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function hwe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function pwe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function mwe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function gwe(t=ua){if(t===ua)return CL;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function CL(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const ywe=Math.sqrt(50),vwe=Math.sqrt(10),xwe=Math.sqrt(2);function yg(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=ywe?10:s>=vwe?5:s>=xwe?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/a,l=Math.round(t*u),c=Math.round(e*u),l/u<t&&++l,c/u>e&&--c,u=-u):(u=Math.pow(10,i)*a,l=Math.round(t/u),c=Math.round(e/u),l*u<t&&++l,c*u>e&&--c),c<l&&.5<=n&&n<2?yg(t,e,n*2):[l,c,u]}function Dw(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?yg(e,t,n):yg(t,e,n);if(!(s>=i))return[];const l=s-i+1,c=new Array(l);if(r)if(a<0)for(let u=0;u<l;++u)c[u]=(s-u)/-a;else for(let u=0;u<l;++u)c[u]=(s-u)*a;else if(a<0)for(let u=0;u<l;++u)c[u]=(i+u)/-a;else for(let u=0;u<l;++u)c[u]=(i+u)*a;return c}function Mw(t,e,n){return e=+e,t=+t,n=+n,yg(t,e,n)[2]}function Lw(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Mw(e,t,n):Mw(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function SP(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function AP(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function jL(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?CL:gwe(i);r>n;){if(r-n>600){const c=r-n+1,u=e-n+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(n,Math.floor(e-u*f/c+h)),y=Math.min(r,Math.floor(e+(c-u)*f/c+h));jL(t,e,m,y,i)}const s=t[e];let a=n,l=r;for(Iu(t,n,e),i(t[r],s)>0&&Iu(t,n,r);a<l;){for(Iu(t,a,l),++a,--l;i(t[a],s)<0;)++a;for(;i(t[l],s)>0;)--l}i(t[n],s)===0?Iu(t,n,l):(++l,Iu(t,l,r)),l<=e&&(n=l+1),e<=l&&(r=l-1)}return t}function Iu(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function bwe(t,e,n){if(t=Float64Array.from(dwe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return AP(t);if(e>=1)return SP(t);var r,i=(r-1)*e,s=Math.floor(i),a=SP(jL(t,s).subarray(0,s+1)),l=AP(t.subarray(s+1));return a+(l-a)*(i-s)}}function wwe(t,e,n=EL){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),a=+n(t[s],s,t),l=+n(t[s+1],s+1,t);return a+(l-a)*(i-s)}}function _we(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Dr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function _s(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Fw=Symbol("implicit");function OA(){var t=new wP,e=[],n=[],r=Fw;function i(s){let a=t.get(s);if(a===void 0){if(r!==Fw)return r;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new wP;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return OA(e,n).unknown(r)},Dr.apply(i,arguments),i}function mf(){var t=OA().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,a,l=!1,c=0,u=0,d=.5;delete t.unknown;function f(){var h=e().length,m=i<r,y=m?i:r,g=m?r:i;s=(g-y)/Math.max(1,h-c+u*2),l&&(s=Math.floor(s)),y+=(g-y-s*(h-c))*d,a=s*(1-c),l&&(y=Math.round(y),a=Math.round(a));var x=_we(h).map(function(w){return y+s*w});return n(m?x.reverse():x)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([r,i]=h,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(h){return[r,i]=h,r=+r,i=+i,l=!0,f()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(h){return arguments.length?(l=!!h,f()):l},t.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},t.copy=function(){return mf(e(),[r,i]).round(l).paddingInner(c).paddingOuter(u).align(d)},Dr.apply(f(),arguments)}function TL(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return TL(e())},t}function vd(){return TL(mf.apply(null,arguments).paddingInner(1))}function RA(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function PL(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function mh(){}var gf=.7,vg=1/gf,Ml="\\s*([+-]?\\d+)\\s*",yf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Swe=/^#([0-9a-f]{3,8})$/,Awe=new RegExp(`^rgb\\(${Ml},${Ml},${Ml}\\)$`),Nwe=new RegExp(`^rgb\\(${xi},${xi},${xi}\\)$`),Ewe=new RegExp(`^rgba\\(${Ml},${Ml},${Ml},${yf}\\)$`),Cwe=new RegExp(`^rgba\\(${xi},${xi},${xi},${yf}\\)$`),jwe=new RegExp(`^hsl\\(${yf},${xi},${xi}\\)$`),Twe=new RegExp(`^hsla\\(${yf},${xi},${xi},${yf}\\)$`),NP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};RA(mh,vf,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:EP,formatHex:EP,formatHex8:Pwe,formatHsl:kwe,formatRgb:CP,toString:CP});function EP(){return this.rgb().formatHex()}function Pwe(){return this.rgb().formatHex8()}function kwe(){return kL(this).formatHsl()}function CP(){return this.rgb().formatRgb()}function vf(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Swe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?jP(e):n===3?new Yn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?vp(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?vp(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Awe.exec(t))?new Yn(e[1],e[2],e[3],1):(e=Nwe.exec(t))?new Yn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ewe.exec(t))?vp(e[1],e[2],e[3],e[4]):(e=Cwe.exec(t))?vp(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=jwe.exec(t))?kP(e[1],e[2]/100,e[3]/100,1):(e=Twe.exec(t))?kP(e[1],e[2]/100,e[3]/100,e[4]):NP.hasOwnProperty(t)?jP(NP[t]):t==="transparent"?new Yn(NaN,NaN,NaN,0):null}function jP(t){return new Yn(t>>16&255,t>>8&255,t&255,1)}function vp(t,e,n,r){return r<=0&&(t=e=n=NaN),new Yn(t,e,n,r)}function Iwe(t){return t instanceof mh||(t=vf(t)),t?(t=t.rgb(),new Yn(t.r,t.g,t.b,t.opacity)):new Yn}function Vw(t,e,n,r){return arguments.length===1?Iwe(t):new Yn(t,e,n,r??1)}function Yn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}RA(Yn,Vw,PL(mh,{brighter(t){return t=t==null?vg:Math.pow(vg,t),new Yn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?gf:Math.pow(gf,t),new Yn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Yn(oo(this.r),oo(this.g),oo(this.b),xg(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:TP,formatHex:TP,formatHex8:Owe,formatRgb:PP,toString:PP}));function TP(){return`#${Ya(this.r)}${Ya(this.g)}${Ya(this.b)}`}function Owe(){return`#${Ya(this.r)}${Ya(this.g)}${Ya(this.b)}${Ya((isNaN(this.opacity)?1:this.opacity)*255)}`}function PP(){const t=xg(this.opacity);return`${t===1?"rgb(":"rgba("}${oo(this.r)}, ${oo(this.g)}, ${oo(this.b)}${t===1?")":`, ${t})`}`}function xg(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function oo(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Ya(t){return t=oo(t),(t<16?"0":"")+t.toString(16)}function kP(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Hr(t,e,n,r)}function kL(t){if(t instanceof Hr)return new Hr(t.h,t.s,t.l,t.opacity);if(t instanceof mh||(t=vf(t)),!t)return new Hr;if(t instanceof Hr)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,l=s-i,c=(s+i)/2;return l?(e===s?a=(n-r)/l+(n<r)*6:n===s?a=(r-e)/l+2:a=(e-n)/l+4,l/=c<.5?s+i:2-s-i,a*=60):l=c>0&&c<1?0:a,new Hr(a,l,c,t.opacity)}function Rwe(t,e,n,r){return arguments.length===1?kL(t):new Hr(t,e,n,r??1)}function Hr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}RA(Hr,Rwe,PL(mh,{brighter(t){return t=t==null?vg:Math.pow(vg,t),new Hr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?gf:Math.pow(gf,t),new Hr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Yn(sx(t>=240?t-240:t+120,i,r),sx(t,i,r),sx(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Hr(IP(this.h),xp(this.s),xp(this.l),xg(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=xg(this.opacity);return`${t===1?"hsl(":"hsla("}${IP(this.h)}, ${xp(this.s)*100}%, ${xp(this.l)*100}%${t===1?")":`, ${t})`}`}}));function IP(t){return t=(t||0)%360,t<0?t+360:t}function xp(t){return Math.max(0,Math.min(1,t||0))}function sx(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const $A=t=>()=>t;function $we(t,e){return function(n){return t+n*e}}function Dwe(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Mwe(t){return(t=+t)==1?IL:function(e,n){return n-e?Dwe(e,n,t):$A(isNaN(e)?n:e)}}function IL(t,e){var n=e-t;return n?$we(t,n):$A(isNaN(t)?e:t)}const OP=function t(e){var n=Mwe(e);function r(i,s){var a=n((i=Vw(i)).r,(s=Vw(s)).r),l=n(i.g,s.g),c=n(i.b,s.b),u=IL(i.opacity,s.opacity);return function(d){return i.r=a(d),i.g=l(d),i.b=c(d),i.opacity=u(d),i+""}}return r.gamma=t,r}(1);function Lwe(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Fwe(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Vwe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=nu(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(l){for(a=0;a<r;++a)s[a]=i[a](l);return s}}function Bwe(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function bg(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Uwe(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=nu(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Bw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ax=new RegExp(Bw.source,"g");function zwe(t){return function(){return t}}function qwe(t){return function(e){return t(e)+""}}function Wwe(t,e){var n=Bw.lastIndex=ax.lastIndex=0,r,i,s,a=-1,l=[],c=[];for(t=t+"",e=e+"";(r=Bw.exec(t))&&(i=ax.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),l[a]?l[a]+=s:l[++a]=s),(r=r[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,c.push({i:a,x:bg(r,i)})),n=ax.lastIndex;return n<e.length&&(s=e.slice(n),l[a]?l[a]+=s:l[++a]=s),l.length<2?c[0]?qwe(c[0].x):zwe(e):(e=c.length,function(u){for(var d=0,f;d<e;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function nu(t,e){var n=typeof e,r;return e==null||n==="boolean"?$A(e):(n==="number"?bg:n==="string"?(r=vf(e))?(e=r,OP):Wwe:e instanceof vf?OP:e instanceof Date?Bwe:Fwe(e)?Lwe:Array.isArray(e)?Vwe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Uwe:bg)(t,e)}function DA(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Gwe(t,e){e===void 0&&(e=t,t=nu);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(a){var l=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return s[l](a-l)}}function Hwe(t){return function(){return t}}function wg(t){return+t}var RP=[0,1];function Mn(t){return t}function Uw(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Hwe(isNaN(e)?NaN:.5)}function Kwe(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Ywe(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=Uw(i,r),s=n(a,s)):(r=Uw(r,i),s=n(s,a)),function(l){return s(r(l))}}function Xwe(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Uw(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(l){var c=ph(t,l,1,r)-1;return s[c](i[c](l))}}function gh(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function vv(){var t=RP,e=RP,n=nu,r,i,s,a=Mn,l,c,u;function d(){var h=Math.min(t.length,e.length);return a!==Mn&&(a=Kwe(t[0],t[h-1])),l=h>2?Xwe:Ywe,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=l(t.map(r),e,n)))(r(a(h)))}return f.invert=function(h){return a(i((u||(u=l(e,t.map(r),bg)))(h)))},f.domain=function(h){return arguments.length?(t=Array.from(h,wg),d()):t.slice()},f.range=function(h){return arguments.length?(e=Array.from(h),d()):e.slice()},f.rangeRound=function(h){return e=Array.from(h),n=DA,d()},f.clamp=function(h){return arguments.length?(a=h?!0:Mn,d()):a!==Mn},f.interpolate=function(h){return arguments.length?(n=h,d()):n},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,m){return r=h,i=m,d()}}function MA(){return vv()(Mn,Mn)}function Qwe(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function _g(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function cc(t){return t=_g(Math.abs(t)),t?t[1]:NaN}function Jwe(t,e){return function(n,r){for(var i=n.length,s=[],a=0,l=t[0],c=0;i>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),s.push(n.substring(i-=l,i+l)),!((c+=l+1)>r));)l=t[a=(a+1)%t.length];return s.reverse().join(e)}}function Zwe(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var e1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xf(t){if(!(e=e1e.exec(t)))throw new Error("invalid format: "+t);var e;return new LA({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}xf.prototype=LA.prototype;function LA(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}LA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function t1e(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Sg;function n1e(t,e){var n=_g(t,e);if(!n)return Sg=void 0,t.toPrecision(e);var r=n[0],i=n[1],s=i-(Sg=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+_g(t,Math.max(0,e+s-1))[0]}function $P(t,e){var n=_g(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const DP={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Qwe,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>$P(t*100,e),r:$P,s:n1e,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function MP(t){return t}var LP=Array.prototype.map,FP=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function r1e(t){var e=t.grouping===void 0||t.thousands===void 0?MP:Jwe(LP.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?MP:Zwe(LP.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(f,h){f=xf(f);var m=f.fill,y=f.align,g=f.sign,x=f.symbol,w=f.zero,b=f.width,v=f.comma,N=f.precision,S=f.trim,A=f.type;A==="n"?(v=!0,A="g"):DP[A]||(N===void 0&&(N=12),S=!0,A="g"),(w||m==="0"&&y==="=")&&(w=!0,m="0",y="=");var E=(h&&h.prefix!==void 0?h.prefix:"")+(x==="$"?n:x==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():""),_=(x==="$"?r:/[%p]/.test(A)?a:"")+(h&&h.suffix!==void 0?h.suffix:""),C=DP[A],P=/[defgprs%]/.test(A);N=N===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function T(O){var R=E,M=_,D,B,U;if(A==="c")M=C(O)+M,O="";else{O=+O;var V=O<0||1/O<0;if(O=isNaN(O)?c:C(Math.abs(O),N),S&&(O=t1e(O)),V&&+O==0&&g!=="+"&&(V=!1),R=(V?g==="("?g:l:g==="-"||g==="("?"":g)+R,M=(A==="s"&&!isNaN(O)&&Sg!==void 0?FP[8+Sg/3]:"")+M+(V&&g==="("?")":""),P){for(D=-1,B=O.length;++D<B;)if(U=O.charCodeAt(D),48>U||U>57){M=(U===46?i+O.slice(D+1):O.slice(D))+M,O=O.slice(0,D);break}}}v&&!w&&(O=e(O,1/0));var W=R.length+O.length+M.length,H=W<b?new Array(b-W+1).join(m):"";switch(v&&w&&(O=e(H+O,H.length?b-M.length:1/0),H=""),y){case"<":O=R+O+M+H;break;case"=":O=R+H+O+M;break;case"^":O=H.slice(0,W=H.length>>1)+R+O+M+H.slice(W);break;default:O=H+R+O+M;break}return s(O)}return T.toString=function(){return f+""},T}function d(f,h){var m=Math.max(-8,Math.min(8,Math.floor(cc(h)/3)))*3,y=Math.pow(10,-m),g=u((f=xf(f),f.type="f",f),{suffix:FP[8+m/3]});return function(x){return g(y*x)}}return{format:u,formatPrefix:d}}var bp,FA,OL;i1e({thousands:",",grouping:[3],currency:["$",""]});function i1e(t){return bp=r1e(t),FA=bp.format,OL=bp.formatPrefix,bp}function s1e(t){return Math.max(0,-cc(Math.abs(t)))}function a1e(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cc(e)/3)))*3-cc(Math.abs(t)))}function o1e(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,cc(e)-cc(t))+1}function RL(t,e,n,r){var i=Lw(t,e,n),s;switch(r=xf(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=a1e(i,a))&&(r.precision=s),OL(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=o1e(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=s1e(i))&&(r.precision=s-(r.type==="%")*2);break}}return FA(r)}function Ea(t){var e=t.domain;return t.ticks=function(n){var r=e();return Dw(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return RL(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],l=r[s],c,u,d=10;for(l<a&&(u=a,a=l,l=u,u=i,i=s,s=u);d-- >0;){if(u=Mw(a,l,n),u===c)return r[i]=a,r[s]=l,e(r);if(u>0)a=Math.floor(a/u)*u,l=Math.ceil(l/u)*u;else if(u<0)a=Math.ceil(a*u)/u,l=Math.floor(l*u)/u;else break;c=u}return t},t}function Ag(){var t=MA();return t.copy=function(){return gh(t,Ag())},Dr.apply(t,arguments),Ea(t)}function $L(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,wg),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return $L(t).unknown(e)},t=arguments.length?Array.from(t,wg):[0,1],Ea(n)}function DL(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],a;return s<i&&(a=n,n=r,r=a,a=i,i=s,s=a),t[n]=e.floor(i),t[r]=e.ceil(s),t}function VP(t){return Math.log(t)}function BP(t){return Math.exp(t)}function l1e(t){return-Math.log(-t)}function c1e(t){return-Math.exp(-t)}function u1e(t){return isFinite(t)?+("1e"+t):t<0?0:t}function d1e(t){return t===10?u1e:t===Math.E?Math.exp:e=>Math.pow(t,e)}function f1e(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function UP(t){return(e,n)=>-t(-e,n)}function VA(t){const e=t(VP,BP),n=e.domain;let r=10,i,s;function a(){return i=f1e(r),s=d1e(r),n()[0]<0?(i=UP(i),s=UP(s),t(l1e,c1e)):t(VP,BP),e}return e.base=function(l){return arguments.length?(r=+l,a()):r},e.domain=function(l){return arguments.length?(n(l),a()):n()},e.ticks=l=>{const c=n();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=i(u),m=i(d),y,g;const x=l==null?10:+l;let w=[];if(!(r%1)&&m-h<x){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(y=1;y<r;++y)if(g=h<0?y/s(-h):y*s(h),!(g<u)){if(g>d)break;w.push(g)}}else for(;h<=m;++h)for(y=r-1;y>=1;--y)if(g=h>0?y/s(-h):y*s(h),!(g<u)){if(g>d)break;w.push(g)}w.length*2<x&&(w=Dw(u,d,x))}else w=Dw(h,m,Math.min(m-h,x)).map(s);return f?w.reverse():w},e.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=xf(c)).precision==null&&(c.trim=!0),c=FA(c)),l===1/0)return c;const u=Math.max(1,r*l/e.ticks().length);return d=>{let f=d/s(Math.round(i(d)));return f*r<r-.5&&(f*=r),f<=u?c(d):""}},e.nice=()=>n(DL(n(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),e}function ML(){const t=VA(vv()).domain([1,10]);return t.copy=()=>gh(t,ML()).base(t.base()),Dr.apply(t,arguments),t}function zP(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function qP(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function BA(t){var e=1,n=t(zP(e),qP(e));return n.constant=function(r){return arguments.length?t(zP(e=+r),qP(e)):e},Ea(n)}function LL(){var t=BA(vv());return t.copy=function(){return gh(t,LL()).constant(t.constant())},Dr.apply(t,arguments)}function WP(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function h1e(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function p1e(t){return t<0?-t*t:t*t}function UA(t){var e=t(Mn,Mn),n=1;function r(){return n===1?t(Mn,Mn):n===.5?t(h1e,p1e):t(WP(n),WP(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Ea(e)}function zA(){var t=UA(vv());return t.copy=function(){return gh(t,zA()).exponent(t.exponent())},Dr.apply(t,arguments),t}function m1e(){return zA.apply(null,arguments).exponent(.5)}function GP(t){return Math.sign(t)*t*t}function g1e(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function FL(){var t=MA(),e=[0,1],n=!1,r;function i(s){var a=g1e(t(s));return isNaN(a)?r:n?Math.round(a):a}return i.invert=function(s){return t.invert(GP(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,wg)).map(GP)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return FL(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Dr.apply(i,arguments),Ea(i)}function VL(){var t=[],e=[],n=[],r;function i(){var a=0,l=Math.max(1,e.length);for(n=new Array(l-1);++a<l;)n[a-1]=wwe(t,a/l);return s}function s(a){return a==null||isNaN(a=+a)?r:e[ph(n,a)]}return s.invertExtent=function(a){var l=e.indexOf(a);return l<0?[NaN,NaN]:[l>0?n[l-1]:t[0],l<n.length?n[l]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let l of a)l!=null&&!isNaN(l=+l)&&t.push(l);return t.sort(ua),i()},s.range=function(a){return arguments.length?(e=Array.from(a),i()):e.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return VL().domain(t).range(e).unknown(r)},Dr.apply(s,arguments)}function BL(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function a(c){return c!=null&&c<=c?i[ph(r,c,0,n)]:s}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*e-(c-n)*t)/(n+1);return a}return a.domain=function(c){return arguments.length?([t,e]=c,t=+t,e=+e,l()):[t,e]},a.range=function(c){return arguments.length?(n=(i=Array.from(c)).length-1,l()):i.slice()},a.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},a.unknown=function(c){return arguments.length&&(s=c),a},a.thresholds=function(){return r.slice()},a.copy=function(){return BL().domain([t,e]).range(i).unknown(s)},Dr.apply(Ea(a),arguments)}function UL(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[ph(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return UL().domain(t).range(e).unknown(n)},Dr.apply(i,arguments)}const ox=new Date,lx=new Date;function Zt(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const a=i(s),l=i.ceil(s);return s-a<l-s?a:l},i.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),i.range=(s,a,l)=>{const c=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<a)||!(l>0))return c;let u;do c.push(u=new Date(+s)),e(s,l),t(s);while(u<s&&s<a);return c},i.filter=s=>Zt(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,l)=>{if(a>=a)if(l<0)for(;++l<=0;)for(;e(a,-1),!s(a););else for(;--l>=0;)for(;e(a,1),!s(a););}),n&&(i.count=(s,a)=>(ox.setTime(+s),lx.setTime(+a),t(ox),t(lx),Math.floor(n(ox,lx))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?a=>r(a)%s===0:a=>i.count(0,a)%s===0):i)),i}const Ng=Zt(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);Ng.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Zt(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):Ng);Ng.range;const Gi=1e3,Cr=Gi*60,Hi=Cr*60,ps=Hi*24,qA=ps*7,HP=ps*30,cx=ps*365,Xa=Zt(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Gi)},(t,e)=>(e-t)/Gi,t=>t.getUTCSeconds());Xa.range;const WA=Zt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Gi)},(t,e)=>{t.setTime(+t+e*Cr)},(t,e)=>(e-t)/Cr,t=>t.getMinutes());WA.range;const GA=Zt(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Cr)},(t,e)=>(e-t)/Cr,t=>t.getUTCMinutes());GA.range;const HA=Zt(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Gi-t.getMinutes()*Cr)},(t,e)=>{t.setTime(+t+e*Hi)},(t,e)=>(e-t)/Hi,t=>t.getHours());HA.range;const KA=Zt(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Hi)},(t,e)=>(e-t)/Hi,t=>t.getUTCHours());KA.range;const yh=Zt(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Cr)/ps,t=>t.getDate()-1);yh.range;const xv=Zt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ps,t=>t.getUTCDate()-1);xv.range;const zL=Zt(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/ps,t=>Math.floor(t/ps));zL.range;function Fo(t){return Zt(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Cr)/qA)}const bv=Fo(0),Eg=Fo(1),y1e=Fo(2),v1e=Fo(3),uc=Fo(4),x1e=Fo(5),b1e=Fo(6);bv.range;Eg.range;y1e.range;v1e.range;uc.range;x1e.range;b1e.range;function Vo(t){return Zt(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/qA)}const wv=Vo(0),Cg=Vo(1),w1e=Vo(2),_1e=Vo(3),dc=Vo(4),S1e=Vo(5),A1e=Vo(6);wv.range;Cg.range;w1e.range;_1e.range;dc.range;S1e.range;A1e.range;const YA=Zt(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());YA.range;const XA=Zt(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());XA.range;const ms=Zt(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());ms.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Zt(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});ms.range;const gs=Zt(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());gs.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Zt(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});gs.range;function qL(t,e,n,r,i,s){const a=[[Xa,1,Gi],[Xa,5,5*Gi],[Xa,15,15*Gi],[Xa,30,30*Gi],[s,1,Cr],[s,5,5*Cr],[s,15,15*Cr],[s,30,30*Cr],[i,1,Hi],[i,3,3*Hi],[i,6,6*Hi],[i,12,12*Hi],[r,1,ps],[r,2,2*ps],[n,1,qA],[e,1,HP],[e,3,3*HP],[t,1,cx]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),y=m?m.range(u,+d+1):[];return h?y.reverse():y}function c(u,d,f){const h=Math.abs(d-u)/f,m=IA(([,,x])=>x).right(a,h);if(m===a.length)return t.every(Lw(u/cx,d/cx,f));if(m===0)return Ng.every(Math.max(Lw(u,d,f),1));const[y,g]=a[h/a[m-1][2]<a[m][2]/h?m-1:m];return y.every(g)}return[l,c]}const[N1e,E1e]=qL(gs,XA,wv,zL,KA,GA),[C1e,j1e]=qL(ms,YA,bv,yh,HA,WA);function ux(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function dx(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Ou(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function T1e(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,a=t.shortDays,l=t.months,c=t.shortMonths,u=Ru(i),d=$u(i),f=Ru(s),h=$u(s),m=Ru(a),y=$u(a),g=Ru(l),x=$u(l),w=Ru(c),b=$u(c),v={a:U,A:V,b:W,B:H,c:null,d:ZP,e:ZP,f:J1e,g:l_e,G:u_e,H:Y1e,I:X1e,j:Q1e,L:WL,m:Z1e,M:e_e,p:te,q:X,Q:nk,s:rk,S:t_e,u:n_e,U:r_e,V:i_e,w:s_e,W:a_e,x:null,X:null,y:o_e,Y:c_e,Z:d_e,"%":tk},N={a:ie,A:q,b:ae,B:ge,c:null,d:ek,e:ek,f:m_e,g:N_e,G:C_e,H:f_e,I:h_e,j:p_e,L:HL,m:g_e,M:y_e,p:Fe,q:et,Q:nk,s:rk,S:v_e,u:x_e,U:b_e,V:w_e,w:__e,W:S_e,x:null,X:null,y:A_e,Y:E_e,Z:j_e,"%":tk},S={a:P,A:T,b:O,B:R,c:M,d:QP,e:QP,f:W1e,g:XP,G:YP,H:JP,I:JP,j:B1e,L:q1e,m:V1e,M:U1e,p:C,q:F1e,Q:H1e,s:K1e,S:z1e,u:R1e,U:$1e,V:D1e,w:O1e,W:M1e,x:D,X:B,y:XP,Y:YP,Z:L1e,"%":G1e};v.x=A(n,v),v.X=A(r,v),v.c=A(e,v),N.x=A(n,N),N.X=A(r,N),N.c=A(e,N);function A(se,ye){return function(ve){var J=[],ze=-1,Pe=0,Je=se.length,st,Tt,F;for(ve instanceof Date||(ve=new Date(+ve));++ze<Je;)se.charCodeAt(ze)===37&&(J.push(se.slice(Pe,ze)),(Tt=KP[st=se.charAt(++ze)])!=null?st=se.charAt(++ze):Tt=st==="e"?" ":"0",(F=ye[st])&&(st=F(ve,Tt)),J.push(st),Pe=ze+1);return J.push(se.slice(Pe,ze)),J.join("")}}function E(se,ye){return function(ve){var J=Ou(1900,void 0,1),ze=_(J,se,ve+="",0),Pe,Je;if(ze!=ve.length)return null;if("Q"in J)return new Date(J.Q);if("s"in J)return new Date(J.s*1e3+("L"in J?J.L:0));if(ye&&!("Z"in J)&&(J.Z=0),"p"in J&&(J.H=J.H%12+J.p*12),J.m===void 0&&(J.m="q"in J?J.q:0),"V"in J){if(J.V<1||J.V>53)return null;"w"in J||(J.w=1),"Z"in J?(Pe=dx(Ou(J.y,0,1)),Je=Pe.getUTCDay(),Pe=Je>4||Je===0?Cg.ceil(Pe):Cg(Pe),Pe=xv.offset(Pe,(J.V-1)*7),J.y=Pe.getUTCFullYear(),J.m=Pe.getUTCMonth(),J.d=Pe.getUTCDate()+(J.w+6)%7):(Pe=ux(Ou(J.y,0,1)),Je=Pe.getDay(),Pe=Je>4||Je===0?Eg.ceil(Pe):Eg(Pe),Pe=yh.offset(Pe,(J.V-1)*7),J.y=Pe.getFullYear(),J.m=Pe.getMonth(),J.d=Pe.getDate()+(J.w+6)%7)}else("W"in J||"U"in J)&&("w"in J||(J.w="u"in J?J.u%7:"W"in J?1:0),Je="Z"in J?dx(Ou(J.y,0,1)).getUTCDay():ux(Ou(J.y,0,1)).getDay(),J.m=0,J.d="W"in J?(J.w+6)%7+J.W*7-(Je+5)%7:J.w+J.U*7-(Je+6)%7);return"Z"in J?(J.H+=J.Z/100|0,J.M+=J.Z%100,dx(J)):ux(J)}}function _(se,ye,ve,J){for(var ze=0,Pe=ye.length,Je=ve.length,st,Tt;ze<Pe;){if(J>=Je)return-1;if(st=ye.charCodeAt(ze++),st===37){if(st=ye.charAt(ze++),Tt=S[st in KP?ye.charAt(ze++):st],!Tt||(J=Tt(se,ve,J))<0)return-1}else if(st!=ve.charCodeAt(J++))return-1}return J}function C(se,ye,ve){var J=u.exec(ye.slice(ve));return J?(se.p=d.get(J[0].toLowerCase()),ve+J[0].length):-1}function P(se,ye,ve){var J=m.exec(ye.slice(ve));return J?(se.w=y.get(J[0].toLowerCase()),ve+J[0].length):-1}function T(se,ye,ve){var J=f.exec(ye.slice(ve));return J?(se.w=h.get(J[0].toLowerCase()),ve+J[0].length):-1}function O(se,ye,ve){var J=w.exec(ye.slice(ve));return J?(se.m=b.get(J[0].toLowerCase()),ve+J[0].length):-1}function R(se,ye,ve){var J=g.exec(ye.slice(ve));return J?(se.m=x.get(J[0].toLowerCase()),ve+J[0].length):-1}function M(se,ye,ve){return _(se,e,ye,ve)}function D(se,ye,ve){return _(se,n,ye,ve)}function B(se,ye,ve){return _(se,r,ye,ve)}function U(se){return a[se.getDay()]}function V(se){return s[se.getDay()]}function W(se){return c[se.getMonth()]}function H(se){return l[se.getMonth()]}function te(se){return i[+(se.getHours()>=12)]}function X(se){return 1+~~(se.getMonth()/3)}function ie(se){return a[se.getUTCDay()]}function q(se){return s[se.getUTCDay()]}function ae(se){return c[se.getUTCMonth()]}function ge(se){return l[se.getUTCMonth()]}function Fe(se){return i[+(se.getUTCHours()>=12)]}function et(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var ye=A(se+="",v);return ye.toString=function(){return se},ye},parse:function(se){var ye=E(se+="",!1);return ye.toString=function(){return se},ye},utcFormat:function(se){var ye=A(se+="",N);return ye.toString=function(){return se},ye},utcParse:function(se){var ye=E(se+="",!0);return ye.toString=function(){return se},ye}}}var KP={"-":"",_:" ",0:"0"},ln=/^\s*\d+/,P1e=/^%/,k1e=/[\\^$*+?|[\]().{}]/g;function Qe(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function I1e(t){return t.replace(k1e,"\\$&")}function Ru(t){return new RegExp("^(?:"+t.map(I1e).join("|")+")","i")}function $u(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function O1e(t,e,n){var r=ln.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function R1e(t,e,n){var r=ln.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function $1e(t,e,n){var r=ln.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function D1e(t,e,n){var r=ln.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function M1e(t,e,n){var r=ln.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function YP(t,e,n){var r=ln.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function XP(t,e,n){var r=ln.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function L1e(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function F1e(t,e,n){var r=ln.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function V1e(t,e,n){var r=ln.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function QP(t,e,n){var r=ln.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function B1e(t,e,n){var r=ln.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function JP(t,e,n){var r=ln.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function U1e(t,e,n){var r=ln.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function z1e(t,e,n){var r=ln.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function q1e(t,e,n){var r=ln.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function W1e(t,e,n){var r=ln.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function G1e(t,e,n){var r=P1e.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function H1e(t,e,n){var r=ln.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function K1e(t,e,n){var r=ln.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function ZP(t,e){return Qe(t.getDate(),e,2)}function Y1e(t,e){return Qe(t.getHours(),e,2)}function X1e(t,e){return Qe(t.getHours()%12||12,e,2)}function Q1e(t,e){return Qe(1+yh.count(ms(t),t),e,3)}function WL(t,e){return Qe(t.getMilliseconds(),e,3)}function J1e(t,e){return WL(t,e)+"000"}function Z1e(t,e){return Qe(t.getMonth()+1,e,2)}function e_e(t,e){return Qe(t.getMinutes(),e,2)}function t_e(t,e){return Qe(t.getSeconds(),e,2)}function n_e(t){var e=t.getDay();return e===0?7:e}function r_e(t,e){return Qe(bv.count(ms(t)-1,t),e,2)}function GL(t){var e=t.getDay();return e>=4||e===0?uc(t):uc.ceil(t)}function i_e(t,e){return t=GL(t),Qe(uc.count(ms(t),t)+(ms(t).getDay()===4),e,2)}function s_e(t){return t.getDay()}function a_e(t,e){return Qe(Eg.count(ms(t)-1,t),e,2)}function o_e(t,e){return Qe(t.getFullYear()%100,e,2)}function l_e(t,e){return t=GL(t),Qe(t.getFullYear()%100,e,2)}function c_e(t,e){return Qe(t.getFullYear()%1e4,e,4)}function u_e(t,e){var n=t.getDay();return t=n>=4||n===0?uc(t):uc.ceil(t),Qe(t.getFullYear()%1e4,e,4)}function d_e(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Qe(e/60|0,"0",2)+Qe(e%60,"0",2)}function ek(t,e){return Qe(t.getUTCDate(),e,2)}function f_e(t,e){return Qe(t.getUTCHours(),e,2)}function h_e(t,e){return Qe(t.getUTCHours()%12||12,e,2)}function p_e(t,e){return Qe(1+xv.count(gs(t),t),e,3)}function HL(t,e){return Qe(t.getUTCMilliseconds(),e,3)}function m_e(t,e){return HL(t,e)+"000"}function g_e(t,e){return Qe(t.getUTCMonth()+1,e,2)}function y_e(t,e){return Qe(t.getUTCMinutes(),e,2)}function v_e(t,e){return Qe(t.getUTCSeconds(),e,2)}function x_e(t){var e=t.getUTCDay();return e===0?7:e}function b_e(t,e){return Qe(wv.count(gs(t)-1,t),e,2)}function KL(t){var e=t.getUTCDay();return e>=4||e===0?dc(t):dc.ceil(t)}function w_e(t,e){return t=KL(t),Qe(dc.count(gs(t),t)+(gs(t).getUTCDay()===4),e,2)}function __e(t){return t.getUTCDay()}function S_e(t,e){return Qe(Cg.count(gs(t)-1,t),e,2)}function A_e(t,e){return Qe(t.getUTCFullYear()%100,e,2)}function N_e(t,e){return t=KL(t),Qe(t.getUTCFullYear()%100,e,2)}function E_e(t,e){return Qe(t.getUTCFullYear()%1e4,e,4)}function C_e(t,e){var n=t.getUTCDay();return t=n>=4||n===0?dc(t):dc.ceil(t),Qe(t.getUTCFullYear()%1e4,e,4)}function j_e(){return"+0000"}function tk(){return"%"}function nk(t){return+t}function rk(t){return Math.floor(+t/1e3)}var tl,YL,XL;T_e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function T_e(t){return tl=T1e(t),YL=tl.format,tl.parse,XL=tl.utcFormat,tl.utcParse,tl}function P_e(t){return new Date(t)}function k_e(t){return t instanceof Date?+t:+new Date(+t)}function QA(t,e,n,r,i,s,a,l,c,u){var d=MA(),f=d.invert,h=d.domain,m=u(".%L"),y=u(":%S"),g=u("%I:%M"),x=u("%I %p"),w=u("%a %d"),b=u("%b %d"),v=u("%B"),N=u("%Y");function S(A){return(c(A)<A?m:l(A)<A?y:a(A)<A?g:s(A)<A?x:r(A)<A?i(A)<A?w:b:n(A)<A?v:N)(A)}return d.invert=function(A){return new Date(f(A))},d.domain=function(A){return arguments.length?h(Array.from(A,k_e)):h().map(P_e)},d.ticks=function(A){var E=h();return t(E[0],E[E.length-1],A??10)},d.tickFormat=function(A,E){return E==null?S:u(E)},d.nice=function(A){var E=h();return(!A||typeof A.range!="function")&&(A=e(E[0],E[E.length-1],A??10)),A?h(DL(E,A)):d},d.copy=function(){return gh(d,QA(t,e,n,r,i,s,a,l,c,u))},d}function I_e(){return Dr.apply(QA(C1e,j1e,ms,YA,bv,yh,HA,WA,Xa,YL).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function O_e(){return Dr.apply(QA(N1e,E1e,gs,XA,wv,xv,KA,GA,Xa,XL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function _v(){var t=0,e=1,n,r,i,s,a=Mn,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:a(i===0?.5:(f=(s(f)-n)*i,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([t,e]=f,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(a=f,u):a};function d(f){return function(h){var m,y;return arguments.length?([m,y]=h,a=f(m,y),u):[a(0),a(1)]}}return u.range=d(nu),u.rangeRound=d(DA),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,n=f(t),r=f(e),i=n===r?0:1/(r-n),u}}function Ca(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function QL(){var t=Ea(_v()(Mn));return t.copy=function(){return Ca(t,QL())},_s.apply(t,arguments)}function JL(){var t=VA(_v()).domain([1,10]);return t.copy=function(){return Ca(t,JL()).base(t.base())},_s.apply(t,arguments)}function ZL(){var t=BA(_v());return t.copy=function(){return Ca(t,ZL()).constant(t.constant())},_s.apply(t,arguments)}function JA(){var t=UA(_v());return t.copy=function(){return Ca(t,JA()).exponent(t.exponent())},_s.apply(t,arguments)}function R_e(){return JA.apply(null,arguments).exponent(.5)}function e4(){var t=[],e=Mn;function n(r){if(r!=null&&!isNaN(r=+r))return e((ph(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ua),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>bwe(t,s/r))},n.copy=function(){return e4(e).domain(t)},_s.apply(n,arguments)}function Sv(){var t=0,e=.5,n=1,r=1,i,s,a,l,c,u=Mn,d,f=!1,h;function m(g){return isNaN(g=+g)?h:(g=.5+((g=+d(g))-s)*(r*g<r*s?l:c),u(f?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([t,e,n]=g,i=d(t=+t),s=d(e=+e),a=d(n=+n),l=i===s?0:.5/(s-i),c=s===a?0:.5/(a-s),r=s<i?-1:1,m):[t,e,n]},m.clamp=function(g){return arguments.length?(f=!!g,m):f},m.interpolator=function(g){return arguments.length?(u=g,m):u};function y(g){return function(x){var w,b,v;return arguments.length?([w,b,v]=x,u=Gwe(g,[w,b,v]),m):[u(0),u(.5),u(1)]}}return m.range=y(nu),m.rangeRound=y(DA),m.unknown=function(g){return arguments.length?(h=g,m):h},function(g){return d=g,i=g(t),s=g(e),a=g(n),l=i===s?0:.5/(s-i),c=s===a?0:.5/(a-s),r=s<i?-1:1,m}}function t4(){var t=Ea(Sv()(Mn));return t.copy=function(){return Ca(t,t4())},_s.apply(t,arguments)}function n4(){var t=VA(Sv()).domain([.1,1,10]);return t.copy=function(){return Ca(t,n4()).base(t.base())},_s.apply(t,arguments)}function r4(){var t=BA(Sv());return t.copy=function(){return Ca(t,r4()).constant(t.constant())},_s.apply(t,arguments)}function ZA(){var t=UA(Sv());return t.copy=function(){return Ca(t,ZA()).exponent(t.exponent())},_s.apply(t,arguments)}function $_e(){return ZA.apply(null,arguments).exponent(.5)}const ik=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:mf,scaleDiverging:t4,scaleDivergingLog:n4,scaleDivergingPow:ZA,scaleDivergingSqrt:$_e,scaleDivergingSymlog:r4,scaleIdentity:$L,scaleImplicit:Fw,scaleLinear:Ag,scaleLog:ML,scaleOrdinal:OA,scalePoint:vd,scalePow:zA,scaleQuantile:VL,scaleQuantize:BL,scaleRadial:FL,scaleSequential:QL,scaleSequentialLog:JL,scaleSequentialPow:JA,scaleSequentialQuantile:e4,scaleSequentialSqrt:R_e,scaleSequentialSymlog:ZL,scaleSqrt:m1e,scaleSymlog:LL,scaleThreshold:UL,scaleTime:I_e,scaleUtc:O_e,tickFormat:RL},Symbol.toStringTag,{value:"Module"}));var D_e=Gc;function M_e(t,e,n){for(var r=-1,i=t.length;++r<i;){var s=t[r],a=e(s);if(a!=null&&(l===void 0?a===a&&!D_e(a):n(a,l)))var l=a,c=s}return c}var Av=M_e;function L_e(t,e){return t>e}var i4=L_e,F_e=Av,V_e=i4,B_e=tu;function U_e(t){return t&&t.length?F_e(t,B_e,V_e):void 0}var z_e=U_e;const Hs=rt(z_e);function q_e(t,e){return t<e}var s4=q_e,W_e=Av,G_e=s4,H_e=tu;function K_e(t){return t&&t.length?W_e(t,H_e,G_e):void 0}var Y_e=K_e;const Nv=rt(Y_e);var X_e=hA,Q_e=Pi,J_e=pL,Z_e=Zn;function eSe(t,e){var n=Z_e(t)?X_e:J_e;return n(t,Q_e(e))}var tSe=eSe,nSe=fL,rSe=tSe;function iSe(t,e){return nSe(rSe(t,e),1)}var sSe=iSe;const aSe=rt(sSe);var oSe=jA;function lSe(t,e){return oSe(t,e)}var cSe=lSe;const fc=rt(cSe);var ru=1e9,uSe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},tN,St=!0,Rr="[DecimalError] ",lo=Rr+"Invalid argument: ",eN=Rr+"Exponent out of range: ",iu=Math.floor,Ba=Math.pow,dSe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,or,nn=1e7,vt=7,a4=9007199254740991,jg=iu(a4/vt),pe={};pe.absoluteValue=pe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};pe.comparedTo=pe.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};pe.decimalPlaces=pe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*vt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};pe.dividedBy=pe.div=function(t){return Zi(this,new this.constructor(t))};pe.dividedToIntegerBy=pe.idiv=function(t){var e=this,n=e.constructor;return ct(Zi(e,new n(t),0,1),n.precision)};pe.equals=pe.eq=function(t){return!this.cmp(t)};pe.exponent=function(){return qt(this)};pe.greaterThan=pe.gt=function(t){return this.cmp(t)>0};pe.greaterThanOrEqualTo=pe.gte=function(t){return this.cmp(t)>=0};pe.isInteger=pe.isint=function(){return this.e>this.d.length-2};pe.isNegative=pe.isneg=function(){return this.s<0};pe.isPositive=pe.ispos=function(){return this.s>0};pe.isZero=function(){return this.s===0};pe.lessThan=pe.lt=function(t){return this.cmp(t)<0};pe.lessThanOrEqualTo=pe.lte=function(t){return this.cmp(t)<1};pe.logarithm=pe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(or))throw Error(Rr+"NaN");if(n.s<1)throw Error(Rr+(n.s?"NaN":"-Infinity"));return n.eq(or)?new r(0):(St=!1,e=Zi(bf(n,s),bf(t,s),s),St=!0,ct(e,i))};pe.minus=pe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?c4(e,t):o4(e,(t.s=-t.s,t))};pe.modulo=pe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Rr+"NaN");return n.s?(St=!1,e=Zi(n,t,0,1).times(t),St=!0,n.minus(e)):ct(new r(n),i)};pe.naturalExponential=pe.exp=function(){return l4(this)};pe.naturalLogarithm=pe.ln=function(){return bf(this)};pe.negated=pe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};pe.plus=pe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?o4(e,t):c4(e,(t.s=-t.s,t))};pe.precision=pe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(lo+t);if(e=qt(i)+1,r=i.d.length-1,n=r*vt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};pe.squareRoot=pe.sqrt=function(){var t,e,n,r,i,s,a,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Rr+"NaN")}for(t=qt(l),St=!1,i=Math.sqrt(+l),i==0||i==1/0?(e=ci(l.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=iu((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new c(e)):r=new c(i.toString()),n=c.precision,i=a=n+3;;)if(s=r,r=s.plus(Zi(l,s,a+2)).times(.5),ci(s.d).slice(0,a)===(e=ci(r.d)).slice(0,a)){if(e=e.slice(a-3,a+1),i==a&&e=="4999"){if(ct(s,n+1,0),s.times(s).eq(l)){r=s;break}}else if(e!="9999")break;a+=4}return St=!0,ct(r,n)};pe.times=pe.mul=function(t){var e,n,r,i,s,a,l,c,u,d=this,f=d.constructor,h=d.d,m=(t=new f(t)).d;if(!d.s||!t.s)return new f(0);for(t.s*=d.s,n=d.e+t.e,c=h.length,u=m.length,c<u&&(s=h,h=m,m=s,a=c,c=u,u=a),s=[],a=c+u,r=a;r--;)s.push(0);for(r=u;--r>=0;){for(e=0,i=c+r;i>r;)l=s[i]+m[r]*h[i-r-1]+e,s[i--]=l%nn|0,e=l/nn|0;s[i]=(s[i]+e)%nn|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,St?ct(t,f.precision):t};pe.toDecimalPlaces=pe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Ai(t,0,ru),e===void 0?e=r.rounding:Ai(e,0,8),ct(n,t+qt(n)+1,e))};pe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=jo(r,!0):(Ai(t,0,ru),e===void 0?e=i.rounding:Ai(e,0,8),r=ct(new i(r),t+1,e),n=jo(r,!0,t+1)),n};pe.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?jo(i):(Ai(t,0,ru),e===void 0?e=s.rounding:Ai(e,0,8),r=ct(new s(i),t+qt(i)+1,e),n=jo(r.abs(),!1,t+qt(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};pe.toInteger=pe.toint=function(){var t=this,e=t.constructor;return ct(new e(t),qt(t)+1,e.rounding)};pe.toNumber=function(){return+this};pe.toPower=pe.pow=function(t){var e,n,r,i,s,a,l=this,c=l.constructor,u=12,d=+(t=new c(t));if(!t.s)return new c(or);if(l=new c(l),!l.s){if(t.s<1)throw Error(Rr+"Infinity");return l}if(l.eq(or))return l;if(r=c.precision,t.eq(or))return ct(l,r);if(e=t.e,n=t.d.length-1,a=e>=n,s=l.s,a){if((n=d<0?-d:d)<=a4){for(i=new c(or),e=Math.ceil(r/vt+4),St=!1;n%2&&(i=i.times(l),ak(i.d,e)),n=iu(n/2),n!==0;)l=l.times(l),ak(l.d,e);return St=!0,t.s<0?new c(or).div(i):ct(i,r)}}else if(s<0)throw Error(Rr+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,l.s=1,St=!1,i=t.times(bf(l,r+u)),St=!0,i=l4(i),i.s=s,i};pe.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=qt(i),r=jo(i,n<=s.toExpNeg||n>=s.toExpPos)):(Ai(t,1,ru),e===void 0?e=s.rounding:Ai(e,0,8),i=ct(new s(i),t,e),n=qt(i),r=jo(i,t<=n||n<=s.toExpNeg,t)),r};pe.toSignificantDigits=pe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Ai(t,1,ru),e===void 0?e=r.rounding:Ai(e,0,8)),ct(new r(n),t,e)};pe.toString=pe.valueOf=pe.val=pe.toJSON=pe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=qt(t),n=t.constructor;return jo(t,e<=n.toExpNeg||e>=n.toExpPos)};function o4(t,e){var n,r,i,s,a,l,c,u,d=t.constructor,f=d.precision;if(!t.s||!e.s)return e.s||(e=new d(t)),St?ct(e,f):e;if(c=t.d,u=e.d,a=t.e,i=e.e,c=c.slice(),s=a-i,s){for(s<0?(r=c,s=-s,l=u.length):(r=u,i=a,l=c.length),a=Math.ceil(f/vt),l=a>l?a+1:l+1,s>l&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,r=u,u=c,c=r),n=0;s;)n=(c[--s]=c[s]+u[s]+n)/nn|0,c[s]%=nn;for(n&&(c.unshift(n),++i),l=c.length;c[--l]==0;)c.pop();return e.d=c,e.e=i,St?ct(e,f):e}function Ai(t,e,n){if(t!==~~t||t<e||t>n)throw Error(lo+t)}function ci(t){var e,n,r,i=t.length-1,s="",a=t[0];if(i>0){for(s+=a,e=1;e<i;e++)r=t[e]+"",n=vt-r.length,n&&(s+=$s(n)),s+=r;a=t[e],r=a+"",n=vt-r.length,n&&(s+=$s(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var Zi=function(){function t(r,i){var s,a=0,l=r.length;for(r=r.slice();l--;)s=r[l]*i+a,r[l]=s%nn|0,a=s/nn|0;return a&&r.unshift(a),r}function e(r,i,s,a){var l,c;if(s!=a)c=s>a?1:-1;else for(l=c=0;l<s;l++)if(r[l]!=i[l]){c=r[l]>i[l]?1:-1;break}return c}function n(r,i,s){for(var a=0;s--;)r[s]-=a,a=r[s]<i[s]?1:0,r[s]=a*nn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,a){var l,c,u,d,f,h,m,y,g,x,w,b,v,N,S,A,E,_,C=r.constructor,P=r.s==i.s?1:-1,T=r.d,O=i.d;if(!r.s)return new C(r);if(!i.s)throw Error(Rr+"Division by zero");for(c=r.e-i.e,E=O.length,S=T.length,m=new C(P),y=m.d=[],u=0;O[u]==(T[u]||0);)++u;if(O[u]>(T[u]||0)&&--c,s==null?b=s=C.precision:a?b=s+(qt(r)-qt(i))+1:b=s,b<0)return new C(0);if(b=b/vt+2|0,u=0,E==1)for(d=0,O=O[0],b++;(u<S||d)&&b--;u++)v=d*nn+(T[u]||0),y[u]=v/O|0,d=v%O|0;else{for(d=nn/(O[0]+1)|0,d>1&&(O=t(O,d),T=t(T,d),E=O.length,S=T.length),N=E,g=T.slice(0,E),x=g.length;x<E;)g[x++]=0;_=O.slice(),_.unshift(0),A=O[0],O[1]>=nn/2&&++A;do d=0,l=e(O,g,E,x),l<0?(w=g[0],E!=x&&(w=w*nn+(g[1]||0)),d=w/A|0,d>1?(d>=nn&&(d=nn-1),f=t(O,d),h=f.length,x=g.length,l=e(f,g,h,x),l==1&&(d--,n(f,E<h?_:O,h))):(d==0&&(l=d=1),f=O.slice()),h=f.length,h<x&&f.unshift(0),n(g,f,x),l==-1&&(x=g.length,l=e(O,g,E,x),l<1&&(d++,n(g,E<x?_:O,x))),x=g.length):l===0&&(d++,g=[0]),y[u++]=d,l&&g[0]?g[x++]=T[N]||0:(g=[T[N]],x=1);while((N++<S||g[0]!==void 0)&&b--)}return y[0]||y.shift(),m.e=c,ct(m,a?s+qt(m)+1:s)}}();function l4(t,e){var n,r,i,s,a,l,c=0,u=0,d=t.constructor,f=d.precision;if(qt(t)>16)throw Error(eN+qt(t));if(!t.s)return new d(or);for(St=!1,l=f,a=new d(.03125);t.abs().gte(.1);)t=t.times(a),u+=5;for(r=Math.log(Ba(2,u))/Math.LN10*2+5|0,l+=r,n=i=s=new d(or),d.precision=l;;){if(i=ct(i.times(t),l),n=n.times(++c),a=s.plus(Zi(i,n,l)),ci(a.d).slice(0,l)===ci(s.d).slice(0,l)){for(;u--;)s=ct(s.times(s),l);return d.precision=f,e==null?(St=!0,ct(s,f)):s}s=a}}function qt(t){for(var e=t.e*vt,n=t.d[0];n>=10;n/=10)e++;return e}function fx(t,e,n){if(e>t.LN10.sd())throw St=!0,n&&(t.precision=n),Error(Rr+"LN10 precision limit exceeded");return ct(new t(t.LN10),e)}function $s(t){for(var e="";t--;)e+="0";return e}function bf(t,e){var n,r,i,s,a,l,c,u,d,f=1,h=10,m=t,y=m.d,g=m.constructor,x=g.precision;if(m.s<1)throw Error(Rr+(m.s?"NaN":"-Infinity"));if(m.eq(or))return new g(0);if(e==null?(St=!1,u=x):u=e,m.eq(10))return e==null&&(St=!0),fx(g,u);if(u+=h,g.precision=u,n=ci(y),r=n.charAt(0),s=qt(m),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)m=m.times(t),n=ci(m.d),r=n.charAt(0),f++;s=qt(m),r>1?(m=new g("0."+n),s++):m=new g(r+"."+n.slice(1))}else return c=fx(g,u+2,x).times(s+""),m=bf(new g(r+"."+n.slice(1)),u-h).plus(c),g.precision=x,e==null?(St=!0,ct(m,x)):m;for(l=a=m=Zi(m.minus(or),m.plus(or),u),d=ct(m.times(m),u),i=3;;){if(a=ct(a.times(d),u),c=l.plus(Zi(a,new g(i),u)),ci(c.d).slice(0,u)===ci(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(fx(g,u+2,x).times(s+""))),l=Zi(l,new g(f),u),g.precision=x,e==null?(St=!0,ct(l,x)):l;l=c,i+=2}}function sk(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=iu(n/vt),t.d=[],r=(n+1)%vt,n<0&&(r+=vt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=vt;r<i;)t.d.push(+e.slice(r,r+=vt));e=e.slice(r),r=vt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),St&&(t.e>jg||t.e<-jg))throw Error(eN+n)}else t.s=0,t.e=0,t.d=[0];return t}function ct(t,e,n){var r,i,s,a,l,c,u,d,f=t.d;for(a=1,s=f[0];s>=10;s/=10)a++;if(r=e-a,r<0)r+=vt,i=e,u=f[d=0];else{if(d=Math.ceil((r+1)/vt),s=f.length,d>=s)return t;for(u=s=f[d],a=1;s>=10;s/=10)a++;r%=vt,i=r-vt+a}if(n!==void 0&&(s=Ba(10,a-i-1),l=u/s%10|0,c=e<0||f[d+1]!==void 0||u%s,c=n<4?(l||c)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(r>0?i>0?u/Ba(10,a-i):0:f[d-1])%10&1||n==(t.s<0?8:7))),e<1||!f[0])return c?(s=qt(t),f.length=1,e=e-s-1,f[0]=Ba(10,(vt-e%vt)%vt),t.e=iu(-e/vt)||0):(f.length=1,f[0]=t.e=t.s=0),t;if(r==0?(f.length=d,s=1,d--):(f.length=d+1,s=Ba(10,vt-r),f[d]=i>0?(u/Ba(10,a-i)%Ba(10,i)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==nn&&(f[0]=1,++t.e);break}else{if(f[d]+=s,f[d]!=nn)break;f[d--]=0,s=1}for(r=f.length;f[--r]===0;)f.pop();if(St&&(t.e>jg||t.e<-jg))throw Error(eN+qt(t));return t}function c4(t,e){var n,r,i,s,a,l,c,u,d,f,h=t.constructor,m=h.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new h(t),St?ct(e,m):e;if(c=t.d,f=e.d,r=e.e,u=t.e,c=c.slice(),a=u-r,a){for(d=a<0,d?(n=c,a=-a,l=f.length):(n=f,r=u,l=c.length),i=Math.max(Math.ceil(m/vt),l)+2,a>i&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for(i=c.length,l=f.length,d=i<l,d&&(l=i),i=0;i<l;i++)if(c[i]!=f[i]){d=c[i]<f[i];break}a=0}for(d&&(n=c,c=f,f=n,e.s=-e.s),l=c.length,i=f.length-l;i>0;--i)c[l++]=0;for(i=f.length;i>a;){if(c[--i]<f[i]){for(s=i;s&&c[--s]===0;)c[s]=nn-1;--c[s],c[i]+=nn}c[i]-=f[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--r;return c[0]?(e.d=c,e.e=r,St?ct(e,m):e):new h(0)}function jo(t,e,n){var r,i=qt(t),s=ci(t.d),a=s.length;return e?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+$s(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+$s(-i-1)+s,n&&(r=n-a)>0&&(s+=$s(r))):i>=a?(s+=$s(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+$s(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=$s(r))),t.s<0?"-"+s:s}function ak(t,e){if(t.length>e)return t.length=e,!0}function u4(t){var e,n,r;function i(s){var a=this;if(!(a instanceof i))return new i(s);if(a.constructor=i,s instanceof i){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(lo+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return sk(a,s.toString())}else if(typeof s!="string")throw Error(lo+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,dSe.test(s))sk(a,s);else throw Error(lo+s)}if(i.prototype=pe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=u4,i.config=i.set=fSe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function fSe(t){if(!t||typeof t!="object")throw Error(Rr+"Object expected");var e,n,r,i=["precision",1,ru,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(iu(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(lo+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(lo+n+": "+r);return this}var tN=u4(uSe);or=new tN(1);const ot=tN;function hSe(t){return ySe(t)||gSe(t)||mSe(t)||pSe()}function pSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mSe(t,e){if(t){if(typeof t=="string")return zw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zw(t,e)}}function gSe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function ySe(t){if(Array.isArray(t))return zw(t)}function zw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var vSe=function(e){return e},d4={},f4=function(e){return e===d4},ok=function(e){return function n(){return arguments.length===0||arguments.length===1&&f4(arguments.length<=0?void 0:arguments[0])?n:e.apply(void 0,arguments)}},xSe=function t(e,n){return e===1?n:ok(function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var a=i.filter(function(l){return l!==d4}).length;return a>=e?n.apply(void 0,i):t(e-a,ok(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=i.map(function(f){return f4(f)?c.shift():f});return n.apply(void 0,hSe(d).concat(c))}))})},Ev=function(e){return xSe(e.length,e)},qw=function(e,n){for(var r=[],i=e;i<n;++i)r[i-e]=i;return r},bSe=Ev(function(t,e){return Array.isArray(e)?e.map(t):Object.keys(e).map(function(n){return e[n]}).map(t)}),wSe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return vSe;var i=n.reverse(),s=i[0],a=i.slice(1);return function(){return a.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},Ww=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},h4=function(e){var n=null,r=null;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return n&&s.every(function(l,c){return l===n[c]})||(n=s,r=e.apply(void 0,s)),r}};function _Se(t){var e;return t===0?e=1:e=Math.floor(new ot(t).abs().log(10).toNumber())+1,e}function SSe(t,e,n){for(var r=new ot(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var ASe=Ev(function(t,e,n){var r=+t,i=+e;return r+n*(i-r)}),NSe=Ev(function(t,e,n){var r=e-+t;return r=r||1/0,(n-t)/r}),ESe=Ev(function(t,e,n){var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});const Cv={rangeStep:SSe,getDigitCount:_Se,interpolateNumber:ASe,uninterpolateNumber:NSe,uninterpolateTruncation:ESe};function Gw(t){return TSe(t)||jSe(t)||p4(t)||CSe()}function CSe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jSe(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}function TSe(t){if(Array.isArray(t))return Hw(t)}function wf(t,e){return ISe(t)||kSe(t,e)||p4(t,e)||PSe()}function PSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p4(t,e){if(t){if(typeof t=="string")return Hw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hw(t,e)}}function Hw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kSe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,s=void 0;try{for(var a=t[Symbol.iterator](),l;!(r=(l=a.next()).done)&&(n.push(l.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,s=c}finally{try{!r&&a.return!=null&&a.return()}finally{if(i)throw s}}return n}}function ISe(t){if(Array.isArray(t))return t}function m4(t){var e=wf(t,2),n=e[0],r=e[1],i=n,s=r;return n>r&&(i=r,s=n),[i,s]}function g4(t,e,n){if(t.lte(0))return new ot(0);var r=Cv.getDigitCount(t.toNumber()),i=new ot(10).pow(r),s=t.div(i),a=r!==1?.05:.1,l=new ot(Math.ceil(s.div(a).toNumber())).add(n).mul(a),c=l.mul(i);return e?c:new ot(Math.ceil(c))}function OSe(t,e,n){var r=1,i=new ot(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new ot(10).pow(Cv.getDigitCount(t)-1),i=new ot(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new ot(Math.floor(t)))}else t===0?i=new ot(Math.floor((e-1)/2)):n||(i=new ot(Math.floor(t)));var a=Math.floor((e-1)/2),l=wSe(bSe(function(c){return i.add(new ot(c-a).mul(r)).toNumber()}),qw);return l(0,e)}function y4(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((e-t)/(n-1)))return{step:new ot(0),tickMin:new ot(0),tickMax:new ot(0)};var s=g4(new ot(e).sub(t).div(n-1),r,i),a;t<=0&&e>=0?a=new ot(0):(a=new ot(t).add(e).div(2),a=a.sub(new ot(a).mod(s)));var l=Math.ceil(a.sub(t).div(s).toNumber()),c=Math.ceil(new ot(e).sub(a).div(s).toNumber()),u=l+c+1;return u>n?y4(t,e,n,r,i+1):(u<n&&(c=e>0?c+(n-u):c,l=e>0?l:l+(n-u)),{step:s,tickMin:a.sub(new ot(l).mul(s)),tickMax:a.add(new ot(c).mul(s))})}function RSe(t){var e=wf(t,2),n=e[0],r=e[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(i,2),l=m4([n,r]),c=wf(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(Gw(qw(0,i-1).map(function(){return 1/0}))):[].concat(Gw(qw(0,i-1).map(function(){return-1/0})),[d]);return n>r?Ww(f):f}if(u===d)return OSe(u,i,s);var h=y4(u,d,a,s),m=h.step,y=h.tickMin,g=h.tickMax,x=Cv.rangeStep(y,g.add(new ot(.1).mul(m)),m);return n>r?Ww(x):x}function $Se(t,e){var n=wf(t,2),r=n[0],i=n[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=m4([r,i]),l=wf(a,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[r,i];if(c===u)return[c];var d=Math.max(e,2),f=g4(new ot(u).sub(c).div(d-1),s,0),h=[].concat(Gw(Cv.rangeStep(new ot(c),new ot(u).sub(new ot(.99).mul(f)),f)),[u]);return r>i?Ww(h):h}var DSe=h4(RSe),MSe=h4($Se),LSe="Invariant failed";function To(t,e){throw new Error(LSe)}var FSe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function hc(t){"@babel/helpers - typeof";return hc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hc(t)}function Tg(){return Tg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tg.apply(this,arguments)}function VSe(t,e){return qSe(t)||zSe(t,e)||USe(t,e)||BSe()}function BSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function USe(t,e){if(t){if(typeof t=="string")return lk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lk(t,e)}}function lk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zSe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function qSe(t){if(Array.isArray(t))return t}function WSe(t,e){if(t==null)return{};var n=GSe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function GSe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function HSe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function KSe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,b4(r.key),r)}}function YSe(t,e,n){return e&&KSe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function XSe(t,e,n){return e=Pg(e),QSe(t,v4()?Reflect.construct(e,n||[],Pg(t).constructor):e.apply(t,n))}function QSe(t,e){if(e&&(hc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JSe(t)}function JSe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v4=function(){return!!t})()}function Pg(t){return Pg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Pg(t)}function ZSe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kw(t,e)}function Kw(t,e){return Kw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Kw(t,e)}function x4(t,e,n){return e=b4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b4(t){var e=eAe(t,"string");return hc(e)=="symbol"?e:e+""}function eAe(t,e){if(hc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var jv=function(t){function e(){return HSe(this,e),XSe(this,e,arguments)}return ZSe(e,t),YSe(e,[{key:"render",value:function(){var r=this.props,i=r.offset,s=r.layout,a=r.width,l=r.dataKey,c=r.data,u=r.dataPointFormatter,d=r.xAxis,f=r.yAxis,h=WSe(r,FSe),m=xe(h,!1);this.props.direction==="x"&&d.type!=="number"&&To();var y=c.map(function(g){var x=u(g,l),w=x.x,b=x.y,v=x.value,N=x.errorVal;if(!N)return null;var S=[],A,E;if(Array.isArray(N)){var _=VSe(N,2);A=_[0],E=_[1]}else A=E=N;if(s==="vertical"){var C=d.scale,P=b+i,T=P+a,O=P-a,R=C(v-A),M=C(v+E);S.push({x1:M,y1:T,x2:M,y2:O}),S.push({x1:R,y1:P,x2:M,y2:P}),S.push({x1:R,y1:T,x2:R,y2:O})}else if(s==="horizontal"){var D=f.scale,B=w+i,U=B-a,V=B+a,W=D(v-A),H=D(v+E);S.push({x1:U,y1:H,x2:V,y2:H}),S.push({x1:B,y1:W,x2:B,y2:H}),S.push({x1:U,y1:W,x2:V,y2:W})}return L.createElement(Ge,Tg({className:"recharts-errorBar",key:"bar-".concat(S.map(function(te){return"".concat(te.x1,"-").concat(te.x2,"-").concat(te.y1,"-").concat(te.y2)}))},m),S.map(function(te){return L.createElement("line",Tg({},te,{key:"line-".concat(te.x1,"-").concat(te.x2,"-").concat(te.y1,"-").concat(te.y2)}))}))});return L.createElement(Ge,{className:"recharts-errorBars"},y)}}])}(L.Component);x4(jv,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});x4(jv,"displayName","ErrorBar");function _f(t){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_f(t)}function ck(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Oa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ck(Object(n),!0).forEach(function(r){tAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ck(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tAe(t,e,n){return e=nAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nAe(t){var e=rAe(t,"string");return _f(e)=="symbol"?e:e+""}function rAe(t,e){if(_f(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var w4=function(e){var n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,s=e.legendContent,a=rr(n,ao);if(!a)return null;var l=ao.defaultProps,c=l!==void 0?Oa(Oa({},l),a.props):{},u;return a.props&&a.props.payload?u=a.props&&a.props.payload:s==="children"?u=(r||[]).reduce(function(d,f){var h=f.item,m=f.props,y=m.sectors||m.data||[];return d.concat(y.map(function(g){return{type:a.props.iconType||h.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(r||[]).map(function(d){var f=d.item,h=f.type.defaultProps,m=h!==void 0?Oa(Oa({},h),f.props):{},y=m.dataKey,g=m.name,x=m.legendType,w=m.hide;return{inactive:w,dataKey:y,type:c.iconType||x||"square",color:nN(f),value:g||y,payload:m}}),Oa(Oa(Oa({},c),ao.getWithHeight(a,i)),{},{payload:u,item:a})};function Sf(t){"@babel/helpers - typeof";return Sf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sf(t)}function uk(t){return oAe(t)||aAe(t)||sAe(t)||iAe()}function iAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sAe(t,e){if(t){if(typeof t=="string")return Yw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yw(t,e)}}function aAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function oAe(t){if(Array.isArray(t))return Yw(t)}function Yw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dk(Object(n),!0).forEach(function(r){Ll(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ll(t,e,n){return e=lAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lAe(t){var e=cAe(t,"string");return Sf(e)=="symbol"?e:e+""}function cAe(t,e){if(Sf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Xt(t,e,n){return ke(t)||ke(e)?n:Jt(e)?fr(t,e,n):Ae(e)?e(t):n}function xd(t,e,n,r){var i=aSe(t,function(l){return Xt(l,e)});if(n==="number"){var s=i.filter(function(l){return ne(l)||parseFloat(l)});return s.length?[Nv(s),Hs(s)]:[1/0,-1/0]}var a=r?i.filter(function(l){return!ke(l)}):i;return a.map(function(l){return Jt(l)||l instanceof Date?l:""})}var uAe=function(e){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=-1,l=(n=r==null?void 0:r.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var d=u>0?i[u-1].coordinate:i[l-1].coordinate,f=i[u].coordinate,h=u>=l-1?i[0].coordinate:i[u+1].coordinate,m=void 0;if($n(f-d)!==$n(h-f)){var y=[];if($n(h-f)===$n(c[1]-c[0])){m=h;var g=f+c[1]-c[0];y[0]=Math.min(g,(g+d)/2),y[1]=Math.max(g,(g+d)/2)}else{m=d;var x=h+c[1]-c[0];y[0]=Math.min(f,(x+f)/2),y[1]=Math.max(f,(x+f)/2)}var w=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(e>w[0]&&e<=w[1]||e>=y[0]&&e<=y[1]){a=i[u].index;break}}else{var b=Math.min(d,h),v=Math.max(d,h);if(e>(b+f)/2&&e<=(v+f)/2){a=i[u].index;break}}}else for(var N=0;N<l;N++)if(N===0&&e<=(r[N].coordinate+r[N+1].coordinate)/2||N>0&&N<l-1&&e>(r[N].coordinate+r[N-1].coordinate)/2&&e<=(r[N].coordinate+r[N+1].coordinate)/2||N===l-1&&e>(r[N].coordinate+r[N-1].coordinate)/2){a=r[N].index;break}return a},nN=function(e){var n,r=e,i=r.type.displayName,s=(n=e.type)!==null&&n!==void 0&&n.defaultProps?Ot(Ot({},e.type.defaultProps),e.props):e.props,a=s.stroke,l=s.fill,c;switch(i){case"Line":c=a;break;case"Area":case"Radar":c=a&&a!=="none"?a:l;break;default:c=l;break}return c},dAe=function(e){var n=e.barSize,r=e.totalSize,i=e.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var a={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var d=s[l[c]].stackGroups,f=Object.keys(d),h=0,m=f.length;h<m;h++){var y=d[f[h]],g=y.items,x=y.cateAxisId,w=g.filter(function(E){return Ji(E.type).indexOf("Bar")>=0});if(w&&w.length){var b=w[0].type.defaultProps,v=b!==void 0?Ot(Ot({},b),w[0].props):w[0].props,N=v.barSize,S=v[x];a[S]||(a[S]=[]);var A=ke(N)?n:N;a[S].push({item:w[0],stackList:w.slice(1),barSize:ke(A)?void 0:Dn(A,r,0)})}}return a},fAe=function(e){var n=e.barGap,r=e.barCategoryGap,i=e.bandSize,s=e.sizeList,a=s===void 0?[]:s,l=e.maxBarSize,c=a.length;if(c<1)return null;var u=Dn(n,i,0,!0),d,f=[];if(a[0].barSize===+a[0].barSize){var h=!1,m=i/c,y=a.reduce(function(N,S){return N+S.barSize||0},0);y+=(c-1)*u,y>=i&&(y-=(c-1)*u,u=0),y>=i&&m>0&&(h=!0,m*=.9,y=c*m);var g=(i-y)/2>>0,x={offset:g-u,size:0};d=a.reduce(function(N,S){var A={item:S.item,position:{offset:x.offset+x.size+u,size:h?m:S.barSize}},E=[].concat(uk(N),[A]);return x=E[E.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(_){E.push({item:_,position:x})}),E},f)}else{var w=Dn(r,i,0,!0);i-2*w-(c-1)*u<=0&&(u=0);var b=(i-2*w-(c-1)*u)/c;b>1&&(b>>=0);var v=l===+l?Math.min(b,l):b;d=a.reduce(function(N,S,A){var E=[].concat(uk(N),[{item:S.item,position:{offset:w+(b+u)*A+(b-v)/2,size:v}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(_){E.push({item:_,position:E[E.length-1].position})}),E},f)}return d},hAe=function(e,n,r,i){var s=r.children,a=r.width,l=r.margin,c=a-(l.left||0)-(l.right||0),u=w4({children:s,legendWidth:c});if(u){var d=i||{},f=d.width,h=d.height,m=u.align,y=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&y==="middle")&&m!=="center"&&ne(e[m]))return Ot(Ot({},e),{},Ll({},m,e[m]+(f||0)));if((g==="horizontal"||g==="vertical"&&m==="center")&&y!=="middle"&&ne(e[y]))return Ot(Ot({},e),{},Ll({},y,e[y]+(h||0)))}return e},pAe=function(e,n,r){return ke(n)?!0:e==="horizontal"?n==="yAxis":e==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},_4=function(e,n,r,i,s){var a=n.props.children,l=Pr(a,jv).filter(function(u){return pAe(i,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return e.reduce(function(u,d){var f=Xt(d,r);if(ke(f))return u;var h=Array.isArray(f)?[Nv(f),Hs(f)]:[f,f],m=c.reduce(function(y,g){var x=Xt(d,g,0),w=h[0]-Math.abs(Array.isArray(x)?x[0]:x),b=h[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(w,y[0]),Math.max(b,y[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},mAe=function(e,n,r,i,s){var a=n.map(function(l){return _4(e,l,r,s,i)}).filter(function(l){return!ke(l)});return a&&a.length?a.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},S4=function(e,n,r,i,s){var a=n.map(function(c){var u=c.props.dataKey;return r==="number"&&u&&_4(e,c,u,i)||xd(e,u,r,s)});if(r==="number")return a.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return a.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},A4=function(e,n){return e==="horizontal"&&n==="xAxis"||e==="vertical"&&n==="yAxis"||e==="centric"&&n==="angleAxis"||e==="radial"&&n==="radiusAxis"},N4=function(e,n,r,i){if(i)return e.map(function(c){return c.coordinate});var s,a,l=e.map(function(c){return c.coordinate===n&&(s=!0),c.coordinate===r&&(a=!0),c.coordinate});return s||l.push(n),a||l.push(r),l},Ki=function(e,n,r){if(!e)return null;var i=e.scale,s=e.duplicateDomain,a=e.type,l=e.range,c=e.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(n||r)&&a==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=e.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?$n(l[0]-l[1])*2*u:u,n&&(e.ticks||e.niceTicks)){var d=(e.ticks||e.niceTicks).map(function(f){var h=s?s.indexOf(f):f;return{coordinate:i(h)+u,value:f,offset:u}});return d.filter(function(f){return!Qc(f.coordinate)})}return e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(f,h){return{coordinate:i(f)+u,value:f,index:h,offset:u}}):i.ticks&&!r?i.ticks(e.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,h){return{coordinate:i(f)+u,value:s?s[f]:f,index:h,offset:u}})},hx=new WeakMap,wp=function(e,n){if(typeof n!="function")return e;hx.has(e)||hx.set(e,new WeakMap);var r=hx.get(e);if(r.has(n))return r.get(n);var i=function(){e.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,i),i},E4=function(e,n,r){var i=e.scale,s=e.type,a=e.layout,l=e.axisType;if(i==="auto")return a==="radial"&&l==="radiusAxis"?{scale:mf(),realScaleType:"band"}:a==="radial"&&l==="angleAxis"?{scale:Ag(),realScaleType:"linear"}:s==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:vd(),realScaleType:"point"}:s==="category"?{scale:mf(),realScaleType:"band"}:{scale:Ag(),realScaleType:"linear"};if(No(i)){var c="scale".concat(uv(i));return{scale:(ik[c]||vd)(),realScaleType:ik[c]?c:"point"}}return Ae(i)?{scale:i}:{scale:vd(),realScaleType:"point"}},fk=1e-4,C4=function(e){var n=e.domain();if(!(!n||n.length<=2)){var r=n.length,i=e.range(),s=Math.min(i[0],i[1])-fk,a=Math.max(i[0],i[1])+fk,l=e(n[0]),c=e(n[r-1]);(l<s||l>a||c<s||c>a)&&e.domain([n[0],n[r-1]])}},gAe=function(e,n){if(!e)return null;for(var r=0,i=e.length;r<i;r++)if(e[r].item===n)return e[r].position;return null},yAe=function(e,n){if(!n||n.length!==2||!ne(n[0])||!ne(n[1]))return e;var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]),s=[e[0],e[1]];return(!ne(e[0])||e[0]<r)&&(s[0]=r),(!ne(e[1])||e[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<r&&(s[1]=r),s},vAe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,a=0,l=0;l<n;++l){var c=Qc(e[l][r][1])?e[l][r][0]:e[l][r][1];c>=0?(e[l][r][0]=s,e[l][r][1]=s+c,s=e[l][r][1]):(e[l][r][0]=a,e[l][r][1]=a+c,a=e[l][r][1])}},xAe=function(e){var n=e.length;if(!(n<=0))for(var r=0,i=e[0].length;r<i;++r)for(var s=0,a=0;a<n;++a){var l=Qc(e[a][r][1])?e[a][r][0]:e[a][r][1];l>=0?(e[a][r][0]=s,e[a][r][1]=s+l,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}},bAe={sign:vAe,expand:Ffe,none:ic,silhouette:Vfe,wiggle:Bfe,positive:xAe},wAe=function(e,n,r){var i=n.map(function(l){return l.props.dataKey}),s=bAe[r],a=Lfe().keys(i).value(function(l,c){return+Xt(l,c,0)}).order(bw).offset(s);return a(e)},_Ae=function(e,n,r,i,s,a){if(!e)return null;var l=a?n.reverse():n,c={},u=l.reduce(function(f,h){var m,y=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Ot(Ot({},h.type.defaultProps),h.props):h.props,g=y.stackId,x=y.hide;if(x)return f;var w=y[r],b=f[w]||{hasStack:!1,stackGroups:{}};if(Jt(g)){var v=b.stackGroups[g]||{numericAxisId:r,cateAxisId:i,items:[]};v.items.push(h),b.hasStack=!0,b.stackGroups[g]=v}else b.stackGroups[Jc("_stackId_")]={numericAxisId:r,cateAxisId:i,items:[h]};return Ot(Ot({},f),{},Ll({},w,b))},c),d={};return Object.keys(u).reduce(function(f,h){var m=u[h];if(m.hasStack){var y={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(g,x){var w=m.stackGroups[x];return Ot(Ot({},g),{},Ll({},x,{numericAxisId:r,cateAxisId:i,items:w.items,stackedData:wAe(e,w.items,s)}))},y)}return Ot(Ot({},f),{},Ll({},h,m))},d)},j4=function(e,n){var r=n.realScaleType,i=n.type,s=n.tickCount,a=n.originalDomain,l=n.allowDecimals,c=r||n.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&i==="number"&&a&&(a[0]==="auto"||a[1]==="auto")){var u=e.domain();if(!u.length)return null;var d=DSe(u,s,l);return e.domain([Nv(d),Hs(d)]),{niceTicks:d}}if(s&&i==="number"){var f=e.domain(),h=MSe(f,s,l);return{niceTicks:h}}return null};function hk(t){var e=t.axis,n=t.ticks,r=t.bandSize,i=t.entry,s=t.index,a=t.dataKey;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!ke(i[e.dataKey])){var l=tg(n,"value",i[e.dataKey]);if(l)return l.coordinate+r/2}return n[s]?n[s].coordinate+r/2:null}var c=Xt(i,ke(a)?e.dataKey:a);return ke(c)?null:e.scale(c)}var pk=function(e){var n=e.axis,r=e.ticks,i=e.offset,s=e.bandSize,a=e.entry,l=e.index;if(n.type==="category")return r[l]?r[l].coordinate+i:null;var c=Xt(a,n.dataKey,n.domain[l]);return ke(c)?null:n.scale(c)-s/2+i},SAe=function(e){var n=e.numericAxis,r=n.scale.domain();if(n.type==="number"){var i=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return i<=0&&s>=0?0:s<0?s:i}return r[0]},AAe=function(e,n){var r,i=(r=e.type)!==null&&r!==void 0&&r.defaultProps?Ot(Ot({},e.type.defaultProps),e.props):e.props,s=i.stackId;if(Jt(s)){var a=n[s];if(a){var l=a.items.indexOf(e);return l>=0?a.stackedData[l]:null}}return null},NAe=function(e){return e.reduce(function(n,r){return[Nv(r.concat([n[0]]).filter(ne)),Hs(r.concat([n[1]]).filter(ne))]},[1/0,-1/0])},T4=function(e,n,r){return Object.keys(e).reduce(function(i,s){var a=e[s],l=a.stackedData,c=l.reduce(function(u,d){var f=NAe(d.slice(n,r+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},mk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,gk=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Xw=function(e,n,r){if(Ae(e))return e(n,r);if(!Array.isArray(e))return n;var i=[];if(ne(e[0]))i[0]=r?e[0]:Math.min(e[0],n[0]);else if(mk.test(e[0])){var s=+mk.exec(e[0])[1];i[0]=n[0]-s}else Ae(e[0])?i[0]=e[0](n[0]):i[0]=n[0];if(ne(e[1]))i[1]=r?e[1]:Math.max(e[1],n[1]);else if(gk.test(e[1])){var a=+gk.exec(e[1])[1];i[1]=n[1]+a}else Ae(e[1])?i[1]=e[1](n[1]):i[1]=n[1];return i},kg=function(e,n,r){if(e&&e.scale&&e.scale.bandwidth){var i=e.scale.bandwidth();if(!r||i>0)return i}if(e&&n&&n.length>=2){for(var s=PA(n,function(f){return f.coordinate}),a=1/0,l=1,c=s.length;l<c;l++){var u=s[l],d=s[l-1];a=Math.min((u.coordinate||0)-(d.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0},yk=function(e,n,r){return!e||!e.length||fc(e,fr(r,"type.defaultProps.domain"))?n:e},P4=function(e,n){var r=e.type.defaultProps?Ot(Ot({},e.type.defaultProps),e.props):e.props,i=r.dataKey,s=r.name,a=r.unit,l=r.formatter,c=r.tooltipType,u=r.chartType,d=r.hide;return Ot(Ot({},xe(e,!1)),{},{dataKey:i,unit:a,formatter:l,name:s||i,color:nN(e),value:Xt(n,i),type:c,payload:n,chartType:u,hide:d})};function Af(t){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Af(t)}function vk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vk(Object(n),!0).forEach(function(r){k4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function k4(t,e,n){return e=EAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function EAe(t){var e=CAe(t,"string");return Af(e)=="symbol"?e:e+""}function CAe(t,e){if(Af(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Af(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jAe(t,e){return IAe(t)||kAe(t,e)||PAe(t,e)||TAe()}function TAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PAe(t,e){if(t){if(typeof t=="string")return xk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xk(t,e)}}function xk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kAe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function IAe(t){if(Array.isArray(t))return t}var Ig=Math.PI/180,OAe=function(e){return e*180/Math.PI},pt=function(e,n,r,i){return{x:e+Math.cos(-Ig*i)*r,y:n+Math.sin(-Ig*i)*r}},I4=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},RAe=function(e,n,r,i,s){var a=e.width,l=e.height,c=e.startAngle,u=e.endAngle,d=Dn(e.cx,a,a/2),f=Dn(e.cy,l,l/2),h=I4(a,l,r),m=Dn(e.innerRadius,h,0),y=Dn(e.outerRadius,h,h*.8),g=Object.keys(n);return g.reduce(function(x,w){var b=n[w],v=b.domain,N=b.reversed,S;if(ke(b.range))i==="angleAxis"?S=[c,u]:i==="radiusAxis"&&(S=[m,y]),N&&(S=[S[1],S[0]]);else{S=b.range;var A=S,E=jAe(A,2);c=E[0],u=E[1]}var _=E4(b,s),C=_.realScaleType,P=_.scale;P.domain(v).range(S),C4(P);var T=j4(P,Mi(Mi({},b),{},{realScaleType:C})),O=Mi(Mi(Mi({},b),T),{},{range:S,radius:y,realScaleType:C,scale:P,cx:d,cy:f,innerRadius:m,outerRadius:y,startAngle:c,endAngle:u});return Mi(Mi({},x),{},k4({},w,O))},{})},$Ae=function(e,n){var r=e.x,i=e.y,s=n.x,a=n.y;return Math.sqrt(Math.pow(r-s,2)+Math.pow(i-a,2))},DAe=function(e,n){var r=e.x,i=e.y,s=n.cx,a=n.cy,l=$Ae({x:r,y:i},{x:s,y:a});if(l<=0)return{radius:l};var c=(r-s)/l,u=Math.acos(c);return i>a&&(u=2*Math.PI-u),{radius:l,angle:OAe(u),angleInRadian:u}},MAe=function(e){var n=e.startAngle,r=e.endAngle,i=Math.floor(n/360),s=Math.floor(r/360),a=Math.min(i,s);return{startAngle:n-a*360,endAngle:r-a*360}},LAe=function(e,n){var r=n.startAngle,i=n.endAngle,s=Math.floor(r/360),a=Math.floor(i/360),l=Math.min(s,a);return e+l*360},bk=function(e,n){var r=e.x,i=e.y,s=DAe({x:r,y:i},n),a=s.radius,l=s.angle,c=n.innerRadius,u=n.outerRadius;if(a<c||a>u)return!1;if(a===0)return!0;var d=MAe(n),f=d.startAngle,h=d.endAngle,m=l,y;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;y=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;y=m>=h&&m<=f}return y?Mi(Mi({},n),{},{radius:a,angle:LAe(m,n)}):null},O4=function(e){return!k.isValidElement(e)&&!Ae(e)&&typeof e!="boolean"?e.className:""};function Nf(t){"@babel/helpers - typeof";return Nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nf(t)}var FAe=["offset"];function VAe(t){return qAe(t)||zAe(t)||UAe(t)||BAe()}function BAe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UAe(t,e){if(t){if(typeof t=="string")return Qw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qw(t,e)}}function zAe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function qAe(t){if(Array.isArray(t))return Qw(t)}function Qw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function WAe(t,e){if(t==null)return{};var n=GAe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function GAe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function wk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ht(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wk(Object(n),!0).forEach(function(r){HAe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HAe(t,e,n){return e=KAe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KAe(t){var e=YAe(t,"string");return Nf(e)=="symbol"?e:e+""}function YAe(t,e){if(Nf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ef(){return Ef=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ef.apply(this,arguments)}var XAe=function(e){var n=e.value,r=e.formatter,i=ke(e.children)?n:e.children;return Ae(r)?r(i):i},QAe=function(e,n){var r=$n(n-e),i=Math.min(Math.abs(n-e),360);return r*i},JAe=function(e,n,r){var i=e.position,s=e.viewBox,a=e.offset,l=e.className,c=s,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,m=c.startAngle,y=c.endAngle,g=c.clockWise,x=(f+h)/2,w=QAe(m,y),b=w>=0?1:-1,v,N;i==="insideStart"?(v=m+b*a,N=g):i==="insideEnd"?(v=y-b*a,N=!g):i==="end"&&(v=y+b*a,N=g),N=w<=0?N:!N;var S=pt(u,d,x,v),A=pt(u,d,x,v+(N?1:-1)*359),E="M".concat(S.x,",").concat(S.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(N?0:1,`,
    `).concat(A.x,",").concat(A.y),_=ke(e.id)?Jc("recharts-radial-line-"):e.id;return L.createElement("text",Ef({},r,{dominantBaseline:"central",className:Ie("recharts-radial-bar-label",l)}),L.createElement("defs",null,L.createElement("path",{id:_,d:E})),L.createElement("textPath",{xlinkHref:"#".concat(_)},n))},ZAe=function(e){var n=e.viewBox,r=e.offset,i=e.position,s=n,a=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,d=s.startAngle,f=s.endAngle,h=(d+f)/2;if(i==="outside"){var m=pt(a,l,u+r,h),y=m.x,g=m.y;return{x:y,y:g,textAnchor:y>=a?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,w=pt(a,l,x,h),b=w.x,v=w.y;return{x:b,y:v,textAnchor:"middle",verticalAnchor:"middle"}},eNe=function(e){var n=e.viewBox,r=e.parentViewBox,i=e.offset,s=e.position,a=n,l=a.x,c=a.y,u=a.width,d=a.height,f=d>=0?1:-1,h=f*i,m=f>0?"end":"start",y=f>0?"start":"end",g=u>=0?1:-1,x=g*i,w=g>0?"end":"start",b=g>0?"start":"end";if(s==="top"){var v={x:l+u/2,y:c-f*i,textAnchor:"middle",verticalAnchor:m};return Ht(Ht({},v),r?{height:Math.max(c-r.y,0),width:u}:{})}if(s==="bottom"){var N={x:l+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:y};return Ht(Ht({},N),r?{height:Math.max(r.y+r.height-(c+d),0),width:u}:{})}if(s==="left"){var S={x:l-x,y:c+d/2,textAnchor:w,verticalAnchor:"middle"};return Ht(Ht({},S),r?{width:Math.max(S.x-r.x,0),height:d}:{})}if(s==="right"){var A={x:l+u+x,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return Ht(Ht({},A),r?{width:Math.max(r.x+r.width-A.x,0),height:d}:{})}var E=r?{width:u,height:d}:{};return s==="insideLeft"?Ht({x:l+x,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},E):s==="insideRight"?Ht({x:l+u-x,y:c+d/2,textAnchor:w,verticalAnchor:"middle"},E):s==="insideTop"?Ht({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:y},E):s==="insideBottom"?Ht({x:l+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:m},E):s==="insideTopLeft"?Ht({x:l+x,y:c+h,textAnchor:b,verticalAnchor:y},E):s==="insideTopRight"?Ht({x:l+u-x,y:c+h,textAnchor:w,verticalAnchor:y},E):s==="insideBottomLeft"?Ht({x:l+x,y:c+d-h,textAnchor:b,verticalAnchor:m},E):s==="insideBottomRight"?Ht({x:l+u-x,y:c+d-h,textAnchor:w,verticalAnchor:m},E):Hc(s)&&(ne(s.x)||Ka(s.x))&&(ne(s.y)||Ka(s.y))?Ht({x:l+Dn(s.x,u),y:c+Dn(s.y,d),textAnchor:"end",verticalAnchor:"end"},E):Ht({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},E)},tNe=function(e){return"cx"in e&&ne(e.cx)};function sn(t){var e=t.offset,n=e===void 0?5:e,r=WAe(t,FAe),i=Ht({offset:n},r),s=i.viewBox,a=i.position,l=i.value,c=i.children,u=i.content,d=i.className,f=d===void 0?"":d,h=i.textBreakAll;if(!s||ke(l)&&ke(c)&&!k.isValidElement(u)&&!Ae(u))return null;if(k.isValidElement(u))return k.cloneElement(u,i);var m;if(Ae(u)){if(m=k.createElement(u,i),k.isValidElement(m))return m}else m=XAe(i);var y=tNe(s),g=xe(i,!0);if(y&&(a==="insideStart"||a==="insideEnd"||a==="end"))return JAe(i,m,g);var x=y?ZAe(i):eNe(i);return L.createElement(Co,Ef({className:Ie("recharts-label",f)},g,x,{breakAll:h}),m)}sn.displayName="Label";var R4=function(e){var n=e.cx,r=e.cy,i=e.angle,s=e.startAngle,a=e.endAngle,l=e.r,c=e.radius,u=e.innerRadius,d=e.outerRadius,f=e.x,h=e.y,m=e.top,y=e.left,g=e.width,x=e.height,w=e.clockWise,b=e.labelViewBox;if(b)return b;if(ne(g)&&ne(x)){if(ne(f)&&ne(h))return{x:f,y:h,width:g,height:x};if(ne(m)&&ne(y))return{x:m,y,width:g,height:x}}return ne(f)&&ne(h)?{x:f,y:h,width:0,height:0}:ne(n)&&ne(r)?{cx:n,cy:r,startAngle:s||i||0,endAngle:a||i||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:w}:e.viewBox?e.viewBox:{}},nNe=function(e,n){return e?e===!0?L.createElement(sn,{key:"label-implicit",viewBox:n}):Jt(e)?L.createElement(sn,{key:"label-implicit",viewBox:n,value:e}):k.isValidElement(e)?e.type===sn?k.cloneElement(e,{key:"label-implicit",viewBox:n}):L.createElement(sn,{key:"label-implicit",content:e,viewBox:n}):Ae(e)?L.createElement(sn,{key:"label-implicit",content:e,viewBox:n}):Hc(e)?L.createElement(sn,Ef({viewBox:n},e,{key:"label-implicit"})):null:null},rNe=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,s=R4(e),a=Pr(i,sn).map(function(c,u){return k.cloneElement(c,{viewBox:n||s,key:"label-".concat(u)})});if(!r)return a;var l=nNe(e.label,n||s);return[l].concat(VAe(a))};sn.parseViewBox=R4;sn.renderCallByParent=rNe;function iNe(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var sNe=iNe;const aNe=rt(sNe);function Cf(t){"@babel/helpers - typeof";return Cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cf(t)}var oNe=["valueAccessor"],lNe=["data","dataKey","clockWise","id","textBreakAll"];function cNe(t){return hNe(t)||fNe(t)||dNe(t)||uNe()}function uNe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dNe(t,e){if(t){if(typeof t=="string")return Jw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jw(t,e)}}function fNe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hNe(t){if(Array.isArray(t))return Jw(t)}function Jw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Og(){return Og=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Og.apply(this,arguments)}function _k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_k(Object(n),!0).forEach(function(r){pNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_k(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pNe(t,e,n){return e=mNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mNe(t){var e=gNe(t,"string");return Cf(e)=="symbol"?e:e+""}function gNe(t,e){if(Cf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ak(t,e){if(t==null)return{};var n=yNe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yNe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var vNe=function(e){return Array.isArray(e.value)?aNe(e.value):e.value};function es(t){var e=t.valueAccessor,n=e===void 0?vNe:e,r=Ak(t,oNe),i=r.data,s=r.dataKey,a=r.clockWise,l=r.id,c=r.textBreakAll,u=Ak(r,lNe);return!i||!i.length?null:L.createElement(Ge,{className:"recharts-label-list"},i.map(function(d,f){var h=ke(s)?n(d,f):Xt(d&&d.payload,s),m=ke(l)?{}:{id:"".concat(l,"-").concat(f)};return L.createElement(sn,Og({},xe(d,!0),u,m,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:sn.parseViewBox(ke(a)?d:Sk(Sk({},d),{},{clockWise:a})),key:"label-".concat(f),index:f}))}))}es.displayName="LabelList";function xNe(t,e){return t?t===!0?L.createElement(es,{key:"labelList-implicit",data:e}):L.isValidElement(t)||Ae(t)?L.createElement(es,{key:"labelList-implicit",data:e,content:t}):Hc(t)?L.createElement(es,Og({data:e},t,{key:"labelList-implicit"})):null:null}function bNe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var r=t.children,i=Pr(r,es).map(function(a,l){return k.cloneElement(a,{data:e,key:"labelList-".concat(l)})});if(!n)return i;var s=xNe(t.label,e);return[s].concat(cNe(i))}es.renderCallByParent=bNe;function jf(t){"@babel/helpers - typeof";return jf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jf(t)}function Zw(){return Zw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zw.apply(this,arguments)}function Nk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ek(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nk(Object(n),!0).forEach(function(r){wNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wNe(t,e,n){return e=_Ne(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Ne(t){var e=SNe(t,"string");return jf(e)=="symbol"?e:e+""}function SNe(t,e){if(jf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ANe=function(e,n){var r=$n(n-e),i=Math.min(Math.abs(n-e),359.999);return r*i},_p=function(e){var n=e.cx,r=e.cy,i=e.radius,s=e.angle,a=e.sign,l=e.isExternal,c=e.cornerRadius,u=e.cornerIsExternal,d=c*(l?1:-1)+i,f=Math.asin(c/d)/Ig,h=u?s:s+a*f,m=pt(n,r,d,h),y=pt(n,r,i,h),g=u?s-a*f:s,x=pt(n,r,d*Math.cos(f*Ig),g);return{center:m,circleTangency:y,lineTangency:x,theta:f}},$4=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.startAngle,l=e.endAngle,c=ANe(a,l),u=a+c,d=pt(n,r,s,a),f=pt(n,r,s,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(a>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var m=pt(n,r,i,a),y=pt(n,r,i,u);h+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(a<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(n,",").concat(r," Z");return h},NNe=function(e){var n=e.cx,r=e.cy,i=e.innerRadius,s=e.outerRadius,a=e.cornerRadius,l=e.forceCornerRadius,c=e.cornerIsExternal,u=e.startAngle,d=e.endAngle,f=$n(d-u),h=_p({cx:n,cy:r,radius:s,angle:u,sign:f,cornerRadius:a,cornerIsExternal:c}),m=h.circleTangency,y=h.lineTangency,g=h.theta,x=_p({cx:n,cy:r,radius:s,angle:d,sign:-f,cornerRadius:a,cornerIsExternal:c}),w=x.circleTangency,b=x.lineTangency,v=x.theta,N=c?Math.abs(u-d):Math.abs(u-d)-g-v;if(N<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):$4({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:u,endAngle:d});var S="M ".concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(N>180),",").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(i>0){var A=_p({cx:n,cy:r,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),E=A.circleTangency,_=A.lineTangency,C=A.theta,P=_p({cx:n,cy:r,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),T=P.circleTangency,O=P.lineTangency,R=P.theta,M=c?Math.abs(u-d):Math.abs(u-d)-C-R;if(M<0&&a===0)return"".concat(S,"L").concat(n,",").concat(r,"Z");S+="L".concat(O.x,",").concat(O.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(M>180),",").concat(+(f>0),",").concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(f<0),",").concat(_.x,",").concat(_.y,"Z")}else S+="L".concat(n,",").concat(r,"Z");return S},ENe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},D4=function(e){var n=Ek(Ek({},ENe),e),r=n.cx,i=n.cy,s=n.innerRadius,a=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,u=n.cornerIsExternal,d=n.startAngle,f=n.endAngle,h=n.className;if(a<s||d===f)return null;var m=Ie("recharts-sector",h),y=a-s,g=Dn(l,y,0,!0),x;return g>0&&Math.abs(d-f)<360?x=NNe({cx:r,cy:i,innerRadius:s,outerRadius:a,cornerRadius:Math.min(g,y/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):x=$4({cx:r,cy:i,innerRadius:s,outerRadius:a,startAngle:d,endAngle:f}),L.createElement("path",Zw({},xe(n,!0),{className:m,d:x,role:"img"}))};function Tf(t){"@babel/helpers - typeof";return Tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tf(t)}function e1(){return e1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e1.apply(this,arguments)}function Ck(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ck(Object(n),!0).forEach(function(r){CNe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ck(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CNe(t,e,n){return e=jNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jNe(t){var e=TNe(t,"string");return Tf(e)=="symbol"?e:e+""}function TNe(t,e){if(Tf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Tk={curveBasisClosed:Cfe,curveBasisOpen:jfe,curveBasis:Efe,curveBumpX:ffe,curveBumpY:hfe,curveLinearClosed:Tfe,curveLinear:fv,curveMonotoneX:Pfe,curveMonotoneY:kfe,curveNatural:Ife,curveStep:Ofe,curveStepAfter:$fe,curveStepBefore:Rfe},Sp=function(e){return e.x===+e.x&&e.y===+e.y},Du=function(e){return e.x},Mu=function(e){return e.y},PNe=function(e,n){if(Ae(e))return e;var r="curve".concat(uv(e));return(r==="curveMonotone"||r==="curveBump")&&n?Tk["".concat(r).concat(n==="vertical"?"Y":"X")]:Tk[r]||fv},kNe=function(e){var n=e.type,r=n===void 0?"linear":n,i=e.points,s=i===void 0?[]:i,a=e.baseLine,l=e.layout,c=e.connectNulls,u=c===void 0?!1:c,d=PNe(r,l),f=u?s.filter(function(g){return Sp(g)}):s,h;if(Array.isArray(a)){var m=u?a.filter(function(g){return Sp(g)}):a,y=f.map(function(g,x){return jk(jk({},g),{},{base:m[x]})});return l==="vertical"?h=hp().y(Mu).x1(Du).x0(function(g){return g.base.x}):h=hp().x(Du).y1(Mu).y0(function(g){return g.base.y}),h.defined(Sp).curve(d),h(y)}return l==="vertical"&&ne(a)?h=hp().y(Mu).x1(Du).x0(a):ne(a)?h=hp().x(Du).y1(Mu).y0(a):h=kM().x(Du).y(Mu),h.defined(Sp).curve(d),h(f)},Fl=function(e){var n=e.className,r=e.points,i=e.path,s=e.pathRef;if((!r||!r.length)&&!i)return null;var a=r&&r.length?kNe(e):i;return k.createElement("path",e1({},xe(e,!1),ng(e),{className:Ie("recharts-curve",n),d:a,ref:s}))},M4={exports:{}},INe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ONe=INe,RNe=ONe;function L4(){}function F4(){}F4.resetWarningCache=L4;var $Ne=function(){function t(r,i,s,a,l,c){if(c!==RNe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:F4,resetWarningCache:L4};return n.PropTypes=n,n};M4.exports=$Ne();var DNe=M4.exports;const Ze=rt(DNe),{getOwnPropertyNames:MNe,getOwnPropertySymbols:LNe}=Object,{hasOwnProperty:FNe}=Object.prototype;function px(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function Ap(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:s}=i,a=s.get(n),l=s.get(r);if(a&&l)return a===r&&l===n;s.set(n,r),s.set(r,n);const c=t(n,r,i);return s.delete(n),s.delete(r),c}}function VNe(t){return t!=null?t[Symbol.toStringTag]:void 0}function Pk(t){return MNe(t).concat(LNe(t))}const BNe=Object.hasOwn||((t,e)=>FNe.call(t,e));function Bo(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const UNe="__v",zNe="__o",qNe="_owner",{getOwnPropertyDescriptor:kk,keys:Ik}=Object;function WNe(t,e){return t.byteLength===e.byteLength&&Rg(new Uint8Array(t),new Uint8Array(e))}function GNe(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function HNe(t,e){return t.byteLength===e.byteLength&&Rg(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function KNe(t,e){return Bo(t.getTime(),e.getTime())}function YNe(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function XNe(t,e){return t===e}function Ok(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.entries();let a,l,c=0;for(;(a=s.next())&&!a.done;){const u=e.entries();let d=!1,f=0;for(;(l=u.next())&&!l.done;){if(i[f]){f++;continue}const h=a.value,m=l.value;if(n.equals(h[0],m[0],c,f,t,e,n)&&n.equals(h[1],m[1],h[0],m[0],t,e,n)){d=i[f]=!0;break}f++}if(!d)return!1;c++}return!0}const QNe=Bo;function JNe(t,e,n){const r=Ik(t);let i=r.length;if(Ik(e).length!==i)return!1;for(;i-- >0;)if(!V4(t,e,n,r[i]))return!1;return!0}function Lu(t,e,n){const r=Pk(t);let i=r.length;if(Pk(e).length!==i)return!1;let s,a,l;for(;i-- >0;)if(s=r[i],!V4(t,e,n,s)||(a=kk(t,s),l=kk(e,s),(a||l)&&(!a||!l||a.configurable!==l.configurable||a.enumerable!==l.enumerable||a.writable!==l.writable)))return!1;return!0}function ZNe(t,e){return Bo(t.valueOf(),e.valueOf())}function eEe(t,e){return t.source===e.source&&t.flags===e.flags}function Rk(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.values();let a,l;for(;(a=s.next())&&!a.done;){const c=e.values();let u=!1,d=0;for(;(l=c.next())&&!l.done;){if(!i[d]&&n.equals(a.value,l.value,a.value,l.value,t,e,n)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function Rg(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function tEe(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function V4(t,e,n,r){return(r===qNe||r===zNe||r===UNe)&&(t.$$typeof||e.$$typeof)?!0:BNe(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const nEe="[object ArrayBuffer]",rEe="[object Arguments]",iEe="[object Boolean]",sEe="[object DataView]",aEe="[object Date]",oEe="[object Error]",lEe="[object Map]",cEe="[object Number]",uEe="[object Object]",dEe="[object RegExp]",fEe="[object Set]",hEe="[object String]",pEe={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},mEe="[object URL]",gEe=Object.prototype.toString;function yEe({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:a,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:f,areTypedArraysEqual:h,areUrlsEqual:m,unknownTagComparators:y}){return function(x,w,b){if(x===w)return!0;if(x==null||w==null)return!1;const v=typeof x;if(v!==typeof w)return!1;if(v!=="object")return v==="number"?l(x,w,b):v==="function"?s(x,w,b):!1;const N=x.constructor;if(N!==w.constructor)return!1;if(N===Object)return c(x,w,b);if(Array.isArray(x))return e(x,w,b);if(N===Date)return r(x,w,b);if(N===RegExp)return d(x,w,b);if(N===Map)return a(x,w,b);if(N===Set)return f(x,w,b);const S=gEe.call(x);if(S===aEe)return r(x,w,b);if(S===dEe)return d(x,w,b);if(S===lEe)return a(x,w,b);if(S===fEe)return f(x,w,b);if(S===uEe)return typeof x.then!="function"&&typeof w.then!="function"&&c(x,w,b);if(S===mEe)return m(x,w,b);if(S===oEe)return i(x,w,b);if(S===rEe)return c(x,w,b);if(pEe[S])return h(x,w,b);if(S===nEe)return t(x,w,b);if(S===sEe)return n(x,w,b);if(S===iEe||S===cEe||S===hEe)return u(x,w,b);if(y){let A=y[S];if(!A){const E=VNe(x);E&&(A=y[E])}if(A)return A(x,w,b)}return!1}}function vEe({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:WNe,areArraysEqual:n?Lu:GNe,areDataViewsEqual:HNe,areDatesEqual:KNe,areErrorsEqual:YNe,areFunctionsEqual:XNe,areMapsEqual:n?px(Ok,Lu):Ok,areNumbersEqual:QNe,areObjectsEqual:n?Lu:JNe,arePrimitiveWrappersEqual:ZNe,areRegExpsEqual:eEe,areSetsEqual:n?px(Rk,Lu):Rk,areTypedArraysEqual:n?px(Rg,Lu):Rg,areUrlsEqual:tEe,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=Ap(r.areArraysEqual),s=Ap(r.areMapsEqual),a=Ap(r.areObjectsEqual),l=Ap(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:a,areSetsEqual:l})}return r}function xEe(t){return function(e,n,r,i,s,a,l){return t(e,n,l)}}function bEe({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(l,c){const{cache:u=t?new WeakMap:void 0,meta:d}=n();return e(l,c,{cache:u,equals:r,meta:d,strict:i})};if(t)return function(l,c){return e(l,c,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(l,c){return e(l,c,s)}}const wEe=ja();ja({strict:!0});ja({circular:!0});ja({circular:!0,strict:!0});ja({createInternalComparator:()=>Bo});ja({strict:!0,createInternalComparator:()=>Bo});ja({circular:!0,createInternalComparator:()=>Bo});ja({circular:!0,createInternalComparator:()=>Bo,strict:!0});function ja(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,s=vEe(t),a=yEe(s),l=n?n(a):xEe(a);return bEe({circular:e,comparator:a,createState:r,equals:l,strict:i})}function _Ee(t){typeof requestAnimationFrame<"u"&&requestAnimationFrame(t)}function $k(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function i(s){n<0&&(n=s),s-n>e?(t(s),n=-1):_Ee(i)};requestAnimationFrame(r)}function t1(t){"@babel/helpers - typeof";return t1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t1(t)}function SEe(t){return CEe(t)||EEe(t)||NEe(t)||AEe()}function AEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NEe(t,e){if(t){if(typeof t=="string")return Dk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dk(t,e)}}function Dk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function EEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function CEe(t){if(Array.isArray(t))return t}function jEe(){var t={},e=function(){return null},n=!1,r=function i(s){if(!n){if(Array.isArray(s)){if(!s.length)return;var a=s,l=SEe(a),c=l[0],u=l.slice(1);if(typeof c=="number"){$k(i.bind(null,u),c);return}i(c),$k(i.bind(null,u));return}t1(s)==="object"&&(t=s,e(t)),typeof s=="function"&&s()}};return{stop:function(){n=!0},start:function(s){n=!1,r(s)},subscribe:function(s){return e=s,function(){e=function(){return null}}}}}function Pf(t){"@babel/helpers - typeof";return Pf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pf(t)}function Mk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mk(Object(n),!0).forEach(function(r){B4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function B4(t,e,n){return e=TEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function TEe(t){var e=PEe(t,"string");return Pf(e)==="symbol"?e:String(e)}function PEe(t,e){if(Pf(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Pf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kEe=function(e,n){return[Object.keys(e),Object.keys(n)].reduce(function(r,i){return r.filter(function(s){return i.includes(s)})})},IEe=function(e){return e},OEe=function(e){return e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},bd=function(e,n){return Object.keys(n).reduce(function(r,i){return Lk(Lk({},r),{},B4({},i,e(i,n[i])))},{})},Fk=function(e,n,r){return e.map(function(i){return"".concat(OEe(i)," ").concat(n,"ms ").concat(r)}).join(",")};function REe(t,e){return MEe(t)||DEe(t,e)||U4(t,e)||$Ee()}function $Ee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DEe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function MEe(t){if(Array.isArray(t))return t}function LEe(t){return BEe(t)||VEe(t)||U4(t)||FEe()}function FEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U4(t,e){if(t){if(typeof t=="string")return n1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n1(t,e)}}function VEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function BEe(t){if(Array.isArray(t))return n1(t)}function n1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $g=1e-4,z4=function(e,n){return[0,3*e,3*n-6*e,3*e-3*n+1]},q4=function(e,n){return e.map(function(r,i){return r*Math.pow(n,i)}).reduce(function(r,i){return r+i})},Vk=function(e,n){return function(r){var i=z4(e,n);return q4(i,r)}},UEe=function(e,n){return function(r){var i=z4(e,n),s=[].concat(LEe(i.map(function(a,l){return a*l}).slice(1)),[0]);return q4(s,r)}},Bk=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0],s=n[1],a=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":i=0,s=0,a=1,l=1;break;case"ease":i=.25,s=.1,a=.25,l=1;break;case"ease-in":i=.42,s=0,a=1,l=1;break;case"ease-out":i=.42,s=0,a=.58,l=1;break;case"ease-in-out":i=0,s=0,a=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),d=REe(u,4);i=d[0],s=d[1],a=d[2],l=d[3]}}}var f=Vk(i,a),h=Vk(s,l),m=UEe(i,a),y=function(w){return w>1?1:w<0?0:w},g=function(w){for(var b=w>1?1:w,v=b,N=0;N<8;++N){var S=f(v)-b,A=m(v);if(Math.abs(S-b)<$g||A<$g)return h(v);v=y(v-S/A)}return h(v)};return g.isStepper=!1,g},zEe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.stiff,r=n===void 0?100:n,i=e.damping,s=i===void 0?8:i,a=e.dt,l=a===void 0?17:a,c=function(d,f,h){var m=-(d-f)*r,y=h*s,g=h+(m-y)*l/1e3,x=h*l/1e3+d;return Math.abs(x-f)<$g&&Math.abs(g)<$g?[f,0]:[x,g]};return c.isStepper=!0,c.dt=l,c},qEe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Bk(i);case"spring":return zEe();default:if(i.split("(")[0]==="cubic-bezier")return Bk(i)}return typeof i=="function"?i:null};function kf(t){"@babel/helpers - typeof";return kf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kf(t)}function Uk(t){return HEe(t)||GEe(t)||W4(t)||WEe()}function WEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GEe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function HEe(t){if(Array.isArray(t))return i1(t)}function zk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zk(Object(n),!0).forEach(function(r){r1(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function r1(t,e,n){return e=KEe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KEe(t){var e=YEe(t,"string");return kf(e)==="symbol"?e:String(e)}function YEe(t,e){if(kf(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(kf(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XEe(t,e){return ZEe(t)||JEe(t,e)||W4(t,e)||QEe()}function QEe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W4(t,e){if(t){if(typeof t=="string")return i1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i1(t,e)}}function i1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function JEe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function ZEe(t){if(Array.isArray(t))return t}var Dg=function(e,n,r){return e+(n-e)*r},s1=function(e){var n=e.from,r=e.to;return n!==r},eCe=function t(e,n,r){var i=bd(function(s,a){if(s1(a)){var l=e(a.from,a.to,a.velocity),c=XEe(l,2),u=c[0],d=c[1];return dn(dn({},a),{},{from:u,velocity:d})}return a},n);return r<1?bd(function(s,a){return s1(a)?dn(dn({},a),{},{velocity:Dg(a.velocity,i[s].velocity,r),from:Dg(a.from,i[s].from,r)}):a},n):t(e,i,r-1)};const tCe=function(t,e,n,r,i){var s=kEe(t,e),a=s.reduce(function(x,w){return dn(dn({},x),{},r1({},w,[t[w],e[w]]))},{}),l=s.reduce(function(x,w){return dn(dn({},x),{},r1({},w,{from:t[w],velocity:0,to:e[w]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return bd(function(w,b){return b.from},l)},m=function(){return!Object.values(l).filter(s1).length},y=function(w){u||(u=w);var b=w-u,v=b/n.dt;l=eCe(n,l,v),i(dn(dn(dn({},t),e),h())),u=w,m()||(c=requestAnimationFrame(f))},g=function(w){d||(d=w);var b=(w-d)/r,v=bd(function(S,A){return Dg.apply(void 0,Uk(A).concat([n(b)]))},a);if(i(dn(dn(dn({},t),e),v)),b<1)c=requestAnimationFrame(f);else{var N=bd(function(S,A){return Dg.apply(void 0,Uk(A).concat([n(1)]))},a);i(dn(dn(dn({},t),e),N))}};return f=n.isStepper?y:g,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function pc(t){"@babel/helpers - typeof";return pc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pc(t)}var nCe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function rCe(t,e){if(t==null)return{};var n=iCe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function iCe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function mx(t){return lCe(t)||oCe(t)||aCe(t)||sCe()}function sCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aCe(t,e){if(t){if(typeof t=="string")return a1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a1(t,e)}}function oCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lCe(t){if(Array.isArray(t))return a1(t)}function a1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qk(Object(n),!0).forEach(function(r){ed(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ed(t,e,n){return e=G4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cCe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uCe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G4(r.key),r)}}function dCe(t,e,n){return e&&uCe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function G4(t){var e=fCe(t,"string");return pc(e)==="symbol"?e:String(e)}function fCe(t,e){if(pc(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pc(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hCe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o1(t,e)}function o1(t,e){return o1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},o1(t,e)}function pCe(t){var e=mCe();return function(){var r=Mg(t),i;if(e){var s=Mg(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return l1(this,i)}}function l1(t,e){if(e&&(pc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return c1(t)}function c1(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mCe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mg(t){return Mg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Mg(t)}var Ni=function(t){hCe(n,t);var e=pCe(n);function n(r,i){var s;cCe(this,n),s=e.call(this,r,i);var a=s.props,l=a.isActive,c=a.attributeName,u=a.from,d=a.to,f=a.steps,h=a.children,m=a.duration;if(s.handleStyleChange=s.handleStyleChange.bind(c1(s)),s.changeStyle=s.changeStyle.bind(c1(s)),!l||m<=0)return s.state={style:{}},typeof h=="function"&&(s.state={style:d}),l1(s);if(f&&f.length)s.state={style:f[0].style};else if(u){if(typeof h=="function")return s.state={style:u},l1(s);s.state={style:c?ed({},c,u):u}}else s.state={style:{}};return s}return dCe(n,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,a=i.canBegin;this.mounted=!0,!(!s||!a)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,a=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,d=s.to,f=s.from,h=this.state.style;if(l){if(!a){var m={style:c?ed({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(m);return}if(!(wEe(i.to,d)&&i.canBegin&&i.isActive)){var y=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=y||u?f:i.to;if(this.state&&h){var x={style:c?ed({},c,g):g};(c&&h[c]!==g||!c&&h!==g)&&this.setState(x)}this.runAnimation(Vr(Vr({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,a=i.from,l=i.to,c=i.duration,u=i.easing,d=i.begin,f=i.onAnimationEnd,h=i.onAnimationStart,m=tCe(a,l,qEe(u),c,this.changeStyle),y=function(){s.stopJSAnimation=m()};this.manager.start([h,d,y,c,f])}},{key:"runStepAnimation",value:function(i){var s=this,a=i.steps,l=i.begin,c=i.onAnimationStart,u=a[0],d=u.style,f=u.duration,h=f===void 0?0:f,m=function(g,x,w){if(w===0)return g;var b=x.duration,v=x.easing,N=v===void 0?"ease":v,S=x.style,A=x.properties,E=x.onAnimationEnd,_=w>0?a[w-1]:x,C=A||Object.keys(S);if(typeof N=="function"||N==="spring")return[].concat(mx(g),[s.runJSAnimation.bind(s,{from:_.style,to:S,duration:b,easing:N}),b]);var P=Fk(C,b,N),T=Vr(Vr(Vr({},_.style),S),{},{transition:P});return[].concat(mx(g),[T,b,E]).filter(IEe)};return this.manager.start([c].concat(mx(a.reduce(m,[d,Math.max(h,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=jEe());var s=i.begin,a=i.duration,l=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,f=i.onAnimationEnd,h=i.steps,m=i.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(i);return}if(h.length>1){this.runStepAnimation(i);return}var g=l?ed({},l,c):c,x=Fk(Object.keys(g),a,u);y.start([d,s,Vr(Vr({},g),{},{transition:x}),a,f])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var a=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=rCe(i,nCe),u=k.Children.count(s),d=this.state.style;if(typeof s=="function")return s(d);if(!l||u===0||a<=0)return s;var f=function(m){var y=m.props,g=y.style,x=g===void 0?{}:g,w=y.className,b=k.cloneElement(m,Vr(Vr({},c),{},{style:Vr(Vr({},x),d),className:w}));return b};return u===1?f(k.Children.only(s)):L.createElement("div",null,k.Children.map(s,function(h){return f(h)}))}}]),n}(k.PureComponent);Ni.displayName="Animate";Ni.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Ni.propTypes={from:Ze.oneOfType([Ze.object,Ze.string]),to:Ze.oneOfType([Ze.object,Ze.string]),attributeName:Ze.string,duration:Ze.number,begin:Ze.number,easing:Ze.oneOfType([Ze.string,Ze.func]),steps:Ze.arrayOf(Ze.shape({duration:Ze.number.isRequired,style:Ze.object.isRequired,easing:Ze.oneOfType([Ze.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ze.func]),properties:Ze.arrayOf("string"),onAnimationEnd:Ze.func})),children:Ze.oneOfType([Ze.node,Ze.func]),isActive:Ze.bool,canBegin:Ze.bool,onAnimationEnd:Ze.func,shouldReAnimate:Ze.bool,onAnimationStart:Ze.func,onAnimationReStart:Ze.func};function If(t){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},If(t)}function Lg(){return Lg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lg.apply(this,arguments)}function gCe(t,e){return bCe(t)||xCe(t,e)||vCe(t,e)||yCe()}function yCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vCe(t,e){if(t){if(typeof t=="string")return Wk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wk(t,e)}}function Wk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xCe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function bCe(t){if(Array.isArray(t))return t}function Gk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gk(Object(n),!0).forEach(function(r){wCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wCe(t,e,n){return e=_Ce(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _Ce(t){var e=SCe(t,"string");return If(e)=="symbol"?e:e+""}function SCe(t,e){if(If(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(If(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kk=function(e,n,r,i,s){var a=Math.min(Math.abs(r)/2,Math.abs(i)/2),l=i>=0?1:-1,c=r>=0?1:-1,u=i>=0&&r>=0||i<0&&r<0?1:0,d;if(a>0&&s instanceof Array){for(var f=[0,0,0,0],h=0,m=4;h<m;h++)f[h]=s[h]>a?a:s[h];d="M".concat(e,",").concat(n+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(e+c*f[0],",").concat(n)),d+="L ".concat(e+r-c*f[1],",").concat(n),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(e+r,",").concat(n+l*f[1])),d+="L ".concat(e+r,",").concat(n+i-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(e+r-c*f[2],",").concat(n+i)),d+="L ".concat(e+c*f[3],",").concat(n+i),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(e,",").concat(n+i-l*f[3])),d+="Z"}else if(a>0&&s===+s&&s>0){var y=Math.min(a,s);d="M ".concat(e,",").concat(n+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+c*y,",").concat(n,`
            L `).concat(e+r-c*y,",").concat(n,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+r,",").concat(n+l*y,`
            L `).concat(e+r,",").concat(n+i-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e+r-c*y,",").concat(n+i,`
            L `).concat(e+c*y,",").concat(n+i,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(e,",").concat(n+i-l*y," Z")}else d="M ".concat(e,",").concat(n," h ").concat(r," v ").concat(i," h ").concat(-r," Z");return d},ACe=function(e,n){if(!e||!n)return!1;var r=e.x,i=e.y,s=n.x,a=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),d=Math.max(s,s+l),f=Math.min(a,a+c),h=Math.max(a,a+c);return r>=u&&r<=d&&i>=f&&i<=h}return!1},NCe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},rN=function(e){var n=Hk(Hk({},NCe),e),r=k.useRef(),i=k.useState(-1),s=gCe(i,2),a=s[0],l=s[1];k.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var N=r.current.getTotalLength();N&&l(N)}catch{}},[]);var c=n.x,u=n.y,d=n.width,f=n.height,h=n.radius,m=n.className,y=n.animationEasing,g=n.animationDuration,x=n.animationBegin,w=n.isAnimationActive,b=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var v=Ie("recharts-rectangle",m);return b?L.createElement(Ni,{canBegin:a>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:g,animationEasing:y,isActive:b},function(N){var S=N.width,A=N.height,E=N.x,_=N.y;return L.createElement(Ni,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,isActive:w,easing:y},L.createElement("path",Lg({},xe(n,!0),{className:v,d:Kk(E,_,S,A,h),ref:r})))}):L.createElement("path",Lg({},xe(n,!0),{className:v,d:Kk(c,u,d,f,h)}))},ECe=["points","className","baseLinePoints","connectNulls"];function bl(){return bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bl.apply(this,arguments)}function CCe(t,e){if(t==null)return{};var n=jCe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jCe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Yk(t){return ICe(t)||kCe(t)||PCe(t)||TCe()}function TCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PCe(t,e){if(t){if(typeof t=="string")return u1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u1(t,e)}}function kCe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ICe(t){if(Array.isArray(t))return u1(t)}function u1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Xk=function(e){return e&&e.x===+e.x&&e.y===+e.y},OCe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){Xk(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),Xk(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},wd=function(e,n){var r=OCe(e);n&&(r=[r.reduce(function(s,a){return[].concat(Yk(s),Yk(a))},[])]);var i=r.map(function(s){return s.reduce(function(a,l,c){return"".concat(a).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},RCe=function(e,n,r){var i=wd(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(wd(n.reverse(),r).slice(1))},$Ce=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,s=e.connectNulls,a=CCe(e,ECe);if(!n||!n.length)return null;var l=Ie("recharts-polygon",r);if(i&&i.length){var c=a.stroke&&a.stroke!=="none",u=RCe(n,i,s);return L.createElement("g",{className:l},L.createElement("path",bl({},xe(a,!0),{fill:u.slice(-1)==="Z"?a.fill:"none",stroke:"none",d:u})),c?L.createElement("path",bl({},xe(a,!0),{fill:"none",d:wd(n,s)})):null,c?L.createElement("path",bl({},xe(a,!0),{fill:"none",d:wd(i,s)})):null)}var d=wd(n,s);return L.createElement("path",bl({},xe(a,!0),{fill:d.slice(-1)==="Z"?a.fill:"none",className:l,d}))};function d1(){return d1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d1.apply(this,arguments)}var Tv=function(e){var n=e.cx,r=e.cy,i=e.r,s=e.className,a=Ie("recharts-dot",s);return n===+n&&r===+r&&i===+i?k.createElement("circle",d1({},xe(e,!1),ng(e),{className:a,cx:n,cy:r,r:i})):null};function Of(t){"@babel/helpers - typeof";return Of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Of(t)}var DCe=["x","y","top","left","width","height","className"];function f1(){return f1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f1.apply(this,arguments)}function Qk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function MCe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qk(Object(n),!0).forEach(function(r){LCe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LCe(t,e,n){return e=FCe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function FCe(t){var e=VCe(t,"string");return Of(e)=="symbol"?e:e+""}function VCe(t,e){if(Of(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Of(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BCe(t,e){if(t==null)return{};var n=UCe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function UCe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var zCe=function(e,n,r,i,s,a){return"M".concat(e,",").concat(s,"v").concat(i,"M").concat(a,",").concat(n,"h").concat(r)},qCe=function(e){var n=e.x,r=n===void 0?0:n,i=e.y,s=i===void 0?0:i,a=e.top,l=a===void 0?0:a,c=e.left,u=c===void 0?0:c,d=e.width,f=d===void 0?0:d,h=e.height,m=h===void 0?0:h,y=e.className,g=BCe(e,DCe),x=MCe({x:r,y:s,top:l,left:u,width:f,height:m},g);return!ne(r)||!ne(s)||!ne(f)||!ne(m)||!ne(l)||!ne(u)?null:L.createElement("path",f1({},xe(x,!0),{className:Ie("recharts-cross",y),d:zCe(r,s,f,m,l,u)}))},WCe=Av,GCe=i4,HCe=Pi;function KCe(t,e){return t&&t.length?WCe(t,HCe(e),GCe):void 0}var YCe=KCe;const XCe=rt(YCe);var QCe=Av,JCe=Pi,ZCe=s4;function eje(t,e){return t&&t.length?QCe(t,JCe(e),ZCe):void 0}var tje=eje;const nje=rt(tje);var rje=["cx","cy","angle","ticks","axisLine"],ije=["ticks","tick","angle","tickFormatter","stroke"];function mc(t){"@babel/helpers - typeof";return mc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mc(t)}function _d(){return _d=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_d.apply(this,arguments)}function Jk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ra(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jk(Object(n),!0).forEach(function(r){Pv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Zk(t,e){if(t==null)return{};var n=sje(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function sje(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function aje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,K4(r.key),r)}}function oje(t,e,n){return e&&e2(t.prototype,e),n&&e2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lje(t,e,n){return e=Fg(e),cje(t,H4()?Reflect.construct(e,n||[],Fg(t).constructor):e.apply(t,n))}function cje(t,e){if(e&&(mc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uje(t)}function uje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function H4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(H4=function(){return!!t})()}function Fg(t){return Fg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Fg(t)}function dje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h1(t,e)}function h1(t,e){return h1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},h1(t,e)}function Pv(t,e,n){return e=K4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function K4(t){var e=fje(t,"string");return mc(e)=="symbol"?e:e+""}function fje(t,e){if(mc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kv=function(t){function e(){return aje(this,e),lje(this,e,arguments)}return dje(e,t),oje(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,s=this.props,a=s.angle,l=s.cx,c=s.cy;return pt(l,c,i,a)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,s=r.cy,a=r.angle,l=r.ticks,c=XCe(l,function(d){return d.coordinate||0}),u=nje(l,function(d){return d.coordinate||0});return{cx:i,cy:s,startAngle:a,endAngle:a,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,s=r.cy,a=r.angle,l=r.ticks,c=r.axisLine,u=Zk(r,rje),d=l.reduce(function(y,g){return[Math.min(y[0],g.coordinate),Math.max(y[1],g.coordinate)]},[1/0,-1/0]),f=pt(i,s,d[0],a),h=pt(i,s,d[1],a),m=Ra(Ra(Ra({},xe(u,!1)),{},{fill:"none"},xe(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return L.createElement("line",_d({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var r=this,i=this.props,s=i.ticks,a=i.tick,l=i.angle,c=i.tickFormatter,u=i.stroke,d=Zk(i,ije),f=this.getTickTextAnchor(),h=xe(d,!1),m=xe(a,!1),y=s.map(function(g,x){var w=r.getTickValueCoord(g),b=Ra(Ra(Ra(Ra({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(w.x,", ").concat(w.y,")")},h),{},{stroke:"none",fill:u},m),{},{index:x},w),{},{payload:g});return L.createElement(Ge,_d({className:Ie("recharts-polar-radius-axis-tick",O4(a)),key:"tick-".concat(g.coordinate)},Eo(r.props,g,x)),e.renderTickItem(a,b,c?c(g.value,x):g.value))});return L.createElement(Ge,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var r=this.props,i=r.ticks,s=r.axisLine,a=r.tick;return!i||!i.length?null:L.createElement(Ge,{className:Ie("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),a&&this.renderTicks(),sn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,s){var a;return L.isValidElement(r)?a=L.cloneElement(r,i):Ae(r)?a=r(i):a=L.createElement(Co,_d({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),a}}])}(k.PureComponent);Pv(kv,"displayName","PolarRadiusAxis");Pv(kv,"axisType","radiusAxis");Pv(kv,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function gc(t){"@babel/helpers - typeof";return gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gc(t)}function za(){return za=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},za.apply(this,arguments)}function t2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $a(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?t2(Object(n),!0).forEach(function(r){Iv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):t2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hje(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,X4(r.key),r)}}function pje(t,e,n){return e&&n2(t.prototype,e),n&&n2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mje(t,e,n){return e=Vg(e),gje(t,Y4()?Reflect.construct(e,n||[],Vg(t).constructor):e.apply(t,n))}function gje(t,e){if(e&&(gc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yje(t)}function yje(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y4=function(){return!!t})()}function Vg(t){return Vg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Vg(t)}function vje(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p1(t,e)}function p1(t,e){return p1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},p1(t,e)}function Iv(t,e,n){return e=X4(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X4(t){var e=xje(t,"string");return gc(e)=="symbol"?e:e+""}function xje(t,e){if(gc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bje=Math.PI/180,r2=1e-5,Ov=function(t){function e(){return hje(this,e),mje(this,e,arguments)}return vje(e,t),pje(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.cx,a=i.cy,l=i.radius,c=i.orientation,u=i.tickSize,d=u||8,f=pt(s,a,l,r.coordinate),h=pt(s,a,l+(c==="inner"?-1:1)*d,r.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,s=Math.cos(-r.coordinate*bje),a;return s>r2?a=i==="outer"?"start":"end":s<-r2?a=i==="outer"?"end":"start":a="middle",a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,s=r.cy,a=r.radius,l=r.axisLine,c=r.axisLineType,u=$a($a({},xe(this.props,!1)),{},{fill:"none"},xe(l,!1));if(c==="circle")return L.createElement(Tv,za({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:s,r:a}));var d=this.props.ticks,f=d.map(function(h){return pt(i,s,a,h.coordinate)});return L.createElement($Ce,za({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,s=i.ticks,a=i.tick,l=i.tickLine,c=i.tickFormatter,u=i.stroke,d=xe(this.props,!1),f=xe(a,!1),h=$a($a({},d),{},{fill:"none"},xe(l,!1)),m=s.map(function(y,g){var x=r.getTickLineCoord(y),w=r.getTickTextAnchor(y),b=$a($a($a({textAnchor:w},d),{},{stroke:"none",fill:u},f),{},{index:g,payload:y,x:x.x2,y:x.y2});return L.createElement(Ge,za({className:Ie("recharts-polar-angle-axis-tick",O4(a)),key:"tick-".concat(y.coordinate)},Eo(r.props,y,g)),l&&L.createElement("line",za({className:"recharts-polar-angle-axis-tick-line"},h,x)),a&&e.renderTickItem(a,b,c?c(y.value,g):y.value))});return L.createElement(Ge,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var r=this.props,i=r.ticks,s=r.radius,a=r.axisLine;return s<=0||!i||!i.length?null:L.createElement(Ge,{className:Ie("recharts-polar-angle-axis",this.props.className)},a&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,s){var a;return L.isValidElement(r)?a=L.cloneElement(r,i):Ae(r)?a=r(i):a=L.createElement(Co,za({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),a}}])}(k.PureComponent);Iv(Ov,"displayName","PolarAngleAxis");Iv(Ov,"axisType","angleAxis");Iv(Ov,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var wje=tL,_je=wje(Object.getPrototypeOf,Object),Sje=_je,Aje=bs,Nje=Sje,Eje=ws,Cje="[object Object]",jje=Function.prototype,Tje=Object.prototype,Q4=jje.toString,Pje=Tje.hasOwnProperty,kje=Q4.call(Object);function Ije(t){if(!Eje(t)||Aje(t)!=Cje)return!1;var e=Nje(t);if(e===null)return!0;var n=Pje.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&Q4.call(n)==kje}var Oje=Ije;const Rje=rt(Oje);var $je=bs,Dje=ws,Mje="[object Boolean]";function Lje(t){return t===!0||t===!1||Dje(t)&&$je(t)==Mje}var Fje=Lje;const Vje=rt(Fje);function Rf(t){"@babel/helpers - typeof";return Rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rf(t)}function Bg(){return Bg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bg.apply(this,arguments)}function Bje(t,e){return Wje(t)||qje(t,e)||zje(t,e)||Uje()}function Uje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zje(t,e){if(t){if(typeof t=="string")return i2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i2(t,e)}}function i2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function qje(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function Wje(t){if(Array.isArray(t))return t}function s2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function a2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s2(Object(n),!0).forEach(function(r){Gje(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Gje(t,e,n){return e=Hje(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hje(t){var e=Kje(t,"string");return Rf(e)=="symbol"?e:e+""}function Kje(t,e){if(Rf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Rf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var o2=function(e,n,r,i,s){var a=r-i,l;return l="M ".concat(e,",").concat(n),l+="L ".concat(e+r,",").concat(n),l+="L ".concat(e+r-a/2,",").concat(n+s),l+="L ".concat(e+r-a/2-i,",").concat(n+s),l+="L ".concat(e,",").concat(n," Z"),l},Yje={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Xje=function(e){var n=a2(a2({},Yje),e),r=k.useRef(),i=k.useState(-1),s=Bje(i,2),a=s[0],l=s[1];k.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var v=r.current.getTotalLength();v&&l(v)}catch{}},[]);var c=n.x,u=n.y,d=n.upperWidth,f=n.lowerWidth,h=n.height,m=n.className,y=n.animationEasing,g=n.animationDuration,x=n.animationBegin,w=n.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var b=Ie("recharts-trapezoid",m);return w?L.createElement(Ni,{canBegin:a>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:g,animationEasing:y,isActive:w},function(v){var N=v.upperWidth,S=v.lowerWidth,A=v.height,E=v.x,_=v.y;return L.createElement(Ni,{canBegin:a>0,from:"0px ".concat(a===-1?1:a,"px"),to:"".concat(a,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,easing:y},L.createElement("path",Bg({},xe(n,!0),{className:b,d:o2(E,_,N,S,A),ref:r})))}):L.createElement("g",null,L.createElement("path",Bg({},xe(n,!0),{className:b,d:o2(c,u,d,f,h)})))},Qje=["option","shapeType","propTransformer","activeClassName","isActive"];function $f(t){"@babel/helpers - typeof";return $f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$f(t)}function Jje(t,e){if(t==null)return{};var n=Zje(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Zje(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function l2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ug(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l2(Object(n),!0).forEach(function(r){eTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function eTe(t,e,n){return e=tTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tTe(t){var e=nTe(t,"string");return $f(e)=="symbol"?e:e+""}function nTe(t,e){if($f(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rTe(t,e){return Ug(Ug({},e),t)}function iTe(t,e){return t==="symbols"}function c2(t){var e=t.shapeType,n=t.elementProps;switch(e){case"rectangle":return L.createElement(rN,n);case"trapezoid":return L.createElement(Xje,n);case"sector":return L.createElement(D4,n);case"symbols":if(iTe(e))return L.createElement(_A,n);break;default:return null}}function sTe(t){return k.isValidElement(t)?t.props:t}function J4(t){var e=t.option,n=t.shapeType,r=t.propTransformer,i=r===void 0?rTe:r,s=t.activeClassName,a=s===void 0?"recharts-active-shape":s,l=t.isActive,c=Jje(t,Qje),u;if(k.isValidElement(e))u=k.cloneElement(e,Ug(Ug({},c),sTe(e)));else if(Ae(e))u=e(c);else if(Rje(e)&&!Vje(e)){var d=i(e,c);u=L.createElement(c2,{shapeType:n,elementProps:d})}else{var f=c;u=L.createElement(c2,{shapeType:n,elementProps:f})}return l?L.createElement(Ge,{className:a},u):u}function Rv(t,e){return e!=null&&"trapezoids"in t.props}function $v(t,e){return e!=null&&"sectors"in t.props}function Df(t,e){return e!=null&&"points"in t.props}function aTe(t,e){var n,r,i=t.x===(e==null||(n=e.labelViewBox)===null||n===void 0?void 0:n.x)||t.x===e.x,s=t.y===(e==null||(r=e.labelViewBox)===null||r===void 0?void 0:r.y)||t.y===e.y;return i&&s}function oTe(t,e){var n=t.endAngle===e.endAngle,r=t.startAngle===e.startAngle;return n&&r}function lTe(t,e){var n=t.x===e.x,r=t.y===e.y,i=t.z===e.z;return n&&r&&i}function cTe(t,e){var n;return Rv(t,e)?n=aTe:$v(t,e)?n=oTe:Df(t,e)&&(n=lTe),n}function uTe(t,e){var n;return Rv(t,e)?n="trapezoids":$v(t,e)?n="sectors":Df(t,e)&&(n="points"),n}function dTe(t,e){if(Rv(t,e)){var n;return(n=e.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if($v(t,e)){var r;return(r=e.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return Df(t,e)?e.payload:{}}function fTe(t){var e=t.activeTooltipItem,n=t.graphicalItem,r=t.itemData,i=uTe(n,e),s=dTe(n,e),a=r.filter(function(c,u){var d=fc(s,c),f=n.props[i].filter(function(y){var g=cTe(n,e);return g(y,e)}),h=n.props[i].indexOf(f[f.length-1]),m=u===h;return d&&m}),l=r.indexOf(a[a.length-1]);return l}var om;function yc(t){"@babel/helpers - typeof";return yc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yc(t)}function wl(){return wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wl.apply(this,arguments)}function u2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ut(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u2(Object(n),!0).forEach(function(r){Nr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,e5(r.key),r)}}function pTe(t,e,n){return e&&d2(t.prototype,e),n&&d2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function mTe(t,e,n){return e=zg(e),gTe(t,Z4()?Reflect.construct(e,n||[],zg(t).constructor):e.apply(t,n))}function gTe(t,e){if(e&&(yc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yTe(t)}function yTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z4(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Z4=function(){return!!t})()}function zg(t){return zg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zg(t)}function vTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m1(t,e)}function m1(t,e){return m1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},m1(t,e)}function Nr(t,e,n){return e=e5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function e5(t){var e=xTe(t,"string");return yc(e)=="symbol"?e:e+""}function xTe(t,e){if(yc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ss=function(t){function e(n){var r;return hTe(this,e),r=mTe(this,e,[n]),Nr(r,"pieRef",null),Nr(r,"sectorRefs",[]),Nr(r,"id",Jc("recharts-pie-")),Nr(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Ae(i)&&i()}),Nr(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Ae(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return vTe(e,t),pTe(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.label,l=s.labelLine,c=s.dataKey,u=s.valueKey,d=xe(this.props,!1),f=xe(a,!1),h=xe(l,!1),m=a&&a.offsetRadius||20,y=r.map(function(g,x){var w=(g.startAngle+g.endAngle)/2,b=pt(g.cx,g.cy,g.outerRadius+m,w),v=ut(ut(ut(ut({},d),g),{},{stroke:"none"},f),{},{index:x,textAnchor:e.getTextAnchor(b.x,g.cx)},b),N=ut(ut(ut(ut({},d),g),{},{fill:"none",stroke:g.fill},h),{},{index:x,points:[pt(g.cx,g.cy,g.outerRadius,w),b]}),S=c;return ke(c)&&ke(u)?S="value":ke(c)&&(S=u),L.createElement(Ge,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(x)},l&&e.renderLabelLineItem(l,N,"line"),e.renderLabelItem(a,v,Xt(g,S)))});return L.createElement(Ge,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(r){var i=this,s=this.props,a=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return r.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&r.length!==1)return null;var f=i.isActiveIndex(d),h=c&&i.hasActiveIndex()?c:null,m=f?a:h,y=ut(ut({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return L.createElement(Ge,wl({ref:function(x){x&&!i.sectorRefs.includes(x)&&i.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},Eo(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),L.createElement(J4,wl({option:m,isActive:f,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,s=i.sectors,a=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state,h=f.prevSectors,m=f.prevIsAnimationActive;return L.createElement(Ni,{begin:l,duration:c,isActive:a,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var g=y.t,x=[],w=s&&s[0],b=w.startAngle;return s.forEach(function(v,N){var S=h&&h[N],A=N>0?fr(v,"paddingAngle",0):0;if(S){var E=Wn(S.endAngle-S.startAngle,v.endAngle-v.startAngle),_=ut(ut({},v),{},{startAngle:b+A,endAngle:b+E(g)+A});x.push(_),b=_.endAngle}else{var C=v.endAngle,P=v.startAngle,T=Wn(0,C-P),O=T(g),R=ut(ut({},v),{},{startAngle:b+A,endAngle:b+O+A});x.push(R),b=R.endAngle}}),L.createElement(Ge,null,r.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var a=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[a].focus(),i.setState({sectorToFocus:a});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,s=r.isAnimationActive,a=this.state.prevSectors;return s&&i&&i.length&&(!a||!fc(a,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,s=i.hide,a=i.sectors,l=i.className,c=i.label,u=i.cx,d=i.cy,f=i.innerRadius,h=i.outerRadius,m=i.isAnimationActive,y=this.state.isAnimationFinished;if(s||!a||!a.length||!ne(u)||!ne(d)||!ne(f)||!ne(h))return null;var g=Ie("recharts-pie",l);return L.createElement(Ge,{tabIndex:this.props.rootTabIndex,className:g,ref:function(w){r.pieRef=w}},this.renderSectors(),c&&this.renderLabels(a),sn.renderCallByParent(this.props,null,!1),(!m||y)&&es.renderCallByParent(this.props,a,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,s){if(L.isValidElement(r))return L.cloneElement(r,i);if(Ae(r))return r(i);var a=Ie("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return L.createElement(Fl,wl({},i,{key:s,type:"linear",className:a}))}},{key:"renderLabelItem",value:function(r,i,s){if(L.isValidElement(r))return L.cloneElement(r,i);var a=s;if(Ae(r)&&(a=r(i),L.isValidElement(a)))return a;var l=Ie("recharts-pie-label-text",typeof r!="boolean"&&!Ae(r)?r.className:"");return L.createElement(Co,wl({},i,{alignmentBaseline:"middle",className:l}),a)}}])}(k.PureComponent);om=Ss;Nr(Ss,"displayName","Pie");Nr(Ss,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Lo.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Nr(Ss,"parseDeltaAngle",function(t,e){var n=$n(e-t),r=Math.min(Math.abs(e-t),360);return n*r});Nr(Ss,"getRealPieData",function(t){var e=t.data,n=t.children,r=xe(t,!1),i=Pr(n,yv);return e&&e.length?e.map(function(s,a){return ut(ut(ut({payload:s},r),s),i&&i[a]&&i[a].props)}):i&&i.length?i.map(function(s){return ut(ut({},r),s.props)}):[]});Nr(Ss,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,s=e.height,a=I4(i,s),l=r+Dn(t.cx,i,i/2),c=n+Dn(t.cy,s,s/2),u=Dn(t.innerRadius,a,0),d=Dn(t.outerRadius,a,a*.8),f=t.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});Nr(Ss,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?ut(ut({},e.type.defaultProps),e.props):e.props,i=om.getRealPieData(r);if(!i||!i.length)return null;var s=r.cornerRadius,a=r.startAngle,l=r.endAngle,c=r.paddingAngle,u=r.dataKey,d=r.nameKey,f=r.valueKey,h=r.tooltipType,m=Math.abs(r.minAngle),y=om.parseCoordinateOfPie(r,n),g=om.parseDeltaAngle(a,l),x=Math.abs(g),w=u;ke(u)&&ke(f)?(Qr(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w="value"):ke(u)&&(Qr(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),w=f);var b=i.filter(function(_){return Xt(_,w,0)!==0}).length,v=(x>=360?b:b-1)*c,N=x-b*m-v,S=i.reduce(function(_,C){var P=Xt(C,w,0);return _+(ne(P)?P:0)},0),A;if(S>0){var E;A=i.map(function(_,C){var P=Xt(_,w,0),T=Xt(_,d,C),O=(ne(P)?P:0)/S,R;C?R=E.endAngle+$n(g)*c*(P!==0?1:0):R=a;var M=R+$n(g)*((P!==0?m:0)+O*N),D=(R+M)/2,B=(y.innerRadius+y.outerRadius)/2,U=[{name:T,value:P,payload:_,dataKey:w,type:h}],V=pt(y.cx,y.cy,B,D);return E=ut(ut(ut({percent:O,cornerRadius:s,name:T,tooltipPayload:U,midAngle:D,middleRadius:B,tooltipPosition:V},_),y),{},{value:Xt(_,w),startAngle:R,endAngle:M,payload:_,paddingAngle:$n(g)*c}),E})}return ut(ut({},y),{},{sectors:A,data:i})});var bTe=Math.ceil,wTe=Math.max;function _Te(t,e,n,r){for(var i=-1,s=wTe(bTe((e-t)/(n||1)),0),a=Array(s);s--;)a[r?s:++i]=t,t+=n;return a}var STe=_Te,ATe=bL,f2=1/0,NTe=17976931348623157e292;function ETe(t){if(!t)return t===0?t:0;if(t=ATe(t),t===f2||t===-f2){var e=t<0?-1:1;return e*NTe}return t===t?t:0}var t5=ETe,CTe=STe,jTe=gv,gx=t5;function TTe(t){return function(e,n,r){return r&&typeof r!="number"&&jTe(e,n,r)&&(n=r=void 0),e=gx(e),n===void 0?(n=e,e=0):n=gx(n),r=r===void 0?e<n?1:-1:gx(r),CTe(e,n,r,t)}}var PTe=TTe,kTe=PTe,ITe=kTe(),OTe=ITe;const qg=rt(OTe);function Mf(t){"@babel/helpers - typeof";return Mf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mf(t)}function h2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function p2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h2(Object(n),!0).forEach(function(r){n5(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n5(t,e,n){return e=RTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RTe(t){var e=$Te(t,"string");return Mf(e)=="symbol"?e:e+""}function $Te(t,e){if(Mf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Mf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var DTe=["Webkit","Moz","O","ms"],MTe=function(e,n){var r=e.replace(/(\w)/,function(s){return s.toUpperCase()}),i=DTe.reduce(function(s,a){return p2(p2({},s),{},n5({},a+r,n))},{});return i[e]=n,i};function vc(t){"@babel/helpers - typeof";return vc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vc(t)}function Wg(){return Wg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wg.apply(this,arguments)}function m2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m2(Object(n),!0).forEach(function(r){tr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LTe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,i5(r.key),r)}}function FTe(t,e,n){return e&&g2(t.prototype,e),n&&g2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function VTe(t,e,n){return e=Gg(e),BTe(t,r5()?Reflect.construct(e,n||[],Gg(t).constructor):e.apply(t,n))}function BTe(t,e){if(e&&(vc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return UTe(t)}function UTe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function r5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r5=function(){return!!t})()}function Gg(t){return Gg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gg(t)}function zTe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g1(t,e)}function g1(t,e){return g1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},g1(t,e)}function tr(t,e,n){return e=i5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i5(t){var e=qTe(t,"string");return vc(e)=="symbol"?e:e+""}function qTe(t,e){if(vc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var WTe=function(e){var n=e.data,r=e.startIndex,i=e.endIndex,s=e.x,a=e.width,l=e.travellerWidth;if(!n||!n.length)return{};var c=n.length,u=vd().domain(qg(0,c)).range([s,s+a-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(r),endX:u(i),scale:u,scaleValues:d}},y2=function(e){return e.changedTouches&&!!e.changedTouches.length},xc=function(t){function e(n){var r;return LTe(this,e),r=VTe(this,e,[n]),tr(r,"handleDrag",function(i){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(i):r.state.isSlideMoving&&r.handleSlideDrag(i)}),tr(r,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&r.handleDrag(i.changedTouches[0])}),tr(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=r.props,s=i.endIndex,a=i.onDragEnd,l=i.startIndex;a==null||a({endIndex:s,startIndex:l})}),r.detachDragEndListener()}),tr(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),tr(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),tr(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),tr(r,"handleSlideDragStart",function(i){var s=y2(i)?i.changedTouches[0]:i;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return zTe(e,t),FTe(e,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var i=r.startX,s=r.endX,a=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(i,s),h=Math.max(i,s),m=e.getIndexInRange(a,f),y=e.getIndexInRange(a,h);return{startIndex:m-m%c,endIndex:y===d?d:y-y%c}}},{key:"getTextOfTick",value:function(r){var i=this.props,s=i.data,a=i.tickFormatter,l=i.dataKey,c=Xt(s[r],l,r);return Ae(a)?a(c,r):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var i=this.state,s=i.slideMoveStartX,a=i.startX,l=i.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,m=c.endIndex,y=c.onChange,g=r.pageX-s;g>0?g=Math.min(g,u+d-f-l,u+d-f-a):g<0&&(g=Math.max(g,u-a,u-l));var x=this.getIndex({startX:a+g,endX:l+g});(x.startIndex!==h||x.endIndex!==m)&&y&&y(x),this.setState({startX:a+g,endX:l+g,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,i){var s=y2(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var i=this.state,s=i.brushMoveStartX,a=i.movingTravellerId,l=i.endX,c=i.startX,u=this.state[a],d=this.props,f=d.x,h=d.width,m=d.travellerWidth,y=d.onChange,g=d.gap,x=d.data,w={startX:this.state.startX,endX:this.state.endX},b=r.pageX-s;b>0?b=Math.min(b,f+h-m-u):b<0&&(b=Math.max(b,f-u)),w[a]=u+b;var v=this.getIndex(w),N=v.startIndex,S=v.endIndex,A=function(){var _=x.length-1;return a==="startX"&&(l>c?N%g===0:S%g===0)||l<c&&S===_||a==="endX"&&(l>c?S%g===0:N%g===0)||l>c&&S===_};this.setState(tr(tr({},a,u+b),"brushMoveStartX",r.pageX),function(){y&&A()&&y(v)})}},{key:"handleTravellerMoveKeyboard",value:function(r,i){var s=this,a=this.state,l=a.scaleValues,c=a.startX,u=a.endX,d=this.state[i],f=l.indexOf(d);if(f!==-1){var h=f+r;if(!(h===-1||h>=l.length)){var m=l[h];i==="startX"&&m>=u||i==="endX"&&m<=c||this.setState(tr({},i,m),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,l=r.height,c=r.fill,u=r.stroke;return L.createElement("rect",{stroke:u,fill:c,x:i,y:s,width:a,height:l})}},{key:"renderPanorama",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,l=r.height,c=r.data,u=r.children,d=r.padding,f=k.Children.only(u);return f?L.cloneElement(f,{x:i,y:s,width:a,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(r,i){var s,a,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,m=c.ariaLabel,y=c.data,g=c.startIndex,x=c.endIndex,w=Math.max(r,this.props.x),b=yx(yx({},xe(this.props,!1)),{},{x:w,y:u,width:d,height:f}),v=m||"Min value: ".concat((s=y[g])===null||s===void 0?void 0:s.name,", Max value: ").concat((a=y[x])===null||a===void 0?void 0:a.name);return L.createElement(Ge,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},e.renderTraveller(h,b))}},{key:"renderSlide",value:function(r,i){var s=this.props,a=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,d=Math.min(r,i)+u,f=Math.max(Math.abs(i-r)-u,0);return L.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:a,width:f,height:l})}},{key:"renderText",value:function(){var r=this.props,i=r.startIndex,s=r.endIndex,a=r.y,l=r.height,c=r.travellerWidth,u=r.stroke,d=this.state,f=d.startX,h=d.endX,m=5,y={pointerEvents:"none",fill:u};return L.createElement(Ge,{className:"recharts-brush-texts"},L.createElement(Co,Wg({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-m,y:a+l/2},y),this.getTextOfTick(i)),L.createElement(Co,Wg({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+m,y:a+l/2},y),this.getTextOfTick(s)))}},{key:"render",value:function(){var r=this.props,i=r.data,s=r.className,a=r.children,l=r.x,c=r.y,u=r.width,d=r.height,f=r.alwaysShowText,h=this.state,m=h.startX,y=h.endX,g=h.isTextActive,x=h.isSlideMoving,w=h.isTravellerMoving,b=h.isTravellerFocused;if(!i||!i.length||!ne(l)||!ne(c)||!ne(u)||!ne(d)||u<=0||d<=0)return null;var v=Ie("recharts-brush",s),N=L.Children.count(a)===1,S=MTe("userSelect","none");return L.createElement(Ge,{className:v,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(m,y),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(y,"endX"),(g||x||w||b||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var i=r.x,s=r.y,a=r.width,l=r.height,c=r.stroke,u=Math.floor(s+l/2)-1;return L.createElement(L.Fragment,null,L.createElement("rect",{x:i,y:s,width:a,height:l,fill:c,stroke:"none"}),L.createElement("line",{x1:i+1,y1:u,x2:i+a-1,y2:u,fill:"none",stroke:"#fff"}),L.createElement("line",{x1:i+1,y1:u+2,x2:i+a-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,i){var s;return L.isValidElement(r)?s=L.cloneElement(r,i):Ae(r)?s=r(i):s=e.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(r,i){var s=r.data,a=r.width,l=r.x,c=r.travellerWidth,u=r.updateId,d=r.startIndex,f=r.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return yx({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:a},s&&s.length?WTe({data:s,width:a,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(a!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+a-c]);var h=i.scale.domain().map(function(m){return i.scale(m)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:a,startX:i.scale(r.startIndex),endX:i.scale(r.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(r,i){for(var s=r.length,a=0,l=s-1;l-a>1;){var c=Math.floor((a+l)/2);r[c]>i?l=c:a=c}return i>=r[l]?l:a}}])}(k.PureComponent);tr(xc,"displayName","Brush");tr(xc,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var GTe=TA;function HTe(t,e){var n;return GTe(t,function(r,i,s){return n=e(r,i,s),!n}),!!n}var KTe=HTe,YTe=HM,XTe=Pi,QTe=KTe,JTe=Zn,ZTe=gv;function ePe(t,e,n){var r=JTe(t)?YTe:QTe;return n&&ZTe(t,e,n)&&(e=void 0),r(t,XTe(e))}var tPe=ePe;const nPe=rt(tPe);var bi=function(e,n){var r=e.alwaysShow,i=e.ifOverflow;return r&&(i="extendDomain"),i===n},v2=mL;function rPe(t,e,n){e=="__proto__"&&v2?v2(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var iPe=rPe,sPe=iPe,aPe=hL,oPe=Pi;function lPe(t,e){var n={};return e=oPe(e),aPe(t,function(r,i,s){sPe(n,i,e(r,i,s))}),n}var cPe=lPe;const uPe=rt(cPe);function dPe(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}var fPe=dPe,hPe=TA;function pPe(t,e){var n=!0;return hPe(t,function(r,i,s){return n=!!e(r,i,s),n}),n}var mPe=pPe,gPe=fPe,yPe=mPe,vPe=Pi,xPe=Zn,bPe=gv;function wPe(t,e,n){var r=xPe(t)?gPe:yPe;return n&&bPe(t,e,n)&&(e=void 0),r(t,vPe(e))}var _Pe=wPe;const s5=rt(_Pe);var SPe=["x","y"];function Lf(t){"@babel/helpers - typeof";return Lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lf(t)}function y1(){return y1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},y1.apply(this,arguments)}function x2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x2(Object(n),!0).forEach(function(r){APe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function APe(t,e,n){return e=NPe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NPe(t){var e=EPe(t,"string");return Lf(e)=="symbol"?e:e+""}function EPe(t,e){if(Lf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Lf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function CPe(t,e){if(t==null)return{};var n=jPe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jPe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function TPe(t,e){var n=t.x,r=t.y,i=CPe(t,SPe),s="".concat(n),a=parseInt(s,10),l="".concat(r),c=parseInt(l,10),u="".concat(e.height||i.height),d=parseInt(u,10),f="".concat(e.width||i.width),h=parseInt(f,10);return Fu(Fu(Fu(Fu(Fu({},e),i),a?{x:a}:{}),c?{y:c}:{}),{},{height:d,width:h,name:e.name,radius:e.radius})}function b2(t){return L.createElement(J4,y1({shapeType:"rectangle",propTransformer:TPe,activeClassName:"recharts-active-bar"},t))}var PPe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,i){if(typeof e=="number")return e;var s=ne(r)||Que(r);return s?e(r,i):(s||To(),n)}},kPe=["value","background"],a5;function bc(t){"@babel/helpers - typeof";return bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bc(t)}function IPe(t,e){if(t==null)return{};var n=OPe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function OPe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Hg(){return Hg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hg.apply(this,arguments)}function w2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Lt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w2(Object(n),!0).forEach(function(r){Ks(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l5(r.key),r)}}function $Pe(t,e,n){return e&&_2(t.prototype,e),n&&_2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function DPe(t,e,n){return e=Kg(e),MPe(t,o5()?Reflect.construct(e,n||[],Kg(t).constructor):e.apply(t,n))}function MPe(t,e){if(e&&(bc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LPe(t)}function LPe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o5=function(){return!!t})()}function Kg(t){return Kg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kg(t)}function FPe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&v1(t,e)}function v1(t,e){return v1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},v1(t,e)}function Ks(t,e,n){return e=l5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l5(t){var e=VPe(t,"string");return bc(e)=="symbol"?e:e+""}function VPe(t,e){if(bc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Uo=function(t){function e(){var n;RPe(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=DPe(this,e,[].concat(i)),Ks(n,"state",{isAnimationFinished:!1}),Ks(n,"id",Jc("recharts-bar-")),Ks(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),a&&a()}),Ks(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),a&&a()}),n}return FPe(e,t),$Pe(e,[{key:"renderRectanglesStatically",value:function(r){var i=this,s=this.props,a=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,d=xe(this.props,!1);return r&&r.map(function(f,h){var m=h===c,y=m?u:a,g=Lt(Lt(Lt({},d),f),{},{isActive:m,option:y,index:h,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return L.createElement(Ge,Hg({className:"recharts-bar-rectangle"},Eo(i.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),L.createElement(b2,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,i=this.props,s=i.data,a=i.layout,l=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,f=i.animationId,h=this.state.prevData;return L.createElement(Ni,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var y=m.t,g=s.map(function(x,w){var b=h&&h[w];if(b){var v=Wn(b.x,x.x),N=Wn(b.y,x.y),S=Wn(b.width,x.width),A=Wn(b.height,x.height);return Lt(Lt({},x),{},{x:v(y),y:N(y),width:S(y),height:A(y)})}if(a==="horizontal"){var E=Wn(0,x.height),_=E(y);return Lt(Lt({},x),{},{y:x.y+x.height-_,height:_})}var C=Wn(0,x.width),P=C(y);return Lt(Lt({},x),{},{width:P})});return L.createElement(Ge,null,r.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var r=this.props,i=r.data,s=r.isAnimationActive,a=this.state.prevData;return s&&i&&i.length&&(!a||!fc(a,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var r=this,i=this.props,s=i.data,a=i.dataKey,l=i.activeIndex,c=xe(this.props.background,!1);return s.map(function(u,d){u.value;var f=u.background,h=IPe(u,kPe);if(!f)return null;var m=Lt(Lt(Lt(Lt(Lt({},h),{},{fill:"#eee"},f),c),Eo(r.props,u,d)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:a,index:d,className:"recharts-bar-background-rectangle"});return L.createElement(b2,Hg({key:"background-bar-".concat(d),option:r.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(r,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,f=Pr(d,jv);if(!f)return null;var h=u==="vertical"?a[0].height/2:a[0].width/2,m=function(x,w){var b=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:b,errorVal:Xt(x,w)}},y={clipPath:r?"url(#clipPath-".concat(i,")"):null};return L.createElement(Ge,y,f.map(function(g){return L.cloneElement(g,{key:"error-bar-".concat(i,"-").concat(g.props.dataKey),data:a,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var r=this.props,i=r.hide,s=r.data,a=r.className,l=r.xAxis,c=r.yAxis,u=r.left,d=r.top,f=r.width,h=r.height,m=r.isAnimationActive,y=r.background,g=r.id;if(i||!s||!s.length)return null;var x=this.state.isAnimationFinished,w=Ie("recharts-bar",a),b=l&&l.allowDataOverflow,v=c&&c.allowDataOverflow,N=b||v,S=ke(g)?this.id:g;return L.createElement(Ge,{className:w},b||v?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(S)},L.createElement("rect",{x:b?u:u-f/2,y:v?d:d-h/2,width:b?f:f*2,height:v?h:h*2}))):null,L.createElement(Ge,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(S,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,S),(!m||x)&&es.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:i.curData}:r.data!==i.curData?{curData:r.data}:null}}])}(k.PureComponent);a5=Uo;Ks(Uo,"displayName","Bar");Ks(Uo,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Lo.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ks(Uo,"getComposedData",function(t){var e=t.props,n=t.item,r=t.barPosition,i=t.bandSize,s=t.xAxis,a=t.yAxis,l=t.xAxisTicks,c=t.yAxisTicks,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,h=t.offset,m=gAe(r,n);if(!m)return null;var y=e.layout,g=n.type.defaultProps,x=g!==void 0?Lt(Lt({},g),n.props):n.props,w=x.dataKey,b=x.children,v=x.minPointSize,N=y==="horizontal"?a:s,S=u?N.scale.domain():null,A=SAe({numericAxis:N}),E=Pr(b,yv),_=f.map(function(C,P){var T,O,R,M,D,B;u?T=yAe(u[d+P],S):(T=Xt(C,w),Array.isArray(T)||(T=[A,T]));var U=PPe(v,a5.defaultProps.minPointSize)(T[1],P);if(y==="horizontal"){var V,W=[a.scale(T[0]),a.scale(T[1])],H=W[0],te=W[1];O=pk({axis:s,ticks:l,bandSize:i,offset:m.offset,entry:C,index:P}),R=(V=te??H)!==null&&V!==void 0?V:void 0,M=m.size;var X=H-te;if(D=Number.isNaN(X)?0:X,B={x:O,y:a.y,width:M,height:a.height},Math.abs(U)>0&&Math.abs(D)<Math.abs(U)){var ie=$n(D||U)*(Math.abs(U)-Math.abs(D));R-=ie,D+=ie}}else{var q=[s.scale(T[0]),s.scale(T[1])],ae=q[0],ge=q[1];if(O=ae,R=pk({axis:a,ticks:c,bandSize:i,offset:m.offset,entry:C,index:P}),M=ge-ae,D=m.size,B={x:s.x,y:R,width:s.width,height:D},Math.abs(U)>0&&Math.abs(M)<Math.abs(U)){var Fe=$n(M||U)*(Math.abs(U)-Math.abs(M));M+=Fe}}return Lt(Lt(Lt({},C),{},{x:O,y:R,width:M,height:D,value:u?T:T[1],payload:C,background:B},E&&E[P]&&E[P].props),{},{tooltipPayload:[P4(n,C)],tooltipPosition:{x:O+M/2,y:R+D/2}})});return Lt({data:_,layout:y},h)});function Ff(t){"@babel/helpers - typeof";return Ff=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ff(t)}function BPe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c5(r.key),r)}}function UPe(t,e,n){return e&&S2(t.prototype,e),n&&S2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function A2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Wr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?A2(Object(n),!0).forEach(function(r){Dv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dv(t,e,n){return e=c5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c5(t){var e=zPe(t,"string");return Ff(e)=="symbol"?e:e+""}function zPe(t,e){if(Ff(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ff(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var u5=function(e,n,r,i,s){var a=e.width,l=e.height,c=e.layout,u=e.children,d=Object.keys(n),f={left:r.left,leftMirror:r.left,right:a-r.right,rightMirror:a-r.right,top:r.top,topMirror:r.top,bottom:l-r.bottom,bottomMirror:l-r.bottom},h=!!rr(u,Uo);return d.reduce(function(m,y){var g=n[y],x=g.orientation,w=g.domain,b=g.padding,v=b===void 0?{}:b,N=g.mirror,S=g.reversed,A="".concat(x).concat(N?"Mirror":""),E,_,C,P,T;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var O=w[1]-w[0],R=1/0,M=g.categoricalDomain.sort(ede);if(M.forEach(function(q,ae){ae>0&&(R=Math.min((q||0)-(M[ae-1]||0),R))}),Number.isFinite(R)){var D=R/O,B=g.layout==="vertical"?r.height:r.width;if(g.padding==="gap"&&(E=D*B/2),g.padding==="no-gap"){var U=Dn(e.barCategoryGap,D*B),V=D*B/2;E=V-U-(V-U)/B*U}}}i==="xAxis"?_=[r.left+(v.left||0)+(E||0),r.left+r.width-(v.right||0)-(E||0)]:i==="yAxis"?_=c==="horizontal"?[r.top+r.height-(v.bottom||0),r.top+(v.top||0)]:[r.top+(v.top||0)+(E||0),r.top+r.height-(v.bottom||0)-(E||0)]:_=g.range,S&&(_=[_[1],_[0]]);var W=E4(g,s,h),H=W.scale,te=W.realScaleType;H.domain(w).range(_),C4(H);var X=j4(H,Wr(Wr({},g),{},{realScaleType:te}));i==="xAxis"?(T=x==="top"&&!N||x==="bottom"&&N,C=r.left,P=f[A]-T*g.height):i==="yAxis"&&(T=x==="left"&&!N||x==="right"&&N,C=f[A]-T*g.width,P=r.top);var ie=Wr(Wr(Wr({},g),X),{},{realScaleType:te,x:C,y:P,scale:H,width:i==="xAxis"?r.width:g.width,height:i==="yAxis"?r.height:g.height});return ie.bandSize=kg(ie,X),!g.hide&&i==="xAxis"?f[A]+=(T?-1:1)*ie.height:g.hide||(f[A]+=(T?-1:1)*ie.width),Wr(Wr({},m),{},Dv({},y,ie))},{})},d5=function(e,n){var r=e.x,i=e.y,s=n.x,a=n.y;return{x:Math.min(r,s),y:Math.min(i,a),width:Math.abs(s-r),height:Math.abs(a-i)}},qPe=function(e){var n=e.x1,r=e.y1,i=e.x2,s=e.y2;return d5({x:n,y:r},{x:i,y:s})},f5=function(){function t(e){BPe(this,t),this.scale=e}return UPe(t,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.bandAware,s=r.position;if(n!==void 0){if(s)switch(s){case"start":return this.scale(n);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+a}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),i=r[0],s=r[r.length-1];return i<=s?n>=i&&n<=s:n>=s&&n<=i}}],[{key:"create",value:function(n){return new t(n)}}])}();Dv(f5,"EPS",1e-4);var iN=function(e){var n=Object.keys(e).reduce(function(r,i){return Wr(Wr({},r),{},Dv({},i,f5.create(e[i])))},{});return Wr(Wr({},n),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,l=s.position;return uPe(i,function(c,u){return n[u].apply(c,{bandAware:a,position:l})})},isInRange:function(i){return s5(i,function(s,a){return n[a].isInRange(s)})}})};function WPe(t){return(t%180+180)%180}var GPe=function(e){var n=e.width,r=e.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=WPe(i),a=s*Math.PI/180,l=Math.atan(r/n),c=a>l&&a<Math.PI-l?r/Math.sin(a):n/Math.cos(a);return Math.abs(c)},HPe=Pi,KPe=hh,YPe=pv;function XPe(t){return function(e,n,r){var i=Object(e);if(!KPe(e)){var s=HPe(n);e=YPe(e),n=function(l){return s(i[l],l,i)}}var a=t(e,n,r);return a>-1?i[s?e[a]:a]:void 0}}var QPe=XPe,JPe=t5;function ZPe(t){var e=JPe(t),n=e%1;return e===e?n?e-n:e:0}var eke=ZPe,tke=oL,nke=Pi,rke=eke,ike=Math.max;function ske(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:rke(n);return i<0&&(i=ike(r+i,0)),tke(t,nke(e),i)}var ake=ske,oke=QPe,lke=ake,cke=oke(lke),uke=cke;const dke=rt(uke);var fke=rue(function(t){return{x:t.left,y:t.top,width:t.width,height:t.height}},function(t){return["l",t.left,"t",t.top,"w",t.width,"h",t.height].join("")}),sN=k.createContext(void 0),aN=k.createContext(void 0),h5=k.createContext(void 0),p5=k.createContext({}),m5=k.createContext(void 0),g5=k.createContext(0),y5=k.createContext(0),N2=function(e){var n=e.state,r=n.xAxisMap,i=n.yAxisMap,s=n.offset,a=e.clipPathId,l=e.children,c=e.width,u=e.height,d=fke(s);return L.createElement(sN.Provider,{value:r},L.createElement(aN.Provider,{value:i},L.createElement(p5.Provider,{value:s},L.createElement(h5.Provider,{value:d},L.createElement(m5.Provider,{value:a},L.createElement(g5.Provider,{value:u},L.createElement(y5.Provider,{value:c},l)))))))},hke=function(){return k.useContext(m5)},v5=function(e){var n=k.useContext(sN);n==null&&To();var r=n[e];return r==null&&To(),r},pke=function(){var e=k.useContext(sN);return Us(e)},mke=function(){var e=k.useContext(aN),n=dke(e,function(r){return s5(r.domain,Number.isFinite)});return n||Us(e)},x5=function(e){var n=k.useContext(aN);n==null&&To();var r=n[e];return r==null&&To(),r},gke=function(){var e=k.useContext(h5);return e},yke=function(){return k.useContext(p5)},oN=function(){return k.useContext(y5)},lN=function(){return k.useContext(g5)};function wc(t){"@babel/helpers - typeof";return wc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wc(t)}function vke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,w5(r.key),r)}}function bke(t,e,n){return e&&xke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function wke(t,e,n){return e=Yg(e),_ke(t,b5()?Reflect.construct(e,n||[],Yg(t).constructor):e.apply(t,n))}function _ke(t,e){if(e&&(wc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ske(t)}function Ske(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(b5=function(){return!!t})()}function Yg(t){return Yg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yg(t)}function Ake(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x1(t,e)}function x1(t,e){return x1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},x1(t,e)}function E2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function C2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?E2(Object(n),!0).forEach(function(r){cN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cN(t,e,n){return e=w5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w5(t){var e=Nke(t,"string");return wc(e)=="symbol"?e:e+""}function Nke(t,e){if(wc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Eke(t,e){return Pke(t)||Tke(t,e)||jke(t,e)||Cke()}function Cke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jke(t,e){if(t){if(typeof t=="string")return j2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j2(t,e)}}function j2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Tke(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function Pke(t){if(Array.isArray(t))return t}function b1(){return b1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b1.apply(this,arguments)}var kke=function(e,n){var r;return L.isValidElement(e)?r=L.cloneElement(e,n):Ae(e)?r=e(n):r=L.createElement("line",b1({},n,{className:"recharts-reference-line-line"})),r},Ike=function(e,n,r,i,s,a,l,c,u){var d=s.x,f=s.y,h=s.width,m=s.height;if(r){var y=u.y,g=e.y.apply(y,{position:a});if(bi(u,"discard")&&!e.y.isInRange(g))return null;var x=[{x:d+h,y:g},{x:d,y:g}];return c==="left"?x.reverse():x}if(n){var w=u.x,b=e.x.apply(w,{position:a});if(bi(u,"discard")&&!e.x.isInRange(b))return null;var v=[{x:b,y:f+m},{x:b,y:f}];return l==="top"?v.reverse():v}if(i){var N=u.segment,S=N.map(function(A){return e.apply(A,{position:a})});return bi(u,"discard")&&nPe(S,function(A){return!e.isInRange(A)})?null:S}return null};function Oke(t){var e=t.x,n=t.y,r=t.segment,i=t.xAxisId,s=t.yAxisId,a=t.shape,l=t.className,c=t.alwaysShow,u=hke(),d=v5(i),f=x5(s),h=gke();if(!u||!h)return null;Qr(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=iN({x:d.scale,y:f.scale}),y=Jt(e),g=Jt(n),x=r&&r.length===2,w=Ike(m,y,g,x,h,t.position,d.orientation,f.orientation,t);if(!w)return null;var b=Eke(w,2),v=b[0],N=v.x,S=v.y,A=b[1],E=A.x,_=A.y,C=bi(t,"hidden")?"url(#".concat(u,")"):void 0,P=C2(C2({clipPath:C},xe(t,!0)),{},{x1:N,y1:S,x2:E,y2:_});return L.createElement(Ge,{className:Ie("recharts-reference-line",l)},kke(a,P),sn.renderCallByParent(t,qPe({x1:N,y1:S,x2:E,y2:_})))}var uN=function(t){function e(){return vke(this,e),wke(this,e,arguments)}return Ake(e,t),bke(e,[{key:"render",value:function(){return L.createElement(Oke,this.props)}}])}(L.Component);cN(uN,"displayName","ReferenceLine");cN(uN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function w1(){return w1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w1.apply(this,arguments)}function _c(t){"@babel/helpers - typeof";return _c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_c(t)}function T2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function P2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T2(Object(n),!0).forEach(function(r){Mv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S5(r.key),r)}}function Dke(t,e,n){return e&&$ke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mke(t,e,n){return e=Xg(e),Lke(t,_5()?Reflect.construct(e,n||[],Xg(t).constructor):e.apply(t,n))}function Lke(t,e){if(e&&(_c(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fke(t)}function Fke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_5=function(){return!!t})()}function Xg(t){return Xg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xg(t)}function Vke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_1(t,e)}function _1(t,e){return _1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_1(t,e)}function Mv(t,e,n){return e=S5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function S5(t){var e=Bke(t,"string");return _c(e)=="symbol"?e:e+""}function Bke(t,e){if(_c(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_c(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Uke=function(e){var n=e.x,r=e.y,i=e.xAxis,s=e.yAxis,a=iN({x:i.scale,y:s.scale}),l=a.apply({x:n,y:r},{bandAware:!0});return bi(e,"discard")&&!a.isInRange(l)?null:l},Lv=function(t){function e(){return Rke(this,e),Mke(this,e,arguments)}return Vke(e,t),Dke(e,[{key:"render",value:function(){var r=this.props,i=r.x,s=r.y,a=r.r,l=r.alwaysShow,c=r.clipPathId,u=Jt(i),d=Jt(s);if(Qr(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=Uke(this.props);if(!f)return null;var h=f.x,m=f.y,y=this.props,g=y.shape,x=y.className,w=bi(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=P2(P2({clipPath:w},xe(this.props,!0)),{},{cx:h,cy:m});return L.createElement(Ge,{className:Ie("recharts-reference-dot",x)},e.renderDot(g,b),sn.renderCallByParent(this.props,{x:h-a,y:m-a,width:2*a,height:2*a}))}}])}(L.Component);Mv(Lv,"displayName","ReferenceDot");Mv(Lv,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Mv(Lv,"renderDot",function(t,e){var n;return L.isValidElement(t)?n=L.cloneElement(t,e):Ae(t)?n=t(e):n=L.createElement(Tv,w1({},e,{cx:e.cx,cy:e.cy,className:"recharts-reference-dot-dot"})),n});function S1(){return S1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},S1.apply(this,arguments)}function Sc(t){"@babel/helpers - typeof";return Sc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sc(t)}function k2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function I2(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?k2(Object(n),!0).forEach(function(r){Fv(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zke(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,N5(r.key),r)}}function Wke(t,e,n){return e&&qke(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Gke(t,e,n){return e=Qg(e),Hke(t,A5()?Reflect.construct(e,n||[],Qg(t).constructor):e.apply(t,n))}function Hke(t,e){if(e&&(Sc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kke(t)}function Kke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(A5=function(){return!!t})()}function Qg(t){return Qg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qg(t)}function Yke(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A1(t,e)}function A1(t,e){return A1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},A1(t,e)}function Fv(t,e,n){return e=N5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N5(t){var e=Xke(t,"string");return Sc(e)=="symbol"?e:e+""}function Xke(t,e){if(Sc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Sc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Qke=function(e,n,r,i,s){var a=s.x1,l=s.x2,c=s.y1,u=s.y2,d=s.xAxis,f=s.yAxis;if(!d||!f)return null;var h=iN({x:d.scale,y:f.scale}),m={x:e?h.x.apply(a,{position:"start"}):h.x.rangeMin,y:r?h.y.apply(c,{position:"start"}):h.y.rangeMin},y={x:n?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:i?h.y.apply(u,{position:"end"}):h.y.rangeMax};return bi(s,"discard")&&(!h.isInRange(m)||!h.isInRange(y))?null:d5(m,y)},Vv=function(t){function e(){return zke(this,e),Gke(this,e,arguments)}return Yke(e,t),Wke(e,[{key:"render",value:function(){var r=this.props,i=r.x1,s=r.x2,a=r.y1,l=r.y2,c=r.className,u=r.alwaysShow,d=r.clipPathId;Qr(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Jt(i),h=Jt(s),m=Jt(a),y=Jt(l),g=this.props.shape;if(!f&&!h&&!m&&!y&&!g)return null;var x=Qke(f,h,m,y,this.props);if(!x&&!g)return null;var w=bi(this.props,"hidden")?"url(#".concat(d,")"):void 0;return L.createElement(Ge,{className:Ie("recharts-reference-area",c)},e.renderRect(g,I2(I2({clipPath:w},xe(this.props,!0)),x)),sn.renderCallByParent(this.props,x))}}])}(L.Component);Fv(Vv,"displayName","ReferenceArea");Fv(Vv,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Fv(Vv,"renderRect",function(t,e){var n;return L.isValidElement(t)?n=L.cloneElement(t,e):Ae(t)?n=t(e):n=L.createElement(rN,S1({},e,{className:"recharts-reference-area-rect"})),n});function E5(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function Jke(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return GPe(r,n)}function Zke(t,e,n){var r=n==="width",i=t.x,s=t.y,a=t.width,l=t.height;return e===1?{start:r?i:s,end:r?i+a:s+l}:{start:r?i+a:s+l,end:r?i:s}}function Jg(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function e2e(t,e){return E5(t,e+1)}function t2e(t,e,n,r,i){for(var s=(r||[]).slice(),a=e.start,l=e.end,c=0,u=1,d=a,f=function(){var y=r==null?void 0:r[c];if(y===void 0)return{v:E5(r,u)};var g=c,x,w=function(){return x===void 0&&(x=n(y,g)),x},b=y.coordinate,v=c===0||Jg(t,b,w,d,l);v||(c=0,d=a,u+=1),v&&(d=b+t*(w()/2+i),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function Vf(t){"@babel/helpers - typeof";return Vf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vf(t)}function O2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function En(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O2(Object(n),!0).forEach(function(r){n2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function n2e(t,e,n){return e=r2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r2e(t){var e=i2e(t,"string");return Vf(e)=="symbol"?e:e+""}function i2e(t,e){if(Vf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Vf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function s2e(t,e,n,r,i){for(var s=(r||[]).slice(),a=s.length,l=e.start,c=e.end,u=function(h){var m=s[h],y,g=function(){return y===void 0&&(y=n(m,h)),y};if(h===a-1){var x=t*(m.coordinate+t*g()/2-c);s[h]=m=En(En({},m),{},{tickCoord:x>0?m.coordinate-x*t:m.coordinate})}else s[h]=m=En(En({},m),{},{tickCoord:m.coordinate});var w=Jg(t,m.tickCoord,g,l,c);w&&(c=m.tickCoord-t*(g()/2+i),s[h]=En(En({},m),{},{isShow:!0}))},d=a-1;d>=0;d--)u(d);return s}function a2e(t,e,n,r,i,s){var a=(r||[]).slice(),l=a.length,c=e.start,u=e.end;if(s){var d=r[l-1],f=n(d,l-1),h=t*(d.coordinate+t*f/2-u);a[l-1]=d=En(En({},d),{},{tickCoord:h>0?d.coordinate-h*t:d.coordinate});var m=Jg(t,d.tickCoord,function(){return f},c,u);m&&(u=d.tickCoord-t*(f/2+i),a[l-1]=En(En({},d),{},{isShow:!0}))}for(var y=s?l-1:l,g=function(b){var v=a[b],N,S=function(){return N===void 0&&(N=n(v,b)),N};if(b===0){var A=t*(v.coordinate-t*S()/2-c);a[b]=v=En(En({},v),{},{tickCoord:A<0?v.coordinate-A*t:v.coordinate})}else a[b]=v=En(En({},v),{},{tickCoord:v.coordinate});var E=Jg(t,v.tickCoord,S,c,u);E&&(c=v.tickCoord+t*(S()/2+i),a[b]=En(En({},v),{},{isShow:!0}))},x=0;x<y;x++)g(x);return a}function dN(t,e,n){var r=t.tick,i=t.ticks,s=t.viewBox,a=t.minTickGap,l=t.orientation,c=t.interval,u=t.tickFormatter,d=t.unit,f=t.angle;if(!i||!i.length||!r)return[];if(ne(c)||Lo.isSsr)return e2e(i,typeof c=="number"&&ne(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",y=d&&m==="width"?yd(d,{fontSize:e,letterSpacing:n}):{width:0,height:0},g=function(v,N){var S=Ae(u)?u(v.value,N):v.value;return m==="width"?Jke(yd(S,{fontSize:e,letterSpacing:n}),y,f):yd(S,{fontSize:e,letterSpacing:n})[m]},x=i.length>=2?$n(i[1].coordinate-i[0].coordinate):1,w=Zke(s,x,m);return c==="equidistantPreserveStart"?t2e(x,w,g,i,a):(c==="preserveStart"||c==="preserveStartEnd"?h=a2e(x,w,g,i,a,c==="preserveStartEnd"):h=s2e(x,w,g,i,a),h.filter(function(b){return b.isShow}))}var o2e=["viewBox"],l2e=["viewBox"],c2e=["ticks"];function Ac(t){"@babel/helpers - typeof";return Ac=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ac(t)}function _l(){return _l=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_l.apply(this,arguments)}function R2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R2(Object(n),!0).forEach(function(r){fN(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vx(t,e){if(t==null)return{};var n=u2e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function u2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function d2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j5(r.key),r)}}function f2e(t,e,n){return e&&$2(t.prototype,e),n&&$2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function h2e(t,e,n){return e=Zg(e),p2e(t,C5()?Reflect.construct(e,n||[],Zg(t).constructor):e.apply(t,n))}function p2e(t,e){if(e&&(Ac(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m2e(t)}function m2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C5=function(){return!!t})()}function Zg(t){return Zg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zg(t)}function g2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N1(t,e)}function N1(t,e){return N1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},N1(t,e)}function fN(t,e,n){return e=j5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j5(t){var e=y2e(t,"string");return Ac(e)=="symbol"?e:e+""}function y2e(t,e){if(Ac(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ac(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var su=function(t){function e(n){var r;return d2e(this,e),r=h2e(this,e,[n]),r.state={fontSize:"",letterSpacing:""},r}return g2e(e,t),f2e(e,[{key:"shouldComponentUpdate",value:function(r,i){var s=r.viewBox,a=vx(r,o2e),l=this.props,c=l.viewBox,u=vx(l,l2e);return!Dl(s,c)||!Dl(a,u)||!Dl(i,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var i=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var i=this.props,s=i.x,a=i.y,l=i.width,c=i.height,u=i.orientation,d=i.tickSize,f=i.mirror,h=i.tickMargin,m,y,g,x,w,b,v=f?-1:1,N=r.tickSize||d,S=ne(r.tickCoord)?r.tickCoord:r.coordinate;switch(u){case"top":m=y=r.coordinate,x=a+ +!f*c,g=x-v*N,b=g-v*h,w=S;break;case"left":g=x=r.coordinate,y=s+ +!f*l,m=y-v*N,w=m-v*h,b=S;break;case"right":g=x=r.coordinate,y=s+ +f*l,m=y+v*N,w=m+v*h,b=S;break;default:m=y=r.coordinate,x=a+ +f*c,g=x+v*N,b=g+v*h,w=S;break}return{line:{x1:m,y1:g,x2:y,y2:x},tick:{x:w,y:b}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a;switch(i){case"left":a=s?"start":"end";break;case"right":a=s?"end":"start";break;default:a="middle";break}return a}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,i=r.orientation,s=r.mirror,a="end";switch(i){case"left":case"right":a="middle";break;case"top":a=s?"start":"end";break;default:a=s?"end":"start";break}return a}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.x,s=r.y,a=r.width,l=r.height,c=r.orientation,u=r.mirror,d=r.axisLine,f=Gt(Gt(Gt({},xe(this.props,!1)),xe(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=Gt(Gt({},f),{},{x1:i,y1:s+h*l,x2:i+a,y2:s+h*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);f=Gt(Gt({},f),{},{x1:i+m*a,y1:s,x2:i+m*a,y2:s+l})}return L.createElement("line",_l({},f,{className:Ie("recharts-cartesian-axis-line",fr(d,"className"))}))}},{key:"renderTicks",value:function(r,i,s){var a=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,h=l.unit,m=dN(Gt(Gt({},this.props),{},{ticks:r}),i,s),y=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),x=xe(this.props,!1),w=xe(d,!1),b=Gt(Gt({},x),{},{fill:"none"},xe(c,!1)),v=m.map(function(N,S){var A=a.getTickLineCoord(N),E=A.line,_=A.tick,C=Gt(Gt(Gt(Gt({textAnchor:y,verticalAnchor:g},x),{},{stroke:"none",fill:u},w),_),{},{index:S,payload:N,visibleTicksCount:m.length,tickFormatter:f});return L.createElement(Ge,_l({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},Eo(a.props,N,S)),c&&L.createElement("line",_l({},b,E,{className:Ie("recharts-cartesian-axis-tick-line",fr(c,"className"))})),d&&e.renderTickItem(d,C,"".concat(Ae(f)?f(N.value,S):N.value).concat(h||"")))});return L.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var r=this,i=this.props,s=i.axisLine,a=i.width,l=i.height,c=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var f=this.props,h=f.ticks,m=vx(f,c2e),y=h;return Ae(c)&&(y=h&&h.length>0?c(this.props):c(m)),a<=0||l<=0||!y||!y.length?null:L.createElement(Ge,{className:Ie("recharts-cartesian-axis",u),ref:function(x){r.layerReference=x}},s&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),sn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,i,s){var a,l=Ie(i.className,"recharts-cartesian-axis-tick-value");return L.isValidElement(r)?a=L.cloneElement(r,Gt(Gt({},i),{},{className:l})):Ae(r)?a=r(Gt(Gt({},i),{},{className:l})):a=L.createElement(Co,_l({},i,{className:"recharts-cartesian-axis-tick-value"}),s),a}}])}(k.Component);fN(su,"displayName","CartesianAxis");fN(su,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var v2e=["x1","y1","x2","y2","key"],x2e=["offset"];function Po(t){"@babel/helpers - typeof";return Po=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Po(t)}function D2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?D2(Object(n),!0).forEach(function(r){b2e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function b2e(t,e,n){return e=w2e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function w2e(t){var e=_2e(t,"string");return Po(e)=="symbol"?e:e+""}function _2e(t,e){if(Po(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Po(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Qa(){return Qa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qa.apply(this,arguments)}function M2(t,e){if(t==null)return{};var n=S2e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function S2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}var A2e=function(e){var n=e.fill;if(!n||n==="none")return null;var r=e.fillOpacity,i=e.x,s=e.y,a=e.width,l=e.height,c=e.ry;return L.createElement("rect",{x:i,y:s,ry:c,width:a,height:l,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function T5(t,e){var n;if(L.isValidElement(t))n=L.cloneElement(t,e);else if(Ae(t))n=t(e);else{var r=e.x1,i=e.y1,s=e.x2,a=e.y2,l=e.key,c=M2(e,v2e),u=xe(c,!1);u.offset;var d=M2(u,x2e);n=L.createElement("line",Qa({},d,{x1:r,y1:i,x2:s,y2:a,fill:"none",key:l}))}return n}function N2e(t){var e=t.x,n=t.width,r=t.horizontal,i=r===void 0?!0:r,s=t.horizontalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(l,c){var u=Pn(Pn({},t),{},{x1:e,y1:l,x2:e+n,y2:l,key:"line-".concat(c),index:c});return T5(i,u)});return L.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function E2e(t){var e=t.y,n=t.height,r=t.vertical,i=r===void 0?!0:r,s=t.verticalPoints;if(!i||!s||!s.length)return null;var a=s.map(function(l,c){var u=Pn(Pn({},t),{},{x1:l,y1:e,x2:l,y2:e+n,key:"line-".concat(c),index:c});return T5(i,u)});return L.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function C2e(t){var e=t.horizontalFill,n=t.fillOpacity,r=t.x,i=t.y,s=t.width,a=t.height,l=t.horizontalPoints,c=t.horizontal,u=c===void 0?!0:c;if(!u||!e||!e.length)return null;var d=l.map(function(h){return Math.round(h+i-i)}).sort(function(h,m){return h-m});i!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var y=!d[m+1],g=y?i+a-h:d[m+1]-h;if(g<=0)return null;var x=m%e.length;return L.createElement("rect",{key:"react-".concat(m),y:h,x:r,height:g,width:s,stroke:"none",fill:e[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return L.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function j2e(t){var e=t.vertical,n=e===void 0?!0:e,r=t.verticalFill,i=t.fillOpacity,s=t.x,a=t.y,l=t.width,c=t.height,u=t.verticalPoints;if(!n||!r||!r.length)return null;var d=u.map(function(h){return Math.round(h+s-s)}).sort(function(h,m){return h-m});s!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var y=!d[m+1],g=y?s+l-h:d[m+1]-h;if(g<=0)return null;var x=m%r.length;return L.createElement("rect",{key:"react-".concat(m),x:h,y:a,width:g,height:c,stroke:"none",fill:r[x],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return L.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var T2e=function(e,n){var r=e.xAxis,i=e.width,s=e.height,a=e.offset;return N4(dN(Pn(Pn(Pn({},su.defaultProps),r),{},{ticks:Ki(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.left,a.left+a.width,n)},P2e=function(e,n){var r=e.yAxis,i=e.width,s=e.height,a=e.offset;return N4(dN(Pn(Pn(Pn({},su.defaultProps),r),{},{ticks:Ki(r,!0),viewBox:{x:0,y:0,width:i,height:s}})),a.top,a.top+a.height,n)},nl={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function P5(t){var e,n,r,i,s,a,l=oN(),c=lN(),u=yke(),d=Pn(Pn({},t),{},{stroke:(e=t.stroke)!==null&&e!==void 0?e:nl.stroke,fill:(n=t.fill)!==null&&n!==void 0?n:nl.fill,horizontal:(r=t.horizontal)!==null&&r!==void 0?r:nl.horizontal,horizontalFill:(i=t.horizontalFill)!==null&&i!==void 0?i:nl.horizontalFill,vertical:(s=t.vertical)!==null&&s!==void 0?s:nl.vertical,verticalFill:(a=t.verticalFill)!==null&&a!==void 0?a:nl.verticalFill,x:ne(t.x)?t.x:u.left,y:ne(t.y)?t.y:u.top,width:ne(t.width)?t.width:u.width,height:ne(t.height)?t.height:u.height}),f=d.x,h=d.y,m=d.width,y=d.height,g=d.syncWithTicks,x=d.horizontalValues,w=d.verticalValues,b=pke(),v=mke();if(!ne(m)||m<=0||!ne(y)||y<=0||!ne(f)||f!==+f||!ne(h)||h!==+h)return null;var N=d.verticalCoordinatesGenerator||T2e,S=d.horizontalCoordinatesGenerator||P2e,A=d.horizontalPoints,E=d.verticalPoints;if((!A||!A.length)&&Ae(S)){var _=x&&x.length,C=S({yAxis:v?Pn(Pn({},v),{},{ticks:_?x:v.ticks}):void 0,width:l,height:c,offset:u},_?!0:g);Qr(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Po(C),"]")),Array.isArray(C)&&(A=C)}if((!E||!E.length)&&Ae(N)){var P=w&&w.length,T=N({xAxis:b?Pn(Pn({},b),{},{ticks:P?w:b.ticks}):void 0,width:l,height:c,offset:u},P?!0:g);Qr(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Po(T),"]")),Array.isArray(T)&&(E=T)}return L.createElement("g",{className:"recharts-cartesian-grid"},L.createElement(A2e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),L.createElement(N2e,Qa({},d,{offset:u,horizontalPoints:A,xAxis:b,yAxis:v})),L.createElement(E2e,Qa({},d,{offset:u,verticalPoints:E,xAxis:b,yAxis:v})),L.createElement(C2e,Qa({},d,{horizontalPoints:A})),L.createElement(j2e,Qa({},d,{verticalPoints:E})))}P5.displayName="CartesianGrid";var k2e=["layout","type","stroke","connectNulls","isRange","ref"],I2e=["key"],k5;function Nc(t){"@babel/helpers - typeof";return Nc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nc(t)}function I5(t,e){if(t==null)return{};var n=O2e(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function O2e(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ja(){return Ja=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ja.apply(this,arguments)}function L2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ks(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?L2(Object(n),!0).forEach(function(r){ui(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):L2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function R2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,R5(r.key),r)}}function $2e(t,e,n){return e&&F2(t.prototype,e),n&&F2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function D2e(t,e,n){return e=ey(e),M2e(t,O5()?Reflect.construct(e,n||[],ey(t).constructor):e.apply(t,n))}function M2e(t,e){if(e&&(Nc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return L2e(t)}function L2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function O5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O5=function(){return!!t})()}function ey(t){return ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ey(t)}function F2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E1(t,e)}function E1(t,e){return E1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},E1(t,e)}function ui(t,e,n){return e=R5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R5(t){var e=V2e(t,"string");return Nc(e)=="symbol"?e:e+""}function V2e(t,e){if(Nc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Nc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ei=function(t){function e(){var n;R2e(this,e);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=D2e(this,e,[].concat(i)),ui(n,"state",{isAnimationFinished:!0}),ui(n,"id",Jc("recharts-area-")),ui(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Ae(a)&&a()}),ui(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Ae(a)&&a()}),n}return F2e(e,t),$2e(e,[{key:"renderDots",value:function(r,i,s){var a=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(a&&!l)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,h=xe(this.props,!1),m=xe(u,!0),y=d.map(function(x,w){var b=ks(ks(ks({key:"dot-".concat(w),r:3},h),m),{},{index:w,cx:x.x,cy:x.y,dataKey:f,value:x.value,payload:x.payload,points:d});return e.renderDotItem(u,b)}),g={clipPath:r?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return L.createElement(Ge,Ja({className:"recharts-area-dots"},g),y)}},{key:"renderHorizontalRect",value:function(r){var i=this.props,s=i.baseLine,a=i.points,l=i.strokeWidth,c=a[0].x,u=a[a.length-1].x,d=r*Math.abs(c-u),f=Hs(a.map(function(h){return h.y||0}));return ne(s)&&typeof s=="number"?f=Math.max(s,f):s&&Array.isArray(s)&&s.length&&(f=Math.max(Hs(s.map(function(h){return h.y||0})),f)),ne(f)?L.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var i=this.props,s=i.baseLine,a=i.points,l=i.strokeWidth,c=a[0].y,u=a[a.length-1].y,d=r*Math.abs(c-u),f=Hs(a.map(function(h){return h.x||0}));return ne(s)&&typeof s=="number"?f=Math.max(s,f):s&&Array.isArray(s)&&s.length&&(f=Math.max(Hs(s.map(function(h){return h.x||0})),f)),ne(f)?L.createElement("rect",{x:0,y:c<u?c:c-d,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,i,s,a){var l=this.props,c=l.layout,u=l.type,d=l.stroke,f=l.connectNulls,h=l.isRange;l.ref;var m=I5(l,k2e);return L.createElement(Ge,{clipPath:s?"url(#clipPath-".concat(a,")"):null},L.createElement(Fl,Ja({},xe(m,!0),{points:r,connectNulls:f,type:u,baseLine:i,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&L.createElement(Fl,Ja({},xe(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:r})),d!=="none"&&h&&L.createElement(Fl,Ja({},xe(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(r,i){var s=this,a=this.props,l=a.points,c=a.baseLine,u=a.isAnimationActive,d=a.animationBegin,f=a.animationDuration,h=a.animationEasing,m=a.animationId,y=this.state,g=y.prevPoints,x=y.prevBaseLine;return L.createElement(Ni,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var b=w.t;if(g){var v=g.length/l.length,N=l.map(function(_,C){var P=Math.floor(C*v);if(g[P]){var T=g[P],O=Wn(T.x,_.x),R=Wn(T.y,_.y);return ks(ks({},_),{},{x:O(b),y:R(b)})}return _}),S;if(ne(c)&&typeof c=="number"){var A=Wn(x,c);S=A(b)}else if(ke(c)||Qc(c)){var E=Wn(x,0);S=E(b)}else S=c.map(function(_,C){var P=Math.floor(C*v);if(x[P]){var T=x[P],O=Wn(T.x,_.x),R=Wn(T.y,_.y);return ks(ks({},_),{},{x:O(b),y:R(b)})}return _});return s.renderAreaStatically(N,S,r,i)}return L.createElement(Ge,null,L.createElement("defs",null,L.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(b))),L.createElement(Ge,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(l,c,r,i)))})}},{key:"renderArea",value:function(r,i){var s=this.props,a=s.points,l=s.baseLine,c=s.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,h=u.totalLength;return c&&a&&a.length&&(!d&&h>0||!fc(d,a)||!fc(f,l))?this.renderAreaWithAnimation(r,i):this.renderAreaStatically(a,l,r,i)}},{key:"render",value:function(){var r,i=this.props,s=i.hide,a=i.dot,l=i.points,c=i.className,u=i.top,d=i.left,f=i.xAxis,h=i.yAxis,m=i.width,y=i.height,g=i.isAnimationActive,x=i.id;if(s||!l||!l.length)return null;var w=this.state.isAnimationFinished,b=l.length===1,v=Ie("recharts-area",c),N=f&&f.allowDataOverflow,S=h&&h.allowDataOverflow,A=N||S,E=ke(x)?this.id:x,_=(r=xe(a,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},C=_.r,P=C===void 0?3:C,T=_.strokeWidth,O=T===void 0?2:T,R=cde(a)?a:{},M=R.clipDot,D=M===void 0?!0:M,B=P*2+O;return L.createElement(Ge,{className:v},N||S?L.createElement("defs",null,L.createElement("clipPath",{id:"clipPath-".concat(E)},L.createElement("rect",{x:N?d:d-m/2,y:S?u:u-y/2,width:N?m:m*2,height:S?y:y*2})),!D&&L.createElement("clipPath",{id:"clipPath-dots-".concat(E)},L.createElement("rect",{x:d-B/2,y:u-B/2,width:m+B,height:y+B}))):null,b?null:this.renderArea(A,E),(a||b)&&this.renderDots(A,D,E),(!g||w)&&es.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:r.points!==i.curPoints||r.baseLine!==i.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(k.PureComponent);k5=Ei;ui(Ei,"displayName","Area");ui(Ei,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Lo.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});ui(Ei,"getBaseValue",function(t,e,n,r){var i=t.layout,s=t.baseValue,a=e.props.baseValue,l=a??s;if(ne(l)&&typeof l=="number")return l;var c=i==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return l==="dataMin"?f:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});ui(Ei,"getComposedData",function(t){var e=t.props,n=t.item,r=t.xAxis,i=t.yAxis,s=t.xAxisTicks,a=t.yAxisTicks,l=t.bandSize,c=t.dataKey,u=t.stackedData,d=t.dataStartIndex,f=t.displayedData,h=t.offset,m=e.layout,y=u&&u.length,g=k5.getBaseValue(e,n,r,i),x=m==="horizontal",w=!1,b=f.map(function(N,S){var A;y?A=u[d+S]:(A=Xt(N,c),Array.isArray(A)?w=!0:A=[g,A]);var E=A[1]==null||y&&Xt(N,c)==null;return x?{x:hk({axis:r,ticks:s,bandSize:l,entry:N,index:S}),y:E?null:i.scale(A[1]),value:A,payload:N}:{x:E?null:r.scale(A[1]),y:hk({axis:i,ticks:a,bandSize:l,entry:N,index:S}),value:A,payload:N}}),v;return y||w?v=b.map(function(N){var S=Array.isArray(N.value)?N.value[0]:null;return x?{x:N.x,y:S!=null&&N.y!=null?i.scale(S):null}:{x:S!=null?r.scale(S):null,y:N.y}}):v=x?i.scale(g):r.scale(g),ks({points:b,baseLine:v,layout:m,isRange:w},h)});ui(Ei,"renderDotItem",function(t,e){var n;if(L.isValidElement(t))n=L.cloneElement(t,e);else if(Ae(t))n=t(e);else{var r=Ie("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=I5(e,I2e);n=L.createElement(Tv,Ja({},s,{key:i,className:r}))}return n});function Ec(t){"@babel/helpers - typeof";return Ec=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ec(t)}function B2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U2e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M5(r.key),r)}}function z2e(t,e,n){return e&&U2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function q2e(t,e,n){return e=ty(e),W2e(t,$5()?Reflect.construct(e,n||[],ty(t).constructor):e.apply(t,n))}function W2e(t,e){if(e&&(Ec(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G2e(t)}function G2e(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($5=function(){return!!t})()}function ty(t){return ty=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ty(t)}function H2e(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C1(t,e)}function C1(t,e){return C1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},C1(t,e)}function D5(t,e,n){return e=M5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M5(t){var e=K2e(t,"string");return Ec(e)=="symbol"?e:e+""}function K2e(t,e){if(Ec(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ec(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function j1(){return j1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j1.apply(this,arguments)}function Y2e(t){var e=t.xAxisId,n=oN(),r=lN(),i=v5(e);return i==null?null:k.createElement(su,j1({},i,{className:Ie("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(a){return Ki(a,!0)}}))}var ko=function(t){function e(){return B2e(this,e),q2e(this,e,arguments)}return H2e(e,t),z2e(e,[{key:"render",value:function(){return k.createElement(Y2e,this.props)}}])}(k.Component);D5(ko,"displayName","XAxis");D5(ko,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Cc(t){"@babel/helpers - typeof";return Cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cc(t)}function X2e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q2e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,V5(r.key),r)}}function J2e(t,e,n){return e&&Q2e(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Z2e(t,e,n){return e=ny(e),eIe(t,L5()?Reflect.construct(e,n||[],ny(t).constructor):e.apply(t,n))}function eIe(t,e){if(e&&(Cc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tIe(t)}function tIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L5=function(){return!!t})()}function ny(t){return ny=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ny(t)}function nIe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T1(t,e)}function T1(t,e){return T1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},T1(t,e)}function F5(t,e,n){return e=V5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function V5(t){var e=rIe(t,"string");return Cc(e)=="symbol"?e:e+""}function rIe(t,e){if(Cc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Cc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function P1(){return P1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P1.apply(this,arguments)}var iIe=function(e){var n=e.yAxisId,r=oN(),i=lN(),s=x5(n);return s==null?null:k.createElement(su,P1({},s,{className:Ie("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:i},ticksGenerator:function(l){return Ki(l,!0)}}))},jc=function(t){function e(){return X2e(this,e),Z2e(this,e,arguments)}return nIe(e,t),J2e(e,[{key:"render",value:function(){return k.createElement(iIe,this.props)}}])}(k.Component);F5(jc,"displayName","YAxis");F5(jc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function V2(t){return lIe(t)||oIe(t)||aIe(t)||sIe()}function sIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aIe(t,e){if(t){if(typeof t=="string")return k1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k1(t,e)}}function oIe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function lIe(t){if(Array.isArray(t))return k1(t)}function k1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var I1=function(e,n,r,i,s){var a=Pr(e,uN),l=Pr(e,Lv),c=[].concat(V2(a),V2(l)),u=Pr(e,Vv),d="".concat(i,"Id"),f=i[0],h=n;if(c.length&&(h=c.reduce(function(g,x){if(x.props[d]===r&&bi(x.props,"extendDomain")&&ne(x.props[f])){var w=x.props[f];return[Math.min(g[0],w),Math.max(g[1],w)]}return g},h)),u.length){var m="".concat(f,"1"),y="".concat(f,"2");h=u.reduce(function(g,x){if(x.props[d]===r&&bi(x.props,"extendDomain")&&ne(x.props[m])&&ne(x.props[y])){var w=x.props[m],b=x.props[y];return[Math.min(g[0],w,b),Math.max(g[1],w,b)]}return g},h)}return s&&s.length&&(h=s.reduce(function(g,x){return ne(x)?[Math.min(g[0],x),Math.max(g[1],x)]:g},h)),h},B5={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new i(d,f||c,h),y=n?n+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],m]:c._events[y].push(m):(c._events[y]=m,c._eventsCount++),c}function a(c,u){--c._eventsCount===0?c._events=new r:delete c._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)e.call(d,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=n?n+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,y=new Array(m);h<m;h++)y[h]=f[h].fn;return y},l.prototype.listenerCount=function(u){var d=n?n+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,y){var g=n?n+u:u;if(!this._events[g])return!1;var x=this._events[g],w=arguments.length,b,v;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),w){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,h),!0;case 5:return x.fn.call(x.context,d,f,h,m),!0;case 6:return x.fn.call(x.context,d,f,h,m,y),!0}for(v=1,b=new Array(w-1);v<w;v++)b[v-1]=arguments[v];x.fn.apply(x.context,b)}else{var N=x.length,S;for(v=0;v<N;v++)switch(x[v].once&&this.removeListener(u,x[v].fn,void 0,!0),w){case 1:x[v].fn.call(x[v].context);break;case 2:x[v].fn.call(x[v].context,d);break;case 3:x[v].fn.call(x[v].context,d,f);break;case 4:x[v].fn.call(x[v].context,d,f,h);break;default:if(!b)for(S=1,b=new Array(w-1);S<w;S++)b[S-1]=arguments[S];x[v].fn.apply(x[v].context,b)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=n?n+u:u;if(!this._events[m])return this;if(!d)return a(this,m),this;var y=this._events[m];if(y.fn)y.fn===d&&(!h||y.once)&&(!f||y.context===f)&&a(this,m);else{for(var g=0,x=[],w=y.length;g<w;g++)(y[g].fn!==d||h&&!y[g].once||f&&y[g].context!==f)&&x.push(y[g]);x.length?this._events[m]=x.length===1?x[0]:x:a(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&a(this,d)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(B5);var cIe=B5.exports;const uIe=rt(cIe);var xx=new uIe,bx="recharts.syncMouseEvents";function Bf(t){"@babel/helpers - typeof";return Bf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bf(t)}function dIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fIe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,U5(r.key),r)}}function hIe(t,e,n){return e&&fIe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function wx(t,e,n){return e=U5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U5(t){var e=pIe(t,"string");return Bf(e)=="symbol"?e:e+""}function pIe(t,e){if(Bf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Bf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var mIe=function(){function t(){dIe(this,t),wx(this,"activeIndex",0),wx(this,"coordinateList",[]),wx(this,"layout","horizontal")}return hIe(t,[{key:"setDetails",value:function(n){var r,i=n.coordinateList,s=i===void 0?null:i,a=n.container,l=a===void 0?null:a,c=n.layout,u=c===void 0?null:c,d=n.offset,f=d===void 0?null:d,h=n.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(r=s??this.coordinateList)!==null&&r!==void 0?r:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,a=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((n=window)===null||n===void 0?void 0:n.scrollX)||0,d=((r=window)===null||r===void 0?void 0:r.scrollY)||0,f=s+c+u,h=a+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function gIe(t,e,n){if(n==="number"&&e===!0&&Array.isArray(t)){var r=t==null?void 0:t[0],i=t==null?void 0:t[1];if(r&&i&&ne(r)&&ne(i))return!0}return!1}function yIe(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function z5(t){var e=t.cx,n=t.cy,r=t.radius,i=t.startAngle,s=t.endAngle,a=pt(e,n,r,i),l=pt(e,n,r,s);return{points:[a,l],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}function vIe(t,e,n){var r,i,s,a;if(t==="horizontal")r=e.x,s=r,i=n.top,a=n.top+n.height;else if(t==="vertical")i=e.y,a=i,r=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var l=e.cx,c=e.cy,u=e.innerRadius,d=e.outerRadius,f=e.angle,h=pt(l,c,u,f),m=pt(l,c,d,f);r=h.x,i=h.y,s=m.x,a=m.y}else return z5(e);return[{x:r,y:i},{x:s,y:a}]}function Uf(t){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uf(t)}function B2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Np(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?B2(Object(n),!0).forEach(function(r){xIe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xIe(t,e,n){return e=bIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bIe(t){var e=wIe(t,"string");return Uf(e)=="symbol"?e:e+""}function wIe(t,e){if(Uf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _Ie(t){var e,n,r=t.element,i=t.tooltipEventType,s=t.isActive,a=t.activeCoordinate,l=t.activePayload,c=t.offset,u=t.activeTooltipIndex,d=t.tooltipAxisBandSize,f=t.layout,h=t.chartName,m=(e=r.props.cursor)!==null&&e!==void 0?e:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!m||!s||!a||h!=="ScatterChart"&&i!=="axis")return null;var y,g=Fl;if(h==="ScatterChart")y=a,g=qCe;else if(h==="BarChart")y=yIe(f,a,c,d),g=rN;else if(f==="radial"){var x=z5(a),w=x.cx,b=x.cy,v=x.radius,N=x.startAngle,S=x.endAngle;y={cx:w,cy:b,startAngle:N,endAngle:S,innerRadius:v,outerRadius:v},g=D4}else y={points:vIe(f,a,c)},g=Fl;var A=Np(Np(Np(Np({stroke:"#ccc",pointerEvents:"none"},c),y),xe(m,!1)),{},{payload:l,payloadIndex:u,className:Ie("recharts-tooltip-cursor",m.className)});return k.isValidElement(m)?k.cloneElement(m,A):k.createElement(g,A)}var SIe=["item"],AIe=["children","className","width","height","style","compact","title","desc"];function Tc(t){"@babel/helpers - typeof";return Tc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tc(t)}function Sl(){return Sl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sl.apply(this,arguments)}function U2(t,e){return CIe(t)||EIe(t,e)||W5(t,e)||NIe()}function NIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EIe(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,a,l=[],c=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(c=(r=s.call(n)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function CIe(t){if(Array.isArray(t))return t}function z2(t,e){if(t==null)return{};var n=jIe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jIe(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function TIe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function PIe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,G5(r.key),r)}}function kIe(t,e,n){return e&&PIe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function IIe(t,e,n){return e=ry(e),OIe(t,q5()?Reflect.construct(e,n||[],ry(t).constructor):e.apply(t,n))}function OIe(t,e){if(e&&(Tc(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return RIe(t)}function RIe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q5(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q5=function(){return!!t})()}function ry(t){return ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ry(t)}function $Ie(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O1(t,e)}function O1(t,e){return O1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},O1(t,e)}function Pc(t){return LIe(t)||MIe(t)||W5(t)||DIe()}function DIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W5(t,e){if(t){if(typeof t=="string")return R1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R1(t,e)}}function MIe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function LIe(t){if(Array.isArray(t))return R1(t)}function R1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function q2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q2(Object(n),!0).forEach(function(r){we(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function we(t,e,n){return e=G5(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function G5(t){var e=FIe(t,"string");return Tc(e)=="symbol"?e:e+""}function FIe(t,e){if(Tc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Tc(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var VIe={xAxis:["bottom","top"],yAxis:["left","right"]},BIe={width:"100%",height:"100%"},H5={x:0,y:0};function Ep(t){return t}var UIe=function(e,n){return n==="horizontal"?e.x:n==="vertical"?e.y:n==="centric"?e.angle:e.radius},zIe=function(e,n,r,i){var s=n.find(function(d){return d&&d.index===r});if(s){if(e==="horizontal")return{x:s.coordinate,y:i.y};if(e==="vertical")return{x:i.x,y:s.coordinate};if(e==="centric"){var a=s.coordinate,l=i.radius;return Y(Y(Y({},i),pt(i.cx,i.cy,l,a)),{},{angle:a,radius:l})}var c=s.coordinate,u=i.angle;return Y(Y(Y({},i),pt(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return H5},Bv=function(e,n){var r=n.graphicalItems,i=n.dataStartIndex,s=n.dataEndIndex,a=(r??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Pc(l),Pc(u)):l},[]);return a.length>0?a:e&&e.length&&ne(i)&&ne(s)?e.slice(i,s+1):[]};function K5(t){return t==="number"?[0,"auto"]:void 0}var $1=function(e,n,r,i){var s=e.graphicalItems,a=e.tooltipAxis,l=Bv(n,e);return r<0||!s||!s.length||r>=l.length?null:s.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:n;f&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(f=f.slice(e.dataStartIndex,e.dataEndIndex+1));var h;if(a.dataKey&&!a.allowDuplicatedCategory){var m=f===void 0?l:f;h=tg(m,a.dataKey,i)}else h=f&&f[r]||l[r];return h?[].concat(Pc(c),[P4(u,h)]):c},[])},W2=function(e,n,r,i){var s=i||{x:e.chartX,y:e.chartY},a=UIe(s,r),l=e.orderedTooltipTicks,c=e.tooltipAxis,u=e.tooltipTicks,d=uAe(a,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=$1(e,n,d,f),m=zIe(r,l,d,s);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:m}}return null},qIe=function(e,n){var r=n.axes,i=n.graphicalItems,s=n.axisType,a=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,h=e.stackOffset,m=A4(d,s);return r.reduce(function(y,g){var x,w=g.type.defaultProps!==void 0?Y(Y({},g.type.defaultProps),g.props):g.props,b=w.type,v=w.dataKey,N=w.allowDataOverflow,S=w.allowDuplicatedCategory,A=w.scale,E=w.ticks,_=w.includeHidden,C=w[a];if(y[C])return y;var P=Bv(e.data,{graphicalItems:i.filter(function(X){var ie,q=a in X.props?X.props[a]:(ie=X.type.defaultProps)===null||ie===void 0?void 0:ie[a];return q===C}),dataStartIndex:c,dataEndIndex:u}),T=P.length,O,R,M;gIe(w.domain,N,b)&&(O=Xw(w.domain,null,N),m&&(b==="number"||A!=="auto")&&(M=xd(P,v,"category")));var D=K5(b);if(!O||O.length===0){var B,U=(B=w.domain)!==null&&B!==void 0?B:D;if(v){if(O=xd(P,v,b),b==="category"&&m){var V=Zue(O);S&&V?(R=O,O=qg(0,T)):S||(O=yk(U,O,g).reduce(function(X,ie){return X.indexOf(ie)>=0?X:[].concat(Pc(X),[ie])},[]))}else if(b==="category")S?O=O.filter(function(X){return X!==""&&!ke(X)}):O=yk(U,O,g).reduce(function(X,ie){return X.indexOf(ie)>=0||ie===""||ke(ie)?X:[].concat(Pc(X),[ie])},[]);else if(b==="number"){var W=mAe(P,i.filter(function(X){var ie,q,ae=a in X.props?X.props[a]:(ie=X.type.defaultProps)===null||ie===void 0?void 0:ie[a],ge="hide"in X.props?X.props.hide:(q=X.type.defaultProps)===null||q===void 0?void 0:q.hide;return ae===C&&(_||!ge)}),v,s,d);W&&(O=W)}m&&(b==="number"||A!=="auto")&&(M=xd(P,v,"category"))}else m?O=qg(0,T):l&&l[C]&&l[C].hasStack&&b==="number"?O=h==="expand"?[0,1]:T4(l[C].stackGroups,c,u):O=S4(P,i.filter(function(X){var ie=a in X.props?X.props[a]:X.type.defaultProps[a],q="hide"in X.props?X.props.hide:X.type.defaultProps.hide;return ie===C&&(_||!q)}),b,d,!0);if(b==="number")O=I1(f,O,C,s,E),U&&(O=Xw(U,O,N));else if(b==="category"&&U){var H=U,te=O.every(function(X){return H.indexOf(X)>=0});te&&(O=H)}}return Y(Y({},y),{},we({},C,Y(Y({},w),{},{axisType:s,domain:O,categoricalDomain:M,duplicateDomain:R,originalDomain:(x=w.domain)!==null&&x!==void 0?x:D,isCategorical:m,layout:d})))},{})},WIe=function(e,n){var r=n.graphicalItems,i=n.Axis,s=n.axisType,a=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.layout,f=e.children,h=Bv(e.data,{graphicalItems:r,dataStartIndex:c,dataEndIndex:u}),m=h.length,y=A4(d,s),g=-1;return r.reduce(function(x,w){var b=w.type.defaultProps!==void 0?Y(Y({},w.type.defaultProps),w.props):w.props,v=b[a],N=K5("number");if(!x[v]){g++;var S;return y?S=qg(0,m):l&&l[v]&&l[v].hasStack?(S=T4(l[v].stackGroups,c,u),S=I1(f,S,v,s)):(S=Xw(N,S4(h,r.filter(function(A){var E,_,C=a in A.props?A.props[a]:(E=A.type.defaultProps)===null||E===void 0?void 0:E[a],P="hide"in A.props?A.props.hide:(_=A.type.defaultProps)===null||_===void 0?void 0:_.hide;return C===v&&!P}),"number",d),i.defaultProps.allowDataOverflow),S=I1(f,S,v,s)),Y(Y({},x),{},we({},v,Y(Y({axisType:s},i.defaultProps),{},{hide:!0,orientation:fr(VIe,"".concat(s,".").concat(g%2),null),domain:S,originalDomain:N,isCategorical:y,layout:d})))}return x},{})},GIe=function(e,n){var r=n.axisType,i=r===void 0?"xAxis":r,s=n.AxisComp,a=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,u=n.dataEndIndex,d=e.children,f="".concat(i,"Id"),h=Pr(d,s),m={};return h&&h.length?m=qIe(e,{axes:h,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):a&&a.length&&(m=WIe(e,{Axis:s,graphicalItems:a,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},HIe=function(e){var n=Us(e),r=Ki(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:PA(r,function(i){return i.coordinate}),tooltipAxis:n,tooltipAxisBandSize:kg(n,r)}},G2=function(e){var n=e.children,r=e.defaultShowTooltip,i=rr(n,xc),s=0,a=0;return e.data&&e.data.length!==0&&(a=e.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(a=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:a,activeTooltipIndex:-1,isTooltipActive:!!r}},KIe=function(e){return!e||!e.length?!1:e.some(function(n){var r=Ji(n&&n.type);return r&&r.indexOf("Bar")>=0})},H2=function(e){return e==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:e==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:e==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},YIe=function(e,n){var r=e.props,i=e.graphicalItems,s=e.xAxisMap,a=s===void 0?{}:s,l=e.yAxisMap,c=l===void 0?{}:l,u=r.width,d=r.height,f=r.children,h=r.margin||{},m=rr(f,xc),y=rr(f,ao),g=Object.keys(c).reduce(function(S,A){var E=c[A],_=E.orientation;return!E.mirror&&!E.hide?Y(Y({},S),{},we({},_,S[_]+E.width)):S},{left:h.left||0,right:h.right||0}),x=Object.keys(a).reduce(function(S,A){var E=a[A],_=E.orientation;return!E.mirror&&!E.hide?Y(Y({},S),{},we({},_,fr(S,"".concat(_))+E.height)):S},{top:h.top||0,bottom:h.bottom||0}),w=Y(Y({},x),g),b=w.bottom;m&&(w.bottom+=m.props.height||xc.defaultProps.height),y&&n&&(w=hAe(w,i,r,n));var v=u-w.left-w.right,N=d-w.top-w.bottom;return Y(Y({brushBottom:b},w),{},{width:Math.max(v,0),height:Math.max(N,0)})},XIe=function(e,n){if(n==="xAxis")return e[n].width;if(n==="yAxis")return e[n].height},hN=function(e){var n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,s=i===void 0?"axis":i,a=e.validateTooltipEventTypes,l=a===void 0?["axis"]:a,c=e.axisComponents,u=e.legendContent,d=e.formatAxisMap,f=e.defaultProps,h=function(w,b){var v=b.graphicalItems,N=b.stackGroups,S=b.offset,A=b.updateId,E=b.dataStartIndex,_=b.dataEndIndex,C=w.barSize,P=w.layout,T=w.barGap,O=w.barCategoryGap,R=w.maxBarSize,M=H2(P),D=M.numericAxisName,B=M.cateAxisName,U=KIe(v),V=[];return v.forEach(function(W,H){var te=Bv(w.data,{graphicalItems:[W],dataStartIndex:E,dataEndIndex:_}),X=W.type.defaultProps!==void 0?Y(Y({},W.type.defaultProps),W.props):W.props,ie=X.dataKey,q=X.maxBarSize,ae=X["".concat(D,"Id")],ge=X["".concat(B,"Id")],Fe={},et=c.reduce(function(de,He){var en=b["".concat(He.axisType,"Map")],zn=X["".concat(He.axisType,"Id")];en&&en[zn]||He.axisType==="zAxis"||To();var ri=en[zn];return Y(Y({},de),{},we(we({},He.axisType,ri),"".concat(He.axisType,"Ticks"),Ki(ri)))},Fe),se=et[B],ye=et["".concat(B,"Ticks")],ve=N&&N[ae]&&N[ae].hasStack&&AAe(W,N[ae].stackGroups),J=Ji(W.type).indexOf("Bar")>=0,ze=kg(se,ye),Pe=[],Je=U&&dAe({barSize:C,stackGroups:N,totalSize:XIe(et,B)});if(J){var st,Tt,F=ke(q)?R:q,K=(st=(Tt=kg(se,ye,!0))!==null&&Tt!==void 0?Tt:F)!==null&&st!==void 0?st:0;Pe=fAe({barGap:T,barCategoryGap:O,bandSize:K!==ze?K:ze,sizeList:Je[ge],maxBarSize:F}),K!==ze&&(Pe=Pe.map(function(de){return Y(Y({},de),{},{position:Y(Y({},de.position),{},{offset:de.position.offset-K/2})})}))}var ce=W&&W.type&&W.type.getComposedData;ce&&V.push({props:Y(Y({},ce(Y(Y({},et),{},{displayedData:te,props:w,dataKey:ie,item:W,bandSize:ze,barPosition:Pe,offset:S,stackedData:ve,layout:P,dataStartIndex:E,dataEndIndex:_}))),{},we(we(we({key:W.key||"item-".concat(H)},D,et[D]),B,et[B]),"animationId",A)),childIndex:fde(W,w.children),item:W})}),V},m=function(w,b){var v=w.props,N=w.dataStartIndex,S=w.dataEndIndex,A=w.updateId;if(!uT({props:v}))return null;var E=v.children,_=v.layout,C=v.stackOffset,P=v.data,T=v.reverseStackOrder,O=H2(_),R=O.numericAxisName,M=O.cateAxisName,D=Pr(E,r),B=_Ae(P,D,"".concat(R,"Id"),"".concat(M,"Id"),C,T),U=c.reduce(function(X,ie){var q="".concat(ie.axisType,"Map");return Y(Y({},X),{},we({},q,GIe(v,Y(Y({},ie),{},{graphicalItems:D,stackGroups:ie.axisType===R&&B,dataStartIndex:N,dataEndIndex:S}))))},{}),V=YIe(Y(Y({},U),{},{props:v,graphicalItems:D}),b==null?void 0:b.legendBBox);Object.keys(U).forEach(function(X){U[X]=d(v,U[X],V,X.replace("Map",""),n)});var W=U["".concat(M,"Map")],H=HIe(W),te=h(v,Y(Y({},U),{},{dataStartIndex:N,dataEndIndex:S,updateId:A,graphicalItems:D,stackGroups:B,offset:V}));return Y(Y({formattedGraphicalItems:te,graphicalItems:D,offset:V,stackGroups:B},H),U)},y=function(x){function w(b){var v,N,S;return TIe(this,w),S=IIe(this,w,[b]),we(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),we(S,"accessibilityManager",new mIe),we(S,"handleLegendBBoxUpdate",function(A){if(A){var E=S.state,_=E.dataStartIndex,C=E.dataEndIndex,P=E.updateId;S.setState(Y({legendBBox:A},m({props:S.props,dataStartIndex:_,dataEndIndex:C,updateId:P},Y(Y({},S.state),{},{legendBBox:A}))))}}),we(S,"handleReceiveSyncEvent",function(A,E,_){if(S.props.syncId===A){if(_===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(E)}}),we(S,"handleBrushChange",function(A){var E=A.startIndex,_=A.endIndex;if(E!==S.state.dataStartIndex||_!==S.state.dataEndIndex){var C=S.state.updateId;S.setState(function(){return Y({dataStartIndex:E,dataEndIndex:_},m({props:S.props,dataStartIndex:E,dataEndIndex:_,updateId:C},S.state))}),S.triggerSyncEvent({dataStartIndex:E,dataEndIndex:_})}}),we(S,"handleMouseEnter",function(A){var E=S.getMouseInfo(A);if(E){var _=Y(Y({},E),{},{isTooltipActive:!0});S.setState(_),S.triggerSyncEvent(_);var C=S.props.onMouseEnter;Ae(C)&&C(_,A)}}),we(S,"triggeredAfterMouseMove",function(A){var E=S.getMouseInfo(A),_=E?Y(Y({},E),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(_),S.triggerSyncEvent(_);var C=S.props.onMouseMove;Ae(C)&&C(_,A)}),we(S,"handleItemMouseEnter",function(A){S.setState(function(){return{isTooltipActive:!0,activeItem:A,activePayload:A.tooltipPayload,activeCoordinate:A.tooltipPosition||{x:A.cx,y:A.cy}}})}),we(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),we(S,"handleMouseMove",function(A){A.persist(),S.throttleTriggeredAfterMouseMove(A)}),we(S,"handleMouseLeave",function(A){S.throttleTriggeredAfterMouseMove.cancel();var E={isTooltipActive:!1};S.setState(E),S.triggerSyncEvent(E);var _=S.props.onMouseLeave;Ae(_)&&_(E,A)}),we(S,"handleOuterEvent",function(A){var E=dde(A),_=fr(S.props,"".concat(E));if(E&&Ae(_)){var C,P;/.*touch.*/i.test(E)?P=S.getMouseInfo(A.changedTouches[0]):P=S.getMouseInfo(A),_((C=P)!==null&&C!==void 0?C:{},A)}}),we(S,"handleClick",function(A){var E=S.getMouseInfo(A);if(E){var _=Y(Y({},E),{},{isTooltipActive:!0});S.setState(_),S.triggerSyncEvent(_);var C=S.props.onClick;Ae(C)&&C(_,A)}}),we(S,"handleMouseDown",function(A){var E=S.props.onMouseDown;if(Ae(E)){var _=S.getMouseInfo(A);E(_,A)}}),we(S,"handleMouseUp",function(A){var E=S.props.onMouseUp;if(Ae(E)){var _=S.getMouseInfo(A);E(_,A)}}),we(S,"handleTouchMove",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(A.changedTouches[0])}),we(S,"handleTouchStart",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&S.handleMouseDown(A.changedTouches[0])}),we(S,"handleTouchEnd",function(A){A.changedTouches!=null&&A.changedTouches.length>0&&S.handleMouseUp(A.changedTouches[0])}),we(S,"handleDoubleClick",function(A){var E=S.props.onDoubleClick;if(Ae(E)){var _=S.getMouseInfo(A);E(_,A)}}),we(S,"handleContextMenu",function(A){var E=S.props.onContextMenu;if(Ae(E)){var _=S.getMouseInfo(A);E(_,A)}}),we(S,"triggerSyncEvent",function(A){S.props.syncId!==void 0&&xx.emit(bx,S.props.syncId,A,S.eventEmitterSymbol)}),we(S,"applySyncEvent",function(A){var E=S.props,_=E.layout,C=E.syncMethod,P=S.state.updateId,T=A.dataStartIndex,O=A.dataEndIndex;if(A.dataStartIndex!==void 0||A.dataEndIndex!==void 0)S.setState(Y({dataStartIndex:T,dataEndIndex:O},m({props:S.props,dataStartIndex:T,dataEndIndex:O,updateId:P},S.state)));else if(A.activeTooltipIndex!==void 0){var R=A.chartX,M=A.chartY,D=A.activeTooltipIndex,B=S.state,U=B.offset,V=B.tooltipTicks;if(!U)return;if(typeof C=="function")D=C(V,A);else if(C==="value"){D=-1;for(var W=0;W<V.length;W++)if(V[W].value===A.activeLabel){D=W;break}}var H=Y(Y({},U),{},{x:U.left,y:U.top}),te=Math.min(R,H.x+H.width),X=Math.min(M,H.y+H.height),ie=V[D]&&V[D].value,q=$1(S.state,S.props.data,D),ae=V[D]?{x:_==="horizontal"?V[D].coordinate:te,y:_==="horizontal"?X:V[D].coordinate}:H5;S.setState(Y(Y({},A),{},{activeLabel:ie,activeCoordinate:ae,activePayload:q,activeTooltipIndex:D}))}else S.setState(A)}),we(S,"renderCursor",function(A){var E,_=S.state,C=_.isTooltipActive,P=_.activeCoordinate,T=_.activePayload,O=_.offset,R=_.activeTooltipIndex,M=_.tooltipAxisBandSize,D=S.getTooltipEventType(),B=(E=A.props.active)!==null&&E!==void 0?E:C,U=S.props.layout,V=A.key||"_recharts-cursor";return L.createElement(_Ie,{key:V,activeCoordinate:P,activePayload:T,activeTooltipIndex:R,chartName:n,element:A,isActive:B,layout:U,offset:O,tooltipAxisBandSize:M,tooltipEventType:D})}),we(S,"renderPolarAxis",function(A,E,_){var C=fr(A,"type.axisType"),P=fr(S.state,"".concat(C,"Map")),T=A.type.defaultProps,O=T!==void 0?Y(Y({},T),A.props):A.props,R=P&&P[O["".concat(C,"Id")]];return k.cloneElement(A,Y(Y({},R),{},{className:Ie(C,R.className),key:A.key||"".concat(E,"-").concat(_),ticks:Ki(R,!0)}))}),we(S,"renderPolarGrid",function(A){var E=A.props,_=E.radialLines,C=E.polarAngles,P=E.polarRadius,T=S.state,O=T.radiusAxisMap,R=T.angleAxisMap,M=Us(O),D=Us(R),B=D.cx,U=D.cy,V=D.innerRadius,W=D.outerRadius;return k.cloneElement(A,{polarAngles:Array.isArray(C)?C:Ki(D,!0).map(function(H){return H.coordinate}),polarRadius:Array.isArray(P)?P:Ki(M,!0).map(function(H){return H.coordinate}),cx:B,cy:U,innerRadius:V,outerRadius:W,key:A.key||"polar-grid",radialLines:_})}),we(S,"renderLegend",function(){var A=S.state.formattedGraphicalItems,E=S.props,_=E.children,C=E.width,P=E.height,T=S.props.margin||{},O=C-(T.left||0)-(T.right||0),R=w4({children:_,formattedGraphicalItems:A,legendWidth:O,legendContent:u});if(!R)return null;var M=R.item,D=z2(R,SIe);return k.cloneElement(M,Y(Y({},D),{},{chartWidth:C,chartHeight:P,margin:T,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),we(S,"renderTooltip",function(){var A,E=S.props,_=E.children,C=E.accessibilityLayer,P=rr(_,ir);if(!P)return null;var T=S.state,O=T.isTooltipActive,R=T.activeCoordinate,M=T.activePayload,D=T.activeLabel,B=T.offset,U=(A=P.props.active)!==null&&A!==void 0?A:O;return k.cloneElement(P,{viewBox:Y(Y({},B),{},{x:B.left,y:B.top}),active:U,label:D,payload:U?M:[],coordinate:R,accessibilityLayer:C})}),we(S,"renderBrush",function(A){var E=S.props,_=E.margin,C=E.data,P=S.state,T=P.offset,O=P.dataStartIndex,R=P.dataEndIndex,M=P.updateId;return k.cloneElement(A,{key:A.key||"_recharts-brush",onChange:wp(S.handleBrushChange,A.props.onChange),data:C,x:ne(A.props.x)?A.props.x:T.left,y:ne(A.props.y)?A.props.y:T.top+T.height+T.brushBottom-(_.bottom||0),width:ne(A.props.width)?A.props.width:T.width,startIndex:O,endIndex:R,updateId:"brush-".concat(M)})}),we(S,"renderReferenceElement",function(A,E,_){if(!A)return null;var C=S,P=C.clipPathId,T=S.state,O=T.xAxisMap,R=T.yAxisMap,M=T.offset,D=A.type.defaultProps||{},B=A.props,U=B.xAxisId,V=U===void 0?D.xAxisId:U,W=B.yAxisId,H=W===void 0?D.yAxisId:W;return k.cloneElement(A,{key:A.key||"".concat(E,"-").concat(_),xAxis:O[V],yAxis:R[H],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:P})}),we(S,"renderActivePoints",function(A){var E=A.item,_=A.activePoint,C=A.basePoint,P=A.childIndex,T=A.isRange,O=[],R=E.props.key,M=E.item.type.defaultProps!==void 0?Y(Y({},E.item.type.defaultProps),E.item.props):E.item.props,D=M.activeDot,B=M.dataKey,U=Y(Y({index:P,dataKey:B,cx:_.x,cy:_.y,r:4,fill:nN(E.item),strokeWidth:2,stroke:"#fff",payload:_.payload,value:_.value},xe(D,!1)),ng(D));return O.push(w.renderActiveDot(D,U,"".concat(R,"-activePoint-").concat(P))),C?O.push(w.renderActiveDot(D,Y(Y({},U),{},{cx:C.x,cy:C.y}),"".concat(R,"-basePoint-").concat(P))):T&&O.push(null),O}),we(S,"renderGraphicChild",function(A,E,_){var C=S.filterFormatItem(A,E,_);if(!C)return null;var P=S.getTooltipEventType(),T=S.state,O=T.isTooltipActive,R=T.tooltipAxis,M=T.activeTooltipIndex,D=T.activeLabel,B=S.props.children,U=rr(B,ir),V=C.props,W=V.points,H=V.isRange,te=V.baseLine,X=C.item.type.defaultProps!==void 0?Y(Y({},C.item.type.defaultProps),C.item.props):C.item.props,ie=X.activeDot,q=X.hide,ae=X.activeBar,ge=X.activeShape,Fe=!!(!q&&O&&U&&(ie||ae||ge)),et={};P!=="axis"&&U&&U.props.trigger==="click"?et={onClick:wp(S.handleItemMouseEnter,A.props.onClick)}:P!=="axis"&&(et={onMouseLeave:wp(S.handleItemMouseLeave,A.props.onMouseLeave),onMouseEnter:wp(S.handleItemMouseEnter,A.props.onMouseEnter)});var se=k.cloneElement(A,Y(Y({},C.props),et));function ye(He){return typeof R.dataKey=="function"?R.dataKey(He.payload):null}if(Fe)if(M>=0){var ve,J;if(R.dataKey&&!R.allowDuplicatedCategory){var ze=typeof R.dataKey=="function"?ye:"payload.".concat(R.dataKey.toString());ve=tg(W,ze,D),J=H&&te&&tg(te,ze,D)}else ve=W==null?void 0:W[M],J=H&&te&&te[M];if(ge||ae){var Pe=A.props.activeIndex!==void 0?A.props.activeIndex:M;return[k.cloneElement(A,Y(Y(Y({},C.props),et),{},{activeIndex:Pe})),null,null]}if(!ke(ve))return[se].concat(Pc(S.renderActivePoints({item:C,activePoint:ve,basePoint:J,childIndex:M,isRange:H})))}else{var Je,st=(Je=S.getItemByXY(S.state.activeCoordinate))!==null&&Je!==void 0?Je:{graphicalItem:se},Tt=st.graphicalItem,F=Tt.item,K=F===void 0?A:F,ce=Tt.childIndex,de=Y(Y(Y({},C.props),et),{},{activeIndex:ce});return[k.cloneElement(K,de),null,null]}return H?[se,null,null]:[se,null]}),we(S,"renderCustomized",function(A,E,_){return k.cloneElement(A,Y(Y({key:"recharts-customized-".concat(_)},S.props),S.state))}),we(S,"renderMap",{CartesianGrid:{handler:Ep,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:Ep},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:Ep},YAxis:{handler:Ep},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((v=b.id)!==null&&v!==void 0?v:Jc("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=wL(S.triggeredAfterMouseMove,(N=b.throttleDelay)!==null&&N!==void 0?N:1e3/60),S.state={},S}return $Ie(w,x),kIe(w,[{key:"componentDidMount",value:function(){var v,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(v=this.props.margin.left)!==null&&v!==void 0?v:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var v=this.props,N=v.children,S=v.data,A=v.height,E=v.layout,_=rr(N,ir);if(_){var C=_.props.defaultIndex;if(!(typeof C!="number"||C<0||C>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[C]&&this.state.tooltipTicks[C].value,T=$1(this.state,S,C,P),O=this.state.tooltipTicks[C].coordinate,R=(this.state.offset.top+A)/2,M=E==="horizontal",D=M?{x:O,y:R}:{y:O,x:R},B=this.state.formattedGraphicalItems.find(function(V){var W=V.item;return W.type.name==="Scatter"});B&&(D=Y(Y({},D),B.props.points[C].tooltipPosition),T=B.props.points[C].tooltipPayload);var U={activeTooltipIndex:C,isTooltipActive:!0,activeLabel:P,activePayload:T,activeCoordinate:D};this.setState(U),this.renderCursor(_),this.accessibilityManager.setIndex(C)}}}},{key:"getSnapshotBeforeUpdate",value:function(v,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==v.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==v.margin){var S,A;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(A=this.props.margin.top)!==null&&A!==void 0?A:0}})}return null}},{key:"componentDidUpdate",value:function(v){dw([rr(v.children,ir)],[rr(this.props.children,ir)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var v=rr(this.props.children,ir);if(v&&typeof v.props.shared=="boolean"){var N=v.props.shared?"axis":"item";return l.indexOf(N)>=0?N:s}return s}},{key:"getMouseInfo",value:function(v){if(!this.container)return null;var N=this.container,S=N.getBoundingClientRect(),A=Lbe(S),E={chartX:Math.round(v.pageX-A.left),chartY:Math.round(v.pageY-A.top)},_=S.width/N.offsetWidth||1,C=this.inRange(E.chartX,E.chartY,_);if(!C)return null;var P=this.state,T=P.xAxisMap,O=P.yAxisMap,R=this.getTooltipEventType(),M=W2(this.state,this.props.data,this.props.layout,C);if(R!=="axis"&&T&&O){var D=Us(T).scale,B=Us(O).scale,U=D&&D.invert?D.invert(E.chartX):null,V=B&&B.invert?B.invert(E.chartY):null;return Y(Y({},E),{},{xValue:U,yValue:V},M)}return M?Y(Y({},E),M):null}},{key:"inRange",value:function(v,N){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,A=this.props.layout,E=v/S,_=N/S;if(A==="horizontal"||A==="vertical"){var C=this.state.offset,P=E>=C.left&&E<=C.left+C.width&&_>=C.top&&_<=C.top+C.height;return P?{x:E,y:_}:null}var T=this.state,O=T.angleAxisMap,R=T.radiusAxisMap;if(O&&R){var M=Us(O);return bk({x:E,y:_},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var v=this.props.children,N=this.getTooltipEventType(),S=rr(v,ir),A={};S&&N==="axis"&&(S.props.trigger==="click"?A={onClick:this.handleClick}:A={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var E=ng(this.props,this.handleOuterEvent);return Y(Y({},E),A)}},{key:"addListener",value:function(){xx.on(bx,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){xx.removeListener(bx,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(v,N,S){for(var A=this.state.formattedGraphicalItems,E=0,_=A.length;E<_;E++){var C=A[E];if(C.item===v||C.props.key===v.key||N===Ji(C.item.type)&&S===C.childIndex)return C}return null}},{key:"renderClipPath",value:function(){var v=this.clipPathId,N=this.state.offset,S=N.left,A=N.top,E=N.height,_=N.width;return L.createElement("defs",null,L.createElement("clipPath",{id:v},L.createElement("rect",{x:S,y:A,height:E,width:_})))}},{key:"getXScales",value:function(){var v=this.state.xAxisMap;return v?Object.entries(v).reduce(function(N,S){var A=U2(S,2),E=A[0],_=A[1];return Y(Y({},N),{},we({},E,_.scale))},{}):null}},{key:"getYScales",value:function(){var v=this.state.yAxisMap;return v?Object.entries(v).reduce(function(N,S){var A=U2(S,2),E=A[0],_=A[1];return Y(Y({},N),{},we({},E,_.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(v){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[v])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(v){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[v])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(v){var N=this.state,S=N.formattedGraphicalItems,A=N.activeItem;if(S&&S.length)for(var E=0,_=S.length;E<_;E++){var C=S[E],P=C.props,T=C.item,O=T.type.defaultProps!==void 0?Y(Y({},T.type.defaultProps),T.props):T.props,R=Ji(T.type);if(R==="Bar"){var M=(P.data||[]).find(function(V){return ACe(v,V)});if(M)return{graphicalItem:C,payload:M}}else if(R==="RadialBar"){var D=(P.data||[]).find(function(V){return bk(v,V)});if(D)return{graphicalItem:C,payload:D}}else if(Rv(C,A)||$v(C,A)||Df(C,A)){var B=fTe({graphicalItem:C,activeTooltipItem:A,itemData:O.data}),U=O.activeIndex===void 0?B:O.activeIndex;return{graphicalItem:Y(Y({},C),{},{childIndex:U}),payload:Df(C,A)?O.data[B]:C.props.data[B]}}}return null}},{key:"render",value:function(){var v=this;if(!uT(this))return null;var N=this.props,S=N.children,A=N.className,E=N.width,_=N.height,C=N.style,P=N.compact,T=N.title,O=N.desc,R=z2(N,AIe),M=xe(R,!1);if(P)return L.createElement(N2,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},L.createElement(hw,Sl({},M,{width:E,height:_,title:T,desc:O}),this.renderClipPath(),fT(S,this.renderMap)));if(this.props.accessibilityLayer){var D,B;M.tabIndex=(D=this.props.tabIndex)!==null&&D!==void 0?D:0,M.role=(B=this.props.role)!==null&&B!==void 0?B:"application",M.onKeyDown=function(V){v.accessibilityManager.keyboardEvent(V)},M.onFocus=function(){v.accessibilityManager.focus()}}var U=this.parseEventsOfWrapper();return L.createElement(N2,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},L.createElement("div",Sl({className:Ie("recharts-wrapper",A),style:Y({position:"relative",cursor:"default",width:E,height:_},C)},U,{ref:function(W){v.container=W}}),L.createElement(hw,Sl({},M,{width:E,height:_,title:T,desc:O,style:BIe}),this.renderClipPath(),fT(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(k.Component);we(y,"displayName",n),we(y,"defaultProps",Y({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),we(y,"getDerivedStateFromProps",function(x,w){var b=x.dataKey,v=x.data,N=x.children,S=x.width,A=x.height,E=x.layout,_=x.stackOffset,C=x.margin,P=w.dataStartIndex,T=w.dataEndIndex;if(w.updateId===void 0){var O=G2(x);return Y(Y(Y({},O),{},{updateId:0},m(Y(Y({props:x},O),{},{updateId:0}),w)),{},{prevDataKey:b,prevData:v,prevWidth:S,prevHeight:A,prevLayout:E,prevStackOffset:_,prevMargin:C,prevChildren:N})}if(b!==w.prevDataKey||v!==w.prevData||S!==w.prevWidth||A!==w.prevHeight||E!==w.prevLayout||_!==w.prevStackOffset||!Dl(C,w.prevMargin)){var R=G2(x),M={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},D=Y(Y({},W2(w,v,E)),{},{updateId:w.updateId+1}),B=Y(Y(Y({},R),M),D);return Y(Y(Y({},B),m(Y({props:x},B),w)),{},{prevDataKey:b,prevData:v,prevWidth:S,prevHeight:A,prevLayout:E,prevStackOffset:_,prevMargin:C,prevChildren:N})}if(!dw(N,w.prevChildren)){var U,V,W,H,te=rr(N,xc),X=te&&(U=(V=te.props)===null||V===void 0?void 0:V.startIndex)!==null&&U!==void 0?U:P,ie=te&&(W=(H=te.props)===null||H===void 0?void 0:H.endIndex)!==null&&W!==void 0?W:T,q=X!==P||ie!==T,ae=!ke(v),ge=ae&&!q?w.updateId:w.updateId+1;return Y(Y({updateId:ge},m(Y(Y({props:x},w),{},{updateId:ge,dataStartIndex:X,dataEndIndex:ie}),w)),{},{prevChildren:N,dataStartIndex:X,dataEndIndex:ie})}return null}),we(y,"renderActiveDot",function(x,w,b){var v;return k.isValidElement(x)?v=k.cloneElement(x,w):Ae(x)?v=x(w):v=L.createElement(Tv,w),L.createElement(Ge,{className:"recharts-active-dot",key:b},v)});var g=k.forwardRef(function(w,b){return L.createElement(y,Sl({},w,{ref:b}))});return g.displayName=y.displayName,g},QIe=hN({chartName:"BarChart",GraphicalChild:Uo,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:ko},{axisType:"yAxis",AxisComp:jc}],formatAxisMap:u5}),JIe=hN({chartName:"PieChart",GraphicalChild:Ss,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Ov},{axisType:"radiusAxis",AxisComp:kv}],formatAxisMap:RAe,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Y5=hN({chartName:"AreaChart",GraphicalChild:Ei,axisComponents:[{axisType:"xAxis",AxisComp:ko},{axisType:"yAxis",AxisComp:jc}],formatAxisMap:u5});function ZIe({data:t,onClose:e}){const[n,r]=k.useState(null),[i,s]=k.useState("1Y"),[a,l]=k.useState(!1),c=k.useMemo(()=>{const u=new Date;let d=new Date;i==="3M"?d.setMonth(u.getMonth()-3):i==="6M"?d.setMonth(u.getMonth()-6):i==="YTD"?d=new Date(u.getFullYear(),0,1):i==="1Y"?d.setFullYear(u.getFullYear()-1):d=new Date(0);const f=_=>{const C=_.inquiryDate||_.eventDate,P=new Date(C);return!isNaN(P)&&P>=d&&P<=u},h=t.filter(f),m=h.filter(_=>{const C=(_.stage||"").toLowerCase(),P=(_.status||"").toLowerCase();return C==="booked"||C==="won"||C==="completed"||P==="booked"||P==="won"||P==="completed"||C.includes("won")||P.includes("won")}),y=h.filter(_=>["proposal","negotiation","visit","meeting"].includes((_.stage||"").toLowerCase())),g=m.reduce((_,C)=>_+ft(C.finalAmount||C.amount),0),x=y.reduce((_,C)=>_+ft(C.amount),0),w=m.length>0?g/m.length:0,b={},v={};m.forEach(_=>{const C=new Date(_.inquiryDate||_.eventDate),P=C.getFullYear(),T=C.getMonth(),O=`${P}-${String(T+1).padStart(2,"0")}`,R=C.toLocaleString("default",{month:"short",year:"numeric"});b[O]||(b[O]={name:R,value:0,rawDate:O}),b[O].value+=ft(_.finalAmount||_.amount),v[R]||(v[R]=[]),v[R].push(_)});const N=Object.keys(b).sort().map(_=>b[_]),S={};m.forEach(_=>{const C=_.eventType&&_.eventType.trim()?_.eventType.trim().charAt(0).toUpperCase()+_.eventType.trim().slice(1):"Other";S[C]=(S[C]||0)+ft(_.finalAmount||_.amount)});const A=Object.entries(S).map(([_,C])=>({name:_,value:C})).sort((_,C)=>C.value-_.value),E=[...m].sort((_,C)=>ft(C.finalAmount||C.amount)-ft(_.finalAmount||_.amount)).slice(0,5);return{totalRevenue:g,potentialRevenue:x,avgDealSize:w,trendData:N,eventData:A,topDeals:E,eventsByMonth:v,total:h.length,wonCount:m.length}},[t,i]);return o.jsxs("div",{className:"fixed inset-0 bg-slate-900/70 backdrop-blur-sm z-[70] flex items-center justify-center p-4",children:[n&&o.jsx(yoe,{monthName:n,events:c.eventsByMonth[n]||[],onClose:()=>r(null)}),a&&o.jsx(boe,{stats:c,onClose:()=>l(!1)}),o.jsxs("div",{className:"bg-white w-full max-w-6xl h-[90vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-scale-in",children:[o.jsxs("div",{className:"bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-green-100 rounded-xl text-green-700",children:o.jsx(Ro,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Revenue Analytics"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Confirmed Bookings (Won / Booked / Completed)"})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-4 py-2 bg-purple-100 text-purple-700 rounded-lg font-bold text-xs hover:bg-purple-200 transition-colors",children:[o.jsx(sr,{className:"w-4 h-4"})," AI Analysis"]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:o.jsx(Dt,{className:"w-6 h-6 text-gray-500"})})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-8 bg-slate-50",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[o.jsx("p",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Gross Revenue"}),o.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:Oe(c.totalRevenue)})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[o.jsx("p",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-2",children:"Pipeline Potential"}),o.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:Oe(c.potentialRevenue)})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm h-72",children:[o.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Revenue Trend"}),o.jsx(mg,{width:"100%",height:"100%",children:o.jsxs(Y5,{data:c.trendData,children:[o.jsx(ko,{dataKey:"name"}),o.jsx(ir,{formatter:u=>Oe(u)}),o.jsx(Ei,{type:"monotone",dataKey:"value",stroke:"#10B981",fill:"#10B981",fillOpacity:.1})]})})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm h-72",children:[o.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"By Event Type"}),o.jsx(mg,{width:"100%",height:"100%",children:o.jsxs(QIe,{data:c.eventData,children:[o.jsx(ko,{dataKey:"name"}),o.jsx(ir,{formatter:u=>Oe(u)}),o.jsx(Uo,{dataKey:"value",fill:"#3B82F6"})]})})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[o.jsx("div",{className:"p-6 border-b",children:o.jsx("h3",{className:"font-bold text-gray-900",children:"Top Deals"})}),o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3",children:"Client"}),o.jsx("th",{className:"px-6 py-3 text-right",children:"Amount"})]})}),o.jsx("tbody",{className:"divide-y",children:c.topDeals.map((u,d)=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-3",children:u.clientName}),o.jsx("td",{className:"px-6 py-3 text-right font-bold text-green-600",children:Oe(u.amount)})]},d))})]})]})]})]})]})}const eOe="https://www.googleapis.com/auth/calendar https://www.googleapis.com/auth/calendar.events",tOe="https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest";let vh="primary";function pN({title:t,description:e="",location:n="",startDate:r,startTime:i=null,endDate:s=null,endTime:a=null,durationMinutes:l=60}){const c="https://calendar.google.com/calendar/render",u=new URLSearchParams;u.set("action","TEMPLATE"),u.set("text",t),e&&u.set("details",e),n&&u.set("location",n);const d=m=>m.replace(/-/g,""),f=m=>m.replace(":","")+"00";let h;if(i){const m=`${d(r)}T${f(i)}`;let y;if(s&&a)y=`${d(s)}T${f(a)}`;else if(a)y=`${d(r)}T${f(a)}`;else{const[g,x]=i.split(":").map(Number),b=g*60+x+l,v=Math.floor(b/60)%24,N=b%60,S=`${String(v).padStart(2,"0")}:${String(N).padStart(2,"0")}`;y=`${d(s||r)}T${f(S)}`}h=`${m}/${y}`}else{const m=d(r);d(s||r);const y=new Date(s||r);y.setDate(y.getDate()+1);const g=y.toISOString().split("T")[0].replace(/-/g,"");h=`${m}/${g}`}return u.set("dates",h),`${c}?${u.toString()}`}function nOe(t){const{clientName:e,phone:n,siteVisitDate:r,siteVisitTime:i,notes:s}=t;return pN({title:` Site Visit: ${e}`,description:`Client: ${e}
Phone: ${n||"N/A"}

Notes:
${s||"No notes"}`,location:"Area 51 Banquet Hall",startDate:r,startTime:i||null,durationMinutes:60})}function D1(t){const{clientName:e,phone:n,nextCallDate:r,nextCallTime:i,lastCallNotes:s}=t;return pN({title:` Call: ${e}`,description:`Client: ${e}
Phone: ${n||"N/A"}

Last Call Notes:
${s||"No previous notes"}`,startDate:r,startTime:i||"10:00",durationMinutes:15})}function rOe(t){const{clientName:e,phone:n,eventDate:r,eventType:i,guests:s,amount:a,notes:l}=t;return pN({title:` Event: ${e} - ${i||"Booking"}`,description:`Client: ${e}
Phone: ${n||"N/A"}
Event Type: ${i||"N/A"}
Guests: ${s||"N/A"}
Amount: PKR ${(a==null?void 0:a.toLocaleString())||"N/A"}

Notes:
${l||"No notes"}`,location:"Area 51 Banquet Hall",startDate:r,durationMinutes:480})}function Sd(t){window.open(t,"_blank","noopener,noreferrer")}let kc=!1,K2=!1,td=null;function mN(){return new Promise((t,e)=>{if(window.gapi&&window.google){t();return}const n=document.createElement("script");n.src="https://apis.google.com/js/api.js",n.async=!0,n.defer=!0;const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.async=!0,r.defer=!0;let i=!1,s=!1;const a=()=>{i&&s&&t()};n.onload=()=>{i=!0,a()},r.onload=()=>{s=!0,a()},n.onerror=e,r.onerror=e,document.head.appendChild(n),document.head.appendChild(r)})}async function X5(t,e){return await mN(),await new Promise((n,r)=>{window.gapi.load("client",{callback:n,onerror:r})}),await window.gapi.client.init({apiKey:e,discoveryDocs:[tOe]}),kc=!0,td=window.google.accounts.oauth2.initTokenClient({client_id:t,scope:eOe,callback:""}),K2=!0,{gapiInitialized:kc,gisInitialized:K2}}function au(){var t,e;return((e=(t=window.gapi)==null?void 0:t.client)==null?void 0:e.getToken())!==null}function xh(){return new Promise((t,e)=>{if(!td){e(new Error("Google Calendar API not initialized"));return}td.callback=n=>{n.error?e(n):t(n)},window.gapi.client.getToken()===null?td.requestAccessToken({prompt:"consent"}):td.requestAccessToken({prompt:""})})}function iOe(){var e,n;const t=(n=(e=window.gapi)==null?void 0:e.client)==null?void 0:n.getToken();t&&(window.google.accounts.oauth2.revoke(t.access_token),window.gapi.client.setToken("")),vh="primary"}function M1(t){vh=t||"primary"}async function sOe(){if(!kc)throw new Error("Google Calendar API not initialized");return au()||await xh(),(await window.gapi.client.calendar.calendarList.list({minAccessRole:"writer"})).result.items.map(e=>({id:e.id,name:e.summary,description:e.description||"",primary:e.primary||!1,backgroundColor:e.backgroundColor}))}async function aOe(t){if(!kc)throw new Error("Google Calendar API not initialized");au()||await xh();const{title:e,description:n,location:r,startDate:i,startTime:s,endDate:a,endTime:l,durationMinutes:c=60}=t;let u,d;if(s){const m=new Date(`${i}T${s}:00`),y=a&&l?new Date(`${a}T${l}:00`):new Date(m.getTime()+c*6e4);u={dateTime:m.toISOString(),timeZone:"Asia/Karachi"},d={dateTime:y.toISOString(),timeZone:"Asia/Karachi"}}else{u={date:i};const m=new Date(a||i);m.setDate(m.getDate()+1),d={date:m.toISOString().split("T")[0]}}const f={summary:e,description:n||"",location:r||"",start:u,end:d,reminders:{useDefault:!1,overrides:[{method:"popup",minutes:60},{method:"popup",minutes:15}]}};return(await window.gapi.client.calendar.events.insert({calendarId:vh,resource:f})).result}async function oOe(t,e){if(!kc)throw new Error("Google Calendar API not initialized");au()||await xh();const{title:n,description:r,location:i,startDate:s,startTime:a,endDate:l,endTime:c,durationMinutes:u=60}=e;let d,f;if(a){const y=new Date(`${s}T${a}:00`),g=l&&c?new Date(`${l}T${c}:00`):new Date(y.getTime()+u*6e4);d={dateTime:y.toISOString(),timeZone:"Asia/Karachi"},f={dateTime:g.toISOString(),timeZone:"Asia/Karachi"}}else{d={date:s};const y=new Date(l||s);y.setDate(y.getDate()+1),f={date:y.toISOString().split("T")[0]}}const h={summary:n,description:r||"",location:i||"",start:d,end:f};return(await window.gapi.client.calendar.events.update({calendarId:vh,eventId:t,resource:h})).result}async function Y2(t){if(!kc)throw new Error("Google Calendar API not initialized");au()||await xh(),await window.gapi.client.calendar.events.delete({calendarId:vh,eventId:t})}async function lOe(t,e){var r,i;let n;switch(e){case"siteVisit":n={title:` Site Visit: ${t.clientName}`,description:`Client: ${t.clientName}
Phone: ${t.phone||"N/A"}
Stage: ${t.stage}

Notes:
${t.notes||"No notes"}`,location:"Area 51 Banquet Hall",startDate:t.siteVisitDate,startTime:t.siteVisitTime||null,durationMinutes:60};break;case"call":n={title:` Call: ${t.clientName}`,description:`Client: ${t.clientName}
Phone: ${t.phone||"N/A"}
Stage: ${t.stage}

Last Call Notes:
${t.lastCallNotes||"No previous notes"}`,startDate:t.nextCallDate,startTime:t.nextCallTime||"10:00",durationMinutes:15};break;case"event":n={title:` Event: ${t.clientName} - ${t.eventType||"Booking"}`,description:`Client: ${t.clientName}
Phone: ${t.phone||"N/A"}
Event Type: ${t.eventType||"N/A"}
Guests: ${t.guests||"N/A"}
Amount: PKR ${((r=t.amount)==null?void 0:r.toLocaleString())||"N/A"}

Notes:
${t.notes||"No notes"}`,location:"Area 51 Banquet Hall",startDate:t.eventDate,durationMinutes:480};break;case"booking":n={title:` BOOKED: ${t.clientName} - ${t.eventType||"Event"}`,description:`CONFIRMED BOOKING

Client: ${t.clientName}
Phone: ${t.phone||"N/A"}
Event Type: ${t.eventType||"N/A"}
Guests: ${t.guests||"N/A"}
Amount: PKR ${((i=t.amount)==null?void 0:i.toLocaleString())||"N/A"}

Notes:
${t.notes||"No notes"}`,location:"Area 51 Banquet Hall",startDate:t.eventDate,durationMinutes:480};break;default:throw new Error(`Unknown event type: ${e}`)}return await aOe(n)}function X2(t){return{siteVisit:"calendarEventIdSiteVisit",call:"calendarEventIdCall",event:"calendarEventIdEvent",booking:"calendarEventIdBooking"}[t]||`calendarEventId${t}`}const Q5=k.createContext(null);function cOe({children:t}){const[e,n]=k.useState(null),[r,i]=k.useState(!1),[s,a]=k.useState(!1);k.useEffect(()=>{const f=io(Yt(De,"artifacts",We,"public","data","app_settings","integrations"),h=>{h.exists()&&n(h.data())});return()=>f()},[]),k.useEffect(()=>{(async()=>{if(!(e!=null&&e.googleCalendarEnabled)||!(e!=null&&e.googleCalendarClientId)||!(e!=null&&e.googleCalendarApiKey)){a(!1),i(!1);return}try{await mN(),await X5(e.googleCalendarClientId,e.googleCalendarApiKey),a(!0),i(au()),e.googleCalendarSelectedId&&M1(e.googleCalendarSelectedId)}catch(h){console.error("Failed to initialize Google Calendar:",h),a(!1),i(!1)}})()},[e==null?void 0:e.googleCalendarEnabled,e==null?void 0:e.googleCalendarClientId,e==null?void 0:e.googleCalendarApiKey]);const l=k.useCallback(f=>{if(!(e!=null&&e.googleCalendarEnabled)||!(e!=null&&e.googleCalendarAutoSync)||!r)return!1;switch(f){case"siteVisit":return e.googleCalendarSyncSiteVisits;case"call":return e.googleCalendarSyncCalls;case"event":return e.googleCalendarSyncEvents;case"booking":return e.googleCalendarSyncBookings;default:return!1}},[e,r]),c=k.useCallback(async(f,h,m)=>{if(!l(h))return null;const y=X2(h),g=f[y];try{let x=!1;switch(h){case"siteVisit":x=!!f.siteVisitDate;break;case"call":x=!!f.nextCallDate;break;case"event":case"booking":x=!!f.eventDate;break}if(!x)return g&&(await Y2(g),m&&await m(f.id,{[y]:null})),null;if(g){const w=uOe(f,h);return await oOe(g,w),g}else{const w=await lOe(f,h);return w!=null&&w.id&&m&&await m(f.id,{[y]:w.id}),w==null?void 0:w.id}}catch(x){return console.error("Calendar sync error:",x),null}},[l]),u=k.useCallback(async(f,h,m)=>{const y=X2(h),g=f[y];if(g)try{await Y2(g),m&&await m(f.id,{[y]:null})}catch(x){console.error("Failed to remove calendar event:",x)}},[]),d={isEnabled:(e==null?void 0:e.googleCalendarEnabled)||!1,isConnected:r,isInitialized:s,shouldAutoSync:l,syncLeadEvent:c,removeLeadEvent:u,settings:e};return o.jsx(Q5.Provider,{value:d,children:t})}function J5(){const t=k.useContext(Q5);if(!t)throw new Error("useGoogleCalendar must be used within a GoogleCalendarProvider");return t}function uOe(t,e){var n,r;switch(e){case"siteVisit":return{title:` Site Visit: ${t.clientName}`,description:`Client: ${t.clientName}
Phone: ${t.phone||"N/A"}
Stage: ${t.stage}

Notes:
${t.notes||"No notes"}`,location:"Area 51 Banquet Hall",startDate:t.siteVisitDate,startTime:t.siteVisitTime||null,durationMinutes:60};case"call":return{title:` Call: ${t.clientName}`,description:`Client: ${t.clientName}
Phone: ${t.phone||"N/A"}
Stage: ${t.stage}

Last Call Notes:
${t.lastCallNotes||"No previous notes"}`,startDate:t.nextCallDate,startTime:t.nextCallTime||"10:00",durationMinutes:15};case"event":return{title:` Event: ${t.clientName} - ${t.eventType||"Booking"}`,description:`Client: ${t.clientName}
Phone: ${t.phone||"N/A"}
Event Type: ${t.eventType||"N/A"}
Guests: ${t.guests||"N/A"}
Amount: PKR ${((n=t.amount)==null?void 0:n.toLocaleString())||"N/A"}

Notes:
${t.notes||"No notes"}`,location:"Area 51 Banquet Hall",startDate:t.eventDate,durationMinutes:480};case"booking":return{title:` BOOKED: ${t.clientName} - ${t.eventType||"Event"}`,description:`CONFIRMED BOOKING

Client: ${t.clientName}
Phone: ${t.phone||"N/A"}
Event Type: ${t.eventType||"N/A"}
Guests: ${t.guests||"N/A"}
Amount: PKR ${((r=t.amount)==null?void 0:r.toLocaleString())||"N/A"}

Notes:
${t.notes||"No notes"}`,location:"Area 51 Banquet Hall",startDate:t.eventDate,durationMinutes:480};default:return null}}function dOe({lead:t,currentUser:e,onClose:n,onSave:r,onOpenAi:i,sources:s,managers:a,eventTypes:l}){var ie;const[c,u]=k.useState("details"),[d,f]=k.useState({...t}),[h,m]=k.useState(""),[y,g]=k.useState(!1),[x,w]=k.useState(null),[b,v]=k.useState(null),[N,S]=k.useState({venue:"",eventDate:"",eventType:"",guests:"",finalAmount:"",advanceAmount:"",notes:""}),A=k.useRef(null),{syncLeadEvent:E,shouldAutoSync:_}=J5(),[C,P]=k.useState([]),T=async()=>{try{const q=await ar.getTimeline(t.id);P(q)}catch(q){console.error("Error fetching timeline:",q)}};k.useEffect(()=>{t.id&&T()},[t.id]),k.useEffect(()=>{var q;c==="activity"&&((q=A.current)==null||q.scrollIntoView({behavior:"smooth"}))},[c,t.activityLog]);const O=async()=>{g(!0),await r(t.id,d);try{(d.siteVisitDate!==t.siteVisitDate||d.siteVisitTime!==t.siteVisitTime)&&_("siteVisit")&&await E({...d,id:t.id},"siteVisit",r),d.eventDate!==t.eventDate&&(d.stage==="Booked"&&_("booking")?await E({...d,id:t.id},"booking",r):_("event")&&await E({...d,id:t.id},"event",r))}catch(q){console.error("Calendar sync error:",q)}g(!1),n()},R=async()=>{if(h.trim())try{const q={note:h};await ar.addNote(t.id,{content:JSON.stringify(q),type:Ve.NOTE_ADDED,userId:e.id}),m(""),T()}catch(q){console.error("Error adding comment:",q)}},M=q=>{q!==d.stage&&(q==="Booked"?(S({venue:d.venue||"",eventDate:d.eventDate?new Date(d.eventDate).toISOString().split("T")[0]:"",eventType:d.eventType||"",guests:d.guests||"",finalAmount:d.quotationAmount||"",advanceAmount:d.advancePaid||"",notes:d.bookingNotes||""}),v({from:d.stage,to:q})):w({from:d.stage,to:q}))},D=async()=>{if(!x)return;const{from:q,to:ae}=x,ge={from:q,to:ae};try{await B(ae),await r(t.id,{stage:ae,stageUpdatedAt:new Date().toISOString(),stageUpdatedBy:e.name}),await ar.addNote(t.id,{content:JSON.stringify(ge),type:Ve.STAGE_CHANGE,userId:e.id}),f(Fe=>({...Fe,stage:ae})),T(),w(null),u("activity")}catch(Fe){console.error("Error changing stage:",Fe)}},B=async q=>!0,U=()=>{w(null)},V=async()=>{if(!b||!N.venue||!N.eventDate||!N.finalAmount)return;const{from:q,to:ae}=b,ge=qD(Ve.STAGE_CHANGE,{from:q,to:ae,bookingDetails:{venue:N.venue,eventDate:N.eventDate,finalAmount:N.finalAmount,advanceAmount:N.advanceAmount}},e.name),Fe={...d,stage:ae,venue:N.venue,eventDate:N.eventDate,eventType:N.eventType,guests:N.guests,quotationAmount:Number(N.finalAmount),advancePaid:Number(N.advanceAmount)||0,totalPaid:Number(N.advanceAmount)||0,totalDue:Number(N.finalAmount)-(Number(N.advanceAmount)||0),bookingNotes:N.notes,bookedAt:new Date().toISOString(),bookedBy:e.name,activityLog:[...d.activityLog||[],ge]};f(Fe),await r(t.id,{stage:ae,venue:N.venue,eventDate:N.eventDate,eventType:N.eventType,guests:N.guests,finalAmount:Number(N.finalAmount),quotationAmount:Number(N.finalAmount),advanceAmount:Number(N.advanceAmount)||0,totalPaid:Number(N.advanceAmount)||0,totalDue:Number(N.finalAmount)-(Number(N.advanceAmount)||0),bookingNotes:N.notes,bookedAt:new Date().toISOString(),bookedBy:e.name,stageUpdatedAt:new Date().toISOString(),stageUpdatedBy:e.name});try{const et={from:q,to:ae,bookingDetails:{venue:N.venue,eventDate:N.eventDate,finalAmount:N.finalAmount,advanceAmount:N.advanceAmount}};await ar.addNote(t.id,{content:JSON.stringify(et),type:Ve.STAGE_CHANGE,userId:e.id}),T()}catch(et){console.error("Error logging booking activity:",et)}v(null),u("activity")},W=()=>{v(null)},H=N.venue&&N.eventDate&&N.finalAmount,te=k.useMemo(()=>{const q=[...s||[]];return d.source&&!q.find(ae=>ae.name===d.source)&&q.push({id:`custom-${d.source}`,name:d.source}),q},[s,d.source]),X=k.useMemo(()=>{const q=[];return C.forEach(ae=>{var Fe;let ge={};try{ge=JSON.parse(ae.content)}catch{ge={note:ae.content}}q.push({type:ae.type,data:ge,timestamp:new Date(ae.createdAt),user:((Fe=ae.user)==null?void 0:Fe.username)||"Unknown"})}),q.sort((ae,ge)=>ge.timestamp-ae.timestamp)},[C]);return o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white w-full max-w-4xl h-[90vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-scale-in relative",children:[o.jsxs("div",{className:"bg-white border-b border-gray-200 p-6 flex justify-between items-center sticky top-0 z-20",children:[o.jsx("div",{children:o.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[d.clientName,o.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-700 text-xs rounded-full uppercase tracking-wider",children:d.stage})]})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>i(t),className:"p-2 rounded-full bg-indigo-50 text-indigo-600 hover:bg-indigo-100 transition-colors",title:"Ask AI Assistant",children:o.jsx(sr,{className:"w-5 h-5"})}),o.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 rounded-full",children:o.jsx(Dt,{className:"w-6 h-6 text-gray-500"})})]})]}),o.jsx("div",{className:"bg-slate-50 border-b border-gray-200 px-6 py-2 flex gap-2 overflow-x-auto",children:la.map(q=>o.jsx("button",{onClick:()=>M(q),className:`px-4 py-1.5 rounded-full text-xs font-bold transition-all border ${d.stage===q?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-500 border-gray-200 hover:border-blue-400"}`,children:q},q))}),x&&o.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-30 rounded-2xl",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 max-w-md mx-4 animate-scale-in",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:"Confirm Stage Change"}),o.jsxs("p",{className:"text-gray-600 mb-4",children:["Move this lead from ",o.jsx("span",{className:"font-semibold text-gray-900",children:x.from})," to"," ",o.jsx("span",{className:"font-semibold text-blue-600",children:x.to}),"?"]}),o.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"This will be logged in the timeline."}),o.jsxs("div",{className:"flex gap-3 justify-end",children:[o.jsx("button",{onClick:U,className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg font-medium transition-colors",children:"Cancel"}),o.jsx("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 rounded-lg font-medium transition-colors",children:"Confirm"})]})]})}),b&&o.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center z-30 rounded-2xl overflow-y-auto py-4",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg mx-4 animate-scale-in",children:[o.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-4 rounded-t-xl",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:o.jsx(as,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-bold",children:"Confirm Booking"}),o.jsx("p",{className:"text-green-100 text-sm",children:"Please verify all details before confirming"})]})]})}),o.jsxs("div",{className:"p-5 space-y-4",children:[o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Client"}),o.jsx("p",{className:"font-bold text-gray-900",children:d.clientName}),o.jsx("p",{className:"text-sm text-gray-500",children:d.phone})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Venue ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:z0.map(q=>o.jsx("button",{type:"button",onClick:()=>S({...N,venue:q.id}),className:`p-3 rounded-lg border-2 text-left transition-all ${N.venue===q.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(WB,{className:`w-5 h-5 ${N.venue===q.id?"text-green-600":"text-gray-400"}`}),o.jsxs("div",{children:[o.jsx("p",{className:`font-medium ${N.venue===q.id?"text-green-700":"text-gray-700"}`,children:q.name}),o.jsx("p",{className:"text-xs text-gray-500",children:q.label})]})]})},q.id))}),!N.venue&&o.jsxs("p",{className:"text-xs text-red-500 mt-1 flex items-center gap-1",children:[o.jsx(mo,{className:"w-3 h-3"})," Please select a venue"]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Event Date ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"date",className:`w-full p-2.5 border rounded-lg text-sm ${N.eventDate?"border-gray-200":"border-red-300"}`,value:N.eventDate,onChange:q=>S({...N,eventDate:q.target.value})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Event Type"}),o.jsx("input",{type:"text",className:"w-full p-2.5 border border-gray-200 rounded-lg text-sm",value:N.eventType,onChange:q=>S({...N,eventType:q.target.value}),placeholder:"e.g., Wedding, Mehndi"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Guests"}),o.jsx("input",{type:"text",className:"w-full p-2.5 border border-gray-200 rounded-lg text-sm",value:N.guests,onChange:q=>S({...N,guests:q.target.value}),placeholder:"e.g., 200"})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:["Final Invoice Amount ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"PKR"}),o.jsx("input",{type:"number",className:`w-full p-2.5 pl-12 border rounded-lg text-sm ${N.finalAmount?"border-gray-200":"border-red-300"}`,value:N.finalAmount,onChange:q=>S({...N,finalAmount:q.target.value}),placeholder:"0"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Advance Received"}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:"PKR"}),o.jsx("input",{type:"number",className:"w-full p-2.5 pl-12 border border-gray-200 rounded-lg text-sm",value:N.advanceAmount,onChange:q=>S({...N,advanceAmount:q.target.value}),placeholder:"0"})]}),N.finalAmount&&N.advanceAmount&&o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Balance due: PKR ",(Number(N.finalAmount)-Number(N.advanceAmount)).toLocaleString()]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Booking Notes"}),o.jsx("textarea",{className:"w-full p-2.5 border border-gray-200 rounded-lg text-sm h-20 resize-none",value:N.notes,onChange:q=>S({...N,notes:q.target.value}),placeholder:"Special requirements, menu preferences, etc."})]}),H&&o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs font-semibold text-green-700 uppercase tracking-wide mb-2",children:"Booking Summary"}),o.jsxs("div",{className:"text-sm text-green-800 space-y-1",children:[o.jsxs("p",{children:[o.jsx("span",{className:"text-green-600",children:"Venue:"})," ",(ie=z0.find(q=>q.id===N.venue))==null?void 0:ie.label]}),o.jsxs("p",{children:[o.jsx("span",{className:"text-green-600",children:"Date:"})," ",new Date(N.eventDate).toLocaleDateString("en-PK",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),o.jsxs("p",{children:[o.jsx("span",{className:"text-green-600",children:"Amount:"})," PKR ",Number(N.finalAmount).toLocaleString()]})]})]})]}),o.jsxs("div",{className:"p-4 border-t bg-gray-50 flex gap-3 justify-end rounded-b-xl",children:[o.jsx("button",{onClick:W,className:"px-4 py-2 text-gray-600 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Cancel"}),o.jsxs("button",{onClick:V,disabled:!H,className:`px-6 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${H?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[o.jsx(as,{className:"w-4 h-4"}),"Confirm Booking"]})]})]})}),o.jsxs("div",{className:"flex-1 flex overflow-hidden bg-slate-50",children:[o.jsxs("div",{className:"w-56 bg-white border-r border-gray-200 p-4 flex flex-col gap-2",children:[o.jsxs("button",{onClick:()=>u("details"),className:`text-left px-4 py-3 rounded-xl text-sm font-bold flex items-center gap-3 ${c==="details"?"bg-blue-50 text-blue-700":"text-gray-500 hover:bg-gray-50"}`,children:[o.jsx(nU,{className:"w-4 h-4"})," Details"]}),o.jsxs("button",{onClick:()=>u("activity"),className:`text-left px-4 py-3 rounded-xl text-sm font-bold flex items-center gap-3 ${c==="activity"?"bg-blue-50 text-blue-700":"text-gray-500 hover:bg-gray-50"}`,children:[o.jsx(os,{className:"w-4 h-4"})," Timeline",X.length>0&&o.jsx("span",{className:"ml-auto text-xs bg-gray-200 text-gray-600 px-2 py-0.5 rounded-full",children:X.length})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-8",children:[c==="details"&&o.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[d.meta&&o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-xl border border-blue-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Gd,{className:"w-4 h-4 text-blue-500"}),o.jsx("h3",{className:"text-xs font-bold text-blue-700 uppercase tracking-widest",children:"Meta Campaign Info"})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:[d.meta.campaign_name&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500 text-xs",children:"Campaign"}),o.jsx("div",{className:"font-medium text-gray-900",children:d.meta.campaign_name})]}),d.meta.adset_name&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500 text-xs",children:"Ad Set"}),o.jsx("div",{className:"font-medium text-gray-900",children:d.meta.adset_name})]}),d.meta.ad_name&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500 text-xs",children:"Ad"}),o.jsx("div",{className:"font-medium text-gray-900 truncate",title:d.meta.ad_name,children:d.meta.ad_name})]}),d.meta.platform&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500 text-xs",children:"Platform"}),o.jsx("div",{className:"font-medium text-gray-900 capitalize",children:d.meta.platform})]}),d.meta.form_name&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500 text-xs",children:"Form"}),o.jsx("div",{className:"font-medium text-gray-900",children:d.meta.form_name})]}),d.meta.city&&o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500 text-xs",children:"City"}),o.jsx("div",{className:"font-medium text-gray-900",children:d.meta.city})]})]}),(d.budgetRange||d.meta.budget_range||d.meta.event_type)&&o.jsxs("div",{className:"flex flex-wrap gap-2 mt-3 pt-3 border-t border-blue-200",children:[(d.budgetRange||d.meta.budget_range)&&o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-emerald-100 text-emerald-700 rounded-full text-xs font-medium",children:[o.jsx(Ro,{className:"w-3 h-3"}),d.budgetRange||d.meta.budget_range]}),d.meta.event_type&&o.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:d.meta.event_type}),d.meta.guest_count&&o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-medium",children:[o.jsx(Tr,{className:"w-3 h-3"}),d.meta.guest_count," guests"]}),d.meta.event_date&&o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-100 text-amber-700 rounded-full text-xs font-medium",children:[o.jsx(on,{className:"w-3 h-3"}),d.meta.event_date]})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[o.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest border-b pb-2",children:"Event Info"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Event Date"}),o.jsx("input",{type:"date",className:"w-full p-2 border rounded-lg text-sm mt-1",value:d.eventDate?new Date(d.eventDate).toISOString().split("T")[0]:"",onChange:q=>f({...d,eventDate:q.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Guests"}),o.jsx("input",{type:"number",className:"w-full p-2 border rounded-lg text-sm mt-1",value:d.guests||"",onChange:q=>f({...d,guests:q.target.value})})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"text-xs font-semibold text-gray-500",children:["Client Budget ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{className:"w-full p-2 border rounded-lg text-sm mt-1",value:d.clientBudget||"",onChange:q=>f({...d,clientBudget:Number(q.target.value)}),type:"number",placeholder:"PKR",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Quotation Amount"}),o.jsx("input",{className:"w-full p-2 border rounded-lg text-sm mt-1",value:d.quotationAmount||"",onChange:q=>f({...d,quotationAmount:Number(q.target.value)}),type:"number",placeholder:"PKR (based on client budget)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Manager"}),o.jsxs("select",{className:"w-full p-2 border rounded-lg text-sm mt-1 bg-white",value:d.manager||"",onChange:q=>f({...d,manager:q.target.value}),children:[o.jsx("option",{value:"",children:"Select Manager"}),(a||eA).map((q,ae)=>o.jsx("option",{value:q,children:q},`${q}-${ae}`))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Event Type"}),o.jsxs("select",{className:"w-full p-2 border rounded-lg text-sm mt-1 bg-white",value:d.eventType||"",onChange:q=>f({...d,eventType:q.target.value}),children:[o.jsx("option",{value:"",children:"Select Event Type"}),(l||of).map((q,ae)=>o.jsx("option",{value:q,children:q},`${q}-${ae}`))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Venue Preference"}),o.jsxs("select",{className:"w-full p-2 border rounded-lg text-sm mt-1 bg-white",value:d.venue||"",onChange:q=>f({...d,venue:q.target.value}),children:[o.jsx("option",{value:"",children:"Select Venue"}),z0.map(q=>o.jsx("option",{value:q.id,children:q.label},q.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Source"}),o.jsxs("select",{className:"w-full p-2 border rounded-lg text-sm mt-1 bg-white",value:d.source||"",onChange:q=>f({...d,source:q.target.value}),children:[o.jsx("option",{value:"",children:"Unknown"}),te.map((q,ae)=>o.jsx("option",{value:q.name,children:q.name},q.id||`source-${ae}`))]})]})]})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-4",children:[o.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest border-b pb-2",children:"Site Visit"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Site Visit Date"}),o.jsx("input",{type:"date",className:"w-full p-2 border rounded-lg text-sm mt-1",value:d.siteVisitDate||"",onChange:q=>f({...d,siteVisitDate:q.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-semibold text-gray-500",children:"Site Visit Time"}),o.jsx("input",{type:"time",className:"w-full p-2 border rounded-lg text-sm mt-1",value:d.siteVisitTime||"",onChange:q=>f({...d,siteVisitTime:q.target.value})})]})]})]}),(d.eventDate||d.siteVisitDate||d.nextCallDate)&&o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-cyan-50 p-6 rounded-xl border border-blue-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[o.jsx(Cb,{className:"w-4 h-4 text-blue-600"}),o.jsx("h3",{className:"text-xs font-bold text-blue-700 uppercase tracking-widest",children:"Add to Google Calendar"})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.siteVisitDate&&o.jsxs("button",{onClick:()=>Sd(nOe(d)),className:"inline-flex items-center gap-2 px-3 py-2 bg-white border border-blue-200 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-50 hover:border-blue-300 transition-colors",children:[o.jsx(Tb,{className:"w-4 h-4"}),"Site Visit",o.jsxs("span",{className:"text-xs text-blue-500",children:["(",new Date(d.siteVisitDate).toLocaleDateString(),")"]})]}),d.nextCallDate&&o.jsxs("button",{onClick:()=>Sd(D1(d)),className:"inline-flex items-center gap-2 px-3 py-2 bg-white border border-green-200 text-green-700 rounded-lg text-sm font-medium hover:bg-green-50 hover:border-green-300 transition-colors",children:[o.jsx(Gn,{className:"w-4 h-4"}),"Scheduled Call",o.jsxs("span",{className:"text-xs text-green-500",children:["(",new Date(d.nextCallDate).toLocaleDateString(),")"]})]}),d.eventDate&&o.jsxs("button",{onClick:()=>Sd(rOe(d)),className:"inline-flex items-center gap-2 px-3 py-2 bg-white border border-purple-200 text-purple-700 rounded-lg text-sm font-medium hover:bg-purple-50 hover:border-purple-300 transition-colors",children:[o.jsx(on,{className:"w-4 h-4"}),d.stage==="Booked"?"Booking":"Event Date",o.jsxs("span",{className:"text-xs text-purple-500",children:["(",new Date(d.eventDate).toLocaleDateString(),")"]})]})]}),o.jsx("p",{className:"text-xs text-blue-500 mt-3",children:"Click to open Google Calendar with pre-filled event details"})]}),o.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[o.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest border-b pb-2 mb-4",children:"Notes"}),o.jsx("textarea",{className:"w-full p-3 border rounded-lg text-sm h-32",value:d.notes||"",onChange:q=>f({...d,notes:q.target.value})})]})]}),c==="activity"&&o.jsxs("div",{className:"flex flex-col h-full",children:[o.jsxs("div",{className:"flex-1 space-y-4 mb-4 overflow-y-auto",children:[X.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-400",children:[o.jsx(os,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"No activity yet"}),o.jsx("p",{className:"text-xs mt-1",children:"Add a note below to start tracking"})]}):X.map((q,ae)=>{const ge=JW(q.type);return o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:`w-8 h-8 rounded-full bg-${ge.color}-100 flex items-center justify-center flex-shrink-0`,children:o.jsx("span",{className:"text-sm",children:ge.icon})}),o.jsxs("div",{className:"flex-1 bg-white p-3 rounded-xl border shadow-sm",children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:ZW({type:q.type,...q.data})}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[q.user,"  ",q.timestamp.toLocaleString()]})]})]},ae)}),o.jsx("div",{ref:A})]}),o.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[o.jsx("input",{className:"flex-1 p-3 rounded-xl border outline-none text-sm",placeholder:"Add note...",value:h,onChange:q=>m(q.target.value),onKeyDown:q=>q.key==="Enter"&&R()}),o.jsx("button",{onClick:R,className:"p-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700",children:o.jsx(Rm,{className:"w-4 h-4"})})]})]})]})]}),o.jsx("div",{className:"p-4 bg-white border-t border-gray-200 flex justify-end gap-2",children:o.jsxs("button",{onClick:O,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl flex items-center gap-2",children:[y?o.jsx(Ft,{className:"w-4 h-4 animate-spin"}):o.jsx(Q_,{className:"w-4 h-4"})," ","Save"]})})]})})}function fOe({onClose:t}){const[e,n]=k.useState([]),[r,i]=k.useState(""),[s,a]=k.useState(""),[l,c]=k.useState("Manager"),[u,d]=k.useState(!1),[f,h]=k.useState(!1),[m,y]=k.useState(!1),[g,x]=k.useState({mode:"round_robin",defaultAssignee:"Unassigned",sourceRules:[]}),[w,b]=k.useState([]),[v,N]=k.useState(!1),[S,A]=k.useState({}),[E,_]=k.useState(""),[C,P]=k.useState(!1),[T,O]=k.useState([]),[R,M]=k.useState(""),[D,B]=k.useState(""),[U,V]=k.useState(null),[W,H]=k.useState(null);k.useEffect(()=>{te()},[]);const te=async()=>{try{const F=await tm.getAll();n(F)}catch(F){console.error("Error fetching users",F)}};k.useEffect(()=>{(async()=>{try{const K=await Ju.getAll();b(K)}catch(K){console.error("Error fetching sources",K)}})()},[]),k.useEffect(()=>{(async()=>{try{const[K,ce,de]=await Promise.all([Zo.get("assignment_rules"),Zo.get("automation_rules"),Zo.get("event_types")]);K&&x(K),ce&&A(ce),de&&de.list&&de.list.length>0?O(de.list):O(of)}catch(K){console.error("Error loading settings",K),O(of)}})()},[]);const X=async()=>{d(!0);try{await Zo.update("assignment_rules",g),alert("Assignment rules saved!")}catch(F){console.error(F),alert("Failed to save rules.")}finally{d(!1)}},ie=()=>{x(F=>{var K;return{...F,sourceRules:[...F.sourceRules||[],{source:"",assignTo:((K=e[0])==null?void 0:K.username)||""}]}})},q=(F,K,ce)=>{x(de=>{const He=[...de.sourceRules||[]];return He[F]={...He[F],[K]:ce},{...de,sourceRules:He}})},ae=F=>{x(K=>({...K,sourceRules:(K.sourceRules||[]).filter((ce,de)=>de!==F)}))},ge=F=>S[F]||{addToCallList:!0,sendNotification:!0,emailResponse:!1,textAutoResponse:!1,aiBot:!1},Fe=(F,K)=>{A(ce=>({...ce,[F]:{...ge(F),[K]:!ge(F)[K]}}))},et=async()=>{d(!0);try{await Zo.update("automation_rules",S),alert("Automation rules saved!")}catch(F){console.error(F),alert("Failed to save automation rules.")}finally{d(!1)}},se=async F=>{try{await Zo.update("event_types",{list:F})}catch(K){console.error("Failed to save event types",K),alert("Failed to save event types to server")}},ye=async()=>{if(!D.trim())return;if(T.includes(D.trim())){alert("Event type already exists");return}const F=[...T,D.trim()];O(F),await se(F),B("")},ve=async(F,K)=>{if(!K.trim())return;const ce=T.map(de=>de===F?K.trim():de);O(ce),await se(ce),H(null)},J=async F=>{if(!window.confirm(`Delete event type "${F}"?`))return;const K=T.filter(ce=>ce!==F);O(K),await se(K)},ze=async F=>{if(F.preventDefault(),!(!r.trim()||!s.trim())){d(!0);try{const K=await tm.invite({email:r,name:s,role:l});if(K.status){const{tempPassword:ce,resetLink:de}=K.data;if(window.confirm(` User ${s} has been added!

Temporary Password: ${ce}
Reset Link: ${de}

Click OK to copy the link to clipboard.`))try{await navigator.clipboard.writeText(de),alert("Link copied!")}catch{prompt("Copy this link:",de)}i(""),a(""),te()}else throw new Error(K.message||"Failed to invite user")}catch(K){console.error(K),alert("Failed to invite user: "+(K.message||"Unknown error"))}finally{d(!1)}}},Pe=async F=>{if(window.confirm("Revoke access for this user?"))try{await tm.delete(F),te()}catch(K){console.error(K),alert("Failed to remove user")}},Je=async()=>{if(window.confirm("DANGER: This will permanently delete ALL leads. Are you sure?")){h(!0);try{await U0.resetDatabase(),alert("Database cleared successfully."),window.location.reload()}catch(F){console.error(F),alert("Failed to reset database: "+F.message)}finally{h(!1)}}},st=async()=>{if(window.confirm("This will ensure all leads have linked contacts. Continue?")){d(!0);try{const F=await U0.migrateContacts();alert(F.message),window.location.reload()}catch(F){console.error(F),alert("Migration failed: "+F.message)}finally{d(!1)}}},Tt=async()=>{d(!0);try{const F=await U0.consolidateSources();alert(F.message)}catch(F){console.error(F),alert("Consolidation failed: "+F.message)}finally{d(!1)}};return o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-scale-in h-[80vh]",children:[o.jsxs("div",{className:"bg-slate-900 text-white p-6 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Pb,{className:"w-6 h-6 text-yellow-400"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold",children:"Admin Control Panel"}),o.jsx("p",{className:"text-slate-400 text-xs",children:"Manage Team Access"})]})]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full",children:o.jsx(Dt,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"p-6 flex-1 overflow-y-auto bg-slate-50",children:[o.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-200 mb-6",children:[o.jsxs("h3",{className:"text-sm font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx(Dm,{className:"w-4 h-4"})," Invite Team Member"]}),o.jsxs("form",{onSubmit:ze,className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[o.jsx("input",{className:"px-3 py-2 border rounded-lg text-sm",placeholder:"Name",value:s,onChange:F=>a(F.target.value),required:!0}),o.jsx("input",{className:"px-3 py-2 border rounded-lg text-sm",placeholder:"Email",type:"email",value:r,onChange:F=>i(F.target.value),required:!0}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("select",{className:"px-3 py-2 border rounded-lg text-sm flex-1",value:l,onChange:F=>c(F.target.value),children:Wse.map(F=>o.jsx("option",{value:F,children:F},F))}),o.jsx("button",{type:"submit",disabled:u,className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors",children:u?o.jsx(Ft,{className:"w-4 h-4 animate-spin"}):o.jsx(no,{className:"w-4 h-4"})})]})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" User will receive a temporary password/link to access the CRM."})]}),o.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-xl mb-6 overflow-hidden",children:[o.jsxs("button",{onClick:()=>y(!m),className:"w-full p-5 flex items-center justify-between text-left",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(lU,{className:"w-4 h-4 text-purple-600"}),o.jsx("h3",{className:"text-sm font-bold text-purple-800",children:"Lead Assignment Rules"})]}),m?o.jsx(ia,{className:"w-4 h-4 text-purple-600"}):o.jsx(to,{className:"w-4 h-4 text-purple-600"})]}),m&&o.jsxs("div",{className:"px-5 pb-5 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-purple-700 mb-2",children:"Assignment Mode"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"round_robin",label:"Round Robin",desc:"Evenly distribute leads"},{value:"source_based",label:"By Source",desc:"Assign based on lead source"},{value:"single_person",label:"Single Person",desc:"All leads to one person"},{value:"manual",label:"Manual Only",desc:"No auto-assignment"}].map(F=>o.jsxs("button",{onClick:()=>x(K=>({...K,mode:F.value})),className:`p-3 rounded-lg border text-left transition-all ${g.mode===F.value?"border-purple-500 bg-purple-100":"border-gray-200 bg-white hover:border-purple-300"}`,children:[o.jsx("div",{className:"font-medium text-sm",children:F.label}),o.jsx("div",{className:"text-xs text-gray-500",children:F.desc})]},F.value))})]}),g.mode==="single_person"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-purple-700 mb-2",children:"Assign All Leads To"}),o.jsxs("select",{value:g.defaultAssignee||"",onChange:F=>x(K=>({...K,defaultAssignee:F.target.value})),className:"w-full px-3 py-2 border rounded-lg text-sm",children:[o.jsx("option",{value:"",children:"Select User..."}),e.map(F=>o.jsx("option",{value:F.username,children:F.username||F.email},F.id))]})]}),g.mode==="source_based"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-purple-700 mb-2",children:"Source  Employee Rules"}),o.jsxs("div",{className:"space-y-2",children:[(g.sourceRules||[]).map((F,K)=>o.jsxs("div",{className:"flex gap-2 items-center",children:[o.jsxs("select",{value:F.source,onChange:ce=>q(K,"source",ce.target.value),className:"flex-1 px-3 py-2 border rounded-lg text-sm",children:[o.jsx("option",{value:"",children:"Select Source..."}),w.map(ce=>o.jsx("option",{value:ce.name,children:ce.name},ce.id))]}),o.jsx("span",{className:"text-gray-400",children:""}),o.jsxs("select",{value:F.assignTo,onChange:ce=>q(K,"assignTo",ce.target.value),className:"flex-1 px-3 py-2 border rounded-lg text-sm",children:[o.jsx("option",{value:"",children:"Select User..."}),e.map(ce=>o.jsx("option",{value:ce.username,children:ce.username||ce.email},ce.id))]}),o.jsx("button",{onClick:()=>ae(K),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg",children:o.jsx(Ui,{className:"w-4 h-4"})})]},K)),o.jsxs("button",{onClick:ie,className:"text-purple-600 text-sm font-medium flex items-center gap-1 hover:text-purple-700",children:[o.jsx(no,{className:"w-4 h-4"})," Add Rule"]})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Leads from sources not listed will use round-robin."})]}),g.mode!=="manual"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-purple-700 mb-2",children:"Fallback (if no rule matches)"}),o.jsxs("select",{value:g.fallbackAssignee||"round_robin",onChange:F=>x(K=>({...K,fallbackAssignee:F.target.value})),className:"w-full px-3 py-2 border rounded-lg text-sm",children:[o.jsx("option",{value:"round_robin",children:"Use Round Robin"}),o.jsx("option",{value:"unassigned",children:"Leave Unassigned"}),e.map(F=>o.jsxs("option",{value:F.username,children:["Always assign to ",F.username||F.email]},F.id))]})]}),o.jsxs("button",{onClick:X,disabled:u,className:"w-full bg-purple-600 hover:bg-purple-700 text-white px-4 py-2.5 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-colors",children:[u?o.jsx(Ft,{className:"w-4 h-4 animate-spin"}):o.jsx(kR,{className:"w-4 h-4"}),"Save Assignment Rules"]})]})]}),o.jsxs("div",{className:"bg-cyan-50 border border-cyan-200 rounded-xl mb-6 overflow-hidden",children:[o.jsxs("button",{onClick:()=>N(!v),className:"w-full p-5 flex items-center justify-between text-left",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Gd,{className:"w-4 h-4 text-cyan-600"}),o.jsx("h3",{className:"text-sm font-bold text-cyan-800",children:"Lead Automation Rules"}),o.jsx("span",{className:"text-xs text-cyan-600 bg-cyan-100 px-2 py-0.5 rounded-full",children:"Per Source"})]}),v?o.jsx(ia,{className:"w-4 h-4 text-cyan-600"}):o.jsx(to,{className:"w-4 h-4 text-cyan-600"})]}),v&&o.jsxs("div",{className:"px-5 pb-5 space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Sa,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search sources...",value:E,onChange:F=>_(F.target.value),className:"w-full pl-9 pr-4 py-2 border rounded-lg text-sm"})]}),o.jsx("div",{className:"bg-white rounded-lg border overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-xs",children:[o.jsx("thead",{className:"bg-gray-50 border-b",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-600 min-w-[150px]",children:"Source"}),o.jsx("th",{className:"px-3 py-3 text-center font-semibold text-gray-600",children:o.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o.jsx(yo,{className:"w-4 h-4 text-blue-500"}),o.jsx("span",{children:"Call List"})]})}),o.jsx("th",{className:"px-3 py-3 text-center font-semibold text-gray-600",children:o.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o.jsx(go,{className:"w-4 h-4 text-amber-500"}),o.jsx("span",{children:"Notify"})]})}),o.jsx("th",{className:"px-3 py-3 text-center font-semibold text-gray-600",children:o.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o.jsx(Wd,{className:"w-4 h-4 text-green-500"}),o.jsx("span",{children:"Email"})]})}),o.jsx("th",{className:"px-3 py-3 text-center font-semibold text-gray-600",children:o.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o.jsx(Hl,{className:"w-4 h-4 text-purple-500"}),o.jsx("span",{children:"Text"})]})}),o.jsx("th",{className:"px-3 py-3 text-center font-semibold text-gray-600",children:o.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o.jsx(wC,{className:"w-4 h-4 text-indigo-500"}),o.jsx("span",{children:"AI Bot"})]})})]})}),o.jsxs("tbody",{className:"divide-y",children:[o.jsxs("tr",{className:"bg-blue-50/50",children:[o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 text-xs font-bold rounded",children:"DEFAULT"}),o.jsx("span",{className:"text-gray-400 text-[10px]",children:"All Sources"})]})}),["addToCallList","sendNotification","emailResponse","textAutoResponse","aiBot"].map(F=>o.jsx("td",{className:"px-3 py-3 text-center",children:o.jsx("button",{onClick:()=>Fe("_default",F),className:`w-10 h-5 rounded-full transition-colors relative ${ge("_default")[F]?"bg-blue-500":"bg-gray-300"}`,children:o.jsx("span",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform ${ge("_default")[F]?"left-5":"left-0.5"}`})})},F))]}),w.filter(F=>!E||F.name.toLowerCase().includes(E.toLowerCase())).map(F=>{const K=F.name.replace(/\s+/g,"_").toLowerCase();return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium text-gray-800",children:F.name}),F.isIntegration&&o.jsx("span",{className:"px-1.5 py-0.5 bg-purple-100 text-purple-600 text-[10px] rounded",children:"Integration"})]})}),["addToCallList","sendNotification","emailResponse","textAutoResponse","aiBot"].map(ce=>o.jsx("td",{className:"px-3 py-3 text-center",children:o.jsx("button",{onClick:()=>Fe(K,ce),className:`w-10 h-5 rounded-full transition-colors relative ${ge(K)[ce]?"bg-blue-500":"bg-gray-300"}`,children:o.jsx("span",{className:`absolute top-0.5 w-4 h-4 bg-white rounded-full shadow transition-transform ${ge(K)[ce]?"left-5":"left-0.5"}`})})},ce))]},F.id)})]})]})})}),o.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-gray-500",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(yo,{className:"w-3 h-3 text-blue-500"}),o.jsx("span",{children:"Call List - Auto-add to today's call list"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(go,{className:"w-3 h-3 text-amber-500"}),o.jsx("span",{children:"Notify - Send in-app/SMS notification"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Wd,{className:"w-3 h-3 text-green-500"}),o.jsx("span",{children:"Email - Auto-send welcome email"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Hl,{className:"w-3 h-3 text-purple-500"}),o.jsx("span",{children:"Text - Auto-send SMS response"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(wC,{className:"w-3 h-3 text-indigo-500"}),o.jsx("span",{children:"AI Bot - AI handles initial response"})]})]}),o.jsxs("button",{onClick:et,disabled:u,className:"w-full bg-cyan-600 hover:bg-cyan-700 text-white px-4 py-2.5 rounded-lg text-sm font-bold flex items-center justify-center gap-2 transition-colors",children:[u?o.jsx(Ft,{className:"w-4 h-4 animate-spin"}):o.jsx(Gd,{className:"w-4 h-4"}),"Save Automation Rules"]})]})]}),o.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-xl mb-6 overflow-hidden",children:[o.jsxs("button",{onClick:()=>P(!C),className:"w-full p-5 flex items-center justify-between text-left",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($m,{className:"w-4 h-4 text-emerald-600"}),o.jsx("h3",{className:"text-sm font-bold text-emerald-800",children:"Settings"}),o.jsx("span",{className:"text-xs text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded-full",children:"Event Types & System"})]}),C?o.jsx(ia,{className:"w-4 h-4 text-emerald-600"}):o.jsx(to,{className:"w-4 h-4 text-emerald-600"})]}),C&&o.jsxs("div",{className:"px-5 pb-5 space-y-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(Tr,{className:"w-4 h-4 text-emerald-600"}),o.jsx("h4",{className:"text-sm font-bold text-emerald-800",children:"Managers / Sales Team"})]}),o.jsxs("div",{className:"bg-white p-4 rounded-lg border text-sm text-gray-600",children:[o.jsxs("p",{children:["The sales team is now automatically managed based on the ",o.jsx("strong",{children:"Invited Users"}),'. To add or remove team members, use the "Invite Team Member" section at the top.']}),o.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.map(F=>o.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-xs border border-gray-200",children:F.username||F.name},F.id))})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(on,{className:"w-4 h-4 text-emerald-600"}),o.jsx("h4",{className:"text-sm font-bold text-emerald-800",children:"Event Types"})]}),o.jsxs("div",{className:"bg-white rounded-lg border p-4 space-y-2",children:[T.map(F=>o.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 rounded-lg",children:[W===F?o.jsx("input",{type:"text",defaultValue:F,autoFocus:!0,onBlur:K=>ve(F,K.target.value),onKeyDown:K=>{K.key==="Enter"&&ve(F,K.target.value),K.key==="Escape"&&H(null)},className:"flex-1 px-2 py-1 border rounded text-sm"}):o.jsx("span",{className:"text-sm text-gray-700",children:F}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{onClick:()=>H(F),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded",title:"Edit",children:o.jsx(rU,{className:"w-3.5 h-3.5"})}),o.jsx("button",{onClick:()=>J(F),className:"p-1.5 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:o.jsx(Ui,{className:"w-3.5 h-3.5"})})]})]},F)),o.jsxs("div",{className:"flex gap-2 mt-3",children:[o.jsx("input",{type:"text",placeholder:"New event type...",value:D,onChange:F=>B(F.target.value),onKeyDown:F=>F.key==="Enter"&&ye(),className:"flex-1 px-3 py-2 border rounded-lg text-sm"}),o.jsxs("button",{onClick:ye,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg text-sm font-medium flex items-center gap-1",children:[o.jsx(no,{className:"w-4 h-4"})," Add"]})]})]})]})]})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-5 mb-6",children:[o.jsxs("h3",{className:"text-sm font-bold text-blue-800 mb-2 flex items-center gap-2",children:[o.jsx(Om,{className:"w-4 h-4"})," Data Maintenance"]}),o.jsx("p",{className:"text-xs text-blue-600 mb-4",children:"Migrate existing leads to the new contacts system."}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:st,disabled:u,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 shadow-sm transition-colors",children:[u?o.jsx(Ft,{className:"w-4 h-4 animate-spin"}):o.jsx(vo,{className:"w-4 h-4"})," ","Migrate Leads to Contacts"]}),o.jsxs("button",{onClick:Tt,disabled:u,className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 shadow-sm transition-colors",children:[u?o.jsx(Ft,{className:"w-4 h-4 animate-spin"}):o.jsx(X_,{className:"w-4 h-4"})," ","Consolidate Sources from Leads"]})]})]}),o.jsx("div",{className:"bg-white border border-gray-200 rounded-xl overflow-hidden shadow-sm mb-6",children:o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"bg-gray-50 text-gray-500 font-medium border-b border-gray-200",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3",children:"Name"}),o.jsx("th",{className:"px-6 py-3",children:"Email"}),o.jsx("th",{className:"px-6 py-3",children:"Role"}),o.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:e.map(F=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-3 font-medium",children:F.username||F.name}),o.jsx("td",{className:"px-6 py-3 text-gray-500",children:F.email}),o.jsx("td",{className:"px-6 py-3",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${F.role==="Admin"?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:F.role})}),o.jsx("td",{className:"px-6 py-3 text-right flex justify-end gap-2",children:o.jsx("button",{onClick:()=>Pe(F.id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-md",title:"Revoke Access",children:o.jsx(Ui,{className:"w-4 h-4"})})})]},F.id))})]})}),o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-5",children:[o.jsxs("h3",{className:"text-sm font-bold text-red-800 mb-2 flex items-center gap-2",children:[o.jsx(ha,{className:"w-4 h-4"})," Danger Zone"]}),o.jsx("p",{className:"text-xs text-red-600 mb-4",children:"This will permanently delete ALL leads. Cannot be undone."}),o.jsxs("button",{onClick:Je,disabled:f,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 shadow-sm transition-colors",children:[f?o.jsx(Ft,{className:"w-4 h-4 animate-spin"}):o.jsx(Ui,{className:"w-4 h-4"})," ","Reset Database"]})]})]})]})})}const Cp={meta:"Meta Lead Gen",whatsapp:"WhatsApp Inbound"};function hOe({onClose:t}){const{t:e}=ti(),[n,r]=k.useState({fbAccessToken:"",fbPageId:"",waProvider:"twilio",waApiKey:"",waApiSecret:"",waApiEndpoint:"",waBusinessNumber:"",waDefaultMessage:"Assalam o Alaikum! Area 51 Banquet Hall mein inquiry ka shukriya.",autoGreetingEnabled:!1,autoGreetingMessage:`Assalam o Alaikum {{name}}! 

Area 51 Banquet Hall mein inquiry ka shukriya! Hamari team jaldi aap se rabta karegi.

Agar koi sawal ho toh is message ka jawab dein.

 Is number pe baat cheet service quality ke liye record ki jati hai.

Shukriya,
Area 51 Team`,geminiApiKey:"",invoicingApiKey:"",invoicingApiEndpoint:"",smsEnabled:!1,smsTwilioSid:"",smsTwilioToken:"",smsTwilioNumber:"",smsNotifyOnAssignment:!0,smsNotifyOnEscalation:!0,smsNotifyOnSiteVisit:!0,smsNotifyOnQuoteFollowUp:!0,browserNotificationsEnabled:!0,googleCalendarEnabled:!1,googleCalendarClientId:"",googleCalendarApiKey:"",googleCalendarAutoSync:!1,googleCalendarSyncSiteVisits:!0,googleCalendarSyncCalls:!0,googleCalendarSyncEvents:!0,googleCalendarSyncBookings:!0,googleCalendarSelectedId:"primary"}),[i,s]=k.useState(!1),[a,l]=k.useState(!1),[c,u]=k.useState([]),[d,f]=k.useState(!1),[h,m]=k.useState(!1),[y,g]=k.useState("meta");k.useEffect(()=>{(async()=>{const E=Yt(De,"artifacts",We,"public","data","app_settings","integrations"),_=await rf(E);_.exists()&&r(C=>({...C,..._.data()}))})()},[]);const x=async A=>{const E=pn(De,"artifacts",We,"public","data","lead_sources");return(await ds(E)).docs.map(P=>P.data().name).includes(A)?!1:(await Xp(E,{name:A,isIntegration:!0,createdAt:kl()}),!0)},w=async()=>{m(!0);const A=[];n.fbPageId&&n.fbAccessToken&&await x(Cp.meta)&&A.push(Cp.meta),n.waApiKey&&n.waBusinessNumber&&await x(Cp.whatsapp)&&A.push(Cp.whatsapp),await Xu(Yt(De,"artifacts",We,"public","data","app_settings","integrations"),n),m(!1),A.length>0?alert(`Integration Settings Saved!

Automatically added lead sources:
 ${A.join(`
 `)}`):alert("Integration Settings Saved!")};k.useEffect(()=>{(async()=>{if(n.googleCalendarClientId&&n.googleCalendarApiKey)try{await mN();const E=au();s(E),E&&(await b(),n.googleCalendarSelectedId&&M1(n.googleCalendarSelectedId))}catch{console.log("Google Calendar not connected")}})()},[n.googleCalendarClientId,n.googleCalendarApiKey]);const b=async()=>{f(!0);try{const A=await sOe();u(A)}catch(A){console.error("Failed to load calendars:",A),u([])}f(!1)},v=async()=>{if(!n.googleCalendarClientId||!n.googleCalendarApiKey){alert("Please enter your Google Calendar Client ID and API Key first, then save.");return}l(!0);try{await X5(n.googleCalendarClientId,n.googleCalendarApiKey),await xh(),s(!0),await b(),alert("Successfully connected to Google Calendar!")}catch(A){console.error("Google Calendar connection failed:",A),alert("Failed to connect to Google Calendar. Please check your credentials.")}l(!1)},N=()=>{iOe(),u([]),s(!1),alert("Disconnected from Google Calendar")},S=[{id:"meta",label:"Meta Leads",icon:SC},{id:"whatsapp",label:"WhatsApp",icon:dr},{id:"ai",label:"AI (Gemini)",icon:sr},{id:"invoicing",label:"Invoicing",icon:zd},{id:"notifications",label:"Alerts",icon:go},{id:"calendar",label:"Calendar",icon:on}];return o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-scale-in h-[90vh]",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-900 to-slate-900 text-white p-6 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx($m,{className:"w-6 h-6 text-cyan-400"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold",children:"Integrations Hub"}),o.jsx("p",{className:"text-slate-400 text-xs",children:"Connect External Platforms"})]})]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full",children:o.jsx(Dt,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"flex border-b bg-gray-50",children:S.map(A=>o.jsxs("button",{onClick:()=>g(A.id),className:`flex-1 px-4 py-3 text-sm font-medium flex items-center justify-center gap-2 border-b-2 transition-colors ${y===A.id?"border-blue-600 text-blue-600 bg-white":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[o.jsx(A.icon,{className:"w-4 h-4"}),A.label]},A.id))}),o.jsxs("div",{className:"p-6 flex-1 overflow-y-auto bg-slate-50",children:[y==="meta"&&o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-100 pb-4",children:[o.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:o.jsx(SC,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900",children:"Meta Lead Ads Integration"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Auto-pull leads from Facebook/Instagram"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Facebook Page ID"}),o.jsx("input",{className:"w-full p-3 border rounded-lg text-sm outline-none focus:border-blue-400",value:n.fbPageId,onChange:A=>r({...n,fbPageId:A.target.value}),placeholder:"123456789"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Page Access Token"}),o.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-blue-400",value:n.fbAccessToken,onChange:A=>r({...n,fbAccessToken:A.target.value}),placeholder:"EAAxxxxxxx..."}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Get from Facebook Business Settings  System Users"})]})]})]})}),y==="whatsapp"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-100 pb-4",children:[o.jsx("div",{className:"p-2 bg-green-100 text-green-600 rounded-lg",children:o.jsx(dr,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900",children:"WhatsApp Business API"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Send/receive messages through CRM"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Provider"}),o.jsxs("select",{className:"w-full p-3 border rounded-lg text-sm outline-none focus:border-green-400",value:n.waProvider,onChange:A=>r({...n,waProvider:A.target.value}),children:[o.jsx("option",{value:"twilio",children:"Twilio"}),o.jsx("option",{value:"wati",children:"Wati"}),o.jsx("option",{value:"aisensy",children:"Aisensy"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"API Key / Account SID"}),o.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-green-400",value:n.waApiKey,onChange:A=>r({...n,waApiKey:A.target.value})})]}),n.waProvider==="twilio"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Auth Token (Twilio)"}),o.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-green-400",value:n.waApiSecret,onChange:A=>r({...n,waApiSecret:A.target.value})})]}),n.waProvider==="wati"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"API Endpoint (Wati)"}),o.jsx("input",{className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-green-400",value:n.waApiEndpoint,onChange:A=>r({...n,waApiEndpoint:A.target.value}),placeholder:"https://live-server-xxxx.wati.io"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Business WhatsApp Number"}),o.jsx("input",{className:"w-full p-3 border rounded-lg text-sm outline-none focus:border-green-400",value:n.waBusinessNumber,onChange:A=>r({...n,waBusinessNumber:A.target.value}),placeholder:"923001234567"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Default Greeting Message (Manual)"}),o.jsx("textarea",{className:"w-full p-3 border rounded-lg text-sm outline-none h-24 resize-none focus:border-green-400",value:n.waDefaultMessage,onChange:A=>r({...n,waDefaultMessage:A.target.value})})]})]})]}),o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-100 pb-4",children:[o.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:o.jsx(sr,{className:"w-6 h-6"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-gray-900",children:e("autoGreetingTitle")}),o.jsx("p",{className:"text-xs text-gray-500",children:"Automatically send WhatsApp greeting to new leads"})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n.autoGreetingEnabled,onChange:A=>r({...n,autoGreetingEnabled:A.target.checked})}),o.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),n.autoGreetingEnabled&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Quick Templates"}),o.jsxs("div",{className:"flex gap-2 flex-wrap",children:[o.jsx("button",{type:"button",onClick:()=>r({...n,autoGreetingMessage:`Hello {{name}}! 

Thank you for your interest in Area 51 Banquet Hall. We're excited to help you plan your special event!

One of our team members will contact you shortly.

 Conversations are recorded for quality purposes.

Best regards,
Area 51 Team`}),className:"px-3 py-1.5 text-xs bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors",children:" English"}),o.jsx("button",{type:"button",onClick:()=>r({...n,autoGreetingMessage:`Assalam o Alaikum {{name}}! 

Area 51 Banquet Hall mein inquiry ka shukriya! Hamari team jaldi aap se rabta karegi.

Agar koi sawal ho toh is message ka jawab dein.

 Is number pe baat cheet service quality ke liye record ki jati hai.

Shukriya,
Area 51 Team`}),className:"px-3 py-1.5 text-xs bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors",children:" Urdu"}),o.jsx("button",{type:"button",onClick:()=>r({...n,autoGreetingMessage:`Assalam o Alaikum {{name}}! 

Thank you for contacting Area 51 Banquet Hall! Our team will reach out to you shortly.

Feel free to reply if you have any questions.

 Conversations recorded for quality.

Regards,
Area 51 Team`}),className:"px-3 py-1.5 text-xs bg-purple-50 text-purple-700 rounded-lg hover:bg-purple-100 transition-colors",children:" Mixed"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Auto Greeting Message"}),o.jsx("textarea",{className:"w-full p-3 border rounded-lg text-sm outline-none h-32 resize-none focus:border-blue-400",value:n.autoGreetingMessage,onChange:A=>r({...n,autoGreetingMessage:A.target.value}),placeholder:"Enter the automatic greeting message..."}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Use ",o.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"{{name}}"})," to insert the lead's first name"]})]}),o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-xs text-blue-700",children:[o.jsx("strong",{children:"How it works:"})," When a new lead is created (from Meta, WhatsApp, or manual entry), this greeting will be automatically sent via WhatsApp within 1 minute."]})})]})]})]}),y==="ai"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-100 pb-4",children:[o.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-lg",children:o.jsx(sr,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900",children:"Google Gemini AI"}),o.jsx("p",{className:"text-xs text-gray-500",children:"AI-powered responses & assistant"})]})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Gemini API Key"}),o.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-purple-400",value:n.geminiApiKey,onChange:A=>r({...n,geminiApiKey:A.target.value}),placeholder:"AIzaSy..."}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Get from Google AI Studio  API Keys"})]})})]}),o.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-xl p-4",children:[o.jsx("h4",{className:"font-bold text-purple-800 mb-2",children:"AI Features Enabled:"}),o.jsxs("ul",{className:"text-sm text-purple-700 space-y-1",children:[o.jsx("li",{children:" Round-robin lead assignment to employees"}),o.jsx("li",{children:" Employee Urdu assistant (query leads, availability)"}),o.jsx("li",{children:" Owner dashboard AI queries"}),o.jsx("li",{children:" Closing strategy & email generation"}),o.jsx("li",{children:" Role-based data access control"})]}),o.jsxs("p",{className:"text-xs text-purple-600 mt-3",children:[o.jsx("strong",{children:"Note:"})," Auto greeting is configured in the WhatsApp tab"]})]})]}),y==="invoicing"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-100 pb-4",children:[o.jsx("div",{className:"p-2 bg-amber-100 text-amber-600 rounded-lg",children:o.jsx(zd,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900",children:"Invoicing Software"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Push bookings & pull payment status"})]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Invoicing API Endpoint"}),o.jsx("input",{className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-amber-400",value:n.invoicingApiEndpoint,onChange:A=>r({...n,invoicingApiEndpoint:A.target.value}),placeholder:"https://your-invoicing-software.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"API Key"}),o.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-amber-400",value:n.invoicingApiKey,onChange:A=>r({...n,invoicingApiKey:A.target.value})})]})]})]}),o.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[o.jsx("h4",{className:"font-bold text-amber-800 mb-2",children:"Integration Behavior:"}),o.jsxs("ul",{className:"text-sm text-amber-700 space-y-1",children:[o.jsx("li",{children:' Auto-push booking when lead reaches "Booked" stage'}),o.jsx("li",{children:" Sync payment milestones (Advance, Mid, Final)"}),o.jsx("li",{children:" Show payment status in Finance dashboard"}),o.jsx("li",{children:" Alert on overdue payments"})]})]})]}),y==="notifications"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-100 pb-4",children:[o.jsx("div",{className:"p-2 bg-indigo-100 text-indigo-600 rounded-lg",children:o.jsx(go,{className:"w-6 h-6"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-gray-900",children:"Browser Notifications"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Get instant alerts in your browser"})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n.browserNotificationsEnabled,onChange:A=>r({...n,browserNotificationsEnabled:A.target.checked})}),o.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]}),o.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-xs text-indigo-700",children:[o.jsx("strong",{children:"Note:"})," You'll need to allow notifications when prompted by your browser. Works best on desktop browsers."]})})]}),o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-100 pb-4",children:[o.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-600 rounded-lg",children:o.jsx(cU,{className:"w-6 h-6"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-gray-900",children:"SMS Notifications (Twilio)"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Send SMS alerts to employees"})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n.smsEnabled,onChange:A=>r({...n,smsEnabled:A.target.checked})}),o.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-600"})]})]}),n.smsEnabled&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Twilio Account SID"}),o.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-emerald-400",value:n.smsTwilioSid,onChange:A=>r({...n,smsTwilioSid:A.target.value}),placeholder:"ACxxxxxxxxxxxxxxx"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Twilio Auth Token"}),o.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-emerald-400",value:n.smsTwilioToken,onChange:A=>r({...n,smsTwilioToken:A.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Twilio Phone Number (From)"}),o.jsx("input",{className:"w-full p-3 border rounded-lg text-sm outline-none focus:border-emerald-400",value:n.smsTwilioNumber,onChange:A=>r({...n,smsTwilioNumber:A.target.value}),placeholder:"+1234567890"}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Your Twilio phone number or Messaging Service SID"})]}),o.jsxs("div",{className:"border-t border-gray-100 pt-4 mt-4",children:[o.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-3",children:"Send SMS For:"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 text-emerald-600 rounded",checked:n.smsNotifyOnAssignment,onChange:A=>r({...n,smsNotifyOnAssignment:A.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700",children:"New lead assignments"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 text-emerald-600 rounded",checked:n.smsNotifyOnEscalation,onChange:A=>r({...n,smsNotifyOnEscalation:A.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700",children:"Lead escalations (48h+ no contact)"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 text-emerald-600 rounded",checked:n.smsNotifyOnSiteVisit,onChange:A=>r({...n,smsNotifyOnSiteVisit:A.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700",children:"Site visit reminders"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 text-emerald-600 rounded",checked:n.smsNotifyOnQuoteFollowUp,onChange:A=>r({...n,smsNotifyOnQuoteFollowUp:A.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700",children:"Quote follow-up (3+ days in Quoted stage)"})]})]})]})]})]}),o.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-xl p-4",children:[o.jsx("h4",{className:"font-bold text-emerald-800 mb-2",children:"How SMS Notifications Work:"}),o.jsxs("ul",{className:"text-sm text-emerald-700 space-y-1",children:[o.jsx("li",{children:" Employees receive SMS when leads are assigned"}),o.jsx("li",{children:" Escalation alerts sent for stale leads (48h+)"}),o.jsx("li",{children:" Site visit reminders sent day before"}),o.jsx("li",{children:" Quote follow-up reminders after 3 days"}),o.jsx("li",{children:" Uses employee phone from Admin Panel"})]}),o.jsxs("p",{className:"text-xs text-emerald-600 mt-3",children:[o.jsx("strong",{children:"Cost:"})," ~PKR 3-5 per SMS via Twilio"]})]})]}),y==="calendar"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4 border-b border-gray-100 pb-4",children:[o.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:o.jsx(on,{className:"w-6 h-6"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-gray-900",children:"Google Calendar Integration"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Sync lead dates to Google Calendar"})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n.googleCalendarEnabled,onChange:A=>r({...n,googleCalendarEnabled:A.target.checked})}),o.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),n.googleCalendarEnabled&&o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:o.jsxs("p",{className:"text-xs text-blue-700",children:[o.jsx("strong",{children:"Quick Add:"}),' "Add to Calendar" buttons will appear on lead details, call list, and booking views - no API setup needed!']})}),o.jsxs("div",{className:"border-t border-gray-100 pt-4 mt-4",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx(vo,{className:"w-4 h-4 text-gray-500"}),o.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase",children:"Auto-Sync (Optional - Requires Google Cloud Setup)"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Google Cloud Client ID"}),o.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-blue-400",value:n.googleCalendarClientId,onChange:A=>r({...n,googleCalendarClientId:A.target.value}),placeholder:"xxxx.apps.googleusercontent.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Google Calendar API Key"}),o.jsx("input",{type:"password",className:"w-full p-3 border rounded-lg text-sm outline-none font-mono focus:border-blue-400",value:n.googleCalendarApiKey,onChange:A=>r({...n,googleCalendarApiKey:A.target.value}),placeholder:"AIzaSy..."}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Get from"," ",o.jsxs("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline inline-flex items-center gap-1",children:["Google Cloud Console ",o.jsx(XB,{className:"w-3 h-3"})]})]})]}),o.jsx("div",{className:"flex items-center gap-3",children:i?o.jsxs(o.Fragment,{children:[o.jsxs("span",{className:"flex items-center gap-2 text-sm text-green-600",children:[o.jsx(H_,{className:"w-4 h-4"})," Connected"]}),o.jsx("button",{type:"button",onClick:N,className:"px-3 py-1.5 text-xs bg-red-50 text-red-700 rounded-lg hover:bg-red-100 transition-colors",children:"Disconnect"})]}):o.jsx("button",{type:"button",onClick:v,disabled:a||!n.googleCalendarClientId||!n.googleCalendarApiKey,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:a?o.jsxs(o.Fragment,{children:[o.jsx(Ft,{className:"w-4 h-4 animate-spin"})," Connecting..."]}):o.jsxs(o.Fragment,{children:[o.jsx(on,{className:"w-4 h-4"})," Connect Google Calendar"]})})}),i&&o.jsxs("div",{className:"border-t border-gray-100 pt-4 mt-4",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Select Calendar"}),d?o.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[o.jsx(Ft,{className:"w-4 h-4 animate-spin"})," Loading calendars..."]}):o.jsxs(o.Fragment,{children:[o.jsx("select",{className:"w-full p-3 border rounded-lg text-sm outline-none focus:border-blue-400",value:n.googleCalendarSelectedId||"primary",onChange:A=>{r({...n,googleCalendarSelectedId:A.target.value}),M1(A.target.value)},children:c.length===0?o.jsx("option",{value:"primary",children:"Primary Calendar"}):c.map(A=>o.jsxs("option",{value:A.id,children:[A.name," ",A.primary?"(Primary)":""]},A.id))}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"All CRM events will be synced to this calendar"}),c.length===0&&o.jsxs("button",{type:"button",onClick:b,className:"mt-2 text-xs text-blue-600 hover:underline flex items-center gap-1",children:[o.jsx(vo,{className:"w-3 h-3"})," Refresh calendar list"]})]})]}),i&&o.jsxs("div",{className:"border-t border-gray-100 pt-4 mt-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Auto-Sync Events"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Automatically create/update calendar events"})]}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"sr-only peer",checked:n.googleCalendarAutoSync,onChange:A=>r({...n,googleCalendarAutoSync:A.target.checked})}),o.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),n.googleCalendarAutoSync&&o.jsxs("div",{className:"space-y-2 ml-1",children:[o.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Sync These Events:"}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 rounded",checked:n.googleCalendarSyncSiteVisits,onChange:A=>r({...n,googleCalendarSyncSiteVisits:A.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700",children:"Site Visits"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 rounded",checked:n.googleCalendarSyncCalls,onChange:A=>r({...n,googleCalendarSyncCalls:A.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700",children:"Scheduled Calls"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 rounded",checked:n.googleCalendarSyncEvents,onChange:A=>r({...n,googleCalendarSyncEvents:A.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700",children:"Event Dates"})]}),o.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[o.jsx("input",{type:"checkbox",className:"w-4 h-4 text-blue-600 rounded",checked:n.googleCalendarSyncBookings,onChange:A=>r({...n,googleCalendarSyncBookings:A.target.checked})}),o.jsx("span",{className:"text-sm text-gray-700",children:"Final Bookings"})]})]})]})]})]})]})]}),o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[o.jsx("h4",{className:"font-bold text-blue-800 mb-2",children:"How Google Calendar Works:"}),o.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Quick Add buttons"})," - Add any date to calendar with one click"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Site Visits"})," - Schedule venue visits with client details"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Scheduled Calls"})," - Never miss a follow-up call"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Event Dates"})," - Track client event dates"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"Final Bookings"})," - Confirmed booking dates"]})]}),o.jsxs("p",{className:"text-xs text-blue-600 mt-3",children:[o.jsx("strong",{children:"Tip:"})," Quick Add works without any API setup. Auto-sync requires Google Cloud credentials."]})]})]})]}),o.jsx("div",{className:"p-4 bg-white border-t border-gray-200 flex justify-end",children:o.jsxs("button",{onClick:w,disabled:h,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl flex items-center gap-2 disabled:opacity-70",children:[h?o.jsx(Ft,{className:"w-4 h-4 animate-spin"}):o.jsx(Q_,{className:"w-4 h-4"})," ","Save Configuration"]})})]})})}function L1({onClose:t,onSave:e,initialData:n}){const[r,i]=k.useState(n||{firstName:"",lastName:"",phone:"",email:"",notes:""}),[s,a]=k.useState(""),l=async()=>{if(!r.firstName){a("First Name is required");return}const c=ZS(r.phone);if(!c){a("Invalid Phone. Use 03XXXXXXXXX format.");return}e({...r,phone:c})};return o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden animate-scale-in",children:[o.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b flex justify-between items-center",children:[o.jsx("h3",{className:"font-bold text-gray-800",children:n?"Edit Contact":"Add New Contact"}),o.jsx("button",{onClick:t,children:o.jsx(Dt,{className:"w-5 h-5 text-gray-500"})})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"First Name"}),o.jsx("input",{className:"w-full p-2 border rounded-lg mt-1",value:r.firstName,onChange:c=>i({...r,firstName:c.target.value}),placeholder:"Ali"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Last Name"}),o.jsx("input",{className:"w-full p-2 border rounded-lg mt-1",value:r.lastName,onChange:c=>i({...r,lastName:c.target.value}),placeholder:"Khan"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Phone (Pakistan)"}),o.jsx("input",{className:"w-full p-2 border rounded-lg mt-1",value:r.phone,onChange:c=>i({...r,phone:c.target.value}),placeholder:"03001234567"}),o.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"Format: 03XXXXXXXXX (11 Digits)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Email (Optional)"}),o.jsx("input",{className:"w-full p-2 border rounded-lg mt-1",type:"email",value:r.email,onChange:c=>i({...r,email:c.target.value}),placeholder:"ali@example.com"})]}),s&&o.jsx("p",{className:"text-red-500 text-xs font-bold",children:s})]}),o.jsxs("div",{className:"p-4 bg-gray-50 border-t flex justify-end gap-2",children:[o.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg font-medium",children:"Cancel"}),o.jsx("button",{onClick:l,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold",children:"Save Contact"})]})]})})}function pOe({onClose:t,onSave:e,managers:n,contacts:r,onAddContact:i,sources:s,eventTypes:a}){const[l,c]=k.useState(1),[u,d]=k.useState(null),[f,h]=k.useState(""),[m,y]=k.useState(!1),[g,x]=k.useState({manager:"Unassigned",stage:"New",quotationAmount:"",clientBudget:"",eventType:"",eventDate:"",inquiryDate:new Date().toISOString().split("T")[0],notes:"",source:""}),w=r.filter(S=>S.firstName.toLowerCase().includes(f.toLowerCase())||S.phone&&S.phone.includes(f)).slice(0,5),b=S=>{d(S),c(2)},v=async S=>{const A=await i(S);A&&(d(A),y(!1),c(2))},N=()=>{if(!u)return alert("Contact is required");if(!g.clientBudget||g.clientBudget==="")return alert("Client Budget is required");e({...g,contactId:u.id,clientName:`${u.firstName} ${u.lastName||""}`.trim(),phone:u.phone,quotationAmount:Number(g.quotationAmount)||0,clientBudget:Number(g.clientBudget)}),t()};return o.jsxs("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:[m&&o.jsx(L1,{onClose:()=>y(!1),onSave:v}),o.jsxs("div",{className:"bg-white w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden animate-scale-in",children:[o.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b flex justify-between items-center",children:[o.jsx("h3",{className:"font-bold text-gray-800",children:l===1?"Step 1: Select Contact":"Step 2: Lead Details"}),o.jsx("button",{onClick:t,children:o.jsx(Dt,{className:"w-5 h-5 text-gray-500"})})]}),o.jsx("div",{className:"p-6",children:l===1?o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"Every lead must be linked to a contact. Search for an existing contact or create a new one."}),o.jsxs("div",{className:"relative",children:[o.jsx(Sa,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),o.jsx("input",{className:"w-full pl-10 p-3 border rounded-xl bg-gray-50 outline-none",placeholder:"Search by name or 03...",value:f,onChange:S=>h(S.target.value),autoFocus:!0})]}),o.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[w.map(S=>o.jsxs("div",{onClick:()=>b(S),className:"flex items-center justify-between p-3 hover:bg-blue-50 rounded-lg cursor-pointer border border-transparent hover:border-blue-100 transition-all",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold text-xs",children:S.firstName[0]}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-bold text-gray-800 text-sm",children:[S.firstName," ",S.lastName]}),o.jsx("p",{className:"text-xs text-gray-500",children:S.phone})]})]}),o.jsx(pa,{className:"w-4 h-4 text-gray-400"})]},S.id)),w.length===0&&f&&o.jsx("p",{className:"text-center text-sm text-gray-400 py-2",children:"No contacts found."})]}),o.jsxs("button",{onClick:()=>y(!0),className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold flex items-center justify-center gap-2",children:[o.jsx(no,{className:"w-4 h-4"})," Create New Contact"]})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(hi,{className:"w-4 h-4 text-blue-600"}),o.jsxs("span",{className:"font-bold text-blue-800 text-sm",children:[u.firstName," ",u.lastName]})]}),o.jsx("button",{onClick:()=>c(1),className:"text-xs text-blue-600 underline",children:"Change"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"text-xs font-bold text-gray-500 uppercase",children:["Client Budget ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"number",className:"w-full p-2 border rounded-lg mt-1",value:g.clientBudget,onChange:S=>x({...g,clientBudget:S.target.value}),placeholder:"PKR",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Quotation Amount"}),o.jsx("input",{type:"number",className:"w-full p-2 border rounded-lg mt-1",value:g.quotationAmount,onChange:S=>x({...g,quotationAmount:S.target.value}),placeholder:"PKR (based on budget)"})]})]}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Stage"}),o.jsx("select",{className:"w-full p-2 border rounded-lg mt-1",value:g.stage,onChange:S=>x({...g,stage:S.target.value}),children:la.map(S=>o.jsx("option",{value:S,children:S},S))})]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Manager"}),o.jsx("select",{className:"w-full p-2 border rounded-lg mt-1",value:g.manager,onChange:S=>x({...g,manager:S.target.value}),children:[...new Set(n||eA)].map(S=>o.jsx("option",{value:S,children:S},S))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Source"}),o.jsxs("select",{className:"w-full p-2 border rounded-lg mt-1",value:g.source,onChange:S=>x({...g,source:S.target.value}),children:[o.jsx("option",{value:"",children:"Select Source"}),(s||[]).map(S=>o.jsx("option",{value:S.name,children:S.name},S.id))]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Event Date"}),o.jsx("input",{type:"date",className:"w-full p-2 border rounded-lg mt-1",value:g.eventDate,onChange:S=>x({...g,eventDate:S.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Inquiry Date"}),o.jsx("input",{type:"date",className:"w-full p-2 border rounded-lg mt-1",value:g.inquiryDate,onChange:S=>x({...g,inquiryDate:S.target.value})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Event Type"}),o.jsxs("select",{className:"w-full p-2 border rounded-lg mt-1",value:g.eventType,onChange:S=>x({...g,eventType:S.target.value}),children:[o.jsx("option",{value:"",children:"Select Event Type"}),[...new Set(a||of)].map(S=>o.jsx("option",{value:S,children:S},S))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Notes"}),o.jsx("textarea",{className:"w-full p-2 border rounded-lg mt-1 h-20",value:g.notes,onChange:S=>x({...g,notes:S.target.value})})]})]})}),o.jsxs("div",{className:"p-4 bg-gray-50 border-t flex justify-end gap-2",children:[l===2&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>c(1),className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg font-medium",children:"Back"}),o.jsx("button",{onClick:N,className:"px-6 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-bold",children:"Create Lead"})]}),l===1&&o.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-500 hover:bg-gray-100 rounded-lg font-medium",children:"Cancel"})]})]})]})}const Vu=t=>t?t>=1e6?`Rs ${(t/1e6).toFixed(1)}M`:t>=1e3?`Rs ${(t/1e3).toFixed(0)}k`:`Rs ${t}`:"Rs 0",_x=t=>!t||!isFinite(t)?"0%":`${t.toFixed(1)}%`;function mOe({source:t,leads:e,onClose:n,onSelectLead:r}){const[i,s]=k.useState("campaigns"),[a,l]=k.useState(null),[c,u]=k.useState(""),[d,f]=k.useState(new Set),h=k.useMemo(()=>e.filter(v=>v.source===t.name),[e,t.name]),m=k.useMemo(()=>{const v=h.length,N=h.filter(C=>["Booked","Won","Completed"].includes(C.stage)||["Booked","Won","Completed"].includes(C.status)),S=N.length,A=N.reduce((C,P)=>{const T=P.finalAmount||P.amount||0;return C+Number(T)},0),E=v>0?S/v*100:0,_=S>0?A/S:0;return{total:v,booked:S,totalRevenue:A,conversionRate:E,avgDealSize:_}},[h]),y=k.useMemo(()=>{const v={};return h.forEach(N=>{var A,E,_,C;const S=((A=N.meta)==null?void 0:A.campaign_name)||"Unknown Campaign";v[S]||(v[S]={name:S,leads:[],booked:0,totalRevenue:0,platforms:new Set,adSets:new Set,ads:new Set}),v[S].leads.push(N),(["Booked","Won","Completed"].includes(N.stage)||["Booked","Won","Completed"].includes(N.status))&&(v[S].booked++,v[S].totalRevenue+=N.finalAmount||N.amount||0),(E=N.meta)!=null&&E.platform&&v[S].platforms.add(N.meta.platform),(_=N.meta)!=null&&_.adset_name&&v[S].adSets.add(N.meta.adset_name),(C=N.meta)!=null&&C.ad_name&&v[S].ads.add(N.meta.ad_name)}),Object.values(v).map(N=>({...N,count:N.leads.length,conversionRate:N.leads.length>0?N.booked/N.leads.length*100:0,avgDealSize:N.booked>0?N.totalRevenue/N.booked:0,platforms:Array.from(N.platforms),adSets:Array.from(N.adSets),ads:Array.from(N.ads)})).sort((N,S)=>S.count-N.count)},[h]),g=k.useMemo(()=>{const v={};return h.forEach(N=>{var A;const S=((A=N.meta)==null?void 0:A.city)||"Unknown";v[S]||(v[S]={name:S,leads:[],booked:0,totalRevenue:0}),v[S].leads.push(N),(["Booked","Won","Completed"].includes(N.stage)||["Booked","Won","Completed"].includes(N.status))&&(v[S].booked++,v[S].totalRevenue+=N.finalAmount||N.amount||0)}),Object.values(v).map(N=>({...N,count:N.leads.length,conversionRate:N.leads.length>0?N.booked/N.leads.length*100:0})).sort((N,S)=>S.count-N.count)},[h]),x=k.useMemo(()=>{let v=h;if(a&&(v=v.filter(N=>{var S;return(((S=N.meta)==null?void 0:S.campaign_name)||"Unknown Campaign")===a})),c){const N=c.toLowerCase();v=v.filter(S=>{var A,E,_;return((A=S.clientName)==null?void 0:A.toLowerCase().includes(N))||((E=S.phone)==null?void 0:E.includes(N))||((_=S.email)==null?void 0:_.toLowerCase().includes(N))})}return v},[h,a,c]),w=v=>{f(N=>{const S=new Set(N);return S.has(v)?S.delete(v):S.add(v),S})},b=t.name==="Meta Lead Gen";return o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:n,children:o.jsxs("div",{className:"bg-white w-full max-w-5xl h-[90vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-scale-in",onClick:v=>v.stopPropagation(),children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[t.isIntegration&&o.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:o.jsx(Gd,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-2xl font-bold",children:t.name}),o.jsxs("p",{className:"text-blue-100 text-sm mt-1",children:[m.total," leads  ",_x(m.conversionRate)," conversion"]})]})]}),o.jsx("button",{onClick:n,className:"p-2 hover:bg-white/20 rounded-full transition-colors",children:o.jsx(Dt,{className:"w-6 h-6"})})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 bg-slate-50 border-b",children:[o.jsxs("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-100 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-blue-600 text-xs mb-1 font-semibold uppercase",children:[o.jsx(Tr,{className:"w-4 h-4"})," Total Leads"]}),o.jsx("div",{className:"text-2xl font-bold text-blue-900",children:m.total})]}),o.jsxs("div",{className:"bg-emerald-50 p-4 rounded-xl border border-emerald-100 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 text-xs mb-1 font-semibold uppercase",children:[o.jsx(Kl,{className:"w-4 h-4"})," Booked Deals"]}),o.jsx("div",{className:"text-2xl font-bold text-emerald-900",children:m.booked})]}),o.jsxs("div",{className:"bg-violet-50 p-4 rounded-xl border border-violet-100 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-violet-600 text-xs mb-1 font-semibold uppercase",children:[o.jsx(Ro,{className:"w-4 h-4"})," Total Revenue"]}),o.jsx("div",{className:"text-xl md:text-2xl font-bold text-violet-900 truncate",title:Vu(m.totalRevenue),children:new Intl.NumberFormat("en-PK",{style:"currency",currency:"PKR",maximumSignificantDigits:3}).format(m.totalRevenue)})]}),o.jsxs("div",{className:"bg-amber-50 p-4 rounded-xl border border-amber-100 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2 text-amber-600 text-xs mb-1 font-semibold uppercase",children:[o.jsx(Kl,{className:"w-4 h-4"})," Avg Deal Size"]}),o.jsx("div",{className:"text-xl md:text-2xl font-bold text-amber-900 truncate",title:Vu(m.avgDealSize),children:new Intl.NumberFormat("en-PK",{style:"currency",currency:"PKR",maximumSignificantDigits:3}).format(m.avgDealSize)})]})]}),b&&o.jsxs("div",{className:"flex gap-2 px-4 pt-4 bg-white border-b",children:[o.jsx("button",{onClick:()=>s("campaigns"),className:`px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${i==="campaigns"?"bg-blue-50 text-blue-700 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Campaigns"}),o.jsx("button",{onClick:()=>s("locations"),className:`px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${i==="locations"?"bg-blue-50 text-blue-700 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Locations"}),o.jsx("button",{onClick:()=>s("leads"),className:`px-4 py-2 rounded-t-lg text-sm font-medium transition-colors ${i==="leads"?"bg-blue-50 text-blue-700 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"All Leads"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[i==="campaigns"&&b&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-3",children:"Campaign Performance"}),y.length===0?o.jsxs("div",{className:"text-center py-12 text-gray-400",children:[o.jsx(qd,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"No campaign data available"}),o.jsx("p",{className:"text-xs mt-1",children:"Leads imported before the update won't have campaign info"})]}):o.jsx("div",{className:"bg-white rounded-xl border overflow-hidden",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"bg-slate-50 text-left text-xs font-semibold text-gray-500 uppercase",children:[o.jsx("th",{className:"px-4 py-3",children:"Campaign"}),o.jsx("th",{className:"px-4 py-3 text-center",children:"Leads"}),o.jsx("th",{className:"px-4 py-3 text-center",children:"Booked"}),o.jsx("th",{className:"px-4 py-3 text-center",children:"Conv %"}),o.jsx("th",{className:"px-4 py-3 text-right",children:"Revenue"}),o.jsx("th",{className:"px-4 py-3 text-right",children:"Avg Deal"}),o.jsx("th",{className:"px-4 py-3 w-10"})]})}),o.jsx("tbody",{className:"divide-y",children:y.map(v=>o.jsxs(L.Fragment,{children:[o.jsxs("tr",{className:"hover:bg-slate-50 cursor-pointer transition-colors",onClick:()=>{l(v.name),s("leads")},children:[o.jsxs("td",{className:"px-4 py-3",children:[o.jsx("div",{className:"font-medium text-gray-900",children:v.name}),o.jsx("div",{className:"text-xs text-gray-400 mt-0.5",children:v.platforms.join(", ")})]}),o.jsx("td",{className:"px-4 py-3 text-center font-medium",children:v.count}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:v.booked})}),o.jsx("td",{className:"px-4 py-3 text-center",children:o.jsx("span",{className:`font-medium ${v.conversionRate>=5?"text-green-600":v.conversionRate>=2?"text-yellow-600":"text-red-500"}`,children:_x(v.conversionRate)})}),o.jsx("td",{className:"px-4 py-3 text-right font-medium text-gray-900",children:Vu(v.totalRevenue)}),o.jsx("td",{className:"px-4 py-3 text-right text-gray-600",children:Vu(v.avgDealSize)}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("button",{onClick:N=>{N.stopPropagation(),w(v.name)},className:"p-1 hover:bg-gray-100 rounded",children:d.has(v.name)?o.jsx(ia,{className:"w-4 h-4 text-gray-400"}):o.jsx(to,{className:"w-4 h-4 text-gray-400"})})})]}),d.has(v.name)&&o.jsx("tr",{className:"bg-slate-50",children:o.jsx("td",{colSpan:7,className:"px-4 py-3",children:o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Ad Sets:"}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:v.adSets.length>0?v.adSets.map(N=>o.jsx("span",{className:"px-2 py-0.5 bg-blue-100 text-blue-700 rounded text-xs",children:N},N)):o.jsx("span",{className:"text-gray-400 text-xs",children:"No data"})})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Ads:"}),o.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:v.ads.length>0?v.ads.map(N=>o.jsx("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 rounded text-xs",children:N},N)):o.jsx("span",{className:"text-gray-400 text-xs",children:"No data"})})]})]})})})]},v.name))})]})})]}),i==="locations"&&b&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-3",children:"Location Breakdown"}),g.filter(v=>v.name!=="Unknown").length===0?o.jsxs("div",{className:"text-center py-12 text-gray-400",children:[o.jsx(Tb,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"No location data available"}),o.jsx("p",{className:"text-xs mt-1",children:"Configure city field in your Meta lead form"})]}):o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:g.map(v=>o.jsxs("div",{className:"bg-white p-4 rounded-xl border hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{},children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(Tb,{className:"w-4 h-4 text-gray-400"}),o.jsx("span",{className:"font-medium text-gray-900",children:v.name})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-bold text-gray-900",children:v.count}),o.jsx("div",{className:"text-xs text-gray-500",children:"Leads"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-lg font-bold text-green-600",children:v.booked}),o.jsx("div",{className:"text-xs text-gray-500",children:"Booked"})]}),o.jsxs("div",{children:[o.jsx("div",{className:`text-lg font-bold ${v.conversionRate>=5?"text-green-600":v.conversionRate>=2?"text-yellow-600":"text-red-500"}`,children:_x(v.conversionRate)}),o.jsx("div",{className:"text-xs text-gray-500",children:"Conv"})]})]})]},v.name))})]}),(i==="leads"||!b)&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex gap-3 items-center",children:[b&&a&&o.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 text-blue-700 px-3 py-1.5 rounded-lg text-sm",children:[o.jsx(qd,{className:"w-4 h-4"}),a,o.jsx("button",{onClick:()=>l(null),className:"ml-1 hover:bg-blue-100 rounded p-0.5",children:o.jsx(Dt,{className:"w-3 h-3"})})]}),o.jsxs("div",{className:"flex-1 relative",children:[o.jsx(Sa,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search leads...",value:c,onChange:v=>u(v.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg text-sm"})]}),o.jsxs("div",{className:"text-sm text-gray-500",children:[x.length," leads"]})]}),o.jsx("div",{className:"space-y-2",children:x.length===0?o.jsxs("div",{className:"text-center py-12 text-gray-400",children:[o.jsx(Tr,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:"No leads found"})]}):x.map(v=>{var N;return o.jsxs("div",{onClick:()=>r(v),className:"bg-white p-4 rounded-xl border hover:shadow-md hover:border-blue-300 transition-all cursor-pointer",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-medium text-gray-900 truncate",children:v.clientName}),o.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${v.stage==="Booked"?"bg-green-100 text-green-700":v.stage==="Lost"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"}`,children:v.stage})]}),o.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-500",children:[v.phone&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Gn,{className:"w-3 h-3"})," ",v.phone]}),v.email&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Wd,{className:"w-3 h-3"})," ",v.email]})]})]}),o.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[v.budgetRange&&o.jsx("span",{className:"px-2 py-1 bg-emerald-50 text-emerald-700 rounded text-xs font-medium",children:v.budgetRange}),v.eventDate&&o.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs font-medium flex items-center gap-1",children:[o.jsx(on,{className:"w-3 h-3"}),new Date(v.eventDate).toLocaleDateString("en-US",{month:"short",year:"numeric"})]}),v.guests&&o.jsxs("span",{className:"px-2 py-1 bg-purple-50 text-purple-700 rounded text-xs font-medium flex items-center gap-1",children:[o.jsx(Tr,{className:"w-3 h-3"}),v.guests]}),v.amount>0&&o.jsx("span",{className:"px-2 py-1 bg-amber-50 text-amber-700 rounded text-xs font-medium",children:Vu(v.amount)})]})]}),b&&((N=v.meta)==null?void 0:N.campaign_name)&&o.jsxs("div",{className:"mt-2 pt-2 border-t flex items-center gap-2 text-xs text-gray-400",children:[o.jsx("span",{className:"bg-gray-100 px-2 py-0.5 rounded",children:v.meta.campaign_name}),v.meta.platform&&o.jsx("span",{className:"bg-gray-100 px-2 py-0.5 rounded capitalize",children:v.meta.platform}),v.meta.ad_name&&o.jsx("span",{className:"bg-gray-100 px-2 py-0.5 rounded truncate max-w-[200px]",children:v.meta.ad_name})]})]},v.id)})})]})]})]})})}function gOe({currentUser:t,onClose:e,onLogout:n}){const[r,i]=k.useState("profile"),[s,a]=k.useState(!1),[l,c]=k.useState(null),[u,d]=k.useState({name:(t==null?void 0:t.name)||"",phone:"",email:(t==null?void 0:t.email)||""}),[f,h]=k.useState({current:"",new:"",confirm:""});k.useEffect(()=>{(async()=>{if(t!=null&&t.email)try{const b=Yt(De,"artifacts",We,"public","data","allowed_users",t.email),v=await rf(b);if(v.exists()){const N=v.data();d(S=>({...S,name:N.name||S.name,phone:N.phone||""}))}}catch(b){console.error("Error loading profile:",b)}})()},[t==null?void 0:t.email]);const m=async()=>{if(t!=null&&t.email){a(!0),c(null);try{const w=Yt(De,"artifacts",We,"public","data","allowed_users",t.email);if(await Qb(w,{name:u.name,phone:u.phone}),t!=null&&t.uid){const b=Yt(De,"artifacts",We,"public","data","system_users",t.uid);(await rf(b)).exists()&&await Qb(b,{name:u.name,phone:u.phone})}c({type:"success",text:"Profile updated successfully!"})}catch(w){console.error("Error saving profile:",w),c({type:"error",text:"Failed to save profile. Please try again."})}a(!1)}},y=async()=>{if(!f.current||!f.new||!f.confirm){c({type:"error",text:"Please fill in all password fields."});return}if(f.new!==f.confirm){c({type:"error",text:"New passwords do not match."});return}if(f.new.length<6){c({type:"error",text:"Password must be at least 6 characters."});return}a(!0),c(null);try{await Qu.changePassword(f.current,f.new),h({current:"",new:"",confirm:""}),c({type:"success",text:"Password changed successfully!"})}catch(w){console.error("Error changing password:",w),c({type:"error",text:w.message||"Failed to change password. Please try again."})}a(!1)},g=async()=>{try{n&&await n(),e()}catch(w){console.error("Error signing out:",w)}},x=[{id:"profile",label:"Profile",icon:hi},{id:"password",label:"Password",icon:Ua}];return o.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white w-full max-w-lg rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-scale-in max-h-[90vh]",children:[o.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 text-white p-6 flex justify-between items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-white/10 rounded-lg",children:o.jsx(hi,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold",children:"Account Settings"}),o.jsx("p",{className:"text-xs text-slate-300",children:t==null?void 0:t.email})]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:o.jsx(Dt,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"flex border-b bg-slate-50",children:x.map(w=>o.jsxs("button",{onClick:()=>{i(w.id),c(null)},className:`flex-1 flex items-center justify-center gap-2 py-3 px-4 text-sm font-medium transition-colors ${r===w.id?"text-blue-600 border-b-2 border-blue-600 bg-white":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"}`,children:[o.jsx(w.icon,{className:"w-4 h-4"}),w.label]},w.id))}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[l&&o.jsxs("div",{className:`mb-4 p-3 rounded-lg text-sm flex items-center gap-2 ${l.type==="success"?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:[l.type==="success"?o.jsx(H_,{className:"w-4 h-4"}):o.jsx(Dt,{className:"w-4 h-4"}),l.text]}),r==="profile"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Display Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(hi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"text",className:"w-full pl-10 pr-3 py-3 border rounded-lg text-sm outline-none focus:border-blue-400",value:u.name,onChange:w=>d({...u,name:w.target.value}),placeholder:"Your name"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(Wd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"email",className:"w-full pl-10 pr-3 py-3 border rounded-lg text-sm outline-none bg-gray-50 text-gray-500",value:u.email,disabled:!0})]}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Email cannot be changed"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Phone Number"}),o.jsxs("div",{className:"relative",children:[o.jsx(Gn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"tel",className:"w-full pl-10 pr-3 py-3 border rounded-lg text-sm outline-none focus:border-blue-400",value:u.phone,onChange:w=>d({...u,phone:w.target.value}),placeholder:"03XX-XXXXXXX"})]}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Used for SMS notifications"})]}),o.jsxs("button",{onClick:m,disabled:s,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl flex items-center justify-center gap-2 disabled:opacity-70 transition-colors",children:[s?o.jsx(Ft,{className:"w-4 h-4 animate-spin"}):o.jsx(Q_,{className:"w-4 h-4"}),"Save Profile"]})]}),r==="password"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Current Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ua,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"password",className:"w-full pl-10 pr-3 py-3 border rounded-lg text-sm outline-none focus:border-blue-400",value:f.current,onChange:w=>h({...f,current:w.target.value}),placeholder:"Enter current password"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ua,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"password",className:"w-full pl-10 pr-3 py-3 border rounded-lg text-sm outline-none focus:border-blue-400",value:f.new,onChange:w=>h({...f,new:w.target.value}),placeholder:"Enter new password"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Confirm New Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ua,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"password",className:"w-full pl-10 pr-3 py-3 border rounded-lg text-sm outline-none focus:border-blue-400",value:f.confirm,onChange:w=>h({...f,confirm:w.target.value}),placeholder:"Confirm new password"})]})]}),o.jsxs("button",{onClick:y,disabled:s,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl flex items-center justify-center gap-2 disabled:opacity-70 transition-colors",children:[s?o.jsx(Ft,{className:"w-4 h-4 animate-spin"}):o.jsx(Ua,{className:"w-4 h-4"}),"Change Password"]}),o.jsxs("div",{className:"pt-4 border-t",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Password requirements:"}),o.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[o.jsx("li",{children:" Minimum 6 characters"}),o.jsx("li",{children:" Mix of letters and numbers recommended"})]})]})]})]}),o.jsx("div",{className:"p-4 bg-gray-50 border-t",children:o.jsxs("button",{onClick:g,className:"w-full py-2 text-red-600 hover:bg-red-50 font-medium rounded-lg flex items-center justify-center gap-2 transition-colors",children:[o.jsx(PR,{className:"w-4 h-4"}),"Sign Out"]})})]})})}function yOe({onClose:t}){const{migrateContacts:e,migrating:n,progress:r,error:i}=roe(),s=async()=>{try{await e()}catch(l){console.error("Migration failed:",l)}},a=r.total>0?Math.round(r.current/r.total*100):0;return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full overflow-hidden",children:[o.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-5 text-white",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:o.jsx(Om,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"font-bold text-lg",children:"Contacts Migration"}),o.jsx("p",{className:"text-sm text-blue-100",children:"Firebase  PostgreSQL"})]})]})}),o.jsxs("div",{className:"p-5 space-y-4",children:[o.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx(mo,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-amber-800 font-medium",children:"Important"}),o.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"This checks all contacts from Firebase against PostgreSQL. Duplicates (matching phone) are skipped to prevent errors."})]})]})}),(n||r.total>0)&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between text-sm items-end",children:[o.jsx("span",{className:"text-gray-600 font-medium",children:"Progress"}),o.jsxs("span",{className:"text-indigo-600 font-bold text-lg",children:[r.current," ",o.jsxs("span",{className:"text-gray-400 text-sm font-normal",children:["/ ",r.total]})]})]}),o.jsx("div",{className:"h-3 bg-gray-100 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-500 transition-all duration-300 relative",style:{width:`${a}%`},children:o.jsx("div",{className:"absolute inset-0 bg-white/20 animate-pulse"})})}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[o.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-100",children:[o.jsxs("div",{className:"flex items-center gap-2 text-green-700 mb-1",children:[o.jsx(as,{className:"w-4 h-4"}),o.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Migrated"})]}),o.jsx("p",{className:"text-2xl font-bold text-green-700",children:r.success})]}),o.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-100",children:[o.jsxs("div",{className:"flex items-center gap-2 text-red-700 mb-1",children:[o.jsx(Mm,{className:"w-4 h-4"}),o.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Failed"})]}),o.jsx("p",{className:"text-2xl font-bold text-red-700",children:r.failed})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200 col-span-2",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[o.jsx(ha,{className:"w-4 h-4"}),o.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Skipped"})]}),o.jsx("span",{className:"text-sm font-bold text-gray-700",children:r.skipped})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[o.jsx("span",{children:"Duplicates (Already exist)"}),o.jsx("span",{className:"font-medium",children:r.skippedDuplicate||0})]}),o.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[o.jsx("span",{children:"Invalid Phone Numbers"}),o.jsx("span",{className:"font-medium",children:r.skippedInvalid||0})]})]})]})]})]}),i&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex items-start gap-2",children:[o.jsx(Mm,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),o.jsx("p",{className:"text-sm text-red-700",children:i})]}),!n&&r.total>0&&r.current===r.total&&o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center animate-fade-in",children:[o.jsx(as,{className:"w-10 h-10 text-green-500 mx-auto mb-2"}),o.jsx("p",{className:"font-medium text-green-800",children:"Process Complete!"}),o.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Check the breakdown above for details."})]})]}),o.jsxs("div",{className:"border-t p-4 flex gap-3 bg-gray-50",children:[o.jsx("button",{onClick:t,className:"flex-1 px-4 py-2.5 border border-gray-200 bg-white rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:r.total>0?"Close":"Cancel"}),o.jsx("button",{onClick:s,disabled:n||r.total>0&&r.current===r.total,className:"flex-1 px-4 py-2.5 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-sm",children:n?o.jsxs(o.Fragment,{children:[o.jsx(Ft,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Om,{className:"w-4 h-4"}),r.total>0?"Restart":"Start Migration"]})})]})]})})}function vOe({stats:t,onShowRevenue:e}){const{t:n}=ti();return o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"grid grid-cols-4 gap-5",children:[o.jsx(fp,{title:n("totalRevenue"),value:Oe(t.revenue),icon:Ro,color:"bg-green-500",onClick:e}),o.jsx(fp,{title:n("pipelineValue"),value:Oe(t.pipe),icon:Kl,color:"bg-blue-500"}),o.jsx(fp,{title:n("totalLeads"),value:t.total,icon:Tr,color:"bg-purple-500"}),o.jsx(fp,{title:n("conversionRate"),value:`${t.conversion}%`,icon:as,color:"bg-orange-500"})]})})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function Ys(t,e){return typeof t=="function"?t(e):t}function pr(t,e){return n=>{e.setState(r=>({...r,[t]:Ys(n,r[t])}))}}function Uv(t){return t instanceof Function}function xOe(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function bOe(t,e){const n=[],r=i=>{i.forEach(s=>{n.push(s);const a=e(s);a!=null&&a.length&&r(a)})};return r(t),n}function _e(t,e,n){let r=[],i;return s=>{let a;n.key&&n.debug&&(a=Date.now());const l=t(s);if(!(l.length!==r.length||l.some((d,f)=>r[f]!==d)))return i;r=l;let u;if(n.key&&n.debug&&(u=Date.now()),i=e(...l),n==null||n.onChange==null||n.onChange(i),n.key&&n.debug&&n!=null&&n.debug()){const d=Math.round((Date.now()-a)*100)/100,f=Math.round((Date.now()-u)*100)/100,h=f/16,m=(y,g)=>{for(y=String(y);y.length<g;)y=" "+y;return y};console.info(`%c ${m(f,5)} /${m(d,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*h,120))}deg 100% 31%);`,n==null?void 0:n.key)}return i}}function Se(t,e,n,r){return{debug:()=>{var i;return(i=t==null?void 0:t.debugAll)!=null?i:t[e]},key:!1,onChange:r}}function wOe(t,e,n,r){const i=()=>{var a;return(a=s.getValue())!=null?a:t.options.renderFallbackValue},s={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(r),renderValue:i,getContext:_e(()=>[t,n,e,s],(a,l,c,u)=>({table:a,column:l,row:c,cell:u,getValue:u.getValue,renderValue:u.renderValue}),Se(t.options,"debugCells"))};return t._features.forEach(a=>{a.createCell==null||a.createCell(s,n,e,t)},{}),s}function _Oe(t,e,n,r){var i,s;const l={...t._getDefaultColumnDef(),...e},c=l.accessorKey;let u=(i=(s=l.id)!=null?s:c?typeof String.prototype.replaceAll=="function"?c.replaceAll(".","_"):c.replace(/\./g,"_"):void 0)!=null?i:typeof l.header=="string"?l.header:void 0,d;if(l.accessorFn?d=l.accessorFn:c&&(c.includes(".")?d=h=>{let m=h;for(const g of c.split(".")){var y;m=(y=m)==null?void 0:y[g]}return m}:d=h=>h[l.accessorKey]),!u)throw new Error;let f={id:`${String(u)}`,accessorFn:d,parent:r,depth:n,columnDef:l,columns:[],getFlatColumns:_e(()=>[!0],()=>{var h;return[f,...(h=f.columns)==null?void 0:h.flatMap(m=>m.getFlatColumns())]},Se(t.options,"debugColumns")),getLeafColumns:_e(()=>[t._getOrderColumnsFn()],h=>{var m;if((m=f.columns)!=null&&m.length){let y=f.columns.flatMap(g=>g.getLeafColumns());return h(y)}return[f]},Se(t.options,"debugColumns"))};for(const h of t._features)h.createColumn==null||h.createColumn(f,t);return f}const Nn="debugHeaders";function Q2(t,e,n){var r;let s={id:(r=n.id)!=null?r:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const a=[],l=c=>{c.subHeaders&&c.subHeaders.length&&c.subHeaders.map(l),a.push(c)};return l(s),a},getContext:()=>({table:t,header:s,column:e})};return t._features.forEach(a=>{a.createHeader==null||a.createHeader(s,t)}),s}const SOe={createTable:t=>{t.getHeaderGroups=_e(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,i)=>{var s,a;const l=(s=r==null?void 0:r.map(f=>n.find(h=>h.id===f)).filter(Boolean))!=null?s:[],c=(a=i==null?void 0:i.map(f=>n.find(h=>h.id===f)).filter(Boolean))!=null?a:[],u=n.filter(f=>!(r!=null&&r.includes(f.id))&&!(i!=null&&i.includes(f.id)));return jp(e,[...l,...u,...c],t)},Se(t.options,Nn)),t.getCenterHeaderGroups=_e(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,i)=>(n=n.filter(s=>!(r!=null&&r.includes(s.id))&&!(i!=null&&i.includes(s.id))),jp(e,n,t,"center")),Se(t.options,Nn)),t.getLeftHeaderGroups=_e(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,r)=>{var i;const s=(i=r==null?void 0:r.map(a=>n.find(l=>l.id===a)).filter(Boolean))!=null?i:[];return jp(e,s,t,"left")},Se(t.options,Nn)),t.getRightHeaderGroups=_e(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,r)=>{var i;const s=(i=r==null?void 0:r.map(a=>n.find(l=>l.id===a)).filter(Boolean))!=null?i:[];return jp(e,s,t,"right")},Se(t.options,Nn)),t.getFooterGroups=_e(()=>[t.getHeaderGroups()],e=>[...e].reverse(),Se(t.options,Nn)),t.getLeftFooterGroups=_e(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),Se(t.options,Nn)),t.getCenterFooterGroups=_e(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),Se(t.options,Nn)),t.getRightFooterGroups=_e(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),Se(t.options,Nn)),t.getFlatHeaders=_e(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),Se(t.options,Nn)),t.getLeftFlatHeaders=_e(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),Se(t.options,Nn)),t.getCenterFlatHeaders=_e(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),Se(t.options,Nn)),t.getRightFlatHeaders=_e(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),Se(t.options,Nn)),t.getCenterLeafHeaders=_e(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Se(t.options,Nn)),t.getLeftLeafHeaders=_e(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Se(t.options,Nn)),t.getRightLeafHeaders=_e(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Se(t.options,Nn)),t.getLeafHeaders=_e(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,r)=>{var i,s,a,l,c,u;return[...(i=(s=e[0])==null?void 0:s.headers)!=null?i:[],...(a=(l=n[0])==null?void 0:l.headers)!=null?a:[],...(c=(u=r[0])==null?void 0:u.headers)!=null?c:[]].map(d=>d.getLeafHeaders()).flat()},Se(t.options,Nn))}};function jp(t,e,n,r){var i,s;let a=0;const l=function(h,m){m===void 0&&(m=1),a=Math.max(a,m),h.filter(y=>y.getIsVisible()).forEach(y=>{var g;(g=y.columns)!=null&&g.length&&l(y.columns,m+1)},0)};l(t);let c=[];const u=(h,m)=>{const y={depth:m,id:[r,`${m}`].filter(Boolean).join("_"),headers:[]},g=[];h.forEach(x=>{const w=[...g].reverse()[0],b=x.column.depth===y.depth;let v,N=!1;if(b&&x.column.parent?v=x.column.parent:(v=x.column,N=!0),w&&(w==null?void 0:w.column)===v)w.subHeaders.push(x);else{const S=Q2(n,v,{id:[r,m,v.id,x==null?void 0:x.id].filter(Boolean).join("_"),isPlaceholder:N,placeholderId:N?`${g.filter(A=>A.column===v).length}`:void 0,depth:m,index:g.length});S.subHeaders.push(x),g.push(S)}y.headers.push(x),x.headerGroup=y}),c.push(y),m>0&&u(g,m-1)},d=e.map((h,m)=>Q2(n,h,{depth:a,index:m}));u(d,a-1),c.reverse();const f=h=>h.filter(y=>y.column.getIsVisible()).map(y=>{let g=0,x=0,w=[0];y.subHeaders&&y.subHeaders.length?(w=[],f(y.subHeaders).forEach(v=>{let{colSpan:N,rowSpan:S}=v;g+=N,w.push(S)})):g=1;const b=Math.min(...w);return x=x+b,y.colSpan=g,y.rowSpan=x,{colSpan:g,rowSpan:x}});return f((i=(s=c[0])==null?void 0:s.headers)!=null?i:[]),c}const gN=(t,e,n,r,i,s,a)=>{let l={id:e,index:r,original:n,depth:i,parentId:a,_valuesCache:{},_uniqueValuesCache:{},getValue:c=>{if(l._valuesCache.hasOwnProperty(c))return l._valuesCache[c];const u=t.getColumn(c);if(u!=null&&u.accessorFn)return l._valuesCache[c]=u.accessorFn(l.original,r),l._valuesCache[c]},getUniqueValues:c=>{if(l._uniqueValuesCache.hasOwnProperty(c))return l._uniqueValuesCache[c];const u=t.getColumn(c);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(l._uniqueValuesCache[c]=u.columnDef.getUniqueValues(l.original,r),l._uniqueValuesCache[c]):(l._uniqueValuesCache[c]=[l.getValue(c)],l._uniqueValuesCache[c])},renderValue:c=>{var u;return(u=l.getValue(c))!=null?u:t.options.renderFallbackValue},subRows:[],getLeafRows:()=>bOe(l.subRows,c=>c.subRows),getParentRow:()=>l.parentId?t.getRow(l.parentId,!0):void 0,getParentRows:()=>{let c=[],u=l;for(;;){const d=u.getParentRow();if(!d)break;c.push(d),u=d}return c.reverse()},getAllCells:_e(()=>[t.getAllLeafColumns()],c=>c.map(u=>wOe(t,l,u,u.id)),Se(t.options,"debugRows")),_getAllCellsByColumnId:_e(()=>[l.getAllCells()],c=>c.reduce((u,d)=>(u[d.column.id]=d,u),{}),Se(t.options,"debugRows"))};for(let c=0;c<t._features.length;c++){const u=t._features[c];u==null||u.createRow==null||u.createRow(l,t)}return l},AOe={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},Z5=(t,e,n)=>{var r,i;const s=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return!!(!((i=t.getValue(e))==null||(i=i.toString())==null||(i=i.toLowerCase())==null)&&i.includes(s))};Z5.autoRemove=t=>Jr(t);const e3=(t,e,n)=>{var r;return!!(!((r=t.getValue(e))==null||(r=r.toString())==null)&&r.includes(n))};e3.autoRemove=t=>Jr(t);const t3=(t,e,n)=>{var r;return((r=t.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(n==null?void 0:n.toLowerCase())};t3.autoRemove=t=>Jr(t);const n3=(t,e,n)=>{var r;return(r=t.getValue(e))==null?void 0:r.includes(n)};n3.autoRemove=t=>Jr(t);const r3=(t,e,n)=>!n.some(r=>{var i;return!((i=t.getValue(e))!=null&&i.includes(r))});r3.autoRemove=t=>Jr(t)||!(t!=null&&t.length);const i3=(t,e,n)=>n.some(r=>{var i;return(i=t.getValue(e))==null?void 0:i.includes(r)});i3.autoRemove=t=>Jr(t)||!(t!=null&&t.length);const s3=(t,e,n)=>t.getValue(e)===n;s3.autoRemove=t=>Jr(t);const a3=(t,e,n)=>t.getValue(e)==n;a3.autoRemove=t=>Jr(t);const yN=(t,e,n)=>{let[r,i]=n;const s=t.getValue(e);return s>=r&&s<=i};yN.resolveFilterValue=t=>{let[e,n]=t,r=typeof e!="number"?parseFloat(e):e,i=typeof n!="number"?parseFloat(n):n,s=e===null||Number.isNaN(r)?-1/0:r,a=n===null||Number.isNaN(i)?1/0:i;if(s>a){const l=s;s=a,a=l}return[s,a]};yN.autoRemove=t=>Jr(t)||Jr(t[0])&&Jr(t[1]);const Li={includesString:Z5,includesStringSensitive:e3,equalsString:t3,arrIncludes:n3,arrIncludesAll:r3,arrIncludesSome:i3,equals:s3,weakEquals:a3,inNumberRange:yN};function Jr(t){return t==null||t===""}const NOe={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:pr("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(t.id);return typeof r=="string"?Li.includesString:typeof r=="number"?Li.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?Li.equals:Array.isArray(r)?Li.arrIncludes:Li.weakEquals},t.getFilterFn=()=>{var n,r;return Uv(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(r=e.options.filterFns)==null?void 0:r[t.columnDef.filterFn])!=null?n:Li[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,r,i;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(r=>r.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,r;return(n=(r=e.getState().columnFilters)==null?void 0:r.findIndex(i=>i.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(r=>{const i=t.getFilterFn(),s=r==null?void 0:r.find(d=>d.id===t.id),a=Ys(n,s?s.value:void 0);if(J2(i,a,t)){var l;return(l=r==null?void 0:r.filter(d=>d.id!==t.id))!=null?l:[]}const c={id:t.id,value:a};if(s){var u;return(u=r==null?void 0:r.map(d=>d.id===t.id?c:d))!=null?u:[]}return r!=null&&r.length?[...r,c]:[c]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),r=i=>{var s;return(s=Ys(e,i))==null?void 0:s.filter(a=>{const l=n.find(c=>c.id===a.id);if(l){const c=l.getFilterFn();if(J2(c,a.value,l))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(r)},t.resetColumnFilters=e=>{var n,r;t.setColumnFilters(e?[]:(n=(r=t.initialState)==null?void 0:r.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function J2(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const EOe=(t,e,n)=>n.reduce((r,i)=>{const s=i.getValue(t);return r+(typeof s=="number"?s:0)},0),COe=(t,e,n)=>{let r;return n.forEach(i=>{const s=i.getValue(t);s!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}),r},jOe=(t,e,n)=>{let r;return n.forEach(i=>{const s=i.getValue(t);s!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}),r},TOe=(t,e,n)=>{let r,i;return n.forEach(s=>{const a=s.getValue(t);a!=null&&(r===void 0?a>=a&&(r=i=a):(r>a&&(r=a),i<a&&(i=a)))}),[r,i]},POe=(t,e)=>{let n=0,r=0;if(e.forEach(i=>{let s=i.getValue(t);s!=null&&(s=+s)>=s&&(++n,r+=s)}),n)return r/n},kOe=(t,e)=>{if(!e.length)return;const n=e.map(s=>s.getValue(t));if(!xOe(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),i=n.sort((s,a)=>s-a);return n.length%2!==0?i[r]:(i[r-1]+i[r])/2},IOe=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),OOe=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,ROe=(t,e)=>e.length,Sx={sum:EOe,min:COe,max:jOe,extent:TOe,mean:POe,median:kOe,unique:IOe,uniqueCount:OOe,count:ROe},$Oe={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:pr("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(r=>r!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,r;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(t.id);if(typeof r=="number")return Sx.sum;if(Object.prototype.toString.call(r)==="[object Date]")return Sx.extent},t.getAggregationFn=()=>{var n,r;if(!t)throw new Error;return Uv(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(r=e.options.aggregationFns)==null?void 0:r[t.columnDef.aggregationFn])!=null?n:Sx[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,r;t.setGrouping(e?[]:(n=(r=t.initialState)==null?void 0:r.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const r=e.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(t._groupingValuesCache[n]=r.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,r)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var i;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((i=n.subRows)!=null&&i.length)}}};function DOe(t,e,n){if(!(e!=null&&e.length)||!n)return t;const r=t.filter(s=>!e.includes(s.id));return n==="remove"?r:[...e.map(s=>t.find(a=>a.id===s)).filter(Boolean),...r]}const MOe={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:pr("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=_e(n=>[Ad(e,n)],n=>n.findIndex(r=>r.id===t.id),Se(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var r;return((r=Ad(e,n)[0])==null?void 0:r.id)===t.id},t.getIsLastColumn=n=>{var r;const i=Ad(e,n);return((r=i[i.length-1])==null?void 0:r.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=_e(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,r)=>i=>{let s=[];if(!(e!=null&&e.length))s=i;else{const a=[...e],l=[...i];for(;l.length&&a.length;){const c=a.shift(),u=l.findIndex(d=>d.id===c);u>-1&&s.push(l.splice(u,1)[0])}s=[...s,...l]}return DOe(s,n,r)},Se(t.options,"debugTable"))}},Ax=()=>({left:[],right:[]}),LOe={getInitialState:t=>({columnPinning:Ax(),...t}),getDefaultOptions:t=>({onColumnPinningChange:pr("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const r=t.getLeafColumns().map(i=>i.id).filter(Boolean);e.setColumnPinning(i=>{var s,a;if(n==="right"){var l,c;return{left:((l=i==null?void 0:i.left)!=null?l:[]).filter(f=>!(r!=null&&r.includes(f))),right:[...((c=i==null?void 0:i.right)!=null?c:[]).filter(f=>!(r!=null&&r.includes(f))),...r]}}if(n==="left"){var u,d;return{left:[...((u=i==null?void 0:i.left)!=null?u:[]).filter(f=>!(r!=null&&r.includes(f))),...r],right:((d=i==null?void 0:i.right)!=null?d:[]).filter(f=>!(r!=null&&r.includes(f)))}}return{left:((s=i==null?void 0:i.left)!=null?s:[]).filter(f=>!(r!=null&&r.includes(f))),right:((a=i==null?void 0:i.right)!=null?a:[]).filter(f=>!(r!=null&&r.includes(f)))}})},t.getCanPin=()=>t.getLeafColumns().some(r=>{var i,s,a;return((i=r.columnDef.enablePinning)!=null?i:!0)&&((s=(a=e.options.enableColumnPinning)!=null?a:e.options.enablePinning)!=null?s:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(l=>l.id),{left:r,right:i}=e.getState().columnPinning,s=n.some(l=>r==null?void 0:r.includes(l)),a=n.some(l=>i==null?void 0:i.includes(l));return s?"left":a?"right":!1},t.getPinnedIndex=()=>{var n,r;const i=t.getIsPinned();return i?(n=(r=e.getState().columnPinning)==null||(r=r[i])==null?void 0:r.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=_e(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,r,i)=>{const s=[...r??[],...i??[]];return n.filter(a=>!s.includes(a.column.id))},Se(e.options,"debugRows")),t.getLeftVisibleCells=_e(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,r)=>(r??[]).map(s=>n.find(a=>a.column.id===s)).filter(Boolean).map(s=>({...s,position:"left"})),Se(e.options,"debugRows")),t.getRightVisibleCells=_e(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,r)=>(r??[]).map(s=>n.find(a=>a.column.id===s)).filter(Boolean).map(s=>({...s,position:"right"})),Se(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,r;return t.setColumnPinning(e?Ax():(n=(r=t.initialState)==null?void 0:r.columnPinning)!=null?n:Ax())},t.getIsSomeColumnsPinned=e=>{var n;const r=t.getState().columnPinning;if(!e){var i,s;return!!((i=r.left)!=null&&i.length||(s=r.right)!=null&&s.length)}return!!((n=r[e])!=null&&n.length)},t.getLeftLeafColumns=_e(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(r=>e.find(i=>i.id===r)).filter(Boolean),Se(t.options,"debugColumns")),t.getRightLeafColumns=_e(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(r=>e.find(i=>i.id===r)).filter(Boolean),Se(t.options,"debugColumns")),t.getCenterLeafColumns=_e(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r)=>{const i=[...n??[],...r??[]];return e.filter(s=>!i.includes(s.id))},Se(t.options,"debugColumns"))}};function FOe(t){return t||(typeof document<"u"?document:null)}const Tp={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Nx=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),VOe={getDefaultColumnDef:()=>Tp,getInitialState:t=>({columnSizing:{},columnSizingInfo:Nx(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:pr("columnSizing",t),onColumnSizingInfoChange:pr("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,r,i;const s=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:Tp.minSize,(r=s??t.columnDef.size)!=null?r:Tp.size),(i=t.columnDef.maxSize)!=null?i:Tp.maxSize)},t.getStart=_e(n=>[n,Ad(e,n),e.getState().columnSizing],(n,r)=>r.slice(0,t.getIndex(n)).reduce((i,s)=>i+s.getSize(),0),Se(e.options,"debugColumns")),t.getAfter=_e(n=>[n,Ad(e,n),e.getState().columnSizing],(n,r)=>r.slice(t.getIndex(n)+1).reduce((i,s)=>i+s.getSize(),0),Se(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:r,...i}=n;return i})},t.getCanResize=()=>{var n,r;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const r=i=>{if(i.subHeaders.length)i.subHeaders.forEach(r);else{var s;n+=(s=i.column.getSize())!=null?s:0}};return r(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const r=e.getColumn(t.column.id),i=r==null?void 0:r.getCanResize();return s=>{if(!r||!i||(s.persist==null||s.persist(),Ex(s)&&s.touches&&s.touches.length>1))return;const a=t.getSize(),l=t?t.getLeafHeaders().map(w=>[w.column.id,w.column.getSize()]):[[r.id,r.getSize()]],c=Ex(s)?Math.round(s.touches[0].clientX):s.clientX,u={},d=(w,b)=>{typeof b=="number"&&(e.setColumnSizingInfo(v=>{var N,S;const A=e.options.columnResizeDirection==="rtl"?-1:1,E=(b-((N=v==null?void 0:v.startOffset)!=null?N:0))*A,_=Math.max(E/((S=v==null?void 0:v.startSize)!=null?S:0),-.999999);return v.columnSizingStart.forEach(C=>{let[P,T]=C;u[P]=Math.round(Math.max(T+T*_,0)*100)/100}),{...v,deltaOffset:E,deltaPercentage:_}}),(e.options.columnResizeMode==="onChange"||w==="end")&&e.setColumnSizing(v=>({...v,...u})))},f=w=>d("move",w),h=w=>{d("end",w),e.setColumnSizingInfo(b=>({...b,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},m=FOe(n),y={moveHandler:w=>f(w.clientX),upHandler:w=>{m==null||m.removeEventListener("mousemove",y.moveHandler),m==null||m.removeEventListener("mouseup",y.upHandler),h(w.clientX)}},g={moveHandler:w=>(w.cancelable&&(w.preventDefault(),w.stopPropagation()),f(w.touches[0].clientX),!1),upHandler:w=>{var b;m==null||m.removeEventListener("touchmove",g.moveHandler),m==null||m.removeEventListener("touchend",g.upHandler),w.cancelable&&(w.preventDefault(),w.stopPropagation()),h((b=w.touches[0])==null?void 0:b.clientX)}},x=BOe()?{passive:!1}:!1;Ex(s)?(m==null||m.addEventListener("touchmove",g.moveHandler,x),m==null||m.addEventListener("touchend",g.upHandler,x)):(m==null||m.addEventListener("mousemove",y.moveHandler,x),m==null||m.addEventListener("mouseup",y.upHandler,x)),e.setColumnSizingInfo(w=>({...w,startOffset:c,startSize:a,deltaOffset:0,deltaPercentage:0,columnSizingStart:l,isResizingColumn:r.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?Nx():(n=t.initialState.columnSizingInfo)!=null?n:Nx())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0}}};let Pp=null;function BOe(){if(typeof Pp=="boolean")return Pp;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return Pp=t,Pp}function Ex(t){return t.type==="touchstart"}const UOe={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:pr("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(r=>({...r,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,r;const i=t.columns;return(n=i.length?i.some(s=>s.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[t.id])!=null?n:!0},t.getCanHide=()=>{var n,r;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((r=e.options.enableHiding)!=null?r:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=_e(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),Se(e.options,"debugRows")),t.getVisibleCells=_e(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,r,i)=>[...n,...r,...i],Se(e.options,"debugRows"))},createTable:t=>{const e=(n,r)=>_e(()=>[r(),r().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(s=>s.getIsVisible==null?void 0:s.getIsVisible()),Se(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var r;t.setColumnVisibility(n?{}:(r=t.initialState.columnVisibility)!=null?r:{})},t.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((i,s)=>({...i,[s.id]:n||!(s.getCanHide!=null&&s.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;t.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function Ad(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const zOe={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},qOe={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:pr("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const r=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,r,i,s;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&((s=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?s:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>Li.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:r}=t.options;return Uv(r)?r:r==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[r])!=null?e:Li[r]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},WOe={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:pr("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var r,i;if(!e){t._queue(()=>{e=!0});return}if((r=(i=t.options.autoResetAll)!=null?i:t.options.autoResetExpanded)!=null?r:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=r=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(r),t.toggleAllRowsExpanded=r=>{r??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=r=>{var i,s;t.setExpanded(r?{}:(i=(s=t.initialState)==null?void 0:s.expanded)!=null?i:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const r=t.getState().expanded;return r===!0||Object.values(r).some(Boolean)},t.getIsAllRowsExpanded=()=>{const r=t.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||t.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},t.getExpandedDepth=()=>{let r=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(s=>{const a=s.split(".");r=Math.max(r,a.length)}),r},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(r=>{var i;const s=r===!0?!0:!!(r!=null&&r[t.id]);let a={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(l=>{a[l]=!0}):a=r,n=(i=n)!=null?i:!s,!s&&n)return{...a,[t.id]:!0};if(s&&!n){const{[t.id]:l,...c}=a;return c}return r})},t.getIsExpanded=()=>{var n;const r=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:r===!0||r!=null&&r[t.id])},t.getCanExpand=()=>{var n,r,i;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((r=e.options.enableExpanding)!=null?r:!0)&&!!((i=t.subRows)!=null&&i.length)},t.getIsAllParentsExpanded=()=>{let n=!0,r=t;for(;n&&r.parentId;)r=e.getRow(r.parentId,!0),n=r.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},F1=0,V1=10,Cx=()=>({pageIndex:F1,pageSize:V1}),GOe={getInitialState:t=>({...t,pagination:{...Cx(),...t==null?void 0:t.pagination}}),getDefaultOptions:t=>({onPaginationChange:pr("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var r,i;if(!e){t._queue(()=>{e=!0});return}if((r=(i=t.options.autoResetAll)!=null?i:t.options.autoResetPageIndex)!=null?r:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=r=>{const i=s=>Ys(r,s);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(i)},t.resetPagination=r=>{var i;t.setPagination(r?Cx():(i=t.initialState.pagination)!=null?i:Cx())},t.setPageIndex=r=>{t.setPagination(i=>{let s=Ys(r,i.pageIndex);const a=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return s=Math.max(0,Math.min(s,a)),{...i,pageIndex:s}})},t.resetPageIndex=r=>{var i,s;t.setPageIndex(r?F1:(i=(s=t.initialState)==null||(s=s.pagination)==null?void 0:s.pageIndex)!=null?i:F1)},t.resetPageSize=r=>{var i,s;t.setPageSize(r?V1:(i=(s=t.initialState)==null||(s=s.pagination)==null?void 0:s.pageSize)!=null?i:V1)},t.setPageSize=r=>{t.setPagination(i=>{const s=Math.max(1,Ys(r,i.pageSize)),a=i.pageSize*i.pageIndex,l=Math.floor(a/s);return{...i,pageIndex:l,pageSize:s}})},t.setPageCount=r=>t.setPagination(i=>{var s;let a=Ys(r,(s=t.options.pageCount)!=null?s:-1);return typeof a=="number"&&(a=Math.max(-1,a)),{...i,pageCount:a}}),t.getPageOptions=_e(()=>[t.getPageCount()],r=>{let i=[];return r&&r>0&&(i=[...new Array(r)].fill(null).map((s,a)=>a)),i},Se(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:r}=t.getState().pagination,i=t.getPageCount();return i===-1?!0:i===0?!1:r<i-1},t.previousPage=()=>t.setPageIndex(r=>r-1),t.nextPage=()=>t.setPageIndex(r=>r+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var r;return(r=t.options.pageCount)!=null?r:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var r;return(r=t.options.rowCount)!=null?r:t.getPrePaginationRowModel().rows.length}}},jx=()=>({top:[],bottom:[]}),HOe={getInitialState:t=>({rowPinning:jx(),...t}),getDefaultOptions:t=>({onRowPinningChange:pr("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,r,i)=>{const s=r?t.getLeafRows().map(c=>{let{id:u}=c;return u}):[],a=i?t.getParentRows().map(c=>{let{id:u}=c;return u}):[],l=new Set([...a,t.id,...s]);e.setRowPinning(c=>{var u,d;if(n==="bottom"){var f,h;return{top:((f=c==null?void 0:c.top)!=null?f:[]).filter(g=>!(l!=null&&l.has(g))),bottom:[...((h=c==null?void 0:c.bottom)!=null?h:[]).filter(g=>!(l!=null&&l.has(g))),...Array.from(l)]}}if(n==="top"){var m,y;return{top:[...((m=c==null?void 0:c.top)!=null?m:[]).filter(g=>!(l!=null&&l.has(g))),...Array.from(l)],bottom:((y=c==null?void 0:c.bottom)!=null?y:[]).filter(g=>!(l!=null&&l.has(g)))}}return{top:((u=c==null?void 0:c.top)!=null?u:[]).filter(g=>!(l!=null&&l.has(g))),bottom:((d=c==null?void 0:c.bottom)!=null?d:[]).filter(g=>!(l!=null&&l.has(g)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:i}=e.options;return typeof r=="function"?r(t):(n=r??i)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:r,bottom:i}=e.getState().rowPinning,s=n.some(l=>r==null?void 0:r.includes(l)),a=n.some(l=>i==null?void 0:i.includes(l));return s?"top":a?"bottom":!1},t.getPinnedIndex=()=>{var n,r;const i=t.getIsPinned();if(!i)return-1;const s=(n=i==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(a=>{let{id:l}=a;return l});return(r=s==null?void 0:s.indexOf(t.id))!=null?r:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,r;return t.setRowPinning(e?jx():(n=(r=t.initialState)==null?void 0:r.rowPinning)!=null?n:jx())},t.getIsSomeRowsPinned=e=>{var n;const r=t.getState().rowPinning;if(!e){var i,s;return!!((i=r.top)!=null&&i.length||(s=r.bottom)!=null&&s.length)}return!!((n=r[e])!=null&&n.length)},t._getPinnedRows=(e,n,r)=>{var i;return((i=t.options.keepPinnedRows)==null||i?(n??[]).map(a=>{const l=t.getRow(a,!0);return l.getIsAllParentsExpanded()?l:null}):(n??[]).map(a=>e.find(l=>l.id===a))).filter(Boolean).map(a=>({...a,position:r}))},t.getTopRows=_e(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),Se(t.options,"debugRows")),t.getBottomRows=_e(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),Se(t.options,"debugRows")),t.getCenterRows=_e(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,r)=>{const i=new Set([...n??[],...r??[]]);return e.filter(s=>!i.has(s.id))},Se(t.options,"debugRows"))}},KOe={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:pr("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const r={...n},i=t.getPreGroupedRowModel().flatRows;return e?i.forEach(s=>{s.getCanSelect()&&(r[s.id]=!0)}):i.forEach(s=>{delete r[s.id]}),r})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const r=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),i={...n};return t.getRowModel().rows.forEach(s=>{B1(i,s.id,r,!0,t)}),i}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=_e(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?Tx(t,n):{rows:[],flatRows:[],rowsById:{}},Se(t.options,"debugTable")),t.getFilteredSelectedRowModel=_e(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?Tx(t,n):{rows:[],flatRows:[],rowsById:{}},Se(t.options,"debugTable")),t.getGroupedSelectedRowModel=_e(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?Tx(t,n):{rows:[],flatRows:[],rowsById:{}},Se(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let r=!!(e.length&&Object.keys(n).length);return r&&e.some(i=>i.getCanSelect()&&!n[i.id])&&(r=!1),r},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:n}=t.getState();let r=!!e.length;return r&&e.some(i=>!n[i.id])&&(r=!1),r},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,r)=>{const i=t.getIsSelected();e.setRowSelection(s=>{var a;if(n=typeof n<"u"?n:!i,t.getCanSelect()&&i===n)return s;const l={...s};return B1(l,t.id,n,(a=r==null?void 0:r.selectChildren)!=null?a:!0,e),l})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return vN(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return U1(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return U1(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return r=>{var i;n&&t.toggleSelected((i=r.target)==null?void 0:i.checked)}}}},B1=(t,e,n,r,i)=>{var s;const a=i.getRow(e,!0);n?(a.getCanMultiSelect()||Object.keys(t).forEach(l=>delete t[l]),a.getCanSelect()&&(t[e]=!0)):delete t[e],r&&(s=a.subRows)!=null&&s.length&&a.getCanSelectSubRows()&&a.subRows.forEach(l=>B1(t,l.id,n,r,i))};function Tx(t,e){const n=t.getState().rowSelection,r=[],i={},s=function(a,l){return a.map(c=>{var u;const d=vN(c,n);if(d&&(r.push(c),i[c.id]=c),(u=c.subRows)!=null&&u.length&&(c={...c,subRows:s(c.subRows)}),d)return c}).filter(Boolean)};return{rows:s(e.rows),flatRows:r,rowsById:i}}function vN(t,e){var n;return(n=e[t.id])!=null?n:!1}function U1(t,e,n){var r;if(!((r=t.subRows)!=null&&r.length))return!1;let i=!0,s=!1;return t.subRows.forEach(a=>{if(!(s&&!i)&&(a.getCanSelect()&&(vN(a,e)?s=!0:i=!1),a.subRows&&a.subRows.length)){const l=U1(a,e);l==="all"?s=!0:(l==="some"&&(s=!0),i=!1)}}),i?"all":s?"some":!1}const z1=/([0-9]+)/gm,YOe=(t,e,n)=>o3(xa(t.getValue(n)).toLowerCase(),xa(e.getValue(n)).toLowerCase()),XOe=(t,e,n)=>o3(xa(t.getValue(n)),xa(e.getValue(n))),QOe=(t,e,n)=>xN(xa(t.getValue(n)).toLowerCase(),xa(e.getValue(n)).toLowerCase()),JOe=(t,e,n)=>xN(xa(t.getValue(n)),xa(e.getValue(n))),ZOe=(t,e,n)=>{const r=t.getValue(n),i=e.getValue(n);return r>i?1:r<i?-1:0},eRe=(t,e,n)=>xN(t.getValue(n),e.getValue(n));function xN(t,e){return t===e?0:t>e?1:-1}function xa(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function o3(t,e){const n=t.split(z1).filter(Boolean),r=e.split(z1).filter(Boolean);for(;n.length&&r.length;){const i=n.shift(),s=r.shift(),a=parseInt(i,10),l=parseInt(s,10),c=[a,l].sort();if(isNaN(c[0])){if(i>s)return 1;if(s>i)return-1;continue}if(isNaN(c[1]))return isNaN(a)?-1:1;if(a>l)return 1;if(l>a)return-1}return n.length-r.length}const Bu={alphanumeric:YOe,alphanumericCaseSensitive:XOe,text:QOe,textCaseSensitive:JOe,datetime:ZOe,basic:eRe},tRe={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:pr("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const i of n){const s=i==null?void 0:i.getValue(t.id);if(Object.prototype.toString.call(s)==="[object Date]")return Bu.datetime;if(typeof s=="string"&&(r=!0,s.split(z1).length>1))return Bu.alphanumeric}return r?Bu.text:Bu.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(t.id))=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,r;if(!t)throw new Error;return Uv(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(r=e.options.sortingFns)==null?void 0:r[t.columnDef.sortingFn])!=null?n:Bu[t.columnDef.sortingFn]},t.toggleSorting=(n,r)=>{const i=t.getNextSortingOrder(),s=typeof n<"u"&&n!==null;e.setSorting(a=>{const l=a==null?void 0:a.find(m=>m.id===t.id),c=a==null?void 0:a.findIndex(m=>m.id===t.id);let u=[],d,f=s?n:i==="desc";if(a!=null&&a.length&&t.getCanMultiSort()&&r?l?d="toggle":d="add":a!=null&&a.length&&c!==a.length-1?d="replace":l?d="toggle":d="replace",d==="toggle"&&(s||i||(d="remove")),d==="add"){var h;u=[...a,{id:t.id,desc:f}],u.splice(0,u.length-((h=e.options.maxMultiSortColCount)!=null?h:Number.MAX_SAFE_INTEGER))}else d==="toggle"?u=a.map(m=>m.id===t.id?{...m,desc:f}:m):d==="remove"?u=a.filter(m=>m.id!==t.id):u=[{id:t.id,desc:f}];return u})},t.getFirstSortDir=()=>{var n,r;return((n=(r=t.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var r,i;const s=t.getFirstSortDir(),a=t.getIsSorted();return a?a!==s&&((r=e.options.enableSortingRemoval)==null||r)&&(!(n&&(i=e.options.enableMultiRemove)!=null)||i)?!1:a==="desc"?"asc":"desc":s},t.getCanSort=()=>{var n,r;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,r;return(n=(r=t.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const r=(n=e.getState().sorting)==null?void 0:n.find(i=>i.id===t.id);return r?r.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,r;return(n=(r=e.getState().sorting)==null?void 0:r.findIndex(i=>i.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return r=>{n&&(r.persist==null||r.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,r;t.setSorting(e?[]:(n=(r=t.initialState)==null?void 0:r.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},nRe=[SOe,UOe,MOe,LOe,AOe,NOe,zOe,qOe,tRe,$Oe,WOe,GOe,HOe,KOe,VOe];function rRe(t){var e,n;const r=[...nRe,...(e=t._features)!=null?e:[]];let i={_features:r};const s=i._features.reduce((h,m)=>Object.assign(h,m.getDefaultOptions==null?void 0:m.getDefaultOptions(i)),{}),a=h=>i.options.mergeOptions?i.options.mergeOptions(s,h):{...s,...h};let c={...{},...(n=t.initialState)!=null?n:{}};i._features.forEach(h=>{var m;c=(m=h.getInitialState==null?void 0:h.getInitialState(c))!=null?m:c});const u=[];let d=!1;const f={_features:r,options:{...s,...t},initialState:c,_queue:h=>{u.push(h),d||(d=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();d=!1}).catch(m=>setTimeout(()=>{throw m})))},reset:()=>{i.setState(i.initialState)},setOptions:h=>{const m=Ys(h,i.options);i.options=a(m)},getState:()=>i.options.state,setState:h=>{i.options.onStateChange==null||i.options.onStateChange(h)},_getRowId:(h,m,y)=>{var g;return(g=i.options.getRowId==null?void 0:i.options.getRowId(h,m,y))!=null?g:`${y?[y.id,m].join("."):m}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(h,m)=>{let y=(m?i.getPrePaginationRowModel():i.getRowModel()).rowsById[h];if(!y&&(y=i.getCoreRowModel().rowsById[h],!y))throw new Error;return y},_getDefaultColumnDef:_e(()=>[i.options.defaultColumn],h=>{var m;return h=(m=h)!=null?m:{},{header:y=>{const g=y.header.column.columnDef;return g.accessorKey?g.accessorKey:g.accessorFn?g.id:null},cell:y=>{var g,x;return(g=(x=y.renderValue())==null||x.toString==null?void 0:x.toString())!=null?g:null},...i._features.reduce((y,g)=>Object.assign(y,g.getDefaultColumnDef==null?void 0:g.getDefaultColumnDef()),{}),...h}},Se(t,"debugColumns")),_getColumnDefs:()=>i.options.columns,getAllColumns:_e(()=>[i._getColumnDefs()],h=>{const m=function(y,g,x){return x===void 0&&(x=0),y.map(w=>{const b=_Oe(i,w,x,g),v=w;return b.columns=v.columns?m(v.columns,b,x+1):[],b})};return m(h)},Se(t,"debugColumns")),getAllFlatColumns:_e(()=>[i.getAllColumns()],h=>h.flatMap(m=>m.getFlatColumns()),Se(t,"debugColumns")),_getAllFlatColumnsById:_e(()=>[i.getAllFlatColumns()],h=>h.reduce((m,y)=>(m[y.id]=y,m),{}),Se(t,"debugColumns")),getAllLeafColumns:_e(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(h,m)=>{let y=h.flatMap(g=>g.getLeafColumns());return m(y)},Se(t,"debugColumns")),getColumn:h=>i._getAllFlatColumnsById()[h]};Object.assign(i,f);for(let h=0;h<i._features.length;h++){const m=i._features[h];m==null||m.createTable==null||m.createTable(i)}return i}function l3(){return t=>_e(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(i,s,a){s===void 0&&(s=0);const l=[];for(let u=0;u<i.length;u++){const d=gN(t,t._getRowId(i[u],u,a),i[u],u,s,void 0,a==null?void 0:a.id);if(n.flatRows.push(d),n.rowsById[d.id]=d,l.push(d),t.options.getSubRows){var c;d.originalSubRows=t.options.getSubRows(i[u],u),(c=d.originalSubRows)!=null&&c.length&&(d.subRows=r(d.originalSubRows,s+1,d))}}return l};return n.rows=r(e),n},Se(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}function iRe(t){const e=[],n=r=>{var i;e.push(r),(i=r.subRows)!=null&&i.length&&r.getIsExpanded()&&r.subRows.forEach(n)};return t.rows.forEach(n),{rows:e,flatRows:t.flatRows,rowsById:t.rowsById}}function sRe(t,e,n){return n.options.filterFromLeafRows?aRe(t,e,n):oRe(t,e,n)}function aRe(t,e,n){var r;const i=[],s={},a=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,l=function(c,u){u===void 0&&(u=0);const d=[];for(let h=0;h<c.length;h++){var f;let m=c[h];const y=gN(n,m.id,m.original,m.index,m.depth,void 0,m.parentId);if(y.columnFilters=m.columnFilters,(f=m.subRows)!=null&&f.length&&u<a){if(y.subRows=l(m.subRows,u+1),m=y,e(m)&&!y.subRows.length){d.push(m),s[m.id]=m,i.push(m);continue}if(e(m)||y.subRows.length){d.push(m),s[m.id]=m,i.push(m);continue}}else m=y,e(m)&&(d.push(m),s[m.id]=m,i.push(m))}return d};return{rows:l(t),flatRows:i,rowsById:s}}function oRe(t,e,n){var r;const i=[],s={},a=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,l=function(c,u){u===void 0&&(u=0);const d=[];for(let h=0;h<c.length;h++){let m=c[h];if(e(m)){var f;if((f=m.subRows)!=null&&f.length&&u<a){const g=gN(n,m.id,m.original,m.index,m.depth,void 0,m.parentId);g.subRows=l(m.subRows,u+1),m=g}d.push(m),i.push(m),s[m.id]=m}}return d};return{rows:l(t),flatRows:i,rowsById:s}}function c3(){return t=>_e(()=>[t.getPreFilteredRowModel(),t.getState().columnFilters,t.getState().globalFilter],(e,n,r)=>{if(!e.rows.length||!(n!=null&&n.length)&&!r){for(let h=0;h<e.flatRows.length;h++)e.flatRows[h].columnFilters={},e.flatRows[h].columnFiltersMeta={};return e}const i=[],s=[];(n??[]).forEach(h=>{var m;const y=t.getColumn(h.id);if(!y)return;const g=y.getFilterFn();g&&i.push({id:h.id,filterFn:g,resolvedValue:(m=g.resolveFilterValue==null?void 0:g.resolveFilterValue(h.value))!=null?m:h.value})});const a=(n??[]).map(h=>h.id),l=t.getGlobalFilterFn(),c=t.getAllLeafColumns().filter(h=>h.getCanGlobalFilter());r&&l&&c.length&&(a.push("__global__"),c.forEach(h=>{var m;s.push({id:h.id,filterFn:l,resolvedValue:(m=l.resolveFilterValue==null?void 0:l.resolveFilterValue(r))!=null?m:r})}));let u,d;for(let h=0;h<e.flatRows.length;h++){const m=e.flatRows[h];if(m.columnFilters={},i.length)for(let y=0;y<i.length;y++){u=i[y];const g=u.id;m.columnFilters[g]=u.filterFn(m,g,u.resolvedValue,x=>{m.columnFiltersMeta[g]=x})}if(s.length){for(let y=0;y<s.length;y++){d=s[y];const g=d.id;if(d.filterFn(m,g,d.resolvedValue,x=>{m.columnFiltersMeta[g]=x})){m.columnFilters.__global__=!0;break}}m.columnFilters.__global__!==!0&&(m.columnFilters.__global__=!1)}}const f=h=>{for(let m=0;m<a.length;m++)if(h.columnFilters[a[m]]===!1)return!1;return!0};return sRe(e.rows,f,t)},Se(t.options,"debugTable","getFilteredRowModel",()=>t._autoResetPageIndex()))}function u3(t){return e=>_e(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(n,r)=>{if(!r.rows.length)return r;const{pageSize:i,pageIndex:s}=n;let{rows:a,flatRows:l,rowsById:c}=r;const u=i*s,d=u+i;a=a.slice(u,d);let f;e.options.paginateExpandedRows?f={rows:a,flatRows:l,rowsById:c}:f=iRe({rows:a,flatRows:l,rowsById:c}),f.flatRows=[];const h=m=>{f.flatRows.push(m),m.subRows.length&&m.subRows.forEach(h)};return f.rows.forEach(h),f},Se(e.options,"debugTable"))}function d3(){return t=>_e(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;const r=t.getState().sorting,i=[],s=r.filter(c=>{var u;return(u=t.getColumn(c.id))==null?void 0:u.getCanSort()}),a={};s.forEach(c=>{const u=t.getColumn(c.id);u&&(a[c.id]={sortUndefined:u.columnDef.sortUndefined,invertSorting:u.columnDef.invertSorting,sortingFn:u.getSortingFn()})});const l=c=>{const u=c.map(d=>({...d}));return u.sort((d,f)=>{for(let m=0;m<s.length;m+=1){var h;const y=s[m],g=a[y.id],x=g.sortUndefined,w=(h=y==null?void 0:y.desc)!=null?h:!1;let b=0;if(x){const v=d.getValue(y.id),N=f.getValue(y.id),S=v===void 0,A=N===void 0;if(S||A){if(x==="first")return S?-1:1;if(x==="last")return S?1:-1;b=S&&A?0:S?x:-x}}if(b===0&&(b=g.sortingFn(d,f,y.id)),b!==0)return w&&(b*=-1),g.invertSorting&&(b*=-1),b}return d.index-f.index}),u.forEach(d=>{var f;i.push(d),(f=d.subRows)!=null&&f.length&&(d.subRows=l(d.subRows))}),u};return{rows:l(n.rows),flatRows:i,rowsById:n.rowsById}},Se(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function iy(t,e){return t?lRe(t)?k.createElement(t,e):t:null}function lRe(t){return cRe(t)||typeof t=="function"||uRe(t)}function cRe(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function uRe(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function f3(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=k.useState(()=>({current:rRe(e)})),[r,i]=k.useState(()=>n.current.initialState);return n.current.setOptions(s=>({...s,...t,state:{...r,...t.state},onStateChange:a=>{i(a),t.onStateChange==null||t.onStateChange(a)}})),n.current}function dRe({progress:t,onClose:e}){if(!t||!t.open)return null;const{total:n=0,current:r=0,successCount:i=0,failedRows:s=[],done:a=!1,unmatchedSources:l=[]}=t,c=s.length,u=n>0?Math.round(r/n*100):0,d=()=>{a&&e()},f=h=>{h.target===h.currentTarget&&a&&e()};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",onClick:f,children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-lg border border-gray-200 overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 bg-slate-50",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-9 h-9 bg-green-100 rounded-xl flex items-center justify-center",children:o.jsx(QB,{className:"w-5 h-5 text-green-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900 text-base",children:"CSV Import"}),o.jsx("p",{className:"text-xs text-gray-500",children:a?"Import complete":"Importing leads, please wait"})]})]}),o.jsx("button",{onClick:d,disabled:!a,title:a?"Close":"Please wait until import finishes",className:`p-2 rounded-lg transition-colors ${a?"hover:bg-gray-100 text-gray-500 cursor-pointer":"text-gray-300 cursor-not-allowed"}`,children:o.jsx(Dt,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"px-6 py-5 space-y-5",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm",children:[o.jsx("span",{className:"text-gray-600 font-medium",children:a?"Finished":`Processing row ${r} of ${n}`}),o.jsxs("span",{className:"font-bold text-gray-800",children:[u,"%"]})]}),o.jsx("div",{className:"w-full bg-gray-100 rounded-full h-3 overflow-hidden",children:o.jsx("div",{className:`h-3 rounded-full transition-all duration-300 ${a&&c===0?"bg-green-500":a&&c>0?"bg-amber-500":"bg-blue-500"}`,style:{width:`${u}%`}})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"flex items-center gap-3 bg-green-50 border border-green-200 rounded-xl px-4 py-3",children:[o.jsx(KB,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-green-600 font-medium",children:"Imported"}),o.jsx("p",{className:"text-xl font-bold text-green-700",children:i})]})]}),o.jsxs("div",{className:"flex items-center gap-3 bg-red-50 border border-red-200 rounded-xl px-4 py-3",children:[o.jsx(Mm,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Failed"}),o.jsx("p",{className:"text-xl font-bold text-red-700",children:c})]})]})]}),!a&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600 bg-blue-50 border border-blue-200 rounded-lg px-4 py-2.5",children:[o.jsx(eU,{className:"w-4 h-4 animate-spin flex-shrink-0"}),o.jsx("span",{children:"Do not close or refresh this page while import is running."})]}),a&&l.length>0&&o.jsxs("div",{className:"flex items-start gap-2 bg-amber-50 border border-amber-200 rounded-lg px-4 py-3 text-sm",children:[o.jsx(ha,{className:"w-4 h-4 text-amber-500 mt-0.5 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-amber-700",children:"Unmatched sources"}),o.jsxs("p",{className:"text-amber-600 text-xs mt-0.5",children:["These sources were not found and saved as plain text:"," ",o.jsx("span",{className:"font-mono",children:l.join(", ")})]})]})]}),s.length>0&&o.jsxs("div",{children:[o.jsxs("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:["Failed Rows (",c,")"]}),o.jsx("div",{className:"max-h-48 overflow-y-auto rounded-lg border border-red-200",children:o.jsxs("table",{className:"w-full text-xs",children:[o.jsx("thead",{className:"bg-red-50 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-3 py-2 text-left font-semibold text-red-700 w-14",children:"Row #"}),o.jsx("th",{className:"px-3 py-2 text-left font-semibold text-red-700 w-28",children:"Client"}),o.jsx("th",{className:"px-3 py-2 text-left font-semibold text-red-700",children:"Reason"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-red-100",children:s.map((h,m)=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-3 py-2 text-gray-500 font-mono",children:h.rowNumber}),o.jsx("td",{className:"px-3 py-2 text-gray-700 font-medium truncate max-w-[6rem]",children:h.clientName||""}),o.jsx("td",{className:"px-3 py-2 text-red-600 break-words",children:h.error})]},m))})]})})]})]}),a&&o.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-slate-50 flex justify-end",children:o.jsx("button",{onClick:d,className:"bg-blue-600 hover:bg-blue-700 text-white text-sm font-semibold px-5 py-2 rounded-lg transition-colors",children:"Done"})})]})})}function fRe({data:t,onSelectLead:e,onShowNewLead:n,onFileUpload:r,onTruncateLeads:i,newLeadIds:s=[],viewedLeadIds:a=[],importProgress:l,closeImportModal:c}){const{t:u}=ti(),[d,f]=k.useState(""),[h,m]=k.useState("All"),[y,g]=k.useState("All"),[x,w]=k.useState(""),[b,v]=k.useState(""),[N,S]=k.useState([{id:"inquiryDate",desc:!0}]),A=k.useMemo(()=>t.filter(T=>{const O=h==="All"?!0:h==="Pipeline"?["Proposal","Negotiation"].includes(T.stage):T.stage===h,R=y==="All"||T.manager===y;let M=!0;if(x&&b){const D=new Date(T.inquiryDate),B=new Date(x);B.setHours(0,0,0,0);const U=new Date(b);U.setHours(23,59,59,999),M=!isNaN(D)&&D>=B&&D<=U}return O&&R&&M}),[t,h,y,x,b]),E=k.useMemo(()=>[{id:"clientName",accessorKey:"clientName",header:u("client"),cell:({row:T})=>o.jsx("button",{onClick:()=>e(T.original),className:"font-bold text-blue-600 hover:text-blue-800 hover:underline text-left",children:T.original.clientName})},{accessorKey:"stage",header:u("stage"),cell:({getValue:T})=>{const O=T(),R=Kr[O]||Kr.New;return o.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${R.bg} ${R.text}`,children:O})}},{accessorKey:"quotationAmount",header:u("quotationAmount"),cell:({getValue:T})=>Oe(T()),sortingFn:(T,O,R)=>ft(T.getValue(R))-ft(O.getValue(R))},{accessorKey:"clientBudget",header:u("clientBudget"),cell:({getValue:T})=>{const O=T();return O?Oe(O):o.jsx("span",{className:"text-gray-400",children:"-"})},sortingFn:(T,O,R)=>ft(T.getValue(R))-ft(O.getValue(R))},{accessorKey:"source",header:u("source"),cell:({getValue:T})=>{const O=T();return O?o.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-700",children:O}):null}},{accessorKey:"inquiryDate",header:u("date"),cell:({getValue:T})=>o.jsx("span",{className:"text-gray-500",children:T()})}],[e,u]),_=f3({data:A,columns:E,state:{globalFilter:d,sorting:N},onGlobalFilterChange:f,onSortingChange:S,getCoreRowModel:l3(),getSortedRowModel:d3(),getFilteredRowModel:c3(),getPaginationRowModel:u3(),initialState:{pagination:{pageSize:10}}}),C=[...new Set(t.map(T=>T.manager))],P=T=>Kr[T]||Kr.New;return o.jsxs("div",{className:"space-y-4 animate-fade-in",children:[o.jsxs("div",{className:"flex flex-col gap-3 bg-white p-4 md:p-5 rounded-xl border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:u("allLeads")}),o.jsxs("p",{className:"text-sm text-gray-500",children:[t.length," ",u("leads").toLowerCase()]})]}),o.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[o.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[o.jsx(Sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{className:"w-full sm:w-64 pl-10 pr-4 py-2.5 bg-slate-50 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:u("searchLeads"),value:d??"",onChange:T=>f(T.target.value)})]}),o.jsxs("label",{className:"bg-green-600 text-white px-4 py-2.5 rounded-lg text-sm font-semibold flex items-center gap-2 hover:bg-green-700 transition-colors whitespace-nowrap cursor-pointer",children:[o.jsx(fU,{className:"w-4 h-4"})," ",o.jsx("span",{className:"hidden sm:inline",children:u("importCsv")}),o.jsx("input",{type:"file",className:"hidden",accept:".csv",onChange:r})]}),i&&o.jsxs("button",{onClick:i,className:"bg-red-600 text-white px-4 py-2.5 rounded-lg text-sm font-semibold flex items-center gap-2 hover:bg-red-700 transition-colors whitespace-nowrap",children:[o.jsx(Ui,{className:"w-4 h-4"})," ",o.jsx("span",{className:"hidden sm:inline",children:u("deleteAll")})]}),o.jsxs("button",{onClick:n,className:"bg-blue-600 text-white px-4 py-2.5 rounded-lg text-sm font-semibold flex items-center gap-2 hover:bg-blue-700 transition-colors whitespace-nowrap",children:[o.jsx(no,{className:"w-4 h-4"})," ",o.jsx("span",{className:"hidden sm:inline",children:u("addLead")})]})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[o.jsxs("select",{className:"bg-slate-50 border border-gray-200 rounded-lg text-sm px-3 py-2",value:h,onChange:T=>m(T.target.value),children:[o.jsx("option",{value:"All",children:u("allStages")}),la.map(T=>o.jsx("option",{value:T,children:T},T)),o.jsx("option",{value:"Pipeline",children:u("pipeline")})]}),o.jsxs("select",{className:"bg-slate-50 border border-gray-200 rounded-lg text-sm px-3 py-2",value:y,onChange:T=>g(T.target.value),children:[o.jsx("option",{value:"All",children:u("allManagers")}),C.map(T=>o.jsx("option",{value:T,children:T},T))]}),o.jsxs("div",{className:"flex items-center gap-1 bg-slate-50 border border-gray-200 rounded-lg text-sm px-3 py-2",children:[o.jsx("input",{type:"date",className:"bg-transparent border-none text-sm p-1",value:x,onChange:T=>{w(T.target.value)}}),o.jsx("span",{className:"text-gray-400",children:"-"}),o.jsx("input",{type:"date",className:"bg-transparent border-none text-sm p-1",value:b,onChange:T=>v(T.target.value)}),(x||b)&&o.jsx("button",{onClick:()=>{w(""),v("")},className:"text-xs text-red-500 px-2",children:u("clear")})]})]})]}),o.jsx("div",{className:"md:hidden space-y-2",children:_.getRowModel().rows.map(T=>o.jsxs("div",{onClick:()=>e(T.original),className:"bg-white p-4 rounded-xl border shadow-sm active:bg-gray-50 cursor-pointer",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:"font-bold text-gray-900",children:T.original.clientName}),o.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-1",children:[o.jsx(Gn,{className:"w-3 h-3"})," ",T.original.phone]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${P(T.original.stage).bg} ${P(T.original.stage).text}`,children:T.original.stage}),o.jsx(pa,{className:"w-4 h-4 text-gray-400"})]})]}),o.jsxs("div",{className:"flex justify-between items-center mt-2 pt-2 border-t",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"Quotation"}),o.jsx("span",{className:"text-sm font-bold text-green-600",children:Oe(T.original.quotationAmount)})]}),T.original.clientBudget&&o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"Client Budget"}),o.jsx("span",{className:"text-sm font-bold text-blue-600",children:Oe(T.original.clientBudget)})]}),o.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[o.jsx(on,{className:"w-3 h-3"})," ",T.original.inquiryDate]})]})]},T.id))}),o.jsxs("div",{className:"hidden md:block bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:"bg-slate-50 border-b border-gray-200",children:_.getHeaderGroups().map(T=>o.jsx("tr",{children:T.headers.map(O=>o.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:O.isPlaceholder?null:o.jsxs("div",{className:O.column.getCanSort()?"cursor-pointer select-none flex items-center gap-2":"",onClick:O.column.getToggleSortingHandler(),children:[iy(O.column.columnDef.header,O.getContext()),{asc:o.jsx(ia,{className:"w-4 h-4"}),desc:o.jsx(to,{className:"w-4 h-4"})}[O.column.getIsSorted()]??null]})},O.id))},T.id))}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.getRowModel().rows.map(T=>{const O=s.includes(T.original.id),R=a.includes(T.original.id);return o.jsx("tr",{className:`
                        transition-colors 
                        ${O?"bg-yellow-50 hover:bg-yellow-100 border-l-4 border-l-yellow-400":""}
                        ${R?"opacity-60 hover:opacity-100":"hover:bg-slate-50"}
                    `,children:T.getVisibleCells().map(M=>o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:iy(M.column.columnDef.cell,M.getContext())},M.id))},T.id)})})]})}),o.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex flex-col sm:flex-row items-center justify-between gap-4 bg-slate-50",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm text-gray-600",children:u("show")}),o.jsx("select",{value:_.getState().pagination.pageSize,onChange:T=>{_.setPageSize(Number(T.target.value))},className:"border border-gray-200 rounded-lg px-3 py-1.5 text-sm bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[10,20,50].map(T=>o.jsx("option",{value:T,children:T},T))}),o.jsx("span",{className:"text-sm text-gray-600",children:u("perPage")})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:[u("page")," ",o.jsx("span",{className:"font-semibold text-gray-900",children:_.getState().pagination.pageIndex+1})," ",u("of")," ",o.jsx("span",{className:"font-semibold text-gray-900",children:_.getPageCount()}),"  ",o.jsxs("span",{className:"text-gray-500",children:[_.getFilteredRowModel().rows.length," ",u("results")]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>_.setPageIndex(0),disabled:!_.getCanPreviousPage(),className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"First page",children:o.jsx(K_,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>_.previousPage(),disabled:!_.getCanPreviousPage(),className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Previous page",children:o.jsx(Ay,{className:"w-4 h-4"})}),o.jsx("div",{className:"hidden sm:flex items-center gap-1 mx-2",children:Array.from({length:Math.min(5,_.getPageCount())},(T,O)=>{const R=_.getState().pagination.pageIndex,M=_.getPageCount();let D;return M<=5||R<=2?D=O:R>=M-3?D=M-5+O:D=R-2+O,o.jsx("button",{onClick:()=>_.setPageIndex(D),className:`w-9 h-9 rounded-lg text-sm font-medium transition-colors ${R===D?"bg-blue-600 text-white":"border border-gray-200 hover:bg-gray-50 text-gray-700"}`,children:D+1},D)})}),o.jsx("button",{onClick:()=>_.nextPage(),disabled:!_.getCanNextPage(),className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Next page",children:o.jsx(pa,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>_.setPageIndex(_.getPageCount()-1),disabled:!_.getCanNextPage(),className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Last page",children:o.jsx(Y_,{className:"w-4 h-4"})})]})]})]}),o.jsx(dRe,{progress:l,onClose:c})]})}function hRe({contacts:t,loading:e,onAddContact:n,onUpdateContact:r,onDeleteContact:i,onDeleteAllContacts:s}){const[a,l]=W_(),c=a.get("modal")==="new-contact",u=a.get("contactId"),d=a.get("modal")==="edit-contact",f=k.useMemo(()=>!d||!u?null:t.find(A=>A.id==u)||null,[t,u,d]),h=A=>{l(E=>{const _=new URLSearchParams(E);return A?_.set("modal","new-contact"):_.get("modal")==="new-contact"&&_.delete("modal"),_})},m=A=>{l(E=>{const _=new URLSearchParams(E);return A?(_.set("modal","edit-contact"),_.set("contactId",A.id)):(_.get("modal")==="edit-contact"&&_.delete("modal"),_.delete("contactId")),_})},[y,g]=k.useState(""),[x,w]=k.useState([]),b=k.useMemo(()=>[{id:"name",accessorFn:A=>`${A.firstName} ${A.lastName||""}`.trim(),header:"Name",cell:({row:A})=>o.jsxs("button",{onClick:()=>m(A.original),className:"font-semibold text-blue-600 hover:text-blue-800 hover:underline text-left",children:[A.original.firstName," ",A.original.lastName||""]})},{accessorKey:"phone",header:"Phone",cell:({getValue:A})=>o.jsx("span",{className:"font-mono text-gray-600",children:A()})},{accessorKey:"email",header:"Email",cell:({getValue:A})=>o.jsx("span",{className:"text-gray-500 truncate max-w-[200px] block",children:A()||"-"})},{accessorKey:"createdAt",header:"Created",cell:({getValue:A})=>{const E=A();return E?new Date(E).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"-"}},{id:"actions",header:"Actions",cell:({row:A})=>o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>window.open(Ao(A.original.phone),"_blank"),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"WhatsApp",children:o.jsx(dr,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>i&&i(A.original.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:o.jsx(Ui,{className:"w-4 h-4"})})]}),enableSorting:!1}],[i]),v=f3({data:t,columns:b,state:{globalFilter:y,sorting:x},onGlobalFilterChange:g,onSortingChange:w,getCoreRowModel:l3(),getSortedRowModel:d3(),getFilteredRowModel:c3(),getPaginationRowModel:u3(),initialState:{pagination:{pageSize:10}}}),N=async A=>{await n(A),h(!1)},S=async A=>{f&&f.id&&await r(f.id,A),m(null)};return o.jsxs("div",{className:"space-y-4 animate-fade-in",children:[c&&o.jsx(L1,{onClose:()=>h(!1),onSave:N}),f&&o.jsx(L1,{onClose:()=>m(null),onSave:S,initialData:f}),o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3 bg-white p-4 md:p-5 rounded-xl border border-gray-200 shadow-sm",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Contacts Directory"}),o.jsxs("p",{className:"text-sm text-gray-500",children:[t.length," total contacts"]})]}),o.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[o.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[o.jsx(Sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{className:"w-full sm:w-64 pl-10 pr-4 py-2.5 bg-slate-50 border border-gray-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"Search contacts...",value:y??"",onChange:A=>g(A.target.value)})]}),s&&o.jsxs("button",{onClick:s,className:"bg-red-600 text-white px-4 py-2.5 rounded-lg text-sm font-semibold flex items-center gap-2 hover:bg-red-700 transition-colors whitespace-nowrap",children:[o.jsx(Ui,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Delete All"})]}),o.jsxs("button",{onClick:()=>h(!0),className:"bg-blue-600 text-white px-4 py-2.5 rounded-lg text-sm font-semibold flex items-center gap-2 hover:bg-blue-700 transition-colors whitespace-nowrap",children:[o.jsx(Dm,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Add Contact"})]})]})]}),o.jsxs("div",{className:"md:hidden space-y-2",children:[e?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx(Ft,{className:"w-6 h-6 animate-spin text-blue-600"})}):v.getRowModel().rows.map(A=>o.jsx("div",{onClick:()=>m(A.original),className:"bg-white p-4 rounded-xl border shadow-sm active:bg-gray-50 cursor-pointer",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsxs("p",{className:"font-bold text-gray-900",children:[A.original.firstName," ",A.original.lastName]}),o.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-1",children:[o.jsx(Gn,{className:"w-3 h-3"})," ",A.original.phone]}),A.original.email&&o.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1 mt-0.5 truncate",children:[o.jsx(Wd,{className:"w-3 h-3"})," ",A.original.email]})]}),o.jsx("a",{href:Ao(A.original.phone),target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-green-100 text-green-600 rounded-full",onClick:E=>E.stopPropagation(),children:o.jsx(dr,{className:"w-5 h-5"})})]})},A.id)),!e&&v.getRowModel().rows.length===0&&o.jsx("div",{className:"text-center py-8 text-gray-400",children:"No contacts found"})]}),o.jsxs("div",{className:"hidden md:block bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden",children:[e?o.jsx("div",{className:"flex items-center justify-center py-16",children:o.jsx(Ft,{className:"w-8 h-8 animate-spin text-blue-600"})}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-gradient-to-r from-slate-50 to-gray-50 border-b border-gray-200",children:v.getHeaderGroups().map(A=>o.jsx("tr",{children:A.headers.map(E=>o.jsx("th",{className:`px-5 py-4 text-left font-semibold text-gray-600 ${E.column.getCanSort()?"cursor-pointer select-none hover:bg-gray-100 transition-colors":""}`,onClick:E.column.getToggleSortingHandler(),children:o.jsxs("div",{className:"flex items-center gap-2",children:[iy(E.column.columnDef.header,E.getContext()),E.column.getCanSort()&&o.jsx("span",{className:"text-gray-400",children:E.column.getIsSorted()==="asc"?o.jsx(ia,{className:"w-4 h-4"}):E.column.getIsSorted()==="desc"?o.jsx(to,{className:"w-4 h-4"}):o.jsx("div",{className:"w-4 h-4 opacity-0 group-hover:opacity-50",children:o.jsx(ia,{className:"w-4 h-4"})})})]})},E.id))},A.id))}),o.jsx("tbody",{className:"divide-y divide-gray-100",children:v.getRowModel().rows.map(A=>o.jsx("tr",{className:"hover:bg-blue-50/50 transition-colors",children:A.getVisibleCells().map(E=>o.jsx("td",{className:"px-5 py-4",children:iy(E.column.columnDef.cell,E.getContext())},E.id))},A.id))})]})}),!e&&v.getRowModel().rows.length===0&&o.jsxs("div",{className:"text-center py-16 text-gray-400",children:[o.jsx(Dm,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-lg font-medium",children:"No contacts found"}),o.jsx("p",{className:"text-sm mt-1",children:"Add your first contact to get started"})]})]}),t.length>0&&o.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Show"}),o.jsx("select",{value:v.getState().pagination.pageSize,onChange:A=>v.setPageSize(Number(A.target.value)),className:"border border-gray-200 rounded-lg px-3 py-2 text-sm bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[10,20,50].map(A=>o.jsx("option",{value:A,children:A},A))}),o.jsx("span",{className:"text-sm text-gray-600",children:"per page"})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Page"," ",o.jsx("span",{className:"font-semibold text-gray-900",children:v.getState().pagination.pageIndex+1})," ","of"," ",o.jsx("span",{className:"font-semibold text-gray-900",children:v.getPageCount()}),"  ",o.jsxs("span",{className:"text-gray-500",children:[v.getFilteredRowModel().rows.length," results"]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>v.setPageIndex(0),disabled:!v.getCanPreviousPage(),className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"First page",children:o.jsx(K_,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>v.previousPage(),disabled:!v.getCanPreviousPage(),className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Previous page",children:o.jsx(Ay,{className:"w-4 h-4"})}),o.jsx("div",{className:"hidden sm:flex items-center gap-1 mx-2",children:Array.from({length:Math.min(5,v.getPageCount())},(A,E)=>{const _=v.getState().pagination.pageIndex,C=v.getPageCount();let P;return C<=5||_<=2?P=E:_>=C-3?P=C-5+E:P=_-2+E,o.jsx("button",{onClick:()=>v.setPageIndex(P),className:`w-9 h-9 rounded-lg text-sm font-medium transition-colors ${_===P?"bg-blue-600 text-white":"border border-gray-200 hover:bg-gray-50 text-gray-700"}`,children:P+1},P)})}),o.jsx("button",{onClick:()=>v.nextPage(),disabled:!v.getCanNextPage(),className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Next page",children:o.jsx(pa,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>v.setPageIndex(v.getPageCount()-1),disabled:!v.getCanNextPage(),className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Last page",children:o.jsx(Y_,{className:"w-4 h-4"})})]})]})]})}function pRe({sources:t,leads:e=[],onAdd:n,onUpdate:r,onDelete:i,onSourceClick:s}){const[a,l]=k.useState(""),[c,u]=k.useState(!1),[d,f]=k.useState(null),[h,m]=k.useState(""),y=async()=>{a.trim()&&(u(!0),await n(a),l(""),u(!1))},g=N=>{f(N.id),m(N.name)},x=()=>{f(null),m("")},w=async N=>{h.trim()&&(await r(N,h.trim()),f(null),m(""))},b=k.useMemo(()=>{const N={};return t.forEach(S=>{const A=e.filter(_=>_.source===S.name),E=A.filter(_=>_.stage==="Booked").length;N[S.id]={total:A.length,booked:E,conversionRate:A.length>0?E/A.length*100:0}}),N},[t,e]),v=N=>{s&&!d&&s(N)};return o.jsxs("div",{className:"space-y-4 md:space-y-6 max-w-2xl mx-auto",children:[o.jsxs("div",{className:"bg-white p-4 md:p-6 rounded-xl border shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(X_,{className:"w-5 h-5 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"font-bold text-gray-900",children:"Manage Sources"}),o.jsxs("p",{className:"text-xs text-gray-500",children:[t.length," lead sources"]})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 border p-2 md:p-3 rounded-lg text-sm",value:a,onChange:N=>l(N.target.value),placeholder:"New Source Name",onKeyDown:N=>N.key==="Enter"&&y()}),o.jsxs("button",{onClick:y,disabled:c,className:"bg-blue-600 text-white px-4 md:px-6 rounded-lg hover:bg-blue-700 flex items-center gap-2 text-sm font-medium",children:[c?o.jsx(Ft,{className:"animate-spin w-4 h-4"}):o.jsx(no,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:"Add"})]})]})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:t.map(N=>{const S=b[N.id]||{total:0,booked:0,conversionRate:0};return o.jsx("div",{onClick:()=>v(N),className:`p-3 md:p-4 rounded-xl border shadow-sm transition-all ${N.isIntegration?"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200":"bg-white"} ${d?"":"cursor-pointer hover:shadow-md hover:border-blue-300"}`,children:d===N.id&&!N.isIntegration?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{className:"flex-1 border p-2 rounded-lg text-sm font-medium",value:h,onChange:A=>m(A.target.value),onKeyDown:A=>{A.key==="Enter"&&w(N.id),A.key==="Escape"&&x()},onClick:A=>A.stopPropagation(),autoFocus:!0}),o.jsx("button",{onClick:A=>{A.stopPropagation(),w(N.id)},className:"p-2 text-green-600 hover:bg-green-50 rounded-lg flex-shrink-0",children:o.jsx(H_,{className:"w-4 h-4"})}),o.jsx("button",{onClick:A=>{A.stopPropagation(),x()},className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg flex-shrink-0",children:o.jsx(Dt,{className:"w-4 h-4"})})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[N.isIntegration&&o.jsx(Gd,{className:"w-4 h-4 text-blue-500 flex-shrink-0"}),o.jsx("span",{className:"font-bold text-sm md:text-base truncate",children:N.name}),N.isIntegration&&o.jsx("span",{className:"text-[10px] bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded font-medium flex-shrink-0",children:"INTEGRATION"})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[N.isIntegration?o.jsx("div",{className:"p-1.5 text-gray-400 flex-shrink-0",title:"Integration sources cannot be modified",children:o.jsx(Ua,{className:"w-4 h-4"})}):o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:A=>{A.stopPropagation(),g(N)},className:"p-1.5 text-blue-500 hover:bg-blue-50 rounded-lg flex-shrink-0",children:o.jsx(iU,{className:"w-4 h-4"})}),o.jsx("button",{onClick:A=>{A.stopPropagation(),i(N.id)},className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg flex-shrink-0",children:o.jsx(Ui,{className:"w-4 h-4"})})]}),o.jsx(pa,{className:"w-4 h-4 text-gray-400 ml-1"})]})]}),o.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[o.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[o.jsx(Tr,{className:"w-3 h-3"}),o.jsx("span",{className:"font-medium",children:S.total}),o.jsx("span",{children:"leads"})]}),o.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[o.jsx(Kl,{className:"w-3 h-3"}),o.jsx("span",{className:"font-medium",children:S.booked}),o.jsx("span",{children:"booked"})]}),S.total>0&&o.jsxs("div",{className:`font-medium ${S.conversionRate>=5?"text-green-600":S.conversionRate>=2?"text-yellow-600":"text-gray-400"}`,children:[S.conversionRate.toFixed(1),"%"]})]})]})},N.id)})}),t.length===0&&o.jsx("div",{className:"text-center py-8 text-gray-400",children:"No sources yet. Add your first lead source above."})]})}function mRe({leads:t,currentUser:e,onSelectLead:n,onStageChange:r,onAddNote:i}){var O,R;const[s,a]=k.useState(null),[l,c]=k.useState(""),[u,d]=k.useState([]),[f,h]=k.useState(!1),[m,y]=k.useState("all"),[g,x]=k.useState(!1),[w,b]=k.useState(!1),v=k.useRef(null),{language:N,t:S,isRTL:A}=ti(),E=k.useMemo(()=>{let M=t.filter(D=>D.manager===(e==null?void 0:e.name));if(m==="new")M=M.filter(D=>D.stage==="New");else if(m==="followup"){const D=new Date().toISOString().split("T")[0];M=M.filter(B=>B.followUpDate===D)}else m==="sitevisit"&&(M=M.filter(D=>D.stage==="Site Visit Scheduled"));return M.sort((D,B)=>{var U,V,W,H;return new Date(((V=(U=B.createdAt)==null?void 0:U.toDate)==null?void 0:V.call(U))||0)-new Date(((H=(W=D.createdAt)==null?void 0:W.toDate)==null?void 0:H.call(W))||0)})},[t,e,m]),_=E.find(M=>M.id===s),C=k.useMemo(()=>{const M=t.filter(D=>D.manager===(e==null?void 0:e.name));return{total:M.length,new:M.filter(D=>D.stage==="New").length,siteVisits:M.filter(D=>D.stage==="Site Visit Scheduled").length,booked:M.filter(D=>D.stage==="Booked").length}},[t,e]),P=async()=>{if(!l.trim())return;const M=l.trim();c(""),d(B=>[...B,{role:"user",content:M}]),h(!0);const D=await Yse(M,e,N);d(B=>[...B,{role:"assistant",content:D}]),h(!1),setTimeout(()=>{var B;(B=v.current)==null||B.scrollIntoView({behavior:"smooth"})},100)},T=M=>Kr[M]||Kr.New;return _&&window.innerWidth<768?o.jsxs("div",{className:"h-full flex flex-col bg-white",children:[o.jsxs("div",{className:"p-4 border-b bg-gradient-to-r from-gray-50 to-white flex items-center gap-3",children:[o.jsx("button",{onClick:()=>a(null),className:"p-2 -ml-2 hover:bg-gray-100 rounded-lg",children:o.jsx(G_,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:_.clientName}),o.jsx("p",{className:"text-sm text-gray-500",children:_.phone})]}),o.jsx("a",{href:Ao(_.phone),target:"_blank",rel:"noopener noreferrer",className:"p-3 bg-green-500 text-white rounded-full hover:bg-green-600",children:o.jsx(dr,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"px-4 py-3 border-b overflow-x-auto",children:o.jsx("div",{className:"flex gap-2",children:la.filter(M=>M!=="Lost").map(M=>o.jsx("button",{onClick:()=>r(_.id,M,_.stage),className:`px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-all ${_.stage===M?`${T(M).bg} ${T(M).text} ring-2 ring-offset-1`:"bg-gray-100 text-gray-500"}`,children:M},M))})}),o.jsxs("div",{className:"p-4 grid grid-cols-3 gap-2",children:[o.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg text-center",children:[o.jsx("p",{className:"text-[10px] text-blue-600 font-medium",children:S("event")}),o.jsx("p",{className:"font-bold text-blue-900 text-sm truncate",children:_.eventType||"-"})]}),o.jsxs("div",{className:"bg-green-50 p-3 rounded-lg text-center",children:[o.jsx("p",{className:"text-[10px] text-green-600 font-medium",children:S("budget")}),o.jsx("p",{className:"font-bold text-green-900 text-sm truncate",children:_.amount?Oe(_.amount):"-"})]}),o.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg text-center",children:[o.jsx("p",{className:"text-[10px] text-purple-600 font-medium",children:S("source")}),_.source?o.jsx("span",{className:"inline-block px-2 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-700 truncate max-w-full",children:_.source}):o.jsx("p",{className:"font-bold text-purple-900 text-sm",children:"-"})]})]}),o.jsxs("div",{className:"px-4 pb-3 flex flex-wrap gap-3 text-sm text-gray-600",children:[_.eventDate&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(on,{className:"w-4 h-4"})," ",_.eventDate]}),_.guests&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Tr,{className:"w-4 h-4"})," ",_.guests," ",S("guests")]})]}),o.jsxs("div",{className:"flex-1 p-4 overflow-y-auto border-t",children:[o.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-3",children:S("notesAndActivity")}),_.notes&&o.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg mb-3 text-sm",children:_.notes}),(O=_.comments)==null?void 0:O.map((M,D)=>o.jsxs("div",{className:"mb-2 p-3 bg-gray-50 rounded-lg text-sm",children:[o.jsx("p",{children:M.text}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[M.author,"  ",new Date(M.timestamp).toLocaleString()]})]},D))]}),o.jsxs("div",{className:"p-4 border-t bg-gray-50 flex gap-2 safe-area-bottom",children:[o.jsx("button",{onClick:()=>n(_),className:"flex-1 py-3 bg-blue-600 text-white rounded-xl text-sm font-medium",children:S("viewDetails")}),o.jsx("button",{onClick:()=>{_.stage!=="Lost"&&(r(_.id,"Lost",_.stage),a(null))},className:"px-6 py-3 bg-red-100 text-red-600 rounded-xl text-sm font-medium",children:S("lost")})]})]}):o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsx("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white p-4 rounded-xl mb-4",children:o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsxs("h1",{className:"text-lg md:text-xl font-bold truncate",children:[S("welcome")," ",e==null?void 0:e.name]}),o.jsx("p",{className:"text-emerald-100 text-xs md:text-sm mt-1",children:S("yourLeadsAndMessages")})]}),o.jsx("button",{onClick:()=>x(!0),className:"md:hidden p-2 bg-white/20 hover:bg-white/30 rounded-lg",children:o.jsx(sr,{className:"w-4 h-4"})})]})}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-3 mb-4",children:[o.jsxs("div",{onClick:()=>y("all"),className:`p-3 rounded-xl cursor-pointer transition-all ${m==="all"?"bg-blue-600 text-white":"bg-white border hover:border-blue-300"}`,children:[o.jsx("p",{className:"text-xl md:text-2xl font-bold",children:C.total}),o.jsx("p",{className:"text-xs opacity-80",children:S("totalLeads")})]}),o.jsxs("div",{onClick:()=>y("new"),className:`p-3 rounded-xl cursor-pointer transition-all ${m==="new"?"bg-green-600 text-white":"bg-white border hover:border-green-300"}`,children:[o.jsx("p",{className:"text-xl md:text-2xl font-bold",children:C.new}),o.jsx("p",{className:"text-xs opacity-80",children:S("new")})]}),o.jsxs("div",{onClick:()=>y("sitevisit"),className:`p-3 rounded-xl cursor-pointer transition-all ${m==="sitevisit"?"bg-purple-600 text-white":"bg-white border hover:border-purple-300"}`,children:[o.jsx("p",{className:"text-xl md:text-2xl font-bold",children:C.siteVisits}),o.jsx("p",{className:"text-xs opacity-80",children:S("siteVisit")})]}),o.jsxs("div",{className:"p-3 rounded-xl bg-white border",children:[o.jsx("p",{className:"text-xl md:text-2xl font-bold text-green-600",children:C.booked}),o.jsx("p",{className:"text-xs text-gray-500",children:S("booked")})]})]}),o.jsxs("div",{className:"flex-1 flex flex-col md:flex-row gap-4 min-h-0",children:[o.jsxs("div",{className:"flex-1 md:w-1/3 md:flex-none bg-white rounded-xl border shadow-sm flex flex-col min-h-0",children:[o.jsx("div",{className:"p-3 border-b bg-gray-50",children:o.jsxs("h2",{className:"font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(dr,{className:"w-4 h-4"})," ",S("inbox")]})}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:E.length===0?o.jsxs("div",{className:"p-8 text-center text-gray-400",children:[o.jsx(Tr,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),o.jsx("p",{children:S("noLeads")})]}):E.map(M=>o.jsxs("div",{onClick:()=>a(M.id),className:`p-4 border-b cursor-pointer hover:bg-gray-50 transition-colors active:bg-gray-100 ${s===M.id?"bg-blue-50 border-l-4 border-l-blue-500":""}`,children:[o.jsxs("div",{className:"flex justify-between items-start gap-2",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:"font-bold text-gray-900 truncate",children:M.clientName}),o.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-1",children:[o.jsx(Gn,{className:"w-3 h-3 flex-shrink-0"})," ",M.phone]})]}),o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold flex-shrink-0 ${T(M.stage).bg} ${T(M.stage).text}`,children:M.stage})]}),M.eventDate&&o.jsxs("p",{className:"text-xs text-gray-400 mt-2 flex items-center gap-1",children:[o.jsx(on,{className:"w-3 h-3"})," ",M.eventDate]})]},M.id))})]}),o.jsx("div",{className:"hidden md:flex flex-1 bg-white rounded-xl border shadow-sm flex-col",children:_?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"p-4 border-b bg-gradient-to-r from-gray-50 to-white",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:_.clientName}),o.jsxs("div",{className:"flex gap-3 mt-1 text-sm text-gray-500",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Gn,{className:"w-3 h-3"})," ",_.phone]}),_.eventDate&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(on,{className:"w-3 h-3"})," ",_.eventDate]}),_.guests&&o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Tr,{className:"w-3 h-3"})," ",_.guests," ",S("guests")]})]})]}),o.jsx("a",{href:Ao(_.phone),target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-green-500 text-white rounded-full hover:bg-green-600",children:o.jsx(dr,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"flex gap-1 mt-3 overflow-x-auto pb-1",children:la.filter(M=>M!=="Lost").map(M=>o.jsx("button",{onClick:()=>r(_.id,M,_.stage),className:`px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap transition-all ${_.stage===M?`${T(M).bg} ${T(M).text} ring-2 ring-offset-1 ${T(M).border}`:"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:M},M))})]}),o.jsxs("div",{className:"p-4 border-b grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[o.jsx("p",{className:"text-xs text-blue-600 font-medium",children:S("event")}),o.jsx("p",{className:"font-bold text-blue-900",children:_.eventType||"-"})]}),o.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[o.jsx("p",{className:"text-xs text-green-600 font-medium",children:S("budget")}),o.jsx("p",{className:"font-bold text-green-900",children:_.amount?Oe(_.amount):"-"})]}),o.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg",children:[o.jsx("p",{className:"text-xs text-purple-600 font-medium",children:S("source")}),_.source?o.jsx("span",{className:"inline-block px-2 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-700",children:_.source}):o.jsx("p",{className:"font-bold text-purple-900",children:"-"})]})]}),o.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[o.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-3",children:S("notesAndActivity")}),_.notes&&o.jsx("div",{className:"bg-yellow-50 p-3 rounded-lg mb-3 text-sm",children:_.notes}),(R=_.comments)==null?void 0:R.map((M,D)=>o.jsxs("div",{className:"mb-2 p-2 bg-gray-50 rounded text-sm",children:[o.jsx("p",{children:M.text}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[M.author,"  ",new Date(M.timestamp).toLocaleString()]})]},D))]}),o.jsxs("div",{className:"p-3 border-t bg-gray-50 flex gap-2",children:[o.jsx("button",{onClick:()=>n(_),className:"flex-1 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700",children:S("viewDetails")}),o.jsx("button",{onClick:()=>{_.stage!=="Lost"&&r(_.id,"Lost",_.stage)},className:"px-4 py-2 bg-red-100 text-red-600 rounded-lg text-sm font-medium hover:bg-red-200",children:S("lost")})]})]}):o.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:o.jsxs("div",{className:"text-center",children:[o.jsx(hi,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{children:S("selectLead")})]})})}),w?o.jsxs("button",{onClick:()=>b(!1),className:"hidden md:flex fixed bottom-6 right-6 items-center gap-2 px-4 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-full shadow-lg hover:shadow-xl hover:scale-105 transition-all z-40",children:[o.jsx(sr,{className:"w-5 h-5 text-yellow-300"}),o.jsx("span",{className:"font-medium",children:S("aiAssistant")}),o.jsx(Ay,{className:"w-4 h-4"})]}):o.jsxs("div",{className:"hidden md:flex w-80 bg-gradient-to-b from-indigo-900 to-slate-900 rounded-xl shadow-sm flex-col text-white",children:[o.jsxs("div",{className:"p-4 border-b border-white/10",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h2",{className:"font-bold flex items-center gap-2",children:[o.jsx(sr,{className:"w-4 h-4 text-yellow-400"}),S("aiAssistant")]}),o.jsx("button",{onClick:()=>b(!0),className:"p-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",title:"Collapse AI Panel",children:o.jsx(Dt,{className:"w-4 h-4"})})]}),o.jsx("p",{className:"text-xs text-indigo-300 mt-1",children:S("askInUrdu")})]}),o.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-3",children:[u.length===0?o.jsxs("div",{className:"text-center text-indigo-300 text-sm",children:[o.jsx(sr,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),o.jsx("p",{children:S("example")}),o.jsxs("p",{className:"text-xs mt-2 opacity-70",children:['"',S("showTodayFollowups"),'"']}),o.jsxs("p",{className:"text-xs opacity-70",children:['"',S("whatIsLeadStatus"),'"']}),o.jsxs("p",{className:"text-xs opacity-70",children:['"',S("isDateAvailable"),'"']})]}):u.map((M,D)=>o.jsx("div",{className:`rounded-lg p-3 text-sm leading-relaxed ${M.role==="user"?"bg-indigo-600 ml-8":"bg-white/10 mr-8"}`,children:M.content},D)),f&&o.jsx("div",{className:"bg-white/10 rounded-lg p-3 mr-8",children:o.jsxs("div",{className:"flex gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),o.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),o.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})}),o.jsx("div",{ref:v})]}),o.jsx("div",{className:"p-3 border-t border-white/10",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-sm placeholder-indigo-300 outline-none focus:border-indigo-400",placeholder:S("typeQuestion"),value:l,onChange:M=>c(M.target.value),onKeyDown:M=>M.key==="Enter"&&P(),dir:A?"rtl":"ltr"}),o.jsx("button",{onClick:P,disabled:f,className:"p-2 bg-indigo-600 hover:bg-indigo-500 rounded-lg disabled:opacity-50",children:f?o.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):o.jsx(Rm,{className:"w-5 h-5"})})]})})]})]}),g&&o.jsxs("div",{className:"md:hidden fixed inset-0 z-50 bg-gradient-to-b from-indigo-900 to-slate-900 flex flex-col text-white",children:[o.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:[o.jsxs("h2",{className:"font-bold flex items-center gap-2",children:[o.jsx(sr,{className:"w-4 h-4 text-yellow-400"}),S("aiAssistant")]}),o.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-white/10 rounded-lg",children:o.jsx(Dt,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-3",children:[u.length===0?o.jsxs("div",{className:"text-center text-indigo-300 text-sm py-8",children:[o.jsx(sr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-lg mb-4",children:S("askInUrdu")}),o.jsxs("p",{className:"text-xs opacity-70",children:['"',S("showTodayFollowups"),'"']}),o.jsxs("p",{className:"text-xs opacity-70",children:['"',S("whatIsLeadStatus"),'"']}),o.jsxs("p",{className:"text-xs opacity-70",children:['"',S("isDateAvailable"),'"']})]}):u.map((M,D)=>o.jsx("div",{className:`rounded-lg p-4 text-sm leading-relaxed ${M.role==="user"?"bg-indigo-600 ml-8":"bg-white/10 mr-8"}`,children:M.content},D)),f&&o.jsx("div",{className:"bg-white/10 rounded-lg p-4 mr-8",children:o.jsxs("div",{className:"flex gap-1",children:[o.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),o.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),o.jsx("div",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),o.jsx("div",{className:"p-4 border-t border-white/10 safe-area-bottom",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 bg-white/10 border border-white/20 rounded-xl px-4 py-3 text-base placeholder-indigo-300 outline-none focus:border-indigo-400",placeholder:S("typeQuestion"),value:l,onChange:M=>c(M.target.value),onKeyDown:M=>M.key==="Enter"&&P(),dir:A?"rtl":"ltr"}),o.jsx("button",{onClick:P,disabled:f,className:"p-3 bg-indigo-600 hover:bg-indigo-500 rounded-xl disabled:opacity-50",children:f?o.jsx("div",{className:"w-6 h-6 border-2 border-white/30 border-t-white rounded-full animate-spin"}):o.jsx(Rm,{className:"w-6 h-6"})})]})})]})]})}function gRe({leads:t=[],onShowRevenue:e}){const{t:n,language:r}=ti(),[i,s]=k.useState(""),[a,l]=k.useState(""),[c,u]=k.useState(!1),[d,f]=k.useState("month"),[h,m]=k.useState(null),[y,g]=k.useState(null),[x,w]=k.useState(null),b=k.useMemo(()=>{const C=new Date,P=r==="ur"?"ur-PK":"en-US";let T,O,R,M,D=[];const B=F=>{const K=new Date(F),ce=K.getDay(),de=K.getDate()-ce+(ce===0?-6:1);return new Date(K.setDate(de))};switch(d){case"week":T=B(C),T.setHours(0,0,0,0),O=new Date(C),R=new Date(T),R.setDate(T.getDate()-7),M=new Date(T),M.setSeconds(M.getSeconds()-1);for(let ce=0;ce<7;ce++){const de=new Date(T);if(de.setDate(de.getDate()+ce),de>C)break;D.push({date:de,name:de.toLocaleDateString(P,{weekday:"short"})})}break;case"month":T=new Date(C.getFullYear(),C.getMonth(),1),O=new Date(C.getFullYear(),C.getMonth()+1,0),R=new Date(C.getFullYear(),C.getMonth()-1,1),M=new Date(C.getFullYear(),C.getMonth(),0);const F=O.getDate();for(let ce=1;ce<=F;ce++){const de=new Date(C.getFullYear(),C.getMonth(),ce);if(de>C)break;D.push({date:de,name:de.getDate().toString()})}break;case"quarter":const K=Math.floor(C.getMonth()/3);T=new Date(C.getFullYear(),K*3,1),O=new Date(C.getFullYear(),(K+1)*3,0),R=new Date(C.getFullYear(),(K-1)*3,1),M=new Date(C.getFullYear(),K*3,0);for(let ce=0;ce<3;ce++){const de=new Date(C.getFullYear(),K*3+ce,1);D.push({date:de,name:de.toLocaleString(P,{month:"short"})})}break;case"year":T=new Date(C.getFullYear(),0,1),O=new Date(C.getFullYear(),11,31),R=new Date(C.getFullYear()-1,0,1),M=new Date(C.getFullYear()-1,11,31);for(let ce=0;ce<12;ce++){const de=new Date(C.getFullYear(),ce,1);D.push({date:de,name:de.toLocaleString(P,{month:"short"})})}break;default:T=new Date(C.getFullYear(),C.getMonth(),1),R=new Date(C.getFullYear(),C.getMonth()-1,1),D=[]}const U=F=>{var K,ce;if(F.inquiryDate){const de=new Date(F.inquiryDate);if(!isNaN(de.getTime()))return de.getFullYear()<100&&de.setFullYear(de.getFullYear()+2e3),de;const He=F.inquiryDate.match(/(\d{1,2})-(\w{3})-(\d{2})/);if(He){const[,en,zn,ri]=He,Pt=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"].indexOf(zn.toLowerCase());if(Pt!==-1)return new Date(2e3+parseInt(ri),Pt,parseInt(en))}}return(K=F.createdAt)!=null&&K.toDate?F.createdAt.toDate():(ce=F.createdAt)!=null&&ce.seconds?new Date(F.createdAt.seconds*1e3):F.createdAt?new Date(F.createdAt):null},V=t.filter(F=>{const K=U(F);return K&&K>=T&&K<=new Date(C)}),W=t.filter(F=>{const K=U(F);return K&&K>=R&&K<=M});D=D.map(F=>{const K=t.filter(de=>{const He=U(de);return He?d==="week"||d==="month"?He.getDate()===F.date.getDate()&&He.getMonth()===F.date.getMonth()&&He.getFullYear()===F.date.getFullYear():He.getMonth()===F.date.getMonth()&&He.getFullYear()===F.date.getFullYear():!1}),ce=K.filter(de=>Br(de.stage));return{name:F.name,leads:K.length,booked:ce.length,revenue:ce.reduce((de,He)=>de+ft(He.amount),0)}});const H=V,te={};H.forEach(F=>{const K=F.source||"Unknown";te[K]=(te[K]||0)+1});const X={};Object.keys(te).forEach(F=>{const K=H.filter(de=>(de.source||"Unknown")===F),ce=K.filter(de=>Br(de.stage)).length;X[F]=K.length>0?(ce/K.length*100).toFixed(1):0});const ie={"New Lead":"New",Proposal:"Quoted",Won:"Booked",Negotiation:"Negotiating"},q={};la.forEach(F=>q[F]=0),H.forEach(F=>{const K=ie[F.stage]||F.stage;q[K]!==void 0&&q[K]++});const ae={},ge={};H.forEach(F=>{const K=F.manager||"Unassigned";ae[K]||(ae[K]={leads:0,booked:0,revenue:0},ge[K]=[]),ae[K].leads++,Br(F.stage)&&(ae[K].booked++,ae[K].revenue+=ft(F.amount)),F.responseTimeMinutes>0&&ge[K].push(F.responseTimeMinutes)}),Object.keys(ae).forEach(F=>{const K=ge[F]||[];ae[F].avgResponseTime=K.length>0?Math.round(K.reduce((ce,de)=>ce+de,0)/K.length):null});const Fe=H.filter(F=>F.responseTimeMinutes>0).map(F=>F.responseTimeMinutes),et=Fe.length>0?Math.round(Fe.reduce((F,K)=>F+K,0)/Fe.length):null,se=V.filter(F=>Br(F.stage)).reduce((F,K)=>F+ft(K.amount),0),ye=W.filter(F=>Br(F.stage)).reduce((F,K)=>F+ft(K.amount),0),ve=new Date(C.getFullYear(),0,1),ze=t.filter(F=>{const K=U(F);return K&&K>=ve}).filter(F=>Br(F.stage)).reduce((F,K)=>F+ft(K.amount),0),Pe=V.filter(F=>Br(F.stage)),Je=V.length>0?(Pe.length/V.length*100).toFixed(1):0,st=t.filter(F=>{var de,He,en,zn;if(!["New","Contacted"].includes(F.stage))return!1;const K=((He=(de=F.lastContactedAt)==null?void 0:de.toDate)==null?void 0:He.call(de))||((zn=(en=F.createdAt)==null?void 0:en.toDate)==null?void 0:zn.call(en));return K?(C-K)/(1e3*60*60)>24:!1}),Tt=t.filter(F=>F.stage==="Booked"&&F.paymentStatus==="overdue");return{totalLeads:t.length,periodLeads:V.length,previousPeriodLeads:W.length,leadsBySource:te,conversionBySource:X,leadsByStage:q,employeeStats:ae,revenueInPeriod:se,previousRevenue:ye,ytdRevenue:ze,conversionRate:Je,trendData:D,staleLeads:st,overduePayments:Tt,avgResponseTime:et,revenueGrowth:ye>0?((se-ye)/ye*100).toFixed(1):0}},[t,d]),v=async()=>{if(!i.trim())return;u(!0);const C=await GD(i);l(C),u(!1)},N=Object.entries(b.leadsBySource).map(([C,P])=>({name:C,value:P})).sort((C,P)=>P.value-C.value).slice(0,6);la.filter(C=>C!=="Lost").map((C,P)=>({name:C,value:b.leadsByStage[C]||0,fill:Ps[P%Ps.length]}));const S=Object.entries(b.employeeStats).map(([C,P])=>({name:C.split(" ")[0],leads:P.leads,booked:P.booked,revenue:P.revenue,conversion:P.leads>0?(P.booked/P.leads*100).toFixed(0):0,avgResponseTime:P.avgResponseTime})).sort((C,P)=>P.revenue-C.revenue),A=()=>{const C=new Date,P=new Date(C.getFullYear(),C.getMonth(),1);switch(h){case"leads":return t.filter(O=>{var M,D;return(((D=(M=O.createdAt)==null?void 0:M.toDate)==null?void 0:D.call(M))||new Date(O.inquiryDate))>=P});case"conversion":return t.filter(O=>Br(O.stage));case"stale":return b.staleLeads;case"ytd":const T=new Date(C.getFullYear(),0,1);return t.filter(O=>{var M,D;return(((D=(M=O.createdAt)==null?void 0:M.toDate)==null?void 0:D.call(M))||new Date(O.inquiryDate))>=T&&Br(O.stage)});case"source":return y?t.filter(O=>(O.source||"Unknown")===y):[];case"funnel":return x?t.filter(O=>O.stage===x):[];default:return[]}},E=()=>{switch(h){case"leads":return`${n("leadsThisMonth")} (${b.periodLeads})`;case"conversion":return`${n("bookedLeads")} (${b.conversionRate}% ${n("conversionRate").toLowerCase()})`;case"stale":return`${n("staleLeads")} (${b.staleLeads.length})`;case"ytd":return`${n("revenueYtd")} - ${Oe(b.ytdRevenue)}`;case"source":return`${n("source")}: ${y}`;case"funnel":return`${n("stage")}: ${x}`;default:return""}},_=()=>{if(!h)return null;const C=A();return o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b bg-gray-50 flex justify-between items-center",children:[o.jsx("h3",{className:"font-bold text-gray-900",children:E()}),o.jsx("button",{onClick:()=>{m(null),g(null),w(null)},className:"p-2 hover:bg-gray-200 rounded-lg",children:o.jsx(Dt,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"overflow-y-auto max-h-[60vh]",children:C.length===0?o.jsx("div",{className:"p-8 text-center text-gray-400",children:n("noBookingsFound").replace("bookings","leads")}):o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50 sticky top-0",children:o.jsxs("tr",{className:"text-left text-gray-500",children:[o.jsx("th",{className:"px-4 py-3",children:n("client")}),o.jsx("th",{className:"px-4 py-3",children:n("stage")}),o.jsx("th",{className:"px-4 py-3 hidden sm:table-cell",children:n("source")}),o.jsx("th",{className:"px-4 py-3 text-right",children:n("amount")}),o.jsx("th",{className:"px-4 py-3",children:n("actions")})]})}),o.jsx("tbody",{className:"divide-y",children:C.map(P=>{var T,O;return o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"px-4 py-3",children:[o.jsx("div",{className:"font-medium text-gray-900",children:P.clientName}),o.jsx("div",{className:"text-xs text-gray-500",children:P.phone})]}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${((T=Kr[P.stage])==null?void 0:T.bg)||"bg-gray-100"} ${((O=Kr[P.stage])==null?void 0:O.text)||"text-gray-600"}`,children:P.stage})}),o.jsx("td",{className:"px-4 py-3 hidden sm:table-cell",children:P.source?o.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-700",children:P.source}):o.jsx("span",{className:"text-gray-400",children:"-"})}),o.jsx("td",{className:"px-4 py-3 text-right font-medium",children:Oe(P.amount)}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("a",{href:Ao(P.phone),target:"_blank",rel:"noopener noreferrer",className:"p-2 text-green-600 hover:bg-green-50 rounded-lg inline-block",children:o.jsx(dr,{className:"w-4 h-4"})})})]},P.id)})})]})}),o.jsxs("div",{className:"p-4 border-t bg-gray-50 text-sm text-gray-500",children:[C.length," ",n("leads"),"  ",n("total"),": ",Oe(C.reduce((P,T)=>P+ft(T.amount),0))]})]})})};return o.jsxs("div",{className:"space-y-4 md:space-y-6",children:[o.jsx(_,{}),o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600",children:n("ownerDashboard")}),o.jsxs("p",{className:"text-gray-500 mt-1",children:[n("welcomeBack"),", ",o.jsx("span",{className:"font-semibold text-gray-900",children:"Admin"})]})]}),o.jsxs("div",{className:"flex bg-white rounded-xl shadow-sm border p-1",children:[o.jsx("button",{onClick:()=>f("week"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${d==="week"?"bg-blue-600 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"Week"}),o.jsx("button",{onClick:()=>f("month"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${d==="month"?"bg-blue-600 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"Month"}),o.jsx("button",{onClick:()=>f("quarter"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${d==="quarter"?"bg-blue-600 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"Quarter"}),o.jsx("button",{onClick:()=>f("year"),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${d==="year"?"bg-blue-600 text-white shadow-md":"text-gray-500 hover:bg-gray-50"}`,children:"Year"})]})]}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:n("quickStats")}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[o.jsxs("div",{onClick:()=>e&&e(),className:"bg-white p-4 rounded-2xl border shadow-sm hover:shadow-md transition-all cursor-pointer group relative overflow-hidden",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("div",{className:"p-2 bg-green-100 text-green-600 rounded-xl group-hover:scale-110 transition-transform",children:o.jsx(Ro,{className:"w-5 h-5"})}),o.jsxs("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded-full flex items-center gap-0.5 ${parseFloat(b.revenueGrowth)>=0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[parseFloat(b.revenueGrowth)>=0?o.jsx(UB,{className:"w-2.5 h-2.5"}):o.jsx(BB,{className:"w-2.5 h-2.5"}),Math.abs(b.revenueGrowth),"%"]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 font-medium truncate",children:n("revenue")}),o.jsx("h3",{className:"text-lg font-bold text-gray-900 mt-1 truncate",children:Oe(b.revenueInPeriod)})]})]}),o.jsxs("div",{className:"bg-white p-4 rounded-2xl border shadow-sm",children:[o.jsx("div",{className:"flex justify-between items-start mb-4",children:o.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-xl",children:o.jsx(as,{className:"w-5 h-5"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 font-medium truncate",children:n("booked")}),o.jsx("h3",{className:"text-lg font-bold text-gray-900 mt-1",children:b.periodLeads>0?b.trendData.reduce((C,P)=>C+P.booked,0):0})]})]}),o.jsxs("div",{onClick:()=>m("leads"),className:"bg-white p-4 rounded-2xl border shadow-sm cursor-pointer hover:shadow-md transition-all",children:[o.jsx("div",{className:"flex justify-between items-start mb-4",children:o.jsx("div",{className:"p-2 bg-amber-100 text-amber-600 rounded-xl",children:o.jsx(Tr,{className:"w-5 h-5"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 font-medium truncate",children:n("activeLeads")}),o.jsx("h3",{className:"text-lg font-bold text-gray-900 mt-1",children:b.periodLeads})]})]}),o.jsxs("div",{className:"bg-white p-4 rounded-2xl border shadow-sm",children:[o.jsx("div",{className:"flex justify-between items-start mb-4",children:o.jsx("div",{className:"p-2 bg-purple-100 text-purple-600 rounded-xl",children:o.jsx(uU,{className:"w-5 h-5"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 font-medium truncate",children:n("conversionRate")}),o.jsxs("h3",{className:"text-lg font-bold text-gray-900 mt-1",children:[b.conversionRate,"%"]})]})]}),o.jsxs("div",{className:"bg-white p-4 rounded-2xl border shadow-sm cursor-pointer hover:shadow-md transition-shadow",onClick:()=>m("ytd"),children:[o.jsx("div",{className:"flex justify-between items-start mb-4",children:o.jsx("div",{className:"p-2 bg-emerald-100 text-emerald-600 rounded-xl",children:o.jsx(Kl,{className:"w-5 h-5"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 font-medium truncate",children:n("revenueYtd")}),o.jsx("h3",{className:"text-lg font-bold text-gray-900 mt-1 truncate",children:Oe(b.ytdRevenue)})]})]}),o.jsxs("div",{className:"bg-white p-4 rounded-2xl border shadow-sm",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("div",{className:"p-2 bg-cyan-100 text-cyan-600 rounded-xl",children:o.jsx(dU,{className:"w-5 h-5"})}),b.avgResponseTime!==null&&o.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded-full ${b.avgResponseTime<=30?"bg-green-100 text-green-700":b.avgResponseTime<=120?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"}`,children:b.avgResponseTime<=30?n("excellent"):b.avgResponseTime<=120?n("good"):n("needsImprovement")})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-xs text-gray-500 font-medium truncate",children:n("avgResponseTime")}),o.jsx("h3",{className:"text-lg font-bold text-gray-900 mt-1",children:b.avgResponseTime!==null?b.avgResponseTime<60?`${b.avgResponseTime}m`:`${Math.round(b.avgResponseTime/60)}h`:""})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"lg:col-span-2 bg-white p-4 md:p-5 rounded-xl border shadow-sm",children:[o.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2 text-sm md:text-base",children:[o.jsx(TR,{className:"w-4 h-4"})," ",n("revenueLeadsTrend")]}),o.jsx("div",{className:"h-48 md:h-64",children:o.jsx(mg,{width:"100%",height:"100%",children:o.jsxs(Y5,{data:b.trendData,children:[o.jsx(P5,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),o.jsx(ko,{dataKey:"name",tick:{fontSize:10}}),o.jsx(jc,{yAxisId:"left",tick:{fontSize:10},width:30}),o.jsx(jc,{yAxisId:"right",orientation:"right",tick:{fontSize:10},width:40}),o.jsx(ir,{formatter:(C,P)=>P==="Revenue"?[`${Oe(C)}`,n("revenue")]:[`${C.toLocaleString()} ${n("leads").toLowerCase()}`,n("leads")]}),o.jsx(ao,{wrapperStyle:{fontSize:"12px"}}),o.jsx(Ei,{yAxisId:"right",type:"monotone",dataKey:"revenue",stroke:"#10B981",fill:"#10B981",fillOpacity:.1,name:n("revenue")}),o.jsx(Ei,{yAxisId:"left",type:"monotone",dataKey:"leads",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.1,name:n("leads")})]})})})]}),o.jsxs("div",{className:"bg-white p-4 md:p-5 rounded-xl border shadow-sm",children:[o.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2 text-sm md:text-base",children:[o.jsx(oU,{className:"w-4 h-4"})," ",n("trafficSources")]}),o.jsx("div",{className:"h-36 md:h-48",children:o.jsx(mg,{width:"100%",height:"100%",children:o.jsxs(JIe,{children:[o.jsx(Ss,{data:N,cx:"50%",cy:"50%",innerRadius:35,outerRadius:55,paddingAngle:2,dataKey:"value",children:N.map((C,P)=>o.jsx(yv,{fill:Ps[P%Ps.length]},`cell-${P}`))}),o.jsx(ir,{formatter:(C,P)=>[`${C.toLocaleString()} ${n("leads").toLowerCase()}`,P]})]})})}),o.jsx("div",{className:"mt-2 grid grid-cols-2 gap-x-2 gap-y-1 text-[10px] md:text-xs",children:N.map((C,P)=>o.jsxs("div",{className:"flex items-center gap-1 truncate cursor-pointer hover:bg-gray-100 p-1 rounded",onClick:()=>{g(C.name),m("source")},children:[o.jsx("span",{className:"w-2 h-2 md:w-3 md:h-3 rounded-full flex-shrink-0",style:{backgroundColor:Ps[P%Ps.length]}}),o.jsx("span",{className:"truncate text-gray-600",children:C.name==="Unknown"?n("unknownSource"):C.name}),o.jsxs("span",{className:"font-bold text-gray-800 ml-auto",children:[(C.value/b.totalLeads*100).toFixed(0),"%"]})]},C.name))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"bg-white p-4 md:p-5 rounded-xl border shadow-sm",children:[o.jsx("h3",{className:"font-bold text-gray-800 mb-4 text-sm md:text-base",children:n("leadConversionFunnel")}),o.jsx("div",{className:"space-y-2",children:la.filter(C=>C!=="Lost").map((C,P)=>{const T=b.leadsByStage[C]||0,O=Math.max(...Object.values(b.leadsByStage)),R=O>0?T/O*100:0,M=Kr[C];return o.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80",onClick:()=>{w(C),m("funnel")},children:[o.jsx("div",{className:"w-16 md:w-24 text-[10px] md:text-xs text-gray-600 truncate",children:C}),o.jsx("div",{className:"flex-1 bg-gray-100 rounded-full h-5 md:h-6 overflow-hidden",children:o.jsx("div",{className:`h-full ${M.bg} flex items-center justify-end pr-2`,style:{width:`${Math.max(R,10)}%`},children:o.jsx("span",{className:`text-[10px] md:text-xs font-bold ${M.text}`,children:T})})})]},C)})})]}),o.jsxs("div",{className:"lg:col-span-2 bg-white p-4 md:p-5 rounded-xl border shadow-sm",children:[o.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2 text-sm md:text-base",children:[o.jsx(kR,{className:"w-4 h-4"})," ",n("topPerformingEmployees")]}),o.jsx("div",{className:"overflow-x-auto -mx-4 md:mx-0",children:o.jsxs("table",{className:"w-full text-xs md:text-sm min-w-[500px]",children:[o.jsx("thead",{className:"text-left text-gray-500 border-b",children:o.jsxs("tr",{children:[o.jsx("th",{className:"pb-2 pl-4 md:pl-0",children:n("name")}),o.jsx("th",{className:"pb-2 text-center",children:n("leads")}),o.jsx("th",{className:"pb-2 text-center",children:n("booked")}),o.jsx("th",{className:"pb-2 text-center",children:n("convRateAbbr")}),o.jsx("th",{className:"pb-2 text-center",children:n("respTimeAbbr")}),o.jsx("th",{className:"pb-2 text-right pr-4 md:pr-0",children:n("revenue")})]})}),o.jsx("tbody",{className:"divide-y",children:S.slice(0,5).map((C,P)=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsxs("td",{className:"py-2 pl-4 md:pl-0 font-medium flex items-center gap-2",children:[o.jsx("span",{className:"w-5 h-5 md:w-6 md:h-6 rounded-full flex items-center justify-center text-white text-[10px] md:text-xs font-bold flex-shrink-0",style:{backgroundColor:Ps[P%Ps.length]},children:C.name[0]}),o.jsx("span",{className:"truncate",children:C.name})]}),o.jsx("td",{className:"py-2 text-center",children:C.leads}),o.jsx("td",{className:"py-2 text-center text-green-600 font-medium",children:C.booked}),o.jsx("td",{className:"py-2 text-center",children:o.jsxs("span",{className:`px-1.5 md:px-2 py-0.5 rounded text-[10px] md:text-xs font-medium ${Number(C.conversion)>=20?"bg-green-100 text-green-700":Number(C.conversion)>=10?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[C.conversion,"%"]})}),o.jsx("td",{className:"py-2 text-center",children:C.avgResponseTime!==null?o.jsx("span",{className:`px-1.5 md:px-2 py-0.5 rounded text-[10px] md:text-xs font-medium ${C.avgResponseTime<=30?"bg-green-100 text-green-700":C.avgResponseTime<=120?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:C.avgResponseTime<60?`${C.avgResponseTime}m`:`${Math.round(C.avgResponseTime/60)}h`}):o.jsx("span",{className:"text-gray-400",children:""})}),o.jsx("td",{className:"py-2 text-right pr-4 md:pr-0 font-bold",children:Oe(C.revenue)})]},C.name))})]})})]})]}),o.jsx("div",{className:"bg-gradient-to-r from-indigo-900 to-purple-900 rounded-xl p-4 md:p-6 text-white",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-start gap-4",children:[o.jsx("div",{className:"p-2 md:p-3 bg-white/10 rounded-xl w-fit",children:o.jsx(sr,{className:"w-5 h-5 md:w-6 md:h-6 text-yellow-400"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-base md:text-lg",children:n("aiBusinessAssistant")}),o.jsx("p",{className:"text-indigo-200 text-xs md:text-sm mt-1",children:n("askAboutBusiness")}),a&&o.jsx("div",{className:"mt-4 bg-white/10 rounded-lg p-3 md:p-4 text-xs md:text-sm leading-relaxed whitespace-pre-line",children:a.replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").split(`
`).map((C,P)=>o.jsx("span",{className:C.startsWith("")?"block ml-2":"block",children:C.includes(":")&&!C.startsWith("")?o.jsx("strong",{children:C}):C},P))}),o.jsxs("div",{className:"mt-4 flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 bg-white/10 border border-white/20 rounded-lg px-3 md:px-4 py-2 md:py-2.5 text-xs md:text-sm placeholder-indigo-300 outline-none focus:border-indigo-400",placeholder:n("typeQuestion"),value:i,onChange:C=>s(C.target.value),onKeyDown:C=>C.key==="Enter"&&v()}),o.jsxs("button",{onClick:v,disabled:c,className:"px-3 md:px-4 py-2 md:py-2.5 bg-indigo-600 hover:bg-indigo-500 rounded-lg font-medium text-xs md:text-sm disabled:opacity-50 flex items-center gap-1 md:gap-2",children:[c?o.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):o.jsx(Rm,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:n("askButton")})]})]}),o.jsx("div",{className:"mt-3 flex gap-2 flex-wrap",children:[n("activeLeads"),n("staleLeads"),n("revenue")].map(C=>o.jsx("button",{onClick:()=>{s(C),v()},className:"text-[10px] md:text-xs bg-white/10 hover:bg-white/20 px-2 md:px-3 py-1 md:py-1.5 rounded-full",children:C},C))})]})]})}),(b.staleLeads.length>0||b.overduePayments.length>0)&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[b.staleLeads.length>0&&o.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 md:p-4",children:[o.jsxs("h3",{className:"font-bold text-amber-800 flex items-center gap-2 mb-3 text-sm md:text-base",children:[o.jsx(ha,{className:"w-4 h-4"})," ",n("staleLeads")," (",b.staleLeads.length,")"]}),o.jsx("div",{className:"space-y-2 max-h-32 md:max-h-40 overflow-y-auto",children:b.staleLeads.slice(0,5).map(C=>{var P;return o.jsxs("div",{className:"flex justify-between items-center text-xs md:text-sm bg-white p-2 rounded",children:[o.jsx("span",{className:"font-medium truncate",children:C.clientName}),o.jsx("span",{className:"text-amber-600 ml-2 flex-shrink-0",children:(P=C.manager)==null?void 0:P.split(" ")[0]})]},C.id)})})]}),b.overduePayments.length>0&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 md:p-4",children:[o.jsxs("h3",{className:"font-bold text-red-800 flex items-center gap-2 mb-3 text-sm md:text-base",children:[o.jsx(ha,{className:"w-4 h-4"})," ",n("overduePayments")," (",b.overduePayments.length,")"]}),o.jsx("div",{className:"space-y-2 max-h-32 md:max-h-40 overflow-y-auto",children:b.overduePayments.slice(0,5).map(C=>o.jsxs("div",{className:"flex justify-between items-center text-xs md:text-sm bg-white p-2 rounded",children:[o.jsx("span",{className:"font-medium truncate",children:C.clientName}),o.jsx("span",{className:"text-red-600 ml-2 flex-shrink-0",children:Oe(C.totalDue)})]},C.id))})]})]})]})}function yRe({lead:t,onClose:e,onUpdate:n}){const{t:r}=ti(),[i,s]=k.useState(""),[a,l]=k.useState(new Date().toISOString().split("T")[0]),[c,u]=k.useState("Mid-payment"),[d,f]=k.useState(""),[h,m]=k.useState(!1),y=()=>{const E=Array.isArray(t==null?void 0:t.payments)?t.payments:[],_=E.some(C=>C.type==="Advance"||C.type==="Advance (Initial)"||C.notes&&C.notes.toLowerCase().includes("initial booking"));return t!=null&&t.advanceAmount&&t.advanceAmount>0&&!_?[{id:"legacy-advance",amount:t.advanceAmount,date:t.bookedAt||t.createdAt||new Date().toISOString(),type:"Advance (Initial)",notes:"Initial booking payment",isLegacy:!0},...E]:E},[g,x]=k.useState(y());k.useEffect(()=>{x(y())},[t]);const w=ft((t==null?void 0:t.finalAmount)||(t==null?void 0:t.amount)),b=g.reduce((E,_)=>E+ft(_.amount),0),v=w-b,N=async()=>{if(!(!i||!a)){if(Number(i)>v){alert(`Payment amount cannot exceed remaining balance (${Oe(v)})`);return}m(!0);try{const E={amount:Number(i),date:new Date(a).toISOString(),type:c,notes:d},_=await ar.addPayment(t.id,E);if(_.status){const C=_.data,P=[...g,C];x(P),n&&n(t.id,{payments:P}),s(""),f("")}}catch(E){console.error("Failed to add payment",E),alert("Failed to add payment")}finally{m(!1)}}},S=async E=>{if(E==="legacy-advance"){alert("Cannot delete the initial advance payment. This is a legacy booking payment.");return}if(confirm("Are you sure you want to delete this payment?"))try{await ar.deletePayment(t.id,E);const _=g.filter(C=>C.id!==E);x(_),n&&n(t.id,{payments:_})}catch(_){console.error("Failed to delete payment",_),alert("Failed to delete payment")}},A=E=>({Advance:r("advanceInitial"),"Advance (Initial)":r("advanceInitial"),"Mid-payment":r("midPayment"),Final:r("finalPayment"),Custom:r("custom")})[E]||E;return o.jsx("div",{className:"fixed inset-0 bg-black/50 z-[60] flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-2xl shadow-xl overflow-hidden flex flex-col max-h-[90vh]",children:[o.jsxs("div",{className:"bg-white border-b px-6 py-4 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-lg font-bold text-gray-900",children:r("paymentHistory")}),o.jsxs("p",{className:"text-sm text-gray-500",children:[t==null?void 0:t.clientName," - ",t==null?void 0:t.eventType]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full",children:o.jsx(Dt,{className:"w-5 h-5 text-gray-500"})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-50",children:[o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm",children:[o.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:r("totalValue")}),o.jsx("p",{className:"text-xl font-bold text-gray-900 mt-1",children:Oe(w)})]}),o.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm",children:[o.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:r("collected")}),o.jsx("p",{className:`text-xl font-bold mt-1 ${b>=w?"text-green-600":"text-blue-600"}`,children:Oe(b)})]}),o.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm",children:[o.jsx("p",{className:"text-xs text-gray-500 font-medium uppercase",children:r("remaining")}),o.jsx("p",{className:`text-xl font-bold mt-1 ${v>0?"text-red-600":"text-gray-400"}`,children:Oe(Math.max(0,v))})]})]}),o.jsxs("div",{className:"bg-white rounded-xl border shadow-sm p-4 mb-6",children:[o.jsxs("h3",{className:"font-bold text-gray-900 mb-4 flex items-center gap-2",children:[o.jsx(no,{className:"w-4 h-4"})," ",r("addPayment")]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:r("amount")}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"Rs"}),o.jsx("input",{type:"number",value:i,onChange:E=>s(E.target.value),className:"w-full pl-9 pr-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"0.00"})]}),o.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[r("remainingAfterPayment"),": ",o.jsx("span",{className:`font-bold ${v-(Number(i)||0)<0?"text-red-500":"text-gray-700"}`,children:Oe(Math.max(0,v-(Number(i)||0)))})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:r("date")}),o.jsx("input",{type:"date",value:a,onChange:E=>l(E.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:r("type")}),o.jsxs("select",{value:c,onChange:E=>u(E.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",children:[o.jsx("option",{value:"Advance",children:r("advanceInitial")}),o.jsx("option",{value:"Mid-payment",children:r("midPayment")}),o.jsx("option",{value:"Final",children:r("finalPayment")}),o.jsx("option",{value:"Custom",children:r("custom")})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:r("notesOptional")}),o.jsx("input",{type:"text",value:d,onChange:E=>f(E.target.value),className:"w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"e.g. Bank Transfer ID..."})]})]}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:N,disabled:h||!i||Number(i)>v,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:r(h?"adding":"addPayment")})})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-gray-900 mb-3 ml-1",children:r("paymentHistory")}),g.length===0?o.jsx("div",{className:"text-center py-8 text-gray-400 bg-white rounded-xl border border-dashed",children:r("noPaymentsRecorded")}):o.jsx("div",{className:"space-y-3",children:g.sort((E,_)=>new Date(_.date)-new Date(E.date)).map(E=>o.jsxs("div",{className:"bg-white p-4 rounded-xl border shadow-sm flex items-center justify-between group",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`p-2 rounded-lg ${E.type.includes("Advance")?"bg-purple-100 text-purple-600":E.type==="Final"?"bg-green-100 text-green-600":"bg-blue-100 text-blue-600"}`,children:o.jsx(Ro,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-gray-900",children:A(E.type)}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mt-0.5",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(on,{className:"w-3 h-3"})," ",new Date(E.date).toLocaleDateString()]}),E.notes&&o.jsxs("span",{className:"flex items-center gap-1",children:[" ",o.jsx(JB,{className:"w-3 h-3"})," ",E.notes]})]})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"font-bold text-gray-900",children:Oe(E.amount)}),!E.isLegacy&&o.jsx("button",{onClick:()=>S(E.id),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors opacity-0 group-hover:opacity-100",children:o.jsx(Ui,{className:"w-4 h-4"})})]})]},E.id))})]})]})]})})}function vRe({leads:t,onSyncPayments:e}){const{t:n,language:r}=ti(),[i,s]=k.useState("all"),[a,l]=k.useState(""),[c,u]=k.useState(""),[d,f]=k.useState(""),[h,m]=k.useState(!1),[y,g]=W_(),x=y.get("clientId"),w=k.useMemo(()=>x&&t.find(D=>D.id==x)||null,[t,x]),b=D=>{g(B=>{const U=new URLSearchParams(B);return D?(U.set("modal","payment-history"),U.set("clientId",D.id)):(U.delete("modal"),U.delete("clientId")),U})},[v,N]=k.useState(0),[S,A]=k.useState(10),E=k.useMemo(()=>{const D=new Date;return D.setHours(0,0,0,0),t.filter(B=>{const U=(B.stage||"").toLowerCase(),V=(B.status||"").toLowerCase();return U==="booked"||U==="won"||U==="completed"||V==="booked"||V==="won"||V==="completed"||U.includes("won")||V.includes("won")}).map(B=>{const U=ft(B.finalAmount!==void 0&&B.finalAmount!==null?B.finalAmount:B.quotationAmount);let V=0;const W=Array.isArray(B.payments)?B.payments:[];W.length>0&&(V=W.reduce((ie,q)=>ie+ft(q.amount),0)),!W.some(ie=>ie.type==="Advance"||ie.type==="Advance (Initial)"||ie.notes&&ie.notes.toLowerCase().includes("initial booking"))&&B.advanceAmount>0&&(V+=ft(B.advanceAmount));const te=Math.max(0,U-V);let X="pending";return U>0&&te<=0?X="paid":V>0&&(X="partial"),B.eventDate&&new Date(B.eventDate)<D&&te>0&&(X="overdue"),{...B,totalValue:U,totalPaid:V,totalDue:te,paymentStatus:X}}).sort((B,U)=>new Date(U.eventDate||0)-new Date(B.eventDate||0))},[t]),_=k.useMemo(()=>{N(0);let D=E;if(a){const B=a.toLowerCase();D=D.filter(U=>U.clientName&&U.clientName.toLowerCase().includes(B)||U.phone&&U.phone.toLowerCase().includes(B))}if(c&&d){const B=new Date(c);B.setHours(0,0,0,0);const U=new Date(d);U.setHours(23,59,59,999),D=D.filter(V=>{if(!V.eventDate)return!1;const W=new Date(V.eventDate);return W>=B&&W<=U})}return i!=="all"&&(D=D.filter(B=>B.paymentStatus==="overdue"?i==="overdue":B.paymentStatus===i)),D},[E,i,c,d,a]),C=k.useMemo(()=>{const D=v*S;return _.slice(D,D+S)},[_,v,S]),P=Math.ceil(_.length/S),T=k.useMemo(()=>{let D=E;if(c&&d){const B=new Date(c);B.setHours(0,0,0,0);const U=new Date(d);U.setHours(23,59,59,999),D=D.filter(V=>{if(!V.eventDate)return!1;const W=new Date(V.eventDate);return W>=B&&W<=U})}return D},[E,c,d]),O=k.useMemo(()=>{const D=T,B=D.length,U=D.reduce((ae,ge)=>ae+ge.totalValue,0),V=D.reduce((ae,ge)=>ae+ge.totalPaid,0),W=D.reduce((ae,ge)=>ae+ge.totalDue,0),H=D.filter(ae=>ae.paymentStatus==="overdue").length,te=D.filter(ae=>ae.paymentStatus==="overdue").reduce((ae,ge)=>ae+ge.totalDue,0),X=new Date,ie=new Date(X.getFullYear(),X.getMonth()+1,0),q=D.filter(ae=>{if(!ae.eventDate)return!1;const ge=new Date(ae.eventDate);return ge>=X&&ge<=ie});return{totalBookings:B,totalValue:U,totalPaid:V,totalDue:W,overdueCount:H,overdueAmount:te,upcomingThisMonth:q.length,collectionRate:U>0?(V/U*100).toFixed(1):0}},[T]),R=async()=>{m(!0),await rae(E),m(!1),e&&e()},M=D=>{const B="px-2.5 py-0.5 rounded-full text-xs font-medium border flex items-center gap-1.5 w-fit mx-auto";switch(D){case"paid":return o.jsxs("span",{className:`${B} bg-emerald-50 text-emerald-700 border-emerald-200`,children:[o.jsx(as,{className:"w-3.5 h-3.5"})," ",n("paid")]});case"partial":return o.jsxs("span",{className:`${B} bg-amber-50 text-amber-700 border-amber-200`,children:[o.jsx(os,{className:"w-3.5 h-3.5"})," ",n("partial")]});case"overdue":return o.jsxs("span",{className:`${B} bg-red-50 text-red-700 border-red-200`,children:[o.jsx(ha,{className:"w-3.5 h-3.5"})," ",n("overdue")]});default:return o.jsx("span",{className:`${B} bg-slate-50 text-slate-600 border-slate-200`,children:n("pending")})}};return o.jsxs("div",{className:"space-y-4 md:space-y-6",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-3",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:n("financeDashboard")}),o.jsx("p",{className:"text-xs md:text-sm text-gray-500",children:n("bookingPaymentsInvoicing")})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:R,disabled:h,className:"px-3 md:px-4 py-2 bg-blue-600 text-white rounded-lg text-xs md:text-sm font-medium flex items-center gap-1 md:gap-2 hover:bg-blue-700 disabled:opacity-50",children:[o.jsx(vo,{className:`w-4 h-4 ${h?"animate-spin":""}`}),o.jsx("span",{className:"hidden sm:inline",children:n("sync")})]}),o.jsxs("button",{className:"px-3 md:px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-xs md:text-sm font-medium flex items-center gap-1 md:gap-2 hover:bg-gray-200",children:[o.jsx(YB,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden sm:inline",children:n("export")})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2 md:gap-4",children:[o.jsxs("div",{className:"bg-white p-3 md:p-5 rounded-xl border shadow-sm",children:[o.jsx("div",{className:"p-1.5 md:p-2 bg-blue-100 rounded-lg w-fit",children:o.jsx(zd,{className:"w-4 h-4 md:w-5 md:h-5 text-blue-600"})}),o.jsx("p",{className:"text-lg md:text-2xl font-bold mt-2 md:mt-3",children:O.totalBookings}),o.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 mt-1",children:n("totalBookings")})]}),o.jsxs("div",{className:"bg-white p-3 md:p-5 rounded-xl border shadow-sm",children:[o.jsx("div",{className:"p-1.5 md:p-2 bg-green-100 rounded-lg w-fit",children:o.jsx(Ro,{className:"w-4 h-4 md:w-5 md:h-5 text-green-600"})}),o.jsx("p",{className:"text-lg md:text-2xl font-bold mt-2 md:mt-3 truncate",children:Oe(O.totalValue)}),o.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 mt-1",children:n("totalValue")})]}),o.jsxs("div",{className:"bg-white p-3 md:p-5 rounded-xl border shadow-sm",children:[o.jsx("div",{className:"p-1.5 md:p-2 bg-emerald-100 rounded-lg w-fit",children:o.jsx(zB,{className:"w-4 h-4 md:w-5 md:h-5 text-emerald-600"})}),o.jsx("p",{className:"text-lg md:text-2xl font-bold mt-2 md:mt-3 truncate",children:Oe(O.totalPaid)}),o.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 mt-1",children:n("collected")})]}),o.jsxs("div",{className:"bg-white p-3 md:p-5 rounded-xl border shadow-sm",children:[o.jsx("div",{className:"p-1.5 md:p-2 bg-amber-100 rounded-lg w-fit",children:o.jsx(Kl,{className:"w-4 h-4 md:w-5 md:h-5 text-amber-600"})}),o.jsxs("p",{className:"text-lg md:text-2xl font-bold mt-2 md:mt-3",children:[O.collectionRate,"%"]}),o.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 mt-1",children:n("collectionRate")})]}),o.jsxs("div",{className:"bg-white p-3 md:p-5 rounded-xl border shadow-sm border-red-200 col-span-2 sm:col-span-1",children:[o.jsx("div",{className:"p-1.5 md:p-2 bg-red-100 rounded-lg w-fit",children:o.jsx(ha,{className:"w-4 h-4 md:w-5 md:h-5 text-red-600"})}),o.jsx("p",{className:"text-lg md:text-2xl font-bold mt-2 md:mt-3 text-red-600",children:O.overdueCount}),o.jsx("p",{className:"text-[10px] md:text-xs text-gray-500 mt-1",children:n("overdue")})]})]}),o.jsxs("div",{className:"flex flex-wrap items-center gap-2 bg-white p-2 md:p-3 rounded-xl border",children:[o.jsx(qd,{className:"w-4 h-4 text-gray-400 my-auto flex-shrink-0"}),[{key:"all",label:n("all")},{key:"pending",label:n("pending")},{key:"partial",label:n("partial")},{key:"paid",label:n("paid")},{key:"overdue",label:n("overdue")}].map(D=>o.jsx("button",{onClick:()=>s(D.key),className:`px-2 md:px-3 h-9 flex items-center justify-center rounded-lg text-xs md:text-sm font-medium whitespace-nowrap ${i===D.key?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:D.label},D.key)),o.jsx("div",{className:"h-6 w-px bg-gray-200 mx-2 hidden sm:block"}),o.jsxs("div",{className:"flex items-center gap-1 bg-gray-50 border border-gray-200 rounded-lg text-sm px-2 h-9",children:[o.jsx("input",{type:"date",className:"bg-transparent border-none text-xs md:text-sm p-1 w-24 md:w-auto",value:c,onChange:D=>u(D.target.value)}),o.jsx("span",{className:"text-gray-400",children:"-"}),o.jsx("input",{type:"date",className:"bg-transparent border-none text-xs md:text-sm p-1 w-24 md:w-auto",value:d,onChange:D=>f(D.target.value)}),(c||d)&&o.jsx("button",{onClick:()=>{u(""),f("")},className:"text-xs text-red-500 px-1 hover:text-red-700 font-medium",children:n("clear")})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Sa,{className:"w-4 h-4 absolute left-2.5 top-1/2 -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",placeholder:n("search")||"Search...",value:a,onChange:D=>l(D.target.value),className:"pl-8 pr-3 h-9 bg-gray-50 border border-gray-200 rounded-lg text-xs md:text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-32 md:w-48 transition-all"})]})]}),o.jsx("div",{className:"md:hidden space-y-2",children:C.length===0?o.jsx("div",{className:"text-center py-8 text-gray-400 bg-white rounded-xl border",children:n("noBookingsFound")}):C.map(D=>o.jsxs("div",{className:"bg-white p-3 rounded-xl border shadow-sm",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"min-w-0 flex-1",children:[o.jsx("p",{className:"font-bold text-gray-900 truncate",children:D.clientName}),o.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-1",children:[o.jsx(on,{className:"w-3 h-3"})," ",D.eventDate?new Date(D.eventDate).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-"]})]}),M(D.paymentStatus)]}),o.jsxs("div",{className:"flex justify-between items-center mt-3 pt-2 border-t",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-[10px] text-gray-400",children:n("total")}),o.jsx("p",{className:"text-sm font-bold",children:Oe(D.totalValue)})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-[10px] text-gray-400",children:n("collected")}),o.jsx("p",{className:"text-sm font-bold text-green-600",children:Oe(D.totalPaid)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-[10px] text-gray-400",children:n("due")}),o.jsx("p",{className:"text-sm font-bold text-red-600",children:Oe(D.totalDue)})]})]})]},D.id))}),o.jsx("div",{className:"hidden md:block bg-white rounded-xl border shadow-sm overflow-hidden",children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{className:"bg-gray-50 text-gray-600 font-medium border-b",children:o.jsxs("tr",{children:[o.jsx("th",{className:"text-left px-4 py-3",children:n("client")}),o.jsx("th",{className:"text-left px-4 py-3",children:n("eventDate")}),o.jsx("th",{className:"text-left px-4 py-3 hidden lg:table-cell",children:n("eventType")}),o.jsx("th",{className:"text-right px-4 py-3",children:n("total")}),o.jsx("th",{className:"text-right px-4 py-3",children:n("collected")}),o.jsx("th",{className:"text-right px-4 py-3",children:n("due")}),o.jsx("th",{className:"text-center px-4 py-3",children:n("status")})]})}),o.jsx("tbody",{className:"divide-y",children:C.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:"7",className:"text-center py-8 text-gray-400",children:"No bookings found"})}):C.map(D=>o.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>b(D),children:[o.jsxs("td",{className:"px-4 py-3",children:[o.jsx("div",{className:"font-medium text-gray-900",children:D.clientName}),o.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[o.jsx(Gn,{className:"w-3 h-3"})," ",D.phone]})]}),o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex items-center gap-1 text-gray-700",children:[o.jsx(on,{className:"w-3 h-3"}),D.eventDate?new Date(D.eventDate).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"-"]})}),o.jsx("td",{className:"px-4 py-3 text-gray-600 hidden lg:table-cell",children:D.eventType||"-"}),o.jsx("td",{className:"px-4 py-3 text-right font-bold",children:Oe(D.totalValue)}),o.jsx("td",{className:"px-4 py-3 text-right text-green-600 font-medium",children:Oe(D.totalPaid)}),o.jsx("td",{className:"px-4 py-3 text-right text-red-600 font-medium",children:Oe(D.totalDue)}),o.jsx("td",{className:"px-4 py-3 text-center",children:M(D.paymentStatus)})]},D.id))})]})})}),_.length>0&&o.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 bg-white p-4 rounded-xl border border-gray-200 shadow-sm",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Show"}),o.jsx("select",{value:S,onChange:D=>{A(Number(D.target.value)),N(0)},className:"border border-gray-200 rounded-lg px-3 py-2 text-sm bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[10,20,50].map(D=>o.jsx("option",{value:D,children:D},D))}),o.jsx("span",{className:"text-sm text-gray-600",children:"per page"})]}),o.jsxs("div",{className:"text-sm text-gray-600",children:["Page"," ",o.jsx("span",{className:"font-semibold text-gray-900",children:v+1})," ","of"," ",o.jsx("span",{className:"font-semibold text-gray-900",children:P}),"  ",o.jsxs("span",{className:"text-gray-500",children:[_.length," results"]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:()=>N(0),disabled:v===0,className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"First page",children:o.jsx(K_,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>N(D=>Math.max(0,D-1)),disabled:v===0,className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Previous page",children:o.jsx(Ay,{className:"w-4 h-4"})}),o.jsx("div",{className:"hidden sm:flex items-center gap-1 mx-2",children:Array.from({length:Math.min(5,P)},(D,B)=>{let U;return P<=5||v<=2?U=B:v>=P-3?U=P-5+B:U=v-2+B,o.jsx("button",{onClick:()=>N(U),className:`w-9 h-9 rounded-lg text-sm font-medium transition-colors ${v===U?"bg-blue-600 text-white":"border border-gray-200 hover:bg-gray-50 text-gray-700"}`,children:U+1},U)})}),o.jsx("button",{onClick:()=>N(D=>Math.min(P-1,D+1)),disabled:v>=P-1,className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Next page",children:o.jsx(pa,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>N(P-1),disabled:v>=P-1,className:"p-2 rounded-lg border border-gray-200 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Last page",children:o.jsx(Y_,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"hidden md:block bg-blue-50 border border-blue-200 rounded-xl p-4 md:p-5",children:[o.jsx("h3",{className:"font-bold text-blue-900 mb-3",children:"Payment Milestone Structure"}),o.jsx("div",{className:"grid grid-cols-3 gap-3 md:gap-4",children:Gse.map((D,B)=>o.jsxs("div",{className:"bg-white p-3 md:p-4 rounded-lg border border-blue-100",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"w-5 h-5 md:w-6 md:h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-xs font-bold",children:B+1}),o.jsx("span",{className:"font-medium text-blue-900 text-sm",children:D})]}),o.jsxs("p",{className:"text-xs md:text-sm text-blue-700",children:[B===0&&"30% on booking",B===1&&"40% week before",B===2&&"30% event day"]})]},D))})]}),O.upcomingThisMonth>0&&o.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 md:p-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(on,{className:"w-5 h-5 text-amber-600 flex-shrink-0"}),o.jsxs("div",{children:[o.jsxs("p",{className:"font-bold text-amber-900 text-sm md:text-base",children:[O.upcomingThisMonth," events this month"]}),o.jsx("p",{className:"text-xs md:text-sm text-amber-700",children:"Ensure all payments are collected before event dates"})]})]})}),w&&o.jsx(yRe,{lead:w,onClose:()=>b(null),onUpdate:(D,B)=>{e&&e()}})]})}const xRe=[{id:"connected_interested",label:"Connected - Interested",labelUr:"  -  ",icon:as,color:"green"},{id:"connected_not_interested",label:"Connected - Not Interested",labelUr:"  -  ",icon:Mm,color:"red"},{id:"connected_callback",label:"Connected - Callback Requested",labelUr:"  -   ",icon:yo,color:"blue"},{id:"no_answer",label:"No Answer",labelUr:" ",icon:sU,color:"amber"},{id:"busy",label:"Busy / Call Later",labelUr:" /    ",icon:os,color:"orange"},{id:"wrong_number",label:"Wrong Number",labelUr:" ",icon:aU,color:"gray"}];function bRe({leads:t,currentUser:e,onLogCall:n,onSelectLead:r,onSaveLead:i}){const{t:s,language:a}=ti(),{syncLeadEvent:l,shouldAutoSync:c}=J5(),[u,d]=k.useState(null),[f,h]=k.useState(!1),[m,y]=k.useState("all"),[g,x]=k.useState({outcome:"",notes:"",nextCallDate:"",nextCallTime:""}),[w,b]=k.useState(!1),v=new Date().toISOString().split("T")[0],N=k.useMemo(()=>{const O=((e==null?void 0:e.role)==="Owner"||(e==null?void 0:e.role)==="Admin"?t:t.filter(U=>U.manager===(e==null?void 0:e.name))).filter(U=>U.stage!=="Booked"&&U.stage!=="Lost"),R=[],M=[],D=[],B=[];return O.forEach(U=>{const V=U.nextCallDate;if(U.lastCallDate,!V){B.push({...U,callPriority:"new",callStatus:s("newLeadNeverCalled")});return}V<v?R.push({...U,callPriority:"overdue",callStatus:`${s("overdue")}: ${V}`}):V===v?M.push({...U,callPriority:"today",callStatus:U.nextCallTime?`${s("todayAt")} ${U.nextCallTime}`:s("today")}):D.push({...U,callPriority:"upcoming",callStatus:`${V}${U.nextCallTime?` ${s("at")} ${U.nextCallTime}`:""}`})}),R.sort((U,V)=>new Date(U.nextCallDate)-new Date(V.nextCallDate)),M.sort((U,V)=>U.nextCallTime?V.nextCallTime?U.nextCallTime.localeCompare(V.nextCallTime):-1:1),D.sort((U,V)=>{const W=new Date(U.nextCallDate)-new Date(V.nextCallDate);return W!==0?W:U.nextCallTime?V.nextCallTime?U.nextCallTime.localeCompare(V.nextCallTime):-1:1}),B.sort((U,V)=>{var W,H,te,X;return new Date(((H=(W=V.createdAt)==null?void 0:W.toDate)==null?void 0:H.call(W))||0)-new Date(((X=(te=U.createdAt)==null?void 0:te.toDate)==null?void 0:X.call(te))||0)}),{overdue:R,today:M,upcoming:D,neverCalled:B}},[t,e,v,s]),S=k.useMemo(()=>{switch(m){case"overdue":return[...N.overdue,...N.neverCalled];case"today":return N.today;case"upcoming":return N.upcoming;default:return[...N.overdue,...N.neverCalled,...N.today,...N.upcoming]}},[N,m]),A={overdue:N.overdue.length+N.neverCalled.length,today:N.today.length,upcoming:N.upcoming.length,total:N.overdue.length+N.neverCalled.length+N.today.length+N.upcoming.length},E=T=>{d(T);const O=new Date;O.setDate(O.getDate()+1),x({outcome:"",notes:"",nextCallDate:O.toISOString().split("T")[0],nextCallTime:"10:00"}),h(!0)},_=async()=>{if(g.outcome){b(!0);try{if(await n(u.id,{outcome:g.outcome,notes:g.notes,nextCallDate:g.nextCallDate,nextCallTime:g.nextCallTime,calledAt:new Date().toISOString(),calledBy:e==null?void 0:e.name}),g.nextCallDate&&c("call")&&i)try{const T={...u,nextCallDate:g.nextCallDate,nextCallTime:g.nextCallTime,lastCallNotes:g.notes};await l(T,"call",i)}catch(T){console.error("Calendar sync error:",T)}h(!1),d(null)}catch(T){console.error("Error saving call log:",T)}b(!1)}},C=T=>Kr[T]||Kr.New,P=T=>{switch(T){case"overdue":return"border-l-4 border-l-red-500 bg-red-50";case"new":return"border-l-4 border-l-amber-500 bg-amber-50";case"today":return"border-l-4 border-l-blue-500 bg-blue-50";case"upcoming":return"border-l-4 border-l-gray-300 bg-white";default:return"bg-white"}};return o.jsxs("div",{className:"h-full flex flex-col",children:[o.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 text-white p-4 rounded-xl mb-4",children:o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{children:[o.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx(Gn,{className:"w-5 h-5"}),s("callList")]}),o.jsx("p",{className:"text-orange-100 text-sm mt-1",children:s("callsStatsSummary").replace("{today}",A.today).replace("{overdue}",A.overdue)})]})})}),o.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-4",children:[o.jsxs("button",{onClick:()=>y("all"),className:`p-3 rounded-xl text-center transition-all ${m==="all"?"bg-gray-800 text-white":"bg-white border hover:border-gray-400"}`,children:[o.jsx("p",{className:"text-xl font-bold",children:A.total}),o.jsx("p",{className:"text-[10px] opacity-80",children:s("total")})]}),o.jsxs("button",{onClick:()=>y("overdue"),className:`p-3 rounded-xl text-center transition-all ${m==="overdue"?"bg-red-600 text-white":"bg-white border hover:border-red-400"}`,children:[o.jsx("p",{className:"text-xl font-bold",children:A.overdue}),o.jsx("p",{className:"text-[10px] opacity-80",children:s("overdue")})]}),o.jsxs("button",{onClick:()=>y("today"),className:`p-3 rounded-xl text-center transition-all ${m==="today"?"bg-blue-600 text-white":"bg-white border hover:border-blue-400"}`,children:[o.jsx("p",{className:"text-xl font-bold",children:A.today}),o.jsx("p",{className:"text-[10px] opacity-80",children:s("today")})]}),o.jsxs("button",{onClick:()=>y("upcoming"),className:`p-3 rounded-xl text-center transition-all ${m==="upcoming"?"bg-green-600 text-white":"bg-white border hover:border-green-400"}`,children:[o.jsx("p",{className:"text-xl font-bold",children:A.upcoming}),o.jsx("p",{className:"text-[10px] opacity-80",children:s("upcoming")})]})]}),o.jsxs("div",{className:"flex-1 bg-white rounded-xl border shadow-sm overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"p-3 border-b bg-gray-50 flex items-center justify-between",children:[o.jsxs("h2",{className:"font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(yo,{className:"w-4 h-4"}),m==="all"&&s("allCalls"),m==="overdue"&&s("overdueCalls"),m==="today"&&s("todayCalls"),m==="upcoming"&&s("upcomingCalls")]}),o.jsxs("span",{className:"text-sm text-gray-500",children:[S.length," ",s("leads")]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:S.length===0?o.jsxs("div",{className:"p-8 text-center text-gray-400",children:[o.jsx(Gn,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),o.jsx("p",{children:s("noCallsScheduled")})]}):S.map(T=>o.jsx("div",{className:`p-4 border-b transition-colors hover:bg-gray-50 ${P(T.callPriority)}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${T.callPriority==="overdue"?"bg-red-100":T.callPriority==="new"?"bg-amber-100":T.callPriority==="today"?"bg-blue-100":"bg-gray-100"}`,children:[T.callPriority==="overdue"&&o.jsx(mo,{className:"w-5 h-5 text-red-600"}),T.callPriority==="new"&&o.jsx(hi,{className:"w-5 h-5 text-amber-600"}),T.callPriority==="today"&&o.jsx(os,{className:"w-5 h-5 text-blue-600"}),T.callPriority==="upcoming"&&o.jsx(on,{className:"w-5 h-5 text-gray-500"})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("p",{className:"font-bold text-gray-900 truncate",children:T.clientName}),o.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold ${C(T.stage).bg} ${C(T.stage).text}`,children:T.stage})]}),o.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-2 mt-0.5",children:[o.jsx(Gn,{className:"w-3 h-3"})," ",T.phone]}),o.jsx("p",{className:`text-xs mt-1 ${T.callPriority==="overdue"?"text-red-600 font-medium":T.callPriority==="new"?"text-amber-600 font-medium":T.callPriority==="today"?"text-blue-600 font-medium":"text-gray-400"}`,children:T.callPriority==="new"?s("newLeadMakeFirstCall"):T.callStatus}),T.lastCallOutcome&&o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[s("last"),": ",T.lastCallOutcome," (",T.lastCallDate,")"]})]}),o.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[T.nextCallDate&&o.jsx("button",{onClick:()=>Sd(D1(T)),className:"p-2 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200",title:s("addToCalendar"),children:o.jsx(Cb,{className:"w-4 h-4"})}),o.jsx("a",{href:Ao(T.phone),target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-green-100 text-green-600 rounded-lg hover:bg-green-200",title:"WhatsApp",children:o.jsx(dr,{className:"w-4 h-4"})}),o.jsxs("button",{onClick:()=>E(T),className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-1 text-sm font-medium",children:[o.jsx(Gn,{className:"w-4 h-4"}),s("call")]}),o.jsx("button",{onClick:()=>r(T),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",title:s("viewDetails"),children:o.jsx(pa,{className:"w-4 h-4"})})]})]})},T.id))})]}),f&&u&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-4",children:[o.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[o.jsx(yo,{className:"w-5 h-5"}),a==="ur"?"  ":"Log Call"]}),o.jsxs("p",{className:"text-blue-100 text-sm mt-1",children:[u.clientName," - ",u.phone]})]}),o.jsxs("div",{className:"p-4 border-b bg-gray-50",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-2",children:a==="ur"?"  :":"Make the call first:"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("a",{href:`tel:${u.phone}`,className:"flex-1 py-2 bg-blue-600 text-white rounded-lg text-center text-sm font-medium hover:bg-blue-700 flex items-center justify-center gap-2",children:[o.jsx(Gn,{className:"w-4 h-4"}),a==="ur"?" ":"Phone Call"]}),o.jsxs("a",{href:Ao(u.phone),target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-2 bg-green-600 text-white rounded-lg text-center text-sm font-medium hover:bg-green-700 flex items-center justify-center gap-2",children:[o.jsx(dr,{className:"w-4 h-4"}),"WhatsApp"]})]})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:[a==="ur"?"  ":"Call Outcome"," *"]}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:xRe.map(T=>{const O=T.icon,R=g.outcome===T.id;return o.jsxs("button",{onClick:()=>x({...g,outcome:T.id}),className:`p-2 rounded-lg border text-left text-sm flex items-center gap-2 transition-all ${R?`border-${T.color}-500 bg-${T.color}-50 text-${T.color}-700`:"border-gray-200 hover:border-gray-400"}`,children:[o.jsx(O,{className:`w-4 h-4 ${R?`text-${T.color}-600`:"text-gray-400"}`}),o.jsx("span",{className:"truncate",children:a==="ur"?T.labelUr:T.label})]},T.id)})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:s("notes")}),o.jsx("textarea",{className:"w-full p-3 border rounded-lg text-sm outline-none focus:border-blue-400 h-20 resize-none",placeholder:s("callDetailsPlaceholder"),value:g.notes,onChange:T=>x({...g,notes:T.target.value})})]}),o.jsxs("div",{className:"border-t pt-4",children:[o.jsxs("label",{className:"text-sm font-bold text-gray-700 mb-2 flex items-center gap-2",children:[o.jsx(GB,{className:"w-4 h-4"}),s("scheduleNextCall")]}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsx("input",{type:"date",className:"p-2 border rounded-lg text-sm outline-none focus:border-blue-400",value:g.nextCallDate,onChange:T=>x({...g,nextCallDate:T.target.value}),min:v}),o.jsx("input",{type:"time",className:"p-2 border rounded-lg text-sm outline-none focus:border-blue-400",value:g.nextCallTime,onChange:T=>x({...g,nextCallTime:T.target.value})})]}),g.nextCallDate&&o.jsxs("button",{type:"button",onClick:()=>Sd(D1({...u,nextCallDate:g.nextCallDate,nextCallTime:g.nextCallTime,lastCallNotes:g.notes})),className:"mt-2 w-full py-2 px-3 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium hover:bg-blue-100 flex items-center justify-center gap-2 border border-blue-200",children:[o.jsx(Cb,{className:"w-4 h-4"}),s("addToGoogleCalendar")]})]})]}),o.jsxs("div",{className:"p-4 border-t bg-gray-50 flex gap-2",children:[o.jsx("button",{onClick:()=>{h(!1),d(null)},className:"flex-1 py-2 border border-gray-300 rounded-lg text-sm font-medium hover:bg-gray-100",children:s("cancel")}),o.jsx("button",{onClick:_,disabled:!g.outcome||w,className:"flex-1 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s(w?"saving":"saveAndNext")})]})]})})]})}function wRe({leads:t,currentUser:e}){var g;const[n,r]=k.useState(null),[i,s]=k.useState([]),[a,l]=k.useState(!1),[c,u]=k.useState(""),[d,f]=k.useState("all"),h=k.useMemo(()=>[...new Set(t.map(w=>w.manager).filter(Boolean))].sort(),[t]),m=k.useMemo(()=>t.filter(x=>x.hasUnreadMessages||x.lastMessageAt).filter(x=>{var w,b,v;if(d!=="all"&&x.manager!==d)return!1;if(c){const N=c.toLowerCase();return((w=x.clientName)==null?void 0:w.toLowerCase().includes(N))||((b=x.phone)==null?void 0:b.includes(N))||((v=x.manager)==null?void 0:v.toLowerCase().includes(N))}return!0}).sort((x,w)=>{var N,S,A,E;const b=((S=(N=x.lastMessageAt)==null?void 0:N.toDate)==null?void 0:S.call(N))||new Date(0);return(((E=(A=w.lastMessageAt)==null?void 0:A.toDate)==null?void 0:E.call(A))||new Date(0))-b}),[t,c,d]);k.useEffect(()=>{if(!n){s([]);return}l(!0);const x=pn(De,"artifacts",We,"public","data","leads",n.id,"messages"),w=io(nf(x,LS("timestamp","desc"),qy(100)),b=>{const v=b.docs.map(N=>({id:N.id,...N.data()})).reverse();s(v),l(!1)},b=>{console.error("Error loading messages:",b),l(!1)});return()=>w()},[n]);const y=x=>{if(!x)return"";const w=x.toDate?x.toDate():new Date(x),v=new Date-w;return v<6e4?"Just now":v<36e5?`${Math.floor(v/6e4)}m ago`:v<864e5?w.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):w.toLocaleDateString()};return o.jsxs("div",{className:"h-[calc(100vh-8rem)] flex flex-col",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:"Conversation Logs"}),o.jsx("p",{className:"text-xs md:text-sm text-gray-500",children:"View all WhatsApp conversations between employees and leads"})]}),o.jsxs("div",{className:"flex-1 flex gap-4 min-h-0",children:[o.jsxs("div",{className:`${n?"hidden md:flex":"flex"} flex-col w-full md:w-96 bg-white rounded-xl border shadow-sm overflow-hidden`,children:[o.jsxs("div",{className:"p-3 border-b space-y-2",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"text",placeholder:"Search conversations...",className:"w-full pl-9 pr-3 py-2 text-sm border rounded-lg outline-none focus:border-blue-400",value:c,onChange:x=>u(x.target.value)})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(qd,{className:"w-4 h-4 text-gray-400 my-auto"}),o.jsxs("select",{className:"flex-1 text-sm border rounded-lg px-2 py-1.5 outline-none",value:d,onChange:x=>f(x.target.value),children:[o.jsx("option",{value:"all",children:"All Employees"}),h.map(x=>o.jsx("option",{value:x,children:x},x))]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:m.length===0?o.jsxs("div",{className:"p-8 text-center text-gray-400",children:[o.jsx(dr,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),o.jsx("p",{children:"No conversations found"})]}):m.map(x=>{var w;return o.jsx("button",{onClick:()=>r(x),className:`w-full p-3 border-b text-left hover:bg-gray-50 transition-colors ${(n==null?void 0:n.id)===x.id?"bg-blue-50 border-l-4 border-l-blue-500":""}`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-white font-bold flex-shrink-0",children:((w=x.clientName)==null?void 0:w[0])||"?"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("p",{className:"font-medium text-gray-900 truncate",children:x.clientName}),o.jsx("span",{className:"text-[10px] text-gray-400 flex-shrink-0 ml-2",children:y(x.lastMessageAt)})]}),o.jsx("p",{className:"text-xs text-gray-500 truncate",children:x.lastMessagePreview||"No messages"}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("span",{className:"text-[10px] text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded",children:x.manager||"Unassigned"}),x.hasUnreadMessages&&o.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"})]})]}),o.jsx(pa,{className:"w-4 h-4 text-gray-300 flex-shrink-0 my-auto"})]})},x.id)})}),o.jsxs("div",{className:"p-3 border-t bg-gray-50 text-xs text-gray-500 text-center",children:[m.length," conversations"]})]}),o.jsx("div",{className:`${n?"flex":"hidden md:flex"} flex-col flex-1 bg-white rounded-xl border shadow-sm overflow-hidden`,children:n?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"p-4 border-b bg-gradient-to-r from-green-50 to-emerald-50",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:()=>r(null),className:"md:hidden p-2 hover:bg-white/50 rounded-lg",children:o.jsx(G_,{className:"w-5 h-5"})}),o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-white font-bold",children:((g=n.clientName)==null?void 0:g[0])||"?"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:"font-bold text-gray-900",children:n.clientName}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[o.jsx(Gn,{className:"w-3 h-3"}),n.phone,o.jsx("span",{className:"text-gray-300",children:""}),o.jsx(hi,{className:"w-3 h-3"}),n.manager||"Unassigned"]})]}),o.jsx("div",{className:"text-right",children:o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${n.stage==="Booked"?"bg-green-100 text-green-700":n.stage==="New"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:n.stage})})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50",children:a?o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsx(vo,{className:"w-6 h-6 animate-spin text-gray-400"})}):i.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[o.jsx(Hl,{className:"w-12 h-12 mb-3 opacity-30"}),o.jsx("p",{children:"No messages in this conversation"})]}):i.map(x=>o.jsx("div",{className:`flex ${x.direction==="outbound"?"justify-end":"justify-start"}`,children:o.jsxs("div",{className:`max-w-[80%] rounded-2xl px-4 py-2 ${x.direction==="outbound"?"bg-green-500 text-white rounded-br-md":"bg-white text-gray-900 rounded-bl-md shadow-sm"}`,children:[o.jsx("p",{className:"text-sm whitespace-pre-wrap",children:x.text||x.message}),o.jsxs("div",{className:`flex items-center gap-1 mt-1 text-[10px] ${x.direction==="outbound"?"text-green-100":"text-gray-400"}`,children:[o.jsx(os,{className:"w-3 h-3"}),y(x.timestamp),x.type==="auto_greeting"&&o.jsx("span",{className:"ml-1 px-1 py-0.5 bg-white/20 rounded text-[9px]",children:"Auto"})]})]})},x.id))}),o.jsx("div",{className:"p-3 border-t bg-gray-50 text-xs text-gray-500 text-center",children:o.jsx("p",{children:"This is a read-only view of the conversation history"})})]}):o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400",children:[o.jsx(dr,{className:"w-16 h-16 mb-4 opacity-30"}),o.jsx("p",{className:"text-lg font-medium",children:"Select a conversation"}),o.jsx("p",{className:"text-sm",children:"Choose a lead from the list to view their messages"})]})})]})]})}function _Re({leads:t,currentUser:e}){const{t:n}=ti(),[r,i]=k.useState([]),[s,a]=k.useState(!0),[l,c]=k.useState(""),[u,d]=k.useState("all"),[f,h]=k.useState("all"),[m,y]=k.useState("7"),[g,x]=k.useState(null);k.useEffect(()=>{(async()=>{a(!0);try{const C=pn(De,"artifacts",We,"public","data","ai_audit_logs"),P=new Date;P.setDate(P.getDate()-parseInt(m));const T=nf(C,Ym("timestamp",">=",zt.fromDate(P)),LS("timestamp","desc"),qy(500)),R=(await ds(T)).docs.map(M=>({id:M.id,...M.data()}));i(R)}catch(C){console.error("Error fetching audit logs:",C)}finally{a(!1)}})()},[m]);const w=k.useMemo(()=>[...new Set(r.map(C=>C.userName).filter(Boolean))].sort(),[r]),b=[{value:"all",label:n("allTypes")},{value:"query",label:n("aiQuery")},{value:"suggestion",label:n("aiSuggestion")},{value:"auto_greeting",label:n("autoGreeting")},{value:"quote_reminder",label:n("quoteReminder")},{value:"lead_summary",label:n("leadSummary")}],v=k.useMemo(()=>r.filter(_=>{var C,P,T,O;if(u!=="all"&&_.type!==u||f!=="all"&&_.userName!==f)return!1;if(l){const R=l.toLowerCase();return((C=_.query)==null?void 0:C.toLowerCase().includes(R))||((P=_.response)==null?void 0:P.toLowerCase().includes(R))||((T=_.userName)==null?void 0:T.toLowerCase().includes(R))||((O=_.leadName)==null?void 0:O.toLowerCase().includes(R))}return!0}),[r,u,f,l]),N=_=>_?(_.toDate?_.toDate():new Date(_)).toLocaleString("en-PK",{dateStyle:"medium",timeStyle:"short"}):"",S=_=>{switch(_){case"query":return o.jsx(Hl,{className:"w-4 h-4"});case"suggestion":return o.jsx(sr,{className:"w-4 h-4"});case"auto_greeting":return o.jsx(dd,{className:"w-4 h-4"});case"quote_reminder":return o.jsx(os,{className:"w-4 h-4"});default:return o.jsx(dd,{className:"w-4 h-4"})}},A=_=>{switch(_){case"query":return"bg-blue-100 text-blue-700";case"suggestion":return"bg-purple-100 text-purple-700";case"auto_greeting":return"bg-green-100 text-green-700";case"quote_reminder":return"bg-amber-100 text-amber-700";default:return"bg-gray-100 text-gray-700"}},E=_=>{const C=b.find(P=>P.value===_);return(C==null?void 0:C.label)||_||"AI Interaction"};return o.jsxs("div",{className:"h-[calc(100vh-8rem)] flex flex-col",children:[o.jsxs("div",{className:"mb-4",children:[o.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 flex items-center gap-2",children:[o.jsx(dd,{className:"w-6 h-6 text-purple-600"}),n("aiAuditLogs")]}),o.jsx("p",{className:"text-xs md:text-sm text-gray-500",children:n("viewAiHistory")})]}),o.jsx("div",{className:"bg-white rounded-xl border shadow-sm p-4 mb-4",children:o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[o.jsx(Sa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),o.jsx("input",{type:"text",placeholder:n("searchLogs"),className:"w-full pl-9 pr-3 py-2 text-sm border rounded-lg outline-none focus:border-purple-400",value:l,onChange:_=>c(_.target.value)})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(qd,{className:"w-4 h-4 text-gray-400"}),o.jsx("select",{className:"text-sm border rounded-lg px-3 py-2 outline-none focus:border-purple-400",value:u,onChange:_=>d(_.target.value),children:b.map(_=>o.jsx("option",{value:_.value,children:_.label},_.value))})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(hi,{className:"w-4 h-4 text-gray-400"}),o.jsxs("select",{className:"text-sm border rounded-lg px-3 py-2 outline-none focus:border-purple-400",value:f,onChange:_=>h(_.target.value),children:[o.jsx("option",{value:"all",children:n("allUsers")}),w.map(_=>o.jsx("option",{value:_,children:_},_))]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(on,{className:"w-4 h-4 text-gray-400"}),o.jsxs("select",{className:"text-sm border rounded-lg px-3 py-2 outline-none focus:border-purple-400",value:m,onChange:_=>y(_.target.value),children:[o.jsx("option",{value:"1",children:n("last24Hours")}),o.jsx("option",{value:"7",children:n("last7Days")}),o.jsx("option",{value:"30",children:n("last30Days")}),o.jsx("option",{value:"90",children:n("last90Days")})]})]})]})}),o.jsxs("div",{className:"flex-1 bg-white rounded-xl border shadow-sm overflow-hidden flex flex-col",children:[s?o.jsx("div",{className:"flex-1 flex items-center justify-center",children:o.jsx(vo,{className:"w-8 h-8 animate-spin text-gray-400"})}):v.length===0?o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-gray-400",children:[o.jsx(mo,{className:"w-12 h-12 mb-3 opacity-30"}),o.jsx("p",{className:"text-lg font-medium",children:n("noAuditLogs")}),o.jsx("p",{className:"text-sm",children:n("auditLogsPlaceholder")})]}):o.jsx("div",{className:"flex-1 overflow-y-auto",children:v.map(_=>o.jsxs("div",{className:"border-b last:border-b-0 hover:bg-gray-50 transition-colors",children:[o.jsx("button",{onClick:()=>x(g===_.id?null:_.id),className:"w-full p-4 text-left",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${A(_.type)}`,children:S(_.type)}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[o.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${A(_.type)}`,children:E(_.type)}),_.leadName&&o.jsxs("span",{className:"text-xs text-gray-500",children:[n("lead"),": ",_.leadName]})]}),o.jsx("p",{className:"text-sm text-gray-900 mt-1 line-clamp-2",children:_.query||_.action||"AI interaction"}),o.jsxs("div",{className:"flex items-center gap-3 mt-2 text-xs text-gray-400",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(hi,{className:"w-3 h-3"}),_.userName||"System"]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(os,{className:"w-3 h-3"}),N(_.timestamp)]}),_.tokenCount&&o.jsxs("span",{className:"text-purple-500",children:[_.tokenCount," tokens"]})]})]}),o.jsx("div",{className:"flex-shrink-0",children:g===_.id?o.jsx(ia,{className:"w-5 h-5 text-gray-400"}):o.jsx(to,{className:"w-5 h-5 text-gray-400"})})]})}),g===_.id&&o.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[_.query&&o.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs font-medium text-blue-700 mb-1",children:n("queryInput")}),o.jsx("p",{className:"text-sm text-blue-900 whitespace-pre-wrap",children:_.query})]}),_.response&&o.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs font-medium text-purple-700 mb-1",children:n("aiResponse")}),o.jsx("p",{className:"text-sm text-purple-900 whitespace-pre-wrap",children:_.response})]}),(_.context||_.metadata)&&o.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[o.jsx("p",{className:"text-xs font-medium text-gray-700 mb-1",children:n("contextMetadata")}),o.jsx("pre",{className:"text-xs text-gray-600 overflow-x-auto",children:JSON.stringify(_.context||_.metadata,null,2)})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[_.model&&o.jsxs("span",{className:"px-2 py-1 bg-gray-100 rounded text-gray-600",children:[n("model"),": ",_.model]}),_.latencyMs&&o.jsxs("span",{className:"px-2 py-1 bg-gray-100 rounded text-gray-600",children:[n("latency"),": ",_.latencyMs,"ms"]}),_.success!==void 0&&o.jsx("span",{className:`px-2 py-1 rounded ${_.success?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:_.success?n("success"):n("failed")})]})]})]},_.id))}),o.jsxs("div",{className:"p-3 border-t bg-gray-50 text-xs text-gray-500 text-center",children:[v.length," ",n("auditLogEntries")]})]})]})}function SRe(){const{user:t,activeUser:e,setActiveUser:n,authLoading:r,authError:i,login:s,signup:a,logout:l}=eG(),{data:c,sources:u,contacts:d}=Bse(t),{eventTypes:f}=eoe(),{users:h}=soe({enabled:!!t}),m=(h||[]).map(Z=>Z.username),{contacts:y,loading:g,addContact:x,updateContact:w,deleteContact:b,deleteAllContacts:v}=toe({enabled:!!t}),{sources:N,addSource:S,updateSource:A,deleteSource:E}=noe({enabled:!!t}),{leads:_,stats:C,fetchLeads:P,addLead:T,updateLead:O,deleteAllLeads:R,addLeadNote:M}=ioe({enabled:!!t}),{importProgress:D,closeImportModal:B,handleFileUpload:U}=qse(N,P),{notifications:V,markAsRead:W,markAllAsRead:H,deleteNotification:te,handleNewNotification:X}=Qae(e,{enableBrowserNotifications:!0}),[ie,q]=k.useState(()=>{try{const Z=localStorage.getItem("newLeadIds");return Z?JSON.parse(Z):[]}catch(Z){return console.error("Error parsing newLeadIds from localStorage",Z),[]}}),[ae,ge]=k.useState([]);k.useEffect(()=>{try{localStorage.setItem("newLeadIds",JSON.stringify(ie))}catch(Z){console.error("Error saving newLeadIds to localStorage",Z)}},[ie]),Zae(Z=>{const Ce=Z.lead||Z,fe=Z.notification;q(at=>at.includes(Ce.id)?at:[...at,Ce.id]),P(),fe&&(fe.userId&&fe.userId==e.id||fe.assignedTo===e.role||fe.assignedTo==="all"||(e.role==="Admin"||e.role==="Owner")&&fe.type==="lead_assigned")&&X(fe)});const Fe=Z=>{ie.includes(Z.id)&&(q(Ce=>Ce.filter(fe=>fe!==Z.id)),ge(Ce=>[...Ce,Z.id])),ii(Z)},[et,se]=k.useState(null),[ye,ve]=k.useState(!1),[J,ze]=W_(),Pe=_y(),Je=ji(),st=J.get("modal")==="new-lead",Tt=J.get("modal")==="revenue",F=J.get("modal")==="admin",K=J.get("modal")==="integrations",ce=J.get("modal")==="settings",de=J.get("modal")==="migration",He=J.get("leadId"),en=J.get("sourceId"),zn=He?_.find(Z=>Z.id==He)||c.find(Z=>Z.id==He):null,ri=en?N.find(Z=>Z.id==en)||u.find(Z=>Z.id==en):null,wt=(Z,Ce)=>{ze(fe=>{const at=new URLSearchParams(fe);return Ce?at.set("modal",Z):at.get("modal")===Z&&at.delete("modal"),at})},Pt=Z=>wt("new-lead",Z),As=Z=>wt("revenue",Z),zo=Z=>wt("admin",Z),qo=Z=>wt("integrations",Z),ou=Z=>wt("settings",Z),ki=Z=>wt("migration",Z),ii=Z=>{ze(Ce=>{const fe=new URLSearchParams(Ce);return Z?fe.set("leadId",Z.id):fe.delete("leadId"),fe})},Wo=Z=>{ze(Ce=>{const fe=new URLSearchParams(Ce);return Z?fe.set("sourceId",Z.id):fe.delete("sourceId"),fe})},Go=Je.pathname==="/"?"owner-dashboard":Je.pathname.substring(1),bh=Z=>{const Ce=Z==="owner-dashboard"?"/":`/${Z}`;Pe(Ce),ve(!1)},[bN,wh]=k.useState([]);Use(e,c,d,se);const _h=async Z=>{try{const Ce=h.find(Ii=>Ii.username===Z.manager),fe=Ce?Ce.id:null,at=N.find(Ii=>Ii.name===Z.source),Mr=at?at.id:null;let Ho=Z.title;!Ho&&Z.eventType&&(Ho=`${Z.eventType}${Z.eventDate?` - ${Z.eventDate}`:""}`);const cn=(Z.stage==="New Lead"?"New":Z.stage)||"New",Ah={quotationAmount:Number(Z.quotationAmount)||0,clientBudget:Number(Z.clientBudget)||0,status:cn,notes:Z.notes,contactId:Z.contactId,assignedTo:fe,sourceId:Mr,title:Ho,expectedCloseDate:Z.inquiryDate?new Date(Z.inquiryDate).toISOString():null,eventDate:Z.eventDate?new Date(Z.eventDate).toISOString():null,eventType:Z.eventType,venue:Z.venue,guests:Z.guests?parseInt(Z.guests):null};await T(Ah),Pt(!1),se({message:"Lead added successfully",type:"success"})}catch(Ce){console.error("Error adding lead:",Ce),se({message:Ce.message||"Failed to add lead",type:"error"})}},Sh=async(Z,Ce)=>{try{const fe={...Ce};if(fe.stage&&(fe.status=fe.stage,delete fe.stage),fe.source&&typeof fe.source=="string"){const at=N.find(Mr=>Mr.name===fe.source);fe.sourceId=at?at.id:null,delete fe.source}if(fe.manager&&typeof fe.manager=="string"){const at=h.find(Mr=>Mr.username===fe.manager);fe.assignedTo=at?at.id:null,delete fe.manager}delete fe.id,delete fe.contactId,delete fe.clientName,delete fe.phone,delete fe.source,delete fe.inquiryDate,delete fe.stageUpdatedAt,delete fe.stageUpdatedBy,delete fe.createdAt,delete fe.updatedAt,delete fe.contact,delete fe.assignee,delete fe.activityLog,delete fe.totalPaid,delete fe.totalDue,await O(Z,fe),se({message:"Lead updated successfully",type:"success"})}catch(fe){console.error("Error updating lead:",fe),se({message:fe.message||"Failed to update lead",type:"error"})}},Ta=async(Z,Ce,fe=null)=>{try{await O(Z,{stage:Ce,stageUpdatedAt:new Date().toISOString(),stageUpdatedBy:e==null?void 0:e.name}),await M(Z,JSON.stringify({from:fe||"Unknown",to:Ce}),Ve.STAGE_CHANGE),se({message:`Lead moved to ${Ce}`,type:"success"})}catch(at){console.error("Error updating stage:",at),se({message:"Failed to update stage",type:"error"})}},lu=async(Z,Ce)=>{try{const fe={outcome:Ce.outcome,notes:Ce.notes,nextCallDate:Ce.nextCallDate,nextCallTime:Ce.nextCallTime};await M(Z,JSON.stringify(fe),Ve.CALL_LOGGED);const at={lastCallDate:new Date().toISOString(),lastCallOutcome:Ce.outcome,lastCallNotes:Ce.notes,lastCalledBy:e==null?void 0:e.name};Ce.nextCallDate&&(at.nextCallDate=Ce.nextCallDate,at.nextCallTime=Ce.nextCallTime||null),await O(Z,at),se({message:"Call logged successfully",type:"success"})}catch(fe){console.error("Error logging call:",fe),se({message:"Failed to log call",type:"error"})}},cu=Z=>{bh(Z),ve(!1)};return r?o.jsxs("div",{className:"h-screen flex items-center justify-center flex-col gap-4",children:[o.jsx(Ft,{className:"w-8 h-8 animate-spin text-blue-600"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Authenticating..."})]}):!t||!e||i?o.jsx(o.Fragment,{children:o.jsx(loe,{onLogin:n,isLoading:r,authError:i,login:s,signup:a,logout:l})}):o.jsxs("div",{className:"flex h-screen bg-slate-50 font-sans text-slate-900",children:[o.jsx(goe,{}),et&&o.jsx(aoe,{message:et.message,type:et.type,onClose:()=>se(null)}),zn&&o.jsx(dOe,{lead:zn,onClose:()=>ii(null),onSave:Sh,currentUser:e,sources:N,managers:m,eventTypes:f,onOpenAi:()=>{}}),Tt&&o.jsx(ZIe,{data:_,onClose:()=>As(!1)}),F&&o.jsx(fOe,{onClose:()=>zo(!1)}),K&&o.jsx(hOe,{onClose:()=>qo(!1)}),st&&o.jsx(pOe,{onClose:()=>Pt(!1),onSave:_h,managers:m,contacts:y,onAddContact:x,sources:N,eventTypes:f}),ri&&o.jsx(mOe,{source:ri,leads:_,onClose:()=>Wo(null),onSelectLead:Z=>{Wo(null),ii(Z)}}),ce&&o.jsx(gOe,{currentUser:e,onClose:()=>ou(!1),onLogout:l}),de&&o.jsx(yOe,{onClose:()=>ki(!1)}),o.jsx("div",{className:"hidden md:block",children:o.jsx(Hj,{activeTab:Go,setActiveTab:bh,userRole:(e==null?void 0:e.role)||"Admin",onShowAdmin:()=>zo(!0),onShowIntegrations:()=>qo(!0),onShowUserSettings:()=>ou(!0),onShowMigration:()=>ki(!0)})}),o.jsx("div",{className:"md:hidden fixed top-0 left-0 right-0 z-40 bg-white border-b shadow-sm",children:o.jsxs("div",{className:"flex items-center justify-between p-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-white font-bold text-sm",children:"51"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"font-bold text-gray-900 text-sm",children:"Area 51 CRM"}),o.jsx("p",{className:"text-[10px] text-gray-500",children:e==null?void 0:e.name})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Yj,{compact:!0}),o.jsx(Kj,{notifications:V,onMarkRead:W,onMarkAllRead:H,onDelete:te,onNotificationClick:Z=>{if(Z.leadId){const Ce=_.find(fe=>fe.id===Z.leadId);Ce&&ii(Ce)}},currentUser:e}),o.jsx("button",{onClick:()=>ve(!ye),className:"p-2 hover:bg-gray-100 rounded-lg",children:ye?o.jsx(Dt,{className:"w-6 h-6"}):o.jsx(tU,{className:"w-6 h-6"})})]})]})}),ye&&o.jsx("div",{className:"md:hidden fixed inset-0 z-30 bg-black/50",onClick:()=>ve(!1),children:o.jsx("div",{className:"absolute top-14 left-0 right-0 bg-white border-b shadow-lg max-h-[70vh] overflow-y-auto",onClick:Z=>Z.stopPropagation(),children:o.jsx(Hj,{activeTab:Go,setActiveTab:cu,userRole:(e==null?void 0:e.role)||"Admin",onShowAdmin:()=>{zo(!0),ve(!1)},onShowIntegrations:()=>{qo(!0),ve(!1)},onShowUserSettings:()=>{ou(!0),ve(!1)},onShowMigration:()=>{ki(!0),ve(!1)},isMobile:!0})})}),o.jsxs("main",{className:"flex-1 overflow-y-auto p-3 md:p-6 pt-16 md:pt-6",children:[o.jsxs("div",{className:"hidden md:flex fixed top-4 right-6 z-40 items-center gap-3",children:[o.jsx(Yj,{}),o.jsx(Kj,{notifications:V,onMarkRead:W,onMarkAllRead:H,onDelete:te,onNotificationClick:Z=>{if(Z.leadId){const Ce=_.find(fe=>fe.id===Z.leadId);Ce&&ii(Ce)}},currentUser:e})]}),o.jsxs(sB,{children:[o.jsx(wr,{path:"/",element:o.jsx(gRe,{leads:_,onShowRevenue:()=>As(!0)})}),o.jsx(wr,{path:"/employee",element:o.jsx(mRe,{leads:_,currentUser:e,onSelectLead:ii,onStageChange:Ta,onAddNote:()=>{}})}),o.jsx(wr,{path:"/finance",element:o.jsx(vRe,{leads:_,onSyncPayments:P})}),o.jsx(wr,{path:"/call-list",element:o.jsx(bRe,{leads:_,currentUser:e,onLogCall:lu,onSelectLead:ii,onSaveLead:O})}),o.jsx(wr,{path:"/dashboard",element:o.jsx(vOe,{stats:C,onShowRevenue:()=>As(!0)})}),o.jsx(wr,{path:"/leads",element:o.jsx(fRe,{data:_,onSelectLead:Fe,newLeadIds:ie,viewedLeadIds:ae,onShowNewLead:()=>Pt(!0),onFileUpload:U,onTruncateLeads:R,importProgress:D,closeImportModal:B})}),o.jsx(wr,{path:"/contacts",element:o.jsx(hRe,{contacts:y,loading:g,onAddContact:x,onUpdateContact:w,onDeleteContact:b,onDeleteAllContacts:v})}),o.jsx(wr,{path:"/sources",element:o.jsx(pRe,{sources:N,leads:_,onAdd:S,onUpdate:A,onDelete:E,onSourceClick:Wo})}),o.jsx(wr,{path:"/conversation-logs",element:o.jsx(wRe,{leads:_,currentUser:e})}),o.jsx(wr,{path:"/audit-logs",element:o.jsx(_Re,{leads:_,currentUser:e})}),o.jsx(wr,{path:"*",element:o.jsx(rB,{to:"/",replace:!0})})]})]})]})}Px.createRoot(document.getElementById("root")).render(o.jsx(L.StrictMode,{children:o.jsx(Vse,{children:o.jsx(cOe,{children:o.jsx(PB,{children:o.jsx(SRe,{})})})})}));
//# sourceMappingURL=index-BoA-QaY1.js.map
